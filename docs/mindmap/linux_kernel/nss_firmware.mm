<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1394946224267" ID="ID_234228179" MODIFIED="1394946234597" TEXT="nss_firmware">
<node CREATED="1395322400873" ID="ID_783874325" MODIFIED="1413845993000" POSITION="right" TEXT="projects">
<node CREATED="1395322430558" FOLDED="true" ID="ID_1081238765" MODIFIED="1413846097552" TEXT="retail router 0">
<node CREATED="1394950146820" FOLDED="true" ID="ID_1494593983" MODIFIED="1413846095416">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_boot
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1395542018725" ID="ID_1368919890" MODIFIED="1395542167323">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;nss_proc/projects/retail_router0/build/include/ubicomSDK.h&#20013;&#30340;&#23439;&#23450;&#20041;&#65292;
    </p>
    <p>
      &#36873;&#25321;&#25191;&#34892;&#21508;&#20010;package&#30340;system boot hook
    </p>
  </body>
</html></richcontent>
<node CREATED="1395542187555" ID="ID_976181878" LINK="#ID_141108556" MODIFIED="1395542337040" TEXT="LOCK_PKG_BOOT"/>
<node CREATED="1395542199235" ID="ID_667714612" LINK="#ID_651134427" MODIFIED="1395542451265" TEXT="IPDEBUG_PKG_BOOT"/>
</node>
</node>
<node CREATED="1394947025310" FOLDED="true" ID="ID_1519806007" MODIFIED="1413846094641">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_init
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1395542560730" ID="ID_360838415" MODIFIED="1395542618940">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;nss_proc/projects/retail_router0/build/include/ubicomSDK.h&#20013;&#30340;&#23439;&#23450;&#20041;&#65292;
    </p>
    <p>
      &#36873;&#25321;&#25191;&#34892;&#21508;&#20010;package&#30340;system init hook
    </p>
  </body>
</html></richcontent>
<node CREATED="1395542633198" ID="ID_758106041" LINK="#ID_41459333" MODIFIED="1395542955675" TEXT="IPHAL_PKG_INIT"/>
<node CREATED="1395542642978" ID="ID_1128861145" LINK="#ID_1784099714" MODIFIED="1395543030668" TEXT="INTERRUPT_PKG_INIT"/>
<node CREATED="1395542652470" ID="ID_1507759169" LINK="#ID_749343030" MODIFIED="1395543231092" TEXT="HEAP_MGR_PKG_INIT"/>
<node CREATED="1395542662670" ID="ID_1429507418" LINK="#ID_1476451991" MODIFIED="1395543274645" TEXT="CTX_MGR_PKG_INIT"/>
<node CREATED="1395542673802" ID="ID_887687802" LINK="#ID_94421363" MODIFIED="1395543320319" TEXT="TIMER_PKG_INIT"/>
<node CREATED="1395542682104" ID="ID_1889395190" LINK="#ID_133618350" MODIFIED="1395543358789" TEXT="ONESHOT_PKG_INIT"/>
<node CREATED="1395542694618" ID="ID_699613703" LINK="#ID_1602982606" MODIFIED="1395543414647" TEXT="PBUF_MGR_PKG_INIT"/>
</node>
<node CREATED="1395542720154" ID="ID_1283892189" LINK="#ID_812336558" MODIFIED="1395543781637" TEXT="init"/>
</node>
<node CREATED="1395503083021" FOLDED="true" ID="ID_812336558" MODIFIED="1413846092857">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      init
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/main.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1395543979164" ID="ID_1563208705" LINK="#ID_882632310" MODIFIED="1395544516421" TEXT="&#x8c03;&#x7528;oneshot_init&#x521d;&#x59cb;&#x5316;&#x5b9a;&#x65f6;&#x5668;rr0_sysmon_timer">
<node CREATED="1395544832257" ID="ID_1899998986" LINK="#ID_1761649568" MODIFIED="1395544908949" TEXT="&#x6b64;&#x5b9a;&#x65f6;&#x5668;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x662f;rr0_sysmon_timeout_event"/>
<node CREATED="1395544915837" ID="ID_1345056774" MODIFIED="1395544950199" TEXT="&#x6b64;&#x5b9a;&#x65f6;&#x5668;&#x7684;&#x4f5c;&#x7528;&#x662f;&#x5b9a;&#x65f6;&#x76d1;&#x63a7;&#x7cfb;&#x7edf;&#x4e2d;&#x5269;&#x4f59;&#x5185;&#x5b58;&#x7684;&#x591a;&#x5c11; "/>
</node>
<node CREATED="1395544543945" ID="ID_1761649568" MODIFIED="1395545073144">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20027;&#21160;&#35302;&#21457;&#23450;&#26102;&#22120;rr0_sysmon_timer&#65292;
    </p>
    <p>
      &#36825;&#23558;&#23548;&#33268;&#23450;&#26102;&#22120;rr0_sysmon_timer&#34987;&#27880;&#20876;&#24182;&#34987;&#32465;&#23450;&#21040;&#20989;&#25968;rr0_sysmon_timeout_event
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394954788211" FOLDED="true" ID="ID_1547329075" LINK="#ID_589678374" MODIFIED="1413846086122">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;worker_thread_init&#21021;&#22987;&#21270;9&#20010;worker thread
    </p>
  </body>
</html></richcontent>
<node CREATED="1395571328575" ID="ID_626831347" MODIFIED="1395571330677" TEXT="RR0_TIMER_WORKER_THREAD_INDEX"/>
<node CREATED="1395571336991" ID="ID_665937103" MODIFIED="1395571338563" TEXT="RR0_GMAC0_WORKER_THREAD_INDEX"/>
<node CREATED="1395571344273" ID="ID_288797400" MODIFIED="1395571344865" TEXT="RR0_GMAC1_WORKER_THREAD_INDEX"/>
<node CREATED="1395571351945" ID="ID_215532329" MODIFIED="1395571352457" TEXT="RR0_ETH_BRIDGE_RX_WORKER_THREAD_INDEX"/>
<node CREATED="1395571359319" ID="ID_1814849174" MODIFIED="1395571361881" TEXT="RR0_ETH_RX_WORKER_THREAD_INDEX"/>
<node CREATED="1395571368381" ID="ID_1920846116" MODIFIED="1395571370163" TEXT="RR0_IPV4_RX_WORKER_THREAD_INDEX"/>
<node CREATED="1395571375395" ID="ID_1717413798" MODIFIED="1395571376017" TEXT="RR0_IPV6_RX_WORKER_THREAD_INDEX"/>
<node CREATED="1395571384355" ID="ID_63596090" MODIFIED="1395571386067" TEXT="RR0_N2H_WORKER_THREAD_INDEX"/>
<node CREATED="1395571392597" ID="ID_42107798" MODIFIED="1395571393459" TEXT="RR0_TUN6RD_WORKER_THREAD_INDEX"/>
<node CREATED="1395571401489" ID="ID_1988840674" MODIFIED="1395571402881" TEXT="RR0_TUNIPIP6_WORKER_THREAD_INDEX"/>
</node>
<node CREATED="1394955164388" ID="ID_1695221406" MODIFIED="1394955197470" TEXT="&#x8c03;&#x7528;lock_init&#x521d;&#x59cb;&#x5316;rr0_info-&gt;lock">
<node CREATED="1395566494190" ID="ID_1107218644" MODIFIED="1395566507036" TEXT="&#x6b64;&#x9501;&#x7528;&#x4e8e;"/>
</node>
<node CREATED="1394955045329" ID="ID_1254491082" LINK="#ID_1952425393" MODIFIED="1395570190855">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;&#20989;&#25968;pnode_registry_init&#21021;&#22987;&#21270;pnode&#20179;&#24211;rr0_info-&gt;pr
    </p>
  </body>
</html></richcontent>
<node CREATED="1395570198165" ID="ID_1259074486" MODIFIED="1395570256011" TEXT="&#x8fd9;&#x4e2a;pnode&#x4ed3;&#x5e93;&#x662f;&#x6240;&#x6709;&#x5728;retail router 0&#x4e0a;&#x5904;&#x7406;&#x5305;&#x7684;pnode&#x7684;&#x96c6;&#x5408;"/>
</node>
<node CREATED="1395570360183" FOLDED="true" ID="ID_1746856126" MODIFIED="1413846077921" TEXT="&#x5efa;&#x7acb;retail router 0&#x4e0a;&#x5305;&#x5904;&#x7406;&#x6d41;&#x6c34;&#x7ebf;">
<node CREATED="1395573252417" FOLDED="true" ID="ID_1848816119" MODIFIED="1413846039673" TEXT="&#x6982;&#x7565;&#x56fe;">
<node CREATED="1396343654660" ID="ID_1913074884" MODIFIED="1413846008388">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_pnode_list.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node CREATED="1395573255217" ID="ID_501413691" MODIFIED="1395573293116" TEXT="&#x5efa;&#x7acb;pnode : n2h">
<node CREATED="1395573306276" ID="ID_1386948545" LINK="#ID_1276778757" MODIFIED="1395573422059">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      n2h_init
    </p>
    <p>
      &#21021;&#22987;&#21270;n2h&#36825;&#20010;pnode : rr0_info-&gt;n2h_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395573453727" ID="ID_806876082" LINK="#ID_1447797807" MODIFIED="1395573708679" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;n2h&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1395573255217" ID="ID_1291128390" MODIFIED="1395574429220" TEXT="&#x5efa;&#x7acb;pnode : eth_bridge_rx">
<node CREATED="1395573306276" ID="ID_1751229411" LINK="#ID_1203362584" MODIFIED="1395574144785">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      eth_bridge_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;eth_bridge_rx&#36825;&#20010;pnode : rr0_info-&gt;l2switch_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395573453727" ID="ID_126835153" LINK="#ID_1447797807" MODIFIED="1395573929123" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;eth_bridge_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1395573255217" ID="ID_857032938" MODIFIED="1395574487111" TEXT="&#x5efa;&#x7acb;pnode : eth_rx">
<node CREATED="1395573306276" ID="ID_529926713" LINK="#ID_817626186" MODIFIED="1395574644936">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      eth_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;eth_rx&#36825;&#20010;pnode : rr0_info-&gt;eth_rx_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395573453727" ID="ID_61871459" LINK="#ID_1447797807" MODIFIED="1395574543149" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;eth_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_157603745" MODIFIED="1395574989101" TEXT="&#x5efa;&#x7acb;pnode : ipv4oe_rx">
<node CREATED="1394955229678" ID="ID_624579250" LINK="#ID_1199338897" MODIFIED="1395575271602">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv4oe_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;ipv4oe_rx&#36825;&#20010;pnode&#160;: rr0_ipv4oe_rx
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_116847118" LINK="#ID_1952425393" MODIFIED="1395575177576" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;ipv4oe_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_36236591" MODIFIED="1395575719857" TEXT="&#x5efa;&#x7acb;pnode : ipv4_rx">
<node CREATED="1394955229678" ID="ID_186264590" LINK="#ID_1897280892" MODIFIED="1395575914799">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv4_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;ipv4_rx&#36825;&#20010;pnode&#160;: rr0_info-&gt;ipv4_rx_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_1546979094" LINK="#ID_1952425393" MODIFIED="1395575844867" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;ipv4_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_1838768707" MODIFIED="1395576305922" TEXT="&#x5efa;&#x7acb;pnode : corefreq">
<node CREATED="1394955229678" ID="ID_151392263" LINK="#ID_1264447212" MODIFIED="1395576292064">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      corefreq_init
    </p>
    <p>
      &#21021;&#22987;&#21270;corefreq&#36825;&#20010;pnode&#160;: rr0_cfsi
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_1865482654" LINK="#ID_1952425393" MODIFIED="1395576318898" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;corefreq&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_1234792608" MODIFIED="1395576410504" TEXT="&#x5efa;&#x7acb;pnode : ipv6oe_rx">
<node CREATED="1394955229678" ID="ID_1548086749" LINK="#ID_588077376" MODIFIED="1395576587906">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv6oe_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;ipv6oe_rx&#36825;&#20010;pnode&#160;: rr0_ipv6oe_rx
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_1359695611" LINK="#ID_1952425393" MODIFIED="1395576601971" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;ipv6oe_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_697682731" MODIFIED="1395576795713" TEXT="&#x5efa;&#x7acb;pnode : ipv6_rx">
<node CREATED="1394955229678" ID="ID_1505026057" LINK="#ID_1142055601" MODIFIED="1395576806469">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv6_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;ipv6_rx&#36825;&#20010;pnode&#160;: rr0_info-&gt;ipv6_rx_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_93422667" LINK="#ID_1952425393" MODIFIED="1395576726551" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;ipv6_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_1052376395" MODIFIED="1395576923757" TEXT="&#x5efa;&#x7acb;pnode : tun6rd">
<node CREATED="1394955229678" ID="ID_1699098858" LINK="#ID_1815590944" MODIFIED="1395577030745">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      tun6rd_init
    </p>
    <p>
      &#21021;&#22987;&#21270;tun6rd&#36825;&#20010;pnode&#160;: rr0_info-&gt;tun6rd_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_695367707" LINK="#ID_1952425393" MODIFIED="1395576974077" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;tun6rd&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_762512007" MODIFIED="1395577894556" TEXT="&#x5efa;&#x7acb;pnode : tunipip6">
<node CREATED="1394955229678" ID="ID_1423772239" LINK="#ID_553676622" MODIFIED="1395578435511">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      tunipip6_init
    </p>
    <p>
      &#21021;&#22987;&#21270;tunipip6&#36825;&#20010;pnode&#160;: rr0_info-&gt;tunipip6_node
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394955743648" ID="ID_1670993103" LINK="#ID_1952425393" MODIFIED="1395577933665" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;tunipip6&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1394955825299" ID="ID_1728240193" MODIFIED="1395578340696" TEXT="&#x5efa;&#x7acb;pnode : pppoe">
<node CREATED="1394955229678" ID="ID_1320263445" LINK="#ID_1815590944" MODIFIED="1395578398550">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppoe_rx_init
    </p>
    <p>
      &#21021;&#22987;&#21270;pppoe&#36825;&#20010;pnode&#160;: rr0_info-&gt;pppoe_rx_node
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396345031263" ID="ID_618782427" MODIFIED="1396345253128">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20026;&#27599;&#20010;gmac&#24314;&#31435;pnode : synopsys_gmac
    </p>
    <p>
      &#24182;&#25351;&#23450;eth_rx&#20026;&#23427;&#30340;&#19979;&#19968;&#20010;&#22788;&#29702;&#33410;&#28857;
    </p>
    <p>
      rr0_create_gmac
    </p>
  </body>
</html></richcontent>
<node CREATED="1396345087114" ID="ID_892988130" MODIFIED="1396345279648" TEXT="&#x5206;&#x914d;&#x7ed3;&#x6784;&#x4f53;struct synopsys_gmac"/>
<node CREATED="1396345520337" ID="ID_1851220198" MODIFIED="1396345534759" TEXT="&#x521d;&#x59cb;&#x5316;pppoe session match entries"/>
<node CREATED="1394955743648" ID="ID_1175460332" LINK="#ID_1952425393" MODIFIED="1396345606049" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;synopsys_gmac&#x8fd9;&#x4e2a;pnode"/>
<node CREATED="1396345567687" ID="ID_1055127861" MODIFIED="1396345739269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25351;&#23450;eth_rx&#20026;&#23427;&#30340;&#19979;&#19968;&#20010;&#22788;&#29702;&#33410;&#28857;
    </p>
    <p>
      &#21363;&#25152;&#26377;&#20174;synopsys_gmac&#25910;&#21040;&#30340;&#21253;&#37117;&#36865;&#24448;eth_rx&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396345567687" ID="ID_69125172" MODIFIED="1396345800080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25351;&#23450;n2h&#20026;&#23427;&#30340;exception&#22788;&#29702;&#33410;&#28857;
    </p>
    <p>
      &#26377;&#20851;&#27492;gmac&#30340;&#32479;&#35745;&#20449;&#24687;&#36890;&#36807;n2h&#33410;&#28857;&#23450;&#26102;&#36865;&#24448;hlos
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396345897738" ID="ID_598428567" MODIFIED="1396345944150">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20026;&#27599;&#20010;LAG&#24314;&#31435;pnode : lag
    </p>
    <p>
      rr0_create_lag
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396345897738" ID="ID_530175526" MODIFIED="1396346632298">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20026;&#27599;&#20010;virtual interface&#24314;&#31435;pnode : redir_rx
    </p>
    <p>
      &#24182;&#25351;&#23450;n2h&#20026;&#23427;&#30340;&#19979;&#19968;&#20010;&#22788;&#29702;&#33410;&#28857;&#65292;&#21363;&#25152;&#26377;&#21457;&#24448;virtual interface&#30340;&#21253;&#26080;&#26465;&#20214;&#30452;&#25509;&#36865;&#21040;hlos
    </p>
    <p>
      redir_rx_init
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396346725626" ID="ID_1382181727" MODIFIED="1396346814248">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;&#19968;&#20010;&#23450;&#26102;&#22120;&#27599;&#38548;2ms&#23558;&#21508;&#31181;&#32479;&#35745;&#20449;&#24687;&#21457;&#36865;&#32473;hlos
    </p>
    <p>
      rr0_init_sync
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395503083021" FOLDED="true" ID="ID_1800280854" MODIFIED="1413846091644">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      start
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/main.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1396347661589" ID="ID_1581566639" LINK="#ID_72128282" MODIFIED="1396347866831" TEXT="&#x542f;&#x52a8;&#x7cfb;&#x7edf;&#x5b9a;&#x65f6;&#x5668;&#xff0c;&#x6b64;&#x5b9a;&#x65f6;&#x5668;&#x6bcf;&#x9694;1ms&#x66f4;&#x65b0;&#x4e00;&#x6b21;&#x7cfb;&#x7edf;ticks&#xff0c;&#x5e76;&#x8c03;&#x7528;&#x6ce8;&#x518c;&#x7684;event"/>
<node CREATED="1396348080789" ID="ID_1420144647" MODIFIED="1396348082571" TEXT="n2h_start">
<node CREATED="1396348183659" ID="ID_1046304841" MODIFIED="1396348533302">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work : nss_to_hlos_work
    </p>
    <p>
      &#20219;&#20309;&#26102;&#20505;nss&#38656;&#35201;&#21521;hlos&#21457;&#21253;&#26102;&#23558;&#35843;&#24230;&#27492;work&#65292;&#27492;work&#30001;&#20013;&#26029;n2hn-&gt;n2h_work_irq&#35302;&#21457;
    </p>
    <p>
      nss&#21521;hlos&#21457;&#36865;&#30340;&#21253;&#21253;&#25324;: empty buffer / packet / command
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396348183659" ID="ID_575222181" MODIFIED="1396348648412">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work : hlos_to_nss_empty_work
    </p>
    <p>
      &#27492;work&#29992;&#20110;&#25509;&#25910;&#20174;hlos&#21457;&#36807;&#26469;&#30340;empty buffer
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396348183659" ID="ID_427940033" MODIFIED="1396348778412">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work : hlos_to_nss_data_command_work
    </p>
    <p>
      &#27492;work&#29992;&#20110;&#25509;&#25910;&#20174;hlos&#21457;&#36807;&#26469;&#30340;packet&#25110;&#32773;command
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396348183659" ID="ID_160729226" MODIFIED="1396349019793">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work : n2h_timer_work
    </p>
    <p>
      &#27492;work&#29992;&#20110;&#23450;&#26102;&#36890;&#30693;hlos&#36824;&#26377;nss&#21457;&#32473;&#20182;&#30340;&#21253;&#35201;&#22788;&#29702;&#65292;
    </p>
    <p>
      &#36825;&#20027;&#35201;&#26159;&#20026;&#20102;&#38450;&#27490;&#20013;&#26029;&#20002;&#22833;&#32780;&#36896;&#25104;hlos&#19981;&#22788;&#29702;nss&#21457;&#32473;&#20182;&#30340;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396504700837" ID="ID_1051273674" MODIFIED="1396504957911" TEXT="&#x521b;&#x5efa;&#x5b9a;&#x65f6;&#x5668;n2h_buffer_refill&#xff0c;&#x6bcf;&#x9694;1&#x6beb;&#x79d2;&#x68c0;&#x67e5;nss&#x662f;&#x5426;&#x6709;&#x8db3;&#x591f;(2048)&#x7684;skbuf&#xff0c;&#xa;&#x82e5;&#x4e0d;&#x591f;&#x5219;&#x5411;hlos&#x53d1;&#x9001;N2H_NSS_REGS_INTR_STATUS_EMPTY_BUFFERS_SOS&#x4e2d;&#x65ad;"/>
</node>
<node CREATED="1396505108758" ID="ID_747146700" MODIFIED="1396505110943" TEXT="eth_bridge_rx_start">
<node CREATED="1396505124377" ID="ID_109961860" MODIFIED="1396505400676">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work&#65306;eth_bridge_rx_work
    </p>
    <p>
      &#29992;&#20110;&#22788;&#29702;&#38656;&#35201;bridge&#30340;&#21253;&#65292;&#20027;&#35201;&#23601;&#26159;&#26597;&#25214;FDB&#34920;&#28982;&#21518;&#26681;&#25454;&#25214;&#21040;&#30340;&#20986;&#25509;&#21475;&#21457;&#36865;&#21040;&#30456;&#24212;&#30340;synopsys_gmac&#33410;&#28857;&#65292;
    </p>
    <p>
      &#23545;&#20110;&#25214;&#19981;&#21040;FDB&#30340;&#21253;&#21017;&#23558;&#20854;&#21457;&#36865;&#32473;n2h&#33410;&#28857;&#65292;&#20063;&#23601;&#26159;&#21457;&#36865;&#21040;hlos&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396505108758" ID="ID_1952505610" MODIFIED="1396505450689" TEXT="eth_rx_start">
<node CREATED="1396505124377" ID="ID_1227862270" MODIFIED="1396505747507">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work&#65306;eth_rx_work
    </p>
    <p>
      &#22788;&#29702;&#20174;&#39537;&#21160;&#21644;hlos&#21457;&#36865;&#36807;&#26469;&#30340;&#21253;&#65292;&#20027;&#35201;&#26159;&#26681;&#25454;ethertype&#23558;&#21253;&#36865;&#24448;ipv4oe_rx/ipv6oe_rx/pppoe_rx&#31561;&#33410;&#28857;&#65292;
    </p>
    <p>
      &#26080;&#27861;&#35782;&#21035;&#30340;&#21253;&#21017;&#36865;&#24448;eth_bridge_rx&#33410;&#28857;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396505108758" ID="ID_1153042195" MODIFIED="1396506125611" TEXT="ipv4_rx_start">
<node CREATED="1396505124377" ID="ID_657723467" MODIFIED="1396506602967">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work&#65306;ipv4_rx_work
    </p>
    <p>
      &#22788;&#29702;ipv4&#21253;&#65292;&#23545;&#20110;tcp/udp&#30340;&#21253;&#26597;&#25214;connection match entry&#25214;&#21040;&#20986;&#25509;&#21475;&#20877;&#21457;&#36865;&#21040;synopsys_gmac&#33410;&#28857;&#65292;
    </p>
    <p>
      &#32780;&#23545;&#20110;ppp&#30340;&#21253;&#21017;&#21457;&#36865;&#21040;pppoe_rx&#33410;&#28857;&#65292;&#23545;&#20110;ipv4&#20869;&#23553;&#35013;&#30340;ipv6&#21253;&#21017;&#21457;&#36865;&#21040;tun6rd&#33410;&#28857;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396505108758" ID="ID_991674127" MODIFIED="1396506651295" TEXT="ipv6_rx_start">
<node CREATED="1396505124377" ID="ID_1753144483" MODIFIED="1396506678094">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work&#65306;ipv6_rx_work
    </p>
    <p>
      &#22788;&#29702;ipv6&#21253;&#65292;&#23545;&#20110;tcp/udp&#30340;&#21253;&#26597;&#25214;connection match entry&#25214;&#21040;&#20986;&#25509;&#21475;&#20877;&#21457;&#36865;&#21040;synopsys_gmac&#33410;&#28857;&#65292;
    </p>
    <p>
      &#32780;&#23545;&#20110;ppp&#30340;&#21253;&#21017;&#21457;&#36865;&#21040;pppoe_rx&#33410;&#28857;&#65292;&#23545;&#20110;ipv6&#20869;&#23553;&#35013;&#30340;ipv4&#21253;&#21017;&#21457;&#36865;&#21040;tunipip6&#33410;&#28857;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396506725263" ID="ID_582727156" MODIFIED="1396506726175" TEXT="tun6rd_start">
<node CREATED="1396506727165" ID="ID_1287661716" MODIFIED="1396506885670">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work &#65306;tun6rd_rx_process
    </p>
    <p>
      &#22788;&#29702;6rd tunnel&#19978;&#21457;&#36865;&#36807;&#26469;&#30340;&#21253;&#65292;6rd tunnel&#20063;&#26159;&#19968;&#20010;eth_node&#65292;&#23427;&#31867;&#20284;eth_rx&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396506725263" ID="ID_32982114" MODIFIED="1396506922379" TEXT="tunipip6_start">
<node CREATED="1396506727165" ID="ID_153662668" MODIFIED="1396506944253">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;work &#65306;tunipip6_rx_process
    </p>
    <p>
      &#22788;&#29702;ipip6 tunnel&#19978;&#21457;&#36865;&#36807;&#26469;&#30340;&#21253;&#65292;ipip6 tunnel&#20063;&#26159;&#19968;&#20010;eth_node&#65292;&#23427;&#31867;&#20284;eth_rx&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396507043398" ID="ID_1877180829" MODIFIED="1396507299957" TEXT="&#x7ed9;&#x6bcf;&#x4e2a;synopsys_gmac&#x8282;&#x70b9;&#x6307;&#x5b9a;&#x4e00;&#x4e2a;work thread&#x3002;&#x6ce8;&#x610f;synopsys_gmac&#x8282;&#x70b9;&#x4e2d;&#x7684;work &#xff1a;synopsys_gmac_work&#x662f;&#x5728;hlos&#x5bf9;synopsys_gmac&#x53d1;&#x51fa;open&#x7684;&#x547d;&#x4ee4;&#x540e;&#x624d;&#x521b;&#x5efa;&#x7684;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;synopsys_gmac&#x7684;&#x9a71;&#x52a8;&#x5728;hlos&#x4e2d;&#xff0c;&#x53ea;&#x6709;hlos&#x624d;&#x77e5;&#x9053;gmac&#x4ec0;&#x4e48;&#x65f6;&#x5019;up&#x8d77;&#x6765;&#x4e86;&#xff0c;&#x56e0;&#x6b64;synopsys_gmac&#x8282;&#x70b9;&#x4e2d;&#x7684;work&#x9700;&#x8981;&#x5728;hlos&#x9a71;&#x52a8;&#x7684;&#x6307;&#x5bfc;&#x4e0b;&#x521b;&#x5efa;"/>
<node CREATED="1396507357781" ID="ID_1843334663" LINK="#ID_1382181727" MODIFIED="1396507378943" TEXT="&#x542f;&#x52a8;sync&#x5b9a;&#x65f6;&#x5668;"/>
<node CREATED="1396507441679" ID="ID_1912802953" LINK="#ID_1547329075" MODIFIED="1396507547399" TEXT="&#x542f;&#x52a8;&#x6240;&#x6709;9&#x4e2a;worker thread&#xff0c;&#x5e76;&#x6682;&#x505c;&#x5f53;&#x524d;thread&#xff0c;&#x81f3;&#x6b64;&#x521d;&#x59cb;&#x5316;&#x8fc7;&#x7a0b;&#x5168;&#x90e8;&#x7ed3;&#x675f;"/>
</node>
</node>
<node CREATED="1395322430558" FOLDED="true" ID="ID_1747043621" MODIFIED="1395541635676" TEXT="retail router 1">
<node CREATED="1394950146820" ID="ID_1558100174" MODIFIED="1395503112673">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_boot
    </p>
    <p>
      nss_proc/projects/retail_router1/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1394950852531" FOLDED="true" ID="ID_307401623" MODIFIED="1395502918634">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      lock_pkg_boot
    </p>
    <p>
      nss_proc/pkg/lock/src/lock.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1394951028605" ID="ID_1785862428" MODIFIED="1394951030947" TEXT="lock_stats_state"/>
<node CREATED="1394951042835" ID="ID_1411157864" MODIFIED="1394951043367" TEXT="lock_contend"/>
<node CREATED="1394951050415" ID="ID_920134922" MODIFIED="1394951051087" TEXT="lock_stats_held"/>
<node CREATED="1394951057595" ID="ID_323584849" MODIFIED="1394951058047" TEXT="lock_stats_wait"/>
<node CREATED="1394951064005" ID="ID_1294286248" MODIFIED="1394951064447" TEXT="lock_stats_order"/>
<node CREATED="1394951070665" ID="ID_584332770" MODIFIED="1394951071157" TEXT="lock_stats_contend"/>
</node>
<node CREATED="1394952225546" ID="ID_1503585999" MODIFIED="1394952259131">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      debug_init
    </p>
    <p>
      nss_proc/pkg/ipDebug/src/debug.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395503083021" ID="ID_599493682" MODIFIED="1395503102905">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_init
    </p>
    <p>
      nss_proc/projects/retail_router1/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395503083021" ID="ID_333516159" MODIFIED="1395503307806">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      start
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/main.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395322571950" ID="ID_222449918" MODIFIED="1395322581884" TEXT="enterprise ap 0"/>
<node CREATED="1395322571950" ID="ID_428662462" MODIFIED="1395322590862" TEXT="enterprise ap 1"/>
<node CREATED="1395322607354" ID="ID_1139361598" MODIFIED="1395322621678" TEXT="carrier router 0"/>
<node CREATED="1395322607354" ID="ID_188032057" MODIFIED="1395322631220" TEXT="carrier router 1"/>
</node>
<node CREATED="1395470543608" ID="ID_1851544662" MODIFIED="1395470557800" POSITION="right" TEXT="memory map">
<node CREATED="1395470749569" FOLDED="true" ID="ID_134282528" MODIFIED="1413845986480" TEXT="system address map">
<node CREATED="1395470766719" ID="ID_1516575191" MODIFIED="1413845977932">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_memory_map.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node CREATED="1396507637072" ID="ID_1691099249" MODIFIED="1413845988944" POSITION="right" TEXT="pnode">
<node CREATED="1396507653803" ID="ID_1168171246" LINK="#ID_1848816119" MODIFIED="1396507712680" TEXT="retail router 0"/>
</node>
<node CREATED="1396670014055" ID="ID_834256098" MODIFIED="1396670021650" POSITION="right" TEXT="interface number map"/>
<node CREATED="1394976675660" ID="ID_450497694" MODIFIED="1394976682712" POSITION="left" TEXT="hardware thread">
<node CREATED="1394976685660" ID="ID_1464434709" MODIFIED="1394976688442" TEXT="software"/>
<node CREATED="1394976689070" ID="ID_1887889093" MODIFIED="1394976692022" TEXT="hardware"/>
<node CREATED="1395325219904" FOLDED="true" ID="ID_435097428" MODIFIED="1413846200896" TEXT="thread scheduling">
<node CREATED="1395458273989" ID="ID_705061334" MODIFIED="1395458284111" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1395458291900" ID="ID_1674470573" MODIFIED="1395458528072">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      thread&#35843;&#24230;&#20998;&#20026;3&#32423;&#65306;
    </p>
    <p>
      &#39318;&#20808;&#26681;&#25454;HRT&#34920;&#25214;&#19968;&#20010;&#21487;&#35843;&#24230;&#30340;&#32447;&#31243;&#65292;&#33509;&#25214;&#19981;&#21040;
    </p>
    <p>
      &#20877;&#26681;&#25454;NRT&#34920;&#25214;&#19968;&#20010;&#21487;&#35843;&#24230;&#30340;&#32447;&#31243;&#65292;&#33509;&#25214;&#19981;&#21040;
    </p>
    <p>
      &#26368;&#21518;&#25353;&#29031;round-robin&#35268;&#21017;&#23545;&#25152;&#26377;&#19981;&#22312;HRT,NRT&#20013;&#30340;&#32447;&#31243;&#36827;&#34892;&#35843;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395477120360" ID="ID_1310907929" MODIFIED="1395477260783" TEXT="HRT&#x8868;&#x4e2d;&#x7684;&#x7ebf;&#x7a0b;&#x4ee3;&#x8868;&#x5b9e;&#x65f6;&#x7ebf;&#x7a0b;&#xff0c;&#x7531;&#x4e8e;HRT&#x8868;&#x9759;&#x6001;&#x5730;&#x5206;&#x914d;&#x4e86;cpu cycle&#xff0c;&#xa;&#x6240;&#x4ee5;&#x5b9e;&#x65f6;&#x7ebf;&#x7a0b;&#x7684;&#x54cd;&#x5e94;&#x65f6;&#x95f4;&#x662f;&#x80fd;&#x5f97;&#x5230;&#x7cbe;&#x786e;&#x4fdd;&#x969c;&#x7684;"/>
<node CREATED="1395456019743" ID="ID_765590681" MODIFIED="1395456089117" TEXT="&#x6bcf;&#x4e2a;thread&#x5728;&#x5bc4;&#x5b58;&#x5668;MT_HRT&#x4e2d;&#x5bf9;&#x5e94;&#x4e86;&#x4e00;&#x4e2a;bit&#xff0c;&#x7528;&#x4e8e;&#x8868;&#x660e;&#x8fd9;&#x4e2a;thread&#x662f;&#x6309;HRT&#x7b56;&#x7565;&#x8fd8;&#x662f;&#x6309;NRT&#x7b56;&#x7565;&#x8c03;&#x5ea6;"/>
</node>
<node CREATED="1395456215705" ID="ID_791609383" MODIFIED="1395456256107" TEXT="&#x5982;&#x4f55;&#x5224;&#x65ad;thread&#x662f;schedulable&#x7684;">
<node CREATED="1395456299505" ID="ID_466987662" MODIFIED="1395456853765">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#22914;&#19979;3&#20010;bit&#37117;&#32622;&#20301;&#26102;thread&#23601;&#26159;&#21487;&#35843;&#24230;&#30340;&#65306;
    </p>
    <p>
      MT_EN &#65306;thread&#34987;enable&#65292;&#29992;&#20110;&#25552;&#20379;&#31649;&#29702;&#21592;&#25511;&#21046;thread&#26159;&#21542;&#33021;&#21551;&#29992;
    </p>
    <p>
      MT_DBG_ACTIVE &#65306;&#28165;&#38500;&#36825;&#19968;&#20301;&#35753;thread&#20572;&#27490;&#25191;&#34892;&#20197;&#36827;&#20837;&#35843;&#35797;&#27169;&#24335;
    </p>
    <p>
      MT_ACTIVE &#65306;&#24403;&#25191;&#34892;&#30340;&#25351;&#20196;suspend cpu&#26102;&#28165;&#38500;&#36825;&#19968;&#20301;&#65292;&#32780;&#25910;&#21040;&#20013;&#26029;&#21518;&#35774;&#32622;&#27492;&#20301;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395325262984" FOLDED="true" ID="ID_606832464" MODIFIED="1413846137474" TEXT="HRT(hard real time thread)">
<node CREATED="1395472864733" ID="ID_611143886" MODIFIED="1395479242201" TEXT="HRT table &#x6307;&#x5b9a;&#x4e86;&#x5982;&#x4f55;&#x8c03;&#x5ea6;&#x9700;&#x8981;&#x5b9e;&#x65f6;&#x54cd;&#x5e94;&#x7684;&#x7ebf;&#x7a0b;. HRT table&#x6709;64&#x4e2a;&#x6761;&#x76ee;&#xff0c;&#x6bcf;&#x4e2a;&#x6761;&#x76ee;&#x5bf9;&#x5e94;&#x4e86;CPU&#x7684;&#x4e00;&#x4e2a;cycle&#xff0c;&#x5b83;&#x544a;&#x8bc9;CPU&#x5728;&#x5f53;&#x524d;cycle&#x4e2d;&#x5e94;&#x8be5;&#x8c03;&#x5ea6;&#x54ea;&#x4e2a;&#x7ebf;&#x7a0b;. &#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x73af;&#x5f62;&#x7684;&#x8868;&#xff0c;HRT&#x8868;&#x7684;&#x8868;&#x6307;&#x9488;&#x6bcf;&#x8fd0;&#x884c;&#x4e00;&#x4e2a;cycle&#x4fbf;&#x6307;&#x5411;&#x4e0b;&#x4e00;&#x4e2a;HRT&#x6761;&#x76ee;&#xff0c;&#x5230;&#x4e86;&#x8868;&#x5c3e;&#x518d;&#x4ece;&#x8868;&#x5934;&#x53c8;&#x5f00;&#x59cb;&#x5faa;&#x73af;&#x3002;"/>
<node CREATED="1395470443198" ID="ID_153263976" MODIFIED="1413846115896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_hrt.jpg" />
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1395473199459" ID="ID_880810133" MODIFIED="1395473233601" TEXT="thread number : &#x6307;&#x5b9a;&#x5728;&#x5f53;&#x524d;cycle&#x4e2d;&#x8c03;&#x5ea6;&#x54ea;&#x4e2a;&#x7ebf;&#x7a0b;"/>
<node CREATED="1395473265529" ID="ID_133187042" MODIFIED="1395475969183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unoccupied : 0&#34920;&#31034;&#35201;&#22312;&#24403;&#21069;cycle&#20013;&#36816;&#34892;thread number&#25351;&#23450;&#30340;&#32447;&#31243;,
    </p>
    <p>
      &#32780;1&#34920;&#31034;&#24403;&#21069;cycle&#19981;&#34987;HRT&#32447;&#31243;&#25152;&#20351;&#29992;&#65292;&#23427;&#34987;&#20998;&#37197;&#32473;NRT&#32447;&#31243;&#25110;NRT round-robin&#32447;&#31243;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395476015453" ID="ID_1544558651" MODIFIED="1395476061249" TEXT="end of table : &#x8868;&#x793a;HRT&#x8868;&#x7684;&#x7ed3;&#x5c3e;&#xff0c;&#x4e0b;&#x4e00;&#x4e2a;cycle&#x518d;&#x4ece;&#x8868;&#x5934;&#x5f00;&#x59cb;"/>
</node>
<node CREATED="1395473162379" ID="ID_59119932" MODIFIED="1395477033620">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31995;&#32479;&#20013;&#26377;&#20004;&#24352;HRT table&#65292;&#20854;&#23384;&#25918;&#30340;&#20301;&#32622;&#20026;&#65306;
    </p>
    <p>
      UBICOM32_HRT_TABLE0_BASE&#160;&#160;=&#160;&#160;0x3d000800
    </p>
    <p>
      UBICOM32_HRT_TABLE1_BASE&#160;&#160;=&#160;&#160;0x3d000900
    </p>
    <p>
      &#20854;&#20013;&#19968;&#24352;&#26159;active&#30340;&#65292;&#34987;cpu&#29992;&#20110;&#35843;&#24230;&#32447;&#31243;
    </p>
    <p>
      &#21478;&#19968;&#24352;&#29992;&#20110;&#20462;&#25913;HRT&#34920;&#65292;&#23492;&#23384;&#22120;GLOBAL_CTRL&#30340;bit 2&#29992;&#20110;&#22312;&#36825;2&#24352;&#34920;&#20043;&#38388;&#20999;&#25442;&#12290;
    </p>
    <p>
      &#20999;&#25442;&#24182;&#19981;&#21450;&#26102;&#29983;&#25928;&#65292;&#32780;&#26159;&#22312;CPU&#36941;&#21382;&#21040;&#24403;&#21069;HRT&#34920;&#30340;&#32467;&#23614;&#22788;&#20877;&#36339;&#21040;&#26032;&#34920;&#30340;&#24320;&#22836;&#22788;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395477455012" ID="ID_1118611228" MODIFIED="1413846120324" TEXT="&#x4e3e;&#x4f8b;">
<node CREATED="1395477460602" ID="ID_63568909" MODIFIED="1413846129888">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_hrt_example.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1395477471204" ID="ID_1672036736" MODIFIED="1395477704287">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HRT&#34920;&#22914;&#31532;&#19968;&#34892;&#25152;&#31034;&#65292;&#36825;&#34920;&#31034;HRT&#34920;&#26377;8&#20010;&#26465;&#30446;&#12290;&#26681;&#25454;&#27492;&#34920;&#65306;
    </p>
    <p>
      &#31532;1, 3, 5, 7&#20010;cycle&#35843;&#24230;&#32447;&#31243;1&#65292;&#31532;2, 6&#20010;cycle&#35843;&#24230;&#32447;&#31243;2&#65292;&#31532;4&#20010;cycle&#35843;&#24230;&#32447;&#31243;3&#65292;&#31532;8&#20010;cycle&#35843;&#24230;NRT&#32447;&#31243;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395477798502" ID="ID_1112495785" LINK="#ID_791609383" MODIFIED="1395477963167" TEXT="&#x6ce8;&#x610f; &#xff1a;&#x82e5;&#x5f53;&#x524d;cycle&#x4e2d;HRT&#x6761;&#x76ee;&#x6307;&#x5b9a;&#x7684;&#x7ebf;&#x7a0b;&#x662f;&#x4e0d;&#x53ef;&#x8c03;&#x5ea6;&#x7684;&#xff0c;&#x5219;&#x5f53;&#x524d;cycle&#x88ab;&#x8ba4;&#x4e3a;&#x662f;unoccupied&#x5373;&#x662f;&#x7a7a;&#x7f3a;&#x7684;&#xff0c;&#xa;&#x5b83;&#x5c06;&#x88ab;&#x7528;&#x4e8e;&#x8c03;&#x5ea6;NRT&#x7ebf;&#x7a0b;"/>
</node>
<node CREATED="1395325314014" FOLDED="true" ID="ID_1019742649" MODIFIED="1413846183513" TEXT="NRT(none real time thread)">
<node CREATED="1395472864733" ID="ID_1120900701" MODIFIED="1395479360187" TEXT="&#x4e0e;HRT table&#x76f8;&#x4f3c;&#xff0c;NRT table &#x4e5f;&#x6307;&#x5b9a;&#x4e86;&#x5728;&#x4e00;&#x4e2a;cycle&#x4e2d;&#x8c03;&#x5ea6;&#x54ea;&#x4e2a;&#x7ebf;&#x7a0b;&#xff0c;&#x4f46;&#x662f;NRT table&#x4e2d;&#x5b89;&#x6392;&#x7684;&#x7ebf;&#x7a0b;&#x76f8;&#x8f83;&#x4e8e;HRT&#x4f18;&#x5148;&#x7ea7;&#x8f83;&#x4f4e;&#xff0c;&#x4e0d;&#x662f;&#x5b9e;&#x65f6;&#x7ebf;&#x7a0b;&#xff0c;&#x5b83;&#x4eec;&#x7684;&#x54cd;&#x5e94;&#x65f6;&#x95f4;&#x4e0d;&#x80fd;&#x5f97;&#x5230;&#x7cbe;&#x786e;&#x4fdd;&#x969c;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#x4ec5;&#x5f53;HRT&#x6761;&#x76ee;&#x4e3a;vacation&#x65f6;&#x6216;HRT&#x6761;&#x76ee;&#x6307;&#x5b9a;&#x7684;&#x7ebf;&#x7a0b;&#x4e0d;&#x53ef;&#x8c03;&#x5ea6;&#x65f6;&#x624d;&#x4f1a;&#x8c03;&#x5ea6;&#x5230;NRT&#x7ebf;&#x7a0b;&#x3002;&#xa;NRT table&#x6709;32&#x4e2a;&#x6761;&#x76ee;&#xff0c;&#x6bcf;&#x4e2a;&#x6761;&#x76ee;&#x5bf9;&#x5e94;&#x4e86;CPU&#x7684;&#x4e00;&#x4e2a;cycle&#xff0c;&#x5b83;&#x544a;&#x8bc9;CPU&#x5728;&#x5f53;&#x524d;cycle&#x4e2d;&#x5e94;&#x8be5;&#x8c03;&#x5ea6;&#x54ea;&#x4e2a;&#x7ebf;&#x7a0b;. &#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x73af;&#x5f62;&#x7684;&#x8868;&#xff0c;NRT&#x8868;&#x7684;&#x8868;&#x6307;&#x9488;&#x5728;&#x6bcf;&#x6b21;&#x8c03;&#x5ea6;&#x5230;NRT&#x8868;&#x65f6;(&#x6ca1;&#x6709;&#x547d;&#x4e2d;HRT&#x8868;)&#x4fbf;&#x6307;&#x5411;&#x4e0b;&#x4e00;&#x4e2a;HRT&#x6761;&#x76ee;&#xff0c;&#x5230;&#x4e86;&#x8868;&#x5c3e;&#x518d;&#x4ece;&#x8868;&#x5934;&#x53c8;&#x5f00;&#x59cb;&#x5faa;&#x73af;&#x3002;"/>
<node CREATED="1395478377392" FOLDED="true" ID="ID_865079575" MODIFIED="1413846148428">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_nrt.jpg" />
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1395473199459" ID="ID_1611135165" MODIFIED="1395473233601" TEXT="thread number : &#x6307;&#x5b9a;&#x5728;&#x5f53;&#x524d;cycle&#x4e2d;&#x8c03;&#x5ea6;&#x54ea;&#x4e2a;&#x7ebf;&#x7a0b;"/>
<node CREATED="1395473265529" ID="ID_581344288" MODIFIED="1395478528704">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      valid : 1&#34920;&#31034;&#24403;&#21069;&#26465;&#30446;&#34987;&#21551;&#29992;&#65292;&#35201;&#22312;&#24403;&#21069;cycle&#20013;&#36816;&#34892;thread number&#25351;&#23450;&#30340;&#32447;&#31243;,
    </p>
    <p>
      &#32780;0&#34920;&#31034;&#24403;&#21069;&#26465;&#30446;&#26410;&#34987;&#21551;&#29992;&#65292;&#23427;&#23558;&#34987;&#20998;&#37197;&#32473;NRT round-robin&#32447;&#31243;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395477798502" ID="ID_957346240" LINK="#ID_791609383" MODIFIED="1395479452916" TEXT="&#x6ce8;&#x610f; &#xff1a;&#x82e5;&#x5f53;&#x524d;cycle&#x4e2d;NRT&#x6761;&#x76ee;&#x6307;&#x5b9a;&#x7684;&#x7ebf;&#x7a0b;&#x662f;&#x4e0d;&#x53ef;&#x8c03;&#x5ea6;&#x7684;&#xff0c;&#x5219;&#x5f53;&#x524d;cycle&#x88ab;&#x8ba4;&#x4e3a;&#x662f;unvalidated&#x5373;&#x662f;&#x7a7a;&#x7f3a;&#x7684;&#xff0c;&#xa;&#x5b83;&#x5c06;&#x88ab;&#x7528;&#x4e8e;&#x8c03;&#x5ea6;NRT round-robin&#x7ebf;&#x7a0b;"/>
<node CREATED="1395479913942" FOLDED="true" ID="ID_1000851368" MODIFIED="1413846181488" TEXT="&#x4e3e;&#x4f8b;">
<node CREATED="1395479921072" ID="ID_1672846607" MODIFIED="1413846179544">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_nrt_example_1.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1395479939155" ID="ID_128742511" MODIFIED="1395480197756">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HRT table &#21644; NRT table&#22914;&#19978;&#25152;&#31034;&#65292;&#35774;&#25152;&#26377;&#32447;&#31243;&#37117;&#26159;&#21487;&#35843;&#24230;&#30340;&#65292;
    </p>
    <p>
      &#21017;&#20135;&#29983;&#22914;&#24038;&#25152;&#31034;&#35843;&#24230;&#24207;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1395479941045" ID="ID_1635908533" MODIFIED="1413846160883">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_nrt_example_2.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node CREATED="1395479939155" ID="ID_1504813580" MODIFIED="1395480331372">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HRT table &#21644; NRT table&#22914;&#19978;&#25152;&#31034;&#65292;&#35774;&#32447;&#31243;1&#26159;&#19981;&#21487;&#35843;&#24230;&#30340;&#65292;
    </p>
    <p>
      &#21017;&#20135;&#29983;&#22914;&#24038;&#25152;&#31034;&#35843;&#24230;&#24207;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1395480305706" ID="ID_1189952880" MODIFIED="1413846168861">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/nss_nrt_example_3.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1395455928101" FOLDED="true" ID="ID_808375048" MODIFIED="1413846185816" TEXT="NRT round-robin">
<node CREATED="1395480533284" ID="ID_239227293" MODIFIED="1395480932570">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25152;&#26377;&#26082;&#19981;&#22312;HRT&#34920;&#20013;&#20063;&#19981;&#22312;NRT&#34920;&#20013;&#30340;&#32447;&#31243;&#23558;&#20197;&#36718;&#36716;(round robin)&#30340;&#26041;&#24335;&#36827;&#34892;&#35843;&#24230;&#65292;&#21363;&#27599;&#20010;cycle&#35843;&#24230;&#19968;&#20010;&#32447;&#31243;&#12290;&#20165;&#24403;&#22312;HRT&#21644;NRT&#34920;&#20013;&#37117;&#25214;&#19981;&#21040;&#35201;&#35843;&#24230;&#30340;&#32447;&#31243;&#26102;&#25165;&#35843;&#24230;round-robin&#38598;&#21512;&#20013;&#30340;&#32447;&#31243;&#65292;&#22240;&#32780;round-robin&#38598;&#21512;&#20013;&#30340;&#32447;&#31243;&#20248;&#20808;&#32423;&#26368;&#20302;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395481552200" ID="ID_1084756676" MODIFIED="1395481561182" TEXT="&#x7ebf;&#x7a0b;&#x4f18;&#x5148;&#x7ea7;">
<node CREATED="1395481564320" ID="ID_1206702232" MODIFIED="1395481608162" TEXT="&#x6bcf;&#x4e2a;&#x7ebf;&#x7a0b;&#x88ab;&#x6307;&#x5b9a;&#x4e3a;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x6216;&#x4f4e;&#x4f18;&#x5148;&#x7ea7;"/>
</node>
</node>
</node>
<node CREATED="1395322748585" FOLDED="true" ID="ID_245178690" MODIFIED="1413846494675" POSITION="left" TEXT="packages">
<node CREATED="1395323093854" ID="ID_224078761" MODIFIED="1396347023898" TEXT="ipHAL">
<node CREATED="1395323103704" FOLDED="true" ID="ID_1304202210" MODIFIED="1413846207680" TEXT="main operating system loop">
<node CREATED="1395323133314" ID="ID_257033020" MODIFIED="1395323143406" TEXT="nss_proc/pkg/ipHAL/src/start.S">
<node CREATED="1395323161104" ID="ID_1611868975" MODIFIED="1395323175706">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_main
    </p>
    <p>
      nss_proc/pkg/ipHAL/src/system_main.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1395323344614" ID="ID_1139518716" MODIFIED="1395323403196" TEXT="&#x5982;&#x679c;Debugger is attached&#x5219;&#x7b49;&#x5f85;debugger&#x7684;&#x547d;&#x4ee4;&#xff0c;&#x800c;&#x4e0d;&#x518d;&#x7ee7;&#x7eed;&#x521d;&#x59cb;&#x5316;"/>
<node CREATED="1395323580704" ID="ID_304854817" MODIFIED="1395323583886" TEXT="system_boot">
<node CREATED="1395323632004" ID="ID_1128499936" LINK="#ID_1494593983" MODIFIED="1395501484947">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_boot
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395323632004" ID="ID_369658376" LINK="#ID_1558100174" MODIFIED="1395503020495">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_boot
    </p>
    <p>
      nss_proc/projects/retail_router1/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395324048394" ID="ID_1264653491" LINK="#ID_764397290" MODIFIED="1395324612781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      stack_check_init
    </p>
    <p>
      &#36825;&#26159;&#19968;&#20010;&#21487;&#36873;&#21151;&#33021;&#65292;&#21487;&#30001;&#23439;STACK_CHECK&#24320;&#20851;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395324831745" ID="ID_1732841733" LINK="#ID_1754752152" MODIFIED="1395482043011" TEXT="ubicom32_set_hrt_table"/>
<node CREATED="1395482124149" ID="ID_1386157949" MODIFIED="1395482125701" TEXT="system_init">
<node CREATED="1395323632004" ID="ID_1808737368" LINK="#ID_1519806007" MODIFIED="1395501461013">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_init
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395323632004" ID="ID_1706571621" LINK="#ID_599493682" MODIFIED="1395503155938">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system_init
    </p>
    <p>
      nss_proc/projects/retail_router1/build/include/system_init.h
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1394950146820" ID="ID_1119726226" LINK="#ID_1918852071" MODIFIED="1395501946878">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ubicom32_enable_global_interrupts
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395502070617" ID="ID_1081980912" MODIFIED="1395502073199" TEXT="start">
<node CREATED="1395502182907" ID="ID_78131052" LINK="#ID_1800280854" MODIFIED="1395503414804">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      start
    </p>
    <p>
      nss_proc/projects/retail_router0/app/main.c
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395502182907" ID="ID_1263412574" MODIFIED="1395502210619">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      start
    </p>
    <p>
      nss_proc/projects/retail_router1/app/main.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395502285639" ID="ID_595792496" LINK="#ID_1289365028" MODIFIED="1395502481276">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      stack_check
    </p>
    <p>
      &#24403;&#24403;&#21069;&#32447;&#31243;&#36864;&#20986;&#21518;&#65292;&#26816;&#26597;&#22534;&#26632;&#26159;&#21542;&#22312;&#21512;&#27861;&#33539;&#22260;&#20869;&#30830;&#23450;&#26159;&#21542;&#20026;&#24322;&#24120;&#36864;&#20986;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395502294869" ID="ID_975548019" MODIFIED="1395502689545">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      boot_fail
    </p>
    <p>
      &#21551;&#21160;&#22833;&#36133;&#65292;&#36827;&#20837;&#35843;&#35797;&#27169;&#24335;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1395324340139" ID="ID_1476282936" MODIFIED="1395324351641" TEXT="stack check">
<node CREATED="1395324484949" ID="ID_764397290" MODIFIED="1395324514201">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      stack_check_init
    </p>
    <p>
      &#23450;&#20041;&#21512;&#27861;&#30340;&#26632;&#31354;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395324372649" ID="ID_1289365028" MODIFIED="1395324456671">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      stack_check
    </p>
    <p>
      &#26816;&#26597;&#24403;&#21069;&#26632;&#22320;&#22336;(SP&#25351;&#38024;)&#26159;&#21542;&#22788;&#20110;&#21512;&#27861;&#33539;&#22260;&#20869;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1394953119627" ID="ID_41459333" MODIFIED="1395542936623">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hal_pkg_init
    </p>
    <p>
      nss_proc/pkg/ipHAL/src/arch.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395324702809" FOLDED="true" ID="ID_1986840566" MODIFIED="1413846212008" TEXT="ubicom32">
<node CREATED="1395324777135" ID="ID_1754752152" LINK="#ID_435097428" MODIFIED="1395482078881">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ubicom32_set_hrt_table
    </p>
    <p>
      &#21021;&#22987;&#21270;HRT&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1394950146820" ID="ID_1918852071" MODIFIED="1395502014394">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ubicom32_enable_global_interrupts
    </p>
    <p>
      ubicom32_disable_global_interrupts
    </p>
    <p>
      nss_proc/projects/retail_router0/build/include/system_init.h
    </p>
    <p>
      &#23558;&#23492;&#23384;&#22120;GLOBAL_CTRL&#30340;bit0&#32622;&#20026;1&#20197;&#20840;&#23616;&#22320;&#20801;&#35768;&#20013;&#26029;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395542234429" ID="ID_1053290570" MODIFIED="1395542237587" TEXT="lock">
<node CREATED="1394950852531" FOLDED="true" ID="ID_141108556" MODIFIED="1413846214353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      lock_pkg_boot
    </p>
  </body>
</html></richcontent>
<node CREATED="1394951028605" ID="ID_853307937" MODIFIED="1394951030947" TEXT="lock_stats_state"/>
<node CREATED="1394951042835" ID="ID_676522402" MODIFIED="1394951043367" TEXT="lock_contend"/>
<node CREATED="1394951050415" ID="ID_1120371767" MODIFIED="1394951051087" TEXT="lock_stats_held"/>
<node CREATED="1394951057595" ID="ID_646693985" MODIFIED="1394951058047" TEXT="lock_stats_wait"/>
<node CREATED="1394951064005" ID="ID_1331642233" MODIFIED="1394951064447" TEXT="lock_stats_order"/>
<node CREATED="1394951070665" ID="ID_1399265164" MODIFIED="1394951071157" TEXT="lock_stats_contend"/>
</node>
<node CREATED="1395566373040" ID="ID_1972365143" MODIFIED="1395566374342" TEXT="void lock_init(struct lock *lock, lock_order_t order)"/>
</node>
<node CREATED="1395542386365" ID="ID_1789851311" MODIFIED="1395542455105" TEXT="ipdebug">
<node CREATED="1394952225546" ID="ID_651134427" MODIFIED="1395542414655">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      debug_init
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395542999335" ID="ID_716429968" MODIFIED="1395543004277" TEXT="interrupt">
<node CREATED="1395543013956" ID="ID_1784099714" MODIFIED="1395543015288" TEXT="interrupt_pkg_init"/>
</node>
<node CREATED="1395543194460" ID="ID_562828095" MODIFIED="1395543201722" TEXT="heap_mgr">
<node CREATED="1394953379987" ID="ID_749343030" MODIFIED="1395543216722">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      heap_mgr_pkg_init
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395543244742" ID="ID_646211959" MODIFIED="1395543248934" TEXT="ctx_mgr">
<node CREATED="1394953379987" ID="ID_1476451991" MODIFIED="1395543260944">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ctx_mgr_pkg_init
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395543295583" ID="ID_1403150816" MODIFIED="1395543298045" TEXT="timer">
<node CREATED="1394953379987" ID="ID_94421363" MODIFIED="1395543308015">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      timer_pkg_init
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396347834499" ID="ID_72128282" MODIFIED="1396347903331">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      timer_register_event
    </p>
    <p>
      &#27880;&#20876;&#19968;&#20010;&#23450;&#26102;&#22120;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395543336167" FOLDED="true" ID="ID_1981377111" MODIFIED="1395566215430" TEXT="oneshot">
<node CREATED="1395544262638" ID="ID_489243901" MODIFIED="1395544270784" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1395544276612" ID="ID_1999861991" MODIFIED="1395544338520" TEXT="oneshot&#x662f;&#x4e00;&#x79cd;&#x53ea;&#x89e6;&#x53d1;&#x4e00;&#x6b21;&#x7684;&#x5b9a;&#x65f6;&#x5668;&#xff0c;&#x82e5;&#x9700;&#x8981;&#x518d;&#x6b21;&#x89e6;&#x53d1;&#x5219;&#x9700;&#x8981;&#x5728;&#x5b9a;&#x65f6;&#x5668;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5185;&#x518d;&#x6b21;&#x6ce8;&#x518c;&#x5b9a;&#x65f6;&#x5668;"/>
<node CREATED="1395545156076" ID="ID_607585641" MODIFIED="1395545564682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27491;&#30830;&#20351;&#29992;oneshot&#23450;&#26102;&#22120;&#30340;&#27493;&#39588;&#26159;&#65306;
    </p>
    <p>
      1&#65292;&#35843;&#29992;oneshot_alloc&#20998;&#37197;&#19968;&#20010;oneshot&#23450;&#26102;&#22120;&#30340;&#32467;&#26500;&#20307;
    </p>
    <p>
      2&#65292;&#35843;&#29992;oneshot_init&#21021;&#22987;&#21270;oneshot&#23450;&#26102;&#22120;&#30340;&#32467;&#26500;&#20307;
    </p>
    <p>
      3&#65292;&#35843;&#29992;oneshot_attach&#27880;&#20876;&#23450;&#26102;&#22120;&#65292;&#21363;&#25351;&#23450;&#23450;&#26102;&#22120;&#30340;&#23450;&#26102;&#26102;&#38388;&#20197;&#21450;&#36229;&#26102;&#21518;&#30340;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      4&#65292;&#21487;&#20197;&#22312;oneshot&#23450;&#26102;&#22120;&#36229;&#26102;&#20043;&#21069;&#35843;&#29992;oneshot_detach&#21462;&#28040;&#27492;&#23450;&#26102;&#22120;
    </p>
    <p>
      5&#65292;&#35843;&#29992;oneshot_free&#37322;&#25918;&#23450;&#26102;&#22120;&#65292;&#27492;&#21518;oneshot&#23450;&#26102;&#22120;&#19981;&#33021;&#20877;&#34987;&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1394953379987" ID="ID_133618350" MODIFIED="1395543347679">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      oneshot_pkg_init
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395544000270" ID="ID_882632310" MODIFIED="1395544255044">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      oneshot_init
    </p>
    <p>
      &#21021;&#22987;&#21270;struct oneshot&#32467;&#26500;&#20307;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395543379831" FOLDED="true" ID="ID_821023104" MODIFIED="1396953188378" TEXT="pbuf_mgr">
<node CREATED="1396521515540" ID="ID_1180050755" MODIFIED="1396521522390" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1396521523619" ID="ID_590055213" MODIFIED="1396521530447">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pbuf_mgr.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1396521607149" ID="ID_50406208" MODIFIED="1396521853111">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      nss&#20351;&#29992;pbuf&#31649;&#29702;packet buffer&#65292;pbuf-&gt;payload&#25165;&#26159;&#30495;&#27491;&#30340;&#32531;&#20914;&#21306;&#65292;&#20063;&#23601;&#26159;skbuf&#32467;&#26500;
    </p>
    <p>
      pbuf&#30001;nss&#33258;&#24049;&#20998;&#37197;&#65292;&#23545;&#20110;hlos&#26159;&#19981;&#21487;&#35265;&#30340;&#65292;pbuf&#20301;&#20110;ocm&#20013;&#25925;&#32780;nss&#33021;&#24555;&#36895;&#35775;&#38382;&#12290;
    </p>
    <p>
      pbuf-&gt;payload&#20063;&#23601;&#26159;skbuf&#26159;&#30001;hlos&#20998;&#37197;&#30340;&#65292;&#23545;&#20110;nss&#21644;hlos&#22343;&#21487;&#35265;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396521973543" ID="ID_432656895" MODIFIED="1396522102039">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      nss&#38656;&#35201;&#19968;&#20010;packet buffer&#26102;&#65292;&#20182;&#38656;&#35201;&#21516;&#26102;&#20998;&#37197;&#19968;&#20010;pbuf&#21644;&#19968;&#20010;skbuf&#65292;&#24182;&#23558;2&#32773;&#20851;&#32852;&#36215;&#26469;&#12290;pbuf&#20174;pbuf_mgr-&gt;free_list&#20013;&#20998;&#37197;&#65292;&#32780;skbuf&#21017;&#20174;pbuf_mgr-&gt;payload_free_list&#20013;&#20998;&#37197;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396521858710" ID="ID_218036206" MODIFIED="1396521966645">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38142;&#34920;struct pbuf_mgr -&gt; free_list&#20445;&#23384;&#20102;&#31354;&#38386;&#30340;pbuf&#65292;&#36825;&#20123;pbuf&#30340;payload&#20026;&#31354;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396521858710" ID="ID_567693158" MODIFIED="1396522495776">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38142;&#34920;struct pbuf_mgr -&gt; payload_free_list&#20445;&#23384;&#20102;&#31354;&#38386;&#30340;skbuf&#65292;&#27880;&#24847;&#36825;&#37324;&#22797;&#29992;&#20102;skbuf&#65292;&#24403;skbuf&#22312;&#38142;&#34920;&#20013;&#26102;&#20063;&#23601;&#26159;&#36824;&#26410;&#20351;&#29992;&#26102;&#20351;&#29992;&#23427;&#30340;&#21069;&#20960;&#20010;&#23383;&#33410;(struct pbuf_payload)&#29992;&#20110;&#38142;&#25509;&#25351;&#38024;&#23558;&#20854;&#38142;&#25509;&#22312;&#38142;&#34920;&#20013;&#12290;&#32780;&#24403;&#23427;&#34987;&#20998;&#37197;&#20986;&#26469;&#25346;&#36733;&#21040;pbuf&#19978;&#26102;&#23601;&#24674;&#22797;&#20026;skbuf&#12290;
    </p>
    <p>
      &#20063;&#23601;&#26159;&#35828;&#22312;struct pbuf_mgr -&gt; payload_free_list&#20013;&#26102;&#25226;&#23427;&#24403;&#25104;&#32467;&#26500;&#20307;struct pbuf_payload&#65292;&#32780;&#20986;&#20102;&#36825;&#20010;&#38142;&#34920;&#23427;&#23601;&#21464;&#25104;&#20102;skbuf&#65292;&#29992;&#20110;&#23384;&#25918;&#30495;&#27491;&#30340;&#25968;&#25454;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396521858710" ID="ID_1429061834" MODIFIED="1396522597348">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38142;&#34920;struct pbuf_mgr -&gt; pop_list&#20445;&#23384;&#20102;&#38656;&#35201;&#24402;&#36824;&#32473;hlos&#30340;pbuf&#65292;&#36825;&#20123;pbuf&#30340;payload&#19981;&#20026;&#31354;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396522182444" ID="ID_1309454219" MODIFIED="1396522887895">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      nss &#21551;&#29992;&#23450;&#26102;&#22120;n2h_buffer_refill&#26816;&#26597;&#38142;&#34920;struct pbuf_mgr -&gt; payload_free_list&#65292;&#22914;&#26524;&#20854;&#20013;&#31354;&#38386;&#30340;skbuf&#25968;&#37327;&#23569;&#20110;2048&#23427;&#23558;&#21521;hlos&#21457;&#36865;&#20013;&#26029;N2H_NSS_REGS_INTR_STATUS_EMPTY_BUFFERS_SOS&#35831;&#27714;empty buffer&#12290;&#25152;&#35831;&#27714;&#21040;&#30340;skbuf&#23558;&#34987;&#25918;&#20837;struct pbuf_mgr -&gt; payload_free_list&#20013;&#65292;&#35265;&#20989;&#25968;n2h_handle_hlos_to_nss_empty_buffer
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396523334794" ID="ID_1263447351" MODIFIED="1396952491865">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;hlos&#21457;&#36865;&#21040;nss&#30340;command&#65292;&#20063;&#26159;&#34987;&#25918;&#22312;skbuf&#20013;&#21457;&#36865;&#36807;&#26469;&#30340;&#65292;&#20294;&#36825;&#31181;skbuf&#30340;&#22823;&#23567;&#19968;&#33324;&#27604;&#36739;&#23567;&#65292;&#19981;&#33021;&#34987;&#22797;&#29992;&#20110;&#23384;&#25918;&#25968;&#25454;&#21253;&#65292;&#25152;&#20197;&#38656;&#35201;&#36820;&#36824;&#32473;hlos&#65292;&#25152;&#20197;&#22312;&#22788;&#29702;&#23436;hlos&#21457;&#36865;&#32473;nss&#30340;&#21629;&#20196;&#21518;&#20197;&#21450;&#20219;&#20309;&#26102;&#20505;&#38656;&#35201;&#21521;hlos&#21457;&#21253;&#26102;&#37117;&#20250;&#35843;&#29992;n2h_handle_nss_to_hlos_empty_buffer&#23558;skbuf&#36820;&#36824;&#32473;hlos&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21478;&#22806;&#25152;&#26377;hlos&#21457;&#36865;&#21040;nss&#30340;packet&#65292;&#33509;&#20854;descriptor&#27809;&#26377;&#35774;&#32622;&#26631;&#35760;H2N_BIT_BUFFER_REUSE&#65292;&#21017;&#20854;skbuf&#20063;&#26159;&#19981;&#33021;recycle&#30340;&#65292;&#25925;&#32780;&#20063;&#38656;&#35201;&#36820;&#36824;&#32473;hlos&#65292;&#35265;nss driver&#30340;nss_core_send_buffer&#20989;&#25968;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1396952503953" ID="ID_966969797" MODIFIED="1396952668955">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#25152;&#26377;&#19981;&#33021;recycle&#30340;skbuf&#20854;&#20869;&#23481;&#37117;&#26159;&#19981;&#33021;&#20063;&#19981;&#20250;&#25913;&#21464;&#30340;
    </p>
    <p>
      &#32780;&#33021;recycle&#30340;skbuf&#22312;&#20854;&#34987;&#25918;&#20837;pbm-&gt;payload_free_list&#26102;&#34987;&#24403;&#20570;&#32467;&#26500;&#20307;struct pbuf_payload&#65292;&#20174;&#32780;&#20854;&#20869;&#23481;&#34987;&#25913;&#20889;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1396521580385" ID="ID_407320846" MODIFIED="1396521586974" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1396952787175" FOLDED="true" ID="ID_69180719" MODIFIED="1396953153768" TEXT="struct pbuf_mgr">
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" struct lock lock"/>
<node CREATED="1396953009658" ID="ID_769249923" LINK="#ID_1748109669" MODIFIED="1396953077618" TEXT=" struct plist free_list"/>
<node CREATED="1396953009658" ID="ID_124053622" LINK="#ID_1748109669" MODIFIED="1396953083738" TEXT=" struct plist pop_list"/>
<node CREATED="1396953009658" ID="ID_1912288433" MODIFIED="1396953009658" TEXT=" uint32_t pbuf_alloc_fails"/>
<node CREATED="1396953009658" ID="ID_1405585754" LINK="#ID_109180232" MODIFIED="1396953093898" TEXT=" struct pbuf_payload *payload_free_list"/>
<node CREATED="1396953009658" ID="ID_1349373829" MODIFIED="1396953009658" TEXT=" uint32_t payload_alloc_fails"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" unsigned int payload_free_count"/>
<node CREATED="1396953009658" ID="ID_581472460" LINK="#ID_1748109669" MODIFIED="1396953103638" TEXT=" struct pbuf *pbufs"/>
<node CREATED="1396953009658" ID="ID_384059263" MODIFIED="1396953009658" TEXT=" uint16_t magic"/>
</node>
<node CREATED="1396952811845" FOLDED="true" ID="ID_1748109669" MODIFIED="1396953154908" TEXT="struct pbuf">
<node CREATED="1396953009658" ID="ID_987668653" MODIFIED="1396953009658" TEXT=" struct pbuf *next"/>
<node CREATED="1396953009658" ID="ID_989071517" MODIFIED="1396953009658" TEXT=" uint8_t *payload">
<node CREATED="1396953113896" ID="ID_1856085196" MODIFIED="1396953121098" TEXT="struct skbuf"/>
</node>
<node CREATED="1396953009658" ID="ID_937201422" MODIFIED="1396953009658" TEXT=" unsigned int payload_size"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" void *interface"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" uint32_t flags"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" uint8_t *active_buffer"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" unsigned int active_buffer_size"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" uint8_t *except_buffer"/>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" unsigned int except_buffer_size"/>
<node CREATED="1396953009658" ID="ID_1183590455" MODIFIED="1396953009658" TEXT=" uint32_t opaque">
<node CREATED="1396953129886" ID="ID_1462100480" MODIFIED="1396953134898" TEXT="struct skbuf"/>
</node>
<node CREATED="1396953009658" MODIFIED="1396953009658" TEXT=" uint16_t magic"/>
</node>
<node CREATED="1396952839295" FOLDED="true" ID="ID_109180232" MODIFIED="1396953155968" TEXT="struct pbuf_payload">
<node CREATED="1396953040368" ID="ID_423167227" MODIFIED="1396953041598" TEXT="struct pbuf_payload *next"/>
<node CREATED="1396953051026" ID="ID_985249465" MODIFIED="1396953052288" TEXT="uint32_t opaque">
<node CREATED="1396953146796" ID="ID_23747241" MODIFIED="1396953151768" TEXT="struct skbuf"/>
</node>
<node CREATED="1396953062476" ID="ID_1554366700" MODIFIED="1396953063368" TEXT="uint16_t payload_len"/>
</node>
</node>
<node CREATED="1396521569690" ID="ID_1133694428" MODIFIED="1396521574218" TEXT="API">
<node CREATED="1394953379987" ID="ID_1602982606" MODIFIED="1395543401015">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pbuf_mgr_pkg_init
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396596483511" ID="ID_544898314" MODIFIED="1396596485560" TEXT="pbuf_mgr_init"/>
<node CREATED="1396596518690" ID="ID_1711322861" MODIFIED="1396596571496">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pbuf_mgr_alloc_pbuf
    </p>
    <p>
      &#20998;&#37197;&#19968;&#20010;pbuf&#20294;&#19981;&#24102;payload
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396596530562" ID="ID_1720598194" MODIFIED="1396596585561">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pbuf_mgr_alloc_pbuf_with_payload
    </p>
    <p>
      &#20998;&#37197;&#19968;&#20010;pbuf&#19988;&#24102;payload
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396596628136" ID="ID_1564219200" MODIFIED="1396596659816">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pbuf_mgr_free_pbuf
    </p>
    <p>
      &#37322;&#25918;&#19968;&#20010;pbuf&#21450;&#20854;&#20851;&#32852;&#30340;payload
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396596675649" ID="ID_1187792156" MODIFIED="1396596699908">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pbuf_mgr_free_pbuf_payload
    </p>
    <p>
      &#22635;&#20805;&#26032;&#30340;payload&#21363;skbuf
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1395546224912" ID="ID_1970735787" MODIFIED="1395546226104" TEXT="worker_thread">
<node CREATED="1395546236074" FOLDED="true" ID="ID_1732005" MODIFIED="1413845566716" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1395546279961" ID="ID_1762326791" MODIFIED="1395546589894">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;worker thread&#20195;&#34920;&#20102;&#19968;&#20010;hardware thread, &#22312;&#36825;&#20010;worker thread&#20013;&#21487;&#20197;&#36816;&#34892;&#22810;&#20010;work&#12290;
    </p>
    <p>
      &#27599;&#19968;&#20010;work&#30001;&#19968;&#20010;&#20013;&#26029;&#21644;&#23545;&#24212;&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;&#20195;&#34920;&#65292;&#36825;&#37324;&#30340;&#20013;&#26029;&#26159;&#19968;&#20010;&#34394;&#25311;&#30340;&#27010;&#24565;&#65292;&#24182;&#38750;&#29289;&#29702;&#24847;&#20041;&#19978;&#30340;&#20013;&#26029;&#12290;
    </p>
    <p>
      &#36719;&#20214;&#20013;&#21487;&#20197;&#35302;&#21457;&#26576;&#20010;worker thread&#19978;&#30340;&#26576;&#20010;&#20013;&#26029;&#65292;&#20174;&#32780;&#23548;&#33268;&#36825;&#20010;worker thread&#25191;&#34892;&#20013;&#26029;&#23545;&#24212;&#30340;work&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395545156076" ID="ID_232577593" MODIFIED="1395556599880">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27491;&#30830;&#20351;&#29992;worker thread&#30340;&#27493;&#39588;&#26159;&#65306;
    </p>
    <p>
      1&#65292;&#35843;&#29992;worker_thread_init&#21021;&#22987;&#21270;worker_thread&#32467;&#26500;&#20307;
    </p>
    <p>
      2&#65292;&#35843;&#29992;worker_thread_alloc_irq&#20026;work&#20998;&#37197;&#19968;&#20010;&#20013;&#26029;&#21495;
    </p>
    <p>
      3&#65292;&#35843;&#29992;worker_thread_bind_irq&#23558;work&#28155;&#21152;&#21040;worker thread&#19978;&#65292;&#27880;&#24847;work&#30001;&#19968;&#20010;&#20013;&#26029;&#21495;&#21644;&#23545;&#24212;&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;&#32452;&#25104;
    </p>
    <p>
      4&#65292;&#35843;&#29992;worker_thread_start&#21551;&#21160;&#32447;&#31243;
    </p>
    <p>
      5&#65292;&#35843;&#29992;worker_thread_signal_irq&#35302;&#21457;&#20013;&#26029;&#36827;&#32780;&#20419;&#20351;worker thread&#22788;&#29702;&#20013;&#26029;&#23545;&#24212;&#30340;work
    </p>
    <p>
      6&#65292;work&#23545;&#24212;&#30340;&#22788;&#29702;&#20989;&#25968;&#35843;&#29992;worker_thread_clear_irq&#20197;ack&#20013;&#26029;&#65292;&#20877;&#22788;&#29702;&#20855;&#20307;&#30340;&#24037;&#20316;
    </p>
    <p>
      7&#65292;&#19981;&#38656;&#35201;worker thread&#26102;&#35843;&#29992;worker_thread_stop&#20572;&#27490;&#32447;&#31243;
    </p>
    <p>
      8&#65292;&#26368;&#21518;&#35843;&#29992;worker_thread_final&#37322;&#25918;&#32447;&#31243;&#21344;&#29992;&#30340;&#20013;&#26029;&#21644;hardware thread&#36164;&#28304;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395546684987" FOLDED="true" ID="ID_1563984712" MODIFIED="1413846224272" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1395546690096" ID="ID_1958251059" MODIFIED="1395549183973">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct worker_thread
    </p>
    <p>
      &#19968;&#20010;worker thread&#20195;&#34920;&#20102;&#19968;&#20010;hardware thread
    </p>
    <p>
      &#27599;&#20010;worker thread&#38656;&#35201;&#21333;&#29420;&#30340;statck
    </p>
  </body>
</html></richcontent>
<node CREATED="1395546707736" ID="ID_379351645" MODIFIED="1395546710222" TEXT="struct lock lock"/>
<node CREATED="1395546722596" ID="ID_1530541875" MODIFIED="1395549241655">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      uint32_t enable_mask[WORKER_THREAD_IRQ_WORDS]
    </p>
    <p>
      &#20013;&#26029;&#25513;&#30721;&#65292;&#29992;&#20110;&#25511;&#21046;&#21738;&#20123;work&#26159;enable&#30340;&#65292;&#21738;&#20123;&#26159;disable&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395546735568" ID="ID_327840929" MODIFIED="1395546736690" TEXT="struct ctx *ctx"/>
<node CREATED="1395546754390" ID="ID_690103603" MODIFIED="1395546756542" TEXT="uint32_t next_irq"/>
<node CREATED="1395546767072" ID="ID_413206588" MODIFIED="1395546768004" TEXT="interrupt_t reload_irq"/>
<node CREATED="1395546779726" FOLDED="true" ID="ID_1780835221" MODIFIED="1413846222584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct worker_thread_irq_info irq_info[WORKER_THREAD_INTERRUPT_COUNT]
    </p>
    <p>
      worker thread&#19978;&#30340;work&#65292;&#27599;&#19968;&#20010;work&#30001;&#19968;&#20010;&#20013;&#26029;&#21644;&#23545;&#24212;&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;&#20195;&#34920;
    </p>
  </body>
</html></richcontent>
<node CREATED="1395549048744" ID="ID_300727018" MODIFIED="1395549051279" TEXT="worker_thread_callback_t fn"/>
<node CREATED="1395549058747" ID="ID_1694526680" MODIFIED="1395549059629" TEXT="void *arg"/>
<node CREATED="1395549070887" ID="ID_1955914847" MODIFIED="1395549071901" TEXT="int count"/>
<node CREATED="1395549080823" ID="ID_1577352826" MODIFIED="1395549081737" TEXT="uint32_t max_time"/>
</node>
<node CREATED="1395546790498" ID="ID_1232715298" MODIFIED="1395546791530" TEXT="addr_t *stack"/>
<node CREATED="1395546801890" ID="ID_501935189" MODIFIED="1395546802852" TEXT="uint32_t stack_size"/>
<node CREATED="1395548053283" ID="ID_1086029375" MODIFIED="1395548054431" TEXT="uint16_t magic"/>
</node>
</node>
<node CREATED="1395549306839" FOLDED="true" ID="ID_594780952" MODIFIED="1413846227226" TEXT="API">
<node CREATED="1395549310043" ID="ID_589678374" MODIFIED="1395555663476">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bool worker_thread_init(struct worker_thread *wt, addr_t *stack, uint32_t stack_size)
    </p>
    <p>
      &#21021;&#22987;&#21270;worker thread, &#24182;&#20026;&#20854;&#25351;&#23450;&#22534;&#26632;
    </p>
    <p>
      &#27492;&#27493;&#20250;&#20026;worker thread&#20998;&#37197;&#19968;&#20010;hardware thread
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395549397315" ID="ID_1327868216" MODIFIED="1395549422383">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int worker_thread_alloc_irq(struct worker_thread *wt)
    </p>
    <p>
      &#20026;&#19968;&#20010;work&#20998;&#37197;&#19968;&#20010;&#20013;&#26029;&#21495;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395550269963" ID="ID_1776973145" MODIFIED="1395550306605">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void worker_thread_bind_irq(struct worker_thread *wt, int irq, worker_thread_callback_t fn, void *arg)
    </p>
    <p>
      &#28155;&#21152;&#19968;&#20010;work&#65292;&#27880;&#24847;&#19968;&#20010;work&#30001;&#19968;&#20010;&#20013;&#26029;&#21644;&#23545;&#24212;&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;&#20195;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395550352401" ID="ID_934932047" MODIFIED="1395555791397">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void worker_thread_start(struct worker_thread *wt)
    </p>
    <p>
      &#21551;&#21160;&#32447;&#31243;,&#160;&#160;&#22312;hardware thread&#19978;&#36816;&#34892;&#27492;worker thread&#65292;&#22312;&#27492;&#20043;&#21069;worker thread&#24182;&#19981;&#21344;&#29992;cpu&#26102;&#38388;&#12290;
    </p>
    <p>
      &#21482;&#26377;&#24403;work&#23545;&#24212;&#30340;&#20013;&#26029;&#34987;&#35302;&#21457;&#26102;&#65292;&#25165;&#20250;&#23548;&#33268;&#32447;&#31243;&#30495;&#27491;&#22788;&#29702;&#36825;&#20010;work
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395550762584" ID="ID_1329674962" MODIFIED="1395550828430">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void worker_thread_signal_irq(struct worker_thread *wt, int irq)
    </p>
    <p>
      &#35302;&#21457;worker thread&#19978;&#30340;&#26576;&#20010;&#20013;&#26029;&#65292;&#20174;&#32780;&#23548;&#33268;&#23545;&#24212;&#30340;work&#34987;&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395550867608" ID="ID_237107099" MODIFIED="1395551036432">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void worker_thread_clear_irq(struct worker_thread *wt, int irq)
    </p>
    <p>
      work&#22312;&#20854;&#22788;&#29702;&#36807;&#31243;&#20013;&#24212;ack&#27492;&#20013;&#26029;&#20197;&#34920;&#31034;&#27491;&#22312;&#22788;&#29702;&#27492;work
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395554983073" ID="ID_1051847425" MODIFIED="1395555880096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void worker_thread_stop(struct worker_thread *wt)
    </p>
    <p>
      &#20572;&#27490;&#32447;&#31243;, &#23545;&#24212;&#30340;hardware thread&#20063;&#34987;&#20572;&#27490;&#65292;&#22312;&#27492;&#20043;&#21518;&#36825;&#20010;work thread&#19981;&#20877;&#21344;&#29992;cpu&#26102;&#38388;&#12290;
    </p>
    <p>
      &#20572;&#27490;&#32447;&#31243;&#21518;&#20063;&#23601;&#19981;&#20877;&#22788;&#29702;&#20854;&#20013;&#30340;work
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395555218123" ID="ID_388494779" MODIFIED="1395555989838">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void worker_thread_final(struct worker_thread *wt)
    </p>
    <p>
      &#20572;&#27490;&#32447;&#31243;&#65292;&#24182;&#37322;&#25918;&#20998;&#37197;&#32473;&#32447;&#31243;&#30340;&#20013;&#26029;&#21495;&#21644;hardware thread&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1395566666313" FOLDED="true" ID="ID_1635739107" MODIFIED="1413846234713" TEXT="pnode">
<node CREATED="1395566674613" ID="ID_617429667" MODIFIED="1395566680707" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1395567210465" ID="ID_1618362432" MODIFIED="1395571735584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;pnode&#20195;&#34920;&#19968;&#20010;&#22788;&#29702;&#21253;&#30340;&#33410;&#28857;&#65292;&#23436;&#25104;&#19968;&#37096;&#20998;&#22788;&#29702;&#21253;&#30340;&#20219;&#21153;&#65292;&#22810;&#20010;&#36825;&#26679;&#30340;&#33410;&#28857;&#20018;&#32852;&#36215;&#26469;&#24418;&#25104;&#21253;&#22788;&#29702;&#27969;&#27700;&#32447;
    </p>
    <p>
      &#27599;&#20010;pnode&#33267;&#23569;&#20250;&#26377;&#19968;&#20010;work&#19982;&#20043;&#23545;&#24212;&#65292;&#19968;&#20010;pnode&#20063;&#26377;&#21487;&#33021;&#20250;&#22788;&#29702;&#22810;&#20010;work&#65292;&#20063;&#23601;&#26159;&#27599;&#20010;pnode&#37117;&#20250;&#32465;&#23450;&#21040;&#26576;&#20010;worker_thread&#65292;&#21487;&#33021;&#20250;&#26377;&#22810;&#20010;pnode&#32465;&#23450;&#21040;&#30456;&#21516;&#30340;woker thread&#12290;
    </p>
    <p>
      &#27599;&#20010;pnode&#22312;&#20837;&#21475;&#26041;&#21521;&#26377;&#19968;&#20010;queue&#65292;&#24182;&#19988;&#26377;&#19968;&#20010;enqueue&#20989;&#25968;&#65292;&#21069;&#19968;&#20010;&#33410;&#28857;&#35843;&#29992;&#27492;enqueue&#20989;&#25968;&#23558;&#21253;&#25918;&#20837;queue&#12290;
    </p>
    <p>
      &#27599;&#20010;pnode&#22788;&#29702;&#23436;&#21253;&#21518;&#35843;&#29992;&#19979;&#19968;&#20010;pnode&#30340;enqueue&#20989;&#25968;&#23558;&#21253;&#25918;&#20837;&#19979;&#19968;&#20010;pnode&#30340;queue&#65292;&#21516;&#26102;&#35302;&#21457;&#19979;&#19968;&#20010;pnode&#23545;&#24212;&#30340;work&#30340;&#20013;&#26029;&#65292;&#20174;&#32780;&#35753;&#19979;&#19968;&#20010;pnode&#25152;&#32465;&#23450;&#30340;worker thread&#24320;&#22987;&#21709;&#24212;&#20013;&#26029;&#23436;&#25104;&#19979;&#19968;&#20010;pnode&#23545;&#21253;&#30340;&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395570076995" ID="ID_1812849940" MODIFIED="1395570091271" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
<node CREATED="1395570082149" ID="ID_103167649" MODIFIED="1395570084591" TEXT="API">
<node CREATED="1396316814897" ID="ID_1672601244" MODIFIED="1396316879318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void pnode_init(struct pnode *pn,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int32_t net_num,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uint32_t net_type,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pnode_enqueue_pbuf_method_t enqueue_pbuf,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pnode_enqueue_plist_method_t enqueue_plist,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pnode_configure_method_t configure)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396316963806" ID="ID_984563559" LINK="#ID_534648517" MODIFIED="1396953270898" TEXT="void pnode_evict_all(struct pnode *pn)"/>
<node CREATED="1396316976776" ID="ID_527348202" MODIFIED="1396316978298" TEXT="void pnode_final(struct pnode *pn)"/>
</node>
</node>
<node CREATED="1395573566454" ID="ID_1695432001" MODIFIED="1395573568402" TEXT="pnode_registry">
<node CREATED="1395570085629" ID="ID_1952425393" MODIFIED="1395570153223">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bool pnode_registry_init(struct pnode_registry *pr, struct heap_mgr *hm, unsigned int num_nodes)
    </p>
    <p>
      &#21021;&#22987;&#21270;&#19968;&#20010;pnode&#20179;&#24211;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395573584229" ID="ID_1447797807" MODIFIED="1396343628893">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void pnode_registry_register_pnode(struct pnode_registry *pr, unsigned int index, struct pnode *pn)
    </p>
    <p>
      &#22312;pnode&#20179;&#24211;&#20013;&#27880;&#20876;&#19968;&#20010;pnode, &#27880;&#24847;&#27599;&#20010;pnode&#37117;&#26377;&#21508;&#33258;&#19981;&#21516;&#30340;index
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1395573584229" ID="ID_722894020" MODIFIED="1395573638981">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void pnode_registry_unregister_pnode(struct pnode_registry *pr, unsigned int index, struct pnode *pn)
    </p>
    <p>
      &#22312;pnode&#20179;&#24211;&#20013;&#35299;&#27880;&#20876;&#19968;&#20010;pnode
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1395572780701" ID="ID_925056890" MODIFIED="1395572785223" TEXT="n2h">
<node CREATED="1396598276754" ID="ID_1976965914" MODIFIED="1396598282107" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1396598288089" ID="ID_1243317759" MODIFIED="1396598290596" TEXT="struct pnode_h2c_metadata_object"/>
</node>
<node CREATED="1395573093746" ID="ID_1134160179" MODIFIED="1395573095834" TEXT="API">
<node CREATED="1395573097185" ID="ID_1276778757" MODIFIED="1395573098899" TEXT="void n2h_init(struct n2h_node *n2hn, int32_t net_num, struct pnode_registry *pr)">
<node CREATED="1395573208871" ID="ID_626737415" MODIFIED="1395573229741" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : n2hn-&gt;pn"/>
</node>
<node CREATED="1396504700837" ID="ID_1948021231" MODIFIED="1396519689302" TEXT="n2h_buffer_refill&#xa;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x5b9a;&#x65f6;&#x5668;&#xff0c;&#x6bcf;&#x9694;1&#x6beb;&#x79d2;&#x68c0;&#x67e5;nss&#x662f;&#x5426;&#x6709;&#x8db3;&#x591f;(2048)&#x7684;skbuf&#xff0c;&#xa;&#x82e5;&#x4e0d;&#x591f;&#x5219;&#x5411;hlos&#x53d1;&#x9001;N2H_NSS_REGS_INTR_STATUS_EMPTY_BUFFERS_SOS&#x4e2d;&#x65ad;">
<node CREATED="1396519708556" ID="ID_1043379337" MODIFIED="1396519711221" TEXT="pbuf_mgr_payload_free_count"/>
</node>
</node>
</node>
<node CREATED="1395573956871" ID="ID_1364620018" MODIFIED="1395573958403" TEXT="eth_bridge_rx">
<node CREATED="1395573959803" ID="ID_446584797" MODIFIED="1395573961955" TEXT="API">
<node CREATED="1395573978405" ID="ID_1203362584" MODIFIED="1395573979687" TEXT="bool eth_bridge_rx_init(struct eth_bridge_rx *ebr, int32_t net_num, struct pnode_registry *pr, struct heap_mgr *bridge_hm)">
<node CREATED="1395573208871" ID="ID_720122033" MODIFIED="1395574123613" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ebr-&gt;pn"/>
</node>
<node CREATED="1396619959373" ID="ID_1185499529" MODIFIED="1396620004635">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      eth_bridge_rx_configure
    </p>
    <p>
      &#28155;&#21152;&#25110;&#21024;&#38500;eth_bridge_rx_entry
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396619259139" ID="ID_1367616433" MODIFIED="1396619269231" TEXT="eth_bridge_rx_entry"/>
</node>
<node CREATED="1395574568138" ID="ID_330685971" MODIFIED="1413846243532" TEXT="eth_rx">
<node CREATED="1396616922802" ID="ID_1430452458" MODIFIED="1396616926074" TEXT="API">
<node CREATED="1395574573068" ID="ID_817626186" MODIFIED="1395574574212" TEXT="void eth_rx_init(struct eth_rx *er, int32_t net_num)">
<node CREATED="1395573208871" ID="ID_779415089" MODIFIED="1395574626522" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : er-&gt;pn"/>
</node>
<node CREATED="1396616658544" FOLDED="true" ID="ID_1501975637" MODIFIED="1413846378192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      eth_rx_configure
    </p>
    <p>
      &#21024;&#38500;&#25152;&#26377;ipv4/ipv6 connection match entry&#20197;&#21450;pppoe session match entry
    </p>
  </body>
</html></richcontent>
<node CREATED="1396619604200" ID="ID_534648517" MODIFIED="1413846255089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/evict_all.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1395575211568" ID="ID_860157205" MODIFIED="1395575218540" TEXT="ipv4oe_rx">
<node CREATED="1395575220618" ID="ID_1612174216" MODIFIED="1395575222360" TEXT="API">
<node CREATED="1395575223218" ID="ID_1199338897" MODIFIED="1395575224820" TEXT="void ipv4oe_rx_init(struct ipv4oe_rx *ir, int32_t net_num)">
<node CREATED="1395573208871" ID="ID_726524087" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
</node>
</node>
</node>
<node CREATED="1395575867535" ID="ID_221030557" MODIFIED="1395575871447" TEXT="ipv4_rx">
<node CREATED="1396617717676" FOLDED="true" ID="ID_514428052" MODIFIED="1396952156004" TEXT="connection entry">
<node CREATED="1396943020864" ID="ID_362699079" MODIFIED="1396943039795">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="connection_entry.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1396943790184" ID="ID_1726578236" MODIFIED="1396943950746" TEXT="&#x5f53;hlos&#x9700;&#x8981;&#x521b;&#x5efa;ipv4 rule&#x65f6;&#xff0c;&#x9996;&#x5148;&#x4ece;Ipv4_rx -&gt; ipv4_rx_connection_entry_free_list&#x4e2d;&#x83b7;&#x53d6;&#x4e00;&#x4e2a;&#x7a7a;&#x95f2;&#x6761;&#x76ee;&#xff0c;&#x586b;&#x5145;&#x5fc5;&#x8981;&#x4fe1;&#x606f;&#x540e;&#x52a0;&#x5165;hash&#x8868;Ipv4_rx -&gt; ipv4_table&#xff0c;&#x6ce8;&#x610f;&#x8fd9;&#x4e00;&#x6b65;&#x64cd;&#x4f5c;&#x7684;&#x662f;struct ipv4_rx_connection_entry&#x7ed3;&#x6784;"/>
<node CREATED="1396943984454" ID="ID_60483947" MODIFIED="1396944152236" TEXT="&#x4e4b;&#x540e;&#x5c06;struct ipv4_rx_connection_entry&#x7ed3;&#x6784;&#x8f6c;&#x6362;&#x4e3a;2&#x4e2a;struct ipv4_rx_connection_match_entry&#x7ed3;&#x6784;&#xff0c;&#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x5339;&#x914d;original&#x65b9;&#x5411;&#x7684;&#x5305;&#xff0c;&#x53e6;&#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x5339;&#x914d;reply&#x65b9;&#x5411;&#x7684;&#x5305;&#xff0c;&#x8fd9;2&#x4e2a;match entry&#x5206;&#x522b;&#x653e;&#x5165;&#x5165;&#x53e3;&#x548c;&#x51fa;&#x53e3;&#x7684;eth_node -&gt; ipv4_match_table&#x4e2d;"/>
<node CREATED="1396944180974" ID="ID_112665919" MODIFIED="1396944230016" TEXT="&#x5f53;&#x5305;&#x8fdb;&#x5165;eth_node&#x65f6;&#x53ea;&#x5339;&#x914d;eth_node -&gt; ipv4_match_table&#x4e2d;&#x7684;match entry&#xff0c;&#x7136;&#x540e;&#x6839;&#x636e;match entry&#x5bf9;&#x5305;&#x505a;&#x4fee;&#x6539;"/>
</node>
<node CREATED="1396928065685" ID="ID_740307861" MODIFIED="1396928071436" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1396928085694" FOLDED="true" ID="ID_1064984320" MODIFIED="1413846386992" TEXT="struct ipv4_rx">
<node CREATED="1396928411816" ID="ID_211788470" MODIFIED="1396928411816" TEXT=" struct pnode pn"/>
<node CREATED="1396928411816" ID="ID_44320985" MODIFIED="1396928411816" TEXT=" struct pnode *except"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct pnode *pppoe_rx"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct pnode_registry *pnode_reg"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t queue_dropped"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" int work_irq"/>
<node CREATED="1396928411816" ID="ID_1209881304" MODIFIED="1396928411816" TEXT=" struct worker_thread *wt"/>
<node CREATED="1396928411816" ID="ID_1939095543" MODIFIED="1396928411816" TEXT=" unsigned int max_work"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct lock forwarding_lock"/>
<node CREATED="1396928411816" FOLDED="true" ID="ID_649003575" MODIFIED="1413846385609" TEXT=" struct ipv4_rx_connection_match_entry *ipv4_rx_connection_match_entry_free_list">
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_match_entry *next"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_match_entry *prev"/>
<node CREATED="1396928411816" ID="ID_1907750050" LINK="#ID_156037327" MODIFIED="1396943644405" TEXT=" struct ipv4_rx_connection_entry *connection"/>
<node CREATED="1396928411816" ID="ID_1705361215" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_match_entry *counter_match"/>
<node COLOR="#3333ff" CREATED="1396928411816" ID="ID_746418293" MODIFIED="1396943692226" TEXT=" uint8_t match_protocol"/>
<node COLOR="#3333ff" CREATED="1396928411816" ID="ID_233396349" MODIFIED="1396943696256" TEXT=" uint32_t match_src_ip"/>
<node COLOR="#3333ff" CREATED="1396928411816" ID="ID_1000170746" MODIFIED="1396943699556" TEXT=" uint32_t match_dest_ip"/>
<node COLOR="#3333ff" CREATED="1396928411816" ID="ID_1398368616" MODIFIED="1396943702096" TEXT=" uint32_t match_src_ident"/>
<node COLOR="#3333ff" CREATED="1396928411816" ID="ID_1164365618" MODIFIED="1396943704786" TEXT=" uint32_t match_dest_ident"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t flags"/>
<node CREATED="1396928411816" ID="ID_252865328" MODIFIED="1396928448436" TEXT="protocol_state">
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_tcp_connection_match_entry tcp"/>
</node>
<node CREATED="1396928411816" ID="ID_1747056525" MODIFIED="1396928411816" TEXT=" uint32_t rx_packet_count"/>
<node CREATED="1396928411816" ID="ID_1859686400" MODIFIED="1396928411816" TEXT=" uint32_t rx_byte_count"/>
<node CREATED="1396928411816" ID="ID_1122586951" MODIFIED="1396928411816" TEXT=" uint32_t tx_packet_count"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t tx_byte_count"/>
<node CREATED="1396928411816" ID="ID_663757367" MODIFIED="1396928411816" TEXT=" uint32_t xlate_src_ip"/>
<node CREATED="1396928411816" ID="ID_1714915970" MODIFIED="1396928411816" TEXT=" uint32_t xlate_src_ident"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t xlate_src_csum_adjustment"/>
<node CREATED="1396928411816" ID="ID_256320069" MODIFIED="1396928411816" TEXT=" uint32_t xlate_dest_ip"/>
<node CREATED="1396928411816" ID="ID_1757309055" MODIFIED="1396928411816" TEXT=" uint32_t xlate_dest_ident"/>
<node CREATED="1396928411816" ID="ID_1384271116" MODIFIED="1396928411816" TEXT=" uint32_t xlate_dest_csum_adjustment"/>
<node CREATED="1396928411816" ID="ID_494818497" MODIFIED="1396928411816" TEXT=" uint16_t ingress_vlan_tag"/>
<node CREATED="1396928411816" ID="ID_710717868" MODIFIED="1396928411816" TEXT=" uint16_t egress_vlan_tag"/>
<node CREATED="1396928411816" ID="ID_389444325" MODIFIED="1396928411816" TEXT=" struct eth_node *xmit_interface"/>
<node CREATED="1396928411816" ID="ID_1468862087" MODIFIED="1396928411816" TEXT=" unsigned short int xmit_interface_mtu"/>
<node CREATED="1396928411816" ID="ID_561250181" MODIFIED="1396928411816" TEXT=" uint16_t xmit_dest_mac_addr[3]"/>
<node CREATED="1396928411816" ID="ID_8485457" MODIFIED="1396928411816" TEXT=" uint16_t xmit_src_mac_addr[3]"/>
<node CREATED="1396928411816" ID="ID_190780385" MODIFIED="1396928411816" TEXT=" uint16_t xmit_pppoe_session_id"/>
<node CREATED="1396928411816" ID="ID_1448615374" MODIFIED="1396928411816" TEXT=" uint16_t xmit_pppoe_remote_mac[3]"/>
</node>
<node CREATED="1396928411816" ID="ID_1224049588" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_entry *ipv4_rx_connection_entry_free_list"/>
<node CREATED="1396928411816" FOLDED="true" ID="ID_156037327" MODIFIED="1396946991670" TEXT=" struct ipv4_rx_connection_entry *ipv4_table[IPV4_CONNECTION_HASH_SIZE]">
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_entry *prev"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_entry *next"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint8_t protocol"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t flow_ip"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t flow_ip_xlate"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t flow_ident"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t flow_ident_xlate"/>
<node CREATED="1396928411816" ID="ID_1462314493" MODIFIED="1396928411816" TEXT=" struct pppoe_session_match_entry *flow_pppoe_match"/>
<node CREATED="1396928411816" ID="ID_191170974" MODIFIED="1396928411816" TEXT=" struct eth_node *flow_device"/>
<node CREATED="1396928411816" ID="ID_1815990511" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_match_entry *flow_match"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t return_ip"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t return_ip_xlate"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t return_ident"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t return_ident_xlate"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct pppoe_session_match_entry *return_pppoe_match"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct eth_node *return_device"/>
<node CREATED="1396928411816" ID="ID_1064999052" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_match_entry *return_match"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint32_t last_sync_tick"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct pbuf *flush_pbuf"/>
</node>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_connection_entry *ipv4_rx_connection_entries"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" struct ipv4_rx_stats stats"/>
<node CREATED="1396928411816" MODIFIED="1396928411816" TEXT=" uint16_t magic"/>
</node>
</node>
<node CREATED="1395575872675" ID="ID_1405805689" MODIFIED="1395575874567" TEXT="API">
<node CREATED="1395575875635" ID="ID_1897280892" MODIFIED="1395575877307" TEXT="bool ipv4_rx_init(struct ipv4_rx *ir, int32_t net_num, struct pnode_registry *pr, struct heap_mgr *connection_hm)">
<node CREATED="1395573208871" ID="ID_1608262353" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
</node>
<node CREATED="1396598462273" ID="ID_445143725" MODIFIED="1396615950198">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void ipv4_rx_configure(struct pnode *pn, struct pbuf *pb)
    </p>
    <p>
      &#28155;&#21152;&#21024;&#38500;connection match entry
    </p>
  </body>
</html></richcontent>
<node CREATED="1396944312544" ID="ID_230367356" MODIFIED="1396944313986" TEXT="ipv4_rx_handle_h2c_metadata_ipv4_rule_create"/>
<node CREATED="1396944331784" ID="ID_314492639" MODIFIED="1396944332576" TEXT="ipv4_rx_handle_h2c_metadata_ipv4_rule_destroy"/>
</node>
<node CREATED="1396947147518" ID="ID_1392751476" MODIFIED="1396947150300" TEXT="ipv4_rx_work">
<node CREATED="1396947159138" ID="ID_1011653417" MODIFIED="1396947160480" TEXT="ipv4_rx_process">
<node CREATED="1396947181728" ID="ID_1846753468" MODIFIED="1396947183280" TEXT="ipv4_rx_process_pbuf">
<node CREATED="1396947193308" FOLDED="true" ID="ID_659677378" MODIFIED="1396952161684" TEXT="ipv4_rx_process_pbuf_udp">
<node CREATED="1396947195688" ID="ID_97696139" MODIFIED="1396947202210">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="ipv4_rx_udp.jpg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396947230929" FOLDED="true" ID="ID_316350610" MODIFIED="1396952163624" TEXT="ipv4_rx_process_pbuf_tcp">
<node CREATED="1396948931131" ID="ID_1794534734" MODIFIED="1396948937923">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="ipv4_rx_tcp.jpg" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1395576240776" ID="ID_126750899" MODIFIED="1395576246380" TEXT="corefreq">
<node CREATED="1395576247850" ID="ID_1129712402" MODIFIED="1395576249702" TEXT="API">
<node CREATED="1395576250690" ID="ID_1264447212" MODIFIED="1395576251842" TEXT="void corefreq_init(struct corefreq_instance *cfsi, int32_t net_num)">
<node CREATED="1395573208871" ID="ID_391611361" MODIFIED="1395576274914" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : cfsi-&gt;pn"/>
</node>
</node>
</node>
<node CREATED="1395575211568" ID="ID_1552392714" MODIFIED="1395576454720" TEXT="ipv6oe_rx">
<node CREATED="1395575220618" ID="ID_761446085" MODIFIED="1395575222360" TEXT="API">
<node CREATED="1395575223218" ID="ID_588077376" MODIFIED="1395576477104" TEXT="void ipv6oe_rx_init(struct ipv6oe_rx *ir, int32_t net_num)">
<node CREATED="1395573208871" ID="ID_1509706987" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
</node>
</node>
</node>
<node CREATED="1395575867535" ID="ID_73718239" MODIFIED="1395576745311" TEXT="ipv6_rx">
<node CREATED="1395575872675" ID="ID_783809012" MODIFIED="1395575874567" TEXT="API">
<node CREATED="1395575875635" ID="ID_1142055601" MODIFIED="1395576774415" TEXT="bool ipv6_rx_init(struct ipv6_rx *ir, int32_t net_num, struct pnode_registry *pr, struct heap_mgr *connection_hm)">
<node CREATED="1395573208871" ID="ID_1979193025" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
</node>
<node CREATED="1396598462273" ID="ID_930718331" MODIFIED="1396615999898">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void ipv6_rx_configure(struct pnode *pn, struct pbuf *pb)
    </p>
    <p>
      &#28155;&#21152;&#21024;&#38500;connection match entry
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396617717676" ID="ID_589556039" MODIFIED="1396617726798" TEXT="connection match entry"/>
</node>
<node CREATED="1395576985668" ID="ID_1654411538" MODIFIED="1395576989822" TEXT="tun6rd">
<node CREATED="1395576991220" ID="ID_1104317966" MODIFIED="1395576993652" TEXT="API">
<node CREATED="1395577010677" ID="ID_1815590944" MODIFIED="1395577011939" TEXT="bool tun6rd_init(struct tun6rd *ir, int32_t net_num, struct pnode_registry *pr, struct heap_mgr *connection_hm)">
<node CREATED="1395573208871" ID="ID_384395301" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
</node>
<node CREATED="1395577239575" ID="ID_1278235060" MODIFIED="1395577241539" TEXT="void tun6rd_bind_ipv4_rx(struct tun6rd *ir, struct pnode *pn)">
<node CREATED="1395577281805" ID="ID_1816169426" MODIFIED="1395577358159" TEXT="&#x6307;&#x5b9a;ipv4_rx&#x4e3a;tun6rd&#x7684;&#x4e0b;&#x4e00;&#x4e2a;pnode"/>
</node>
<node CREATED="1395577239575" ID="ID_1337729079" MODIFIED="1395577439210" TEXT="void tun6rd_bind_ipv6_rx(struct tun6rd *ir, struct pnode *pn)">
<node CREATED="1395577281805" ID="ID_1564506391" MODIFIED="1395577444514" TEXT="&#x6307;&#x5b9a;ipv6_rx&#x4e3a;tun6rd&#x7684;&#x4e0b;&#x4e00;&#x4e2a;pnode"/>
</node>
<node CREATED="1396621476520" ID="ID_1240515630" MODIFIED="1396621486806" TEXT="tun6rd_pnode_configure"/>
</node>
</node>
<node CREATED="1395576985668" ID="ID_408310888" MODIFIED="1395577953314" TEXT="tunipip6">
<node CREATED="1395576991220" ID="ID_921089758" MODIFIED="1395576993652" TEXT="API">
<node CREATED="1395577010677" ID="ID_553676622" MODIFIED="1395577976100" TEXT="bool tunipip6_init(struct tunipip6 *ir, int32_t net_num, struct pnode_registry *pr, struct heap_mgr *connection_hm)">
<node CREATED="1395573208871" ID="ID_1077556394" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
</node>
<node CREATED="1395577239575" ID="ID_932148723" MODIFIED="1395578012754" TEXT="void tunipip6_bind_ipv4_rx(struct tunipip6 *ir, struct pnode *pn)">
<node CREATED="1395577281805" ID="ID_348276397" MODIFIED="1395578041040" TEXT="&#x6307;&#x5b9a;ipv4_rx&#x4e3a;tunipip6&#x7684;&#x4e0b;&#x4e00;&#x4e2a;pnode"/>
</node>
<node CREATED="1395577239575" ID="ID_1440897661" MODIFIED="1395578030494" TEXT="void tunipip6_bind_ipv6_rx(struct tunipip6 *ir, struct pnode *pn)">
<node CREATED="1395577281805" ID="ID_330546759" MODIFIED="1395578047734" TEXT="&#x6307;&#x5b9a;ipv6_rx&#x4e3a;tunipip6&#x7684;&#x4e0b;&#x4e00;&#x4e2a;pnode"/>
</node>
<node CREATED="1396621461678" ID="ID_1321057350" MODIFIED="1396621471852" TEXT="tunipip6_pnode_configure"/>
</node>
</node>
<node CREATED="1395576985668" FOLDED="true" ID="ID_1440294014" MODIFIED="1396925727519" TEXT="pppoe_rx">
<node CREATED="1396713234489" ID="ID_432049047" MODIFIED="1396713241691" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1396713249179" ID="ID_621083330" MODIFIED="1396713255321">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pppoe-match.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1396713327889" ID="ID_1874089795" MODIFIED="1396713429511" TEXT="&#x6536;&#x5230;&#x4e00;&#x4e2a;pppoe&#x5305;&#x65f6;&#x4ec5;&#x5728;&#x5165;&#x53e3;&#x4e0a;&#x68c0;&#x67e5;eth_node-&gt;pppoe_match_table&#x770b;&#x770b;&#x5305;&#x4e2d;&#x7684;pppoe session&#x4fe1;&#x606f;&#x662f;&#x5426;&#x5408;&#x6cd5;"/>
<node CREATED="1396713435669" ID="ID_340440014" MODIFIED="1396713698119">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21521;pppoe&#20986;&#21475;&#21457;&#36865;&#21253;&#26102;&#23558;&#22312;ipv4/6_rx&#33410;&#28857;&#30340;&#20989;&#25968;ipv4/6_rx_process_pbuf_tcp/udp&#20013;
    </p>
    <p>
      &#26681;&#25454;connection match entry -&gt; xmit_pppoe_session_id&#25554;&#20837;pppoe header
    </p>
    <p>
      &#27880;&#24847;connection match entry -&gt; xmit_pppoe_session_id&#26159;hlos nss driver&#22312;
    </p>
    <p>
      &#21019;&#24314;connection match entry&#26102;&#30830;&#23450;&#30340;&#65292;&#36319;struct pppoe_session_match_entry&#27809;&#26377;&#20851;&#31995;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396712273532" ID="ID_611890711" MODIFIED="1396712281327" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1396712322685" ID="ID_379872679" MODIFIED="1396712327047" TEXT="struct pppoe_rx">
<node CREATED="1396712342705" ID="ID_893996048" LINK="#ID_462880357" MODIFIED="1396712483621" TEXT="struct pppoe_session_match_entry *pppoe_session_match_entries"/>
</node>
</node>
<node CREATED="1396617756496" FOLDED="true" ID="ID_462880357" MODIFIED="1396925725629">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppoe session match entry
    </p>
    <p>
      pppoe_session_match_entry&#26159;&#23450;&#20041;&#22312;ocm&#20013;&#25968;&#32452;
    </p>
  </body>
</html></richcontent>
<node CREATED="1396712379579" FOLDED="true" ID="ID_1425785450" MODIFIED="1396925603499" TEXT="struct pppoe_session_match_entry">
<node CREATED="1396712400959" ID="ID_151910556" MODIFIED="1396712403201" TEXT="struct pppoe_session_match_entry *next"/>
<node CREATED="1396712403789" ID="ID_1959303730" MODIFIED="1396712408331" TEXT="struct pppoe_session_match_entry *prev"/>
<node CREATED="1396712418859" ID="ID_1194078231" MODIFIED="1396712419791" TEXT="uint16_t pppoe_session_id"/>
<node CREATED="1396712430639" ID="ID_1043707737" MODIFIED="1396712431601" TEXT="uint16_t pppoe_remote_mac[3]"/>
<node CREATED="1396712443099" ID="ID_1431703400" MODIFIED="1396712443981" TEXT="uint32_t pppoe_exceptions[PNODE_EXCEPTION_EVENT_PPPOE_LAST]"/>
<node CREATED="1396712453489" ID="ID_1521148292" MODIFIED="1396712454371" TEXT="uint32_t index"/>
<node CREATED="1396712466389" ID="ID_778494636" MODIFIED="1396712467271" TEXT="int32_t interface_num"/>
</node>
<node CREATED="1396712536894" ID="ID_1405391294" MODIFIED="1396712540281" TEXT="static struct pppoe_session_match_entry pppoe_session_match_entries[PPPOE_RX_NUM_SESSION_PER_INTERFACE * N2H_NUM_TOTAL_NET_INTERFACES] __attribute__((section(&quot;.ocm_data&quot;)));"/>
<node CREATED="1396712618783" ID="ID_834089426" MODIFIED="1396712642975">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pppoe-match-entry.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1396712830107" ID="ID_1524769253" MODIFIED="1396713201786">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pppoe_session_match_entry&#30340;&#23454;&#38469;&#23384;&#25918;&#20301;&#32622;&#26159;pppoe_rx-&gt;pppoe_session_match_entries
    </p>
    <p>
      &#23427;&#26159;&#19968;&#20010;&#22823;&#25968;&#32452;&#65292;&#27599;&#20010;eth_node&#20250;&#20351;&#29992;&#20854;&#20013;&#19968;&#27573;&#21363;8&#20010;&#20803;&#32032;&#12290;&#24403;eth_node&#19978;&#27809;&#26377;pppoe session&#26102;&#36825;&#20123;&#31354;&#38386;&#30340;struct pppoe_session_match_entry&#34987;&#38142;&#25509;&#22312;eth_node-&gt;pppoe_session_match_entry_free_list&#38142;&#34920;&#20013;&#12290;&#24403;&#26377;&#26032;&#30340;pppoe session&#26102;&#20250;&#20174;&#31354;&#38386;&#38142;&#34920;&#20013;&#20998;&#37197;&#19968;&#20010;&#20803;&#32032;&#65292;&#22312;&#22635;&#20837;session&#20449;&#24687;&#21518;&#20877;&#25918;&#20837;hash&#34920;eth_node-&gt;pppoe_match_table&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396712653093" ID="ID_1211875579" MODIFIED="1396925723719" TEXT="&#x56e0;&#x4e3a;pppoe session id&#x7684;scope&#x662f;ethernet interface&#xff0c;&#x6240;&#x4ee5;&#x5b9e;&#x9645;&#x6bcf;&#x4e2a;eth_node&#x90fd;&#x6709;&#x4e00;&#x4e2a;pppoe_match_table"/>
</node>
<node CREATED="1395576991220" ID="ID_787241357" MODIFIED="1395576993652" TEXT="API">
<node CREATED="1395577010677" ID="ID_1790854339" MODIFIED="1395578548783" TEXT="void pppoe_rx_init(struct pppoe_rx *prn, int32_t net_num, struct pnode_registry *pr)">
<node CREATED="1395573208871" ID="ID_510739437" MODIFIED="1395575257847" TEXT="&#x8c03;&#x7528;pnode_init&#x521d;&#x59cb;&#x5316;pnode : ir-&gt;pn"/>
<node CREATED="1394955743648" ID="ID_1494383679" LINK="#ID_1952425393" MODIFIED="1395578645475" TEXT="&#x8c03;&#x7528;pnode_registry_register_pnode&#x5728;retail router 0&#x7684;pnode&#x4ed3;&#x5e93;&#x4e2d;&#x6ce8;&#x518c;pppoe_rx&#x8fd9;&#x4e2a;pnode"/>
</node>
<node CREATED="1395577239575" ID="ID_1054852134" MODIFIED="1395578574107" TEXT="void pppoe_rx_bind_ipv4(struct pppoe_rx *prn, struct pnode *pn)">
<node CREATED="1395577281805" ID="ID_523591102" MODIFIED="1395578584991" TEXT="&#x6307;&#x5b9a;ipv4_rx&#x4e3a;pppoe&#x7684;&#x4e0b;&#x4e00;&#x4e2a;pnode"/>
</node>
<node CREATED="1395577239575" ID="ID_1656203280" MODIFIED="1395578603113" TEXT="void pppoe_rx_bind_ipv6(struct pppoe_rx *prn, struct pnode *pn)">
<node CREATED="1395577281805" ID="ID_307912237" MODIFIED="1395578608275" TEXT="&#x6307;&#x5b9a;ipv6_rx&#x4e3a;pppoe&#x7684;&#x4e0b;&#x4e00;&#x4e2a;pnode"/>
</node>
<node CREATED="1396616256619" ID="ID_301367217" MODIFIED="1396616495801">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppoe_rx_configure
    </p>
    <p>
      &#21024;&#38500;pppoe session match entry
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1396621443848" ID="ID_978271931" MODIFIED="1396621448110" TEXT="lag">
<node CREATED="1396621449288" ID="ID_5639361" MODIFIED="1396621450960" TEXT="API">
<node CREATED="1396621451938" ID="ID_1225184877" MODIFIED="1396621453400" TEXT="lag_pnode_configure"/>
</node>
</node>
<node CREATED="1395573088954" ID="ID_697888284" MODIFIED="1396925504148" TEXT="eth_node">
<node CREATED="1396670602788" ID="ID_900958984" MODIFIED="1396670610685" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1396670611369" ID="ID_904836316" MODIFIED="1396671301849" TEXT="eth_node&#x4f5c;&#x4e3a;synopsys_gmac&#xff0c;tun6rd&#xff0c;tunipip6&#xff0c;redir_rx&#xff0c;lag&#x7b49;&#x7684;&#x57fa;&#x7c7b;&#xff0c;&#xa;&#x53ef;&#x4ee5;&#x8ba9;&#x5916;&#x754c;&#x628a;&#x8fd9;&#x4e9b;&#x4e0d;&#x540c;&#x7684;&#x5b50;&#x7c7b;&#x89c6;&#x4e3a;&#x7b49;&#x540c;&#x7684;&#x4e2a;&#x4f53;&#xff0c;&#x4ece;&#x800c;&#x5411;&#x5916;&#x754c;&#x5c55;&#x73b0;&#x76f8;&#x540c;&#x7684;&#x63a5;&#x53e3;&#xa;&#x6ce8;&#x610f;&#x6240;&#x6709;eth_node&#x7684;&#x5b50;&#x7c7b;&#x90fd;&#x5e94;&#x8be5;&#x5c06;struct eth_node&#x4f5c;&#x4e3a;&#x4ed6;&#x4eec;&#x81ea;&#x5df1;&#x7684;&#x7ed3;&#x6784;&#x4f53;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x6210;&#x5458;"/>
<node CREATED="1396670925555" ID="ID_303406655" MODIFIED="1396670966414" TEXT="&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x4e00;&#x4e2a;eth_node&#x5e94;&#x8be5;&#x7ecf;&#x8fc7;open, linkup&#x8fc7;&#x7a0b;&#x4e4b;&#x540e;&#x624d;&#x80fd;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1396670814028" ID="ID_1047870679" MODIFIED="1396670820627" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1396670846876" ID="ID_1542955112" MODIFIED="1396670848276" TEXT="struct eth_node"/>
</node>
<node CREATED="1396322478611" FOLDED="true" ID="ID_14622690" MODIFIED="1413846395064" TEXT="API">
<node CREATED="1396322482006" ID="ID_1352091893" MODIFIED="1396322522993">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void eth_node_init(struct eth_node *en, int32_t net_num, uint32_t net_type,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pnode_enqueue_pbuf_method_t enqueue_pbuf,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pnode_enqueue_plist_method_t enqueue_plist,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pnode_configure_method_t configure,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;eth_node_open_method_t open,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;eth_node_close_method_t close,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;eth_node_get_link_speed_method_t get_link_speed,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;eth_node_set_link_speed_method_t set_link_speed,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;eth_node_get_link_status_method_t get_link_status,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;eth_node_set_link_status_method_t set_link_status)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396620246894" ID="ID_598297737" MODIFIED="1396620248756" TEXT="eth_node_open"/>
<node CREATED="1396620325474" ID="ID_130683815" MODIFIED="1396620326546" TEXT="eth_node_close"/>
<node CREATED="1396620417474" ID="ID_1714375739" MODIFIED="1396620433586">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      eth_node_set_link_status
    </p>
    <p>
      eth_node_set_link_speed
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1396620746965" ID="ID_788840743" MODIFIED="1396620754927" TEXT="synopsys_gmac">
<node CREATED="1396620756685" ID="ID_290273494" MODIFIED="1396620758767" TEXT="API">
<node CREATED="1396620759645" ID="ID_953224654" MODIFIED="1396620810218">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      synopsys_gmac_configure
    </p>
    <p>
      &#37197;&#32622;synopsys_gmac&#30340;mtu
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1396620951686" FOLDED="true" ID="ID_1272581881" MODIFIED="1396712224729" TEXT="redir_rx">
<node CREATED="1396669284131" ID="ID_300956996" MODIFIED="1396669292047" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1396669293607" ID="ID_1316524480" MODIFIED="1396669315137">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="virtual_interface_1.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1396669896394" ID="ID_1118803702" MODIFIED="1396670199445">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      virtual interface&#30340;&#22522;&#31867;&#20063;&#26159;eth_node&#65292;&#25152;&#26377;virtual interface&#22312;redir_init&#20013;&#24050;&#32463;&#21019;&#24314;&#22909;&#65292;&#21482;&#19981;&#36807;&#36824;&#26410;link up
    </p>
    <p>
      &#30495;&#27491;&#30340;link up&#26159;&#22312;&#25910;&#21040;PNODE_H2C_METADATA_TYPE_VIRTUAL_INTERFACE_CREATE&#21629;&#20196;&#25253;&#25991;&#26102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396620960167" ID="ID_554445241" MODIFIED="1396620962149" TEXT="API">
<node CREATED="1396620963297" ID="ID_1804932734" MODIFIED="1396704096680">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      redir_rx_configure
    </p>
    <p>
      &#28155;&#21152;&#21024;&#38500;virtual interface
    </p>
  </body>
</html></richcontent>
<node CREATED="1396670112138" ID="ID_1167411208" MODIFIED="1396670114439" TEXT="redir_rx_handle_h2c_metadata_virtual_interface_create"/>
<node CREATED="1396670122887" ID="ID_471988883" MODIFIED="1396670124240" TEXT="redir_rx_handle_h2c_metadata_virtual_interface_destroy"/>
</node>
</node>
</node>
<node CREATED="1396621802134" ID="ID_436531753" MODIFIED="1396621825126" TEXT="c2c_tx">
<node CREATED="1396621827624" ID="ID_1608614452" MODIFIED="1396621829826" TEXT="API">
<node CREATED="1396621839144" ID="ID_903963799" MODIFIED="1396621840806" TEXT="c2c_tx_configure"/>
</node>
</node>
<node CREATED="1395541617374" ID="ID_51392343" MODIFIED="1395541626906" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1395541729619" ID="ID_654783808" MODIFIED="1395541882183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31995;&#32479;&#20174;&#21551;&#21160;&#21040;&#36816;&#34892;&#24635;&#20849;&#38656;&#35201;&#32463;&#21382;4&#20010;&#38454;&#27573;&#65306;system boot, system init, init, start
    </p>
    <p>
      &#27599;&#20010;package&#21487;&#20197;&#22312;&#36825;4&#20010;HOOK&#28857;&#21152;&#20837;hook, &#20197;&#22312;&#19981;&#21516;&#30340;&#21021;&#22987;&#21270;&#38454;&#27573;&#20570;&#19981;&#21516;&#30340;&#20107;&#24773;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1396507733694" FOLDED="true" ID="ID_689122317" MODIFIED="1413846491834" POSITION="left" TEXT="message exchange">
<node CREATED="1396515646290" ID="ID_188565881" MODIFIED="1396953217758" TEXT="&#x6982;&#x7565;&#x56fe;">
<node CREATED="1396515671262" ID="ID_1476672711" LINK="#ID_1309454219" MODIFIED="1413846410723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/message_exchange.jpg" />
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1396516160218" FOLDED="true" ID="ID_1198263743" MODIFIED="1413846478075" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1396516154130" ID="ID_1885974756" MODIFIED="1413846473427" TEXT="struct nss_if_mem_map">
<node CREATED="1396516184363" ID="ID_909249034" MODIFIED="1396516186102" TEXT="struct h2n_descriptor_ring h2n_rings[N2H_RING_COUNT]">
<node CREATED="1396516347066" FOLDED="true" ID="ID_1239667710" MODIFIED="1413846476544" TEXT="struct n2h_descriptor *descs">
<node CREATED="1396516388637" ID="ID_1426991083" MODIFIED="1396516390678" TEXT="uint32_t opaque"/>
<node CREATED="1396516399746" ID="ID_1869154800" MODIFIED="1396516401214" TEXT="uint32_t buffer"/>
<node CREATED="1396516411416" ID="ID_20073300" MODIFIED="1396516412966" TEXT="uint16_t buffer_len"/>
<node CREATED="1396516422445" ID="ID_877781482" MODIFIED="1396516424595" TEXT="uint16_t reserved1"/>
<node CREATED="1396516431975" ID="ID_1667197521" MODIFIED="1396516433562" TEXT="uint16_t payload_len"/>
<node CREATED="1396516443077" ID="ID_354045157" MODIFIED="1396516443888" TEXT="uint16_t reserved2"/>
<node CREATED="1396516453486" ID="ID_250779316" MODIFIED="1396516455548" TEXT="uint16_t payload_offs"/>
<node CREATED="1396516462518" ID="ID_481220075" MODIFIED="1396516463443" TEXT="uint16_t interface_num"/>
<node CREATED="1396516476609" ID="ID_877879747" MODIFIED="1396516478749" TEXT="uint8_t buffer_type"/>
<node CREATED="1396516485746" ID="ID_1743297561" MODIFIED="1396516486759" TEXT="uint8_t response_type"/>
<node CREATED="1396516495786" ID="ID_1510066281" MODIFIED="1396516497169" TEXT="uint16_t bit_flags"/>
<node CREATED="1396516505678" ID="ID_368658170" MODIFIED="1396516507877" TEXT="uint32_t timestamp_lo"/>
<node CREATED="1396516515295" ID="ID_906193640" MODIFIED="1396516516211" TEXT="uint32_t timestamp_hi"/>
</node>
<node CREATED="1396516358062" ID="ID_1333869735" MODIFIED="1396516360191" TEXT="uint16_t size"/>
<node CREATED="1396516368466" ID="ID_949055971" MODIFIED="1396516370040" TEXT="int16_t int_bit"/>
</node>
<node CREATED="1396516196218" ID="ID_692124563" MODIFIED="1396516197755" TEXT="struct n2h_descriptor_ring n2h_rings[N2H_RING_COUNT - 1]"/>
<node CREATED="1396516206657" ID="ID_455028561" MODIFIED="1396516208511" TEXT="uint32_t magic"/>
<node CREATED="1396516214793" ID="ID_802539963" MODIFIED="1396516216317" TEXT="uint16_t if_version"/>
<node CREATED="1396516224181" ID="ID_1256850355" MODIFIED="1396516225557" TEXT="uint8_t h2n_ring_count"/>
<node CREATED="1396516235387" ID="ID_1524787066" MODIFIED="1396516237085" TEXT="uint8_t n2h_ring_count"/>
<node CREATED="1396516244631" ID="ID_1651010463" MODIFIED="1396516246477" TEXT="uint32_t h2n_nss_indexes[N2H_RING_COUNT]"/>
<node CREATED="1396516256481" ID="ID_1778333187" MODIFIED="1396516257396" TEXT="uint32_t n2h_nss_indexes[N2H_RING_COUNT - 1]"/>
<node CREATED="1396516267517" ID="ID_30568408" MODIFIED="1396516269004" TEXT="uint8_t num_phys_ports"/>
<node CREATED="1396516282828" ID="ID_749496928" MODIFIED="1396516284631" TEXT="uint8_t reserved1[3]"/>
<node CREATED="1396516293248" ID="ID_1670928679" MODIFIED="1396516294196" TEXT="const uint32_t h2n_hlos_indexes[N2H_RING_COUNT]"/>
<node CREATED="1396516306849" ID="ID_1736794822" MODIFIED="1396516307742" TEXT="const uint32_t n2h_hlos_indexes[N2H_RING_COUNT - 1]"/>
<node CREATED="1396516320715" ID="ID_478065935" MODIFIED="1396516321590" TEXT="uint32_t reserve"/>
</node>
</node>
<node CREATED="1396516655399" FOLDED="true" ID="ID_1500582330" MODIFIED="1413846483648" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1396516663946" ID="ID_1565014894" MODIFIED="1396517704815">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      nss&#21644;hlos&#36890;&#36807;tcm&#20849;&#20139;struct nss_if_mem_map&#12290;nss_if_mem_map&#30001;nss firmware&#22312;&#20989;&#25968;n2h_init&#20013;&#21021;&#22987;&#21270;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396517775907" FOLDED="true" ID="ID_1002234996" MODIFIED="1413846481936" TEXT="&#x6ce8;&#x610f;struct nss_if_mem_map&#x7ed3;&#x6784;&#x4f53;&#x4ee5;&#x53ca;descriptor&#x672c;&#x8eab;&#x90fd;&#x5b58;&#x653e;&#x5728;tcm&#x4e2d;&#x4ee5;&#x4fbf;nss&#x548c;hlos&#x5171;&#x4eab;">
<node CREATED="1396517780835" ID="ID_1662505868" MODIFIED="1396517798816">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct nss_if_mem_map nss_if_mem_map_inst __attribute__((section(&quot;.tcm_nss_if_map&quot;)));
    </p>
    <p>
      struct h2n_descriptor h2n_descs[N2H_NSS_H2N_RING_COUNT][N2H_NSS_RING_SIZE] __attribute__((section(&quot;.tcm_nss_desc_queue&quot;))) __attribute__((aligned(CACHE_LINE_SIZE)));
    </p>
    <p>
      struct n2h_descriptor n2h_descs[N2H_NSS_N2H_RING_COUNT][N2H_NSS_RING_SIZE] __attribute__((section(&quot;.tcm_nss_desc_queue&quot;))) __attribute__((aligned(CACHE_LINE_SIZE)));
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396518190400" ID="ID_1987521391" MODIFIED="1396518574239">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#35835;&#32773;&#21644;&#20889;&#32773;&#23545;index&#30340;&#21306;&#21035;&#23545;&#24453;&#65306;
    </p>
    <p>
      &#35835;&#32773;&#20250;&#19968;&#30452;&#35835;&#21040;writer_index&#65292;&#20063;&#23601;&#26159;&#35835;&#21040;reader_index == writer_index&#20026;&#27490;
    </p>
    <p>
      &#32780;&#20889;&#32773;&#20250;&#19968;&#30452;&#20889;&#21040;reader_index - 1&#65292;&#20063;&#23601;&#26159;&#20889;&#21040;writer_index == reader_index -1&#20026;&#27490;
    </p>
  </body>
</html></richcontent>
<node CREATED="1396518277846" ID="ID_368056248" MODIFIED="1396518353731">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35835;&#32773;
    </p>
    <p>
      count = (*writer_index - *reader_index + N2H_NSS_RING_SIZE) &amp; N2H_NSS_RING_MASK
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396518277846" ID="ID_1681453014" MODIFIED="1396518405124">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20889;&#32773;
    </p>
    <p>
      count = (*reader_index - *writer_index&#160;&#160;-1 + N2H_NSS_RING_SIZE) &amp; N2H_NSS_RING_MASK
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396518792851" ID="ID_197611330" MODIFIED="1396519219807" TEXT="&#x4e3a;&#x4e86;&#x52a0;&#x901f;&#x5bf9;descriptor ring&#x7684;&#x8bbf;&#x95ee;&#xff0c;hlos&#x7684;nss&#x9a71;&#x52a8;&#x5728;struct nss_ctx_instance&#x4e2d;&#x9488;&#x5bf9;&#x6bcf;&#x4e2a;descriptor ring&#x505a;&#x4e86;&#x4e00;&#x4efd;&#x6620;&#x5c04;&#xff0c;&#x8fd9;&#x6837;&#x5bf9;descriptor ring&#x7684;&#x5927;&#x90e8;&#x5206;&#x8bbf;&#x95ee;&#x90fd;&#x662f;cacheable&#x7684;&#xff0c;&#x4ec5;&#x4ec5;&#x5728;&#x66f4;&#x65b0;index&#x65f6;&#x624d;&#x662f;nonecacheable&#x7684;&#x3002;&#x6ce8;&#x610f;&#x771f;&#x6b63;&#x7684;descriptor&#x8fd8;&#x662f;&#x4fdd;&#x5b58;&#x5728;tcm&#xff0c;&#x5e76;&#x6ca1;&#x6709;&#x5728;struct nss_ctx_instance&#x4e2d;&#x590d;&#x5236;&#x6620;&#x5c04;&#x3002;&#xa;&#xa;&#x89c1;hlos&#x4e2d;nss&#x9a71;&#x52a8;&#x7684;nss_core_init_nss&#x51fd;&#x6570;&#x3002;"/>
</node>
<node CREATED="1396519393017" ID="ID_911576337" MODIFIED="1396519403408" TEXT="hlos to nss">
<node CREATED="1396519414382" ID="ID_1354108829" LINK="#ID_1309454219" MODIFIED="1396523820192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      empty buffer
    </p>
    <p>
      &#27492;descriptor ring&#29992;&#20110;hlos&#21521;nss&#21457;&#36865;skbuf
    </p>
  </body>
</html></richcontent>
<node CREATED="1396519732091" ID="ID_1280565003" LINK="#ID_1948021231" MODIFIED="1396519899624" TEXT="n2h&#x8282;&#x70b9;&#x6709;&#x4e00;&#x4e2a;&#x5b9a;&#x65f6;&#x5668;n2h_buffer_refill&#x6bcf;&#x9694;1ms&#x68c0;&#x67e5;nss&#x62e5;&#x6709;&#x7684;skbuf&#x662f;&#x5426;&#x5c11;&#x4e8e;2048&#xff0c;&#xa;&#x5982;&#x679c;&#x5c11;&#x4e8e;&#x5219;&#x5411;hlos&#x53d1;&#x4e2d;&#x65ad;&#x8bf7;&#x6c42;&#x65b0;&#x7684;skbuf"/>
</node>
<node CREATED="1396519451214" ID="ID_1779425355" MODIFIED="1396519456863" TEXT="cmd/data">
<node CREATED="1396596969112" ID="ID_1664792742" MODIFIED="1396596972911" TEXT="hlos_to_nss_data_command_work">
<node CREATED="1396596982314" ID="ID_537072323" MODIFIED="1396596983683" TEXT="n2h_handle_hlos_to_nss_data_command_buffer">
<node CREATED="1396597255656" ID="ID_1255343920" MODIFIED="1396597292406" TEXT="&#x4ece;descriptor&#x4e2d;&#x53d6;&#x51fa;payload&#x5373;skbuf&#x5c06;&#x5176;&#x653e;&#x5165;pbuf&#x4e2d;"/>
<node CREATED="1396597305257" ID="ID_1288093862" MODIFIED="1396663581990" TEXT="n2h_handle_h2c_metadata">
<node CREATED="1396598372327" ID="ID_1897338424" MODIFIED="1396598387379">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PNODE_H2C_METADATA_TYPE_IPV4_RULE_CREATE
    </p>
    <p>
      PNODE_H2C_METADATA_TYPE_IPV4_RULE_DESTROY
    </p>
  </body>
</html></richcontent>
<node CREATED="1396598415283" ID="ID_327335916" LINK="#ID_445143725" MODIFIED="1396598511498" TEXT="pnode_configure(ipv4_rx_pnode, pb)"/>
</node>
<node CREATED="1396598372327" ID="ID_1411547434" MODIFIED="1396616024408">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PNODE_H2C_METADATA_TYPE_IPV6_RULE_CREATE
    </p>
    <p>
      PNODE_H2C_METADATA_TYPE_IPV6_RULE_DESTROY
    </p>
  </body>
</html></richcontent>
<node CREATED="1396598415283" ID="ID_19352605" LINK="#ID_930718331" MODIFIED="1396616061538" TEXT="pnode_configure(ipv6_rx_pnode, pb)"/>
</node>
<node CREATED="1396616115997" ID="ID_504921175" MODIFIED="1396616126818" TEXT="PNODE_H2C_METADATA_TYPE_DESTROY_PPPOE_CONNECTION_RULE">
<node CREATED="1396598415283" ID="ID_1945332229" LINK="#ID_301367217" MODIFIED="1396616467761" TEXT="pnode_configure(pppoe_rx_pnode, pb)"/>
</node>
<node CREATED="1396616567249" ID="ID_753555735" MODIFIED="1396616569271" TEXT="PNODE_H2C_METADATA_TYPE_DESTROY_ALL_L3_RULES">
<node CREATED="1396598415283" ID="ID_31818097" LINK="#ID_1501975637" MODIFIED="1396616908804" TEXT="pnode_configure(eth_rx_pnode, pb)"/>
</node>
<node CREATED="1396619815593" ID="ID_619347306" MODIFIED="1396619837745">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PNODE_H2C_METADATA_TYPE_L2SWITCH_RULE_CREATE:
    </p>
    <p>
      PNODE_H2C_METADATA_TYPE_L2SWITCH_RULE_DESTROY:
    </p>
  </body>
</html></richcontent>
<node CREATED="1396598415283" ID="ID_189406999" LINK="#ID_1185499529" MODIFIED="1396620028965" TEXT="pnode_configure(eth_bridge_rx_pnode, pb)"/>
</node>
<node CREATED="1396620113433" ID="ID_1342638682" MODIFIED="1396620115255" TEXT="PNODE_H2C_METADATA_TYPE_MAC_ADDR_SET">
<node CREATED="1396620127373" ID="ID_1004230129" MODIFIED="1396620168236">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      n2h_handle_h2c_metadata_mac_addr_set
    </p>
    <p>
      &#35774;&#32622;&#26576;&#20010;eth_node&#20063;&#21363;&#26576;&#20010;synopsys_gmac&#30340;mac&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396620184184" ID="ID_1298767472" MODIFIED="1396620185536" TEXT="PNODE_H2C_METADATA_TYPE_IF_OPEN">
<node CREATED="1396620222994" ID="ID_596177710" LINK="#ID_598297737" MODIFIED="1396620267356" TEXT="n2h_handle_h2c_metadata_if_open"/>
</node>
<node CREATED="1396620299274" ID="ID_1294903664" MODIFIED="1396620300336" TEXT="PNODE_H2C_METADATA_TYPE_IF_CLOSE">
<node CREATED="1396620308614" ID="ID_1340056711" LINK="#ID_130683815" MODIFIED="1396620340186" TEXT="n2h_handle_h2c_metadata_if_close"/>
</node>
<node CREATED="1396620386494" ID="ID_1548421106" MODIFIED="1396620387706" TEXT="PNODE_H2C_METADATA_TYPE_IF_LINK_STATE_NOTIFY">
<node CREATED="1396620399534" ID="ID_296028017" LINK="#ID_1714375739" MODIFIED="1396620450316" TEXT="n2h_handle_h2c_metadata_link_state_notify"/>
</node>
<node CREATED="1396620484894" ID="ID_487283328" MODIFIED="1396620486256" TEXT="PNODE_H2C_METADATA_TYPE_IF_MTU_CHANGE">
<node CREATED="1396598415283" ID="ID_1541126178" LINK="#ID_953224654" MODIFIED="1396620778967" TEXT="pnode_configure(synopsys_gmac_pnode, pb)"/>
</node>
<node CREATED="1396620832916" ID="ID_1599805714" MODIFIED="1396620847658">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PNODE_H2C_METADATA_TYPE_VIRTUAL_INTERFACE_CREATE
    </p>
    <p>
      PNODE_H2C_METADATA_TYPE_VIRTUAL_INTERFACE_DESTROY
    </p>
  </body>
</html></richcontent>
<node CREATED="1396598415283" ID="ID_111657434" LINK="#ID_1804932734" MODIFIED="1396620984999" TEXT="pnode_configure(redir_rx_pnode, pb)"/>
</node>
<node CREATED="1396621088937" ID="ID_1935092589" MODIFIED="1396621090729" TEXT="PNODE_H2C_METADATA_TYPE_DESTROY_ALL_L2SWITCH_RULES">
<node CREATED="1396598415283" ID="ID_564768988" LINK="#ID_1185499529" MODIFIED="1396620028965" TEXT="pnode_configure(eth_bridge_rx_pnode, pb)"/>
</node>
<node CREATED="1396621352237" ID="ID_1649100600" MODIFIED="1396621353369" TEXT="PNODE_H2C_METADATA_TYPE_GENERIC_IF_PARAMS">
<node CREATED="1396598415283" ID="ID_416730152" LINK="#ID_1225184877" MODIFIED="1396621514316" TEXT="pnode_configure(lag_pnode, pb)"/>
<node CREATED="1396598415283" ID="ID_625347303" LINK="#ID_1240515630" MODIFIED="1396621566086" TEXT="pnode_configure(tun6rd_pnode, pb)"/>
<node CREATED="1396598415283" ID="ID_275634763" LINK="#ID_1321057350" MODIFIED="1396621587276" TEXT="pnode_configure(tunipip6_pnode, pb)"/>
</node>
<node CREATED="1396621647844" ID="ID_1253157015" MODIFIED="1396621648706" TEXT="PNODE_H2C_METADATA_TYPE_C2C_TX_MAP">
<node CREATED="1396598415283" ID="ID_1074538147" LINK="#ID_903963799" MODIFIED="1396621885086" TEXT="pnode_configure(c2c_tx_pnode, pb)"/>
</node>
</node>
<node CREATED="1396597740634" ID="ID_1205741809" MODIFIED="1396597844393">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;descriptor-&gt;interface_num&#25214;&#21040;&#30456;&#24212;&#30340;pnode(&#25110;&#20026;synopsys_gmac&#25110;&#20026;)
    </p>
    <p>
      &#20877;&#23558;&#21253;&#25918;&#20837;&#20854;&#20837;&#21475;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396598026626" ID="ID_737463170" MODIFIED="1396598059288" TEXT="&#x82e5;&#x51fa;&#x63a5;&#x53e3;&#x4e3a;virtual interface&#x5219;&#x5c06;&#x5305;&#x653e;&#x5165;eth_rx&#x8282;&#x70b9;&#x4e2d;"/>
</node>
</node>
</node>
</node>
<node CREATED="1396519404265" ID="ID_551142991" MODIFIED="1396519408898" TEXT="nss to hlos">
<node CREATED="1396519414382" ID="ID_578119100" LINK="#ID_1263447351" MODIFIED="1396622568288">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      empty buffer
    </p>
    <p>
      &#27492;descriptor ring&#29992;&#20110;&#21521;hlos&#24402;&#36824;skbuf
    </p>
    <p>
      n2h_handle_nss_to_hlos_empty_buffer
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396519451214" ID="ID_1048160824" MODIFIED="1396519456863" TEXT="cmd/data">
<node CREATED="1396622504162" ID="ID_965031392" MODIFIED="1396622505094" TEXT="nss_to_hlos_work">
<node CREATED="1396622532406" ID="ID_1406987973" MODIFIED="1396622533648" TEXT="n2h_handle_nss_to_hlos_data_command_buffer">
<node CREATED="1396622964293" ID="ID_1470174905" MODIFIED="1396622965185" TEXT="N2H_BUFFER_PACKET">
<node CREATED="1396623678915" ID="ID_1802405760" MODIFIED="1396623695297" TEXT="&#x4e00;&#x822c;&#x4e3a;&#x5404;&#x79cd;exception&#x7684;&#x5305;"/>
</node>
<node CREATED="1396622978533" ID="ID_1141770987" MODIFIED="1396714653969">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      N2H_BUFFER_STATUS
    </p>
    <p>
      hlos nss driver&#20013;&#21709;&#24212;&#27492;&#31867;&#22411;&#25968;&#25454;&#21253;&#30340;&#20989;&#25968;&#20026;nss_rx_handle_status_pkt
    </p>
  </body>
</html></richcontent>
<node CREATED="1396623461662" ID="ID_617882473" MODIFIED="1396623500790">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rr0_sync
    </p>
    <p>
      &#23558;&#21508;&#31181;&#32479;&#35745;&#20449;&#24687;&#21516;&#27493;&#21040;hlos
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1396714289168" ID="ID_1657567464" MODIFIED="1396714571209">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21508;&#31181;hlos command&#30340;respond
    </p>
    <p>
      &#27880;&#24847;&#36825;&#20123;&#21709;&#24212;&#20449;&#24687;&#24212;&#22312;&#21457;&#32473;n2h&#20043;&#21069;&#22312;struct pbuf *pb-&gt;flags&#19978;&#25171;&#19978;PBUF_FLAG_METADATA&#26631;&#24535;&#20301;
    </p>
    <p>
      &#36825;&#26679;n2h&#22312;&#23558;&#36825;&#20123;&#21709;&#24212;&#20449;&#24687;&#21457;&#22238;&#32473;hlos&#26102;&#20250;&#32479;&#19968;&#23558;buffer type&#25913;&#20026;N2H_BUFFER_STATUS
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396622991623" ID="ID_1221801461" MODIFIED="1396622993205" TEXT="N2H_BUFFER_PACKET_VIRTUAL">
<node CREATED="1396623572999" ID="ID_1540965272" MODIFIED="1396623639817">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      redir_rx_enqueue_pbuf
    </p>
    <p>
      &#21457;&#36865;&#21040;virtual interface&#30340;&#21253;&#23558;&#34987;&#36716;&#36865;&#21040;hlos&#20877;&#21457;&#24448;&#30495;&#27491;&#30340;&#29289;&#29702;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1396623002717" ID="ID_1584223806" MODIFIED="1396623003419" TEXT="N2H_BUFFER_CRYPTO_RESP"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1396953341856" ID="ID_819265449" MODIFIED="1396953348198" POSITION="left" TEXT="buffer recycle"/>
</node>
</map>
