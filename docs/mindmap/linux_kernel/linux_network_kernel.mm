<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1306475983008" ID="ID_1976007133" MODIFIED="1359856749179" TEXT="linux network kernel">
<node CREATED="1306476110637" FOLDED="true" ID="ID_296299379" MODIFIED="1457720872090" POSITION="right" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1306476122923" FOLDED="true" ID="ID_717057786" MODIFIED="1423465896165">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_device:
    </p>
    <p>
      include/linux/netdevice.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1306476187561" ID="ID_1336420146" MODIFIED="1306476237333" TEXT="name: interface&#x540d;&#x79f0;,&#x9a71;&#x52a8;&#x6ce8;&#x518c;&#x65f6;&#x63d0;&#x4f9b;"/>
<node CREATED="1306476254799" ID="ID_1347545785" MODIFIED="1306476262649" TEXT="struct hlist_node name_hlist"/>
<node CREATED="1306476289706" ID="ID_791582337" MODIFIED="1306476297988" TEXT="ifalias:"/>
<node CREATED="1306476334363" ID="ID_528614047" MODIFIED="1306478782309">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      mem_end
    </p>
    <p>
      mem_start
    </p>
    <p>
      base_addr : &#35774;&#22791;&#33258;&#26377;&#20869;&#23384;&#26144;&#23556;&#21040;I/O&#20869;&#23384;&#30340;&#36215;&#22987;&#22320;&#22336;
    </p>
    <p>
      irq :&#35774;&#22791;&#29992;&#20110;&#19982;&#20869;&#26680;&#23545;&#35805;&#30340;&#20013;&#26029;&#32534;&#21495;,&#30001;&#22810;&#20010;&#35774;&#22791;&#20849;&#20139;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306476407152" FOLDED="true" ID="ID_510772514" MODIFIED="1307431536248">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      if_port :&#31471;&#21475;&#31867;&#22411;,&#19968;&#20010;&#35774;&#22791;&#21487;&#20197;&#26377;&#19981;&#21516;&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#36830;&#25509;&#22120;,&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#36873;&#25321;&#20854;&#19968;
    </p>
    <p>
      dma :DMA&#36890;&#36947;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306482196014" ID="ID_1765636505" MODIFIED="1306482265980" TEXT="IF_PORT_UNKNOWN&#xa;IF_PORT_10BASE2&#xa;IF_PORT_10BASET&#xa;IF_PORT_AUI&#xa;IF_PORT_100BASET&#xa;IF_PORT_100BASETX&#xa;IF_PORT_100BASEFX"/>
</node>
<node CREATED="1306476429301" FOLDED="true" ID="ID_1032139430" MODIFIED="1420188756412" TEXT="state">
<node CREATED="1306492631287" ID="ID_1102470386" MODIFIED="1306492669361" TEXT="__LINK_STATE_START&#xa;__LINK_STATE_PRESENT&#xa;__LINK_STATE_NOCARRIER&#xa;__LINK_STATE_LINKWATCH_PENDING&#xa;__LINK_STATE_DORMANT"/>
</node>
<node CREATED="1306476440731" ID="ID_376462550" MODIFIED="1306476445904" TEXT="dev_list"/>
<node CREATED="1306476447722" ID="ID_1069042751" MODIFIED="1306476452936" TEXT="napi_list"/>
<node CREATED="1306476476790" ID="ID_799961205" MODIFIED="1423465766216" TEXT="features :&#x8bbe;&#x5907;&#x5f53;&#x524d;&#x652f;&#x6301;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x5b83;&#x662f;&#x6307;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x6240;&#x652f;&#x6301;&#x7684;&#x529f;&#x80fd;&#x6392;&#x9664;&#x7528;&#x6237;&#x5173;&#x95ed;&#x7684;&#x90a3;&#x4e9b;&#x529f;&#x80fd;&#x540e;&#x5f97;&#x5230;&#x7684;&#x4e00;&#x4e2a;&#x529f;&#x80fd;&#x5217;&#x8868;"/>
<node CREATED="1423465511598" ID="ID_1466765252" MODIFIED="1423465784176" TEXT="hw_features">
<node CREATED="1423465594393" ID="ID_228393172" MODIFIED="1423465647980" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x652f;&#x6301;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x4f46;&#x662f;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;ethtool -K dev xx off&#x5173;&#x95ed;&#x67d0;&#x9879;&#x529f;&#x80fd;"/>
</node>
<node CREATED="1306477960574" ID="ID_896947495" MODIFIED="1306477962418" TEXT="vlan_features">
<node CREATED="1423465800737" ID="ID_625815994" MODIFIED="1423465885017" TEXT="&#x5f53;&#x5728;&#x6b64;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x4e0a;&#x65b0;&#x5efa;&#x4e00;&#x4e2a;vlan&#x8bbe;&#x5907;&#x65f6;&#xff0c;&#x6b64;vlan&#x8bbe;&#x5907;&#x6240;&#x80fd;&#x7ee7;&#x627f;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x5b83;&#x4e00;&#x822c;&#x662f;hw_features&#x7684;&#x4e00;&#x4e2a;&#x5b50;&#x96c6;"/>
</node>
<node CREATED="1306476516312" ID="ID_261986970" MODIFIED="1306478160726" TEXT="ifindex:&#x552f;&#x4e00;ID,&#x5728;&#x8bbe;&#x5907;&#x6ce8;&#x518c;&#x65f6;&#x7531;&#x7cfb;&#x7edf;&#x5206;&#x914d;"/>
<node CREATED="1306476523463" ID="ID_804962346" MODIFIED="1306478262833" TEXT="iflink:&#x7531;(&#x865a;&#x62df;)&#x96a7;&#x9053;&#x8bbe;&#x5907;&#x4f7f;&#x7528;,&#x7528;&#x4e8e;&#x6807;&#x8bc6;&#x62b5;&#x8fbe;&#x96a7;&#x9053;&#x53e6;&#x4e00;&#x7aef;&#x7684;&#x771f;&#x5b9e;&#x8bbe;&#x5907;"/>
<node CREATED="1306476541076" ID="ID_794070279" MODIFIED="1306476564764" TEXT="struct net_device_stats stats: &#x7edf;&#x8ba1;&#x4fe1;&#x606f;"/>
<node CREATED="1306476590005" ID="ID_1797789980" MODIFIED="1306476597449" TEXT="struct iw_handler_def *wireless_handlers"/>
<node CREATED="1306476612993" ID="ID_1032083037" MODIFIED="1306476618704" TEXT="struct iw_public_data *wireless_data"/>
<node CREATED="1306476638413" FOLDED="true" ID="ID_778585710" MODIFIED="1420183331012" TEXT="struct net_device_ops *netdev_ops">
<node CREATED="1306486103224" ID="ID_1997522958" MODIFIED="1413323138543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_init :&#27880;&#20876;&#35774;&#22791;&#26102;&#35843;&#29992;&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306486103224" ID="ID_686652237" MODIFIED="1413323165160">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_uninit
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306486103224" ID="ID_634195855" MODIFIED="1413323178986">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_open
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306486103224" ID="ID_1601658303" MODIFIED="1413323217984">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_stop
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306486103224" ID="ID_1370460359" MODIFIED="1413323237500">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_start_xmit
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306486103224" ID="ID_846632566" MODIFIED="1413323271512">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_select_queue
    </p>
  </body>
</html></richcontent>
<node CREATED="1413323289896" ID="ID_1776168294" LINK="#ID_1145402398" MODIFIED="1413323357485" TEXT="&#x53d1;&#x5305;&#x65f6;&#x82e5;&#x51fa;&#x53e3;&#x8bbe;&#x5907;&#x6709;&#x591a;&#x4e2a;queue&#x5219;&#x672c;&#x51fd;&#x6570;&#x7528;&#x4e8e;&#x4ece;&#x4e2d;&#x9009;&#x62e9;&#x4e00;&#x4e2a;"/>
</node>
<node CREATED="1306486103224" ID="ID_129430496" MODIFIED="1413323375297">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ndo_change_rx_flags
    </p>
    <p>
      ndo_set_rx_mode
    </p>
    <p>
      ndo_set_multicast_list
    </p>
    <p>
      ndo_set_mac_address
    </p>
    <p>
      ndo_validate_addr
    </p>
    <p>
      ndo_do_ioctl
    </p>
    <p>
      ndo_set_config
    </p>
    <p>
      ndo_change_mtu
    </p>
    <p>
      ndo_neigh_setup
    </p>
    <p>
      ndo_tx_timeout
    </p>
    <p>
      ndo_get_stats
    </p>
    <p>
      ndo_vlan_rx_register
    </p>
    <p>
      ndo_vlan_rx_add_vid
    </p>
    <p>
      ndo_vlan_rx_kill_vid
    </p>
    <p>
      ndo_poll_controller
    </p>
    <p>
      ndo_fcoe_ddp_setup
    </p>
    <p>
      ndo_fcoe_ddp_done
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306476661314" ID="ID_732924817" MODIFIED="1306476663848" TEXT="struct ethtool_ops *ethtool_ops"/>
<node CREATED="1306476680063" ID="ID_1485362710" MODIFIED="1306476682543" TEXT="struct header_ops *header_ops"/>
<node CREATED="1306476701948" FOLDED="true" ID="ID_1103080331" MODIFIED="1420188858340">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      flags: &#26576;&#20123;&#20301;&#34920;&#31034;&#35774;&#22791;&#30340;&#21151;&#33021;,&#26576;&#20123;&#20301;&#34920;&#31034;&#35774;&#22791;&#30340;&#29366;&#24577;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306832917386" ID="ID_973431792" MODIFIED="1306832944443" TEXT="IFF_LOOPBACK : &#x8868;&#x660e;&#x63a5;&#x53e3;&#x662f;&#x73af;&#x56de;&#x63a5;&#x53e3;"/>
<node CREATED="1306836401269" ID="ID_1320449908" MODIFIED="1306836428092" TEXT="IFF_POINTOPOINT : &#x8868;&#x660e;&#x63a5;&#x53e3;&#x662f;&#x70b9;&#x5230;&#x70b9;&#x63a5;&#x53e3;"/>
<node CREATED="1306836438244" ID="ID_356852842" MODIFIED="1306836441942" TEXT="IFF_RUNNING :"/>
</node>
<node CREATED="1306476714226" ID="ID_1871061413" MODIFIED="1306476716133" TEXT="gflags"/>
<node CREATED="1306476726152" ID="ID_1716299705" MODIFIED="1306479103786" TEXT="priv_flags :&#x7528;&#x4e8e;&#x5b58;&#x50a8;&#x7528;&#x6237;&#x4e0d;&#x53ef;&#x89c1;&#x7684;&#x6807;&#x8bc6;,&#x7531;vlan&#x548c;bridge&#x4f7f;&#x7528;"/>
<node CREATED="1306476739438" ID="ID_488112606" MODIFIED="1306476741088" TEXT="operstate"/>
<node CREATED="1306476751532" ID="ID_691488436" MODIFIED="1306476753146" TEXT="link_mode"/>
<node CREATED="1306476763994" FOLDED="true" ID="ID_566295389" MODIFIED="1359856749147" TEXT="mtu:&#x8bbe;&#x5907;&#x80fd;&#x5904;&#x7406;&#x7684;&#x5e27;&#x7684;&#x6700;&#x5927;&#x5c3a;&#x5bf8;">
<node CREATED="1306481449655" ID="ID_1611096674" MODIFIED="1306481527214">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPP&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= 296
    </p>
    <p>
      SLIP&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= 296
    </p>
    <p>
      Ethernet= 1500
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306476775688" FOLDED="true" ID="ID_326375824" MODIFIED="1420188884786" TEXT="type">
<node CREATED="1306484449154" ID="ID_148651370" MODIFIED="1306484574775" TEXT="ARPHRD_ETHER &#xa;ARPHRD_ATM &#xa;ARPHRD_IEEE1394 &#xa;ARPHRD_PPP &#xa;ARPHRD_HDLC &#xa;ARPHRD_IEEE80211"/>
</node>
<node CREATED="1306476808723" ID="ID_722236277" MODIFIED="1306481724118" TEXT="hard_header_len:2&#x5c42;&#x5934;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1306476833288" ID="ID_1504542882" MODIFIED="1306476851672">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      needed_headroom
    </p>
    <p>
      needed_tailroom
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306476874817" ID="ID_1322827210" MODIFIED="1306483102589" TEXT="struct net_device *master:&#xa;&#x6709;&#x4e9b;&#x534f;&#x8bae;(EQL, Bonding, TEQL)&#x5141;&#x8bb8;&#x4e00;&#x7ec4;&#x8bbe;&#x5907;&#x7fa4;&#x96c6;&#x8d77;&#x6765;&#x4f5c;&#x4e3a;&#x5355;&#x4e00;&#x8bbe;&#x5907;.&#x7fa4;&#x7ec4;&#x4e2d;&#xa;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x4f1a;&#x88ab;&#x9009;&#x4e3a;&#x4e3b;&#x8bbe;&#x5907;.&#x672c;&#x5b57;&#x6bb5;&#x6307;&#x5411;&#x7fa4;&#x7ec4;&#x4e2d;&#x7684;&#x4e3b;&#x8bbe;&#x5907;,&#x82e5;&#x672c;&#x8eab;&#x5c31;&#x662f;&#x4e3b;&#x8bbe;&#x5907;,&#x5219;&#x6307;&#x9488;&#x4e3a;&#x7a7a;"/>
<node CREATED="1306476913596" ID="ID_1868885354" MODIFIED="1306481908821">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      perm_addr
    </p>
    <p>
      addr_len: &#38142;&#36335;&#23618;&#22320;&#22336;&#30340;&#38271;&#24230;
    </p>
    <p>
      dev_id: &#30001;IPV6&#20351;&#29992;,&#29992;&#20110;&#21306;&#21035;&#21487;&#30001;&#19981;&#21516;OS&#21516;&#26102;&#20849;&#20139;&#30340;&#21516;&#19968;&#31181;&#35774;&#22791;&#30340;&#35832;&#22810;&#34394;&#25311;&#23454;&#20363;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306476951494" ID="ID_1558511111" MODIFIED="1306476963779" TEXT="struct netdev_hw_addr_list uc"/>
<node CREATED="1306476986633" ID="ID_1440249274" MODIFIED="1306484944971">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      uc_promisc
    </p>
    <p>
      addr_list_lock
    </p>
    <p>
      mc_count
    </p>
    <p>
      promiscuity:&#28151;&#26434;&#27169;&#24335;&#35745;&#25968;&#22120;,&#21482;&#35201;&#20026;&#38750;0&#20540;&#35774;&#22791;&#23601;&#22788;&#20110;&#28151;&#26434;&#27169;&#24335;
    </p>
    <p>
      allmulti
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306477076603" ID="ID_1877578877" MODIFIED="1359891750165" TEXT="struct dev_addr_list *mc_list : &#x7ec4;&#x64ad;mac&#x5730;&#x5740;&#x5217;&#x8868;&#xa;&#x5f53;&#x6b64;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x4e0a;&#x6536;&#x5230;&#x7684;&#x5305;&#x7684;&#x76ee;&#x7684;mac&#x5730;&#x5740;&#x4e3a;&#x7ec4;&#x64ad;mac&#x4e14;&#xa;&#x5728;&#x6b64;&#x5217;&#x8868;&#x5185;,&#x5219;&#x5141;&#x8bb8;&#x63a5;&#x6536;,&#x5426;&#x5219;&#x4e0d;&#x5141;&#x8bb8;&#x63a5;&#x6536;&#x6b64;&#x7ec4;&#x64ad;&#x5305;."/>
<node CREATED="1306477143665" ID="ID_1414098706" MODIFIED="1306833179523" TEXT="dsa_ptr&#xa;atalk_ptr&#xa;dn_ptr   &#x8fd9;6&#x4e2a;&#x5b57;&#x6bb5;&#x6307;&#x5411;&#x7279;&#x5b9a;&#x534f;&#x8bae;&#x4e13;&#x7528;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xa;ip6_ptr&#xa;ec_ptr&#xa;ax25_ptr&#xa;struct wireless_dev *ieee80211_ptr"/>
<node CREATED="1306833124998" ID="ID_1360442296" LINK="#ID_103196370" MODIFIED="1306833226922" TEXT="ip_ptr : ip&#x534f;&#x8bae;&#x7279;&#x5b9a;&#x6570;&#x636e;&#x7ed3;&#x6784;struct in_device"/>
<node CREATED="1306477305656" ID="ID_350290236" MODIFIED="1306482732728">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      last_rx:&#26368;&#36817;&#19968;&#27425;&#25910;&#21253;&#30340;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306477321758" ID="ID_630321531" MODIFIED="1306481853807" TEXT="dev_addr:&#x94fe;&#x8def;&#x5c42;&#x5730;&#x5740;"/>
<node CREATED="1306477339083" ID="ID_792854214" MODIFIED="1306477345617" TEXT="struct netdev_hw_addr_list dev_addrs"/>
<node CREATED="1306477361552" ID="ID_231855646" MODIFIED="1306481765066" TEXT="broadcast:&#x94fe;&#x8def;&#x5c42;&#x5e7f;&#x64ad;&#x5730;&#x5740;"/>
<node CREATED="1306477417528" ID="ID_1145402398" LINK="#ID_684642537" MODIFIED="1413323079701" TEXT="struct netdev_queue rx_queue:&#x63a5;&#x6536;&#x961f;&#x5217;&#xa;struct netdev_queue *_tx:&#x53d1;&#x9001;&#x961f;&#x5217;&#xa;num_tx_queues:&#x53d1;&#x9001;&#x961f;&#x5217;&#x7684;&#x6570;&#x91cf;&#xa;real_num_tx_queues : &#x4e0a;&#x9762;&#x7684;_tx&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;,&#x6240;&#x4ee5;&#x8fd9;&#x91cc;&#x6307;&#x51fa;&#x4e86;&#x6570;&#x7ec4;&#x7684;&#x771f;&#x5b9e;&#x957f;&#x5ea6;&#xa;tx_queue_len&#xa;tx_global_lock; ">
<node CREATED="1413329413032" ID="ID_674637062" MODIFIED="1413329448171" TEXT="&#x8fd9;&#x91cc;&#x662f;Linux&#x5185;&#x6838;&#x591a;&#x961f;&#x5217;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x4f46;&#x662f;&#x8981;&#x771f;&#x6b63;&#x7684;&#x4f7f;&#x7528;&#x90fd;&#x961f;&#x5217;&#xff0c;&#x9700;&#x8981;&#x7f51;&#x5361;&#x652f;&#x6301;&#x591a;&#x961f;&#x5217;&#x624d;&#x53ef;&#x4ee5;&#xff0c;&#x4e00;&#x822c;&#x7684;&#x7f51;&#x5361;&#x90fd;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x961f;&#x5217;&#x3002;&#x5728;&#x8c03;&#x7528;alloc_etherdev&#x5206;&#x914d;net_device&#x65f6;&#x8bbe;&#x7f6e;&#x961f;&#x5217;&#x7684;&#x4e2a;&#x6570;"/>
</node>
<node CREATED="1306477537949" ID="ID_1908625444" MODIFIED="1306482783272" TEXT="trans_start:&#x6700;&#x8fd1;&#x4e00;&#x6b21;&#x53d1;&#x5305;&#x7684;&#x65f6;&#x95f4;"/>
<node CREATED="1306477554029" ID="ID_903966115" MODIFIED="1306493378201">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      watchdog_timeo:&#21457;&#21253;&#36229;&#26102;&#26102;&#38388;
    </p>
    <p>
      struct timer_list&#160;watchdog_timer:&#23450;&#26102;&#22120;,&#29992;&#20110;&#26816;&#27979;&#21457;&#21253;&#26159;&#21542;&#36229;&#26102;
    </p>
    <p>
      &#33509;&#36229;&#26102;&#21017;&#35843;&#29992;dev-&gt;netdev_ops-&gt;ndo_tx_timeout
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306477608987" ID="ID_142878045" MODIFIED="1306477612346" TEXT="refcnt"/>
<node CREATED="1306477647405" ID="ID_741831842" MODIFIED="1306477650282" TEXT="todo_list"/>
<node CREATED="1306477663546" ID="ID_712542051" MODIFIED="1306477670394" TEXT="struct hlist_node index_hlist"/>
<node CREATED="1306477691054" ID="ID_423364053" MODIFIED="1306477697573" TEXT="struct net_device *link_watch_next"/>
<node CREATED="1306477716170" FOLDED="true" ID="ID_1845218011" MODIFIED="1359856749147" TEXT="reg_state:&#x5185;&#x6838;&#x5bf9;&#x8c61;&#x6ce8;&#x518c;&#x72b6;&#x6001;">
<node CREATED="1306484168420" ID="ID_514403631" MODIFIED="1306484249784" TEXT="NETREG_UNINITIALIZED&#xa;NETREG_REGISTERED&#xa;NETREG_UNREGISTERING&#xa;NETREG_UNREGISTERED&#xa;NETREG_RELEASED&#xa;NETREG_DUMMY"/>
</node>
<node CREATED="1306477747558" ID="ID_1263456872" MODIFIED="1306477749726" TEXT="destructor"/>
<node CREATED="1306477761588" ID="ID_1937589924" MODIFIED="1306477768841" TEXT="struct netpoll_info *npinfo"/>
<node CREATED="1306477786088" ID="ID_1484302566" MODIFIED="1306477793526" TEXT="struct net *nd_net"/>
<node CREATED="1306477809532" ID="ID_267054148" MODIFIED="1306477811656" TEXT="ml_priv"/>
<node CREATED="1306477824778" ID="ID_639966397" MODIFIED="1306477831919" TEXT="struct net_bridge_port *br_port"/>
<node CREATED="1306477846471" ID="ID_1399851848" MODIFIED="1306477852413" TEXT="struct macvlan_port *macvlan_port"/>
<node CREATED="1306477868587" ID="ID_653546651" MODIFIED="1306477874514" TEXT="struct garp_port *garp_port"/>
<node CREATED="1306477891768" ID="ID_1308288432" MODIFIED="1306492521009" TEXT="struct device dev: &#x5185;&#x6838;&#x5bf9;&#x8c61;"/>
<node CREATED="1306477918852" ID="ID_1326853405" MODIFIED="1306477929214" TEXT="struct attribute_group *sysfs_groups[3]"/>
<node CREATED="1306477945152" ID="ID_1322667384" MODIFIED="1306477947958" TEXT="struct rtnl_link_ops *rtnl_link_ops"/>
<node CREATED="1306477989425" ID="ID_542965645" MODIFIED="1306477991802" TEXT="gso_max_size"/>
<node CREATED="1306478006207" ID="ID_1365390908" MODIFIED="1306478008027" TEXT="struct dcbnl_rtnl_ops *dcbnl_ops"/>
<node CREATED="1306478020764" ID="ID_1290201465" MODIFIED="1306478022536" TEXT="fcoe_ddp_xid"/>
</node>
<node CREATED="1306485276133" FOLDED="true" ID="ID_684642537" MODIFIED="1457720870794">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct netdev_queue
    </p>
    <p>
      include/linux/netdevice.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1306485340267" ID="ID_789146478" MODIFIED="1306485361529" TEXT="struct net_device:&#x6307;&#x5411;&#x6240;&#x5728;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9;*dev"/>
<node CREATED="1306485379174" ID="ID_1955295123" MODIFIED="1306485387213" TEXT="struct Qdisc *qdisc"/>
<node CREATED="1306485403706" ID="ID_284614501" MODIFIED="1306485409226" TEXT="state"/>
<node CREATED="1306485410985" ID="ID_1535557517" MODIFIED="1306485418042" TEXT="struct Qdisc *qdisc_sleeping"/>
<node CREATED="1306485430294" ID="ID_627456975" MODIFIED="1306485432560" TEXT="_xmit_lock"/>
<node CREATED="1306485442180" ID="ID_1176006482" MODIFIED="1306485444128" TEXT="xmit_lock_owner"/>
<node CREATED="1306485455666" ID="ID_76314175" MODIFIED="1306485507821">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      trans_start
    </p>
    <p>
      tx_bytes
    </p>
    <p>
      tx_packets
    </p>
    <p>
      tx_dropped
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1359884027092" FOLDED="true" ID="ID_877470086" MODIFIED="1360938202737" TEXT="struct net : &#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;(net namespace)&#xa;include/net/net_namespace.h">
<node CREATED="1359884361622" FOLDED="true" ID="ID_1061119327" MODIFIED="1359888751151" TEXT="&#x6982;&#x5ff5;">
<node CREATED="1333012844107" ID="ID_654395375" MODIFIED="1333012953632" TEXT="&#x5728;Linux&#x534f;&#x8bae;&#x6808;&#x4e2d;&#x5f15;&#x5165;&#x7f51;&#x7edc;&#x547d;&#x540d;&#x7a7a;&#x95f4;, &#x662f;&#x4e3a;&#x4e86;&#x652f;&#x6301;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x7684;&#x591a;&#x4e2a;&#x5b9e;&#x4f8b;, &#xa;&#x800c;&#x8fd9;&#x4e9b;&#x534f;&#x8bae;&#x6808;&#x7684;&#x9694;&#x79bb;&#x5c31;&#x662f;&#x7531;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x6765;&#x5b9e;&#x73b0;&#x7684;(&#x534f;&#x8bae;&#x6808;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#x5176;&#x4ed6;&#x534f;&#x8bae;&#x6808;&#x7684;&#x79c1;&#x6709;&#x6570;&#x636e;).&#xa;&#xa;&#x9700;&#x8981;&#x7eb3;&#x5165;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x7684;&#x5143;&#x7d20;&#x5305;&#x62ec;&#x8fdb;&#x7a0b;, &#x5957;&#x63a5;&#x5b57;, &#x7f51;&#x7edc;&#x8bbe;&#x5907;. &#x8fdb;&#x7a0b;&#x521b;&#x5efa;&#x7684;&#x5957;&#x63a5;&#x5b57;&#x5fc5;&#x987b;&#x5c5e;&#x4e8e;&#x67d0;&#x4e2a;&#x547d;&#x540d;&#x7a7a;&#x95f4;, &#xa;&#x5957;&#x63a5;&#x5b57;&#x7684;&#x64cd;&#x4f5c;&#x4e5f;&#x5fc5;&#x987b;&#x5728;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x5185;&#x8fdb;&#x884c;, &#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x4e5f;&#x5fc5;&#x987b;&#x5c5e;&#x4e8e;&#x67d0;&#x4e2a;&#x547d;&#x540d;&#x7a7a;&#x95f4;, &#xa;&#x4f46;&#x53ef;&#x80fd;&#x4f1a;&#x6539;&#x53d8;, &#x56e0;&#x4e3a;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x5c5e;&#x4e8e;&#x516c;&#x5171;&#x8d44;&#x6e90;.&#xa;&#xa;&#x6240;&#x6709;&#x534f;&#x8bae;&#x6808;&#x76f8;&#x5173;&#x7684;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#x90fd;&#x5fc5;&#x987b;&#x4fee;&#x6539;&#x4e3a;&#x534f;&#x8bae;&#x6808;&#x79c1;&#x6709;. &#x6700;&#x597d;&#x7684;&#x529e;&#x6cd5;&#x5c31;&#x662f;&#x8ba9;&#x8fd9;&#x4e9b;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#x6210;&#x4e3a;&#xa;&#x4e00;&#x4e2a;per net namespace&#x53d8;&#x91cf;&#x7684;&#x6210;&#x5458;, &#x7136;&#x540e;&#x4e3a;&#x534f;&#x8bae;&#x6808;&#x7684;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x90fd;&#x52a0;&#x5165;&#x4e00;&#x4e2a;namespace&#x53c2;&#x6570;"/>
<node CREATED="1359884376102" ID="ID_730987693" MODIFIED="1359885290708" TEXT="&#x5728;&#x5185;&#x6838;&#x914d;&#x7f6e;&#x65f6;&#x6253;&#x5f00;CONFIG_NET_NS&#x9009;&#x9879;&#x5219;&#x5141;&#x8bb8;&#x7528;&#x6237;&#x521b;&#x5efa;&#x591a;&#x4e2a;net namespace&#x5373;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;,&#xa;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x5bf9;&#x5e94;&#x4e86;&#x4e00;&#x4e2a;struct net&#x7ed3;&#x6784;.&#x5f53;CONFIG_NET_NS&#x5173;&#x95ed;&#x65f6;&#x6574;&#x4e2a;&#x7cfb;&#x7edf;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#xa;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x5373;init_net(net/core/net_namespace.c).&#xa;&#x5168;&#x5c40;&#x53d8;&#x91cf;net_namespace_list(net/core/net_namespace.c)&#x4fdd;&#x5b58;&#x4e86;&#x6240;&#x6709;&#x7684;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;."/>
<node CREATED="1359885452554" FOLDED="true" ID="ID_191081908" MODIFIED="1359886844660" TEXT="&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x662f;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x7684;&#x9876;&#x5c42;&#x6982;&#x5ff5;,&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x7684;&#x4efb;&#x4f55;&#x5185;&#x5bb9;&#x5728;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x4e2d;&#x90fd;&#x6709;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;.&#xa;&#x4e3a;&#x4e86;&#x54cd;&#x5e94;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x7684;&#x521b;&#x5efa;&#x548c;&#x5220;&#x9664;,&#x5728;&#x5168;&#x5c40;&#x53d8;&#x91cf;pernet_list(net/core/net_namespace.c)&#xa;&#x4e2d;&#x4fdd;&#x5b58;&#x4e86;&#x4e00;&#x4e2a;&#x5173;&#x4e8e;struct pernet_operations&#x7684;&#x94fe;&#x8868;,&#x94fe;&#x8868;&#x7684;&#x6bcf;&#x4e2a;&#x8282;&#x70b9;&#x4ee3;&#x8868;&#x4e86;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#xa;&#x7f51;&#x7edc;&#x5b50;&#x7cfb;&#x7edf;,&#x5f53;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x521b;&#x5efa;&#x6216;&#x5220;&#x9664;&#x65f6;&#x90fd;&#x4f1a;&#x8c03;&#x7528;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x5b50;&#x7cfb;&#x7edf;&#x7684;init&#x6216;exit&#x51fd;&#x6570;.">
<node CREATED="1359886033823" ID="ID_1686961957" MODIFIED="1359886252233" TEXT="register_pernet_subsys : &#x6ce8;&#x518c;&#x7f51;&#x7edc;&#x7a7a;&#x95f4;&#x5b50;&#x7cfb;&#x7edf;&#xa;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x521b;&#x5efa;&#x6216;&#x5220;&#x9664;&#x65f6;&#x90fd;&#x4f1a;&#x8c03;&#x7528;&#x7f51;&#x7edc;&#x5b50;&#x7cfb;&#x7edf;&#x7684;init&#x6216;exit&#x51fd;&#x6570;&#xa;&#x6ce8;&#x518c;&#x65f6;&#x4f1a;&#x9488;&#x5bf9;&#x5df2;&#x7ecf;&#x5b58;&#x5728;&#x7684;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x8c03;&#x7528;&#x7f51;&#x7edc;&#x5b50;&#x7cfb;&#x7edf;&#x7684;init&#x51fd;&#x6570;"/>
<node CREATED="1359886057571" ID="ID_1835591824" MODIFIED="1359886058964" TEXT="register_pernet_device"/>
</node>
</node>
<node CREATED="1306491122099" FOLDED="true" ID="ID_206556523" MODIFIED="1360938201027">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25968;&#25454;&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306491170683" ID="ID_222214652" MODIFIED="1306491172563" TEXT="count"/>
<node CREATED="1306491187993" ID="ID_1720017263" MODIFIED="1306491190231" TEXT="use_count"/>
<node CREATED="1306491205742" ID="ID_855574900" MODIFIED="1306491247482">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct list_head list
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491273981" ID="ID_1499381276" MODIFIED="1306491292915">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct work_struct work
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491312279" ID="ID_498641358" MODIFIED="1306491591494">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct proc_dir_entry *proc_net
    </p>
    <p>
      struct proc_dir_entry&#160;*proc_net_stat
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491339827" ID="ID_1087920757" MODIFIED="1306491608523">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct ctl_table_set sysctls
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491354145" ID="ID_458754899" LINK="#ID_1465343490" MODIFIED="1359888599131">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_device *loopback_dev
    </p>
    <p>
      &#27599;&#20010;&#32593;&#32476;&#21517;&#31216;&#31354;&#38388;&#37117;&#26377;&#19968;&#20010;&#29615;&#22238;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491366895" ID="ID_75996596" MODIFIED="1306493582730">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct list_head dev_base_head&#160;&#160;&#160;&#160;&#160;&#39034;&#24207;&#30340;struct net_device&#38142;&#34920;
    </p>
    <p>
      struct hlist_head *dev_name_head &#20197;&#21517;&#23383;&#20026;&#32034;&#24341;&#30340;struct net_device&#38142;&#34920;
    </p>
    <p>
      struct hlist_head *dev_index_head &#20197;ifindex&#20026;&#32034;&#24341;&#30340;struct net_device&#38142;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491405625" ID="ID_231422881" LINK="#ID_80452588" MODIFIED="1360668877409" TEXT="struct list_head rules_ops : &#x8def;&#x7531;&#x89c4;&#x5219;&#x51fd;&#x6570;&#x8868;"/>
<node CREATED="1306491414903" ID="ID_495885432" MODIFIED="1306491416280" TEXT="rules_mod_lock"/>
<node CREATED="1306491424774" ID="ID_17381199" MODIFIED="1306491426064" TEXT="struct sock &#x9;&#x9;*rtnl"/>
<node CREATED="1306491436212" ID="ID_1042310571" MODIFIED="1306491437648" TEXT="struct netns_core&#x9;core"/>
<node CREATED="1306491447411" ID="ID_1017193125" MODIFIED="1306491448792" TEXT="struct netns_mib&#x9;mib"/>
<node CREATED="1306491457473" ID="ID_531139556" MODIFIED="1306491458751" TEXT="struct netns_packet&#x9;packet"/>
<node CREATED="1306491467536" ID="ID_211591634" MODIFIED="1306491468934" TEXT="struct netns_unix&#x9;unx"/>
<node CREATED="1306491478174" FOLDED="true" ID="ID_863896207" MODIFIED="1360938153685" TEXT="struct netns_ipv4 ipv4">
<node CREATED="1360659014930" ID="ID_1667269931" MODIFIED="1360659014930" TEXT=" struct ctl_table_header *forw_hdr"/>
<node CREATED="1360659014930" MODIFIED="1360659014930" TEXT=" struct ctl_table_header *frags_hdr"/>
<node CREATED="1360659014930" MODIFIED="1360659014930" TEXT=" struct ctl_table_header *ipv4_hdr"/>
<node CREATED="1360659014930" MODIFIED="1360659014930" TEXT=" struct ctl_table_header *route_hdr"/>
<node CREATED="1360659014930" MODIFIED="1360659014930" TEXT=" struct ipv4_devconf *devconf_all"/>
<node CREATED="1360659014930" MODIFIED="1360659014930" TEXT=" struct ipv4_devconf *devconf_dflt"/>
<node CREATED="1360659014930" ID="ID_397730490" LINK="#ID_80452588" MODIFIED="1360668891655" TEXT=" struct fib_rules_ops *rules_ops : ipv4&#x8def;&#x7531;&#x89c4;&#x5219;&#x51fd;&#x6570;&#x8868;"/>
<node CREATED="1360659014930" FOLDED="true" ID="ID_932481285" LINK="#ID_1577652510" MODIFIED="1360839362343" TEXT=" struct hlist_head *fib_table_hash&#xa;&#x5b58;&#x653e;struct fib_table&#x7684;hash&#x8868;, &#x7cfb;&#x7edf;&#x652f;&#x6301;&#x591a;&#x5f20;&#x8def;&#x7531;&#x8868;,&#xa;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#x6709;RT_TABLE_LOCAL&#x548c;RT_TABLE_MAIN&#x4e24;&#x5f20;&#x8868;">
<node CREATED="1360659653577" ID="ID_804644025" MODIFIED="1360659655428" TEXT="RT_TABLE_COMPAT"/>
<node CREATED="1360659661856" ID="ID_178092173" MODIFIED="1360659662543" TEXT="RT_TABLE_DEFAULT"/>
<node CREATED="1360659669332" ID="ID_1294864997" MODIFIED="1360659669964" TEXT="RT_TABLE_MAIN"/>
<node CREATED="1360659677290" ID="ID_203688830" MODIFIED="1360659678073" TEXT="RT_TABLE_LOCAL"/>
</node>
<node CREATED="1360659014930" ID="ID_1293796658" LINK="#ID_897749832" MODIFIED="1360738963234" TEXT=" struct sock *fibnl : &#x7528;&#x4e8e;&#x54cd;&#x5e94;&#x7528;&#x6237;&#x5c42;&#x8def;&#x7531;&#x64cd;&#x4f5c;(&#x5982;ip route add/del, ip rule add/del)&#x7684;socket"/>
<node CREATED="1360659014930" ID="ID_964676134" MODIFIED="1360659014930" TEXT=" struct sock **icmp_sk"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct sock *tcp_sock"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct netns_frags frags"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct xt_table *iptable_filter"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct xt_table *iptable_mangle"/>
<node CREATED="1360659014931" ID="ID_410603158" MODIFIED="1360659014931" TEXT=" struct xt_table *iptable_raw"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct xt_table *arptable_filter"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct xt_table *iptable_security"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct xt_table *nat_table"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" struct hlist_head *nat_bysource"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int nat_vmalloced"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int sysctl_icmp_echo_ignore_all"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int sysctl_icmp_echo_ignore_broadcasts"/>
<node CREATED="1360659014931" ID="ID_620981378" MODIFIED="1360659014931" TEXT=" int sysctl_icmp_ignore_bogus_error_responses"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int sysctl_icmp_ratelimit"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int sysctl_icmp_ratemask"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int sysctl_icmp_errors_use_inbound_ifaddr"/>
<node CREATED="1360659014931" MODIFIED="1360659014931" TEXT=" int sysctl_rt_cache_rebuild_count"/>
<node CREATED="1360659014932" ID="ID_777329058" MODIFIED="1360659014932" TEXT=" int current_rt_cache_rebuild_count"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" struct timer_list rt_secret_timer"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" atomic_t rt_genid"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" struct sock *mroute_sk"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" struct mfc_cache **mfc_cache_array"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" struct vif_device *vif_table"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" int maxvif"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" atomic_t cache_resolve_queue_len"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" int mroute_do_assert"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" int mroute_do_pim"/>
<node CREATED="1360659014932" MODIFIED="1360659014932" TEXT=" int mroute_reg_vif_num"/>
</node>
<node CREATED="1306491487836" ID="ID_889336712" MODIFIED="1306491490377" TEXT="struct netns_ipv6&#x9;ipv6"/>
<node CREATED="1306491498507" ID="ID_965365021" MODIFIED="1306491500380" TEXT="struct netns_dccp&#x9;dccp"/>
<node CREATED="1306491511801" ID="ID_552265430" MODIFIED="1306491513669" TEXT="struct netns_xt&#x9;&#x9;xt"/>
<node CREATED="1306491521991" ID="ID_1629289867" MODIFIED="1306910283073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct netns_ct ct
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306491532070" ID="ID_1057639570" MODIFIED="1306491533430" TEXT="struct netns_xfrm&#x9;xfrm"/>
<node CREATED="1306491542724" ID="ID_1453967610" MODIFIED="1306491544580" TEXT="struct net_generic&#x9;*gen"/>
</node>
</node>
<node CREATED="1306653782727" FOLDED="true" ID="ID_621578200" MODIFIED="1429225832581" TEXT="struct napi_struct&#xa;include/linux/netdevice.h&#xa;&#x6b64;&#x7ed3;&#x6784;&#x7531;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x8c03;&#x7528;netif_napi_add&#x6765;&#x521d;&#x59cb;&#x5316;&#xa;&#x6bcf;&#x4e00;&#x4e2a;mac&#x90fd;&#x5bf9;&#x5e94;&#x4e86;&#x8fd9;&#x4e48;&#x4e00;&#x4e2a;&#x7ed3;&#x6784;&#xa;&#x521d;&#x59cb;&#x5316;&#x65f6;napi-&gt;state&#x4e0a;NAPI_STATE_SCHED&#x88ab;&#x7f6e;&#x4f4d;">
<node CREATED="1306653849313" ID="ID_1046737832" MODIFIED="1306671400558" TEXT="poll_list &#xff1a;&#x7528;&#x4e8e;&#x5c06;&#x8fd9;&#x4e2a;napi_struct&#x94fe;&#x5165;softnet_data.poll_list&#x4e2d;"/>
<node CREATED="1306653861412" ID="ID_438176531" MODIFIED="1413307702076" TEXT="state">
<node CREATED="1306681642290" FOLDED="true" ID="ID_441766336" MODIFIED="1413310052450" TEXT="NAPI_STATE_SCHED &#xff1a;&#xa;&#x7f6e;&#x4f4d;&#x65f6;&#x8868;&#x793a;&#x8bbe;&#x5907;&#x6709;&#x5305;&#x8981;&#x5904;&#x7406;&#xff0c;&#x5df2;&#x7ecf;&#x5f00;&#x59cb;&#x65b0;&#x4e00;&#x8f6e;&#x8c03;&#x5ea6;&#xa;&#x6ca1;&#x7f6e;&#x4f4d;&#x65f6;&#x8868;&#x793a;&#x8bbe;&#x5907;&#x6ca1;&#x5305;&#x8981;&#x5904;&#x7406;&#xff0c;&#x5df2;&#x7ecf;&#x8c03;&#x5ea6;&#x5b8c;&#x6bd5;">
<node CREATED="1318520941592" ID="ID_1389880318" MODIFIED="1318521111125" TEXT="&#x521d;&#x59cb;&#x5316;&#x65f6;&#x8c03;&#x7528;netif_napi_add&#x4f1a;&#x8bbe;&#x7f6e;&#x6b64;&#x4f4d;"/>
<node CREATED="1318521205367" ID="ID_976556096" MODIFIED="1318521235496" TEXT="open&#x63a5;&#x53e3;&#x65f6;&#x8c03;&#x7528;napi_enable&#x4f1a;&#x6e05;&#x9664;&#x6b64;&#x4f4d;"/>
<node CREATED="1318521344269" ID="ID_1088335707" MODIFIED="1318521379288" TEXT="&#x6536;&#x5305;&#x4e2d;&#x65ad;&#x4e2d;&#x8c03;&#x7528; netif_rx_schedule_prep&#x4f1a;&#x8bbe;&#x7f6e;&#x6b64;&#x4f4d;"/>
<node CREATED="1318521550490" ID="ID_1613392434" MODIFIED="1318521595697" TEXT="poll&#x51fd;&#x6570;&#x4e2d;&#x5904;&#x7406;&#x5b8c;&#x6240;&#x6709;&#x5305;&#x540e;&#x8c03;&#x7528;napi_complete&#x4f1a;&#x6e05;&#x9664;&#x6b64;&#x4f4d;"/>
</node>
<node CREATED="1306681665551" FOLDED="true" ID="ID_991411601" MODIFIED="1413308987570" TEXT="NAPI_STATE_DISABLE &#xff1a;&#xa;&#x7f6e;&#x4f4d;&#x65f6;&#x7981;&#x6b62;&#x8bbe;&#x5907;&#x8c03;&#x5ea6;&#xff0c;&#xa;&#x6ca1;&#x7f6e;&#x4f4d;&#x65f6;&#x5141;&#x8bb8;&#x8bbe;&#x5907;&#x8c03;&#x5ea6;">
<node CREATED="1318521873122" ID="ID_784963482" MODIFIED="1318521913689" TEXT="&#x5f53;&#x63a5;&#x53e3;close&#x6216;down&#x7684;&#x65f6;&#x5019;&#x8c03;&#x7528;napi_disable&#x4f1a;&#x8bbe;&#x7f6e;&#x6b64;&#x4f4d;"/>
</node>
</node>
<node CREATED="1306653873215" ID="ID_430924127" MODIFIED="1306684211087" TEXT="weight &#xff1a;&#x6743;&#x91cd;&#xff0c;&#x8868;&#x660e;&#x6bcf;&#x6b21;&#x8c03;&#x7528;poll&#x51fd;&#x6570;&#x6700;&#x591a;&#x5141;&#x8bb8;&#x5904;&#x7406;&#x591a;&#x5c11;&#x4e2a;&#x5305;"/>
<node CREATED="1306653888161" FOLDED="true" ID="ID_1551646187" MODIFIED="1425281770812" TEXT="poll&#x51fd;&#x6570;">
<node CREATED="1306683406357" ID="ID_1460507282" MODIFIED="1306683585886" TEXT="1, &#x8c03;&#x7528;netif_receive_skb&#x6536;&#x5305;"/>
<node CREATED="1306683423774" ID="ID_1169062255" MODIFIED="1306683462861" TEXT="2, &#x4fdd;&#x8bc1;&#x5df2;&#x5904;&#x7406;&#x5305;&#x6570;&#x91cf;&#x4e0d;&#x8d85;&#x8fc7;&#x6240;&#x4f20;&#x5165;&#x53c2;&#x6570;budget"/>
<node CREATED="1306683467889" ID="ID_19393457" LINK="#ID_1883190548" MODIFIED="1306683826630" TEXT="3, &#x6700;&#x540e;&#x82e5;&#x8fd8;&#x6709;&#x5305;&#x8981;&#x5904;&#x7406;&#x5219;&#x8c03;&#x7528;napi_reschedule"/>
<node CREATED="1306683523605" ID="ID_139480534" LINK="#ID_1432385331" MODIFIED="1306727388513">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4, &#26368;&#21518;&#33509;&#27809;&#26377;&#21253;&#35201;&#22788;&#29702;&#20102;&#21017;&#35843;&#29992;napi_complete
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#21516;&#26102;&#36824;&#35201;&#25171;&#24320;&#35774;&#22791;&#30340;&#25910;&#21253;&#20013;&#26029;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306653911531" ID="ID_932209420" MODIFIED="1306653914510" TEXT="poll_lock"/>
<node CREATED="1306653923444" ID="ID_655974777" MODIFIED="1306653926852" TEXT="poll_owner"/>
<node COLOR="#ff0066" CREATED="1306653936242" ID="ID_546952760" MODIFIED="1425281895015" TEXT="gro_count"/>
<node CREATED="1306653952800" ID="ID_374813437" MODIFIED="1306653977732" TEXT="struct net_device *dev"/>
<node CREATED="1306653993809" FOLDED="true" ID="ID_548786175" MODIFIED="1413314597367" TEXT="dev_list &#xff1a;&#x7528;&#x4e8e;&#x5c06;&#x8fd9;&#x4e2a;napi_struct&#x7ed3;&#x6784;&#x94fe;&#x5165;struct network_device-&gt;napi_list&#x4e2d;">
<node CREATED="1413314348059" ID="ID_590247597" MODIFIED="1413314593791" TEXT="&#x7528;&#x4e8e;&#x4fdd;&#x5b58;napi_struct&#x4ee5;&#x4fbf;&#x5728;unregister_netdev&#x65f6;&#x6e05;&#x9664;&#x8fd9;&#x4e2a;napi_struct"/>
</node>
<node COLOR="#ff0066" CREATED="1306654010536" ID="ID_1494963287" LINK="#ID_1444641181" MODIFIED="1425282225190" TEXT="struct sk_buff *gro_list"/>
<node COLOR="#ff0066" CREATED="1306654035976" ID="ID_1033314637" MODIFIED="1425281895015" TEXT="struct sk_buff *skb"/>
</node>
<node CREATED="1413308129910" FOLDED="true" ID="ID_1745113286" MODIFIED="1425189812730">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct softnet_data
    </p>
    <p>
      &#36825;&#26159;&#19968;&#20010;per CPU&#30340;&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413308550551" ID="ID_284983992" MODIFIED="1413308646148">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct Qdisc *output_queue;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413310795450" ID="ID_270241838" MODIFIED="1413397545352">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#21069;CPU&#19978;&#38656;&#35201;&#35843;&#24230;&#30340;Qdisc&#21015;&#34920;, &#29992;&#20110;&#35843;&#24230;&#21457;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1413308565064" ID="ID_11863529" MODIFIED="1413308651914">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct Qdisc **output_queue_tailp;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413308577280" ID="ID_495501325" MODIFIED="1413308660253">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct list_head poll_list;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413310795450" ID="ID_375494672" MODIFIED="1413397514359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#21069;CPU&#19978;&#38656;&#35201;&#35843;&#24230;&#30340;napi_struct&#21015;&#34920;, &#29992;&#20110;&#35843;&#24230;&#25910;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1413308589575" ID="ID_1680266780" MODIFIED="1413308667989">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff *completion_queue;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413414844634" ID="ID_478239189" LINK="#ID_540400590" MODIFIED="1413414895015" TEXT="&#x53d1;&#x5305;&#x5b8c;&#x6210;&#x540e;&#x9700;&#x8981;&#x91ca;&#x653e;&#x7684;skb&#x5217;&#x8868;"/>
</node>
<node CREATED="1413308600621" ID="ID_1477519309" MODIFIED="1413308674488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff_head process_queue;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413308613254" ID="ID_861078119" MODIFIED="1413308680229">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned dropped;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413308625765" ID="ID_174831399" MODIFIED="1413308685743">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff_head input_pkt_queue;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413308637022" ID="ID_545980055" MODIFIED="1413308696693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct napi_struct backlog;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306742998267" FOLDED="true" ID="ID_132064325" MODIFIED="1453492615332">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff
    </p>
    <p>
      include/linux/skbuff.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1397099945848" ID="ID_806953153" MODIFIED="1425078136673" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1306743057482" FOLDED="true" ID="ID_1300463324" MODIFIED="1425717333635" TEXT="struct sk_buff">
<node CREATED="1306743110841" ID="ID_335229758" MODIFIED="1306743211352">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff *next &#29992;&#20110;&#38142;&#20837;&#38142;&#34920;
    </p>
    <p>
      struct sk_buff *prev &#29992;&#20110;&#38142;&#20837;&#38142;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306743228246" ID="ID_1101211576" LINK="#ID_274261820" MODIFIED="1306745665468">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sock *sk &#25317;&#26377;&#27492;&#32531;&#20914;&#21306;&#30340;&#22871;&#25509;&#23383;&#30340;sock&#25968;&#25454;&#32467;&#26500;.
    </p>
    <p>
      &#24403;&#25968;&#25454;&#22312;&#26412;&#22320;&#20135;&#29983;&#25110;&#27491;&#30001;&#26412;&#22320;&#36827;&#31243;&#25509;&#25910;&#26102;,&#23601;&#38656;&#35201;&#27492;&#25351;&#38024;.
    </p>
    <p>
      &#24403;&#32531;&#20914;&#21306;&#21482;&#26159;&#34987;&#36716;&#21457;&#26102;&#35813;&#25351;&#38024;&#20026;NULL.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306743648524" ID="ID_1751713635" MODIFIED="1359858222339" TEXT="tstamp : &#x65f6;&#x95f4;&#x6233;, netif_receive_skb()&#x6216;netif_rx()&#x4e2d;&#x8bbe;&#x7f6e;"/>
<node CREATED="1306743675515" ID="ID_938597017" MODIFIED="1397110943337">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_device *dev
    </p>
    <p>
      &#36335;&#30001;&#20043;&#21069;&#34920;&#31034;&#25509;&#25910;&#20102;&#27492;&#21253;&#30340;&#32593;&#32476;&#35774;&#22791;
    </p>
    <p>
      &#36335;&#30001;&#20043;&#21518;&#34920;&#31034;&#35201;&#21457;&#36865;&#27492;&#21253;&#30340;&#32593;&#32476;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397109220943" ID="ID_786621665" MODIFIED="1397109316415" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x4f1a;&#x5728;&#x63a5;&#x6536;&#x5305;&#x65f6;&#x8c03;&#x7528;&#x51fd;&#x6570;eth_type_trans&#x6765;&#x8bbe;&#x7f6e;&#x6b64;&#x503c;"/>
</node>
<node CREATED="1306743837655" ID="ID_613464094" MODIFIED="1306748185660" TEXT="_skb_dst : struct dst_entry&#x6307;&#x9488;,&#x8def;&#x7531;&#x76ee;&#x7684;&#x5730;"/>
<node CREATED="1306743852583" ID="ID_11282930" MODIFIED="1306743874847">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sec_path *sp
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306743926245" ID="ID_781397019" MODIFIED="1306750905689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      char cb[48] : &#25511;&#21046;&#32531;&#20914;&#21306;(controll buffer),
    </p>
    <p>
      &#29992;&#20110;&#27599;&#20010;&#32593;&#32476;&#23618;&#23384;&#20648;&#20854;&#31169;&#26377;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306743969843" ID="ID_1204443518" MODIFIED="1306743977693" TEXT="void *cb_next"/>
<node CREATED="1306743989891" ID="ID_930922211" LINK="#ID_1820724636" MODIFIED="1306751060027" TEXT="len"/>
<node CREATED="1306744000754" ID="ID_1175475531" LINK="#ID_1820724636" MODIFIED="1397100407172" TEXT="data_len"/>
<node CREATED="1306744011346" ID="ID_935123168" MODIFIED="1306748282899" TEXT="mac_len : MAC&#x62a5;&#x5934;&#x5927;&#x5c0f;"/>
<node CREATED="1306744019890" ID="ID_406827728" MODIFIED="1397469022153">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hdr_len : skb&#30340;L2 header&#30340;&#38271;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306744034274" FOLDED="true" ID="ID_258648268" MODIFIED="1359860027340" TEXT="csum">
<node CREATED="1359859732203" ID="ID_1131696405" MODIFIED="1359859850820" TEXT="csum : &#x5f53;ip_summed&#x4e3a;CHECKSUM_NONE&#x65f6;&#x5b58;&#x653e;&#x6240;&#x8d1f;&#x8f7d;&#x6570;&#x636e;&#x7684;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1359859753773" FOLDED="true" ID="ID_1712205788" MODIFIED="1359860025933" TEXT="&#x5f53;ip_summed&#x4e3a;CHECKSUM_PARTIAL&#x65f6;&#x4e3a;&#x786c;&#x4ef6;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;&#x51c6;&#x5907;&#x7684;&#x6570;&#x636e;">
<node CREATED="1359859756238" ID="ID_1899614357" MODIFIED="1359859987042" TEXT="csum_start : &#x4ece;&#x4ec0;&#x4e48;&#x4f4d;&#x7f6e;&#x5f00;&#x59cb;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1359859768543" ID="ID_1706887405" MODIFIED="1359860007669" TEXT="csum_offset &#x8ba1;&#x7b97;&#x597d;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x653e;&#x5728;&#x4ec0;&#x4e48;&#x4f4d;&#x7f6e;"/>
</node>
</node>
<node CREATED="1306744058130" ID="ID_494558044" MODIFIED="1359860563509">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      priority : &#21253;&#30340;&#20248;&#20808;&#32423;,&#21457;&#21253;&#26102;&#29992;&#27492;&#20248;&#20808;&#32423;&#36827;&#34892;&#35843;&#24230;
    </p>
    <p>
      &#22914;&#26524;&#21253;&#26159;&#26412;&#26426;&#21457;&#20986;&#30340;,&#21017;socket&#20250;&#35774;&#32622;&#27492;&#20540;,
    </p>
    <p>
      layer2&#20013;&#29992;vlan&#30340;cos&#26144;&#23556;&#25104;&#27492;&#20540;,
    </p>
    <p>
      layer3&#20013;&#29992;dscp&#26144;&#23556;&#25104;&#27492;&#20540;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306744296924" FOLDED="true" ID="ID_812552759" MODIFIED="1397644193612" TEXT="flags1">
<node CREATED="1306744319851" ID="ID_1927149042" MODIFIED="1359869362396" TEXT="local_df(1b) : &#x662f;&#x5426;&#x5141;&#x8bb8;&#x5728;&#x672c;&#x5730;&#x5206;&#x7247;"/>
<node CREATED="1306744344410" ID="ID_1165019878" MODIFIED="1397644103789" TEXT="cloned(1b) : &#x53d1;&#x751f;&#x4e86;&#x514b;&#x9686;, &#x6b64;sk_buff&#x6216;&#x8005;&#x88ab;&#x514b;&#x9686;&#x6216;&#x8005;&#x514b;&#x9686;&#x81ea;&#x53e6;&#x4e00;&#x4e2a;sk_buff, &#xa;&#x8fd9;&#x8868;&#x660e;2&#x4e2a;sk_buff&#x7684;data&#x6307;&#x5411;&#x4e86;&#x76f8;&#x540c;&#x7684;&#x5728;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7f13;&#x51b2;&#x533a;"/>
<node CREATED="1306744358842" FOLDED="true" ID="ID_948037159" MODIFIED="1397644107518" TEXT="ip_summed(2b) : &#x4f20;&#x8f93;&#x5c42;&#x6821;&#x9a8c;&#x548c;&#x72b6;&#x6001;">
<node CREATED="1359859350668" ID="ID_1933709865" MODIFIED="1359859657567" TEXT="CHECKSUM_NONE : &#x786c;&#x4ef6;&#x4e0d;&#x652f;&#x6301;,&#x5b8c;&#x5168;&#x7531;&#x8f6f;&#x4ef6;&#x6765;&#x6267;&#x884c;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1359859363508" ID="ID_240927046" MODIFIED="1359859686851" TEXT="CHECKSUM_UNNECESSARY : &#x6ca1;&#x6709;&#x5fc5;&#x8981;&#x6267;&#x884c;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1359859376325" ID="ID_1690056535" MODIFIED="1359859706660" TEXT="CHECKSUM_COMPLETE : &#x5df2;&#x7ecf;&#x6267;&#x884c;&#x5b8c;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1359859387053" ID="ID_565574562" MODIFIED="1359859723206" TEXT="CHECKSUM_PARTIAL : &#x7531;&#x786c;&#x4ef6;&#x6267;&#x884c;&#x6821;&#x9a8c;&#x548c;"/>
</node>
<node CREATED="1306744371433" ID="ID_174716874" MODIFIED="1306744376723" TEXT="nohdr(1b)"/>
<node CREATED="1306744383497" FOLDED="true" ID="ID_1603115947" MODIFIED="1397644110560" TEXT="nfctinfo(3b)">
<node CREATED="1308047293754" ID="ID_1668690166" MODIFIED="1308047379962" TEXT="IP_CT_NEW : &#x8fde;&#x63a5;original&#x65b9;&#x5411;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5305;&#x4f1a;&#x8bbe;&#x7f6e;&#x6b64;&#x4f4d;"/>
<node CREATED="1308047312344" ID="ID_208949703" MODIFIED="1308047402278" TEXT="IP_CT_IS_REPLY : &#x8fde;&#x63a5;reply&#x65b9;&#x5411;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5305;&#x4f1a;&#x8bbe;&#x7f6e;&#x6b64;&#x4f4d;"/>
<node CREATED="1308047322729" ID="ID_1704109513" MODIFIED="1308047579724" TEXT="IP_CT_ESTABLISHED : &#x5728;IP_CT_IS_REPLY&#x8bbe;&#x7f6e;&#x540e;original&#x65b9;&#x5411;&#x7684;&#x540e;&#x7eed;&#x5305;&#x90fd;&#x4f1a;&#x8bbe;&#x7f6e;&#x6b64;&#x4f4d;"/>
<node CREATED="1308047334826" ID="ID_731660754" MODIFIED="1308047337548" TEXT="IP_CT_RELATED"/>
</node>
<node CREATED="1306744396665" FOLDED="true" ID="ID_468372931" MODIFIED="1397644189454">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pkt_type(3b) &#30001;&#21253;&#30340;&#30446;&#30340;MAC&#22320;&#22336;&#20915;&#23450;&#30340;&#21253;&#30340;&#25509;&#25910;&#23545;&#35937;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#23545;ethernet&#35774;&#22791;&#32780;&#35328;,&#30001;eth_type_trans()&#20989;&#25968;&#22312;&#39537;&#21160;&#20013;&#35774;&#32622;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306751327934" ID="ID_1143098614" MODIFIED="1306751664012" TEXT="PACKET_HOST&#x9; :&#x5355;&#x64ad;, &#x5305;&#x7684;&#x76ee;&#x7684;&#x5730;&#x662f;&#x672c;&#x673a;&#xa;PACKET_BROADCAST :&#x5e7f;&#x64ad;,&#x5305;&#x7684;&#x76ee;&#x7684;&#x5730;&#x662f;lan&#x4e0a;&#x6240;&#x6709;&#x8bbe;&#x5907;&#xa;PACKET_MULTICAST :&#x7ec4;&#x64ad;,&#x5305;&#x7684;&#x76ee;&#x7684;&#x5730;&#x662f;&#x4e00;&#x4e2a;&#x7279;&#x5b9a;&#x7684;&#x7ec4;&#x64ad;&#x7ec4;&#xa;PACKET_OTHERHOST :&#x5305;&#x7684;&#x76ee;&#x7684;&#x5730;&#x662f;lan&#x4e0a;&#x53e6;&#x5916;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#xa;PACKET_OUTGOING : &#x7531;&#x672c;&#x673a;&#x53d1;&#x51fa;&#x53bb;&#x7684;&#x5305;&#xa;PACKET_LOOPBACK : &#x672c;&#x673a;&#x73af;&#x56de;&#x7684;&#x5305;&#xa;PACKET_FASTROUTE :&#x5feb;&#x901f;&#x8def;&#x7531;&#x7684;&#x5305;"/>
</node>
<node CREATED="1306744408456" FOLDED="true" ID="ID_1495133732" MODIFIED="1397644187604" TEXT="fclone(2b) : fast&#x514b;&#x9686;&#x72b6;&#x6001;">
<node CREATED="1359869422937" ID="ID_1249020504" MODIFIED="1397644178595" TEXT="SKB_FCLONE_UNAVAILABLE : child skb&#x8fd8;&#x672a;&#x771f;&#x6b63;&#x88ab;&#x514b;&#x9686;,&#x53ea;&#x662f;&#x5360;&#x4f4d;&#x4e4b;&#x7528;"/>
<node CREATED="1359869466892" ID="ID_1392236727" MODIFIED="1397111079068" TEXT="SKB_FCLONE_ORIG : &#x5728;skbuff_fclone_cache&#x5206;&#x914d;&#x7684;&#x7236;SKB,&#x53ef;&#x4ee5;&#x88ab;&#x514b;&#x9686;&#xff0c;&#x5373;&#x88ab;clone&#x7684;&#x5bf9;&#x8c61;"/>
<node CREATED="1359869482783" ID="ID_1250279461" MODIFIED="1397111106318" TEXT="SKB_FCLONE_CLONE : &#x5728;skbuff_fclone_cache&#x5206;&#x914d;&#x7684;&#x5b50;SKB,&#x4ece;&#x7236;SKB&#x514b;&#x9686;&#x5f97;&#x5230;&#xff0c;&#x5373;clone&#x5f97;&#x5230;&#x7684;&#x5bf9;&#x8c61;"/>
</node>
<node CREATED="1306744419720" ID="ID_614548865" MODIFIED="1306744424652" TEXT="ipvs_property(1b)"/>
<node CREATED="1306744431784" ID="ID_1439524541" MODIFIED="1306744436063" TEXT="peeked(1b)"/>
<node CREATED="1306744442039" ID="ID_1569803012" MODIFIED="1306744446683" TEXT="nf_trace(1b)"/>
</node>
<node CREATED="1306744458935" ID="ID_1770227688" MODIFIED="1359860723443" TEXT="protocol : &#x5305;&#x7684;&#x4e09;&#x5c42;&#x534f;&#x8bae;&#x7c7b;&#x578b;, &#x5728;&#x9a71;&#x52a8;&#x4e2d;&#x8bbe;&#x7f6e;,&#x7531;&#x6b64;&#x503c;&#x51b3;&#x5b9a;&#x8c03;&#x7528;&#x54ea;&#x4e2a;&#x4e09;&#x5c42;&#x534f;&#x8bae;&#x5904;&#x7406;&#x51fd;&#x6570;"/>
<node CREATED="1306744488662" ID="ID_1655201775" MODIFIED="1306750748474" TEXT="destructor&#x51fd;&#x6570; : &#x7f13;&#x51b2;&#x533a;&#x5220;&#x9664;&#x65f6;&#x8c03;&#x7528;&#x6b64;&#x51fd;&#x6570;&#x5b8c;&#x6210;&#x67d0;&#x4e9b;&#x5de5;&#x4f5c;.&#xa;&#x5f53;&#x7f13;&#x51b2;&#x533a;&#x4e0d;&#x5c5e;&#x4e8e;&#x4e00;&#x4e2a;&#x5957;&#x63a5;&#x5b57;&#x65f6;,&#x6b64;&#x51fd;&#x6570;&#x4e00;&#x822c;&#x4e0d;&#x521d;&#x59cb;&#x5316;.&#xa;&#x5f53;&#x5c5e;&#x4e8e;&#x4e00;&#x4e2a;&#x5957;&#x63a5;&#x5b57;&#x65f6;,&#x901a;&#x5e38;&#x521d;&#x59cb;&#x5316;&#x4e3a;sock_rfree&#x6216;sock_wfree,&#xa;&#x7528;&#x4e8e;&#x66f4;&#x65b0;&#x5957;&#x63a5;&#x5b57;&#x961f;&#x5217;&#x4e2d;&#x6240;&#x6301;&#x6709;&#x7684;&#x5185;&#x5b58;"/>
<node CREATED="1306744540134" ID="ID_288209252" MODIFIED="1306744637850" TEXT="struct nf_conntrack *nfct :&#x5305;&#x6240;&#x5c5e;&#x7684;netfilter&#x8fde;&#x63a5;"/>
<node CREATED="1306744604692" ID="ID_682649166" MODIFIED="1397467266658">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff *nfct_reasm
    </p>
    <p>
      skb&#26159;&#19968;&#20010;&#21253;&#30340;&#20998;&#29255;&#65292;&#27492;&#25351;&#38024;&#25351;&#21521;&#37325;&#32452;&#21518;&#30340;skb
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306744653715" ID="ID_1054885742" MODIFIED="1306744659866" TEXT="struct nf_queue_entry *nf_queue_entry"/>
<node CREATED="1306744671266" FOLDED="true" ID="ID_1437433136" MODIFIED="1397644554812" TEXT="struct nf_bridge_info *nf_bridge&#xa;bridge&#x5728;&#x8c03;&#x7528;iptables&#x4e4b;&#x524d;&#x7528;&#x6b64;&#x7ed3;&#x6784;&#x5b58;&#x50a8;bridge&#x72b6;&#x6001;&#x4fe1;&#x606f;,&#xa;&#x8c03;&#x7528;iptables&#x4e4b;&#x540e;&#x4ece;&#x6b64;&#x7ed3;&#x6784;&#x6062;&#x590d;&#x72b6;&#x6001;&#x4fe1;&#x606f;">
<node CREATED="1397644299389" ID="ID_1788832122" MODIFIED="1397644301638" TEXT="atomic_t use"/>
<node CREATED="1397644312686" ID="ID_871551327" MODIFIED="1397644313694" TEXT="struct net_device *physindev"/>
<node CREATED="1397644324511" ID="ID_1402070800" MODIFIED="1397644325847" TEXT="struct net_device *physoutdev"/>
<node CREATED="1397644336439" FOLDED="true" ID="ID_1141216206" MODIFIED="1397644553196" TEXT="unsigned int mask">
<node CREATED="1397644505188" ID="ID_523828095" MODIFIED="1397644509288" TEXT="BRNF_PKT_TYPE"/>
<node CREATED="1397644513636" ID="ID_1988336820" MODIFIED="1397644514806" TEXT="BRNF_BRIDGED_DNAT"/>
<node CREATED="1397644523135" ID="ID_1668818838" MODIFIED="1397644524039" TEXT="BRNF_BRIDGED"/>
<node CREATED="1397644532546" ID="ID_456818680" MODIFIED="1397644533569" TEXT="BRNF_NF_BRIDGE_PREROUTING"/>
<node CREATED="1397644541603" ID="ID_500346177" MODIFIED="1397644542499" TEXT="BRNF_8021Q"/>
<node CREATED="1397644550388" ID="ID_146313589" MODIFIED="1397644551268" TEXT="BRNF_PPPoE"/>
</node>
<node CREATED="1397644347196" ID="ID_532913100" MODIFIED="1397644350663" TEXT="unsigned long data[]"/>
</node>
<node CREATED="1306744684674" ID="ID_1714789409" LINK="#ID_1433191896" MODIFIED="1306744819358">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      iif : &#25351;&#31034;&#27492;&#21253;&#26159;&#20174;&#21738;&#20010;&#32593;&#32476;&#35774;&#22791;&#25910;&#21040;&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#27492;&#20540;&#22312;netif_receive_skb&#20013;&#35774;&#32622;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306744843295" ID="ID_1475012529" MODIFIED="1306744845976" TEXT="queue_mapping"/>
<node CREATED="1306744854862" ID="ID_658154472" MODIFIED="1306744857230" TEXT="tc_index"/>
<node CREATED="1306744862221" ID="ID_1039833212" MODIFIED="1306744864498" TEXT="tc_verd"/>
<node CREATED="1306744878237" ID="ID_561855538" MODIFIED="1425455632454" TEXT="flags2">
<node CREATED="1306744891291" ID="ID_161797317" MODIFIED="1306744898894" TEXT="ndisc_nodetype(2b)"/>
<node CREATED="1306744908396" ID="ID_828427684" MODIFIED="1306744913394" TEXT="do_not_encrypt(1b)"/>
<node CREATED="1425455677694" ID="ID_1230625677" MODIFIED="1425455685203" TEXT="head_frag">
<node CREATED="1425455692732" ID="ID_574134272" MODIFIED="1425455922921" TEXT="&#x82e5;&#x6b64;&#x4f4d;&#x4e3a;1&#xff0c;&#x8868;&#x793a;skb-&gt;head&#x662f;&#x7ecf;&#x7531;__netdev_alloc_frag&#x5206;&#x914d;&#x5f97;&#x6765;&#xff0c;&#x5b83;&#x662f;&#x67d0;&#x4e2a;page&#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x8fd9;&#x65f6;skb-&gt;head&#x6307;&#x5411;&#x7684;&#x662f;&#x4e00;&#x7247;&#x8fde;&#x7eed;&#x7684;&#x7269;&#x7406;&#x5185;&#x5b58;&#xff0c;&#x56e0;&#x800c;&#x5728;&#x9700;&#x8981;&#x7684;&#x65f6;&#x5019;(&#x5982;GRO)&#x53ef;&#x4ee5;&#x65b9;&#x4fbf;&#x7684;&#x5c06;skb-&gt;head&#x8f6c;&#x6362;&#x4e3a;&#x4e3a;&#x4e00;&#x4e2a;skb_frag_t&#x7ed3;&#x6784;">
<node CREATED="1425455924981" ID="ID_829624414" LINK="#ID_923189620" MODIFIED="1425455958857" TEXT="skb_frag_t"/>
</node>
<node CREATED="1425455692732" ID="ID_325787294" MODIFIED="1425456475981" TEXT="&#x82e5;&#x6b64;&#x4f4d;&#x4e3a;0&#xff0c;&#x8868;&#x793a;skb-&gt;head&#x662f;&#x7ecf;&#x7531;__alloc_skb&#x5206;&#x914d;&#x5f97;&#x6765;&#xff0c;&#x8fd9;&#x65f6;skb-&gt;head&#x6307;&#x5411;&#x7684;&#x5185;&#x5b58;&#x533a;&#x5728;&#x865a;&#x62df;&#x5730;&#x5740;&#x7a7a;&#x95f4;&#x662f;&#x8fde;&#x7eed;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x5728;&#x7269;&#x7406;&#x5730;&#x5740;&#x7a7a;&#x95f4;&#x4e0a;&#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x8fde;&#x7eed;&#x7684;&#x3002;&#x6709;&#x53ef;&#x80fd;&#x662f;&#x7cfb;&#x7edf;&#x5c06;&#x591a;&#x7247;&#x4e0d;&#x8fde;&#x7eed;&#x7684;&#x7269;&#x7406;&#x5185;&#x5b58;&#x533a;&#x6620;&#x5c04;&#x6210;&#x4e86;&#x4e00;&#x6574;&#x5757;&#x8fde;&#x7eed;&#x7684;&#x865a;&#x62df;&#x5185;&#x5b58;&#x533a;&#x3002;&#x8fd9;&#x65f6;skb-&gt;head&#x5c31;&#x4e0d;&#x80fd;&#x8f6c;&#x6362;&#x6210;&#x4e00;&#x4e2a;skb_frag_t&#x7ed3;&#x6784;&#x3002;&#x8fd9;&#x79cd;&#x5185;&#x5b58;&#x533a;&#x5982;&#x679c;&#x4ec5;&#x5728;&#x5185;&#x6838;&#x4e2d;&#x8bbf;&#x95ee;&#x81ea;&#x7136;&#x662f;&#x6ca1;&#x95ee;&#x9898;&#xff0c;&#x4f46;&#x662f;&#x82e5;&#x8ba9;DMA&#x6765;&#x8bbf;&#x95ee;&#xff0c;&#x5219;&#x53ef;&#x80fd;&#x7531;&#x4e8e;&#x7269;&#x7406;&#x5730;&#x5740;&#x4e0d;&#x8fde;&#x7eed;&#x5bfc;&#x81f4;&#x95ee;&#x9898;&#x3002;"/>
</node>
</node>
<node CREATED="1306744932555" ID="ID_91288717" MODIFIED="1306744935033" TEXT="imq_flags"/>
<node CREATED="1306744943115" ID="ID_631854142" MODIFIED="1306744944902" TEXT="dma_cookie"/>
<node CREATED="1306744951243" ID="ID_385255190" MODIFIED="1306744953142" TEXT="secmark"/>
<node CREATED="1306744958699" ID="ID_459085889" MODIFIED="1306745177359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      mark : netfilter&#26631;&#35760;,&#19968;&#33324;&#30001;netfilter&#30340;mangle&#34920;&#20013;&#30340;&#35268;&#21017;&#35774;&#23450;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34920;&#31034;&#28385;&#36275;&#29305;&#23450;&#26465;&#20214;&#30340;&#21253;,&#21518;&#32493;&#27169;&#22359;&#21033;&#29992;&#36825;&#20010;&#24555;&#36895;&#26631;&#35760;&#35782;&#21035;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306745187510" ID="ID_247876421" MODIFIED="1306745189271" TEXT="vlan_tci"/>
<node CREATED="1306745203957" ID="ID_254862945" MODIFIED="1359859017913" TEXT="transport_header : L4&#x5934;&#x90e8;&#x6307;&#x9488;"/>
<node CREATED="1306745210053" ID="ID_1898323816" MODIFIED="1306983030984" TEXT="network_header : L3&#x5934;&#x90e8;&#x6307;&#x9488;"/>
<node CREATED="1306745217045" ID="ID_222864320" MODIFIED="1306983286162" TEXT="mac_header : L2&#x5934;&#x90e8;&#x6307;&#x9488;">
<node CREATED="1397109519913" ID="ID_348068070" MODIFIED="1397110879367">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#25509;&#25910;&#36335;&#24452;&#19978;&#65292;&#22312;&#24320;&#22987;&#31532;n&#23618;&#22788;&#29702;&#21069;&#65292;&#30001;&#31532;n&#23618;&#30340;&#20195;&#30721;&#36127;&#36131;&#21021;&#22987;&#21270;&#31532;n&#23618;&#30340;header&#25351;&#38024;
    </p>
    <p>
      &#22312;&#23436;&#25104;&#31532;n&#23618;&#22788;&#29702;&#21518;&#65292;&#24212;&#23558;&#31532;n&#23618;&#22836;&#37096;&#21093;&#31163;&#20986;&#26469;&#65292;&#21363;&#26356;&#26032;skb-&gt;data&#21644;skb-&gt;len&#20351;&#20043;&#25351;&#21521;&#31532;n+1&#23618;&#22836;&#37096;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397109220943" ID="ID_1825395013" MODIFIED="1397109316415" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x4f1a;&#x5728;&#x63a5;&#x6536;&#x5305;&#x65f6;&#x8c03;&#x7528;&#x51fd;&#x6570;eth_type_trans&#x6765;&#x8bbe;&#x7f6e;&#x6b64;&#x503c;"/>
</node>
<node CREATED="1306745224468" ID="ID_1185001786" MODIFIED="1397096183668" TEXT="tail">
<node CREATED="1306750444324" ID="ID_771947810" MODIFIED="1425715897902">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="./pic/skb_struct_2.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1425109007965" ID="ID_105868010" MODIFIED="1425717326119">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#25351;&#21521;&#30340;&#25968;&#25454;&#21253;&#30340;&#20869;&#23481;&#21487;&#20197;&#20998;&#20026;3&#37096;&#20998;&#65306;
    </p>
    <p>
      skb-&gt;len&#26159;&#25351;&#36825;3&#37096;&#20998;&#30340;&#24635;&#38271;&#24230;&#65292;&#32780;skb-&gt;data_len&#26159;&#25351;
    </p>
    <p>
      skb_shinfo(skb)-&gt;frags[x]&#21644;skb_shinfo(skb)-&gt;frag_list
    </p>
    <p>
      &#20013;&#20869;&#23481;&#30340;&#38271;&#24230;&#20043;&#21644;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;3&#37096;&#20998;&#20197;&#20197;&#19979;&#39034;&#24207;&#32452;&#25104;&#19968;&#20010;&#23436;&#25972;&#30340;&#21253;&#65306;
    </p>
    <p>
      &#39318;&#20808;&#26159;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#30340;head&#37096;&#20998;
    </p>
    <p>
      &#20854;&#27425;&#26159;skb_shinfo(skb)-&gt;frags[x]&#20013;&#30340;&#20869;&#23384;&#20998;&#29255;&#37096;&#20998;
    </p>
    <p>
      &#26368;&#21518;&#26159;skb_shinfo(skb)-&gt;frag_list&#20013;&#30340;&#21253;&#20998;&#29255;&#37096;&#20998;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19981;&#36807;skb_shinfo(skb)-&gt;frags[x]&#21644;skb_shinfo(skb)-&gt;frag_list
    </p>
    <p>
      &#19968;&#33324;&#19981;&#21516;&#26102;&#20351;&#29992;&#65292;&#25105;&#20204;&#24635;&#26159;&#24212;&#35813;&#20248;&#20808;&#20351;&#29992;skb_shinfo(skb)-&gt;frags[x]&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425109062476" ID="ID_1868151356" MODIFIED="1425109198840" TEXT="&#x4e00;&#x90e8;&#x5206;&#x662f;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x90e8;&#x5206;&#xff0c;&#x5176;&#x957f;&#x5ea6;&#x7b49;&#x4e8e;skb-&gt;len - skb-&gt;data_len, &#xa;&#x8fd9;&#x4e00;&#x90e8;&#x5206;&#x5df2;&#x7ecf;&#x6620;&#x5c04;&#x5230;&#x5185;&#x6838;&#x7684;&#x865a;&#x62df;&#x5730;&#x5740;&#x7a7a;&#x95f4;&#xff0c;&#x56e0;&#x6b64;&#x5185;&#x6838;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;"/>
<node CREATED="1425109211643" ID="ID_22057418" MODIFIED="1425715992089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20108;&#37096;&#20998;&#26159;skb_shinfo(skb)-&gt;frags[x]&#25351;&#21521;&#30340;&#20869;&#23481;&#65292;&#20854;&#38271;&#24230;&#31561;&#20110;skb_shinfo(skb)-&gt;frags[x].size
    </p>
    <p>
      &#36825;&#19968;&#37096;&#20998;&#26159;&#29289;&#29702;&#22320;&#22336;&#31354;&#38388;&#65292;&#20869;&#26680;&#19981;&#33021;&#30452;&#25509;&#35775;&#38382;&#65292;&#38656;&#35843;&#29992;void *kmap_atomic(struct page *page)&#26144;&#23556;&#21040;&#20869;&#26680;&#34394;&#25311;&#22320;&#22336;&#31354;&#38388;&#21518;&#25165;&#33021;&#35775;&#38382;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425716007728" ID="ID_35422025" MODIFIED="1425716197304">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#19977;&#37096;&#20998;&#26159;skb_shinfo(skb)-&gt;frag_list&#25351;&#21521;&#30340;skb&#38142;&#34920;&#65292;&#20854;&#38271;&#24230;&#30001;&#38142;&#34920;&#20013;&#21508;&#20010;skb-&gt;len&#25351;&#20986;
    </p>
    <p>
      <font color="#ff0000">&#27880;&#24847;&#65292;&#38142;&#34920;&#20013;&#30340;skb&#20063;&#21487;&#20197;&#31867;&#20284;&#30340;&#30001;&#36825;&#19977;&#37096;&#20998;&#20869;&#23481;&#32452;&#25104;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1306745230901" ID="ID_1261769480" LINK="#ID_1820724636" MODIFIED="1306750471610" TEXT="end"/>
<node CREATED="1306745239716" ID="ID_995602921" LINK="#ID_1820724636" MODIFIED="1306750477706" TEXT="head&#x6307;&#x9488;"/>
<node CREATED="1306745252292" ID="ID_1163962136" LINK="#ID_1820724636" MODIFIED="1306750483833" TEXT="data&#x6307;&#x9488;"/>
<node CREATED="1306745262180" FOLDED="true" ID="ID_297170957" MODIFIED="1397644611560" TEXT="truesize : skb&#x672c;&#x8eab;&#x548c;&#x5b83;&#x6240;&#x6307;&#x5411;&#x7684;&#x6570;&#x636e;&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5927;&#x5c0f;&#x4e4b;&#x548c;">
<node CREATED="1359857877124" ID="ID_567173966" MODIFIED="1359857983406" TEXT="&#x4e00;&#x822c;&#x6765;&#x8bf4;skb_buff&#x548c;&#x5b83;&#x5bf9;&#x5e94;&#x7684;&#x6570;&#x636e;&#x7f13;&#x51b2;&#x533a;&#x662f;&#x4e00;&#x8d77;&#x5206;&#x914d;&#x7684;, &#x5982;&#x679c;&#x7533;&#x8bf7;&#x4e00;&#x4e2a;len&#x5b57;&#x8282;&#x7684;&#x7f13;&#x51b2;&#x533a;,alloc_skb()&#x4f1a;&#x5c06;truesize&#x521d;&#x59cb;&#x5316;&#x4e3a;len+sizeof(sk_buff)"/>
</node>
<node CREATED="1306745270403" FOLDED="true" ID="ID_680585610" MODIFIED="1397644638643">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      users : &#24341;&#29992;&#35745;&#25968;, &#19968;&#33324;&#20351;&#29992;skb_get()&#22686;&#21152;&#35745;&#25968;, kfree_skb()&#37322;&#25918;&#35745;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397100715141" ID="ID_1767636403" MODIFIED="1397644634913" TEXT="&#x5b83;&#x8868;&#x660e;&#x7684;&#x662f;&#x6b64;struct sk_buff&#x7684;&#x7528;&#x6237;&#x6570;&#xff0c;&#x800c;&#x6b64;sk_buff&#x6307;&#x5411;&#x7684;data&#x7f13;&#x51b2;&#x533a;&#x7684;&#x7528;&#x6237;&#x6570;&#x7531;struct skb_shared_info&#x7684;dataref&#x6210;&#x5458;&#x8868;&#x793a;"/>
</node>
</node>
<node CREATED="1397100013037" FOLDED="true" ID="ID_1438672901" MODIFIED="1425078142079" TEXT="struct sk_buff_head">
<node CREATED="1397100025097" ID="ID_485646965" MODIFIED="1397100034319" TEXT="struct sk_buff *next"/>
<node CREATED="1397100044987" ID="ID_1712154640" MODIFIED="1397100049159" TEXT="struct sk_buff *prev"/>
<node CREATED="1397100060207" ID="ID_1217368992" MODIFIED="1397100166689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __u32 qlen
    </p>
    <p>
      queue&#30340;&#38271;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397100075367" ID="ID_1994241097" MODIFIED="1397100187879">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      spinlock_t lock
    </p>
    <p>
      &#35775;&#38382;queue&#38656;&#25345;&#26377;&#30340;&#38145;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397468306592" FOLDED="true" ID="ID_1672739171" MODIFIED="1425456574192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct skb_shared_info
    </p>
    <p>
      &#24212;&#20351;&#29992;&#23439;skb_shinfo(skb)&#35775;&#38382;struct skb_shared_info&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node COLOR="#ff0066" CREATED="1397468319158" ID="ID_1965588936" LINK="#ID_1726879627" MODIFIED="1397644750471" TEXT="unsigned char nr_frags&#xa;frags&#x6570;&#x7ec4;&#x7684;&#x5927;&#x5c0f;"/>
<node CREATED="1397468337589" FOLDED="true" ID="ID_1597197273" MODIFIED="1397471813845" TEXT="__u8 tx_flags">
<node CREATED="1397471730259" ID="ID_1552582925" MODIFIED="1397471731342" TEXT="SKBTX_HW_TSTAMP"/>
<node CREATED="1397471739025" ID="ID_1262727473" MODIFIED="1397471739919" TEXT="SKBTX_SW_TSTAMP"/>
<node CREATED="1397471747985" ID="ID_1691567441" MODIFIED="1397471748899" TEXT="SKBTX_IN_PROGRESS"/>
<node CREATED="1397471756095" ID="ID_1134889059" MODIFIED="1397471757002" TEXT="SKBTX_DRV_NEEDS_SK_REF"/>
<node CREATED="1397471765127" ID="ID_1868729041" MODIFIED="1397471766020" TEXT="SKBTX_DEV_ZEROCOPY"/>
<node CREATED="1397471773060" ID="ID_957519598" MODIFIED="1397471773985" TEXT="SKBTX_WIFI_STATUS"/>
</node>
<node COLOR="#999900" CREATED="1397468354997" ID="ID_194178075" LINK="#ID_1726879627" MODIFIED="1397634771969" TEXT="unsigned short gso_size">
<node CREATED="1423456652520" ID="ID_510164389" MODIFIED="1423456665404" TEXT="&#x6bcf;&#x4e2a;&#x6bb5;&#x7684;&#x5927;&#x5c0f;&#x662f;&#x591a;&#x5c11;"/>
</node>
<node COLOR="#999900" CREATED="1397468367145" ID="ID_233074666" LINK="#ID_1726879627" MODIFIED="1397634762659" TEXT="unsigned short gso_segs">
<node CREATED="1423456611466" ID="ID_128959185" MODIFIED="1423456649124" TEXT="&#x5206;&#x6210;&#x591a;&#x5c11;&#x4e2a;&#x6bb5;"/>
</node>
<node COLOR="#999900" CREATED="1397468401166" ID="ID_285274258" LINK="#ID_1726879627" MODIFIED="1397634778789" TEXT="unsigned short gso_type">
<node CREATED="1423456670622" ID="ID_684468383" MODIFIED="1423456697239" TEXT="&#x5206;&#x6bb5;&#x7c7b;&#x578b;&#xff0c;UDP&#x8fd8;&#x662f;TCP">
<node CREATED="1423463944712" ID="ID_711725613" MODIFIED="1423463946143" TEXT="SKB_GSO_TCPV4"/>
<node CREATED="1423463954581" ID="ID_562235176" MODIFIED="1423463955228" TEXT="SKB_GSO_UDP"/>
<node CREATED="1423463962309" ID="ID_57235257" MODIFIED="1423463962830" TEXT="SKB_GSO_DODGY"/>
<node CREATED="1423463970989" ID="ID_1061196841" MODIFIED="1423463971663" TEXT="SKB_GSO_TCP_ECN"/>
<node CREATED="1423463982220" ID="ID_1553058487" MODIFIED="1423463982803" TEXT="SKB_GSO_TCPV6"/>
<node CREATED="1423463990773" ID="ID_172385326" MODIFIED="1423463991383" TEXT="SKB_GSO_FCOE"/>
</node>
</node>
<node COLOR="#3333ff" CREATED="1397468419424" ID="ID_1760741315" LINK="#ID_1726879627" MODIFIED="1397644817477" TEXT="struct sk_buff *frag_list&#xa;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x5305;&#x4e2d;&#x7684;&#x5176;&#x5b83;&#x5305;&#x5206;&#x7247;"/>
<node CREATED="1397468434646" ID="ID_733756790" MODIFIED="1397468439875" TEXT="struct skb_shared_hwtstamps hwtstamps"/>
<node COLOR="#ff0066" CREATED="1397468453114" ID="ID_1078072927" LINK="#ID_1726879627" MODIFIED="1397470970749" TEXT="__be32 ip6_frag_id"/>
<node CREATED="1397468470939" ID="ID_763666070" MODIFIED="1397471410813">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      atomic_t dataref
    </p>
    <p>
      data&#32531;&#20914;&#21306;&#30340;&#29992;&#25143;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397468486017" ID="ID_1466473483" MODIFIED="1397468493839" TEXT="void *destructor_arg"/>
<node COLOR="#ff0066" CREATED="1397468505984" ID="ID_923189620" LINK="#ID_1726879627" MODIFIED="1397644720927" TEXT="skb_frag_t frags[MAX_SKB_FRAGS]&#xa;&#x6b64;skb&#x7684;&#x5185;&#x5b58;&#x5206;&#x7247;">
<node CREATED="1397471574536" ID="ID_1569936282" MODIFIED="1397471576238" TEXT="page">
<node CREATED="1397471588304" ID="ID_1870154242" MODIFIED="1397471589349" TEXT="struct page *p"/>
</node>
<node CREATED="1397471602480" ID="ID_1908477105" MODIFIED="1397471603427" TEXT="__u32 page_offset"/>
<node CREATED="1397471614340" ID="ID_1668780907" MODIFIED="1397471615392" TEXT="__u32 size"/>
</node>
</node>
</node>
<node CREATED="1306743067066" FOLDED="true" ID="ID_1113046040" MODIFIED="1453492607694" TEXT="&#x5e38;&#x89c1;&#x64cd;&#x4f5c;&#x51fd;&#x6570;">
<node CREATED="1306746291418" ID="ID_1458910147" MODIFIED="1306746349092" TEXT="skb_dst() : &#x7528;&#x4e8e;&#x83b7;&#x53d6;skb&#x4e2d;&#x7684;struct dst_entry"/>
<node CREATED="1397464317254" ID="ID_862278352" MODIFIED="1397644837023" TEXT="&#x64cd;&#x4f5c;skb&#x5f15;&#x7528;&#x8ba1;&#x6570;">
<node CREATED="1306747149813" ID="ID_1883905498" MODIFIED="1306747171500" TEXT="skb_get() : &#x589e;&#x52a0;skb&#x7684;&#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
<node CREATED="1397464335132" ID="ID_218264102" LINK="#ID_997845498" MODIFIED="1397464494279">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20943;&#23569;skb&#30340;&#24341;&#29992;&#35745;&#25968;&#65292;&#24403;&#24341;&#29992;&#35745;&#25968;&#21464;&#20026;0&#26102;&#37322;&#25918;skb
    </p>
    <p>
      dev_kfree_skb
    </p>
    <p>
      consume_skb
    </p>
    <p>
      kfree_skb
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306981841662" ID="ID_749048099" MODIFIED="1306981865343" TEXT="skb_network_header : &#x8fd4;&#x56de;L3&#x5934;&#x90e8;"/>
<node CREATED="1306983093090" ID="ID_1268632228" MODIFIED="1306983106903" TEXT="skb_transport_header : &#x8fd4;&#x56de;L4&#x5934;&#x90e8;"/>
<node CREATED="1397111481338" FOLDED="true" ID="ID_84076676" MODIFIED="1397644957080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_put
    </p>
    <p>
      &#22312;&#23614;&#37096;&#25918;&#20837;&#19968;&#27573;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397111491758" ID="ID_1975959512" MODIFIED="1397111517580">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_put.jpg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397111532398" FOLDED="true" ID="ID_1255217056" MODIFIED="1397644963649">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_push
    </p>
    <p>
      &#22312;&#22836;&#37096;&#25554;&#20837;&#19968;&#27573;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397111539668" ID="ID_772793581" MODIFIED="1397111548200">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_push.jpg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397111625912" ID="ID_410561931" MODIFIED="1425108747733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_pull
    </p>
    <p>
      &#20174;&#20869;&#23481;&#20013;&#25289;&#20986;&#19968;&#27573;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397111630222" ID="ID_380452502" MODIFIED="1397111637054">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_pull.jpg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425106236147" FOLDED="true" ID="ID_1228806833" MODIFIED="1425290441906">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pskb_pull (skb, len)
    </p>
    <p>
      &#20174;&#20869;&#23481;&#20013;&#25289;&#20986;&#19968;&#27573;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425106335535" ID="ID_1003390551" LINK="#ID_410561931" MODIFIED="1425108273445" TEXT="normal (len &lt;= skb_headlen(skb))">
<node CREATED="1425106890199" ID="ID_249454541" MODIFIED="1425106907792">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_pull_2.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425106933470" ID="ID_667049336" MODIFIED="1425106961072" TEXT="skb_headlen(skb)  =  skb-&gt;len - skb-&gt;data_len"/>
<node CREATED="1425109589982" ID="ID_693106278" MODIFIED="1425109734012" TEXT="skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x5185;&#x5bb9;&#x5df2;&#x8db3;&#x591f;&#x9700;&#x8981;&#x62c9;&#x51fa;&#x7684;&#x957f;&#x5ea6;&#xff0c;&#x6240;&#x4ee5;&#x76f4;&#x63a5;&#x66f4;&#x65b0;skb-&gt;data&#x548c;skb-&gt;len&#x5373;&#x53ef;"/>
</node>
<node CREATED="1425105299040" ID="ID_624204110" MODIFIED="1425105304463" TEXT="frag">
<node CREATED="1425108232003" ID="ID_1315784050" MODIFIED="1425108240630">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_pull_3.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425109589982" ID="ID_1656893432" MODIFIED="1425110075626" TEXT="skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x5185;&#x5bb9;&#x4e0d;&#x591f;&#x9700;&#x8981;&#x62c9;&#x51fa;&#x7684;&#x957f;&#x5ea6;&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x590d;&#x5236;&#x4e0d;&#x591f;&#x7684;&#x90e8;&#x5206;&#x5230;skb-&gt;tail&#x7684;&#x540e;&#x9762;&#x3002;&#x8fd9;&#x76f8;&#x5f53;&#x4e8e;&#x628a;&#x4e00;&#x90e8;&#x5206;&#x5185;&#x5bb9;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x642c;&#x79fb;&#x5230;&#x4e86;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e2d;&#x95f4;&#x3002;">
<node CREATED="1425109907853" ID="ID_950165259" MODIFIED="1425109992619">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;skb_shinfo(skb)-&gt;frags[x]&#20013;&#22797;&#21046;&#19981;&#22815;&#30340;&#37096;&#20998;&#21040;skb-&gt;tail&#30340;&#21518;&#38754;&#20197;&#21518;&#65292;
    </p>
    <p>
      &#38656;&#35201;&#26356;&#26032;skb_shinfo(skb)-&gt;frags[x]&#30340;size&#21644;offset&#12290;&#21516;&#26102;&#20063;&#35201;&#26356;&#26032;skb-&gt;tail&#21644;skb-&gt;data_len&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425110128147" ID="ID_664773457" MODIFIED="1425110146124" TEXT="&#x642c;&#x79fb;&#x5b8c;&#x6210;&#x540e;&#x518d;&#x66f4;&#x65b0;skb-&gt;data&#x548c;skb-&gt;len"/>
<node CREATED="1425287255368" ID="ID_1320873010" MODIFIED="1425287336143">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __pskb_pull_tail()
    </p>
    <p>
      &#25226;&#19968;&#27573;&#38271;&#24230;&#30340;&#20869;&#23481;&#20174;skb_shinfo(skb)-&gt;frags[x]&#20013;&#25644;&#31227;&#21040;skb-&gt;tail&#21518;&#38754;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425287375297" ID="ID_623998714" MODIFIED="1425287417267" TEXT="&#x9996;&#x5148;&#x68c0;&#x67e5;skb-&gt;tail&#x4e0e;skb-&gt;end&#x4e4b;&#x95f4;&#x662f;&#x5426;&#x6709;&#x8db3;&#x591f;&#x7684;&#x7a7a;&#x95f4;&#x5b58;&#x653e;&#x9700;&#x8981;&#x642c;&#x79fb;&#x7684;&#x5185;&#x5bb9;"/>
<node CREATED="1425287453921" ID="ID_1685303070" MODIFIED="1425288138431">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;skb_copy_bits(skb, offset, to, len)&#23454;&#26045;&#25644;&#31227;
    </p>
    <p>
      &#23558;skb&#30340;&#20869;&#23481;&#20174;offset&#22788;&#24320;&#22987;&#25644;&#31227;len&#38271;&#24230;&#21040;to&#25351;&#23450;&#30340;&#32531;&#20914;&#21306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425287950639" ID="ID_1854764437" MODIFIED="1425288337189">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#30340;&#20869;&#23481;&#23384;&#25918;&#22312;2&#20010;&#22320;&#26041;&#65306;&#19968;&#26159;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#65292;&#20108;&#26159;&#22312;skb_shinfo(skb)-&gt;frags[x]&#20869;
    </p>
    <p>
      &#22914;&#26524;&#35201;&#25644;&#31227;&#30340;&#20869;&#23481;&#26377;&#19968;&#37096;&#20998;&#24050;&#32463;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#20102;(offset &lt; (skb-&gt;len - skb-&gt;data_len))&#65292;&#21017;&#20808;&#25226;&#36825;&#37096;&#20998;&#25644;&#31227;&#36807;&#21435;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425288447343" ID="ID_1304424249" MODIFIED="1425288536655" TEXT="&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x642c;&#x79fb;&#x5185;&#x5bb9;&#xff0c;&#x76f4;&#x5230;&#x8fbe;&#x5230;&#x9700;&#x8981;&#x642c;&#x79fb;&#x7684;&#x957f;&#x5ea6;">
<node CREATED="1425288538872" ID="ID_1217599379" MODIFIED="1425288675794" TEXT="&#x5982;&#x679c;&#x4e00;&#x4e2a;frag&#x4e0d;&#x591f;&#xff0c;&#x5219;&#x8fdb;&#x5165;&#x4e0b;&#x4e00;&#x4e2a;frag&#x7ee7;&#x7eed;&#x642c;"/>
<node CREATED="1425288733941" ID="ID_433501600" MODIFIED="1425288821114">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;frag&#20013;&#23384;&#25918;&#30340;&#26159;frag&#25152;&#22312;page&#30340;&#29289;&#29702;&#22320;&#22336;&#65292;&#38656;&#35201;&#23558;&#20854;&#36716;&#25442;&#20026;&#34394;&#25311;&#22320;&#22336;&#25165;&#33021;&#36827;&#34892;&#25335;&#36125;
    </p>
    <p>
      &#26377;2&#31181;&#21150;&#27861;&#36827;&#34892;&#36825;&#31181;&#36716;&#25442;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425288864769" ID="ID_1240646827" MODIFIED="1425289056360" TEXT="&#x4ece;frag&#x4e2d;&#x5f97;&#x5230;page&#xff0c;&#x518d;&#x8c03;&#x7528;void *kmap_atomic(struct page *page)&#x5f97;&#x5230;&#x7269;&#x7406;&#x9875;&#x6620;&#x5c04;&#x4e4b;&#x540e;&#x7684;&#x865a;&#x62df;&#x5730;&#x5740;"/>
<node CREATED="1425288965228" ID="ID_1256991301" MODIFIED="1425288970057" TEXT="&#x8c03;&#x7528;void *skb_frag_address(const skb_frag_t *frag)">
<node CREATED="1425288994055" ID="ID_1061815556" MODIFIED="1425289023571">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void *page_address(const struct page *page)
    </p>
    <p>
      &#20250;&#36820;&#22238;&#29289;&#29702;&#39029;&#26144;&#23556;&#20043;&#21518;&#30340;&#34394;&#25311;&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425289174476" ID="ID_386713754" MODIFIED="1425289277076" TEXT="&#x5982;&#x679c;&#x8be5;skb&#x7684;&#x6240;&#x6709;frags&#x90fd;&#x62f7;&#x8d1d;&#x5b8c;&#x4e86;&#xff0c;&#x8fd8;&#x4e0d;&#x591f;&#x9700;&#x8981;&#x62f7;&#x8d1d;&#x7684;&#x957f;&#x5ea6;&#xff0c;&#x5219;&#x904d;&#x5386;skb&#x7684;&#x540e;&#x7eed;&#x5206;&#x7247;skb_shinfo(skb)-&gt;frag_list&#xff0c;&#x7ee7;&#x7eed;&#x4ece;&#x4e2d;&#x62f7;&#x8d1d;"/>
</node>
</node>
<node CREATED="1425289424155" ID="ID_1726980270" MODIFIED="1425289563482" TEXT="&#x65e2;&#x7136;&#x5185;&#x5bb9;&#x5df2;&#x7ecf;&#x88ab;&#x62f7;&#x8d1d;&#x5230;&#x4e86;skb-&gt;tail&#x7684;&#x540e;&#x9762;&#xff0c;&#x90a3;&#x4e48;skb_shinfo(skb)-&gt;frags[x] &#x6216; skb_shinfo(skb)-&gt;frag_list&#x4e2d;&#x5df2;&#x7ecf;&#x88ab;&#x642c;&#x51fa;&#x7684;&#x90a3;&#x90e8;&#x5206;&#x7a7a;&#x95f4;&#x5c31;&#x5e94;&#x8be5;&#x88ab;&#x91ca;&#x653e;">
<node CREATED="1425289598231" ID="ID_914118549" MODIFIED="1425289653653" TEXT="&#x5982;&#x679c;&#x56e0;&#x4e3a;&#x642c;&#x79fb;&#x5bfc;&#x81f4;skb_shinfo(skb)-&gt;frag_list&#x4e2d;&#x67d0;&#x4e2a;skb&#x7684;&#x5168;&#x90e8;&#x5185;&#x5bb9;&#x88ab;&#x642c;&#x51fa;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;skb&#x4e5f;&#x5c31;&#x9700;&#x8981;&#x88ab;&#x91ca;&#x653e;&#x4e86;"/>
<node CREATED="1425289598231" ID="ID_249039534" MODIFIED="1425289690354" TEXT="&#x5982;&#x679c;&#x56e0;&#x4e3a;&#x642c;&#x79fb;&#x5bfc;&#x81f4;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x67d0;&#x4e2a;frag&#x7684;&#x5168;&#x90e8;&#x5185;&#x5bb9;&#x88ab;&#x642c;&#x51fa;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;frag&#x4e5f;&#x5c31;&#x9700;&#x8981;&#x88ab;&#x91ca;&#x653e;&#x4e86;">
<node CREATED="1425289801185" ID="ID_142162252" MODIFIED="1425289803029" TEXT="void skb_frag_unref(struct sk_buff *skb, int f)"/>
<node CREATED="1425290040552" ID="ID_1535912158" MODIFIED="1425290150044" TEXT="&#x540c;&#x65f6;&#x4e5f;&#x9700;&#x5c06;&#x540e;&#x7eed;&#x6ca1;&#x6709;&#x5168;&#x90e8;&#x642c;&#x5b8c;&#x7684;frags&#x5411;&#x524d;&#x79fb;&#x52a8;&#xff0c;&#x4ee5;&#x4fdd;&#x8bc1;skb_shinfo(skb)-&gt;frags[x]&#x6570;&#x7ec4;&#x7684;&#x5f00;&#x59cb;&#x5904;&#x4e0d;&#x7559;&#x7a7a;&#x767d;"/>
</node>
<node CREATED="1425289598231" ID="ID_577676846" MODIFIED="1425289920703">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#25644;&#31227;&#20165;&#20165;&#23548;&#33268;skb_shinfo(skb)-&gt;frags[x]&#20013;&#26576;&#20010;frag&#30340;&#37096;&#20998;&#20869;&#23481;&#34987;&#25644;&#20986;&#65292;&#37027;&#20040;&#21482;&#38656;&#35201;&#26356;&#26032;&#36825;&#20010;frag&#30340;offset&#21644;size
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425290286167" ID="ID_759504044" MODIFIED="1425290300730" TEXT="&#x66f4;&#x65b0;skb-&gt;tail&#x548c;skb-&gt;data_len">
<node CREATED="1425290312469" ID="ID_1806731736" MODIFIED="1425290345376" TEXT="&#x56e0;&#x4e3a;&#x6709;&#x65b0;&#x7684;&#x5185;&#x5bb9;&#x642c;&#x79fb;&#x5230;&#x4e86;skb-&gt;tail&#x540e;&#x9762;&#x4e86;&#xff0c;&#x6240;&#x4ee5;skb-&gt;tail&#x9700;&#x8981;&#x5411;&#x540e;&#x62d3;&#x5c55;"/>
<node CREATED="1425290347374" ID="ID_79350872" MODIFIED="1425290431313" TEXT="&#x56e0;&#x4e3a;&#x6709;&#x65b0;&#x7684;&#x5185;&#x5bb9;&#x642c;&#x79fb;&#x5230;&#x4e86;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x6240;&#x4ee5;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x7684;&#x5185;&#x5bb9;&#x5c31;&#x5c11;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x51cf;&#x5c11;skb-&gt;data_len"/>
</node>
</node>
</node>
</node>
<node CREATED="1425104865027" ID="ID_379999438" LINK="#ID_1228806833" MODIFIED="1425108769638">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pskb_may_pull
    </p>
    <p>
      &#26816;&#26597;&#33021;&#21542;&#20174;&#20869;&#23481;&#20013;&#25289;&#20986;&#19968;&#27573;&#25968;&#25454;
    </p>
    <p>
      &#26412;&#20989;&#25968;&#21482;&#20570;&#26816;&#26597;&#65292;&#24182;&#19981;&#26356;&#26032;skb-&gt;data&#21644;skb-&gt;len&#65292;&#20294;&#26159;pskb_pull&#20989;&#25968;&#21017;&#20250;&#26356;&#26032;skb-&gt;data&#21644;skb-&gt;len
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397111751465" FOLDED="true" ID="ID_559389194" MODIFIED="1397644984017">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_reserve
    </p>
    <p>
      &#22312;&#22836;&#37096;&#39044;&#30041;&#19968;&#27573;&#25968;&#25454;&#29992;&#20110;&#25554;&#20837;&#25253;&#22836;&#25110;&#23545;&#40784;&#65292;&#27604;&#22914;skb_reserve(skb, 2)&#23558;IP&#22836;&#37096;4&#23383;&#33410;&#23545;&#40784;
    </p>
    <p>
      &#19968;&#33324;&#22312;&#20998;&#37197;skb&#32531;&#20914;&#21306;&#21518;&#31435;&#21363;&#35843;&#29992;&#27492;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397111758205" ID="ID_540092145" MODIFIED="1397111764897">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_reserve.jpg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425454965296" FOLDED="true" ID="ID_1892921996" MODIFIED="1425617716638" TEXT="&#x5206;&#x914d;&#x4e00;&#x4e2a;skb&#x7f13;&#x51b2;&#x533a;">
<node CREATED="1425087544193" ID="ID_1942869416" MODIFIED="1425455141039">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netdev_alloc_skb
    </p>
  </body>
</html></richcontent>
<node CREATED="1425087606790" ID="ID_1977686664" MODIFIED="1425455155483" TEXT="struct sk_buff *__netdev_alloc_skb(struct net_device *dev, unsigned int length, gfp_t gfp_mask)">
<node CREATED="1397461379217" ID="ID_875372447" MODIFIED="1425088066613" TEXT="&#x6982;&#x5ff5;">
<node CREATED="1397461405456" ID="ID_360678034" MODIFIED="1397461432385" TEXT="&#x9a71;&#x52a8;&#x5e94;&#x603b;&#x662f;&#x4f7f;&#x7528;&#x6b64;&#x63a5;&#x53e3;&#x5206;&#x914d;skb"/>
<node CREATED="1397461433055" ID="ID_1865898466" MODIFIED="1397461480638" TEXT="&#x5206;&#x914d;&#x6240;&#x5f97;&#x5230;&#x7684;&#x5185;&#x5bb9;">
<node CREATED="1397461483498" ID="ID_1380457622" MODIFIED="1397461498339" TEXT="&#x4e00;&#x4e2a;struct sk_buff&#x7ed3;&#x6784;"/>
<node CREATED="1397461504003" ID="ID_868246436" MODIFIED="1397461591271" TEXT="&#x6240;&#x8bf7;&#x6c42;&#x5927;&#x5c0f;&#x7684;data&#x7f13;&#x51b2;&#x533a;&#xff0c;&#x6700;&#x7ec8;&#x5206;&#x914d;&#x7684;&#x7ed3;&#x679c;&#x53ef;&#x80fd;&#x5927;&#x4e8e;&#x6240;&#x8bf7;&#x6c42;&#x7684;&#x5927;&#x5c0f;&#xff0c;&#x4f46;&#x4e00;&#x5b9a;&#x4e0d;&#x4f1a;&#x5c0f;&#x4e8e;&#x8bf7;&#x6c42;&#x7684;&#x5927;&#x5c0f;"/>
<node CREATED="1397461617314" ID="ID_355505110" MODIFIED="1397461633290" TEXT="data&#x7f13;&#x51b2;&#x533a;&#x540e;&#x9762;&#x7684;struct skb_shared_info&#x7ed3;&#x6784;"/>
<node CREATED="1425617649138" ID="ID_1967885069" MODIFIED="1425617692623" TEXT="&#x5b58;&#x653e;&#x5b9e;&#x9645;&#x62a5;&#x6587;&#x6570;&#x636e;&#x7684;&#x5185;&#x5b58;&#x7a7a;&#x95f4;&#xff0c;&#x901a;&#x8fc7;kmalloc()&#x51fd;&#x6570;&#x7533;&#x8bf7;&#xff1b;sk_buff&#x6570;&#x636e;&#x7ed3;&#x6784;&#x901a;&#x8fc7; kmem_cache_alloc()&#x51fd;&#x6570;&#x7533;&#x8bf7;&#x3002;"/>
</node>
<node CREATED="1397461764788" ID="ID_1231909531" MODIFIED="1397461773747" TEXT="&#x5df2;&#x8fdb;&#x884c;&#x7684;&#x521d;&#x59cb;&#x5316;">
<node CREATED="1397461775278" ID="ID_279546969" MODIFIED="1397462362162" TEXT="struct sk_buff">
<node CREATED="1397461817679" ID="ID_620980123" MODIFIED="1397461829639" TEXT="sk_buff&#x4e2d;tail&#x524d;&#x9762;&#x7684;&#x6240;&#x6709;&#x5b57;&#x6bb5;&#x5df2;&#x88ab;&#x6e05;0"/>
<node CREATED="1397461946986" ID="ID_1286926867" MODIFIED="1397461976163" TEXT="skb-&gt;head&#x6307;&#x5411;data&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5f00;&#x59cb;"/>
<node CREATED="1397461979129" ID="ID_934161403" MODIFIED="1397462070374" TEXT="skb-&gt;end&#x6307;&#x5411;data&#x7f13;&#x51b2;&#x533a;&#x7684;&#x7ed3;&#x5c3e;&#xff0c;&#x540c;&#x65f6;&#x4e5f;&#x662f;&#x6307;&#x5411;data&#x7f13;&#x51b2;&#x533a;&#x540e;&#x9762;&#x7684;struct skb_shared_info&#x7ed3;&#x6784;&#x7684;&#x5f00;&#x59cb;"/>
<node CREATED="1397462101336" ID="ID_666777136" MODIFIED="1397462198585" TEXT="skb-&gt;data = skb-&gt;tail&#xff0c;&#x8fd9;2&#x4e2a;&#x503c;&#x4e00;&#x822c;&#x4e0d;&#x7b49;&#x4e8e;skb-&gt;head&#xff0c;&#x56e0;&#x4e3a;&#x7cfb;&#x7edf;&#x4f1a;&#x5728;skb&#x7684;&#x5934;&#x90e8;&#x9884;&#x7559;NET_SKB_PAD&#x5927;&#x5c0f;&#x7684;&#x7a7a;&#x95f4;"/>
<node CREATED="1397462226964" ID="ID_474616958" MODIFIED="1397462310830" TEXT="skb-&gt;truesize&#x4e3a;struct sk_buff&#x7684;&#x5927;&#x5c0f;&#xff0c;&#x52a0;&#x4e0a;data&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5927;&#x5c0f;&#xff0c;&#x518d;&#x52a0;&#x4e0a;data&#x7f13;&#x51b2;&#x533a;&#x540e;&#x9762;&#x7684;struct skb_shared_info&#x7ed3;&#x6784;&#x7684;&#x5927;&#x5c0f;"/>
<node CREATED="1397113665493" ID="ID_817256214" MODIFIED="1397113673955" TEXT="skb-&gt;users = 1"/>
</node>
<node CREATED="1397462366054" ID="ID_1374194420" MODIFIED="1397462393036" TEXT="data&#x7f13;&#x51b2;&#x533a; &#xff1a;&#x672a;&#x505a;&#x4efb;&#x4f55;&#x521d;&#x59cb;&#x5316;"/>
<node CREATED="1397462410957" ID="ID_442052156" MODIFIED="1397462412957" TEXT="struct skb_shared_info">
<node CREATED="1397462436508" ID="ID_571983070" MODIFIED="1397462444784" TEXT="skb_shared_info&#x4e2d;dataref&#x524d;&#x9762;&#x7684;&#x6240;&#x6709;&#x5b57;&#x6bb5;&#x5df2;&#x88ab;&#x6e05;0"/>
<node CREATED="1397112751936" ID="ID_1896541604" MODIFIED="1397112758048" TEXT="shinfo-&gt;dataref = 1"/>
</node>
</node>
<node CREATED="1397462562688" ID="ID_1977427852" MODIFIED="1397462684139" TEXT="&#x7cfb;&#x7edf;&#x4e3a;&#x6bcf;&#x4e2a;cpu&#x51c6;&#x5907;&#x4e86;&#x4e00;&#x4e2a;recycle_list&#x94fe;&#x8868;&#x3002;&#xa;&#x91ca;&#x653e;skb&#x65f6;&#x53ef;&#x80fd;&#x5e76;&#x4e0d;&#x771f;&#x6b63;&#x91ca;&#x653e;&#xff0c;&#x800c;&#x662f;&#x653e;&#x5165;&#x8fd9;&#x4e2a;&#x961f;&#x5217;&#xff0c;&#x5206;&#x914d;skb&#x65f6;&#x53ef;&#x80fd;&#x4e5f;&#x662f;&#x4ece;&#x8fd9;&#x4e2a;&#x961f;&#x5217;&#x5206;&#x914d;&#x3002;"/>
</node>
<node CREATED="1397461341589" ID="ID_1220108694" MODIFIED="1425087897643" TEXT="&#x5177;&#x4f53;&#x5b9e;&#x73b0;">
<node CREATED="1397112119335" ID="ID_642936783" MODIFIED="1397112157067" TEXT="&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x957f;&#x5ea6;&#x5c0f;&#x4e8e;SKB_RECYCLE_SIZE&#x5219;&#x76f4;&#x63a5;&#x4ece;recycle_list&#x5206;&#x914d;">
<node CREATED="1397112251415" ID="ID_1416662962" MODIFIED="1397112274957" TEXT="&#x521d;&#x59cb;&#x5316;sk_buff">
<node CREATED="1397112299315" ID="ID_1609877671" MODIFIED="1397112387348" TEXT="&#x6e05;&#x9664;sk_buff&#x4e2d;tail&#x524d;&#x9762;&#x7684;&#x6240;&#x6709;&#x5b57;&#x6bb5;"/>
<node CREATED="1397112455866" ID="ID_964956624" MODIFIED="1397112487058" TEXT="skb-&gt;tail = skb-&gt;data = skb-&gt;head"/>
<node CREATED="1397112498116" ID="ID_712252145" MODIFIED="1397112547808" TEXT="&#x5728;&#x7f13;&#x51b2;&#x533a;&#x5934;&#x90e8;&#x9884;&#x7559;&#x51fa;&#x5927;&#x5c0f;&#x4e3a;NET_SKB_PAD&#x7684;&#x7a7a;&#x95f4;"/>
</node>
<node CREATED="1397112666456" ID="ID_523680007" MODIFIED="1397112676388" TEXT="&#x521d;&#x59cb;&#x5316;&#x7f13;&#x51b2;&#x533a;&#x540e;&#x9762;&#x7684;struct skb_shared_info">
<node CREATED="1397112299315" ID="ID_330315426" MODIFIED="1397112731488" TEXT="&#x6e05;&#x9664;skb_shared_info&#x4e2d;dataref&#x524d;&#x9762;&#x7684;&#x6240;&#x6709;&#x5b57;&#x6bb5;"/>
<node CREATED="1397112751936" ID="ID_1177925886" MODIFIED="1397112758048" TEXT="shinfo-&gt;dataref = 1"/>
</node>
</node>
<node CREATED="1397112795106" ID="ID_752062737" MODIFIED="1397112857618" TEXT="&#x82e5;&#x8bf7;&#x6c42;&#x957f;&#x5ea6;&#x5c0f;&#x4e8e;SKB_RECYCLE_SIZE&#x5219;&#x5c06;&#x5176;&#x8c03;&#x6574;&#x4e3a;SKB_RECYCLE_SIZE"/>
<node CREATED="1397112872476" ID="ID_946104015" MODIFIED="1397112873418" TEXT="__dev_alloc_skb">
<node CREATED="1425455313575" ID="ID_1889278406" MODIFIED="1425455449428" TEXT="&#x5982;&#x679c;&#x8981;&#x5206;&#x914d;&#x7684;&#x957f;&#x5ea6;&#x5c0f;&#x4e8e;&#x4e00;&#x4e2a;page&#xff0c;&#x5219;&#x8c03;&#x7528;__netdev_alloc_frag&#x5206;&#x914d;&#xff0c;&#x7136;&#x540e;&#x518d;&#x8c03;&#x7528;build_skb()&#x521d;&#x59cb;&#x5316;skb&#x3002;">
<node CREATED="1425455452310" ID="ID_601433946" LINK="#ID_1230625677" MODIFIED="1425456561794" TEXT="&#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;skb-&gt;head_frag&#x4e3a;1&#xff0c;&#x8868;&#x793a;skb-&gt;head&#x662f;&#x67d0;&#x4e2a;page&#x7684;&#x4e00;&#x90e8;&#x5206;&#x3002;"/>
</node>
<node CREATED="1397112887146" ID="ID_296400425" MODIFIED="1425455562267">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#35201;&#20998;&#37197;&#30340;&#38271;&#24230;&#22823;&#20110;&#19968;&#20010;page&#65292;&#21017;&#35843;&#29992;alloc_skb&#20998;&#37197;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397112908576" FOLDED="true" ID="ID_1819836115" MODIFIED="1425455310522" TEXT="__alloc_skb">
<node CREATED="1397112951646" ID="ID_619496135" MODIFIED="1397112972880" TEXT="&#x4ece;skbuff_head_cache&#x4e2d;&#x5206;&#x914d;&#x4e00;&#x4e2a;struct sk_buff&#x7ed3;&#x6784;&#x4f53;"/>
<node CREATED="1397113116899" ID="ID_830046035" MODIFIED="1397113162851">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;kmalloc_node_track_caller&#20998;&#37197;&#30495;&#27491;&#30340;&#25968;&#25454;&#32531;&#20914;&#21306;
    </p>
    <p>
      kmalloc_node_track_caller&#21482;&#26159;kmalloc&#30340;&#23553;&#35013;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397113215469" ID="ID_1061285504" MODIFIED="1397113345981">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;data&#30340;&#30495;&#27491;&#38271;&#24230;&#26159;&#65306;
    </p>
    <p>
      &#35831;&#27714;&#30340;&#38271;&#24230;&#21152;&#19978;struct skb_shared_info&#30340;&#22823;&#23567;&#65292;&#20877;&#36827;&#34892;cache line&#23545;&#40784;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397112251415" ID="ID_1371207408" MODIFIED="1397112274957" TEXT="&#x521d;&#x59cb;&#x5316;sk_buff">
<node CREATED="1397112299315" ID="ID_1469550242" MODIFIED="1397112387348" TEXT="&#x6e05;&#x9664;sk_buff&#x4e2d;tail&#x524d;&#x9762;&#x7684;&#x6240;&#x6709;&#x5b57;&#x6bb5;"/>
<node CREATED="1397112498116" ID="ID_761292564" MODIFIED="1397113603285" TEXT="skb-&gt;truesize = skb-&gt;data_len +  sizeof(struct skb_shared_info) + sizeof(struct sk_buff)"/>
<node CREATED="1397112455866" ID="ID_1869329658" MODIFIED="1397112487058" TEXT="skb-&gt;tail = skb-&gt;data = skb-&gt;head"/>
<node CREATED="1397113665493" ID="ID_1842095157" MODIFIED="1397113673955" TEXT="skb-&gt;users = 1"/>
</node>
<node CREATED="1397112666456" ID="ID_508252404" MODIFIED="1397112676388" TEXT="&#x521d;&#x59cb;&#x5316;&#x7f13;&#x51b2;&#x533a;&#x540e;&#x9762;&#x7684;struct skb_shared_info">
<node CREATED="1397112299315" ID="ID_92428613" MODIFIED="1397112731488" TEXT="&#x6e05;&#x9664;skb_shared_info&#x4e2d;dataref&#x524d;&#x9762;&#x7684;&#x6240;&#x6709;&#x5b57;&#x6bb5;"/>
<node CREATED="1397112751936" ID="ID_166323651" MODIFIED="1397112758048" TEXT="shinfo-&gt;dataref = 1"/>
</node>
</node>
</node>
<node CREATED="1397112498116" ID="ID_674359419" MODIFIED="1397112547808" TEXT="&#x5728;&#x7f13;&#x51b2;&#x533a;&#x5934;&#x90e8;&#x9884;&#x7559;&#x51fa;&#x5927;&#x5c0f;&#x4e3a;NET_SKB_PAD&#x7684;&#x7a7a;&#x95f4;"/>
</node>
</node>
</node>
</node>
<node CREATED="1425087513913" ID="ID_1048541196" MODIFIED="1425455152155">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dev_alloc_skb
    </p>
  </body>
</html></richcontent>
<node CREATED="1425087572455" ID="ID_1459111122" LINK="#ID_1942869416" MODIFIED="1425087582011" TEXT="netdev_alloc_skb"/>
</node>
<node CREATED="1425455128750" ID="ID_1669822761" LINK="#ID_296400425" MODIFIED="1425455255124" TEXT="alloc_skb"/>
</node>
<node CREATED="1397463921295" FOLDED="true" ID="ID_1617778268" MODIFIED="1425617588460">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dev_kfree_skb
    </p>
    <p>
      &#37322;&#25918;&#19968;&#20010;skb&#32531;&#20914;&#21306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397464041825" ID="ID_628076888" MODIFIED="1397644824270" TEXT="&#x5177;&#x4f53;&#x5b9e;&#x73b0;">
<node CREATED="1397464047512" ID="ID_997845498" MODIFIED="1397464049709" TEXT="consume_skb">
<node CREATED="1397464093032" ID="ID_555162517" MODIFIED="1397464160659" TEXT="&#x5982;&#x679c;skb-&gt;users&#x51cf;&#x4e00;&#x4e4b;&#x540e;&#x4e0d;&#x4e3a;0&#x5219;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#xff0c;&#x8fd9;&#x8868;&#x793a;&#x8fd8;&#x6709;&#x5176;&#x5b83;&#x6a21;&#x5757;&#x5728;&#x5f15;&#x7528;&#x6b64;skb&#x6545;&#x800c;&#x8fd8;&#x4e0d;&#x80fd;&#x771f;&#x6b63;&#x91ca;&#x653e;&#x5b83;"/>
<node CREATED="1397464686458" FOLDED="true" ID="ID_40229780" MODIFIED="1397645080833">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_release_head_state
    </p>
    <p>
      &#37322;&#25918;struct sk_buff&#20013;&#30340;&#29366;&#24577;&#25968;&#25454;&#65292;&#36825;&#20123;&#25968;&#25454;&#26159;&#22312;&#20256;&#36882;skb&#36807;&#31243;&#20013;&#20445;&#23384;&#22312;skb&#20013;&#30340;
    </p>
    <p>
      &#32477;&#22823;&#37096;&#20998;&#26159;&#25351;&#21521;&#21478;&#19968;&#20010;&#25968;&#25454;&#32467;&#26500;&#30340;&#25351;&#38024;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397464828684" ID="ID_1681387119" MODIFIED="1397464857288">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;_skb_refdst
    </p>
    <p>
      &#28165;&#38500;&#36335;&#30001;&#32531;&#23384;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397464867178" ID="ID_1633732561" MODIFIED="1397464868155" TEXT="skb_dst_drop"/>
</node>
<node CREATED="1397464925646" ID="ID_1516709897" MODIFIED="1397464977115">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;sp
    </p>
    <p>
      &#28165;&#38500;ipsec&#29366;&#24577;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397464937003" ID="ID_793279428" MODIFIED="1397464938181" TEXT="secpath_put"/>
</node>
<node CREATED="1397464993875" ID="ID_1407993985" MODIFIED="1397465131372">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;destructor
    </p>
    <p>
      &#26356;&#26032;socket&#38431;&#21015;&#20013;&#25152;&#25345;&#26377;&#30340;&#20869;&#23384;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397465156442" ID="ID_795671812" MODIFIED="1397465158164" TEXT="skb-&gt;destructor(skb)"/>
</node>
<node CREATED="1397466433388" ID="ID_1088890697" MODIFIED="1397466520317">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;nfct&#65292;&#21363;skb&#25152;&#23646;&#30340;connection track
    </p>
    <p>
      &#37322;&#25918;&#23545;struct nf_conntrack&#30340;&#24341;&#29992;
    </p>
  </body>
</html></richcontent>
<arrowlink DESTINATION="ID_1088890697" ENDARROW="Default" ENDINCLINATION="0;0;" ID="Arrow_ID_760317649" STARTARROW="None" STARTINCLINATION="0;0;"/>
<node CREATED="1397466453319" ID="ID_1224803123" MODIFIED="1397466454943" TEXT="nf_conntrack_put"/>
</node>
<node CREATED="1397467313293" ID="ID_323441532" MODIFIED="1397467362038">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;nfct_reasm&#65292;&#20998;&#29255;&#25152;&#23646;&#30340;&#37325;&#32452;&#21253;
    </p>
    <p>
      &#37322;&#25918;&#23545;&#37325;&#32452;&#21253;&#30340;&#24341;&#29992;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397467373563" ID="ID_1122642132" MODIFIED="1397467374744" TEXT="nf_conntrack_put_reasm"/>
</node>
<node CREATED="1397467395091" ID="ID_915312393" MODIFIED="1397467462283">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;nf_bridge
    </p>
    <p>
      &#28165;&#38500;bridge&#29366;&#24577;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397467435962" ID="ID_1186816468" MODIFIED="1397467437109" TEXT="nf_bridge_put"/>
</node>
<node CREATED="1397467486024" ID="ID_1711738396" MODIFIED="1397467530769">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;tc_index
    </p>
    <p>
      skb-&gt;tc_verd
    </p>
    <p>
      &#28165;&#38500;QoS&#20998;&#31867;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397467722612" ID="ID_246884328" MODIFIED="1397467769500" TEXT="&#x5982;&#x679c;skb&#x80fd;&#x591f;&#x88ab;recycle&#x5219;&#x5c06;&#x5176;&#x653e;&#x5165;recycle_list&#xff0c;&#x7136;&#x540e;&#x8fd4;&#x56de;"/>
<node CREATED="1397467816154" ID="ID_1557762375" MODIFIED="1397468078822">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_release_data
    </p>
    <p>
      &#37322;&#25918;skb-&gt;head&#25351;&#21521;&#30340;data&#32531;&#20914;&#21306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397467980566" ID="ID_1404237621" MODIFIED="1397468042800" TEXT="&#x786e;&#x8ba4;data&#x7f13;&#x51b2;&#x533a;&#x6ca1;&#x6709;&#x88ab;&#x5f15;&#x7528;&#xff1a;skb-&gt;cloned&#x548c;skb_shinfo(skb)-&gt;dataref&#x5747;&#x4e3a;0"/>
<node CREATED="1397468080654" ID="ID_62278511" MODIFIED="1397645210885" TEXT="&#x82e5;&#x6b64;skb&#x540e;&#x9762;&#x8fd8;&#x6709;&#x5176;&#x5b83;&#x5206;&#x7247;&#xff0c;&#x5219;&#x6e05;&#x9664;&#x5176;&#x540e;&#x6240;&#x6709;&#x7684;&#x5206;&#x7247;">
<node CREATED="1397468158179" ID="ID_784834216" MODIFIED="1397468159401" TEXT="skb_frag_unref"/>
<node CREATED="1397468620105" ID="ID_319017428" MODIFIED="1397468621278" TEXT="skb_drop_fraglist"/>
</node>
<node CREATED="1397468601857" ID="ID_1195373515" MODIFIED="1397468604326" TEXT="&#x8c03;&#x7528;skb_shinfo(skb)-&gt;destructor_arg"/>
<node CREATED="1397468645443" ID="ID_1232745619" MODIFIED="1397468654070" TEXT="&#x91ca;&#x653e;data&#x7f13;&#x51b2;&#x533a;">
<node CREATED="1397468655022" ID="ID_1058857066" MODIFIED="1397468656042" TEXT="kfree(skb-&gt;head)"/>
</node>
</node>
<node CREATED="1397467852502" ID="ID_181979678" MODIFIED="1397467876892">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      kfree_skbmem
    </p>
    <p>
      &#37322;&#25918;struct sk_buff&#32467;&#26500;&#26412;&#36523;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1397543819638" FOLDED="true" ID="ID_1951358932" LINK="#ID_1438672901" MODIFIED="1429118912449">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38431;&#21015;&#25805;&#20316;
    </p>
    <p>
      &#19968;&#20010;skb&#38431;&#21015;&#30001;struct sk_buff_head&#34920;&#24449;
    </p>
    <p>
      &#27880;&#24847;&#36825;&#20123;&#38431;&#21015;&#25805;&#20316;&#38656;&#22312;&#33719;&#21462;struct sk_buff_head&#20013;&#30340;&#38431;&#21015;&#22238;&#26059;&#38145;&#30340;&#24773;&#20917;&#19979;&#36827;&#34892;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397543827048" ID="ID_441023358" MODIFIED="1397543933966">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_queue_head
    </p>
    <p>
      &#23558;&#19968;&#20010;skb&#28155;&#21152;&#21040;&#38431;&#21015;&#30340;&#22836;&#37096;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397543937774" ID="ID_1241310881" MODIFIED="1397543964867">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_queue_tail
    </p>
    <p>
      &#23558;&#19968;&#20010;skb&#28155;&#21152;&#21040;&#38431;&#21015;&#30340;&#23614;&#37096;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397544011765" ID="ID_1931344171" MODIFIED="1397544047957">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_dequeue
    </p>
    <p>
      &#20174;&#38431;&#21015;&#22836;&#37096;&#21462;&#36208;&#19968;&#20010;skb
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397544020205" ID="ID_978424546" MODIFIED="1397544059387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_dequeue_tail
    </p>
    <p>
      &#20174;&#38431;&#21015;&#23614;&#37096;&#21462;&#36208;&#19968;&#20010;skb
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397544096635" ID="ID_1635036687" MODIFIED="1397544117107">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_queue_purge
    </p>
    <p>
      &#37322;&#25918;&#38431;&#21015;&#20013;&#25152;&#26377;&#30340;skb
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397544227905" ID="ID_1218591262" MODIFIED="1397544264469">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_queue_walk
    </p>
    <p>
      &#36941;&#21382;&#38431;&#21015;&#20013;&#25152;&#26377;&#30340;skb
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397467697586" FOLDED="true" ID="ID_854183503" MODIFIED="1397645656426" TEXT="skb_is_recycleable">
<node CREATED="1397645375368" ID="ID_1066693024" MODIFIED="1397645399315" TEXT="&#x4e2d;&#x65ad;&#x5173;&#x95ed;&#x65f6;,&#x4e0d;&#x80fd;recycle"/>
<node CREATED="1397645375368" ID="ID_1745449613" MODIFIED="1397645487310" TEXT="&#x5982;&#x679c;&#x5305;&#x4e3a;&#x7528;&#x6237;&#x5c42;&#x53d1;&#x9001;&#x7684;&#x5305;, &#x56e0;&#x4e3a;&#x4f7f;&#x7528;&#x4e86;&#x7528;&#x6237;&#x5c42;&#x7a7a;&#x95f4;&#x7684;&#x5185;&#x5b58;,&#x6240;&#x4ee5;&#x4e0d;&#x80fd;recycle"/>
<node CREATED="1397645375368" ID="ID_468386242" MODIFIED="1397645536341" TEXT="&#x5982;&#x679c;skb&#x5305;&#x542b;&#x5185;&#x5b58;&#x5206;&#x7247;,&#x4e0d;&#x80fd;recycle"/>
<node CREATED="1397645375368" ID="ID_255217382" MODIFIED="1397645566578" TEXT="&#x53d1;&#x751f;fast clone&#x65f6;,&#x4e0d;&#x80fd;recycle"/>
<node CREATED="1397645375368" ID="ID_614413997" MODIFIED="1397645597726" TEXT="skb size&#x9519;&#x8bef;&#x65f6;,&#x4e0d;&#x80fd;recycle"/>
<node CREATED="1397645375368" ID="ID_423037049" MODIFIED="1397645622231" TEXT="skb&#x7528;&#x6237;&#x6570;&#x4e0d;&#x4e3a;1&#x65f6;,&#x4e0d;&#x80fd;recycle"/>
<node CREATED="1397645375368" ID="ID_395430128" MODIFIED="1397645655031" TEXT="&#x53d1;&#x751f;clone&#x65f6;,&#x4e0d;&#x80fd;recycle"/>
</node>
<node CREATED="1425456737456" ID="ID_543362427" MODIFIED="1425456740684" TEXT="skb_headlen(skb)">
<node CREATED="1425456742744" ID="ID_1513788620" MODIFIED="1425456921671">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21253;&#30340;&#20869;&#23481;&#21487;&#33021;&#25918;&#22312;3&#20010;&#22320;&#26041;&#65306;
    </p>
    <p>
      skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;
    </p>
    <p>
      skb_shinfo(skb)-&gt;frags[x]&#20013;
    </p>
    <p>
      skb_shinfo(skb)-&gt;frag_list&#20013;
    </p>
    <p>
      &#36825;&#37324;&#29305;&#25351;&#25918;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#30340;&#25968;&#25454;&#30340;&#38271;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1429118927675" ID="ID_958163901" MODIFIED="1429118955011" TEXT="scatter/gather&#x64cd;&#x4f5c;">
<node CREATED="1429118990282" ID="ID_1701204917" MODIFIED="1429119220499">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_fill_page_desc&#160;&#160;(skb, idx, page, offset, size)
    </p>
    <p>
      &#22635;&#20805;skb_shinfo(skb)-&gt;frags [ idx ]
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1397468936717" FOLDED="true" ID="ID_1670278662" MODIFIED="1397645743649" TEXT="skb clone">
<node CREATED="1397472365893" ID="ID_1227380139" MODIFIED="1397472425791">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_clone.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1397472470554" ID="ID_1762157451" MODIFIED="1397645681635">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24212;&#29992;&#22330;&#26223; &#65306;&#29992;&#25143;&#24819;&#35201;&#24341;&#29992;&#25968;&#25454;&#21253;&#65292;&#21487;&#33021;&#20250;&#20462;&#25913;sk_buff&#20294;&#21448;&#19981;&#20250;&#20462;&#25913;&#30495;&#27491;&#30340;data&#32531;&#20914;&#21306;&#26102;&#65292;&#21487;clone&#36825;&#20010;&#25968;&#25454;&#21253;
    </p>
    <p>
      &#21407;&#29702; &#65306;clone&#21482;&#20250;&#22797;&#21046;sk_buff&#32467;&#26500;&#65292;&#19981;&#20250;&#22797;&#21046;data&#32531;&#20914;&#21306;&#65292;clone&#30340;sk_buff&#25351;&#21521;&#30456;&#21516;&#30340;data&#32531;&#20914;&#21306;
    </p>
    <p>
      &#24212;&#29992;&#38480;&#21046; &#65306;&#19981;&#33021;&#20462;&#25913;clone&#30340;sk_buff&#25152;&#25351;&#21521;&#30340;data&#32531;&#20914;&#21306;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397528221295" FOLDED="true" ID="ID_1468801297" MODIFIED="1397645707914" TEXT="fast clone">
<node CREATED="1397529922009" ID="ID_441134273" MODIFIED="1397530183474">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb clone&#19968;&#33324;&#21457;&#29983;&#22312;&#21253;&#22788;&#29702;&#36807;&#31243;&#20013;&#65292;&#36825;&#26102;&#36827;&#34892;&#20869;&#23384;&#30340;malloc&#23545;&#24615;&#33021;&#30340;&#24433;&#21709;&#20250;&#24456;&#22823;&#65292;&#22914;&#26524;&#33021;&#39044;&#27979;&#21040;&#19968;&#20010;&#21253;&#24517;&#23450;&#20250;&#34987;clone&#65292;&#21017;&#21487;&#20197;&#39044;&#20808;&#20998;&#37197;&#19968;&#20010;cloned&#30340;sk_buff&#65292;&#36825;&#26679;&#22312;&#35843;&#29992;skb_clone&#26102;&#23601;&#21487;&#20197;&#30452;&#25509;&#36820;&#22238;&#20043;&#21069;&#20998;&#37197;&#30340;cloned&#30340;sk_buff&#65292;&#32780;&#26080;&#38656;&#36827;&#34892;&#20869;&#23384;&#30340;malloc
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397528274969" ID="ID_537697427" MODIFIED="1397530308566">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31995;&#32479;&#20013;&#26377;2&#20010;&#20851;&#20110;sk_buff&#30340;&#32531;&#23384;&#27744;&#65292;&#23427;&#20204;&#20998;&#21035;&#26159;skbuff_head_cache&#21644;skbuff_fclone_cache
    </p>
    <p>
      &#20174;&#36825;2&#20010;&#32531;&#23384;&#27744;&#20998;&#37197;&#24471;&#21040;&#30340;sk_buff&#20854;&#34892;&#20026;&#22312;skb_clone&#20989;&#25968;&#20013;&#31245;&#26377;&#19981;&#21516;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397528418840" ID="ID_1682974366" MODIFIED="1397528420082" TEXT="skbuff_head_cache">
<node CREATED="1397528446880" ID="ID_621556550" MODIFIED="1397529098813">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#20010;&#32531;&#23384;&#27744;&#30340;&#27599;&#20010;&#20803;&#32032;&#26159;&#19968;&#20010;struct sk_buff
    </p>
    <p>
      &#20174;&#36825;&#20010;&#32531;&#23384;&#27744;&#20998;&#37197;&#24471;&#21040;&#30340;skb-&gt;fclone = SKB_FCLONE_UNAVAILABLE
    </p>
  </body>
</html></richcontent>
<node CREATED="1397528672780" ID="ID_210043434" MODIFIED="1397528694902">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_s1.jpg" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1397528427300" ID="ID_813664080" MODIFIED="1397528428262" TEXT="skbuff_fclone_cache">
<node CREATED="1397528702850" ID="ID_97265348" MODIFIED="1397529241153">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#20010;&#32531;&#23384;&#27744;&#30340;&#27599;&#20010;&#20803;&#32032;&#23454;&#38469;&#19978;&#26159;&#19968;&#23545;struct sk_buff&#22806;&#21152;&#19968;&#20010;&#24341;&#29992;&#35745;&#25968;&#22120;
    </p>
    <p>
      &#20174;&#36825;&#20010;&#32531;&#23384;&#27744;&#20998;&#37197;&#24471;&#21040;&#30340;parent_skb-&gt;fclone = SKB_FCLONE_ORIG
    </p>
    <p>
      child_skb-&gt;fclone = SKB_FCLONE_UNAVAILABLE&#65292;&#24182;&#19988;fclone_ref = 1
    </p>
  </body>
</html></richcontent>
<node CREATED="1397528927320" ID="ID_1708488750" MODIFIED="1397528938782">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_s2.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1397530375786" ID="ID_1309707301" MODIFIED="1397530444640">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      parent_skb-&gt;fclone = SKB_FCLONE_ORIG
    </p>
    <p>
      &#34920;&#31034;&#27492;skb&#26159;&#34987;&#20811;&#38534;&#23545;&#35937;&#65292;&#21363;&#21407;&#22987;&#30340;skb
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397530392416" ID="ID_968073876" MODIFIED="1397530604150">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      child_skb-&gt;fclone = SKB_FCLONE_UNAVAILABLE
    </p>
    <p>
      &#34920;&#31034;&#34429;&#28982;child skb&#24050;&#32463;&#34987;&#20998;&#37197;&#20102;&#65292;&#20294;&#36824;&#26410;&#21457;&#29983;&#30495;&#27491;&#30340;clone
    </p>
    <p>
      child_skb-&gt;fclone&#23558;&#22312;skb_clone&#20989;&#25968;&#20013;&#34987;&#32622;&#20026;SKB_FCLONE_CLONE&#34920;&#31034;&#21457;&#29983;&#20102;&#30495;&#27491;&#30340;clone
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1397473005753" FOLDED="true" ID="ID_1265261275" MODIFIED="1397645738051" TEXT="skb_clone">
<node CREATED="1397473168146" ID="ID_675385267" MODIFIED="1397473187316" TEXT="&#x5f53;&#x6b64;&#x5305;&#x662f;&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x53d1;&#x9001;&#x7684;&#x5305;&#x65f6;">
<node CREATED="1397473188060" ID="ID_115833509" MODIFIED="1397473189353" TEXT="skb_copy_ubufs"/>
</node>
<node CREATED="1397530657190" ID="ID_1281875995" MODIFIED="1397530897024">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#24050;&#23545;&#27492;skb&#36827;&#34892;&#20102;fast clone&#21017;&#30452;&#25509;&#23558;child skb&#26631;&#35760;&#20026;SKB_FCLONE_CLONE&#65292;&#24182;&#36882;&#22686;fclone_ref
    </p>
    <p>
      &#33509;&#24050;&#36827;&#34892;fast clone&#21017;&#26080;&#38656;&#20877;&#20174;skb&#32531;&#23384;&#27744;&#20013;&#20998;&#37197;skb&#65292;child skb&#23601;&#26159;skb + 1&#65292;&#36825;&#26159;&#22312;__alloc_skb&#20013;&#24050;&#30830;&#23450;&#22909;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397530995242" ID="ID_67355656" MODIFIED="1397531073563" TEXT="&#x82e5;&#x672a;&#x8fdb;&#x884c;fast clone&#x5219;&#x9700;&#x4ece;skbuff_head_cache&#x7f13;&#x5b58;&#x6c60;&#x4e2d;&#x5206;&#x914d;&#x4e00;&#x4e2a;skb&#xff0c;&#xa;&#x6b64;&#x65f6;skb-&gt;fclone = SKB_FCLONE_UNAVAILABLE"/>
<node CREATED="1397531093201" ID="ID_301206357" MODIFIED="1397531203900">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __skb_clone
    </p>
    <p>
      &#23558;&#21407;&#22987;skb&#30340;&#20869;&#23481;&#22797;&#21046;&#21040;cloned skb&#20013;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397531231008" ID="ID_834561142" MODIFIED="1397531544835" TEXT="&#x9700;&#x8981;&#x7279;&#x522b;&#x5904;&#x7406;&#x7684;&#x5730;&#x65b9;">
<node CREATED="1397531305180" ID="ID_248992959" MODIFIED="1397531324542" TEXT="cloned_skb-&gt;next = cloned_skb-&gt;prev = NULL"/>
<node CREATED="1397531335571" ID="ID_616023311" MODIFIED="1397531341693" TEXT="cloned_skb-&gt;sk = NULL"/>
<node CREATED="1397531355841" ID="ID_941767378" MODIFIED="1397531421183" TEXT="cloned_skb-&gt;cloned = 1"/>
<node CREATED="1397531355841" ID="ID_1231833648" MODIFIED="1397531456143" TEXT="cloned_skb-&gt;nohdr = 0"/>
<node CREATED="1397531355841" ID="ID_1688556690" MODIFIED="1397531470143" TEXT="cloned_skb-&gt;destructor = NULL"/>
<node CREATED="1397531355841" ID="ID_1009011022" MODIFIED="1397531503617" TEXT="cloned_skb-&gt;users = 1"/>
</node>
<node CREATED="1397531564833" ID="ID_173656865" MODIFIED="1397531585385" TEXT="&#x9012;&#x589e;data&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5f15;&#x7528;&#x8ba1;&#x6570; &#xff1a; skb_shinfo(skb)-&gt;dataref"/>
</node>
<node CREATED="1397531372041" ID="ID_998137306" MODIFIED="1397532234664">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#21407;&#22987;skb&#21644;cloned skb&#30340;cloned&#26631;&#24535;&#20301;&#22343;&#34987;&#32622;&#20026;1
    </p>
    <p>
      cloned_skb-&gt;users = 1
    </p>
    <p>
      &#36882;&#22686;&#20102;data&#32531;&#20914;&#21306;&#30340;&#24341;&#29992;&#35745;&#25968; &#65306; skb_shinfo(skb)-&gt;dataref
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397532401456" ID="ID_1301584273" MODIFIED="1397532472818" TEXT="skb_cloned &#xff1a;&#x68c0;&#x6d4b;skb&#x662f;&#x5426;&#x5df2;&#x88ab;clone&#x6216;&#x662f;clone&#x5f97;&#x5230;&#x7684;"/>
</node>
<node CREATED="1397468945098" FOLDED="true" ID="ID_837036709" MODIFIED="1397645776616" TEXT="skb copy">
<node CREATED="1397472470554" ID="ID_1854328597" MODIFIED="1397543485486">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24212;&#29992;&#22330;&#26223; &#65306;&#29992;&#25143;&#24819;&#35201;&#24341;&#29992;&#25968;&#25454;&#21253;&#65292;&#19988;&#21487;&#33021;&#20250;&#20462;&#25913;sk_buff&#21644;&#30495;&#27491;&#30340;data&#32531;&#20914;&#21306;&#26102;&#65292;&#24517;&#39035;copy&#36825;&#20010;&#25968;&#25454;&#21253;
    </p>
    <p>
      &#21407;&#29702; &#65306;clone&#21482;&#20250;&#22797;&#21046;sk_buff&#32467;&#26500;&#65292;&#19981;&#20250;&#22797;&#21046;data&#32531;&#20914;&#21306;&#65292;&#20294;copy&#20250;&#21516;&#26102;&#22797;&#21046;sk_buff&#21644;data&#32531;&#20914;&#21306;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397543321354" FOLDED="true" ID="ID_798516614" MODIFIED="1397645769639">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pskb_copy
    </p>
    <p>
      &#20165;copy&#32467;&#26500;&#20307;struct sk_buff&#21644;&#20854;&#25351;&#21521;&#30340;data&#32531;&#20914;&#21306;&#65292;&#20294;&#19981;copy&#20854;&#19979;&#25346;&#30340;&#20998;&#29255;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397543339914" ID="ID_604475349" MODIFIED="1397543347906">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pskb_copy.jpg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1397543329834" FOLDED="true" ID="ID_1723034667" MODIFIED="1397645771848">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_copy
    </p>
    <p>
      copy&#32467;&#26500;&#20307;struct sk_buff&#21644;&#20854;&#25351;&#21521;&#30340;data&#32531;&#20914;&#21306;&#65292;&#21516;&#26102;copy&#20854;&#19979;&#25346;&#30340;&#20998;&#29255;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397543350854" ID="ID_1426546038" MODIFIED="1397543359216">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_copy.jpg" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1397468952863" FOLDED="true" ID="ID_1726879627" MODIFIED="1453492613541" TEXT="skb frag/defrag">
<node CREATED="1397640819675" ID="ID_937987130" MODIFIED="1425715861121">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/skb_struct_2.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1425618285728" ID="ID_1644901918" MODIFIED="1425618346992">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;head&#19982;skb-&gt;data&#20043;&#38388;&#30340;&#20869;&#23481;&#31216;&#20026;head room
    </p>
    <p>
      skb-&gt;tail&#19982;skb-&gt;end&#20043;&#38388;&#30340;&#20869;&#23481;&#31216;&#20026;tail room
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425109007965" ID="ID_1300372047" MODIFIED="1425849990295">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#25351;&#21521;&#30340;&#25968;&#25454;&#21253;&#30340;&#20869;&#23481;&#21487;&#20197;&#20998;&#20026;3&#37096;&#20998;&#65306;
    </p>
    <p>
      
    </p>
    <p>
      skb-&gt;len&#26159;&#25351;&#36825;3&#37096;&#20998;&#30340;&#24635;&#38271;&#24230;&#65292;&#32780;skb-&gt;data_len&#26159;&#25351;
    </p>
    <p>
      skb_shinfo(skb)-&gt;frags[x]&#21644;skb_shinfo(skb)-&gt;frag_list
    </p>
    <p>
      &#20013;&#20869;&#23481;&#30340;&#38271;&#24230;&#20043;&#21644;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;3&#37096;&#20998;&#20197;&#20197;&#19979;&#39034;&#24207;&#32452;&#25104;&#19968;&#20010;&#23436;&#25972;&#30340;&#21253;&#65306;
    </p>
    <p>
      &#39318;&#20808;&#26159;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#30340;head&#37096;&#20998;
    </p>
    <p>
      &#20854;&#27425;&#26159;skb_shinfo(skb)-&gt;frags[x]&#20013;&#30340;&#20869;&#23384;&#20998;&#29255;&#37096;&#20998;
    </p>
    <p>
      &#26368;&#21518;&#26159;skb_shinfo(skb)-&gt;frag_list&#20013;&#30340;&#21253;&#20998;&#29255;&#37096;&#20998;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19981;&#36807;skb_shinfo(skb)-&gt;frags[x]&#21644;skb_shinfo(skb)-&gt;frag_list
    </p>
    <p>
      &#19968;&#33324;&#19981;&#21516;&#26102;&#20351;&#29992;&#65292;&#25105;&#20204;&#24635;&#26159;&#24212;&#35813;&#20248;&#20808;&#20351;&#29992;skb_shinfo(skb)-&gt;frags[x]&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425109062476" ID="ID_1619723048" MODIFIED="1425109198840" TEXT="&#x4e00;&#x90e8;&#x5206;&#x662f;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x90e8;&#x5206;&#xff0c;&#x5176;&#x957f;&#x5ea6;&#x7b49;&#x4e8e;skb-&gt;len - skb-&gt;data_len, &#xa;&#x8fd9;&#x4e00;&#x90e8;&#x5206;&#x5df2;&#x7ecf;&#x6620;&#x5c04;&#x5230;&#x5185;&#x6838;&#x7684;&#x865a;&#x62df;&#x5730;&#x5740;&#x7a7a;&#x95f4;&#xff0c;&#x56e0;&#x6b64;&#x5185;&#x6838;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;"/>
<node CREATED="1425109211643" ID="ID_142648941" MODIFIED="1425715992089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20108;&#37096;&#20998;&#26159;skb_shinfo(skb)-&gt;frags[x]&#25351;&#21521;&#30340;&#20869;&#23481;&#65292;&#20854;&#38271;&#24230;&#31561;&#20110;skb_shinfo(skb)-&gt;frags[x].size
    </p>
    <p>
      &#36825;&#19968;&#37096;&#20998;&#26159;&#29289;&#29702;&#22320;&#22336;&#31354;&#38388;&#65292;&#20869;&#26680;&#19981;&#33021;&#30452;&#25509;&#35775;&#38382;&#65292;&#38656;&#35843;&#29992;void *kmap_atomic(struct page *page)&#26144;&#23556;&#21040;&#20869;&#26680;&#34394;&#25311;&#22320;&#22336;&#31354;&#38388;&#21518;&#25165;&#33021;&#35775;&#38382;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425716007728" ID="ID_1694412884" MODIFIED="1425850053044">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#19977;&#37096;&#20998;&#26159;skb_shinfo(skb)-&gt;frag_list&#25351;&#21521;&#30340;skb&#38142;&#34920;&#65292;&#20854;&#38271;&#24230;&#30001;&#38142;&#34920;&#20013;&#21508;&#20010;skb-&gt;len&#25351;&#20986;
    </p>
    <p>
      <font color="#ff0000">&#27880;&#24847;&#65292;&#38142;&#34920;&#20013;&#30340;&#27599;&#19968;&#20010;skb&#20063;&#21487;&#20197;&#31867;&#20284;&#30340;&#30001;&#36825;&#19977;&#37096;&#20998;&#20869;&#23481;&#32452;&#25104;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1397552464241" FOLDED="true" ID="ID_1831101817" MODIFIED="1429118671710" TEXT="&#x5982;&#x4f55;&#x8bc6;&#x522b;&#x5305;&#x7684;&#x5206;&#x7247;">
<node CREATED="1397553182274" ID="ID_771433905" MODIFIED="1397553223853" TEXT="&#x63a5;&#x6536;&#x7aef;&#x4f7f;&#x7528;(src ip, dst ip, ip id)&#x6765;&#x8bc6;&#x522b;&#x67d0;&#x4e2a;&#x5206;&#x7247;&#x662f;&#x5426;&#x5c5e;&#x4e8e;&#x67d0;&#x4e2a;&#x5305;"/>
<node CREATED="1397553233521" ID="ID_443033616" MODIFIED="1397553264503" TEXT="ipv4 NAT&#x7684;&#x5c40;&#x9650;">
<node CREATED="1397553338628" ID="ID_783079287" MODIFIED="1397553351980">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/frag_defrag_nat.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1397553383148" ID="ID_1329586199" MODIFIED="1397553548867" TEXT="&#x5f53;NAT&#x8def;&#x7531;&#x5668;LAN&#x4fa7;2&#x4e2a;PC&#x6070;&#x597d;&#x8bbf;&#x95ee;&#x540c;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x4e14;&#x6b63;&#x597d;&#x4f7f;&#x7528;&#x76f8;&#x540c;&#x7684;IP ID&#x65f6;&#xff0c;&#x53d1;&#x9001;&#x5230;&#x670d;&#x52a1;&#x5668;&#x7684;2&#x4e2a;&#x5305;&#x7684;&#x6240;&#x6709;&#x5206;&#x7247;&#x90fd;&#x6709;&#x76f8;&#x540c;&#x7684;(src ip, dst ip, ip id)&#xff0c;&#x8fd9;&#x6837;&#x670d;&#x52a1;&#x5668;&#x5c06;&#x65e0;&#x6cd5;&#x533a;&#x5206;&#x8fd9;2&#x4e2a;&#x5305;&#xff0c;&#x7ed3;&#x679c;&#x662f;&#x8981;&#x4e48;&#x4e22;&#x6389;&#x8fd9;2&#x4e2a;&#x5305;&#xff0c;&#x8981;&#x4e48;&#x4ea7;&#x751f;&#x4e0d;&#x53ef;&#x9884;&#x8ba1;&#x7684;&#x9519;&#x8bef;"/>
</node>
<node CREATED="1397553242361" ID="ID_269084706" MODIFIED="1397553253263" TEXT="ipv6&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x6848;">
<node CREATED="1397553570645" ID="ID_1648245545" MODIFIED="1397553605579" TEXT="&#x53ea;&#x5141;&#x8bb8;&#x5728;&#x6e90;&#x5934;&#x4e3b;&#x673a;&#x4e0a;&#x8fdb;&#x884c;IP&#x5206;&#x7247;"/>
</node>
</node>
<node CREATED="1425624187676" FOLDED="true" ID="ID_675463136" MODIFIED="1429747154485" TEXT="&#x5206;&#x7247;">
<node CREATED="1397617741322" ID="ID_771616308" MODIFIED="1429746956979" TEXT="&#x4f55;&#x65f6;&#x5206;&#x7247;">
<node CREATED="1429746013847" ID="ID_1825582202" MODIFIED="1429746046655" TEXT="&#x5305;&#x5728;&#x79bb;&#x5f00;netfilter&#x6846;&#x67b6;&#x4e4b;&#x540e;&#x4f1a;&#x5224;&#x65ad;&#x662f;&#x5426;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x5206;&#x7247;"/>
<node CREATED="1429746107012" ID="ID_1458994533" MODIFIED="1429746122068" TEXT="ip_output()">
<node CREATED="1429746123039" ID="ID_1466185934" MODIFIED="1429746154224" TEXT="netfilter POSTROUTING hook"/>
<node CREATED="1429746157806" ID="ID_234196281" MODIFIED="1429746171931" TEXT="ip_finish_output()">
<node CREATED="1429746185049" ID="ID_1258809616" MODIFIED="1429746269764">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21253;&#38271;&#22823;&#20110;&#20986;&#21475;MTU&#65292;&#21017;&#36827;&#34892;&#21253;&#20998;&#29255;&#65306;ip_fragment()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429746276079" FOLDED="true" ID="ID_791902736" MODIFIED="1429746929850">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#38656;&#35201;&#20998;&#29255;&#65292;&#21017;&#23545;&#27599;&#20010;&#20998;&#29255;&#21518;&#30340;&#29255;&#27573;&#21253;&#35843;&#29992;ip_finish_output2()
    </p>
    <p>
      &#22914;&#26524;&#19981;&#38656;&#35201;&#20998;&#29255;&#65292;&#21017;&#23545;&#21253;&#35843;&#29992;ip_finish_output2()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429746403546" ID="ID_1128996922" MODIFIED="1429746404530" TEXT="ip_finish_output2()">
<node CREATED="1429746470298" ID="ID_656688046" MODIFIED="1429746498402" TEXT="&#x6839;&#x636e;nexthop&#x627e;&#x5230;&#x5176;&#x5bf9;&#x5e94;&#x7684;neighbour"/>
<node CREATED="1429746563424" ID="ID_283948827" MODIFIED="1429746627778">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;&#37051;&#23621;&#23376;&#31995;&#32479;&#21457;&#36865;&#21253;&#65306;dst_neigh_output()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429746638586" ID="ID_1452315059" MODIFIED="1429746791480" TEXT="&#x5982;&#x679c;&#x90bb;&#x5c45;&#x662f;connected&#x72b6;&#x6001;&#xff0c;&#x4e14;L2&#x5934;&#x90e8;&#x6709;&#x7f13;&#x5b58;&#xff0c;&#x5219;&#x65e0;&#x9700;&#x89e3;&#x6790;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#xff0c;&#x76f4;&#x63a5;&#x5c06;&#x7f13;&#x5b58;&#x7684;L2&#x5934;&#x90e8;&#x590d;&#x5236;&#x5230;&#x5305;&#x4e2d;&#xa;neigh_hh_output()">
<node CREATED="1429746805479" ID="ID_1561609854" MODIFIED="1429746890265" TEXT="&#x5c06;&#x7f13;&#x5b58;&#x7684;L2&#x5934;&#x90e8;(neighbour -&gt; hh -&gt; hh_data)&#x590d;&#x5236;&#x5230;&#x5305;&#x4e2d;"/>
<node CREATED="1429746906095" ID="ID_100934455" MODIFIED="1429746914668" TEXT="dev_queue_xmit()"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1425624195449" FOLDED="true" ID="ID_1064016235" MODIFIED="1429225920210" TEXT="&#x91cd;&#x7ec4;">
<node CREATED="1397617752821" ID="ID_252795533" MODIFIED="1425712687310" TEXT="&#x4f55;&#x65f6;&#x91cd;&#x7ec4;">
<node CREATED="1397618501060" ID="ID_1041710755" MODIFIED="1397618666172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21253;&#22312;&#36827;&#20837;netfilter&#26694;&#26550;&#20043;&#21069;&#20250;&#36827;&#34892;&#37325;&#32452;
    </p>
    <p>
      netfilter&#20250;&#22312;prerouting&#21644;local out&#36825;2&#20010;&#28857;&#27880;&#20876;&#19968;&#20010;&#26368;&#39640;&#20248;&#20808;&#32423;&#30340;hook
    </p>
    <p>
      ipv4_conntrack_defrag
    </p>
  </body>
</html></richcontent>
<node CREATED="1397618691980" ID="ID_790295105" MODIFIED="1397618693242" TEXT="nf_ct_ipv4_gather_frags">
<node CREATED="1397618704500" ID="ID_945070540" LINK="#ID_1593540337" MODIFIED="1397618718652" TEXT="ip_defrag"/>
</node>
<node CREATED="1425712731385" ID="ID_168819852" MODIFIED="1425712836396" TEXT="&#x5982;&#x679c;nf_ct_ipv4_gather_frags&#x8fd4;&#x56de;&#x975e;0&#x503c;&#xff0c;&#x8868;&#x793a;&#x5206;&#x7247;&#x8fd8;&#x6ca1;&#x6709;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#xff0c;&#x5206;&#x7247;&#x5df2;&#x7ecf;&#x88ab;&#x653e;&#x5165;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;&#x4e86;&#xff0c;&#x56e0;&#x6b64;&#x672c;&#x51fd;&#x6570;&#x8fd4;&#x56de;NF_STOLEN&#xff0c;&#x540e;&#x7eed;&#x4e0d;&#x518d;&#x5904;&#x7406;&#x6b64;&#x5305;"/>
<node CREATED="1425712731385" ID="ID_483486332" MODIFIED="1425712902012" TEXT="&#x5982;&#x679c;nf_ct_ipv4_gather_frags&#x8fd4;&#x56de;0&#x503c;&#xff0c;&#x8868;&#x793a;&#x5206;&#x7247;&#x5df2;&#x7ecf;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#xff0c;&#x56e0;&#x6b64;&#x672c;&#x51fd;&#x6570;&#x8fd4;&#x56de;NF_ACCEPT&#xff0c;&#x540e;&#x7eed;&#x7ee7;&#x7eed;&#x5904;&#x7406;&#x91cd;&#x7ec4;&#x540e;&#x7684;&#x5305;&#x3002;"/>
</node>
</node>
<node CREATED="1425624221156" FOLDED="true" ID="ID_468667016" MODIFIED="1429225918132" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1425708611877" ID="ID_801669450" MODIFIED="1425708732457">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_defrag.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425715082889" ID="ID_1631133195" MODIFIED="1425715095257">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/skb_defrag_2.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" ID="ID_562824598" MODIFIED="1429224975182" TEXT=" struct netns_frags">
<node CREATED="1425624714923" ID="ID_1331498383" MODIFIED="1425627124197">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;int nqueues
    </p>
    <p>
      &#19979;&#38754;&#30340;lru_list&#38142;&#34920;&#26377;&#22810;&#23569;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" ID="ID_862662091" MODIFIED="1425626985916">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct list_head lru_list
    </p>
    <p>
      &#20998;&#29255;&#21253;&#38431;&#21015;&#38142;&#34920;&#34920;&#65292;&#27599;&#19968;&#20010;entry&#26159;&#19968;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;struct inet_frag_queue&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" spinlock_t lru_lock"/>
<node CREATED="1425624714923" ID="ID_82233155" MODIFIED="1425626333191" TEXT=" struct percpu_counter mem &#xff1a;&#x7528;&#x4e8e;&#x7edf;&#x8ba1;&#x5206;&#x7247;&#x91cd;&#x7ec4;&#x6d88;&#x8017;&#x4e86;&#x591a;&#x5c11;&#x5185;&#x5b58;"/>
<node CREATED="1425624714923" ID="ID_1817134304" MODIFIED="1425626195000" TEXT=" int timeout &#xff1a;&#x5982;&#x679c;&#x5206;&#x7247;&#x8d85;&#x8fc7;&#x8fd9;&#x4e2a;&#x65f6;&#x95f4;&#x8fd8;&#x6ca1;&#x6709;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#xff0c;&#x5219;&#x6e05;&#x9664;&#x5b83;&#x4eec;"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" int high_thresh"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" int low_thresh"/>
</node>
<node CREATED="1425624714923" FOLDED="true" ID="ID_1100250638" MODIFIED="1425708607891" TEXT="struct inet_frags">
<node CREATED="1425624714923" ID="ID_1055972958" MODIFIED="1425626783151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct inet_frag_bucket hash[INETFRAGS_HASHSZ]
    </p>
    <p>
      &#20998;&#29255;&#21253;&#38431;&#21015;hash&#34920;&#65292;&#27599;&#19968;&#20010;entry&#26159;&#19968;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;struct inet_frag_queue&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" ID="ID_155211567" MODIFIED="1425626710301" TEXT=" rwlock_t lock"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" int secret_interval"/>
<node CREATED="1425624714923" ID="ID_572960481" MODIFIED="1425624714923" TEXT=" struct timer_list secret_timer"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" u32 rnd"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" int qsize"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" unsigned int (*hashfn)(struct inet_frag_queue *)"/>
<node CREATED="1425624714923" ID="ID_793575647" MODIFIED="1425708577866" TEXT=" bool (*match)(struct inet_frag_queue *q, void *arg) &#xff1a;&#x7528;&#x4e8e;&#x5339;&#x914d;&#x5305;&#x548c;&#x67d0;&#x4e2a;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;"/>
<node CREATED="1425624714923" ID="ID_78659058" MODIFIED="1425624714923" TEXT=" void (*constructor)(struct inet_frag_queue *q, void *arg)"/>
<node CREATED="1425624714923" ID="ID_815570587" MODIFIED="1425624714923" TEXT=" void (*destructor)(struct inet_frag_queue *)"/>
<node CREATED="1425624714923" ID="ID_967804001" MODIFIED="1425624714923" TEXT=" void (*skb_free)(struct sk_buff *)"/>
<node CREATED="1425624714923" ID="ID_170383169" MODIFIED="1425624714923" TEXT=" void (*frag_expire)(unsigned long data)"/>
</node>
<node CREATED="1425624263954" FOLDED="true" ID="ID_1037750891" MODIFIED="1425710520093">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct ipq
    </p>
    <p>
      incomplete packet queue, &#20998;&#29255;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425624714923" FOLDED="true" ID="ID_712420958" MODIFIED="1425710518390" TEXT=" struct inet_frag_queue q">
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" spinlock_t lock"/>
<node CREATED="1425624714923" ID="ID_784506082" MODIFIED="1425626089237">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct timer_list timer
    </p>
    <p>
      &#20026;&#36991;&#20813;&#23384;&#20648;&#26410;&#37325;&#32452;&#30340;&#20998;&#29255;&#28040;&#32791;&#36807;&#22810;&#30340;&#20869;&#23384;&#65292;&#20998;&#29255;&#21253;&#38431;&#21015;&#22914;&#26524;&#36229;&#36807;&#19968;&#23450;&#26102;&#38388;&#36824;&#27809;&#26377;&#23436;&#25104;&#37325;&#32452;&#65292;&#21017;&#28165;&#38500;&#36825;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425626099024" ID="ID_1953068369" LINK="#ID_1817134304" MODIFIED="1425626150430" TEXT="&#x5b9a;&#x65f6;&#x5668;&#x7684;&#x8d85;&#x65f6;&#x65f6;&#x95f4;&#x662f;&#x53ef;&#x914d;&#x7f6e;&#x7684;&#xff0c;&#x89c1; struct netns_frags-&gt;timeout"/>
</node>
<node CREATED="1425624714923" ID="ID_173846442" MODIFIED="1425627043493">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct list_head lru_list &#65306;&#29992;&#20110;&#23558;&#33258;&#24049;&#38142;&#20837; struct netns_frags *nf-&gt;lru_list.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" ID="ID_1598370815" MODIFIED="1425626683034">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct hlist_node list &#65306;&#29992;&#20110;&#23558;&#33258;&#24049;&#38142;&#20837;hash&#34920;struct inet_frags *f-&gt;hash&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" ID="ID_1406021135" MODIFIED="1425624714923" TEXT=" atomic_t refcnt"/>
<node CREATED="1425624714923" ID="ID_1331714164" MODIFIED="1425632245637" TEXT=" struct sk_buff *fragments &#xff1a;&#x5206;&#x7247;&#x961f;&#x5217;&#x5934;&#x6307;&#x9488;"/>
<node CREATED="1425624714923" ID="ID_1306665855" MODIFIED="1425632263219" TEXT=" struct sk_buff *fragments_tail &#xff1a;&#x5206;&#x7247;&#x961f;&#x5217;&#x5c3e;&#x6307;&#x9488;"/>
<node CREATED="1425624714923" ID="ID_1985592324" MODIFIED="1425632796065" TEXT=" ktime_t stamp &#xff1a;&#x4e0a;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x7684;&#x63a5;&#x6536;&#x65f6;&#x95f4;"/>
<node CREATED="1425624714923" ID="ID_604935427" MODIFIED="1425710434965" TEXT=" int len &#xff1a;&#x504f;&#x79fb;&#x503c;&#x6700;&#x5927;&#x7684;&#x5206;&#x7247;&#x7684;&#x7ed3;&#x675f;&#x4f4d;&#x7f6e;">
<node CREATED="1425710480054" ID="ID_117528254" MODIFIED="1425710497985" TEXT="&#x6ce8;&#x610f;&#x8fd9;&#x4e2a;&#x503c;&#x53ef;&#x80fd;&#x5927;&#x4e8e;&#x7b49;&#x4e8e;&#x6240;&#x6709;&#x5df2;&#x7ecf;&#x6536;&#x5230;&#x7684;&#x5206;&#x7247;&#x7684;&#x603b;&#x957f;&#x5ea6;"/>
</node>
<node CREATED="1425624714923" ID="ID_954588155" MODIFIED="1425710333650" TEXT=" int meat &#xff1a;&#x6240;&#x6709;&#x5df2;&#x7ecf;&#x6536;&#x5230;&#x7684;&#x5206;&#x7247;&#x7684;&#x603b;&#x957f;&#x5ea6;"/>
<node CREATED="1425624714923" ID="ID_1430949780" MODIFIED="1425624714923" TEXT=" __u8 last_in">
<node CREATED="1425628286074" ID="ID_1714796815" MODIFIED="1425628398778">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      INET_FRAG_COMPLETE &#65306;&#37325;&#32452;&#24050;&#32463;&#23436;&#25104;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425628295674" ID="ID_250287585" MODIFIED="1425628357174">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      INET_FRAG_FIRST_IN &#65306;&#31532;&#19968;&#20010;&#21253;&#24050;&#32463;&#36827;&#20837;&#20998;&#29255;&#21253;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425628304595" ID="ID_202737469" MODIFIED="1425628381308">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      INET_FRAG_LAST_IN &#65306;&#26368;&#21518;&#19968;&#20010;&#21253;&#24050;&#32463;&#36827;&#20837;&#20998;&#29255;&#21253;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425624714923" ID="ID_707075388" MODIFIED="1425632880541" TEXT=" u16 max_size &#xff1a;&#x6700;&#x957f;&#x7684;&#x5206;&#x7247;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1425624754207" ID="ID_1973300451" LINK="#ID_562824598" MODIFIED="1425624767278" TEXT=" struct netns_frags *net"/>
</node>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" u32 user"/>
<node CREATED="1425624714923" ID="ID_825035052" MODIFIED="1425625057918" TEXT=" __be32 saddr &#xff1a;&#x6e90;IP"/>
<node CREATED="1425624714923" ID="ID_155436432" MODIFIED="1425625072769" TEXT=" __be32 daddr &#xff1a;&#x76ee;&#x7684;IP"/>
<node CREATED="1425624714923" ID="ID_1567693445" MODIFIED="1425625094987" TEXT=" __be16 id : IP&#x5305;&#x5e8f;&#x5217;&#x53f7;"/>
<node CREATED="1425624714923" ID="ID_1422677904" MODIFIED="1425625111798" TEXT=" u8 protocol &#xff1a;L4&#x534f;&#x8bae;&#x7c7b;&#x578b;"/>
<node CREATED="1425624714923" MODIFIED="1425624714923" TEXT=" u8 ecn"/>
<node CREATED="1425624714923" ID="ID_598036198" MODIFIED="1425625126110" TEXT=" int iif &#xff1a;&#x5165;&#x63a5;&#x53e3;"/>
<node CREATED="1425624714923" ID="ID_1525672493" MODIFIED="1425630016715">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;unsigned int rid
    </p>
    <p>
      &#27599;&#27425;&#25910;&#21040;struct inet_peer *peer&#21457;&#36807;&#26469;&#30340;&#21253;&#65292;struct inet_peer *peer-&gt;rid&#37117;&#20250;&#36882;&#22686;&#12290;
    </p>
    <p>
      &#36825;&#37324;&#30340;ipq-&gt;rid&#35760;&#24405;&#36825;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;&#19978;&#27425;&#25910;&#21040;&#20998;&#29255;&#26102;&#30340;struct inet_peer *peer-&gt;rid&#12290;
    </p>
    <p>
      &#24403;&#19979;&#27425;&#25910;&#21040;&#36825;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;&#30340;&#20998;&#29255;&#26102;&#65292;&#27604;&#36739;&#24403;&#21069;&#30340;rid&#21644;&#19978;&#27425;&#30340;rid&#65292;&#22914;&#26524;2&#32773;&#24046;&#36317;&#22826;&#22823;&#65292;&#34920;&#31034;&#20998;&#29255;&#20043;&#38388;&#30340;&#26102;&#38388;&#38388;&#38548;&#22826;&#38271;&#65292;&#19981;&#33021;&#20877;&#37325;&#32452;&#20102;&#65292;&#24517;&#39035;&#20002;&#25481;&#36825;&#20010;&#20998;&#29255;&#21253;&#65292;&#24182;&#19988;&#28165;&#31354;&#36825;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425624714923" ID="ID_1453362013" MODIFIED="1425628884240">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct inet_peer *peer &#65306;&#21457;&#36865;&#20998;&#29255;&#21253;&#30340;&#32593;&#32476;&#33410;&#28857;
    </p>
    <p>
      &#27880;&#24847;,&#19968;&#20010;&#20998;&#29255;&#21253;&#38431;&#21015;&#37324;&#30340;&#25152;&#26377;&#20998;&#29255;&#37117;&#26159;&#30001;&#21516;&#19968;&#20010;&#32593;&#32476;&#33410;&#28857;&#21457;&#36865;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425631681837" ID="ID_1541875377" MODIFIED="1425631683713" TEXT="(struct ipfrag_skb_cb *)((skb)-&gt;cb)">
<node CREATED="1425631703422" ID="ID_1071088863" MODIFIED="1425631717595" TEXT="struct inet_skb_parm  h">
<node CREATED="1425631809742" ID="ID_735473321" MODIFIED="1425631816642" TEXT="struct ip_options  opt"/>
<node CREATED="1425631830746" ID="ID_388367130" MODIFIED="1425631834992" TEXT="unsigned char  flags"/>
<node CREATED="1425631846909" ID="ID_114996638" MODIFIED="1425631853049" TEXT="u16  frag_max_size"/>
</node>
<node CREATED="1425631727344" ID="ID_1113891919" MODIFIED="1425631788540" TEXT="int  offset &#xff1a;&#x8be5;&#x5206;&#x7247;&#x5305;&#x5728;&#x539f;&#x5305;&#x4e2d;&#x7684;&#x504f;&#x79fb;"/>
</node>
</node>
<node CREATED="1397618709530" ID="ID_1593540337" MODIFIED="1397618710572" TEXT="ip_defrag">
<node CREATED="1425625180766" FOLDED="true" ID="ID_884525018" MODIFIED="1425713927999">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26597;&#25214;&#26412;&#20998;&#29255;&#21253;&#25152;&#23646;&#30340;&#20998;&#29255;&#21253;&#38431;&#21015;struct ipq&#26159;&#21542;&#24050;&#32463;&#23384;&#22312;&#65311;ip_find()
    </p>
    <p>
      &#27880;&#24847;&#65292;&#33509;&#26412;&#20998;&#29255;&#21253;&#25152;&#23646;&#30340;&#20998;&#29255;&#21253;&#38431;&#21015;&#19981;&#23384;&#22312;&#65292;&#22312;&#36825;&#20010;&#20989;&#25968;&#20013;&#20063;&#20250;&#21019;&#24314;&#19968;&#20010;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425625480452" ID="ID_84190778" MODIFIED="1425625670992" TEXT="&#x7528;IP&#x5934;&#x90e8;&#x4e2d;&#x7684;id, saddr, daddr, protocol&#x505a;hash&#xff0c;&#x7136;&#x540e;&#x5728;hash&#x8868;struct inet_frags *f-&gt;hash&#x4e2d;&#x67e5;&#x627e;&#x5bf9;&#x5e94;&#x7684;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;&#x3002;inet_frag_find()">
<node CREATED="1425625744563" ID="ID_1424471041" MODIFIED="1425626442939">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#25214;&#21040;&#20102;&#21017;&#36820;&#22238;&#20998;&#29255;&#21253;&#38431;&#21015;&#65292;&#22914;&#26524;&#25214;&#19981;&#21040;&#21017;&#21019;&#24314;&#19968;&#20010;
    </p>
    <p>
      inet_frag_create()
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425625336828" FOLDED="true" ID="ID_1626577586" MODIFIED="1425716997856" TEXT="&#x5c06;&#x672c;&#x5206;&#x7247;&#x5305;&#x653e;&#x5165;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;&#xff0c;&#x5982;&#x679c;&#x662f;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5305;&#x5219;&#x91cd;&#x7ec4;&#x5b83;&#x3002;ip_frag_queue()">
<node CREATED="1425630025759" ID="ID_1387913701" MODIFIED="1425630104921">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20998;&#29255;&#21253;&#20043;&#38388;&#26102;&#38388;&#38388;&#38548;&#22826;&#38271;&#65292;&#21017;&#20002;&#25481;&#36825;&#20010;&#20998;&#29255;&#21253;&#65292;&#24182;&#19988;&#28165;&#31354;&#20854;&#25152;&#22312;&#30340;&#20998;&#29255;&#21253;&#38431;&#21015;&#12290;
    </p>
    <p>
      ip_frag_reinit()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425631927429" ID="ID_1050745950" MODIFIED="1425631945282" TEXT="&#x68c0;&#x67e5;&#x65b0;&#x5206;&#x7247;&#x7684;&#x504f;&#x79fb;&#x503c;&#x662f;&#x5426;&#x5408;&#x6cd5;"/>
<node CREATED="1425631946100" ID="ID_872293913" MODIFIED="1425631958960" TEXT="&#x66f4;&#x65b0;qp-&gt;q.last_in&#x548c;qp-&gt;q.len"/>
<node CREATED="1425632006716" ID="ID_1656510317" MODIFIED="1425632018003" TEXT="&#x8df3;&#x8fc7;IP&#x5934;&#x90e8;"/>
<node CREATED="1425632179103" ID="ID_589146631" MODIFIED="1425632221999" TEXT="&#x4ee5;&#x504f;&#x79fb;&#x4f4d;&#x7f6e;&#x4e3a;&#x5e8f;&#xff0c;&#x5c06;&#x5206;&#x7247;&#x5305;&#x63d2;&#x5165;&#x5230;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;&#x4e2d;">
<node CREATED="1425632379398" ID="ID_1854956683" MODIFIED="1425632702408">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21069;&#21518;&#20004;&#20010;&#20998;&#29255;&#26377;&#37325;&#21472;&#30340;&#37096;&#20998;&#65292;&#21017;&#23558;&#37325;&#21472;&#37096;&#20998;&#20174;&#21518;&#19968;&#20010;&#20998;&#29255;&#20013;&#21024;&#38500;
    </p>
    <p>
      pskb_pull(next_skb, overlap_len)
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#31181;&#26497;&#31471;&#24773;&#20917;&#26159;&#37325;&#21472;&#37096;&#20998;&#23436;&#20840;&#35206;&#30422;&#20102;&#21518;&#19968;&#20010;&#20998;&#29255;&#25110;&#21518;&#20960;&#20010;&#20998;&#29255;&#65292;&#21017;&#23436;&#20840;&#34987;&#35206;&#30422;&#30340;&#20998;&#29255;&#37117;&#38656;&#35201;&#34987;&#21024;&#38500;&#21644;&#37322;&#25918;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425632374665" ID="ID_391325632" LINK="#ID_1631133195" MODIFIED="1425715129282" TEXT="&#x5982;&#x679c;&#x7b2c;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x548c;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x90fd;&#x8fdb;&#x6765;&#x4e86;&#xff0c;&#x4e14;&#x5b9e;&#x9645;&#x6536;&#x5230;&#x7684;&#x5206;&#x7247;&#x7684;&#x603b;&#x957f;&#x5ea6;(qp-&gt;q.meat)&#x7b49;&#x4e8e;&#x504f;&#x79fb;&#x503c;&#x6700;&#x5927;&#x7684;&#x5206;&#x7247;&#x7684;&#x7ed3;&#x675f;&#x4f4d;&#x7f6e;(qp-&gt;q.len)&#x5219;&#x8fdb;&#x884c;&#x91cd;&#x7ec4;&#xff0c;&#x91cd;&#x7ec4;&#x4e4b;&#x524d;&#x5148;&#x6e05;&#x7a7a;&#x5f53;&#x524d;&#x5206;&#x7247;&#x5305;&#x6240;&#x9009;&#x62e9;&#x7684;&#x8def;&#x7531;skb-&gt;_skb_refdst&#xff0c;&#x91cd;&#x7ec4;&#x5b8c;&#x540e;&#x6062;&#x590d;&#xa;ip_frag_reasm()&#xa;&#xa;&#x6ce8;&#x610f;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x8fdb;&#x6765;&#x7684;&#x5206;&#x7247;&#x7684;skb&#x6307;&#x5411;&#x4e86;&#x91cd;&#x7ec4;&#x540e;&#x7684;&#x5b8c;&#x6574;&#x5305;">
<node CREATED="1425712044782" ID="ID_481828894" MODIFIED="1425712199205" TEXT="&#x5c06;&#x6700;&#x65b0;&#x8fdb;&#x6765;&#x7684;&#x5206;&#x7247;&#x5305;&#x6240;&#x7528;&#x7684;skb&#x514b;&#x9686;&#x4e00;&#x4efd;&#xff0c;&#x514b;&#x9686;&#x51fa;&#x6765;&#x7684;skb&#x653e;&#x5728;&#x94fe;&#x8868;&#x7684;&#x539f;&#x4f4d;&#x7f6e;&#xff0c;&#x800c;&#x539f;&#x59cb;skb&#x79fb;&#x5230;&#x94fe;&#x8868;&#x5934;&#x90e8;&#xff0c;&#x7528;&#x4e8e;&#x66ff;&#x6362;&#x5934;&#x90e8;skb">
<node CREATED="1425716468731" ID="ID_8341425" MODIFIED="1425716478153" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x8fd9;&#x4e48;&#x505a;&#xff1f;">
<node CREATED="1425716479519" ID="ID_747185695" MODIFIED="1425716945967">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#26159;&#30001;netfilter&#30340;&#20351;&#29992;&#26041;&#27861;&#20915;&#23450;&#30340;&#12290;netfilter&#23558;skb&#20256;&#32473;netfilter&#30340;hook, hook&#30340;&#36820;&#22238;&#20540;&#21578;&#35785;netfilter&#22914;&#20309;&#32487;&#32493;&#22788;&#29702;&#27492;skb&#65292;&#27604;&#22914;&#20002;&#24323;&#65292;&#32487;&#32493;&#22788;&#29702;&#65292;&#36824;&#26159;&#20013;&#27490;&#22788;&#29702;&#12290;&#36825;&#37324;netfilter&#22312;hook&#36820;&#22238;&#21518;&#35748;&#20026;skb&#25152;&#25351;&#21521;&#30340;&#36824;&#26159;&#21407;&#26469;&#30340;skb&#65292;&#23427;&#32487;&#32493;&#20351;&#29992;&#21407;&#26469;&#30340;skb&#12290;ip_defrag()&#23601;&#26159;&#22312;netfilter hook&#20013;&#34987;&#35843;&#29992;&#30340;&#65292;&#22240;&#27492;&#23427;&#20063;&#24212;&#35813;&#36981;&#24490;&#27492;&#35268;&#21017;&#65292;&#21363;&#36820;&#22238;&#21518;skb&#19981;&#21464;&#12290;&#25152;&#20197;&#36825;&#37324;&#38656;&#35201;&#20811;&#38534;&#19968;&#20221;&#21407;&#22987;skb&#65292;&#29992;&#21407;&#22987;skb&#36820;&#22238;&#37325;&#32452;&#22909;&#30340;&#21253;&#12290;&#32780;&#29992;&#20811;&#38534;&#30340;skb&#25351;&#21521;&#20256;&#36827;netfilter hook&#30340;&#20998;&#29255;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425634646821" ID="ID_453414125" MODIFIED="1425634797080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21462;&#31532;&#19968;&#20010;&#20998;&#29255;&#20026;&#22836;&#65292;&#23558;&#20854;skb-&gt;data&#31227;&#21040;IP&#22836;&#37096;&#24320;&#22987;&#22788;(&#22240;&#20026;&#22312;&#21069;&#38754;&#20998;&#29255;&#25918;&#20837;&#38431;&#21015;&#26102;skb-&gt;data&#31227;&#21040;&#20102;L4&#24320;&#22987;&#22788;)
    </p>
    <p>
      &#31532;&#19968;&#20010;&#20998;&#29255;&#20445;&#26377;IP&#22836;&#37096;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425634842296" ID="ID_1883340929" MODIFIED="1425635164385">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36941;&#21382;&#21518;&#32493;&#20998;&#29255;&#65292;&#22914;&#26524;&#22836;&#20998;&#29255;&#26377;&#36275;&#22815;&#31354;&#38388;&#65292;&#21017;&#23558;&#21518;&#32493;&#20998;&#29255;&#25644;&#31227;&#21040;&#22836;&#20998;&#29255;&#20013;
    </p>
    <p>
      skb_try_coalesce()
    </p>
  </body>
</html></richcontent>
<node CREATED="1425635219903" ID="ID_138649330" MODIFIED="1425635286800" TEXT="&#x5982;&#x679c;&#x5934;&#x5206;&#x7247;&#x7684;tail room&#x6709;&#x8db3;&#x591f;&#x7a7a;&#x95f4;&#x5bb9;&#x7eb3;&#x540e;&#x7eed;&#x5206;&#x7247;&#xff0c;&#x5219;&#x5c06;&#x540e;&#x7eed;&#x5206;&#x7247;&#x642c;&#x79fb;&#x5230;&#x5934;&#x5206;&#x7247;&#x7684;tail room"/>
<node CREATED="1425635354385" ID="ID_627956731" MODIFIED="1425635401963" TEXT="&#x5982;&#x679c;&#x5934;&#x5206;&#x7247;&#x7684;tail room&#x7a7a;&#x95f4;&#x4e0d;&#x8db3;&#xff0c;&#x5219;&#x5c06;&#x540e;&#x7eed;&#x5206;&#x7247;&#x642c;&#x79fb;&#x5230;skb_shinfo(head)-&gt;frags&#x4e2d;">
<node CREATED="1425635506103" ID="ID_103031470" MODIFIED="1425635604752" TEXT="&#x5982;&#x679c;&#x540e;&#x7eed;&#x5206;&#x7247;&#x7684;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x6709;&#x5185;&#x5bb9;&#xff0c;&#x5219;&#x9700;&#x5c06;skb-&gt;head&#x8f6c;&#x6362;&#x4e3a;&#x4e00;&#x4e2a;skb_frag_t&#x7684;&#x7ed3;&#x6784;&#x518d;&#x8ffd;&#x52a0;&#x5230;&#x5934;&#x5206;&#x7247;&#x7684;skb_shinfo(head)-&gt;frags&#x4e2d;"/>
<node CREATED="1425635620250" ID="ID_1074233581" MODIFIED="1425635657376" TEXT="&#x7136;&#x540e;&#x5c06;&#x540e;&#x7eed;&#x5206;&#x7247;&#x7684;skb_shinfo(next)-&gt;frags&#x642c;&#x79fb;&#x5230;skb_shinfo(head)-&gt;frags&#x4e2d;"/>
<node CREATED="1425635692563" ID="ID_395125435" MODIFIED="1425635737625" TEXT="&#x66f4;&#x65b0;&#x5934;&#x5206;&#x7247;&#x7684;&#x5404;&#x79cd;&#x957f;&#x5ea6;&#xff1a;head-&gt;len, head-&gt;data_len, head-&gt;truesize"/>
<node CREATED="1425635782153" ID="ID_1556292417" MODIFIED="1425635789254" TEXT="&#x91ca;&#x653e;&#x540e;&#x7eed;&#x5206;&#x7247;&#x7684;skb_shinfo(next)-&gt;frags"/>
</node>
</node>
<node CREATED="1425635824329" ID="ID_1674391527" MODIFIED="1425635859627" TEXT="&#x5982;&#x679c;&#x540e;&#x7eed;&#x5206;&#x7247;&#x5df2;&#x7ecf;&#x88ab;&#x5408;&#x5e76;&#x5230;&#x4e86;&#x5934;&#x5206;&#x7247;&#x4e2d;&#xff0c;&#x5219;&#x540e;&#x7eed;&#x5206;&#x7247;&#x53ef;&#x4ee5;&#x88ab;&#x91ca;&#x653e;&#x4e86;"/>
<node CREATED="1425635873782" ID="ID_230676581" MODIFIED="1425635935798" TEXT="&#x5982;&#x679c;&#x540e;&#x7eed;&#x5206;&#x7247;&#x4e0d;&#x80fd;&#x5408;&#x5e76;&#x5230;&#x5934;&#x5206;&#x7247;&#x4e2d;&#xff0c;&#x5219;&#x5c06;&#x540e;&#x7eed;&#x5206;&#x7247;&#x6302;&#x63a5;&#x5728;skb_shinfo(head)-&gt;frag_list&#x4e0a;">
<node CREATED="1425635692563" ID="ID_551258443" MODIFIED="1425635979093">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25346;&#25509;&#21518;&#20063;&#35201;&#26356;&#26032;&#22836;&#20998;&#29255;&#30340;&#21508;&#31181;&#38271;&#24230;&#65306;head-&gt;len, head-&gt;data_len, head-&gt;truesize
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425635989325" ID="ID_970522763" MODIFIED="1425636100373" TEXT="&#x5982;&#x679c;&#x67d0;&#x4e2a;&#x5206;&#x7247;&#x5f00;&#x59cb;&#x6302;&#x63a5;&#x5230;skb_shinfo(head)-&gt;frag_list&#x4e0a;&#xff0c;&#x5219;&#x6240;&#x6709;&#x540e;&#x7eed;&#x5206;&#x7247;&#x90fd;&#x8981;&#x6302;&#x63a5;&#x5728;skb_shinfo(head)-&gt;frag_list&#x4e0a;&#xff0c;&#x4e0d;&#x80fd;&#x518d;&#x5408;&#x5e76;&#x5230;&#x5934;&#x5206;&#x7247;&#x7684;tail room&#x548c;skb_shinfo(head)-&gt;frags&#x4e2d;&#x4e86;"/>
</node>
<node CREATED="1425636148519" ID="ID_1713507278" MODIFIED="1425636226488" TEXT="&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x6e05;&#x9664;&#x5934;&#x5206;&#x7247;IP&#x5934;&#x90e8;&#x5185;fragment&#x6807;&#x8bc6;&#xff0c;&#x66f4;&#x65b0;&#x5934;&#x5206;&#x7247;IP&#x5934;&#x90e8;&#x5185;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1425636283775" ID="ID_1314494251" MODIFIED="1425636378532">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#21518;&#28165;&#31354;&#20998;&#29255;&#21253;&#38431;&#21015;&#30340;&#22836;&#25351;&#38024;&#21644;&#23614;&#25351;&#38024;&#65306;qp-&gt;q.fragments&#65292;qp-&gt;q.fragments_tail
    </p>
    <p>
      &#22240;&#20026;&#20998;&#29255;&#21253;&#38431;&#21015;&#24050;&#32463;&#31227;&#21040;&#20102;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425711766041" ID="ID_586663609" LINK="#ID_481828894" MODIFIED="1425712212961" TEXT="&#x6ce8;&#x610f;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x8fdb;&#x6765;&#x7684;&#x5206;&#x7247;&#x7684;skb&#x6307;&#x5411;&#x4e86;&#x91cd;&#x7ec4;&#x540e;&#x7684;&#x5b8c;&#x6574;&#x5305;"/>
</node>
<node CREATED="1425633199367" ID="ID_1315363613" MODIFIED="1425633299453">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20998;&#29255;&#36824;&#27809;&#26377;&#21040;&#40784;&#21017;&#36824;&#26080;&#27861;&#37325;&#32452;&#65292;&#37027;&#20040;&#20002;&#24323;&#24403;&#21069;&#20998;&#29255;&#21253;&#25152;&#36873;&#25321;&#30340;&#36335;&#30001;skb_dst_drop(skb)
    </p>
    <p>
      &#22240;&#20026;&#25105;&#20204;&#24635;&#26159;&#20250;&#36873;&#25321;&#26368;&#26032;&#30340;&#36335;&#30001;&#65292;&#21363;&#26368;&#21518;&#36827;&#26469;&#30340;&#20998;&#29255;&#25152;&#36873;&#25321;&#30340;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425713937417" ID="ID_1103780385" MODIFIED="1425714199416" TEXT="&#x5982;&#x679c;&#x6210;&#x529f;&#x5219;skb&#x5728;&#x8fd4;&#x56de;&#x540e;&#x5df2;&#x7ecf;&#x6307;&#x5411;&#x4e86;&#x91cd;&#x7ec4;&#x597d;&#x7684;&#x5b8c;&#x6574;&#x5305;&#xff0c;&#x8fd9;&#x65f6;&#x6b64;&#x5305;&#x4f1a;&#x5728;ipv4_conntrack_defrag&#x8fd4;&#x56de;&#x540e;&#x7ee7;&#x7eed;&#x88ab;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x5904;&#x7406;&#x3002;&#x5982;&#x679c;&#x8fd8;&#x672a;&#x5b8c;&#x6210;&#x91cd;&#x7ec4;&#x5219;&#x5206;&#x7247;&#x5305;&#x5df2;&#x7ecf;&#x88ab;&#x653e;&#x5165;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;&#xff0c;&#x8fd9;&#x65f6;&#x5728;ipv4_conntrack_defrag&#x8fd4;&#x56de;&#x540e;&#x4e2d;&#x6b62;&#x5bf9;skb&#x5904;&#x7406;(&#x5373;netfilter hook&#x8fd4;&#x56de;NF_STOLEN)&#x3002;"/>
</node>
<node CREATED="1425708846143" ID="ID_1595853889" MODIFIED="1425708866378" TEXT="&#x91cd;&#x7ec4;&#x5206;&#x7247;&#x5305;&#x65f6;&#x53ef;&#x80fd;&#x9047;&#x5230;&#x7684;&#x95ee;&#x9898;">
<node CREATED="1425709067627" ID="ID_1854327137" MODIFIED="1425709125284" TEXT="&#x539f;&#x5305;&#x5df2;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#xff0c;&#x4f46;&#x662f;&#x8fd8;&#x7ee7;&#x7eed;&#x6536;&#x5230;&#x4e86;&#x5b83;&#x7684;&#x5206;&#x7247;">
<node CREATED="1425709131371" ID="ID_782562593" MODIFIED="1425709162684" TEXT="&#x6b64;&#x65f6;&#x5e94;&#x4e22;&#x5f03;&#x5206;&#x7247;"/>
</node>
<node CREATED="1425709192471" ID="ID_1792954726" MODIFIED="1425709210573" TEXT="&#x524d;&#x540e;&#x4e24;&#x4e2a;&#x5206;&#x7247;&#x4e4b;&#x95f4;&#x95f4;&#x9694;&#x65f6;&#x95f4;&#x592a;&#x957f;">
<node CREATED="1425709131371" ID="ID_843528692" MODIFIED="1425709162684" TEXT="&#x6b64;&#x65f6;&#x5e94;&#x4e22;&#x5f03;&#x5206;&#x7247;"/>
</node>
<node CREATED="1425709404645" ID="ID_1953579136" MODIFIED="1425709449935" TEXT="&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x7684;&#x504f;&#x79fb;&#x503c;&#x5c0f;&#x4e8e;&#x524d;&#x9762;&#x5df2;&#x6536;&#x5230;&#x7684;&#x5206;&#x7247;&#x7684;&#x957f;&#x5ea6;&#x603b;&#x548c;">
<node CREATED="1425709131371" ID="ID_527306171" MODIFIED="1425709484924" TEXT="&#x6b64;&#x65f6;&#x5e94;&#x4e22;&#x5f03;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;"/>
</node>
<node CREATED="1425709606624" ID="ID_772175096" MODIFIED="1425709662764" TEXT="&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x5df2;&#x7ecf;&#x6536;&#x5230;&#xff0c;&#x4f46;&#x662f;&#x65b0;&#x6536;&#x5230;&#x7684;&#x5206;&#x7247;&#x7684;&#x504f;&#x79fb;&#x503c;&#x5927;&#x4e8e;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x7684;&#x7ed3;&#x675f;&#x4f4d;&#x7f6e;">
<node CREATED="1425709131371" ID="ID_1729954705" MODIFIED="1425709685458" TEXT="&#x6b64;&#x65f6;&#x5e94;&#x4e22;&#x5f03;&#x65b0;&#x6536;&#x5230;&#x7684;&#x5206;&#x7247;"/>
</node>
<node CREATED="1425709778011" ID="ID_771165711" MODIFIED="1425709832293" TEXT="&#x524d;&#x540e;&#x5206;&#x7247;&#x6709;&#x91cd;&#x53e0;&#xff0c;&#x751a;&#x81f3;&#x524d;&#x9762;&#x7684;&#x5206;&#x7247;&#x5b8c;&#x5168;&#x8986;&#x76d6;&#x540e;&#x9762;&#x7684;&#x5206;&#x7247;&#x6216;&#x8005;&#x540e;&#x9762;&#x51e0;&#x4e2a;&#x5206;&#x7247;">
<node CREATED="1425709862477" ID="ID_868861019" MODIFIED="1425709871181" TEXT="&#x5c06;&#x91cd;&#x53e0;&#x90e8;&#x5206;&#x4ece;&#x540e;&#x9762;&#x7684;&#x5206;&#x7247;&#x4e2d;&#x5220;&#x9664;"/>
</node>
<node CREATED="1425709927026" ID="ID_1564753047" MODIFIED="1425709944619" TEXT="&#x5404;&#x5206;&#x7247;&#x4ece;&#x4e0d;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x8fdb;&#x6765;">
<node CREATED="1425709948114" ID="ID_644709878" MODIFIED="1425709966094" TEXT="&#x6c38;&#x8fdc;&#x8bb0;&#x4f4f;&#x6700;&#x65b0;&#x7684;&#x5165;&#x53e3;&#x8bbe;&#x5907;"/>
</node>
<node CREATED="1425711562372" ID="ID_505898991" MODIFIED="1425711599774" TEXT="&#x8d85;&#x8fc7;&#x4e00;&#x5b9a;&#x65f6;&#x95f4;&#x540e;&#x5404;&#x5206;&#x7247;&#x8fd8;&#x6ca1;&#x6709;&#x6536;&#x96c6;&#x9f50;&#x5168;">
<node CREATED="1425711601644" ID="ID_1429937763" MODIFIED="1425711629543" TEXT="&#x8d85;&#x65f6;&#x540e;&#x6e05;&#x9664;&#x6ca1;&#x6709;&#x91cd;&#x7ec4;&#x5b8c;&#x6210;&#x7684;&#x5206;&#x7247;&#x5305;&#x961f;&#x5217;"/>
</node>
</node>
</node>
<node CREATED="1397635021579" ID="ID_1848193971" MODIFIED="1425717009294" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1397635135921" ID="ID_120078892" MODIFIED="1397635768636" TEXT="&#x5305;&#x5206;&#x7247;&#xff1a;&#xa;&#x4e00;&#x4e2a;&#x5927;&#x7684;&#x5305;&#x53ef;&#x80fd;&#x7531;&#x591a;&#x4e2a;&#x5206;&#x7247;&#x7ec4;&#x6210;&#xff0c;&#x6bcf;&#x4e2a;&#x5206;&#x7247;&#x90fd;&#x6709;&#x5b8c;&#x6574;&#x7684;L2, L3&#x5934;&#x90e8;&#xff0c;&#xa;&#x6240;&#x6709;&#x5206;&#x7247;&#x7531;skb&#x53ca;skb_shinfo(skb)-&gt;frag_list&#x94fe;&#x63a5;&#x8d77;&#x6765;&#xff0c;&#x8fd9;&#x79f0;&#x4e4b;&#x4e3a;&#x5305;&#x5206;&#x7247;&#x3002;&#xa;&#x6bcf;&#x4e00;&#x4e2a;struct sk_buff&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x5b8c;&#x6574;&#x7684;&#x5305;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x6709;&#x5b8c;&#x6574;&#x7684;L2, L3&#x5934;&#x90e8;&#x3002;&#xa;&#x5f53;skb&#x53ca;skb_shinfo(skb)-&gt;frag_list&#x88ab;&#x53d1;&#x9001;&#x65f6;&#xff0c;&#x6bcf;&#x4e2a;skb&#x90fd;&#x6709;&#x5b8c;&#x6574;&#x7684;L2, L3&#x5934;&#x90e8;&#x3002;"/>
<node CREATED="1397635793134" ID="ID_462554363" MODIFIED="1397636698810">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20869;&#23384;&#20998;&#29255;&#65288;scatter/gather&#65289;&#65306;
    </p>
    <p>
      &#19968;&#20010;skb&#25351;&#21521;&#30340;data&#32531;&#20914;&#21306;&#21487;&#33021;&#26159;&#32447;&#24615;&#30340;(&#21363;&#20869;&#23384;&#26159;&#36830;&#32493;&#30340;)&#65292;&#20063;&#26377;&#21487;&#33021;&#26159;&#38750;&#32447;&#24615;&#30340;(&#20869;&#23384;&#26159;&#19981;&#36830;&#32493;&#30340;)&#12290;
    </p>
    <p>
      &#24403;data&#32531;&#20914;&#21306;&#26159;&#32447;&#24615;&#30340;&#26102;&#20505;&#65292;skb&#25152;&#20195;&#34920;&#30340;&#25968;&#25454;&#21253;&#23384;&#20648;&#22312;skb-&gt;data&#21644;skb-&gt;tail&#20043;&#38388;&#12290;
    </p>
    <p>
      &#24403;data&#32531;&#20914;&#21306;&#26159;&#38750;&#32447;&#24615;&#30340;&#26102;&#20505;&#65292;skb&#25152;&#20195;&#34920;&#30340;&#25968;&#25454;&#21253;&#38500;&#20102;&#23384;&#20648;&#22312;skb-&gt;data&#21644;skb-&gt;tail&#20043;&#38388;&#22806;&#65292;&#36824;&#23384;&#20648;&#22312;skb_shinfo(skb)-&gt;frags&#25152;&#25351;&#21521;&#30340;&#21508;&#20010;&#20869;&#23384;&#20998;&#29255;&#20013;&#12290;
    </p>
    <p>
      skb&#30340;&#25152;&#26377;&#20869;&#23384;&#20998;&#29255;&#23558;&#20250;&#34987;&#25903;&#25345;scatter/gather&#30340;&#32593;&#32476;&#35774;&#22791;&#25644;&#36816;&#21040;&#21516;&#19968;&#20010;&#21253;&#20013;&#65292;&#28982;&#21518;&#22635;&#20805;L2&#65292;L3&#22836;&#37096;&#65292;&#20877;&#21457;&#20986;&#21435;&#12290;
    </p>
    <p>
      &#22240;&#27492;&#36825;&#37324;skb&#21644;skb_shinfo(skb)-&gt;frags&#25152;&#25351;&#21521;&#30340;&#21508;&#20010;&#20869;&#23384;&#20998;&#29255;&#21508;&#33258;&#24182;&#19981;&#20195;&#34920;&#19968;&#20010;&#23436;&#25972;&#30340;&#21253;&#65292;&#20182;&#20204;&#32852;&#21512;&#36215;&#26469;&#20316;&#20026;&#19968;&#20010;&#25972;&#20307;&#20195;&#34920;&#19968;&#20010;&#23436;&#25972;&#30340;&#21253;&#12290;&#22240;&#20026;&#36825;&#37324;&#21508;&#20010;&#20869;&#23384;&#20998;&#29255;&#37117;&#25346;&#25509;&#22312;&#19968;&#20010;struct sk_buff&#32467;&#26500;&#20013;&#65292;&#25152;&#20197;&#36824;&#26159;&#21487;&#20197;&#35828;&#19968;&#20010;struct sk_buff&#32467;&#26500;&#20195;&#34920;&#19968;&#20010;&#23436;&#25972;&#30340;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1397636729548" ID="ID_1595940292" MODIFIED="1397636898308" TEXT="skb&#x548c;skb_shinfo(skb)-&gt;frags&#x6240;&#x6307;&#x5411;&#x7684;&#x5404;&#x4e2a;&#x5185;&#x5b58;&#x5206;&#x7247;&#x8054;&#x5408;&#x8d77;&#x6765;&#x4ee3;&#x8868;&#x7684;&#xa;&#x53ef;&#x80fd;&#x662f;&#x4e00;&#x4e2a;&#x4e0d;&#x5206;&#x7247;&#x7684;&#x5305;&#xff0c;&#x4e5f;&#x53ef;&#x80fd;&#x662f;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x7684;&#x5305;&#xff0c;&#x56e0;&#x6b64;&#x5404;&#x5185;&#x5b58;&#x5206;&#x7247;&#x7684;&#x603b;&#x957f;&#x5ea6;&#x8fd8;&#x662f;&#x5c0f;&#x4e8e;&#x51fa;&#x53e3;&#x7684;MTU&#x7684;"/>
<node CREATED="1397636944870" ID="ID_804980094" MODIFIED="1397637032352">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      scatter/gather&#21487;&#20197;&#36991;&#20813;&#21457;&#36865;&#23567;&#27573;&#25968;&#25454;&#21253;&#26102;&#30340;&#25968;&#25454;&#25335;&#36125;&#65292;&#22914;&#26524;&#19981;&#25903;&#25345;scatter/gather,ze
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1397619417977" ID="ID_393099601" MODIFIED="1397619420999" TEXT="ip_append_data">
<node CREATED="1397619423637" ID="ID_1145617757" MODIFIED="1397619430349" TEXT="&#x5177;&#x4f53;&#x5b9e;&#x73b0;"/>
<node CREATED="1397619458178" ID="ID_1398233543" MODIFIED="1397619818332" TEXT="L4&#x534f;&#x8bae;&#x7528;&#x6b64;&#x51fd;&#x6570;&#x5c06;&#x8981;&#x4f20;&#x8f93;&#x7684;&#x6570;&#x636e;&#x6682;&#x5b58;&#x5728;skb&#x7684;data&#x7f13;&#x51b2;&#x533a;&#xff0c;&#x4f46;&#x5e76;&#x4e0d;&#x771f;&#x6b63;&#x4f20;&#x8f93;&#x6570;&#x636e;&#xff0c;&#x7b49;&#x5230;&#x6709;&#x591a;&#x4e2a;&#x7247;&#x6bb5;&#x540e;&#x518d;&#x8c03;&#x7528;ip_flush_pending_frames&#x4e00;&#x6b21;&#x6027;&#x4f20;&#x8f93;&#x6240;&#x6709;&#x7247;&#x6bb5;&#xff0c;&#x8ba9;L4&#x5c42;&#x8981;&#x4f20;&#x8f93;&#x7684;&#x6570;&#x636e;&#x7ec4;&#x7ec7;&#x6210;&#x7247;&#x6bb5;&#x5f62;&#x5f0f;&#x53ef;&#x4ee5;&#x52a0;&#x901f;&#x4f20;&#x8f93;&#x65f6;&#x5206;&#x6bb5;&#x3002;"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1301304541500" ID="ID_787241903" LINK="socket.mm" MODIFIED="1359870107530" TEXT="struct socket"/>
<node CREATED="1306746264395" FOLDED="true" ID="ID_1778806839" MODIFIED="1400829349767">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct dst_entry
    </p>
    <p>
      include/net/dst.h
    </p>
  </body>
</html></richcontent>
<node CREATED="1306746413991" ID="ID_786601628" MODIFIED="1306746420991" TEXT="struct rcu_head rcu_head"/>
<node CREATED="1306746452502" ID="ID_477700532" MODIFIED="1306746466535">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct dst_entry *child
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306746479429" ID="ID_710636350" MODIFIED="1306746487482" TEXT="struct net_device *dev"/>
<node CREATED="1306746499157" ID="ID_1970992678" MODIFIED="1306746501045" TEXT="error"/>
<node CREATED="1306746506676" ID="ID_26405230" MODIFIED="1306746508150" TEXT="obsolete"/>
<node CREATED="1306746513428" ID="ID_984612668" MODIFIED="1306746515150" TEXT="flags"/>
<node CREATED="1306746519988" ID="ID_1959903903" MODIFIED="1306746521938" TEXT="expires"/>
<node CREATED="1306746526740" ID="ID_303611209" MODIFIED="1306746528294" TEXT="header_len"/>
<node CREATED="1306746533060" ID="ID_475451984" MODIFIED="1306746534510" TEXT="trailer_len"/>
<node CREATED="1306746539748" ID="ID_1924824336" MODIFIED="1306746541776" TEXT="rate_tokens"/>
<node CREATED="1306746546723" ID="ID_1726180005" MODIFIED="1306746548822" TEXT="rate_last"/>
<node CREATED="1306746556179" ID="ID_703424622" MODIFIED="1306746567541">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct dst_entry *path
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306746580899" ID="ID_767222521" MODIFIED="1306746588436" TEXT="struct neighbour *neighbour"/>
<node CREATED="1306746598210" ID="ID_170417276" MODIFIED="1306746610403">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct hh_cache *hh
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306746620946" ID="ID_1263186227" MODIFIED="1306746631363">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct xfrm_state *xfrm
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306746641425" ID="ID_1620413642" MODIFIED="1306746649235" TEXT="input&#x51fd;&#x6570;"/>
<node CREATED="1306746654897" ID="ID_1325916911" MODIFIED="1306746659802" TEXT="output&#x51fd;&#x6570;"/>
<node CREATED="1306746669409" ID="ID_1620366420" MODIFIED="1306746696841">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct&#160;&#160;dst_ops *ops
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306746708768" ID="ID_1807407696" MODIFIED="1306746715228" TEXT="metrics&#x6570;&#x7ec4;"/>
<node CREATED="1306746724128" ID="ID_543703838" MODIFIED="1306746725987" TEXT="tclassid"/>
<node CREATED="1306746763983" ID="ID_280061726" MODIFIED="1306746765930" TEXT="refcnt"/>
<node CREATED="1306746772974" ID="ID_1525976983" MODIFIED="1306746775319" TEXT="__use"/>
<node CREATED="1306746781182" ID="ID_1806130031" MODIFIED="1306746782764" TEXT="lastuse"/>
<node CREATED="1306746822173" ID="ID_1268283859" MODIFIED="1306746896122" TEXT="union {&#xa;struct dst_entry *next;&#xa;struct rtable    *rt_next;&#xa;struct rt6_info   *rt6_next;&#xa;struct dn_route  *dn_next;&#xa;};"/>
</node>
</node>
<node CREATED="1306483274619" FOLDED="true" ID="ID_920633580" MODIFIED="1419015308680" POSITION="left" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1306483641940" ID="ID_216108617" LINK="#ID_206556523" MODIFIED="1306647857113">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net init_net
    </p>
    <p>
      net/core/net_namespace.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306483783830" FOLDED="true" ID="ID_1532495395" MODIFIED="1419015310287" POSITION="left" TEXT="&#x7f51;&#x7edc;&#x7cfb;&#x7edf;&#x521d;&#x59cb;&#x5316;">
<node CREATED="1306483853020" FOLDED="true" ID="ID_1037720930" MODIFIED="1306648718371" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x6ce8;&#x518c; register_netdev">
<node CREATED="1306484041288" FOLDED="true" ID="ID_535563230" MODIFIED="1306648715827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      register_netdevice
    </p>
  </body>
</html></richcontent>
<node CREATED="1306485009989" ID="ID_117292863" MODIFIED="1306485661070">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1, &#21021;&#22987;&#21270;dev-&gt;addr_list_lock
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#21021;&#22987;&#21270;&#25910;&#21457;&#38431;&#21015;&#30340;lock
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306485689783" ID="ID_545353221" MODIFIED="1306485722748">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2, &#35843;&#29992;dev-&gt;netdev_ops-&gt;ndo_init()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306490773047" ID="ID_884189136" MODIFIED="1306490786782" TEXT="3, &#x5206;&#x914d;ifindex"/>
<node CREATED="1306491950142" ID="ID_584366718" MODIFIED="1306491996804" TEXT="4, &#x68c0;&#x67e5;&#x8bbe;&#x5907;&#x529f;&#x80fd;&#x7684;&#x5408;&#x6cd5;&#x6027;(dev-&gt;features)"/>
<node CREATED="1306492380669" ID="ID_1498085296" MODIFIED="1306492468362">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      5, &#21021;&#22987;&#21270;&#20869;&#26680;&#23545;&#35937;&#24182;&#27880;&#20876;,&#35774;&#32622;&#27880;&#20876;&#29366;&#24577;&#20026;
    </p>
    <p>
      &#160;&#160;&#160;&#160;NETREG_REGISTERED
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306492705411" ID="ID_1821337592" MODIFIED="1306492717781" TEXT="5, &#x8bbe;&#x7f6e;&#x8bbe;&#x5907;&#x72b6;&#x6001;&#x4e3a;__LINK_STATE_PRESENT"/>
<node CREATED="1306492782608" FOLDED="true" ID="ID_1018162020" MODIFIED="1306493495892">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6, &#23558;&#35774;&#22791;&#30340;&#35843;&#24230;&#31574;&#30053;&#21021;&#22987;&#21270;&#20026;&#31354;
    </p>
    <p>
      &#160;&#160;&#160;&#160;dev_init_scheduler
    </p>
  </body>
</html></richcontent>
<node CREATED="1306492908093" ID="ID_901016175" MODIFIED="1306492981334" TEXT="1, &#x5c06;&#x5404;&#x4e2a;&#x6536;&#x53d1;&#x961f;&#x5217;&#x7684;qdisc&#x8bbe;&#x4e3a;&#x9ed8;&#x8ba4;qdisc,&#x5373;noop_qdisc"/>
<node CREATED="1306493066877" ID="ID_250610898" MODIFIED="1306493447359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2, &#23558;dev-&gt;watchdog_timer&#35774;&#20026;dev_watchdog
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#27492;&#23450;&#26102;&#22120;&#29992;&#20110;&#26816;&#27979;&#21457;&#21253;&#36229;&#26102;,&#33509;&#36229;&#26102;&#21017;&#35843;&#29992;dev&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;dev-&gt;netdev_ops-&gt;ndo_tx_timeout&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306493502019" ID="ID_46805627" MODIFIED="1306493688178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      7, &#23558;&#35774;&#22791;&#21152;&#20837;init_net&#30340;
    </p>
    <p>
      dev_base_head
    </p>
    <p>
      dev_name_head
    </p>
    <p>
      dev_index_head
    </p>
    <p>
      &#19977;&#20010;&#38142;&#34920;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306493759590" ID="ID_252471997" MODIFIED="1306493788045" TEXT="8, &#x7528;&#x901a;&#x77e5;&#x94fe;&#x901a;&#x77e5;&#x7cfb;&#x7edf;&#x6b64;&#x8bbe;&#x5907;&#x5df2;&#x6ce8;&#x518c;"/>
</node>
</node>
<node CREATED="1306648723524" FOLDED="true" ID="ID_840132082" MODIFIED="1360839381783" TEXT="&#x534f;&#x8bae;&#x6808;&#x521d;&#x59cb;&#x5316;">
<node CREATED="1306648748615" FOLDED="true" ID="ID_1275817964" MODIFIED="1360839380502" TEXT="start_kernel                       (init/main.c) ---&gt;&#xa;rest_init                             (init/main.c) ---&gt;&#xa;kernel_thread : kernel_init (init/main.c) ---&gt;&#xa;do_basic_setup                 (init/main.c) ---&gt;&#xa;do_initcalls                        (init/main.c) ---&gt;">
<node CREATED="1306648820986" FOLDED="true" ID="ID_137978093" MODIFIED="1360839379829" TEXT="do_initcalls&#xa; init/main.c">
<node CREATED="1359875560650" ID="ID_939223150" MODIFIED="1359875668912" TEXT="&#x8c03;&#x7528;&#x5b58;&#x50a8;&#x5728;__initcall_start&#x548c;__initcall_end&#x4e4b;&#x95f4;&#x7684;&#x521d;&#x59cb;&#x5316;&#x51fd;&#x6570;"/>
<node CREATED="1359875681030" FOLDED="true" ID="ID_1961802846" MODIFIED="1360741887481" TEXT="&#x521d;&#x59cb;&#x5316;&#x51fd;&#x6570;">
<node CREATED="1321708832689" FOLDED="true" ID="ID_766977863" MODIFIED="1333010222530" TEXT="sock_init&#xa;net/socket.c">
<node CREATED="1321708898548" FOLDED="true" ID="ID_1080367674" MODIFIED="1321709001762" TEXT="sk_init">
<node CREATED="1321708944084" ID="ID_1080390343" MODIFIED="1321708996256" TEXT="&#x521d;&#x59cb;&#x5316;&#x4ee5;&#x4e0b;&#x53d8;&#x91cf;&#xa;sysctl_wmem_max&#xa;sysctl_rmem_max&#xa;sysctl_wmem_default&#xa;sysctl_rmem_default"/>
</node>
<node CREATED="1321709020153" ID="ID_657048866" MODIFIED="1321709023108" TEXT="skb_init"/>
<node CREATED="1321709103162" ID="ID_134404562" MODIFIED="1321709105327" TEXT="init_inodecache"/>
<node CREATED="1321709221058" ID="ID_469722736" MODIFIED="1321709256490" TEXT="&#x6ce8;&#x518c;socket&#x5bf9;&#x5e94;&#x7684;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x7c7b;&#x578b;&#xa;register_filesystem(&amp;sock_fs_type)"/>
<node CREATED="1321709277290" ID="ID_727771569" MODIFIED="1321709313388" TEXT="&#x6302;&#x8f7d;socket&#x5bf9;&#x5e94;&#x7684;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x7c7b;&#x578b;&#xa;kern_mount(&amp;sock_fs_type)"/>
<node CREATED="1321709326247" ID="ID_238149213" MODIFIED="1321709328550" TEXT="netfilter_init"/>
</node>
<node CREATED="1360639787020" ID="ID_1497690809" LINK="#ID_522589504" MODIFIED="1360639812832" TEXT="ipv4&#x521d;&#x59cb;&#x5316; &#xff1a;inet_init&#xa;  net/ipv4/af_inet.c"/>
<node CREATED="1306649628709" FOLDED="true" ID="ID_944351670" MODIFIED="1306650680394" TEXT="ipv6&#x521d;&#x59cb;&#x5316; &#xff1a; inet6_init&#xa;   net/ipv6/af_inet6.c">
<node CREATED="1306649948526" ID="ID_874841536" MODIFIED="1306649969895" TEXT="1, &#x521d;&#x59cb;&#x5316;&#x5168;&#x5c40;&#x53d8;&#x91cf;inetsw6"/>
<node CREATED="1306649983875" ID="ID_756057670" MODIFIED="1306650003421" TEXT="2, &#x6ce8;&#x518c;tcpv6&#x534f;&#x8bae;"/>
<node CREATED="1306650019985" ID="ID_38011828" MODIFIED="1306650035194" TEXT="3, &#x6ce8;&#x518c;udpv6&#x534f;&#x8bae;"/>
<node CREATED="1306650056120" ID="ID_516637830" MODIFIED="1306650073232" TEXT="4, &#x6ce8;&#x518c;udplitev6&#x534f;&#x8bae;"/>
<node CREATED="1306650088691" ID="ID_432166825" MODIFIED="1306650102218" TEXT="5, &#x6ce8;&#x518c;rawv6&#x534f;&#x8bae;"/>
<node CREATED="1306650120576" ID="ID_1389071854" MODIFIED="1306650126858" TEXT="6, rawv6_init"/>
<node CREATED="1306650163030" ID="ID_1050744680" MODIFIED="1306650252084" TEXT="7, &#x6ce8;&#x518c;ipv6 socket&#x65cf;&#xa;sock_register(&amp;inet6_family_ops)"/>
<node CREATED="1306650281144" ID="ID_665908732" MODIFIED="1306650309509" TEXT="8, &#x6ce8;&#x518c;sysctl&#x7cfb;&#x7edf; &#xa;ipv6_static_sysctl_register"/>
<node CREATED="1306650327144" ID="ID_351504968" MODIFIED="1306650351459" TEXT="9, &#x6ce8;&#x518c;ipv6&#x7f51;&#x7edc;&#x5b50;&#x7cfb;&#x7edf; &#xa;register_pernet_subsys(&amp;inet6_net_ops)"/>
<node CREATED="1306650388009" ID="ID_1000364612" MODIFIED="1306650394707" TEXT="10, icmpv6_init"/>
<node CREATED="1306650405772" ID="ID_1110447821" MODIFIED="1306650410500" TEXT="11, ip6_mr_init"/>
<node CREATED="1306650418701" ID="ID_1036680908" MODIFIED="1306650427315" TEXT="12, ndisc_init"/>
<node CREATED="1306650433480" ID="ID_913387867" MODIFIED="1306650438442" TEXT="13, igmp6_init"/>
<node CREATED="1306650448561" ID="ID_1747919728" MODIFIED="1306650454194" TEXT="14, ipv6_netfilter_init"/>
<node CREATED="1306650462473" ID="ID_752700206" MODIFIED="1306650467811" TEXT="15, raw6_proc_init"/>
<node CREATED="1306650476208" ID="ID_1305861522" MODIFIED="1306650480796" TEXT="16, udplite6_proc_init"/>
<node CREATED="1306650490040" ID="ID_310495569" MODIFIED="1306650494762" TEXT="17, ipv6_misc_proc_init"/>
<node CREATED="1306650502925" ID="ID_741177305" MODIFIED="1306650507426" TEXT="18, if6_proc_init"/>
<node CREATED="1306650517062" ID="ID_1899613959" MODIFIED="1306650523662" TEXT="19, ip6_route_init"/>
<node CREATED="1306650530765" ID="ID_1994989334" MODIFIED="1306650536105" TEXT="20, ip6_flowlabel_init"/>
<node CREATED="1306650548225" ID="ID_659923254" MODIFIED="1306650553096" TEXT="21, addrconf_init"/>
<node CREATED="1306650561760" ID="ID_1708559713" MODIFIED="1306650566143" TEXT="22, ipv6_exthdrs_init"/>
<node CREATED="1306650576554" ID="ID_1039336113" MODIFIED="1306650580737" TEXT="23, ipv6_frag_init"/>
<node CREATED="1306650589175" ID="ID_1331370831" MODIFIED="1306650593396" TEXT="24, udpv6_init"/>
<node CREATED="1306650603674" ID="ID_1358499638" MODIFIED="1306650608573" TEXT="25, udplitev6_init"/>
<node CREATED="1306650619495" ID="ID_988108670" MODIFIED="1306650623976" TEXT="26, tcpv6_init"/>
<node CREATED="1306650634586" ID="ID_836648441" MODIFIED="1306650639766" TEXT="27, ipv6_packet_init"/>
<node CREATED="1306650651105" ID="ID_92914453" MODIFIED="1306650655663" TEXT="28, ipv6_sysctl_register"/>
</node>
<node CREATED="1359887265665" ID="ID_737200846" LINK="#ID_1702985836" MODIFIED="1359887284133" TEXT="net_dev_init&#xa;net/core/dev.c"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1306483815322" FOLDED="true" ID="ID_1616226216" MODIFIED="1465419210883" POSITION="left" TEXT="&#x7f51;&#x7edc;&#x5b50;&#x6a21;&#x5757;">
<node CREATED="1359887065456" FOLDED="true" ID="ID_1433732459" MODIFIED="1419015322825" TEXT="net device">
<node CREATED="1359887091744" FOLDED="true" ID="ID_1767402792" MODIFIED="1359887223436" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1306674701666" FOLDED="true" ID="ID_899117683" MODIFIED="1359887220219" TEXT="struct list_head ptype_base&#xa;net/core/dev.c&#xa;&#x5404;&#x534f;&#x8bae;&#x6a21;&#x5757;&#x901a;&#x8fc7;dev_add_pack&#x5728;&#x6b64;&#x6ce8;&#x518c;&#x4e00;&#x4e2a;struct packet_type&#xff0c;&#xa;&#x8868;&#x660e;&#x5b83;&#x4eec;&#x60f3;&#x8981;&#x63a5;&#x6536;&#x7279;&#x5b9a;etherType&#x7684;&#x5305;&#x3002;&#x5f53;&#x7cfb;&#x7edf;&#x6536;&#x5230;&#x4e00;&#x4e2a;&#x5305;&#x65f6;&#xff0c;&#x5c06;&#x6839;&#x636e;&#xa;&#x5305;&#x7684;etherType&#x67e5;&#x627e;&#x6b64;&#x8868;&#xff0c;&#x4ee5;&#x5c06;&#x5305;&#x4f20;&#x9012;&#x5230;&#x6240;&#x6ce8;&#x518c;&#x7684;&#x534f;&#x8bae;&#x6a21;&#x5757;">
<node CREATED="1306675484655" FOLDED="true" ID="ID_541850270" MODIFIED="1359887219261" TEXT="struct packet_type">
<node CREATED="1306675511966" ID="ID_219581087" MODIFIED="1306675686659" TEXT="type &#xff1a;&#x6307;&#x5b9a;&#x8981;&#x63a5;&#x6536;&#x7684;etherType"/>
<node CREATED="1306675530048" ID="ID_321094160" MODIFIED="1306983896645" TEXT="struct net_device *dev : &#x4ec5;&#x63a5;&#x6536;&#x6307;&#x5b9a;&#x8bbe;&#x5907;&#x4e0a;&#x6536;&#x5230;&#x7684;&#x5305;"/>
<node CREATED="1306675559208" ID="ID_1426293928" MODIFIED="1306983933239" TEXT="func&#x51fd;&#x6570; : &#x6536;&#x5305;&#x56de;&#x8c03;&#x51fd;&#x6570;"/>
<node CREATED="1306675580483" ID="ID_1004695921" MODIFIED="1306675588909" TEXT="gso_segment&#x51fd;&#x6570;"/>
<node CREATED="1306675598255" ID="ID_239479445" MODIFIED="1306675604552" TEXT="gso_send_check&#x51fd;&#x6570;"/>
<node CREATED="1306675612625" ID="ID_390728083" MODIFIED="1306675617158" TEXT="gro_receive&#x51fd;&#x6570;"/>
<node CREATED="1306675630388" ID="ID_33669443" MODIFIED="1306675636700" TEXT="gro_complete&#x51fd;&#x6570;"/>
<node CREATED="1306675647846" ID="ID_443417933" MODIFIED="1306675663523" TEXT="af_packet_priv &#xff1a;&#x534f;&#x8bae;&#x6a21;&#x5757;&#x79c1;&#x6709;&#x6570;&#x636e;"/>
</node>
</node>
<node CREATED="1306674728866" FOLDED="true" ID="ID_1806509664" MODIFIED="1359887221301" TEXT="struct list_head ptype_all&#xa;net/core/dev.c&#xa;&#x5f53;&#x4e00;&#x4e2a;&#x534f;&#x8bae;&#x6a21;&#x5757;&#x60f3;&#x8981;&#x63a5;&#x6536;&#x4efb;&#x610f;etherType&#x7684;&#x5305;&#x65f6;&#xff0c;&#x5b83;&#x901a;&#x8fc7;&#xa;dev_add_pack&#x5728;&#x6b64;&#x6ce8;&#x518c;&#x4e00;&#x4e2a;struct packet_type&#xff0c;&#x5219;&#xa;&#x7cfb;&#x7edf;&#x63a5;&#x6536;&#x7684;&#x4efb;&#x4f55;&#x5305;&#x90fd;&#x4f1a;&#x88ab;&#x4f20;&#x9012;&#x7ed9;&#x6240;&#x6ce8;&#x518c;&#x7684;&#x534f;&#x8bae;&#x6a21;&#x5757;">
<node CREATED="1306675710063" ID="ID_962505778" LINK="#ID_541850270" MODIFIED="1306675727923" TEXT="struct packet_type"/>
</node>
</node>
<node CREATED="1359887109376" FOLDED="true" ID="ID_1053582990" MODIFIED="1359891946341" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1306671770902" FOLDED="true" ID="ID_1063835775" MODIFIED="1359891945333" TEXT="struct softnet_data softnet_data&#xa;     include/linux/netdevice.h">
<node CREATED="1306671880799" ID="ID_1369467822" MODIFIED="1306671892664" TEXT="struct Qdisc *output_queue"/>
<node CREATED="1306671912456" ID="ID_1378819140" MODIFIED="1306672965396" TEXT="struct sk_buff_head input_pkt_queue&#xa;                  &#x7528;&#x4e8e;&#x4fdd;&#x5b58;&#x6536;&#x5230;&#x7684;&#x5305;"/>
<node CREATED="1306671947107" ID="ID_476222859" MODIFIED="1306673094144" TEXT="poll_list&#xa;&#x5982;&#x679c;&#x67d0;&#x4e2a;&#x8bbe;&#x5907;&#x6709;&#x8f93;&#x5165;&#x5305;&#x5f85;&#x5904;&#x7406;&#xff0c;&#x5219;&#x5c06;&#x5b83;&#x7684;&#xa;struct napi_struct&#x94fe;&#x5165;&#x8fd9;&#x4e2a;&#x94fe;&#x8868;&#xff0c;&#x7b49;&#x5f85;&#x5904;&#x7406;"/>
<node CREATED="1306671967088" ID="ID_1680896510" MODIFIED="1306671975400" TEXT="struct sk_buff *completion_queue"/>
<node CREATED="1306671994057" ID="ID_563054575" MODIFIED="1306673312361" TEXT="struct napi_struct backlog&#xa;&#x7531;&#x975e;NAPI&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;&#x4f7f;&#x7528;&#xff0c;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x5df2;&#xa;&#x51c6;&#x5907;&#x597d;&#x88ab;net_rx_action&#x6240;&#x8c03;&#x5ea6;"/>
</node>
</node>
<node CREATED="1359887122848" FOLDED="true" ID="ID_1443511889" MODIFIED="1419015321983" TEXT="&#x521d;&#x59cb;&#x5316;&#x6d41;&#x7a0b;">
<node CREATED="1306673549565" FOLDED="true" ID="ID_1702985836" MODIFIED="1419015320920" TEXT="net_dev_init&#xa;net/core/dev.c">
<node CREATED="1306673619666" FOLDED="true" ID="ID_1729232548" MODIFIED="1359891915254" TEXT="1, dev_proc_init &#xa;net/core/dev.c">
<node CREATED="1359883392276" ID="ID_443055229" MODIFIED="1359883660694" TEXT="&#x8c03;&#x7528;register_pernet_subsys&#x6ce8;&#x518c;net&#x4e0b;&#x7684;&#x5b50;&#x7cfb;&#x7edf;dev_proc_ops&#xa;&#x5176;&#x4e3b;&#x8981;&#x76ee;&#x7684;&#x662f;&#x5728;&#x6bcf;&#x4e2a;net&#x521b;&#x5efa;&#x548c;&#x5220;&#x9664;&#x65f6;&#x5728;/proc/net&#x76ee;&#x5f55;&#x4e0b;&#x6dfb;&#x52a0;&#x6216;&#x5220;&#x9664;&#x4ee5;&#x4e0b;proc&#x6587;&#x4ef6;&#xa;/proc/net/dev&#xa;/proc/net/softnet_stat&#xa;/proc/net/ptype"/>
</node>
<node CREATED="1306673635672" ID="ID_642534952" MODIFIED="1306673639996" TEXT="2, netdev_kobject_init"/>
<node CREATED="1306673676762" ID="ID_1192873706" LINK="#ID_1806509664" MODIFIED="1306675351497" TEXT="3, &#x521d;&#x59cb;&#x5316;&#x5217;&#x8868; ptype_all"/>
<node CREATED="1306673719147" ID="ID_1259197401" LINK="#ID_899117683" MODIFIED="1306675363059" TEXT="4, &#x521d;&#x59cb;&#x5316; ptype_base &#x6570;&#x7ec4;"/>
<node CREATED="1306673760984" FOLDED="true" ID="ID_1399071041" MODIFIED="1359887770311" TEXT="5, &#x6ce8;&#x518c;&#x5b50;&#x7cfb;&#x7edf; &#xa;register_pernet_subsys(&amp;netdev_net_ops)">
<node CREATED="1359887419426" FOLDED="true" ID="ID_1128132303" MODIFIED="1359887769454" TEXT="struct pernet_operations netdev_net_ops&#xa;&#x5728;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x521b;&#x5efa;&#x6216;&#x5220;&#x9664;&#x65f6;&#x521d;&#x59cb;&#x5316;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x94fe;&#x8868;">
<node CREATED="1359887456211" FOLDED="true" ID="ID_1648962715" MODIFIED="1359887703333" TEXT=".init = netdev_init">
<node CREATED="1359887516643" ID="ID_1752626132" LINK="#ID_75996596" MODIFIED="1359887672745" TEXT="&#x521d;&#x59cb;&#x5316;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;(struct net)&#x4e0b;&#x7684;3&#x4e2a;&#x5b58;&#x653e;&#xa;&#x7f51;&#x7edc;&#x8bbe;&#x5907;(struct net_device)&#x7684;hash&#x8868;&#xa;net-&gt;dev_base_head&#xa;net-&gt;dev_name_head&#xa;net-&gt;dev_index_head"/>
</node>
<node CREATED="1359887468498" ID="ID_853043401" MODIFIED="1359887470239" TEXT=".exit = netdev_exit"/>
</node>
</node>
<node CREATED="1306673842607" ID="ID_1886825100" LINK="#ID_1063835775" MODIFIED="1359887935759" TEXT="6, &#x521d;&#x59cb;&#x5316;&#x6bcf;&#x4e2a;CPU&#x5bf9;&#x5e94;&#x7684;struct softnet_data&#x53d8;&#x91cf;"/>
<node CREATED="1359888069351" ID="ID_1472542573" MODIFIED="1359888121192" TEXT="7, dev_boot_phase = 0 : &#x6807;&#x8bc6;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x5c42;&#x521d;&#x59cb;&#x5316;&#x5df2;&#x5b8c;&#x6210;"/>
<node CREATED="1306673916517" ID="ID_1465343490" MODIFIED="1359888838369" TEXT="8, register_pernet_device(&amp;loopback_net_ops)&#xa;&#x5728;&#x6bcf;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x4e2d;&#x6ce8;&#x518c;&#x4e00;&#x4e2a;&#x73af;&#x56de;&#x63a5;&#x53e3;(loopback interface)"/>
<node CREATED="1306673938369" ID="ID_14044821" MODIFIED="1359888844458" TEXT="9, register_pernet_device(&amp;default_device_ops)&#xa;&#x5f53;&#x4e00;&#x4e2a;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x88ab;&#x5220;&#x9664;&#x65f6;,&#x5c06;&#x6b64;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;&#x4e0b;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#xa;&#x5207;&#x6362;&#x5230;&#x9ed8;&#x8ba4;&#x7684;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;(init_net)"/>
<node CREATED="1306673969428" ID="ID_384429897" MODIFIED="1359888850721" TEXT="10, &#x6ce8;&#x518c;&#x8f6f;&#x4e2d;&#x65ad;NET_TX_SOFTIRQ&#x4e3a;net_tx_action"/>
<node CREATED="1306674008110" ID="ID_895278445" LINK="#ID_307790411" MODIFIED="1359888874118" TEXT="11, &#x6ce8;&#x518c;&#x8f6f;&#x4e2d;&#x65ad;NET_RX_SOFTIRQ&#x4e3a;net_rx_action"/>
<node CREATED="1306674094600" ID="ID_838867064" MODIFIED="1359889084556" TEXT="12, hotcpu_notifier(dev_cpu_callback, 0)&#xa;&#x6ce8;&#x518c;cpu&#x62d4;&#x51fa;&#x65f6;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;,&#x6e05;&#x9664;&#x6240;&#x62d4;&#x51fa;cpu&#x5bf9;&#x5e94;&#x7684;struct softnet_data&#x7ed3;&#x6784;"/>
<node CREATED="1359888816438" FOLDED="true" ID="ID_1997256690" MODIFIED="1359891315636" TEXT="13, dst_init() : &#x5f53;&#x7f51;&#x7edc;&#x8bbe;&#x5907;(struct net_device)down&#x6216;unregister&#x65f6;&#xa;&#x5982;&#x4f55;&#x5904;&#x7406;&#x8def;&#x7531;&#x6761;&#x76ee;(struct dst_entry)">
<node CREATED="1359890553838" FOLDED="true" ID="ID_1316541466" MODIFIED="1359891231611" TEXT="register_netdevice_notifier(&amp;dst_dev_notifier)&#xa;&#x5728;netdevice&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x6ce8;&#x518c;&#x54cd;&#x5e94;&#x51fd;&#x6570;dst_dev_event">
<node CREATED="1359890637725" FOLDED="true" ID="ID_386114594" MODIFIED="1359891230787" TEXT="&#x5728;&#x7f51;&#x7edc;&#x8bbe;&#x5907;(struct net_device)down&#x6216;unregister&#x65f6;&#xa;&#x8c03;&#x7528;&#x51fd;&#x6570;dst_ifdown)">
<node CREATED="1359890786542" ID="ID_1989427977" MODIFIED="1359891221835" TEXT="&#x5f53;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x6761;&#x76ee;(struct dst_entry)&#x6240;&#x5173;&#x8054;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;(struct net_device)&#xa;down&#x65f6;,&#x5e94;&#x5c06;&#x8def;&#x7531;&#x6761;&#x76ee;(struct dst_entry)&#x7684;&#x8f93;&#x5165;(dst-&gt;input)&#x548c;&#xa;&#x8f93;&#x51fa;(dst-&gt;output)&#x51fd;&#x6570;&#x8bbe;&#x7f6e;&#x4e3a;dst_discard,&#x8868;&#x793a;&#x4e0d;&#x80fd;&#x518d;&#x7ecf;&#x7531;&#x6b64;&#x8bbe;&#x5907;&#x8def;&#x7531;&#x6570;&#x636e;&#x5305;."/>
<node CREATED="1359890786542" ID="ID_742459456" MODIFIED="1359891185483" TEXT="&#x5f53;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x6761;&#x76ee;(struct dst_entry)&#x6240;&#x5173;&#x8054;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;(struct net_device)&#xa;unregister&#x65f6;,&#x5e94;&#x5c06;&#x8def;&#x7531;&#x6761;&#x76ee;(struct dst_entry)&#x5173;&#x8054;&#x5230;&#x73af;&#x56de;&#x63a5;&#x53e3;&#x4e0a;."/>
</node>
</node>
</node>
<node CREATED="1359888827334" FOLDED="true" ID="ID_1947972249" MODIFIED="1359891926742" TEXT="14, dev_mcast_init()&#xa;net/core/dev_mcast.c">
<node CREATED="1359891786082" ID="ID_1228684540" MODIFIED="1359891910605" TEXT="register_pernet_subsys(&amp;dev_mc_net_ops)&#xa;&#x5728;&#x6bcf;&#x4e2a;net&#x521b;&#x5efa;&#x548c;&#x5220;&#x9664;&#x65f6;&#x5728;/proc/net&#x76ee;&#x5f55;&#x4e0b;&#x6dfb;&#x52a0;&#x6216;&#x5220;&#x9664;&#x4ee5;&#x4e0b;proc&#x6587;&#x4ef6;&#xa;/proc/net/dev_mcast"/>
</node>
</node>
</node>
</node>
<node CREATED="1306493834761" FOLDED="true" ID="ID_1686664880" MODIFIED="1419015329160" TEXT="&#x901a;&#x77e5;&#x94fe;">
<node CREATED="1306823616241" FOLDED="true" ID="ID_611346891" MODIFIED="1306825855120" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1306823633024" FOLDED="true" ID="ID_1938672787" MODIFIED="1359856749170" TEXT="struct notifier_block">
<node CREATED="1306823642096" ID="ID_1472412786" MODIFIED="1306825449214">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      notifier_call : &#34987;&#36890;&#30693;&#26102;&#25191;&#34892;&#30340;&#20989;&#25968;,&#27492;&#20989;&#25968;&#36820;&#22238;&#20540;&#30340;&#24847;&#20041;:
    </p>
    <p>
      NOTIFY_OK : &#27491;&#30830;&#22788;&#29702;
    </p>
    <p>
      NOTIFY_DONE : &#23545;&#25152;&#36890;&#30693;&#28040;&#24687;&#19981;&#24863;&#20852;&#36259;
    </p>
    <p>
      NOTIFY_BAD : &#22788;&#29702;&#20986;&#38169;
    </p>
    <p>
      NOTIFY_STOP : &#27491;&#30830;&#22788;&#29702;,&#19981;&#35201;&#35843;&#29992;&#21518;&#32493;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      NOTIFY_STOP_MASK :
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306823652000" ID="ID_973066177" MODIFIED="1306823654234" TEXT="next"/>
<node CREATED="1306823659616" ID="ID_279168067" MODIFIED="1306823851784" TEXT="priority : &#x8be5;&#x51fd;&#x6570;&#x5728;&#x94fe;&#x8868;&#x4e2d;&#x7684;&#x4f18;&#x5148;&#x7ea7;"/>
</node>
</node>
<node CREATED="1306823924585" FOLDED="true" ID="ID_1393350609" MODIFIED="1359856749170" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1306826777203" FOLDED="true" ID="ID_1516086920" MODIFIED="1359856749170">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      inetaddr_chain :
    </p>
    <p>
      &#20195;&#34920;interface&#19978;ipv4&#22320;&#22336;&#30340;&#28155;&#21152;&#21024;&#38500;&#20107;&#20214;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306826865057" ID="ID_1808539937" MODIFIED="1306826878244" TEXT="register_inetaddr_notifier : &#x7528;&#x4e8e;&#x6ce8;&#x518c;&#x8be5;&#x4e8b;&#x4ef6;"/>
<node CREATED="1306826926479" ID="ID_702328404" MODIFIED="1306827136627">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __inet_del_ifa : &#35302;&#21457;NETDEV_DOWN/NETDEV_UP&#20107;&#20214;
    </p>
    <p>
      net/ipv4/devinet.c
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306827089259" ID="ID_151505836" MODIFIED="1306827145018">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __inet_insert_ifa : &#35302;&#21457;NETDEV_UP&#20107;&#20214;
    </p>
    <p>
      net/ipv4/devinet.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306825857626" FOLDED="true" ID="ID_1149470630" MODIFIED="1306827325470">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      inet6addr_chain :
    </p>
    <p>
      &#20195;&#34920;interface&#19978;ipv6&#22320;&#22336;&#30340;&#28155;&#21152;&#21024;&#38500;&#20107;&#20214;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306825929064" ID="ID_707613103" MODIFIED="1306826099658" TEXT="register_inet6addr_notifier : &#x7528;&#x4e8e;&#x6ce8;&#x518c;&#x8be5;&#x4e8b;&#x4ef6;"/>
<node CREATED="1306826126579" ID="ID_1101824622" MODIFIED="1306826194042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv6_add_addr : &#35302;&#21457;NETDEV_UP&#20107;&#20214;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;net/ipv6/addrconf.c
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306826126579" ID="ID_1205142854" MODIFIED="1306826232705">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv6_del_addr : &#35302;&#21457;NETDEV_DOWN&#20107;&#20214;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;net/ipv6/addrconf.c
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306826126579" ID="ID_757635302" MODIFIED="1306826294560">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      addrconf_ifdown : &#35302;&#21457;NETDEV_DOWN&#20107;&#20214;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;net/ipv6/addrconf.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306827258935" FOLDED="true" ID="ID_273054312" MODIFIED="1308736096456">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netdev_chain
    </p>
    <p>
      net/core/dev.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1306827296613" ID="ID_1165926683" MODIFIED="1306827313401" TEXT="register_netdevice_notifier : &#x7528;&#x4e8e;&#x6ce8;&#x518c;&#x8be5;&#x4e8b;&#x4ef6;"/>
<node CREATED="1306827539328" FOLDED="true" ID="ID_1975604224" MODIFIED="1308736093913">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      call_netdevice_notifiers : &#29992;&#20110;&#35302;&#21457;&#35813;&#20107;&#20214;
    </p>
    <p>
      net/core/dev.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1306827624926" ID="ID_1672973033" MODIFIED="1306827663861">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      do_setlink &#35302;&#21457;NETDEV_CHANGEADDR&#20107;&#20214;
    </p>
    <p>
      net/core/rtnetlink.c
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306827687820" ID="ID_426744773" MODIFIED="1306828288614">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dev_change_name&#35302;&#21457;NETDEV_CHANGENAME&#20107;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306827782073" ID="ID_1562233379" MODIFIED="1306827803114" TEXT="netdev_features_change &#x89e6;&#x53d1;NETDEV_FEAT_CHANGE&#x4e8b;&#x4ef6;"/>
<node CREATED="1306827818473" ID="ID_1874868745" MODIFIED="1306827841563" TEXT="netdev_state_change&#x89e6;&#x53d1;NETDEV_CHANGE&#x4e8b;&#x4ef6;"/>
<node CREATED="1306827853016" ID="ID_810407791" MODIFIED="1306827872940" TEXT="netdev_bonding_change&#x89e6;&#x53d1;NETDEV_BONDING_FAILOVER&#x4e8b;&#x4ef6;"/>
<node CREATED="1306827884727" ID="ID_1811752724" MODIFIED="1306827915610" TEXT="dev_open&#x89e6;&#x53d1;NETDEV_PRE_UP/NETDEV_UP&#x4e8b;&#x4ef6;"/>
<node CREATED="1306827925782" ID="ID_619953000" MODIFIED="1306827955204" TEXT="dev_close&#x89e6;&#x53d1;NETDEV_GOING_DOWN/NETDEV_DOWN&#x4e8b;&#x4ef6;"/>
<node CREATED="1306827999237" ID="ID_32656788" MODIFIED="1306828018682" TEXT="dev_addr_add&#x89e6;&#x53d1;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828037460" ID="ID_402061785" MODIFIED="1306828052246" TEXT="dev_addr_del&#x89e6;&#x53d1;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828063651" ID="ID_1128704347" MODIFIED="1306828075954" TEXT="dev_addr_add_multiple&#x89e6;&#x53d1;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828085538" ID="ID_430184423" MODIFIED="1306828097164" TEXT="dev_addr_del_multiple&#x89e6;&#x53d1;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828111442" ID="ID_1492873675" MODIFIED="1306828130333" TEXT="dev_change_flags&#x89e6;&#x53d1;NETDEV_CHANGE&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828139905" ID="ID_1423473664" MODIFIED="1306828153617" TEXT="dev_set_mtu&#x89e6;&#x53d1;NETDEV_CHANGEMTU&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828162881" ID="ID_506110298" MODIFIED="1306828176540" TEXT="dev_set_mac_address&#x89e6;&#x53d1;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828189024" ID="ID_420908523" MODIFIED="1306828204171" TEXT="dev_ifsioc&#x89e6;&#x53d1;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;"/>
<node CREATED="1306828222975" ID="ID_1276496585" MODIFIED="1306828238243" TEXT="register_netdevice&#x89e6;&#x53d1;NETDEV_REGISTER&#x4e8b;&#x4ef6;"/>
</node>
</node>
<node CREATED="1306826520425" FOLDED="true" ID="ID_1074131468" MODIFIED="1306826668244">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netlink_chain
    </p>
    <p>
      net/netlink/af_netlink.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1306826627334" ID="ID_42867181" MODIFIED="1306826666790">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netlink_release : &#35302;&#21457; NETLINK_URELEASE &#20107;&#20214;
    </p>
    <p>
      net/netlink/af_netlink.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1306823966008" FOLDED="true" ID="ID_1416925154" MODIFIED="1419015328304" TEXT="&#x5e38;&#x89c1;&#x64cd;&#x4f5c;&#x51fd;&#x6570;">
<node CREATED="1306824795956" ID="ID_333092018" MODIFIED="1306824834455" TEXT="notifier_chain_register : &#x5728;&#x67d0;&#x4e2a;&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x6ce8;&#x518c;&#x56de;&#x6389;&#x51fd;&#x6570;"/>
<node CREATED="1306824795956" ID="ID_336133056" MODIFIED="1306824880090" TEXT="notifier_chain_unregister : &#x5728;&#x67d0;&#x4e2a;&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x89e3;&#x6ce8;&#x518c;&#x56de;&#x6389;&#x51fd;&#x6570;"/>
<node CREATED="1306825506578" ID="ID_218411417" MODIFIED="1306825549893" TEXT="notifier_call_chain : &#x5bf9;&#x67d0;&#x4e2a;&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x8fdb;&#x884c;&#x901a;&#x77e5;"/>
</node>
</node>
<node CREATED="1306649850952" FOLDED="true" ID="ID_1909230678" MODIFIED="1459303792089" TEXT="ipv6">
<node CREATED="1457939783796" FOLDED="true" ID="ID_1029936968" MODIFIED="1457940920000" TEXT="ipv6&#x5730;&#x5740;&#x67b6;&#x6784;">
<node CREATED="1457939850020" ID="ID_413987570" MODIFIED="1457939854685" TEXT="&#x7ec4;&#x64ad;&#x5730;&#x5740;">
<node CREATED="1457939857172" ID="ID_1865169275" MODIFIED="1457939885741">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_address_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457939981222" ID="ID_473563082" MODIFIED="1457940004589" TEXT="&#x7ec4;&#x64ad;&#x5730;&#x5740;&#x56fa;&#x5b9a;&#x4ee5;0xFF&#x5f00;&#x5934;"/>
<node CREATED="1457940045921" ID="ID_497967255" MODIFIED="1457940051821" TEXT="flags">
<node CREATED="1457940053070" ID="ID_1204355119" MODIFIED="1457940068117">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_address_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457940801511" ID="ID_703064933" MODIFIED="1457940874449" TEXT="T&#x8868;&#x793a;&#x7ec4;&#x64ad;&#x5730;&#x5740;&#x662f;&#x4e34;&#x65f6;&#x7684;&#x8fd8;&#x662f;IANA&#x7ec4;&#x7ec7;&#x56fa;&#x5b9a;&#x5206;&#x914d;&#x7684;"/>
<node CREATED="1457940884230" ID="ID_936021901" MODIFIED="1457940901890" TEXT="P [RFC3306]"/>
<node CREATED="1457940913881" ID="ID_240725981" MODIFIED="1457940917326" TEXT="R [RFC3956]"/>
</node>
</node>
<node CREATED="1457940654450" FOLDED="true" ID="ID_861984061" MODIFIED="1457940760314" TEXT="scope">
<node CREATED="1457940657974" ID="ID_337748840" MODIFIED="1457940659048" TEXT="0  reserved"/>
<node CREATED="1457940670293" ID="ID_569435156" MODIFIED="1457940671351" TEXT="1  Interface-Local scope"/>
<node CREATED="1457940682048" ID="ID_90696579" MODIFIED="1457940683030" TEXT="2  Link-Local scope"/>
<node CREATED="1457940710158" ID="ID_1074612111" MODIFIED="1457940711103" TEXT="3  reserved"/>
<node CREATED="1457940695392" ID="ID_1765475192" MODIFIED="1457940696339" TEXT="4  Admin-Local scope"/>
<node CREATED="1457940723303" ID="ID_1922925122" MODIFIED="1457940724348" TEXT="5  Site-Local scope"/>
<node CREATED="1457940735088" ID="ID_88130486" MODIFIED="1457940736108" TEXT="8  Organization-Local scope"/>
<node CREATED="1457940746395" ID="ID_1338259951" MODIFIED="1457940747418" TEXT="E  Global scope"/>
<node CREATED="1457940756571" ID="ID_466194249" MODIFIED="1457940757576" TEXT="F  reserved"/>
</node>
</node>
</node>
</node>
<node CREATED="1453421347740" FOLDED="true" ID="ID_607187100" MODIFIED="1458695329838" TEXT="&#x57fa;&#x672c;&#x6846;&#x67b6;">
<node CREATED="1453433040970" ID="ID_689442000" MODIFIED="1458250499229">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_process_stages.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453421839264" FOLDED="true" ID="ID_328253134" MODIFIED="1458251443058" TEXT="IPv6&#x5305;&#x7ed3;&#x6784;">
<node CREATED="1453421861763" FOLDED="true" ID="ID_900912168" MODIFIED="1457857715242">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_format_1.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1453421941094" ID="ID_461121896" MODIFIED="1457852651567" TEXT="version : 6"/>
<node CREATED="1453422182235" FOLDED="true" ID="ID_885427445" MODIFIED="1457852766808">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      class of traffic
    </p>
    <p>
      &#23545;&#24212;&#20110;ipv4&#20013;&#30340;TOS
    </p>
    <p>
      QOS&#26631;&#31614;&#65292;&#20998;&#20026;&#21069;&#38754;6 bit&#30340;DSCP&#21644;&#21518;&#38754;2 bit&#30340;ECN&#12290;
    </p>
    <p>
      DSCP&#21253;&#21547;64&#20010;&#32534;&#30721;&#65292;&#27599;&#19968;&#31181;&#20195;&#34920;&#19968;&#31181;QOS&#21547;&#20041;&#65292;&#27604;&#22914;&#23454;&#26102;&#20256;&#36755;&#65292;&#23613;&#21147;&#20256;&#36755;&#65292;&#31561;
    </p>
    <p>
      &#20197;&#20415;&#20013;&#38388;&#35774;&#22791;&#30693;&#36947;&#22914;&#20309;&#20026;&#27492;&#21253;&#25552;&#20379;QOS&#26381;&#21153;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1453422290769" ID="ID_1000060043" MODIFIED="1453422299781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_header_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457854075735" ID="ID_525018784" MODIFIED="1457854695077">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      flow label
    </p>
    <p>
      &#27969;&#26631;&#31614;&#65292;&#29992;&#20110;&#26631;&#35782;&#19968;&#26465;&#27969;&#65292;&#19968;&#33324;&#19968;&#20010;5&#20803;&#32452;(&#28304;IP&#65292;&#30446;&#30340;IP&#65292;&#21327;&#35758;&#65292;&#28304;&#31471;&#21475;&#65292;&#30446;&#30340;&#31471;&#21475;)&#20195;&#34920;&#19968;&#26465;&#27969;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26377;&#30340;&#26102;&#20505;&#21253;&#20250;&#34987;&#20998;&#29255;&#25110;&#32773;&#34987;&#21152;&#23494;&#65292;&#27492;&#26102;&#23601;&#26080;&#27861;&#35299;&#26512;layer 4&#22836;&#37096;&#65292;&#20174;&#32780;&#26080;&#27861;&#33719;&#24471;&#27969;&#26631;&#35782;&#12290;&#23558;&#27969;&#26631;&#31614;&#25918;&#22312;IPV6&#22836;&#37096;&#20013;&#30340;&#22909;&#22788;&#23601;&#26159;&#65292;&#26080;&#38656;&#20877;&#35299;&#26512;layer 4&#22836;&#37096;&#21363;&#21487;&#26631;&#35782;&#19968;&#26465;&#27969;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453422519753" ID="ID_1465605164" MODIFIED="1457856062353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      payload length
    </p>
    <p>
      &#36127;&#36733;&#30340;&#24635;&#38271;&#24230;&#65292;&#21253;&#25324;&#25193;&#23637;&#22836;&#37096;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      16bit&#30340;&#26368;&#22823;&#34920;&#31034;&#20026;65535&#65292;&#25152;&#20197;IP&#21253;&#26368;&#38271;&#20026;65535&#12290;
    </p>
    <p>
      &#20294;&#26159;&#19968;&#33324;2&#23618;&#35774;&#22791;&#30340;&#26368;&#22823;&#24103;&#38271;&#36828;&#23567;&#20110;&#27492;&#20540;&#65292;&#24403;IP&#21253;&#30340;&#38271;&#24230;&#22823;&#20110;2&#23618;&#35774;&#22791;&#30340;&#24103;&#38271;&#38480;&#21046;&#26102;&#65292;&#23601;&#38656;&#35201;&#20998;&#21253;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19981;&#36807;&#22914;&#26524;&#35774;&#22791;&#25903;&#25345;jumbo frame&#65292;&#20063;&#23601;&#26159;&#25903;&#25345;&#22823;&#20110;65535&#30340;payload&#30340;&#26102;&#20505;&#65292;&#21253;&#30340;&#30495;&#27491;&#38271;&#24230;&#19981;&#26159;&#29992;payload length&#34920;&#31034;&#65292;&#32780;&#26159;&#22312;&#19979;&#19968;&#20010;&#25193;&#23637;&#22836;&#37096;<i>Hop-by-Hop&#20013;</i>&#21253;&#21547;&#20102;&#19968;&#20010;jumbo payload&#36873;&#39033;&#65292;&#29992;&#19968;&#20010;32&#20301;&#30340;&#23383;&#27573;&#34920;&#31034;&#36127;&#36733;&#38271;&#24230;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;payload length&#20026;0&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423885878" FOLDED="true" ID="ID_1251548001" MODIFIED="1457857054740">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      next header
    </p>
    <p>
      &#19979;&#19968;&#20010;&#22836;&#37096;&#30340;&#31867;&#22411;&#65292;&#25110;&#20026;&#25193;&#23637;&#22836;&#65292;&#25110;&#20026;&#20256;&#36755;&#23618;&#22836;&#37096;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457856925410" ID="ID_1607106771" MODIFIED="1457856975040">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_format_2.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457856925410" ID="ID_898770177" MODIFIED="1457857008616">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_format_3.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457856925410" ID="ID_1676110513" MODIFIED="1457857023243">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_format_4.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457856925410" ID="ID_438376117" MODIFIED="1457857037117">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_format_5.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457856925410" ID="ID_719012226" MODIFIED="1457857046896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_format_6.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1453423643476" ID="ID_1791395735" MODIFIED="1457856867740">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hop limit
    </p>
    <p>
      &#23545;&#24212;&#20110;ipv4&#20013;&#30340; TTL
    </p>
    <p>
      &#36339;&#25968;&#38480;&#21046;&#65292;&#27599;&#32463;&#36807;&#19968;&#20010;&#36335;&#30001;&#35774;&#22791;&#65292;&#20854;&#20540;&#20943;1&#65292;&#24403;&#20854;&#23567;&#20110;&#31561;&#20110;1&#26102;&#65292;&#20013;&#38388;&#35774;&#22791;&#21521;&#28304;&#21457;&#36865;ICMP&#21578;&#30693;&#38169;&#35823;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453424011101" ID="ID_770963397" MODIFIED="1457857150917">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      source IP address
    </p>
    <p>
      &#28304;IP&#22320;&#22336;&#65292;xxxx::xxxx&#65292;128&#20301;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453424024305" ID="ID_1556861781" MODIFIED="1457857154827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      destination IP address
    </p>
    <p>
      &#30446;&#30340;IP&#22320;&#22336;&#65292;xxxx::xxxx&#65292;128&#20301;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457857382470" FOLDED="true" ID="ID_1107480299" MODIFIED="1458194537677" TEXT="&#x4e0e;IPv4&#x5305;&#x7ed3;&#x6784;&#x7684;&#x533a;&#x522b;">
<node CREATED="1426268803216" ID="ID_499289121" MODIFIED="1457857466893">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_header_1.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1426268945082" ID="ID_1621033957" MODIFIED="1426268993624" TEXT="&#x4e0e;IPv4&#x76f8;&#x6bd4;&#xff0c;&#x4ece;&#x5934;&#x90e8;&#x4e2d;&#x79fb;&#x9664;&#x7684;&#x57df;&#xff1a;">
<node CREATED="1426269006081" ID="ID_1725219397" MODIFIED="1426269087778">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      IHL&#65292;&#22836;&#37096;&#38271;&#24230;
    </p>
    <p>
      &#22240;&#20026;IPv6&#22836;&#37096;&#38271;&#24230;&#22266;&#23450;&#20026;40&#23383;&#33410;&#65292;&#25152;&#20197;IPv6&#19981;&#20877;&#38656;&#35201;&#27492;&#22495;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426269096448" ID="ID_349283198" MODIFIED="1426269183763">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Identification, Flags, Fragment Offset
    </p>
    <p>
      &#36825;&#20123;&#22495;&#34987;&#26032;&#30340;&#25193;&#23637;&#22836;&#37096;<span class="cCMTDefault" style="font-weight: bold; font-style: normal"><b>Fragment Header</b></span>&#25152;&#21462;&#20195;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426269203874" ID="ID_1431464394" MODIFIED="1426269309765">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Header Checksum
    </p>
    <p>
      L4&#22836;&#37096;&#20013;&#24050;&#32463;&#26377;checksum&#20102;&#65292;&#19988;&#20854;checksum&#24050;&#32463;&#21253;&#21547;&#20102;&#20266;&#22836;&#37096;&#65292;&#25152;&#20197;IPv6&#20013;&#27809;&#26377;&#24517;&#35201;&#20877;&#21253;&#21547;checksum
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426269315525" ID="ID_929028502" MODIFIED="1426269396876">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Options, Padding
    </p>
    <p>
      Options&#34987;&#25193;&#23637;&#22836;&#37096;&#25152;&#26367;&#20195;&#65292;&#32780;IPv6&#35201;&#27714;&#25152;&#26377;&#25193;&#23637;&#22836;&#37096;&#37117;&#26159;8&#23383;&#33410;&#23545;&#40784;&#65292;&#25152;&#20197;Padding&#20063;&#24050;&#26080;&#24517;&#35201;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426269434428" ID="ID_1926395840" MODIFIED="1426269459180" TEXT="&#x4e0e;IPv4&#x76f8;&#x6bd4;&#xff0c;&#x65b0;&#x589e;&#x52a0;&#x7684;&#x57df;&#xff1a;">
<node CREATED="1426269461323" ID="ID_1529511638" MODIFIED="1457857674275">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Flow Lable
    </p>
    <p>
      &#27969;&#26631;&#31614;&#65292;&#23427;&#20195;&#34920;&#19968;&#20010;5&#20803;&#32452;(&#28304;IP&#65292;&#30446;&#30340;IP&#65292;&#21327;&#35758;&#65292;&#28304;&#31471;&#21475;&#65292;&#30446;&#30340;&#31471;&#21475;)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426269434428" ID="ID_213165314" MODIFIED="1426269886421" TEXT="&#x4e0e;IPv4&#x76f8;&#x6bd4;&#xff0c;&#x542b;&#x4e49;&#x5b8c;&#x5168;&#x76f8;&#x540c;&#x7684;&#x57df;&#xff1a;">
<node CREATED="1426269929316" ID="ID_1502373908" MODIFIED="1426269934072" TEXT="Version"/>
<node CREATED="1426269936277" ID="ID_325575054" MODIFIED="1426269942621" TEXT="Source Address"/>
<node CREATED="1426269943250" ID="ID_826643872" MODIFIED="1426269949343" TEXT="Destination Address"/>
</node>
<node CREATED="1426269434428" ID="ID_875272116" MODIFIED="1426269921535" TEXT="&#x4e0e;IPv4&#x76f8;&#x6bd4;&#xff0c;&#x542b;&#x4e49;&#x76f8;&#x8fd1;&#x4f46;&#x7565;&#x6709;&#x533a;&#x522b;&#x7684;&#x57df;&#xff1a;">
<node CREATED="1426269995067" ID="ID_1696952140" MODIFIED="1426270048474">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Type of Service&#34987;&#26367;&#25442;&#20026;Traffic Class
    </p>
    <p>
      &#36825;2&#20010;&#22495;&#37117;&#29992;&#20110;QoS
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426270052744" ID="ID_827514771" MODIFIED="1426270211381">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Total Length&#34987;&#26367;&#25442;&#20026;Payload Length
    </p>
    <p>
      &#22312;IPv4&#20013;&#65292;Total Length&#21253;&#21547;&#65306;IPv4&#22836;&#37096;&#65292;Options&#65292;Payload
    </p>
    <p>
      &#22312;IPv6&#20013;&#65292;Payload Length&#21253;&#21547;&#65306;Extension Header&#65292;Payload
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426270217869" ID="ID_1091951624" MODIFIED="1426270341154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Protocol&#34987;&#26367;&#25442;&#20026;Next Header
    </p>
    <p>
      IPv4&#20013;&#65292;Protocol&#20195;&#34920;Payload&#30340;&#31867;&#22411;
    </p>
    <p>
      IPv6&#20013;&#65292;Next Header&#20195;&#34920;&#19979;&#19968;&#22836;&#37096;&#30340;&#31867;&#22411;&#65292;&#26082;&#26377;&#21487;&#33021;&#26159;Payload&#20063;&#26377;&#21487;&#33021;&#26159;Extension Header&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426270373613" ID="ID_133852487" MODIFIED="1426270418307">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Time to Live&#34987;&#26367;&#25442;&#20026;Hop Limit
    </p>
    <p>
      &#36825;2&#20010;&#22495;&#37117;&#34920;&#31034;&#20801;&#35768;&#32463;&#36807;&#30340;&#36339;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1453424032061" FOLDED="true" ID="ID_1075009937" MODIFIED="1458194535462">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      extension header
    </p>
    <p>
      &#25193;&#23637;&#22836;&#37096;
    </p>
  </body>
</html></richcontent>
<node CREATED="1426268909345" ID="ID_368177203" MODIFIED="1457857833995">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_header_2.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457858228865" FOLDED="true" ID="ID_361531433" MODIFIED="1457859067800">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25193;&#23637;&#22836;&#37096;&#30340;&#35201;&#27714;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457858228865" ID="ID_783199540" MODIFIED="1457858359134">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25193;&#23637;&#22836;&#37096;&#30340;&#38271;&#24230;&#24517;&#39035;&#26159;8&#30340;&#25972;&#25968;&#20493;&#65292;&#22240;&#27492;&#26377;&#30340;&#25193;&#23637;&#22836;&#38656;&#35201;&#22635;&#20805;&#20197;&#28385;&#36275;&#27492;&#35201;&#27714;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457858417753" ID="ID_358464970" MODIFIED="1457858558325">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#26469;&#35828;&#65292;&#25193;&#23637;&#22836;&#37096;&#21482;&#26159;&#26368;&#32456;&#30340;&#30446;&#30340;&#20027;&#26426;&#38656;&#35201;&#26816;&#26597;&#65292;&#20294;&#26159;hop-by-hop&#36880;&#36339;&#25193;&#23637;&#22836;&#37096;&#38500;&#22806;&#12290;
    </p>
    <p>
      &#36335;&#24452;&#19978;&#30340;&#27599;&#19968;&#20010;&#33410;&#28857;&#37117;&#35201;&#26816;&#26597;hop-by-hop&#36880;&#36339;&#25193;&#23637;&#22836;&#37096;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426270482854" FOLDED="true" ID="ID_393645533" MODIFIED="1457858826734">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Extension Header Order
    </p>
    <p>
      &#25193;&#23637;&#22836;&#37096;&#30340;&#20986;&#29616;&#39034;&#24207;
    </p>
  </body>
</html></richcontent>
<node CREATED="1426270503643" ID="ID_915140445" MODIFIED="1426270505219" TEXT="IPv6 header"/>
<node CREATED="1426270514040" ID="ID_571322678" MODIFIED="1426270514989" TEXT="Hop-by-Hop Options header"/>
<node CREATED="1426270523825" ID="ID_1435961415" MODIFIED="1426270524874" TEXT="Destination Options header"/>
<node CREATED="1426270533652" ID="ID_1884328601" MODIFIED="1426270534660" TEXT="Routing header"/>
<node CREATED="1426270543018" ID="ID_373774403" MODIFIED="1426270543992" TEXT="Fragment header"/>
<node CREATED="1426270552608" ID="ID_1029612202" MODIFIED="1426270553428" TEXT="Authentication header"/>
<node CREATED="1426270563405" ID="ID_1082351513" MODIFIED="1426270564205" TEXT="Encapsulating Security Payload header"/>
<node CREATED="1426270572720" ID="ID_638310839" MODIFIED="1426270573475" TEXT="Destination Options header"/>
<node CREATED="1426270581209" ID="ID_1120121216" MODIFIED="1426270581990" TEXT="upper-layer header"/>
</node>
<node CREATED="1457858681796" ID="ID_81075148" MODIFIED="1457858767513" TEXT="&#x4e00;&#x822c;&#x6765;&#x8bf4;&#xff0c;&#x67d0;&#x4e00;&#x79cd;&#x6269;&#x5c55;&#x5934;&#x90e8;&#x5728;&#x4e00;&#x4e2a;&#x5305;&#x4e2d;&#x53ea;&#x51fa;&#x73b0;&#x4e00;&#x6b21;&#xff0c;&#x4f46;Destination Options&#x6269;&#x5c55;&#x5934;&#x90e8;&#x9664;&#x5916;&#xff0c;&#x5b83;&#x53ef;&#x80fd;&#x4f1a;&#x51fa;&#x73b0;2&#x6b21;&#x3002;"/>
<node CREATED="1457858844800" ID="ID_765665528" MODIFIED="1457858874071" TEXT="&#x5bf9;&#x4e8e;&#x4e0d;&#x8ba4;&#x8bc6;&#x7684;&#x6269;&#x5c55;&#x5934;&#x90e8;&#xff0c;&#x63a5;&#x6536;&#x8005;&#x5e94;&#x8be5;&#x4e22;&#x5f03;&#x5305;&#x5e76;&#x5411;&#x6e90;&#x53d1;&#x9001;&#x4e00;&#x4e2a;ICMP&#x5305;&#x3002;"/>
<node CREATED="1457858966966" ID="ID_1867800535" MODIFIED="1457859065271" TEXT="&#x503c;59 (No Next Header)&#x4ee3;&#x8868;&#x6ca1;&#x6709;&#x4e0b;&#x4e00;&#x4e2a;&#x5934;&#x90e8;&#x4e86;&#xff0c;&#x6b64;&#x65f6;&#x5373;&#x4f7f;IPV6&#x5934;&#x90e8;&#x4e2d;&#x7684;payload length&#x6307;&#x793a;&#x8fd8;&#x6709;&#x5185;&#x5bb9;&#x4e5f;&#x5e94;&#x8be5;&#x5ffd;&#x7565;&#x540e;&#x7eed;&#x5185;&#x5bb9;&#x3002;"/>
</node>
<node CREATED="1311003336612" FOLDED="true" ID="ID_1707521508" MODIFIED="1457859334895">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Hop-by-Hop Options header &#65306;&#36880;&#36339;&#36873;&#39033;&#39318;&#37096;
    </p>
  </body>
</html></richcontent>
<node CREATED="1426271638966" ID="ID_178061319" MODIFIED="1457858173023">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_header_options_1.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1426271654190" ID="ID_1775058902" MODIFIED="1426271672619" TEXT="Next Header &#xff1a;&#x4e0b;&#x4e00;&#x5934;&#x90e8;&#x7684;&#x7c7b;&#x578b;"/>
<node CREATED="1426271673357" ID="ID_44517023" MODIFIED="1426271799823">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Hdr Ext Len &#65306;&#26412;&#25193;&#23637;&#22836;&#37096;&#30340;&#38271;&#24230;
    </p>
    <p>
      &#20197;8&#23383;&#33410;&#20026;&#21333;&#20301;&#65292;&#20294;&#26159;&#19981;&#21253;&#21547;&#24320;&#22987;&#30340;8&#23383;&#33410;&#65292;&#20063;&#23601;&#26159;&#35828;&#22914;&#26524;&#20540;&#20026;1&#65292;&#21017;&#26412;&#25193;&#23637;&#22836;&#37096;&#30340;&#23454;&#38469;&#38271;&#24230;&#20026;(1+1)*8=16&#23383;&#33410;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426271808301" ID="ID_707994810" MODIFIED="1426271955015" TEXT="options &#xff1a;&#x5305;&#x542b;&#x591a;&#x4e2a;option">
<node CREATED="1426271861488" ID="ID_1918296147" MODIFIED="1457858180153">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_header_options_2.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1426271969481" ID="ID_290776135" MODIFIED="1426271986515" TEXT="Option Type &#xff1a;option&#x7684;&#x7c7b;&#x578b;">
<node CREATED="1426272025875" ID="ID_193496973" MODIFIED="1426272362627">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      option type&#30340;&#26368;&#39640;2&#20301;&#34920;&#31034;&#25509;&#25910;&#26041;&#19981;&#35748;&#35782;&#27492;option type&#26102;&#24212;&#35813;&#37319;&#21462;&#30340;&#21160;&#20316;
    </p>
    <pre class="newpage">00 &#65306;&#24573;&#30053;&#27492;option&#32487;&#32493;&#22788;&#29702;&#26412;&#25193;&#23637;&#22836;&#37096;</pre>
    <p>
      01 &#65306;&#20002;&#24323;&#27492;&#21253;
    </p>
    <p>
      10 &#65306;&#20002;&#24323;&#27492;&#21253;&#65292;&#26080;&#35770;&#26412;&#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#26159;&#19981;&#26159;&#32452;&#25773;&#22320;&#22336;&#65292;&#37117;&#21521;&#21253;&#30340;&#28304;&#22320;&#22336;&#21457;&#36865;&#19968;&#20010;ICMP&#21253;&#65292;&#25552;&#31034;&#19981;&#35748;&#35782;&#30340;&#36873;&#39033;&#31867;&#22411;
    </p>
    <p>
      11 &#65306;&#20002;&#24323;&#27492;&#21253;&#65292;&#20165;&#24403;&#27492;&#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#26159;&#32452;&#25773;&#22320;&#22336;&#26102;&#65292;&#21521;&#26412;&#21253;&#30340;&#28304;&#22320;&#22336;&#21457;&#36865;&#19968;&#20010;ICMP&#21253;&#65292;&#25552;&#31034;&#19981;&#35748;&#35782;&#30340;&#36873;&#39033;&#31867;&#22411;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426272025875" ID="ID_1797532601" MODIFIED="1426272533627">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      option type&#30340;&#31532;3&#39640;&#20301;&#34920;&#31034;&#27492;option&#30340;data&#26159;&#21542;&#20250;&#22312;&#36335;&#30001;&#36807;&#31243;&#20013;&#34987;&#25913;&#21464;
    </p>
    <p>
      0 &#65306;&#27492;option&#30340;data&#19981;&#20250;&#22312;&#36335;&#30001;&#36807;&#31243;&#20013;&#34987;&#25913;&#21464;
    </p>
    <p>
      1 &#65306;&#27492;option&#30340;data&#20250;&#22312;&#36335;&#30001;&#36807;&#31243;&#20013;&#34987;&#25913;&#21464;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426272619472" ID="ID_514573536" MODIFIED="1426272667517" TEXT="Opt Data Len &#xff1a;option&#x7684;&#x957f;&#x5ea6;&#xff0c;&#x5305;&#x542b;&#x4e86;&#x524d;&#x9762;&#x7684;Option Type&#x548c;Opt Data Len"/>
</node>
<node CREATED="1426272786829" ID="ID_12133661" MODIFIED="1426272809177" TEXT="&#x4e24;&#x4e2a;&#x7528;&#x4e8e;&#x586b;&#x5145;&#x5bf9;&#x9f50;&#x7684;&#x7279;&#x6b8a;option">
<node CREATED="1426272844076" ID="ID_139384992" MODIFIED="1457858188592">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_header_options_3.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1426272972096" ID="ID_668839542" MODIFIED="1426273020970" TEXT="Pad1 option&#x9664;&#x4e86;type&#x57df;&#x4ee5;&#x5916;&#x6ca1;&#x6709;&#x5176;&#x4ed6;&#x57df;&#xff0c;&#x7528;&#x4e8e;&#x586b;&#x5145;1&#x5b57;&#x8282;&#x6765;&#x8fdb;&#x884c;&#x5bf9;&#x9f50;"/>
</node>
<node CREATED="1426272955845" ID="ID_1991831316" MODIFIED="1457858194457">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_header_options_4.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1426272972096" ID="ID_767014705" MODIFIED="1426273079561" TEXT="PadN option&#x7528;&#x4e8e;&#x586b;&#x5145;N&#x5b57;&#x8282;&#x6765;&#x8fdb;&#x884c;&#x5bf9;&#x9f50;&#xff0c;&#x6ce8;&#x610f;Opt Data Len&#x5e94;&#x5199;&#x4e3a;N-2"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1311003374515" ID="ID_393707528" MODIFIED="1426270636309" TEXT="Destination Options header &#xff1a;&#x76ee;&#x7684;&#x9009;&#x9879;&#x9996;&#x90e8;"/>
<node CREATED="1311003399818" FOLDED="true" ID="ID_2433763" MODIFIED="1457859462082" TEXT="Routing header &#xff1a;&#x9009;&#x8def;&#x6269;&#x5c55;&#x9996;&#x90e8;">
<node CREATED="1426273713110" ID="ID_1035975360" MODIFIED="1457858153643">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_routing_header.jpg" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1426273802047" ID="ID_520652523" MODIFIED="1426273984961" TEXT="Routing Type &#xff1a;&#x76ee;&#x524d;&#x53ea;&#x652f;&#x6301;0&#xff0c;&#x4ee5;&#x540e;&#x53ef;&#x80fd;&#x652f;&#x6301;&#x5176;&#x5b83;&#x7c7b;&#x578b;"/>
<node CREATED="1426273987112" ID="ID_1856087615" MODIFIED="1426274032166" TEXT="Segments Left &#xff1a;&#x540e;&#x9762;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;&#x5217;&#x8868;&#x4e2d;&#x8fd8;&#x6709;&#x591a;&#x5c11;&#x4e2a;&#x6ca1;&#x6709;&#x8bbf;&#x95ee;"/>
</node>
<node CREATED="1426273810482" ID="ID_1746866286" MODIFIED="1426273908694" TEXT="&#x6b64;&#x6269;&#x5c55;&#x5934;&#x90e8;&#x88ab;&#x53d1;&#x9001;&#x8282;&#x70b9;&#x7528;&#x4e8e;&#x6307;&#x5b9a;&#x6b64;&#x5305;&#x9700;&#x8981;&#x7ecf;&#x8fc7;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;&#xff0c;&#x5b83;&#x7c7b;&#x4f3c;&#x4e8e;IPv4&#x4e2d;&#x7684;Loose Source&#x548c;Record Route&#x9009;&#x9879;"/>
<node CREATED="1426274804322" ID="ID_31755533" MODIFIED="1457858163431">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_routing_header_2.jpg" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1311003434761" FOLDED="true" ID="ID_1428423469" MODIFIED="1457859464544" TEXT="Fragment header &#xff1a;&#x5206;&#x7247;&#x6269;&#x5c55;&#x9996;&#x90e8;">
<node CREATED="1426281333979" ID="ID_1595940141" MODIFIED="1457857861121">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="../network_protocol/pic/ipv6_fragment_header.jpg" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426270671507" ID="ID_1134915465" MODIFIED="1426270682618" TEXT="Authentication header &#xff1a;&#x8ba4;&#x8bc1;&#x6269;&#x5c55;&#x9996;&#x90e8;"/>
<node CREATED="1426270693405" ID="ID_949588636" MODIFIED="1426270705347" TEXT="Encapsulating Security Payload header &#xff1a;&#x52a0;&#x5bc6;&#x5c01;&#x88c5;&#x6269;&#x5c55;&#x9996;&#x90e8;"/>
</node>
</node>
</node>
<node CREATED="1458597810241" ID="ID_9233548" MODIFIED="1458597820252" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1458597846365" FOLDED="true" ID="ID_1960501552" MODIFIED="1459050131068">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct rt6_info
    </p>
    <p>
      &#36335;&#30001;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458598051629" ID="ID_1514306731" MODIFIED="1458598059428" TEXT="struct dst_entry dst">
<node CREATED="1458598230911" ID="ID_115311204" MODIFIED="1458598245744" TEXT="&#x8def;&#x7531;&#x7f13;&#x5b58;&#x4e2d;&#x534f;&#x8bae;&#x65e0;&#x5173;&#x90e8;&#x5206;"/>
</node>
<node CREATED="1458598080197" ID="ID_201150310" MODIFIED="1458598081033" TEXT="struct fib6_table *rt6i_table">
<node CREATED="1458598251377" ID="ID_1206953379" MODIFIED="1458598261935" TEXT="&#x8def;&#x7531;&#x4fe1;&#x606f;&#x6240;&#x5728;&#x7684;&#x8def;&#x7531;&#x8868;"/>
</node>
<node CREATED="1458598088834" ID="ID_1934555555" MODIFIED="1458598089581" TEXT="struct fib6_node *rt6i_node">
<node CREATED="1458598266273" ID="ID_1716127537" MODIFIED="1458598276347" TEXT="&#x8def;&#x7531;&#x4fe1;&#x606f;&#x6240;&#x5728;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;"/>
</node>
<node CREATED="1458598097559" ID="ID_95221903" MODIFIED="1458598098202" TEXT="struct in6_addr rt6i_gateway">
<node CREATED="1458598280647" ID="ID_1806204653" MODIFIED="1458598389997">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19979;&#19968;&#36339; / &#32593;&#20851;&#65292;&#21487;&#33021;&#27809;&#26377;&#65292;&#21462;&#20915;&#20110;&#36335;&#30001;&#31867;&#22411;
    </p>
    <p>
      &#27604;&#22914;&#36335;&#30001;&#20026;&#26412;&#22320;&#36335;&#30001;&#65292;&#25110;&#32773;&#20986;&#25509;&#21475;&#20026;tunnel&#22914;ppp, sit&#26102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458598106286" ID="ID_932989063" MODIFIED="1458598106960" TEXT="struct list_head rt6i_siblings">
<node CREATED="1458598403986" ID="ID_151273149" MODIFIED="1458598447304" TEXT="&#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x76f8;&#x540c;&#x4e14;&#x5177;&#x6709;&#x76f8;&#x540c;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;"/>
</node>
<node CREATED="1458598114843" ID="ID_908288666" MODIFIED="1458598115427" TEXT="unsigned int rt6i_nsiblings">
<node CREATED="1458598490889" ID="ID_1124136183" MODIFIED="1458598515354" TEXT="&#x4e0a;&#x9762;&#x94fe;&#x8868;&#x4e2d;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x7684;&#x4e2a;&#x6570;"/>
</node>
<node CREATED="1458598123369" ID="ID_677971057" MODIFIED="1458598124023" TEXT="atomic_t rt6i_ref">
<node CREATED="1458598518375" ID="ID_1379564917" MODIFIED="1458598522509" TEXT="&#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
</node>
<node CREATED="1458598130972" FOLDED="true" ID="ID_702123881" MODIFIED="1458598713217">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct rt6key rt6i_dst
    </p>
    <p>
      &#30446;&#30340;&#32593;&#27573;&#65292;&#22312;destination specific routing&#26102;&#29992;&#20110;&#19982;search key&#20013;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#27604;&#36739;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458598527559" ID="ID_1657892768" MODIFIED="1458598563723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct in6_addr addr
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458598572446" ID="ID_164269425" MODIFIED="1458598575902" TEXT="int plen"/>
</node>
<node CREATED="1458598138862" FOLDED="true" ID="ID_827400061" MODIFIED="1458952603514" TEXT="u32 rt6i_flags">
<node CREATED="1458598851268" ID="ID_1093943220" MODIFIED="1458598867599" TEXT="RTF_UP   (1 &lt;&lt; 0)">
<node CREATED="1458598896045" ID="ID_1649058300" MODIFIED="1458598913314" TEXT="&#x8def;&#x7531;&#x662f;active&#x7684;&#xff0c;&#x53ef;&#x88ab;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1458598851268" ID="ID_1077217220" MODIFIED="1458598892863" TEXT="RTF_GATEWAY   (1 &lt;&lt; 1)">
<node CREATED="1458598929250" ID="ID_1427858735" MODIFIED="1458598941973" TEXT="&#x8def;&#x7531;&#x4fe1;&#x606f;&#x4e2d;&#x5305;&#x542b;&#x4e86;&#xff1a;&#x4e0b;&#x4e00;&#x8df3; / &#x7f51;&#x5173;"/>
</node>
<node CREATED="1458598851268" ID="ID_294935607" MODIFIED="1458598967721" TEXT="RTF_HOST   (1 &lt;&lt; 2)">
<node CREATED="1458598981999" ID="ID_481067597" MODIFIED="1458599194232">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#26159;&#19968;&#26465;&#21040;&#26576;&#20010;host&#30340;&#36335;&#30001;&#65306;
    </p>
    <p>
      &#23545;&#20110;IPv6&#32780;&#35328;&#65292;&#21040;xxxx::xxxx/128&#21363;&#25513;&#30721;&#38271;&#24230;&#20026;128&#30340;&#36335;&#30001;&#21363;&#20026;&#21040;host&#30340;&#36335;&#30001;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458598851268" ID="ID_550710011" MODIFIED="1458599311092" TEXT="RTF_REINSTATE   (1 &lt;&lt; 3)"/>
<node CREATED="1458598851268" ID="ID_219871603" MODIFIED="1458599338599" TEXT="RTF_DYNAMIC   (1 &lt;&lt; 4)">
<node CREATED="1458599341668" ID="ID_947858674" MODIFIED="1458599409261" TEXT="&#x7531;ICMPv6 redirect&#x6d88;&#x606f;&#x52a8;&#x6001;&#x521b;&#x5efa;&#x7684;&#x800c;&#x4e0d;&#x662f;&#x7531;&#x7528;&#x6237;&#x547d;&#x4ee4;&#x521b;&#x5efa;&#x7684;&#x8def;&#x7531;"/>
</node>
<node CREATED="1458598851268" ID="ID_751489080" MODIFIED="1458599443271" TEXT="RTF_MODIFIED   (1 &lt;&lt; 5)"/>
<node CREATED="1458598851268" ID="ID_1367683237" MODIFIED="1458599475481" TEXT="RTF_MTU   (1 &lt;&lt; 6)"/>
<node CREATED="1458598851268" ID="ID_1176150517" MODIFIED="1458599591757" TEXT="RTF_WINDOW   (1 &lt;&lt; 7)"/>
<node CREATED="1458598851268" ID="ID_1396730969" MODIFIED="1458599612581" TEXT="RTF_IRTT   (1 &lt;&lt; 8)"/>
<node CREATED="1458598851268" ID="ID_1647091016" MODIFIED="1458599638118" TEXT="RTF_REJECT   (1 &lt;&lt; 9)">
<node CREATED="1458599705054" ID="ID_298473312" MODIFIED="1458603016492">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#21160;&#20316;&#20026;null&#65292;blackhole&#65292;prohibit&#65292;throw&#65292;policy_failed&#30340;&#36335;&#30001;
    </p>
    <p>
      &#37117;&#20250;&#24102;&#19978;&#36825;&#20010;&#26631;&#35782;&#65292;&#34920;&#31034;&#36825;&#26465;&#36335;&#30001;&#29992;&#20110;&#25298;&#32477;IP&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458598851268" ID="ID_260409681" MODIFIED="1458599612581" TEXT="RTF_IRTT   (1 &lt;&lt; 8)"/>
<node CREATED="1458598851268" ID="ID_1730057801" MODIFIED="1458600889508" TEXT="RTF_DEFAULT   (1 &lt;&lt; 16)">
<node CREATED="1458600891382" ID="ID_860497442" MODIFIED="1458600899269" TEXT="&#x8fd9;&#x662f;&#x4e00;&#x6761;&#x9ed8;&#x8ba4;&#x8def;&#x7531;"/>
</node>
<node CREATED="1458598851268" ID="ID_1916332123" MODIFIED="1458600930267" TEXT="RTF_ALLONLINK   (1 &lt;&lt; 17)"/>
<node CREATED="1458598851268" ID="ID_1959193696" MODIFIED="1458600966372" TEXT="RTF_ADDRCONF   (1 &lt;&lt; 18)">
<node CREATED="1458601703880" ID="ID_1142399236" MODIFIED="1458601988990">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#26465;&#36335;&#30001;&#26159;&#30001;addrconf&#27169;&#22359;&#28155;&#21152;&#30340;&#12290;
    </p>
    <p>
      addrconf&#27169;&#22359;&#36127;&#36131;&#33258;&#21160;&#22320;&#22336;&#37197;&#32622;&#65292;&#31616;&#21333;&#30340;&#35828;&#23601;&#26159;&#22312;&#31995;&#32479;&#36215;&#26469;&#20043;&#21518;&#21457;&#36865;&#19968;&#20010;RS&#21253;&#25506;&#27979;&#36335;&#30001;&#22120;&#65292;&#36335;&#30001;&#22120;&#20877;&#21457;&#36865;&#19968;&#20010;RA&#21253;&#22238;&#24212;&#65292;RA&#21253;&#37324;&#38754;&#21253;&#21547;&#20102;prefix&#20449;&#24687;&#21644;&#36335;&#30001;&#20449;&#24687;&#12290;&#31995;&#32479;&#20877;&#26681;&#25454;prefix&#33258;&#21160;&#29983;&#25104;&#19968;&#20010;IPV6&#22320;&#22336;&#65292;&#28982;&#21518;&#21551;&#21160;DAD&#25506;&#27979;&#36825;&#20010;&#22320;&#22336;&#26159;&#21542;&#19982;&#23616;&#22495;&#32593;&#19978;&#20854;&#23427;&#20027;&#26426;&#37325;&#22797;&#12290;&#22914;&#26524;&#27809;&#26377;&#37325;&#22797;&#21017;&#26681;&#25454;prefix&#29983;&#25104;&#30340;&#22320;&#22336;&#37197;&#32622;&#25104;&#21151;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458598851268" ID="ID_147413915" MODIFIED="1458602019933" TEXT="RTF_PREFIX_RT   (1 &lt;&lt; 19)">
<node CREATED="1458602030563" ID="ID_990240212" MODIFIED="1458602088936" TEXT="&#x8fd9;&#x6761;&#x8def;&#x7531;&#x662f;&#x6839;&#x636e;RA&#x4e2d;&#x7684;prefix&#x521b;&#x5efa;&#x7684;&#xff0c;&#x8fd9;&#x6837;&#x7684;&#x8def;&#x7531;&#x4e00;&#x822c;&#x662f;link local&#x7684;&#x8def;&#x7531;"/>
</node>
<node CREATED="1458598851268" ID="ID_245048896" MODIFIED="1458602123805" TEXT="RTF_ANYCAST   (1 &lt;&lt; 20)"/>
<node CREATED="1458598851268" ID="ID_420301631" MODIFIED="1458602150469" TEXT="RTF_NONEXTHOP   (1 &lt;&lt; 21)">
<node CREATED="1458598929250" ID="ID_100871667" MODIFIED="1458603039199">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#20449;&#24687;&#20013;&#19981;&#21253;&#21547;&#19979;&#19968;&#36339; / &#32593;&#20851;
    </p>
    <p>
      &#22914;&#26524;&#36335;&#30001;&#30340;&#30446;&#30340;&#22320;&#26159;local host&#21017;&#27809;&#26377;&#19979;&#19968;&#36339; / &#32593;&#20851;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#21160;&#20316;&#20026;null&#65292;blackhole&#65292;prohibit&#65292;throw&#65292;policy_failed&#30340;&#36335;&#30001;&#20063;&#27809;&#26377;&#19979;&#19968;&#36339; / &#32593;&#20851;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458603125655" ID="ID_1312157731" MODIFIED="1458603330735">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#21306;&#21035;RTF_GATEWAY&#19982;RTF_NONEXTHOP&#65306;
    </p>
    <p>
      &#22914;&#26524;RTF_GATEWAY&#27809;&#26377;&#32622;&#20301;&#65292;&#34920;&#31034;&#36335;&#30001;&#27809;&#26377;&#35774;&#32622;&#19979;&#19968;&#36339;&#65292;&#20294;&#23427;&#36824;&#21487;&#20197;&#26159;global&#25110;&#32773;link local&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      &#20294;&#22914;&#26524;RTF_NONEXTHOP&#32622;&#20301;&#65292;&#34920;&#31034;&#36335;&#30001;&#26159;&#21040;local host&#30340;&#36335;&#30001;&#25110;&#32773;&#36335;&#30001;&#21160;&#20316;&#26159;&#20002;&#24323;&#21253;&#12290;
    </p>
    <p>
      &#25152;&#20197;2&#32773;&#30340;&#21547;&#20041;&#24182;&#19981;&#19968;&#26679;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458598851268" ID="ID_405065921" MODIFIED="1458603376066" TEXT="RTF_EXPIRES   (1 &lt;&lt; 22)">
<node CREATED="1458603379648" ID="ID_1349029259" MODIFIED="1458603390648" TEXT="&#x8def;&#x7531;&#x6709;&#x8d85;&#x65f6;&#x65f6;&#x95f4;"/>
</node>
<node CREATED="1458598851268" ID="ID_553016338" MODIFIED="1458603418662" TEXT="RTF_ROUTEINFO   (1 &lt;&lt; 23)">
<node CREATED="1458603575451" ID="ID_17899320" MODIFIED="1458603588510" TEXT="&#x8fd9;&#x6761;&#x8def;&#x7531;&#x662f;&#x6839;&#x636e;RA&#x4e2d;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x521b;&#x5efa;&#x7684;"/>
</node>
<node CREATED="1458598851268" ID="ID_605290526" MODIFIED="1458603649128" TEXT="RTF_CACHE   (1 &lt;&lt; 24)">
<node CREATED="1458694714362" ID="ID_1925408259" MODIFIED="1458694747572" TEXT="&#x8fd9;&#x662f;&#x4e00;&#x6761;host route&#xff0c;&#x5b83;clone&#x81ea;&#x67d0;&#x4e00;&#x6761;network route"/>
</node>
<node CREATED="1458598851268" ID="ID_945543221" MODIFIED="1458603673572" TEXT="RTF_FLOW   (1 &lt;&lt; 25)"/>
<node CREATED="1458598851268" ID="ID_642549679" MODIFIED="1458603699714" TEXT="RTF_POLICY   (1 &lt;&lt; 26)"/>
<node CREATED="1458598851268" ID="ID_1883330080" MODIFIED="1458604387454" TEXT="RTF_PREF   (1 &lt;&lt; 27)">
<node CREATED="1458604037724" ID="ID_83934431" MODIFIED="1458604192645">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      27&#21644;28&#20301;&#23545;&#24212;&#20102;RA&#20013;&#40664;&#35748;&#36335;&#30001;&#30340;router_pref&#23383;&#27573;&#65292;&#20063;&#23601;&#26159;&#40664;&#35748;&#36335;&#30001;&#30340;&#20248;&#20808;&#32423;&#12290;
    </p>
    <p>
      &#24403;&#19968;&#20010;&#23616;&#22495;&#32593;&#19978;&#26377;&#22810;&#20010;&#36335;&#30001;&#22120;&#26102;&#65292;&#38656;&#35201;&#19968;&#20010;&#20248;&#20808;&#32423;&#26469;&#20210;&#35009;&#21040;&#24213;&#36873;&#21738;&#20010;&#65292;RA&#20013;&#40664;&#35748;&#36335;&#30001;&#30340;router_pref&#23383;&#27573;&#21363;&#36215;&#27492;&#20316;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458604195842" ID="ID_375737140" MODIFIED="1458604344708">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#27492;&#23383;&#27573;&#21644;rt6i_metric&#30340;&#21306;&#21035;&#65306;
    </p>
    <p>
      RTF_PREF&#20195;&#34920;&#30340;&#36335;&#30001;&#22120;&#33258;&#24049;&#36890;&#21578;&#30340;&#40664;&#35748;&#36335;&#30001;&#30340;&#20248;&#20808;&#32423;&#65307;
    </p>
    <p>
      rt6i_metric&#34920;&#31034;&#29992;&#25143;&#37197;&#32622;&#30340;&#36335;&#30001;&#30340;&#20248;&#20808;&#32423;&#65292;&#23427;&#36866;&#29992;&#20110;&#25152;&#26377;&#36335;&#30001;&#32780;&#19981;&#29305;&#23450;&#20110;&#40664;&#35748;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458598851268" ID="ID_1977160782" MODIFIED="1458604378832" TEXT="RTF_LOCAL   (1 &lt;&lt; 31)">
<node CREATED="1458604451948" ID="ID_532037940" MODIFIED="1458604473535" TEXT="&#x8fd9;&#x662f;&#x4e00;&#x6761;&#x5230;&#x672c;&#x673a;local host&#x7684;&#x8def;&#x7531;"/>
</node>
</node>
<node CREATED="1458598146849" FOLDED="true" ID="ID_514621475" MODIFIED="1458598713778">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct rt6key rt6i_src
    </p>
    <p>
      &#28304;&#32593;&#27573;&#65292;&#22312;source specific routing&#26102;&#29992;&#20110;&#19982;search key&#20013;&#30340;&#28304;IP&#22320;&#22336;&#27604;&#36739;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458598527559" ID="ID_1286094110" MODIFIED="1458598563723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct in6_addr addr
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458598572446" ID="ID_1334561892" MODIFIED="1458598575902" TEXT="int plen"/>
</node>
<node CREATED="1458598155517" ID="ID_130751082" MODIFIED="1458598773923">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct rt6key rt6i_prefsrc
    </p>
    <p>
      &#39318;&#36873;&#28304;IP&#22320;&#22336;&#65292;&#26412;&#22320;&#21457;&#36865;&#30340;&#21253;&#21629;&#20013;&#27492;&#36335;&#30001;&#26102;&#20248;&#20808;&#36873;&#25321;&#27492;&#22320;&#22336;&#20316;&#20026;&#20986;&#21475;&#21253;&#30340;&#28304;IP&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458598163575" ID="ID_295072445" MODIFIED="1458598788005">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      u32 rt6i_metric
    </p>
    <p>
      &#36335;&#30001;&#20449;&#24687;&#30340;&#20248;&#20808;&#32423;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458598172829" ID="ID_552998370" MODIFIED="1458598799325">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct inet6_dev *rt6i_idev
    </p>
    <p>
      &#20986;&#21475;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458598184462" ID="ID_662809096" MODIFIED="1458598185118" TEXT="unsigned long _rt6i_peer"/>
<node CREATED="1458598193060" ID="ID_420865196" MODIFIED="1458598193681" TEXT="u32 rt6i_genid"/>
<node CREATED="1458598203659" ID="ID_1003944859" MODIFIED="1458598204211" TEXT="unsigned short rt6i_nfheader_len"/>
<node CREATED="1458598213834" ID="ID_1737114439" MODIFIED="1458598214426" TEXT="u8 rt6i_protocol"/>
</node>
</node>
<node CREATED="1306742811152" FOLDED="true" ID="ID_531217389" MODIFIED="1458266032229" TEXT="&#x5305;&#x5904;&#x7406;&#x6d41;&#x7a0b;">
<node CREATED="1453432898232" FOLDED="true" ID="ID_702902961" MODIFIED="1458251475608">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21253;&#22788;&#29702;&#27969;&#31243;&#21487;&#20197;&#21010;&#20998;&#20026;5&#20010;&#38454;&#27573;&#65306;
    </p>
    <p>
      input, local in, forward, local out, output
    </p>
  </body>
</html></richcontent>
<node CREATED="1453433040970" ID="ID_1741408169" MODIFIED="1458250499229">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_process_stages.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453433148407" ID="ID_362010020" MODIFIED="1457982790955" TEXT="input">
<node CREATED="1306742868031" FOLDED="true" ID="ID_1715433068" MODIFIED="1458250346877" TEXT="ipv6_rcv">
<node CREATED="1453489679162" FOLDED="true" ID="ID_1076655138" MODIFIED="1457941844319" TEXT="&#x8fdb;&#x5165;ipv6_rcv&#x65f6;skb&#x7684;&#x7ed3;&#x6784;">
<node CREATED="1453489721310" ID="ID_1255890104" MODIFIED="1453489755073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_process_input_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306751833505" ID="ID_1391584674" MODIFIED="1457937404676">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;pkt_type&#30001;&#39537;&#21160;&#35843;&#29992;eth_type_trans&#35774;&#23450;&#65292;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#20026;&#25509;&#25910;&#35774;&#22791;&#30340;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_HOST&#65292;&#27604;&#22914;&#21457;&#32473;&#26412;&#26426;&#25110;&#32773;&#38656;&#35201;&#26412;&#26426;&#36335;&#30001;&#30340;&#21253;&#12290;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#19981;&#26159;&#25509;&#25910;&#35774;&#22791;&#30340;MAC&#20063;&#19981;&#26159;&#32452;&#25773;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_OTHERHOST&#65292;&#27604;&#22914;bridge&#30340;&#21253;&#12290;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#26159;&#24191;&#25773;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_BROADCAST&#12290;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#26159;&#32452;&#25773;&#20294;&#19981;&#26159;&#24191;&#25773;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_MULTICAST&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#33324;&#24773;&#20917;&#19979;skb-&gt;pkt_type == PACKET_OTHERHOST&#30340;&#21253;&#22312;ipv6_rcv&#20043;&#21069;&#24050;&#34987;&#20002;&#24323;&#12290;
    </p>
    <p>
      &#20294;&#24403;&#35774;&#22791;&#22788;&#20110;&#28151;&#26434;&#27169;&#24335;&#26102;&#65292;&#39537;&#21160;&#20063;&#20250;&#25226;&#36825;&#31181;&#21253;&#25910;&#19978;&#26469;&#65292;&#20197;&#20415;raw socket&#35835;&#21462;&#12290;
    </p>
    <p>
      &#20294;&#26159;ipv6_rcv&#26412;&#36523;&#19981;&#22788;&#29702;&#21457;&#32473;&#20854;&#23427;&#20027;&#26426;&#30340;&#21253;&#65292;
    </p>
    <p>
      &#21482;&#22788;&#29702;skb-&gt;pkt_type&#31561;&#20110;PACKET_HOST / PACKET_BROADCAST / PACKET_MULTICAST&#30340;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306985581485" ID="ID_1577951471" MODIFIED="1457937484799">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_share_check()&#26816;&#26597;skb&#26159;&#21542;&#36824;&#34987;&#20854;&#20182;&#20154;&#25152;&#20351;&#29992;(skb-&gt;users&#24341;&#29992;&#35745;&#25968;&#22823;&#20110;1)
    </p>
    <p>
      &#22914;&#26524;skb&#34987;&#20849;&#20139;&#20102;&#21017;&#20811;&#38534;&#19968;&#20221;&#32473;&#33258;&#24049;&#29992;&#65292;&#22914;&#26524;&#27809;&#26377;&#20849;&#20139;&#21017;&#32487;&#32493;&#20351;&#29992;&#21407;skb&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#38656;&#35201;&#20811;&#38534;skb&#30340;&#21407;&#22240;&#26159;IPv6&#31995;&#32479;&#38656;&#35201;&#20462;&#25913;IPv6&#21253;&#65292;&#27604;&#22914;&#36882;&#20943;hop limit&#65292;&#20462;&#25913;&#30446;&#30340;&#25110;&#28304;IPv6&#22320;&#22336;&#65292;&#31561;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457937621730" ID="ID_666822904" MODIFIED="1457937874010">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20837;&#21475;&#35774;&#22791;&#19981;&#26159;&#19968;&#20010;layer 3 ipv6&#25509;&#21475;&#65292;
    </p>
    <p>
      &#25110;&#32773;&#35774;&#22791;&#19978;&#27809;&#26377;enable ipv6 <b>(/proc/sys/net/ipv6/conf/eth1/disable_ipv6)</b>&#65292;
    </p>
    <p>
      &#21017;&#20002;&#24323;&#21253;&#36820;&#22238;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453492427320" ID="ID_272143214" LINK="#ID_379999438" MODIFIED="1457938150648" TEXT="pskb_may_pull&#x6240;&#x505a;&#x7684;&#x5de5;&#x4f5c;&#x662f;&#x68c0;&#x67e5;skb-&gt;data&#x6307;&#x5411;&#x7684;&#x533a;&#x57df;&#x81f3;&#x5c11;&#x5305;&#x542b;&#x4e86;&#x4e00;&#x4e2a;IPv6&#x5934;&#x90e8;&#xff0c;&#xa;&#x5426;&#x5219;&#x5c06;&#x4ece;skb_shinfo(skb)-&gt;frags[]&#x4e2d;&#x62f7;&#x8d1d;&#x8fc7;&#x6765;"/>
<node CREATED="1453492704311" ID="ID_758471298" MODIFIED="1457938545965" TEXT="&#x5408;&#x6cd5;&#x6027;&#x68c0;&#x67e5;">
<node CREATED="1457938547335" ID="ID_225639315" MODIFIED="1457938563626" TEXT="&#x7248;&#x672c;&#x53f7;&#x5e94;&#x4e3a;6"/>
<node CREATED="1457938219252" ID="ID_113614077" MODIFIED="1457938335077">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#26159;&#29615;&#22238;&#22320;&#22336;127.0.0.1&#65292;&#20294;&#26159;&#20837;&#21475;&#21364;&#24182;&#19981;&#26159;&#29615;&#22238;&#25509;&#21475;&#65292;&#21017;&#20002;&#24323;&#21253;&#12290;&#65288;RFC4291 2.5.3&#65289;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457939417287" ID="ID_1469401238" MODIFIED="1457939717461">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      scope&#20026;Interface-Local&#30340;&#32452;&#25773;&#21253;&#21482;&#33021;&#26159;&#34987;&#29615;&#22238;&#30340;&#25110;&#32773;&#32463;&#30001;&#29615;&#22238;&#21475;&#25910;&#21040;&#65292;&#33509;&#26159;&#22312;&#19968;&#33324;&#30340;&#25509;&#21475;&#19978;&#25910;&#21040;&#21017;&#24212;&#34987;&#20002;&#24323;&#12290;(RFC4291 Errata ID: 3480)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457939742765" ID="ID_1968307908" MODIFIED="1457941028042" TEXT="&#x7ec4;&#x64ad;&#x5305;&#x7684;scope&#x4e0d;&#x80fd;&#x4e3a;0&#x3002;&#xff08;RFC4291 2.7&#xff09;"/>
<node CREATED="1457940980744" ID="ID_1141611949" MODIFIED="1457941001746" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0d;&#x80fd;&#x4e3a;&#x7ec4;&#x64ad;&#x3002; &#xff08;RFC4291 2.7&#xff09;"/>
<node CREATED="1457941247670" ID="ID_126109301" MODIFIED="1457941343312">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      payload length&#21152;&#19978;&#22836;&#37096;&#38271;&#24230;20&#20043;&#21644;&#19981;&#33021;&#22823;&#20110;skb-&gt;len&#12290;
    </p>
    <p>
      &#27880;&#24847;skb-&gt;len&#21487;&#33021;&#20250;&#22823;&#20110;payload length&#21152;&#19978;&#22836;&#37096;&#38271;&#24230;20&#65292;&#35265;&#19979;&#38754;&#30340;pskb_trim_rcsum
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453494062761" ID="ID_1984135293" MODIFIED="1453494084222" TEXT="&#x8bbe;&#x7f6e;L4&#x5934;&#x90e8;&#x8d77;&#x59cb;&#x4f4d;&#x7f6e;skb-&gt;transport_header"/>
<node CREATED="1453492971201" ID="ID_1371759880" MODIFIED="1457941419788">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pskb_trim_rcsum&#20027;&#35201;&#26816;&#26597;L2&#26377;&#27809;&#26377;&#23545;IP&#21253;&#36827;&#34892;&#22635;&#20805;&#20197;&#28385;&#36275;&#26368;&#23567;&#24103;&#38271;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26377;&#30340;L2&#35774;&#22791;&#26377;&#26368;&#23567;&#24103;&#38271;&#30340;&#35201;&#27714;&#65292;&#27604;&#22914;&#20197;&#22826;&#32593;&#35201;&#27714;64&#23383;&#33410;&#65292;&#24403;IPv6&#21253;&#23567;&#20110;&#27492;&#38271;&#24230;&#26102;&#65292;L2&#35774;&#22791;&#20250;&#23545;IPv6&#21253;&#36827;&#34892;&#22635;&#20805;&#12290;
    </p>
    <p>
      &#27492;&#26102;skb-&gt;len&#23601;&#20250;&#22823;&#20110;IPv6&#22836;&#37096;&#20013;&#30340;payload length&#65292;&#22240;&#27492;&#20989;&#25968;pskb_trim_rcsum&#38656;&#35201;&#23558;skb-&gt;len&#35774;&#32622;&#20026;&#27491;&#30830;&#30340;&#38271;&#24230;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;L2&#35774;&#22791;&#22312;&#20570;&#25509;&#25910;&#20391;&#30340;checksum offloading&#26102;&#26080;&#27861;&#21306;&#20998;&#22635;&#20805;&#30340;&#20869;&#23481;&#19982;&#30495;&#27491;&#30340;&#36127;&#36733;&#65292;&#23601;&#20250;&#38169;&#35823;&#30340;&#35745;&#31639;checksum&#65292;&#22240;&#27492;&#38656;&#35201;&#37325;&#35774;skb-&gt;ip_summed = CHECKSUM_NONE&#20197;&#24378;&#21046;&#35753;L4&#37325;&#26032;&#35745;&#31639;&#26657;&#39564;&#21644;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457941594364" ID="ID_1387613902" MODIFIED="1457941761183" TEXT="&#x6ce8;&#x610f;&#x5982;&#x679c;&#x4e0b;&#x4e00;&#x4e2a;&#x6269;&#x5c55;&#x5934;&#x90e8;&#x662f;hop-by-hop&#x4e14;&#x5176;&#x4e2d;&#x5305;&#x542b;&#x4e86;jumbo payload&#x9009;&#x9879;&#xff0c;&#x90a3;&#x4e48;&#x771f;&#x6b63;&#x7684;payload&#x957f;&#x5ea6;&#x662f;&#x5728;jumbo payload&#x9009;&#x9879;&#x4e2d;&#x63cf;&#x8ff0;&#x7684;&#x3002;&#x6b64;&#x65f6;skb-&gt;len&#x4f1a;&#x5728;ipv6_parse_hopopts()&#x51fd;&#x6570;&#x4e2d;&#x88ab;&#x66f4;&#x65b0;&#x3002;"/>
<node CREATED="1453494194081" ID="ID_1286254146" MODIFIED="1453494451183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_orphan&#20250;&#28165;&#38500;skb&#20043;&#21069;&#30340;owner&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#33324;&#26469;&#35828;socket&#21457;&#36865;skb&#26102;&#65292;&#20250;&#21021;&#22987;&#21270;skb-&gt;sk&#21644;skb-&gt;destructor&#65292;&#20294;&#26159;&#29616;&#22312;&#24050;&#32463;&#36827;&#20837;&#25509;&#25910;&#38454;&#27573;&#65292;&#38656;&#35201;&#28165;&#38500;&#21457;&#36865;&#38454;&#27573;&#30340;owner&#20102;&#65292;&#25152;&#20197;skb_orphan&#20250;&#35843;&#29992;skb-&gt;destructor&#24182;&#28165;&#38500;skb-&gt;sk&#21644;skb-&gt;destructor&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453493907695" ID="ID_254013669" MODIFIED="1453493941777" TEXT="netfilter pre routing"/>
<node CREATED="1453493964733" FOLDED="true" ID="ID_1424977962" MODIFIED="1458260677317" TEXT="ip6_rcv_finish">
<node CREATED="1457942687891" FOLDED="true" ID="ID_676743986" MODIFIED="1458250374643">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#37197;&#32622;&#21442;&#25968;/proc/sys/net/ipv4/ip_early_demux&#34987;&#25171;&#24320;&#26102;&#34920;&#31034;&#38656;&#35201;&#22312;&#36739;&#26089;&#30340;&#26102;&#26399;&#23601;&#26816;&#26597;&#21253;&#26159;&#21542;&#20026;&#26412;&#22320;socket&#35201;&#25509;&#25910;&#30340;&#21253;&#12290;&#36827;&#34892;&#36825;&#31181;&#26816;&#26597;&#30340;&#21069;&#25552;&#26159;&#36824;&#27809;&#26377;&#20026;skb&#25214;&#36335;&#30001;&#65288;&#21363;skb_dst(skb)&#20026;&#31354;&#65289;&#65292;&#22914;&#26524;&#26377;&#36335;&#30001;&#20102;&#21017;&#30693;&#36947;&#20102;&#21253;&#30340;&#21435;&#21521;&#65292;&#37027;&#23601;&#27809;&#26377;&#24517;&#35201;&#22312;&#26089;&#26399;&#36827;&#34892;&#24555;&#36895;&#26816;&#26597;&#20102;&#12290;&#21478;&#22806;&#19968;&#20010;&#21069;&#25552;&#26159;skb&#19981;&#23646;&#20110;&#26576;&#20010;socket&#65288;&#21363;skb-&gt;sk&#20026;&#31354;&#65289;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457943180251" ID="ID_366798581" MODIFIED="1458010447679">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#19968;&#31181;&#38656;&#35201;&#26089;&#26399;&#25509;&#25910;&#30340;socket&#37117;&#20250;&#22312;inet6_protos[xxx]&#20013;&#27880;&#20876;&#19968;&#20010;&#22238;&#35843;&#20989;&#25968;&#65292;
    </p>
    <p>
      ipprot-&gt;early_demux(skb)&#21363;&#21487;&#65292;&#35265;&#19979;&#38754;&#30340;&#20869;&#26680;socket&#26694;&#26550;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458010450167" ID="ID_1036839931" MODIFIED="1458010465537" TEXT="tcp_v6_early_demux">
<node CREATED="1458010452759" ID="ID_1403948534" MODIFIED="1458010590873">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21482;&#26159;&#31616;&#21333;&#30340;&#20174;sk-&gt;sk_rx_dst&#20013;&#21462;&#20986;socket&#21407;&#20808;&#20445;&#23384;&#30340;dst_entry&#65292;&#28982;&#21518;&#36171;&#20540;&#32473;skb-&gt;dst&#12290;
    </p>
    <p>
      &#25509;&#30528;&#32487;&#32493;&#36820;&#22238;&#21040;ip6_rcv_finish()&#32487;&#32493;&#22788;&#29702;&#65292;&#21253;&#30495;&#27491;&#25237;&#36882;&#21040;local host&#26159;&#22312;&#35843;&#29992;dst_input()&#26102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453615833492" FOLDED="true" ID="ID_470663664" MODIFIED="1458250369025" TEXT="&#x5185;&#x6838;socket&#x6846;&#x67b6;">
<node CREATED="1453615850588" ID="ID_493772796" MODIFIED="1458194671154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/kernel_socket_framework_v6.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453494913391" ID="ID_1350513125" MODIFIED="1457942039377">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip6_route_input&#65292;&#20026;skb&#26597;&#25214;&#36335;&#30001;&#65292;&#20063;&#21363;&#21021;&#22987;&#21270;skb-&gt;dst&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453495018785" ID="ID_1633798739" MODIFIED="1457942600537">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dst_input(skb)&#23558;&#21253;&#25512;&#36865;&#21040;&#19979;&#19968;&#38454;&#27573;&#36827;&#34892;&#22788;&#29702;
    </p>
    <p>
      
    </p>
    <p>
      &#21462;&#20915;&#20110;&#21253;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#26159;&#21457;&#36865;&#32473;local host&#30340;&#36824;&#26159;&#34987;&#36335;&#30001;&#36716;&#21457;&#30340;&#65292;
    </p>
    <p>
      &#19979;&#19968;&#38454;&#27573;&#30340;&#22788;&#29702;&#21487;&#33021;&#26159; ip6_input &#25110;&#32773; ip6_forward&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453433166118" ID="ID_1594089771" MODIFIED="1456213191073" TEXT="local in">
<node CREATED="1453512663615" ID="ID_948146720" MODIFIED="1457981335759" TEXT="ip6_input"/>
<node CREATED="1453493907695" ID="ID_170378052" MODIFIED="1453512711091" TEXT="netfilter local in"/>
<node CREATED="1453512663615" FOLDED="true" ID="ID_1060981514" MODIFIED="1458266030799" TEXT="ip6_input_finish">
<node CREATED="1457982484480" ID="ID_1720299650" MODIFIED="1457982526815">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39318;&#20808;&#30475;&#30475;&#26377;&#27809;&#26377;raw socket&#35201;&#25509;&#25910;&#27492;&#21253;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raw6_local_deliver()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457982484480" ID="ID_268586386" MODIFIED="1458250382075">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28982;&#21518;&#30475;&#30475;&#26377;&#27809;&#26377;next header (UDP/TCP)&#25351;&#23450;&#31867;&#22411;&#30340;socket&#35201;&#25509;&#25910;&#27492;&#21253;
    </p>
    <p>
      &#20063;&#23601;&#26159;&#30475;inet6_protos [ nexthdr ]&#20013;&#26159;&#21542;&#26377;&#27880;&#20876;&#30340;handler
    </p>
  </body>
</html></richcontent>
<node CREATED="1457943180251" ID="ID_1407317835" MODIFIED="1457943689185">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#19968;&#31181;&#38656;&#35201;&#26089;&#26399;&#25509;&#25910;&#30340;socket&#37117;&#20250;&#22312;inet6_protos[xxx]&#20013;&#27880;&#20876;&#19968;&#20010;&#22238;&#35843;&#20989;&#25968;&#65292;
    </p>
    <p>
      ipprot-&gt;early_demux(skb)&#21363;&#21487;&#65292;&#35265;&#19979;&#38754;&#30340;&#20869;&#26680;socket&#26694;&#26550;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453615833492" FOLDED="true" ID="ID_1547920082" MODIFIED="1458266026445" TEXT="&#x5185;&#x6838;socket&#x6846;&#x67b6;">
<node CREATED="1453615850588" ID="ID_1630942775" MODIFIED="1458194699270">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/kernel_socket_framework_v6.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457982744441" ID="ID_333616896" MODIFIED="1457982782833" TEXT="&#x5982;&#x679c;&#x4e0a;&#x9762;2&#x79cd;&#x90fd;&#x6ca1;&#x6709;&#xff0c;&#x8bf4;&#x660e;&#x672c;&#x5730;&#x6ca1;&#x6709;&#x8981;&#x63a5;&#x6536;&#x6b64;&#x5305;&#x7684;socket&#xff0c;&#x56e0;&#x6b64;&#x4e22;&#x5f03;&#x6b64;&#x5305;"/>
</node>
</node>
<node CREATED="1453433153463" ID="ID_1198985737" MODIFIED="1456213193506" TEXT="forward">
<node CREATED="1453495864874" FOLDED="true" ID="ID_703953409" MODIFIED="1458250423405" TEXT="ip6_forward">
<node CREATED="1453508629091" ID="ID_1167673726" MODIFIED="1458003913536">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_process_forward_1.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458003968356" ID="ID_516884691" MODIFIED="1458004006668" TEXT="&#x5982;&#x679c;&#x7cfb;&#x7edf;&#x6ca1;&#x6709;&#x5f00;&#x542f;ipv6&#x8f6c;&#x53d1;&#x529f;&#x80fd;&#x5219;&#x4e22;&#x5f03;&#x5305;"/>
<node CREATED="1453496898238" FOLDED="true" ID="ID_584836395" MODIFIED="1458003946508">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_warn_if_lro
    </p>
    <p>
      &#25298;&#32477;&#36716;&#21457;LRO&#21512;&#24182;&#30340;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1453496962454" ID="ID_504211296" MODIFIED="1453497298899">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LRO&#65292;GRO&#20043;&#31867;&#30340;&#24615;&#33021;&#20248;&#21270;&#25216;&#26415;&#20250;&#22312;&#21253;&#25237;&#36882;&#21040;IP&#21327;&#35758;&#26632;&#20043;&#21069;&#23558;&#22810;&#20010;&#21253;&#21512;&#24182;&#25104;&#19968;&#20010;&#22823;&#30340;skb&#65292;&#36825;&#20250;&#38477;&#20302;CPU&#35201;&#22788;&#29702;&#30340;&#21253;&#30340;&#25968;&#37327;&#65292;&#22240;&#27492;&#20250;&#25552;&#39640;&#24615;&#33021;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#33324;&#26469;&#35828;&#36825;&#26679;&#30340;&#20248;&#21270;&#25216;&#26415;&#24212;&#35813;&#20165;&#20165;&#38024;&#23545;&#21457;&#36865;&#32473;local host&#30340;&#21253;&#65292;&#32780;&#19981;&#26159;&#38656;&#35201;&#36335;&#30001;&#36716;&#21457;&#30340;&#21253;&#12290;&#22240;&#20026;&#36335;&#30001;&#36716;&#21457;&#19968;&#20010;&#22823;&#30340;skb&#38656;&#35201;&#37325;&#26032;&#20998;&#29255;&#65292;&#36825;&#20250;&#21152;&#37325;CPU&#36127;&#25285;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453497536064" ID="ID_1248022358" MODIFIED="1453498560924">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LRO&#65292;GRO&#20250;&#23558;&#21512;&#24182;&#30340;&#21253;&#29992;skb-&gt;prev&#65292;skb-&gt;next&#20018;&#32852;&#36215;&#26469;&#12290;&#28982;&#21518;&#29992;skb_shinfo(skb)-&gt;gso_type&#25551;&#36848;&#21512;&#24182;&#21253;&#30340;&#31867;&#22411;&#65292;&#27604;&#22914;TCP&#25110;UDP&#65292;&#20877;&#29992;skb_shinfo(skb)-&gt;gso_size&#25551;&#36848;&#34987;&#21512;&#24182;&#21253;&#30340;&#22823;&#23567;&#65292;&#27604;&#22914;1514&#12290;
    </p>
    <p>
      
    </p>
    <p>
      LRO&#26159;&#32769;&#19968;&#20195;&#30340;&#25216;&#26415;&#65292;GRO&#26159;&#26032;&#19968;&#20195;&#30340;&#25216;&#26415;&#65292;&#23427;&#20204;&#30340;&#21306;&#21035;&#26159;&#65306;
    </p>
    <p>
      LRO&#21482;&#20250;&#35774;&#32622;skb_shinfo(skb)-&gt;gso_type&#32780;&#19981;&#20250;&#35774;&#32622;skb_shinfo(skb)-&gt;gso_size&#65292;&#32780;GRO&#20004;&#32773;&#37117;&#20250;&#35774;&#32622;&#12290;&#22240;&#20026;LRO&#27809;&#26377;&#35774;&#32622;gso_size&#65292;&#36825;&#23601;&#23548;&#33268;&#25903;&#25345;S/G&#21151;&#33021;&#30340;&#35774;&#22791;&#26080;&#27861;&#22312;&#30828;&#20214;&#19978;offloading&#20998;&#27573;(segment)&#65292;&#21363;&#20351;&#26159;&#36719;&#20214;&#30340;GSO&#20063;&#26080;&#27861;&#24110;&#21161;&#20998;&#27573;&#65292;&#22240;&#20026;&#23427;&#19981;&#30693;&#36947;&#35201;&#25226;&#36825;&#20010;&#22823;&#21253;&#20998;&#25104;&#22810;&#23567;&#30340;&#27573;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20026;&#20160;&#20040;&#35774;&#32622;gso_size&#36825;&#20040;&#37325;&#35201;&#32780;&#19981;&#33021;&#31616;&#21333;&#30340;&#26681;&#25454;MTU&#20998;&#27573;&#65311;
    </p>
    <p>
      &#36825;&#28041;&#21450;&#21040;L4&#21327;&#35758;&#30340;2&#31181;&#35774;&#35745;&#65292;UDP&#26159;&#26080;&#36830;&#25509;&#26377;&#36793;&#30028;&#30340;&#65292;TCP&#26159;&#26377;&#36830;&#25509;&#38754;&#21521;&#27969;&#30340;&#12290; &#36825;&#20063;&#23601;&#26159;&#35828;2&#20010;UDP&#21253;&#20043;&#38388;&#26377;&#28165;&#26970;&#30340;&#30028;&#38480;&#65292;&#23601;&#26159;&#21457;&#36865;&#28304;&#21457;&#36865;UDP&#26102;&#30340;&#26679;&#23376;&#65292;&#20013;&#38388;&#30340;&#35774;&#22791;&#19981;&#33021;&#25171;&#30772;&#36825;&#20010;&#30028;&#38480;&#65292;&#26082;&#19981;&#33021;&#21512;&#24182;2&#20010;UDP&#21253;&#65292;&#20063;&#19981;&#33021;&#25226;&#19968;&#37096;&#20998;&#20869;&#23481;&#20174;&#19968;&#20010;&#21253;&#31227;&#21040;&#21478;&#19968;&#20010;&#21253;&#12290;&#22914;&#26524;&#20570;LRO&#26102;&#19981;&#35760;&#24405;gso_size&#21017;&#22312;&#20570;GSO&#25110;S/G&#26102;&#23601;&#26080;&#27861;&#20445;&#25345;&#21407;&#26469;&#30340;&#36793;&#30028;&#65292;&#26681;&#25454;MTU&#20998;&#27573;&#20063;&#20250;&#25171;&#20081;&#21407;&#26469;&#30340;&#36793;&#30028;&#12290;&#24403;&#28982;TCP&#23601;&#27809;&#26377;&#36825;&#26679;&#30340;&#38480;&#21046;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453509851717" ID="ID_864715045" MODIFIED="1458004020190" TEXT="xfrm6_policy_check"/>
<node CREATED="1453509466525" ID="ID_47566477" MODIFIED="1458004430773">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21482;&#22788;&#29702;skb-&gt;pkt_type == PACKET_HOST&#30340;&#21253;&#65292;
    </p>
    <p>
      &#23545;&#20110;PACKET_BROADCAST / PACKET_MULTICAST&#30340;&#21253;&#65292;
    </p>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#21518;skb-&gt;dst-&gt;input&#24050;&#34987;&#35774;&#32622;&#20026;ip6_mc_input&#25509;&#25910;&#22788;&#29702;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453509750877" ID="ID_682122286" MODIFIED="1458004458074" TEXT="&#x56e0;&#x4e3a;&#x8981;&#x4fee;&#x6539;hop limit&#xff0c;&#x6240;&#x4ee5;&#x6e05;&#x9664;&#x63a5;&#x6536;&#x65f6;&#x8ba1;&#x7b97;&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x53d1;&#x9001;&#x6d41;&#x7a0b;&#x7684;&#x6700;&#x540e;&#x518d;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;"/>
<node CREATED="1453508710603" FOLDED="true" ID="ID_35037385" MODIFIED="1458195227172" TEXT="router alert (hop-by-hop)&#x9009;&#x9879;&#x7684;&#x5904;&#x7406;">
<node CREATED="1453508725130" ID="ID_353473090" MODIFIED="1458004512997" TEXT="router alert (hop-by-hop)&#x9009;&#x9879;&#x662f;&#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x5668;&#x90fd;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x9009;&#x9879;&#xff0c;&#x5b83;&#x7684;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6ce8;&#x518c;&#x5728;&#x5168;&#x5c40;&#x94fe;&#x8868;ip6_ra_chain&#x4e2d;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x4e9b;&#x8bbe;&#x7f6e;&#x4e86;IP_ROUTER_ALERT&#x6807;&#x8bc6;&#x7684;raw socket&#x3002;ip6_call_ra_chain&#x6700;&#x540e;&#x8c03;&#x7528;raw_rcv&#xff0c;&#x8fdb;&#x5165;socket&#x63a5;&#x6536;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;"/>
</node>
<node CREATED="1453509884929" ID="ID_648107063" MODIFIED="1458004537532" TEXT="hop limit &#x5982;&#x679c;&#x5c0f;&#x4e8e;1&#x5219;&#x4e22;&#x5f03;&#x5305;&#xff0c;&#x5e76;&#x5411;&#x6e90;&#x53d1;&#x9001;ICMP&#x6d88;&#x606f;&#x544a;&#x77e5;"/>
<node CREATED="1458004677406" ID="ID_1888833989" MODIFIED="1458004718984" TEXT="&#x5982;&#x679c;&#x662f;&#x9700;&#x8981;proxy&#x7684;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x5305;&#xff0c;&#x5219;&#x6295;&#x9012;&#x7ed9;local host"/>
<node CREATED="1453509873545" ID="ID_533409126" MODIFIED="1458004830359" TEXT="xfrm6_route_forward"/>
<node CREATED="1453511158441" ID="ID_1898876124" MODIFIED="1453511590846">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#20837;&#21475;&#31561;&#20110;&#20986;&#21475;&#26102;&#35828;&#26126;&#24403;&#21069;&#21253;&#30340;&#36335;&#30001;&#36335;&#24452;&#24182;&#19981;&#26159;&#26368;&#20339;&#36335;&#24452;&#65292;&#21253;&#23454;&#38469;&#19978;&#21487;&#20197;&#34987;&#30452;&#25509;&#21457;&#36865;&#32473;&#19979;&#19968;&#36339;&#12290;
    </p>
    <p>
      &#25152;&#20197;&#27492;&#26102;&#32473;&#28304;&#21457;&#36865;&#19968;&#20010;&#37325;&#23450;&#21521;&#30340;ICMP&#21253;&#65292;&#20197;&#35753;&#20854;&#19979;&#27425;&#21033;&#29992;&#26368;&#20339;&#36335;&#30001;&#36335;&#24452;&#21457;&#21253;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#28982;&#36825;&#20040;&#20570;&#30340;&#21069;&#25552;&#26159;&#65306;
    </p>
    <p>
      IP&#21253;&#19981;&#24102;&#20005;&#26684;&#36335;&#30001;&#36873;&#39033;&#12290;&#22240;&#20026;IP&#21253;&#24102;&#20102;&#20005;&#26684;&#36335;&#30001;&#36873;&#39033;&#34920;&#31034;&#28304;&#30830;&#20999;&#30340;&#30693;&#36947;&#24590;&#20040;&#36335;&#30001;&#65292;&#20013;&#38388;&#30340;&#36335;&#30001;&#22120;&#21482;&#33021;&#30456;&#20449;&#23427;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#65292;&#36825;&#37324;&#21457;&#36865;ICMP&#28040;&#24687;&#21518;&#36824;&#32487;&#32493;&#36335;&#30001;&#36716;&#21457;&#21253;&#65292;&#32780;&#19981;&#26159;&#20002;&#24323;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458005279269" ID="ID_1689067793" MODIFIED="1458005346378">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#28304;&#22320;&#22336;&#36827;&#34892;&#26816;&#26597;&#65306;
    </p>
    <p>
      &#28304;&#22320;&#22336;&#19981;&#33021;&#26159;0&#25110;&#32773;&#32452;&#25773;&#25110;&#32773;&#29615;&#22238;&#22320;&#22336;&#65292;&#20063;&#19981;&#33021;&#26159;link local&#30340;&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453510466364" ID="ID_113007644" MODIFIED="1458005258053" TEXT="&#x5982;&#x679c;&#x5305;&#x957f;&#x8d85;&#x8fc7;&#x4e86;&#x51fa;&#x53e3;&#x7684;MTU&#xff0c;&#x90a3;&#x4e48;&#x9700;&#x8981;&#x4e22;&#x5f03;&#x5305;&#x5e76;&#x5411;&#x6e90;&#x53d1;&#x9001;ICMP&#x6d88;&#x606f;"/>
<node CREATED="1453510827243" ID="ID_608340377" MODIFIED="1458005197937" TEXT="&#x9012;&#x51cf;hop limit"/>
</node>
</node>
<node CREATED="1453493907695" ID="ID_291064150" MODIFIED="1453495915615" TEXT="netfilter forwarding"/>
<node CREATED="1453495884300" FOLDED="true" ID="ID_76015636" MODIFIED="1458250425558" TEXT="ip6_forward_finish">
<node CREATED="1453512211069" ID="ID_1612059127" MODIFIED="1457990284486">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;dst_output&#36827;&#34892;&#19979;&#19968;&#27493;&#22788;&#29702;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453433174476" FOLDED="true" ID="ID_1770627493" MODIFIED="1458262709947" TEXT="local out">
<node CREATED="1453615833492" FOLDED="true" ID="ID_1456017528" MODIFIED="1453615903602" TEXT="&#x5185;&#x6838;socket&#x6846;&#x67b6;">
<node CREATED="1453615850588" ID="ID_1390699077" MODIFIED="1453615896960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/kernel_socket_framework.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453620570594" ID="ID_1430674171" MODIFIED="1458250436473">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_process_localout_1.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453433157181" ID="ID_351433489" MODIFIED="1458010683685" TEXT="output">
<node CREATED="1453621903324" FOLDED="true" ID="ID_1531317740" MODIFIED="1458250465692" TEXT="ip6_output">
<node CREATED="1453621958431" ID="ID_333264985" MODIFIED="1458023869882">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20986;&#25509;&#21475;skb_dst(skb)-&gt;dev&#19978;ipv6&#34987;disable&#20102;&#65292;&#21017;&#20002;&#24323;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453493907695" ID="ID_1199150404" MODIFIED="1453621920383" TEXT="netfilter post routing"/>
<node CREATED="1453621933743" FOLDED="true" ID="ID_1553784674" MODIFIED="1458250479568" TEXT="ip6_finish_output">
<node CREATED="1453622025875" ID="ID_1195638594" MODIFIED="1458024310958" TEXT="&#x5982;&#x679c;&#x9700;&#x8981;&#x5206;&#x7247;&#x5219;&#x5148;&#x8c03;&#x7528;ip6_fragment&#x8fdb;&#x884c;&#x5206;&#x7247;"/>
<node CREATED="1453622054167" FOLDED="true" ID="ID_194391558" MODIFIED="1458250477648" TEXT="ip6_finish_output2">
<node CREATED="1458024456704" ID="ID_919881032" MODIFIED="1458024468519" TEXT="&#x5c06;skb-&gt;protocol&#x8bbe;&#x4e3a;IPV6"/>
<node CREATED="1453621958431" ID="ID_1802849841" MODIFIED="1453621995543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;dev = skb_dst(skb)-&gt;dev
    </p>
    <p>
      &#21363;&#23558;&#20986;&#25509;&#21475;&#35774;&#32622;&#20026;&#36335;&#30001;&#36873;&#25321;&#30340;&#20986;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458028146964" FOLDED="true" ID="ID_1449662655" MODIFIED="1458250476334">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#27491;&#22312;&#21457;&#36865;&#30340;&#26159;&#32452;&#25773;&#21253;&#65292;&#21017;&#32771;&#34385;&#26159;&#21542;&#35201;&#23558;&#20854;&#29615;&#22238;&#32473;local host
    </p>
    <p>
      &#33021;&#22815;&#29615;&#22238;&#27492;&#32452;&#25773;&#21253;&#30340;&#26465;&#20214;&#26159;&#65306;
    </p>
    <p>
      1&#65292;&#31995;&#32479;&#20801;&#35768;&#29615;&#22238;&#21457;&#36865;&#30340;&#32452;&#25773;&#21253;&#65292;socket&#19978;&#24320;&#21551;&#20102;IP_MULTICAST_LOOP&#26631;&#35782;&#12290;
    </p>
    <p>
      2&#65292;&#31995;&#32479;&#21551;&#21160;&#20102;&#32452;&#25773;&#36335;&#30001;socket &#25110;&#32773; &#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#22312;&#20986;&#25509;&#21475;&#30340;&#32452;&#25773;&#25509;&#25910;&#21015;&#34920;&#20013;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#38656;&#35201;&#29615;&#22238;&#21017;&#20808;&#36807;&#19968;&#36941;netfilter post routing &#20877;&#35843;&#29992;dev_loopback_xmit&#23558;&#21253;&#25237;&#36882;&#21040;local host&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458029081031" ID="ID_323442003" MODIFIED="1458029300723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32452;&#25773;&#36335;&#30001;socket
    </p>
    <p>
      
    </p>
    <p>
      &#32452;&#25773;&#36335;&#30001;&#22120;&#38656;&#35201;&#21551;&#21160;&#19968;&#20010;&#32452;&#25773;&#36335;&#30001;socket&#65292;&#36825;&#20010;socket&#29992;&#20110;&#25509;&#25910;unknown&#30340;&#32452;&#25773;&#21253;&#65292;&#28982;&#21518;&#35302;&#21457;&#32452;&#25773;&#36335;&#30001;socket&#20889;&#19968;&#26465;MFC&#32452;&#25773;&#36335;&#30001;&#26465;&#30446;&#21040;&#20869;&#26680;&#20013;&#65292;&#20043;&#21518;&#30456;&#21516;&#32452;&#25773;&#32452;&#30340;&#32452;&#25773;&#21253;&#23601;&#19981;&#20877;&#36865;&#21040;&#32452;&#25773;&#36335;&#30001;socket&#32780;&#26159;&#32463;&#30001;&#20869;&#26680;&#36335;&#30001;&#36208;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453493907695" ID="ID_1240939782" MODIFIED="1453621920383" TEXT="netfilter post routing"/>
<node CREATED="1458028215067" ID="ID_113527465" MODIFIED="1458028840303" TEXT="dev_loopback_xmit">
<node CREATED="1458028874914" ID="ID_317706539" MODIFIED="1458028876019" TEXT="netif_rx_ni(skb)">
<node CREATED="1458028890168" ID="ID_1899548548" MODIFIED="1458028891382" TEXT="netif_rx_internal(skb)"/>
</node>
</node>
</node>
<node CREATED="1453622110235" ID="ID_626720544" MODIFIED="1458024913080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;&#36335;&#30001;&#32531;&#23384;struct rt6_info-&gt;rt6i_gateway&#20013;&#21462;&#20986;&#19979;&#19968;&#36339;
    </p>
    <p>
      &#20877;&#25214;&#21040;&#23545;&#24212;&#30340;&#37051;&#23621;neigh = dst_get_neighbour_noref(gateway)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453622172932" ID="ID_53092391" MODIFIED="1458025138644">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dst_neigh_output
    </p>
    <p>
      &#35843;&#29992;&#37051;&#23621;&#31995;&#32479;&#30340;&#21457;&#36865;&#20989;&#25968;&#21457;&#36865;IPv6&#21253;
    </p>
    <p>
      &#33267;&#27492;&#65292;IPv6&#21253;&#23601;&#31163;&#24320;IP&#23618;&#32780;&#36827;&#20837;L2&#20102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1458251529041" ID="ID_607570627" MODIFIED="1458604547296" TEXT="&#x5b50;&#x6a21;&#x5757;">
<node CREATED="1458251536617" FOLDED="true" ID="ID_1255060217" MODIFIED="1459303781560" TEXT="route">
<node CREATED="1458251575311" ID="ID_1890987945" LINK="#ID_932327713" MODIFIED="1458251586655" TEXT="&#x91cd;&#x8981;&#x6982;&#x5ff5;"/>
<node CREATED="1458329623913" ID="ID_940975400" MODIFIED="1459291097436" TEXT="&#x8def;&#x7531;&#x8868;&#x7ed3;&#x6784;">
<node CREATED="1458344796670" FOLDED="true" ID="ID_1383221345" MODIFIED="1458928516356" TEXT="node organization">
<node CREATED="1458344824253" ID="ID_1643553076" MODIFIED="1458344861682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_routing_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1458344938867" ID="ID_1189322832" MODIFIED="1458345472512">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ipv6&#36335;&#30001;&#34920;&#32452;&#32455;&#25104;radix&#26641;&#30340;&#24418;&#24335;&#65292;&#27599;&#19968;&#20010;fib6_node&#20195;&#34920;&#20102;&#19968;&#20010;&#23376;&#32593;&#12290;&#33410;&#28857;&#20013;fn_bit&#23454;&#38469;&#19978;&#23601;&#26159;&#23376;&#32593;&#30340;prefix length&#12290;&#21516;&#26102;&#22312;&#36941;&#21382;&#36335;&#30001;&#34920;&#26102;&#20063;&#29992;fn_bit&#26469;&#20915;&#23450;&#19979;&#19968;&#27493;&#26597;&#25214;&#30340;&#33410;&#28857;&#65292;&#22914;&#26524;search key&#20013;fn_bit&#25351;&#21521;&#30340;&#20301;&#20026;0&#21017;&#19979;&#19968;&#27493;&#36941;&#21382;&#24038;&#23376;&#33410;&#28857;&#65292;&#20026;1&#21017;&#36941;&#21382;&#21491;&#23376;&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458345546517" ID="ID_1904129510" MODIFIED="1458348429729" TEXT="&#x7ecf;&#x5178;&#x7684;&#x8def;&#x7531;&#x662f;&#x6839;&#x636e;&#x76ee;&#x7684;IP&#x5730;&#x5740;&#x67e5;&#x627e;&#x8def;&#x7531;&#xff0c;&#x4ece;&#x800c;&#x51b3;&#x5b9a;&#x4e0b;&#x4e00;&#x8df3;&#x548c;&#x51fa;&#x63a5;&#x53e3;&#xff0c;&#x8fd9;&#x53ef;&#x4ee5;&#x79f0;&#x4e4b;&#x4e3a;destination specific routing&#x3002;&#xa;&#xa;&#x5728;&#x63a5;&#x5165;&#x7f51;&#x7684;&#x8fb9;&#x7f18;&#x53ef;&#x80fd;&#x4e5f;&#x9700;&#x8981;&#x7528;&#x6e90;&#x6765;&#x533a;&#x5206;&#x8def;&#x7531;&#xff0c;&#x4ece;&#x800c;&#x63d0;&#x9ad8;&#x4e0d;&#x540c;&#x7684;&#x670d;&#x52a1;&#x8d28;&#x91cf;&#x3002;&#x8fd9;&#x65f6;&#x4f1a;&#x5728;&#x76ee;&#x7684;&#x5b50;&#x7f51;subtree&#x4e0b;&#x9762;&#x518d;&#x6302;&#x4e00;&#x4e2a;&#x6839;&#x636e;&#x6e90;IP&#x5730;&#x5740;&#x67e5;&#x627e;&#x7684;&#x8def;&#x7531;&#x6811;&#xff0c;&#x8fd9;&#x79f0;&#x4e4b;&#x4e3a;source specific routing&#x3002;&#xa;&#xa;&#x4e00;&#x4e2a;&#x6dfb;&#x52a0;source&#x8def;&#x7531;&#x7684;&#x547d;&#x4ee4;&#x7684;&#x4f8b;&#x5b50;&#x662f;&#xff1a;&#xa;ip -6 route add 2002:c024::0/64 from 2002:c026::0/64 dev eth1 via 2002:c023:9c17:305::1&#xa;&#xa;&#x8def;&#x7531;&#x8868;&#x7684;&#x67e5;&#x627e;&#x662f;&#x5148;&#x6839;&#x636e;&#x76ee;&#x7684;IP&#x5730;&#x5740;&#x67e5;&#x627e;&#x5de6;&#x8fb9;&#x7684;&#x6811;&#xff0c;&#x5982;&#x679c;&#x627e;&#x5230;&#x5339;&#x914d;&#x7684;&#x8282;&#x70b9;&#xff0c;&#x518d;&#x7528;&#x6e90;IP&#x5730;&#x5740;&#x67e5;&#x627e;&#x53f3;&#x8fb9;&#x7684;&#x6811;&#x3002;&#xa;&#xa;&#x65e0;&#x8bba;&#x662f;destination specific routing&#x8fd8;&#x662f;source specific routing&#x90fd;&#x662f;&#x91c7;&#x7528;LPM&#x6700;&#x957f;&#x5339;&#x914d;&#x6cd5;&#xff0c;&#x5148;&#x904d;&#x5386;&#x5230;&#x8def;&#x7531;&#x8868;&#x5e95;&#x90e8;&#xff0c;&#x5982;&#x679c;&#x6709;&#x5339;&#x914d;&#x7684;&#x5219;&#x8fd4;&#x56de;&#xff0c;&#x82e5;&#x6ca1;&#x6709;&#x5219;&#x5411;&#x6811;&#x7684;&#x9876;&#x90e8;&#x56de;&#x6eaf;&#x3002;&#x5982;&#x679c;&#x5728;source tree&#x4e2d;&#x56de;&#x6eaf;&#x67e5;&#x627e;&#x5931;&#x8d25;&#x5219;&#x518d;&#x5728;destination tree&#x4e2d;&#x56de;&#x6eaf;&#x67e5;&#x627e;&#x3002;"/>
<node CREATED="1458347763983" ID="ID_1790740431" MODIFIED="1458540231930">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;rt6_info&#20195;&#34920;&#19968;&#26465;&#30495;&#27491;&#30340;&#36335;&#30001;&#65292;&#23427;&#30340;&#20869;&#23481;&#21487;&#20197;&#20998;&#20026;3&#37096;&#20998;&#65306;
    </p>
    <p>
      1&#65292;&#29992;&#20110;&#38142;&#25509;&#30340;&#37096;&#20998;&#65306;dst &#21644; rt6i_siblings&#12290;
    </p>
    <p>
      2&#65292;&#29992;&#20316;&#25628;&#32034;key&#30340;&#37096;&#20998;&#65306;&#30446;&#30340;IP&#65288;rt6i_dst&#65289; &#21644; &#28304;IP&#65288;rt6i_src&#65289;&#12290;
    </p>
    <p>
      3&#65292;&#36335;&#30001;&#20449;&#24687;&#37096;&#20998;&#65306;&#19979;&#19968;&#36339;&#65288;rt6i_gateway&#65289;&#65292;&#20986;&#25509;&#21475;&#65288;rt6i_idev&#65289;&#65292;&#20248;&#20808;&#32423;&#65288;rt6i_metric&#65289;&#65292;&#21327;&#35758;&#65288;rt6i_protocol&#65289;&#65292;&#39318;&#36873;&#28304;&#65288;rt6i_prefsrc&#65289;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#25628;&#32034;key&#30340;&#26684;&#24335;&#26159;prefix / prefix length&#65292;&#23427;&#29992;&#20110;&#26816;&#26597;&#19968;&#20010;search key&#26159;&#21542;&#21305;&#37197;&#36825;&#26465;&#36335;&#30001;&#12290;&#24403;&#36941;&#21382;&#30340;&#26159;&#20027;&#26641;&#21363;&#24038;&#36793;&#30340;destination tree&#26102;&#65292;&#29992;&#30446;&#30340;IP&#21305;&#37197;rt6i_dst&#12290;&#24403;&#36941;&#21382;&#30340;&#26159;&#23376;&#26641;&#21363;&#21491;&#36793;&#30340;source tree&#26102;&#65292;&#29992;&#28304;IP&#21305;&#37197;rt6i_src&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#19968;&#20010;&#33410;&#28857;&#21363;&#20351;&#26377;&#23376;&#26641;&#23427;&#20063;&#21487;&#33021;&#26377;&#33258;&#24049;&#30340;rt6_info&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1458344799769" FOLDED="true" ID="ID_1493917952" MODIFIED="1459291104387" TEXT="info organization">
<node CREATED="1458344824253" ID="ID_5248826" MODIFIED="1458547175657">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_routing_2.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458583091004" ID="ID_314681187" MODIFIED="1458583412369">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;rt6_info&#23545;&#24212;&#20102;&#19968;&#26465;&#36335;&#30001;&#65292;&#20063;&#23545;&#24212;&#20102;&#19968;&#26465;&#28155;&#21152;&#36335;&#30001;&#30340;&#21629;&#20196;&#12290;
    </p>
    <p>
      &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#30001;&#20110;&#19979;&#19968;&#36339;&#65288;rt6i_gateway&#65289;&#65292;&#20986;&#25509;&#21475;&#65288;rt6i_idev&#65289;&#65292;&#20248;&#20808;&#32423;&#65288;rt6i_metric&#65289;&#30340;&#19981;&#21516;&#65292;
    </p>
    <p>
      &#21040;&#36798;&#21516;&#19968;&#30446;&#30340;&#32593;&#27573;&#21487;&#33021;&#26377;&#22810;&#26465;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458583304203" ID="ID_1343551029" MODIFIED="1459290118887">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#20449;&#24687;rt6_info&#21516;&#26102;&#29992;2&#31181;&#38142;&#34920;&#38142;&#25509;&#65306;
    </p>
    <p>
      &#31532;&#19968;&#31181;&#38142;&#34920;&#21487;&#20197;&#31216;&#20043;&#20026;full list&#65292;&#23427;&#21253;&#21547;&#20102;&#36335;&#30001;&#33410;&#28857;&#19979;&#25152;&#26377;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#23427;&#29992;struct rt6_info -&gt;dst-&gt;rt6_next&#30456;&#20114;&#38142;&#25509;&#65292;&#24182;&#29992;&#20248;&#20808;&#32423;(rt6i_metric)&#25490;&#24207;&#65292;&#22914;&#26524;&#20248;&#20808;&#32423;&#30456;&#21516;&#20877;&#25353;&#21152;&#20837;&#20808;&#21518;&#39034;&#24207;&#25490;&#21015;&#65292;&#20063;&#23601;&#26159;&#35828;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#20182;&#20204;&#30340;&#20301;&#32622;&#20250;&#26159;&#32039;&#37051;&#30340;&#12290;
    </p>
    <p>
      &#31532;&#20108;&#31181;&#38142;&#34920;&#21487;&#20197;&#31216;&#20043;&#20026;sibling list&#65292;&#27599;&#19968;&#20010;&#20248;&#20808;&#32423;&#26377;&#23427;&#33258;&#24049;&#30340;sibling list&#65292;&#23427;&#29992;struct rt6_info -&gt;rt6i_siblings&#30456;&#20114;&#38142;&#25509;&#65292;&#23427;&#29992;&#20110;&#38142;&#25509;&#20855;&#26377;&#30456;&#21516;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#20063;&#23601;&#26159;&#35828;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#24444;&#27492;&#20114;&#20026;&#20804;&#24351;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1458251629861" FOLDED="true" ID="ID_452439720" MODIFIED="1459303729072" TEXT="&#x8def;&#x7531;&#x67e5;&#x627e;">
<node CREATED="1456903738315" FOLDED="true" ID="ID_864395784" MODIFIED="1459290130822" TEXT="&#x76ee;&#x7684;">
<node CREATED="1456903769295" ID="ID_1561708230" MODIFIED="1458256672080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;&#29702;&#35770;&#19978;&#35762;&#65292;&#36335;&#30001;&#26597;&#25214;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#20915;&#23450;IP&#21253;&#30340;&#21435;&#21521;&#65306;&#36716;&#21457; (forward)&#65292;&#21457;&#36865; (output)&#65292;&#36824;&#26159;&#25237;&#36882;&#21040;local host (input)&#12290;
    </p>
    <p>
      &#20174;&#23454;&#29616;&#19978;&#35762;&#65292;&#23601;&#26159;&#32473;skb-&gt;dst-&gt;input()&#65292;skb-&gt;dst-&gt;output()&#20004;&#20010;&#20989;&#25968;&#25351;&#38024;&#36171;&#20540;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20989;&#25968;skb-&gt;dst-&gt;input()&#20250;&#22312;input&#38454;&#27573;&#34987;&#35843;&#29992;&#65292;&#32780;skb-&gt;dst-&gt;output()&#20250;&#22312;output&#38454;&#27573;&#34987;&#35843;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457648795524" ID="ID_1521100701" MODIFIED="1458263335693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_5.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457648251460" ID="ID_72460538" MODIFIED="1458257835789">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19982;ipv4&#22312;&#36335;&#30001;&#26597;&#25214;&#23436;&#25104;&#21518;&#20877;&#26500;&#24314;&#36335;&#30001;&#32531;&#23384;&#19981;&#21516;&#30340;&#26159;&#65292;ipv6&#22312;&#36335;&#30001;&#34987;&#28155;&#21152;&#26102;&#23601;&#26500;&#24314;&#22909;&#36335;&#30001;&#32531;&#23384;&#20102;&#12290;
    </p>
    <p>
      input()&#21644;output()&#34987;&#35774;&#32622;&#25104;&#20160;&#20040;&#20540;&#26159;&#22312;&#28155;&#21152;&#36335;&#30001;&#26102;&#22312;&#20989;&#25968;ip6_route_add()&#20013;&#20915;&#23450;&#30340;&#65292;
    </p>
    <p>
      &#23427;&#20027;&#35201;&#21462;&#20915;&#20110;&#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#26159;&#21333;&#25773;&#36824;&#26159;&#32452;&#25773;&#65292;&#26159;&#26412;&#22320;&#22320;&#22336;&#36824;&#26159;&#36828;&#31243;&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457649013921" ID="ID_383304635" MODIFIED="1458258213896" TEXT="input&#x7684;&#x5305;&#x5728;ip6_rcv_finish()&#x4e2d;&#x8c03;&#x7528;ip6_route_input()&#x6765;&#x67e5;&#x627e;&#x8def;&#x7531;&#xff0c;&#xa;output&#x7684;&#x5305;&#x5728;udpv6_sendmsg() / inet6_csk_xmit() / rawv6_sendmsg()&#x4e2d;&#x8c03;&#x7528;ip6_route_output()&#x6765;&#x67e5;&#x627e;&#x8def;&#x7531;&#xff0c;&#xa;&#x8def;&#x7531;&#x4e2d;&#x7684;&#x8def;&#x7531;&#x7f13;&#x5b58;struct dst_entry&#x65e9;&#x5728;&#x6dfb;&#x52a0;&#x8def;&#x7531;&#x65f6;(ip6_route_add)&#x5c31;&#x5206;&#x914d;&#x597d;&#x4e86;&#x3002;"/>
<node CREATED="1457649013921" ID="ID_1894042709" MODIFIED="1458260229212" TEXT="&#x5982;&#x679c;&#x76ee;&#x7684;&#x5730;&#x5740;&#x662f;&#x7ec4;&#x64ad;&#x5305;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_mc_input&#xff0c;&#x800c;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_output&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x76ee;&#x7684;&#x5730;&#x5740;&#x662f;&#x672c;&#x5730;&#x5730;&#x5740;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_input&#xff0c;&#x800c;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_output&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x76ee;&#x7684;&#x5730;&#x5740;&#x662f;&#x975e;&#x672c;&#x5730;&#x7684;&#x5355;&#x64ad;&#x5730;&#x5740;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_forward&#xff0c;&#x800c;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_output&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x8def;&#x7531;&#x8868;&#x660e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e0d;&#x53ef;&#x8fbe;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x548c;skb-&gt;dst-&gt;output&#x90fd;&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip6_pkt_discard_out&#xff0c;&#x8fd9;&#x5c06;&#x4ea7;&#x751f;&#x4e00;&#x4e2a;ICMP&#x6d88;&#x606f;&#x3002;ip6_pkt_discard_out&#x4f1a;&#x91ca;&#x653e;skb&#x7f13;&#x51b2;&#x533a;&#x3002;"/>
<node CREATED="1457651218968" ID="ID_588796885" MODIFIED="1457651402672">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;skb-&gt;dst&#19981;&#33021;&#34987;&#20351;&#29992;&#26102;&#65292;skb-&gt;dst-&gt;input&#21644;skb-&gt;dst-&gt;output&#34987;&#21021;&#22987;&#21270;&#20026;dst_discard&#65292;&#23427;&#21482;&#26159;&#31616;&#21333;&#20002;&#24323;&#21253;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#36335;&#30001;&#32531;&#23384;&#38656;&#35201;&#34987;&#21024;&#38500;&#20294;&#30001;&#20110;&#24341;&#29992;&#35745;&#25968;&#19981;&#20026;0&#36824;&#19981;&#33021;&#34987;&#38144;&#27585;&#26102;&#23601;&#20250;&#20986;&#29616;&#19978;&#36848;&#24773;&#20917;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1456877294213" FOLDED="true" ID="ID_1924828396" MODIFIED="1459290132167" TEXT="&#x603b;&#x4f53;&#x67b6;&#x6784;">
<node CREATED="1456877307748" ID="ID_1521411126" MODIFIED="1458696394179">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_route_arch_1.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1456877700631" ID="ID_1393454881" MODIFIED="1458869493447">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24635;&#20307;&#19978;&#36335;&#30001;&#26597;&#25214;&#30340;&#36807;&#31243;&#21487;&#20197;&#20998;&#20026;4&#20010;&#37096;&#20998;&#65306;
    </p>
    <p>
      1&#65292;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi6&#30340;&#21021;&#22987;&#21270;&#19982;&#21512;&#27861;&#24615;&#39564;&#35777;&#12290;&#36825;&#19968;&#37096;&#20998;&#21253;&#25324;fib6_rule_lookup()&#20043;&#19978;&#30340;&#25152;&#26377;&#37096;&#20998;&#12290;
    </p>
    <p>
      &#20026;&#25509;&#25910;&#30340;IP&#21253;&#26597;&#25214;&#36335;&#30001;&#65292;&#20854;&#20837;&#21475;&#20989;&#25968;&#26159;ip6_route_input&#65307;&#20026;&#26412;&#22320;&#21457;&#36865;&#30340;IP&#21253;&#26597;&#25214;&#36335;&#30001;&#65292;&#20854;&#20837;&#21475;&#20989;&#25968;&#26159;ip6_route_output&#12290;
    </p>
    <p>
      
    </p>
    <p>
      2&#65292;&#20915;&#23450;&#26597;&#25214;&#21738;&#24352;&#36335;&#30001;&#34920;&#12290;&#22914;&#26524;&#24320;&#21551;&#20102;&#31574;&#30053;&#36335;&#30001;&#19988;&#29992;&#25143;&#37197;&#32622;&#20102;&#36335;&#30001;&#35268;&#21017;&#65292;&#37027;&#20040;&#23601;&#26597;&#25214;&#36825;&#20123;&#36335;&#30001;&#35268;&#21017;&#20197;&#20915;&#23450;&#20351;&#29992;&#21738;&#24352;&#36335;&#30001;&#34920;&#12290;&#21542;&#21017;&#23601;&#21482;&#26597;&#25214;&#31995;&#32479;&#40664;&#35748;&#30340;main&#34920;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      3&#65292;&#36941;&#21382;radix&#26641;&#20197;&#25214;&#21040;&#21305;&#37197;&#30340;&#36335;&#30001;(node lookup)&#12290;&#26597;&#25214;&#20197;&#26368;&#38271;&#21305;&#37197;&#30340;&#26041;&#24335;&#36827;&#34892;&#12290;&#19968;&#20010;struct fib6_node&#32467;&#26500;&#20195;&#34920;&#20102;&#19968;&#26465;&#36335;&#30001;&#65292;&#23427;&#23454;&#38469;&#19978;&#20195;&#34920;&#20102;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;destination_subnet / prefix_length&#65292;&#19982;&#20197;&#21069;&#30340;fib_node&#32467;&#26500;&#31867;&#20284;&#12290;&#24403;&#38656;&#35201;&#29992;&#28304;IP&#22320;&#22336;&#36827;&#34892;&#36335;&#30001;&#36873;&#25321;&#26102;fib6_node&#19979;&#38754;&#26377;&#19968;&#20010;subtree&#65292;&#23427;&#21516;&#26679;&#26159;&#19968;&#20010;radix&#26641;&#65292;&#21482;&#19981;&#36807;&#37324;&#38754;&#25918;&#30340;&#26159;source address&#12290;&#36335;&#30001;&#26597;&#25214;&#26102;&#20808;&#36827;&#34892;destination specific routing&#21363;&#29992;&#30446;&#30340;IP&#22320;&#22336;&#26597;&#25214;&#65292;&#20877;&#36827;&#34892;source specific routing&#21363;&#29992;&#28304;IP&#22320;&#22336;&#22312;fib6_node&#20013;&#30340;subtree&#36827;&#34892;&#26597;&#25214;&#12290;&#21462;&#20915;&#20110;&#26377;&#27809;&#26377;subtree&#65292;&#36335;&#30001;&#20449;&#24687;struct rt6_info&#21487;&#33021;&#25346;&#22312;destination tree&#19979;&#20063;&#21487;&#33021;&#25346;&#22312;source tree&#19979;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      4&#65292;&#26597;&#25214;&#36335;&#30001;&#20449;&#24687;(info lookup)&#12290;&#19968;&#26465;&#36335;&#30001;&#20449;&#24687;&#30001;struct rt6_info&#20195;&#34920;&#65292;&#23427;&#25918;&#22312;struct fib6_node&#19979;&#38754;&#12290;&#27880;&#24847;&#19968;&#20010;struct fib6_node&#32467;&#26500;&#19979;&#21487;&#33021;&#25346;&#20102;&#22810;&#20010;&#36335;&#30001;&#20449;&#24687;&#65292;&#20248;&#20808;&#32423;&#19981;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#38142;&#25509;&#25104;&#19968;&#24352;&#34920;&#65292;&#20248;&#20808;&#32423;&#30456;&#21516;&#32780;&#20986;&#25509;&#21475;&#21644;&#19979;&#19968;&#36339;&#19981;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#20877;&#38142;&#25509;&#25104;&#21478;&#19968;&#24352;&#34920;&#12290;&#36335;&#30001;&#20449;&#24687;struct rt6_info&#20013;&#21253;&#21547;&#20102;&#26368;&#32456;&#30340;&#19979;&#19968;&#36339;&#21644;&#20986;&#25509;&#21475;&#12290;&#36825;&#19968;&#37096;&#20998;&#30340;&#26597;&#25214;&#21487;&#20197;&#20998;&#20026;&#19977;&#20010;&#37096;&#20998;&#65306;
    </p>
    <p>
      4.1&#65292;&#29992;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi6&#20013;&#30340;&#20986;&#25509;&#21475;&#36807;&#28388;&#36335;&#30001;&#20449;&#24687;&#65292;&#22312;&#31532;&#19968;&#20010;&#38142;&#34920;&#37324;&#25214;&#20986;&#20248;&#20808;&#32423;&#26368;&#39640;&#30340;&#36335;&#30001;&#20449;&#24687;&#12290;
    </p>
    <p>
      4.2&#65292;&#29992;&#28304;IP/&#30446;&#30340;IP/&#28304;&#31471;&#21475;/&#30446;&#30340;&#31471;&#21475;&#35745;&#31639;&#20986;&#19968;&#20010;hash&#65292;&#28982;&#21518;&#22312;&#31532;&#20108;&#20010;&#38142;&#34920;&#37324;&#36873;&#20986;&#19968;&#20010;&#36335;&#30001;&#20449;&#24687;&#65292;&#36825;&#31216;&#20026;multipath selection&#12290;
    </p>
    <p>
      4.3&#65292;&#22914;&#26524;&#25214;&#21040;&#30340;&#26159;&#19968;&#26465;host&#36335;&#30001;&#37027;&#23601;&#21487;&#20197;&#36820;&#22238;&#20102;&#12290;host&#36335;&#30001;&#26159;&#25351;&#25513;&#30721;&#38271;&#24230;&#20026;128&#30340;&#36335;&#30001;&#65292;&#32593;&#32476;&#36335;&#30001;&#26159;&#25351;&#25513;&#30721;&#38271;&#24230;&#23567;&#20110;128&#30340;&#36335;&#30001;&#12290;&#22914;&#26524;&#25214;&#21040;&#30340;&#19981;&#26159;host&#36335;&#30001;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#26681;&#25454;&#25214;&#21040;&#30340;&#32593;&#32476;&#36335;&#30001;clone&#20986;&#19968;&#20221;host&#36335;&#30001;&#65292;&#28982;&#21518;&#23558;&#26032;&#21019;&#24314;&#30340;host&#36335;&#30001;&#25554;&#20837;&#21040;radix&#26641;&#20013;&#65292;&#36825;&#26679;&#19979;&#27425;&#26597;&#25214;&#20250;&#26356;&#24555;&#12290;&#36825;&#20010;&#36807;&#31243;&#31216;&#20026;route cloning&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#23545;&#20110;&#26368;&#39030;&#23618;API&#65306;ip6_route_input&#65292;ip6_route_output&#30340;&#35843;&#29992;&#32773;&#32780;&#35328;&#65292;&#23427;&#20204;&#19981;&#29702;&#35299;&#36335;&#30001;&#31995;&#32479;&#20869;&#37096;&#32467;&#26500;struct fib6_node&#65292;struct rt6_info&#12290;&#23427;&#20204;&#21482;&#20351;&#29992;&#36335;&#30001;&#32531;&#23384;&#19982;&#36335;&#30001;&#31995;&#32479;&#20132;&#20114;&#12290;&#35843;&#29992;&#32773;&#19968;&#33324;&#21482;&#20250;&#35775;&#38382;&#36335;&#30001;&#32531;&#23384;&#30340;&#21327;&#35758;&#26080;&#20851;&#37096;&#20998;&#65292;&#21363;struct dst_entry&#12290;&#23545;&#20110;ipv6&#32780;&#35328;&#65292;&#36335;&#30001;&#32531;&#23384;&#30340;&#26500;&#24314;&#24182;&#19981;&#26159;&#22312;&#36335;&#30001;&#26597;&#25214;&#20043;&#21518;&#23436;&#25104;&#65292;&#32780;&#26159;&#22312;&#28155;&#21152;&#36335;&#30001;&#26102;&#23601;&#23436;&#25104;&#20102;&#65292;&#25152;&#20197;struct dst_entry&#22312;&#36335;&#30001;&#28155;&#21152;&#26102;&#23601;&#21021;&#22987;&#21270;&#22909;&#20102;&#65292;&#36335;&#30001;&#26597;&#25214;&#23436;&#25104;&#21518;&#21482;&#38656;&#35201;&#23558;&#20854;&#36171;&#20540;&#32473;skb-&gt;dst&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456859711322" FOLDED="true" ID="ID_1736217889" MODIFIED="1459290134751" TEXT="&#x89e6;&#x53d1;&#x8def;&#x7531;&#x67e5;&#x627e;&#x7684;&#x70b9;">
<node CREATED="1456861146859" ID="ID_1136289762" MODIFIED="1458252195510">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_pkt_process_stages.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1456861230581" ID="ID_1907612452" MODIFIED="1457573051603">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30001;&#22270;&#20013;&#32511;&#33394;&#26694;&#21487;&#35265;&#65292;&#35302;&#21457;&#36335;&#30001;&#26597;&#25214;&#30340;&#28857;&#20027;&#35201;&#26377;2&#20010;&#65292;&#19968;&#26159;&#25910;&#21253;&#26102;&#65292;&#20108;&#26159;&#21457;&#21253;&#26102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456863790802" ID="ID_184914252" MODIFIED="1458773075299">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_route_arch_2.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456880581735" FOLDED="true" ID="ID_1042603196" MODIFIED="1459281619400">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi6&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#21021;&#22987;&#21270;&#19982;&#21512;&#27861;&#24615;&#39564;&#35777;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456864191310" ID="ID_1155682860" MODIFIED="1458773126879">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_route_arch_2.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456864145616" FOLDED="true" ID="ID_327605057" MODIFIED="1459281615636" TEXT="&#x8def;&#x7531;&#x67e5;&#x627e;API&#x7684;&#x533a;&#x522b;">
<node CREATED="1456865056252" ID="ID_1163658975" MODIFIED="1458773284195">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib6_lookup()&#30340;&#36755;&#20837;&#21442;&#25968;&#21482;&#26377;2&#20010;&#65306;
    </p>
    <p>
      &#19968;&#20010;&#26159;&#25152;&#35201;&#26597;&#25214;&#30340;&#36335;&#30001;&#34920;struct fib6_table *tb&#65292;&#23427;&#30001;&#26159;&#21542;&#24320;&#21551;&#20102;&#31574;&#30053;&#36335;&#30001;&#65292;&#20197;&#21450;&#29992;&#25143;&#26159;&#21542;&#37197;&#32622;&#20102;&#36335;&#30001;&#35268;&#21017;&#20915;&#23450;&#12290;
    </p>
    <p>
      &#21478;&#19968;&#20010;&#21442;&#25968;&#26159;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi6 *flp&#65292;&#23427;&#20915;&#23450;&#20102;&#35201;&#26597;&#25214;&#21738;&#26465;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#30340;API&#26377;&#24456;&#22810;&#65292;&#23427;&#20204;&#30340;&#21306;&#21035;&#23601;&#22312;&#20110;&#23545;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi6 *flp&#36827;&#34892;&#19981;&#21516;&#30340;&#21021;&#22987;&#21270;&#21644;&#19981;&#21516;&#30340;&#26816;&#26597;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456899472742" ID="ID_82380561" MODIFIED="1458854959152">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_route_arch_4.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1456900426258" ID="ID_1498104713" MODIFIED="1456900437038" TEXT="&#x6240;&#x6709;API&#x7684;&#x76f8;&#x540c;&#x70b9;">
<node CREATED="1456900468263" ID="ID_1696751125" MODIFIED="1458854740833" TEXT="&#x6240;&#x6709;API&#x90fd;&#x521d;&#x59cb;&#x5316;&#x4e86;saddr&#xff0c;daddr&#x4e24;&#x4e2a;&#x57df;"/>
</node>
<node CREATED="1456900267686" ID="ID_831039101" MODIFIED="1456901287982" TEXT="input&#x7cfb;&#x5217;API&#x4e0e;output&#x7cfb;&#x5217;API&#x7684;&#x4e0d;&#x540c;&#x70b9;">
<node CREATED="1456902659951" ID="ID_768046257" MODIFIED="1458854953858">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#22522;&#26412;&#30340;&#21306;&#21035;&#24403;&#28982;&#26159;&#35843;&#29992;input&#31995;&#21015;API&#30340;&#20301;&#32622;&#19982;output&#31995;&#21015;API&#19981;&#21516;&#12290;
    </p>
    <p>
      input&#31995;&#21015;API&#26159;&#22312;&#21253;&#36755;&#20837;&#31995;&#32479;&#26102;&#34987;&#35843;&#29992;&#65292;&#20063;&#21363;ip6_recv_finish()&#20989;&#25968;&#20013;&#35843;&#29992;&#12290;&#27492;&#26102;&#26597;&#25214;&#36335;&#30001;&#30340;&#30446;&#30340;&#26159;&#24819;&#20915;&#23450;&#23558;&#21253;&#36716;&#21457;&#21040;&#20986;&#25509;&#21475;&#36824;&#26159;&#25237;&#36882;&#21040;local host&#33258;&#24049;&#12290;
    </p>
    <p>
      output&#31995;&#21015;API&#26159;&#22312;&#26412;&#22320;&#21457;&#21253;&#26102;&#34987;&#35843;&#29992;&#65292;tcp/udp/raw&#20250;&#22312;&#19981;&#21516;&#22320;&#28857;&#35843;&#29992;output&#31995;&#21015;API&#65292;&#20856;&#22411;&#22320;&#65292;tcp&#21253;&#26159;&#22312;inet6_csk_xmit()&#20989;&#25968;&#20013;&#35843;&#29992;&#12290;&#27492;&#26102;&#26597;&#25214;&#36335;&#30001;&#30340;&#30446;&#30340;&#26159;&#24819;&#20915;&#23450;&#23558;&#21253;&#21457;&#36865;&#21040;&#20986;&#25509;&#21475;&#36824;&#26159;&#25237;&#36882;&#21040;local host&#33258;&#24049;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456900523706" ID="ID_1674894964" MODIFIED="1456900703259">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      input&#31995;&#21015;API&#21021;&#22987;&#21270;&#20102;&#20837;&#21475;&#35774;&#22791;flowic_iif&#65292;&#20294;&#27809;&#26377;&#35774;&#32622;&#20986;&#21475;&#35774;&#22791;flowic_oif
    </p>
    <p>
      output&#31995;&#21015;API&#21021;&#22987;&#21270;&#20102;&#20986;&#21475;&#35774;&#22791;flowic_oif&#65292;&#28982;&#21518;&#23558;&#20837;&#21475;&#35774;&#22791;flowic_iif&#35774;&#32622;&#20026;&#29615;&#22238;&#21475;loopback&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456900785396" ID="ID_1136070114" MODIFIED="1456900912122">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      input&#31995;&#21015;API&#20256;&#20837;&#20102;skb&#20316;&#20026;&#21442;&#25968;&#65292;&#25152;&#20197;&#23427;&#20204;&#19968;&#33324;&#23558;flowic_mark&#21021;&#22987;&#21270;&#20026;skb-&gt;mark&#12290;
    </p>
    <p>
      output&#31995;&#21015;API&#20256;&#20837;&#20102;socket&#20316;&#20026;&#21442;&#25968;&#65292;&#25152;&#20197;&#23427;&#20204;&#19968;&#33324;&#23558;flowic_mark&#21021;&#22987;&#21270;&#20026;sk-&gt;sk_mark&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456901256299" ID="ID_1436028937" MODIFIED="1456901279913" TEXT="output&#x7cfb;&#x5217;API&#x7684;&#x4e0d;&#x540c;&#x70b9;">
<node CREATED="1456901396390" ID="ID_1106060997" MODIFIED="1458856322057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rt6_lookup(daddr, saddr, oif)
    </p>
    <p>
      &#25552;&#20379;&#20102;&#22522;&#26412;&#30340;&#21442;&#25968;&#32473;&#35843;&#29992;&#32773;&#65292;&#36825;&#36866;&#29992;&#20110;&#31616;&#21333;&#30340;&#36335;&#30001;&#26597;&#25214;&#22330;&#26223;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456901598737" ID="ID_824214825" MODIFIED="1458856406255">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip6_route_output (flp, sk)
    </p>
    <p>
      &#25552;&#20379;&#20102;&#27604;&#36739;&#20840;&#38754;&#30340;&#21442;&#25968;&#32473;&#35843;&#29992;&#32773;&#65292;&#21253;&#21547;&#20102;flowi6&#26412;&#36523;&#21644;socket&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456901847538" ID="ID_1598821987" MODIFIED="1458858116910">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip6_route_output(flp, sk)
    </p>
    <p>
      &#36825;&#20010;API&#36866;&#29992;&#20110;&#26412;&#22320;&#21457;&#21253;&#26102;&#26597;&#25214;&#36335;&#30001;&#65292;&#19968;&#33324;&#25351;&#26412;&#22320;socket&#21457;&#21253;&#26102;&#26597;&#25214;&#36335;&#30001;
    </p>
    <p>
      
    </p>
    <p>
      ip6_route_lookup(flp)
    </p>
    <p>
      &#36825;&#20010;API&#30446;&#21069;&#21482;&#26159;&#22312;&#36827;&#34892;RPF&#26816;&#26597;&#26102;&#29992;&#21040;
    </p>
    <p>
      
    </p>
    <p>
      rt6_lookup(sa, da, oif)
    </p>
    <p>
      &#36825;&#20010;API&#19981;&#38656;&#35201;&#20256;&#20837;skb&#25110;socket&#65292;&#25152;&#20197;&#21487;&#20197;&#29992;&#20110;&#21457;&#21253;&#20043;&#22806;&#30340;&#20854;&#23427;&#25152;&#26377;&#29992;&#36884;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36827;&#34892;output&#36335;&#30001;&#26597;&#25214;&#26102;&#26377;&#19968;&#20010;&#36873;&#39033;RT6_LOOKUP_F_IFACE&#21487;&#20197;&#25351;&#23450;&#36335;&#30001;&#26597;&#25214;&#26102;&#26159;&#21542;&#38656;&#35201;&#20005;&#26684;&#21305;&#37197;&#20986;&#25509;&#21475;&#12290;
    </p>
    <p>
      &#20063;&#23601;&#26159;&#25214;&#21040;&#30340;&#36335;&#30001;&#30340;&#20986;&#25509;&#21475;&#35201;&#20005;&#26684;&#31561;&#20110;API&#21442;&#25968;&#25351;&#23450;&#30340;&#20986;&#25509;&#21475;&#12290;&#26377;&#19977;&#31181;&#24773;&#20917;&#26159;&#38656;&#35201;&#20005;&#26684;&#21305;&#37197;&#20986;&#25509;&#21475;&#30340;&#65306;
    </p>
    <p>
      1&#65292;socket&#32465;&#23450;&#20102;&#26576;&#19968;&#20010;&#25509;&#21475;&#65292;&#36825;&#36866;&#29992;&#20110;API&#65306;ip6_route_output(flp, sk)&#22240;&#20026;socket&#26159;&#23427;&#30340;&#20256;&#20837;&#21442;&#25968;&#12290;
    </p>
    <p>
      2&#65292;&#30446;&#30340;&#22320;&#22336;&#20026;&#32452;&#25773;&#65292;link local&#65292;&#29615;&#22238;&#22320;&#22336;&#26102;&#65292;&#36825;&#36866;&#29992;&#20110;&#20197;&#19978;&#25152;&#26377;API&#12290;
    </p>
    <p>
      3&#65292;API&#35843;&#29992;&#32773;&#25351;&#23450;&#35201;&#20005;&#26684;&#21305;&#37197;&#26102;&#65292;&#36825;&#36866;&#29992;&#20110;API&#65306;rt6_lookup()&#22240;&#20026;&#23427;&#26377;&#19968;&#20010;&#20256;&#20837;&#21442;&#25968;strict&#29992;&#20110;&#25351;&#23450;&#26159;&#21542;&#20005;&#26684;&#21305;&#37197;&#20986;&#25509;&#21475;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456881659376" FOLDED="true" ID="ID_326287632" MODIFIED="1459281618231" TEXT="&#x5408;&#x6cd5;&#x6027;&#x9a8c;&#x8bc1;">
<node CREATED="1458859197587" ID="ID_1532826848" MODIFIED="1458861050833">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#36825;&#20123;API&#37324;&#38754;&#65292;&#23454;&#38469;&#19978;&#27809;&#26377;&#21512;&#27861;&#24615;&#39564;&#35777;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#34429;&#28982;&#36825;&#20123;API&#37117;&#35843;&#29992;&#20102;ip6_rule_lookup&#29992;&#20110;&#20915;&#23450;&#26597;&#25214;&#21738;&#24352;&#36335;&#30001;&#34920;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#30495;&#27491;&#26597;&#25214;&#36335;&#30001;&#34920;&#26102;&#21364;&#20351;&#29992;&#20102;&#19981;&#21516;&#30340;&#20989;&#25968;&#65306;
    </p>
    <p>
      1&#65292;ip6_route_input&#21644;ip6_route_output&#26368;&#32456;&#37117;&#20250;&#29992;ip6_pol_route&#26469;&#26597;&#25214;&#36335;&#30001;&#34920;&#65292;&#36825;2&#32773;&#30340;&#21306;&#21035;&#22312;&#20110;&#65292;
    </p>
    <p>
      ip6_route_input&#20256;&#20837;&#30340;&#26159;&#20837;&#25509;&#21475;&#65292;&#25152;&#20197;&#23427;&#19981;&#20250;&#35201;&#27714;&#20005;&#26684;&#21305;&#37197;&#20986;&#25509;&#21475;&#65292;&#25152;&#20197;&#23454;&#38469;&#19978;&#20256;&#20837;&#30340;&#36825;&#20010;&#20837;&#25509;&#21475;&#27809;&#26377;&#29992;&#20110;&#36807;&#28388;&#36335;&#30001;&#12290;
    </p>
    <p>
      &#32780;ip6_route_output&#20256;&#20837;&#20102;&#20986;&#25509;&#21475;&#65292;&#21462;&#20915;&#20110;&#23427;&#30340;&#30446;&#30340;&#22320;&#22336;&#21644;socket&#26159;&#21542;&#32465;&#23450;&#20102;&#25509;&#21475;&#65292;&#23427;&#21487;&#33021;&#20250;&#35201;&#27714;&#20005;&#26684;&#21305;&#37197;&#20986;&#25509;&#21475;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      2&#65292;ip6_route_lookup&#21644;rt6_lookup&#26368;&#32456;&#37117;&#20250;&#29992;ip6_pol_route_lookup&#26469;&#26597;&#25214;&#36335;&#30001;&#34920;&#65292;&#33267;&#20110;ip6_pol_route_lookup&#19982;ip6_pol_route&#30340;&#21306;&#21035;&#65292;&#20174;ip6_route_lookup&#21644;rt6_lookup&#30340;&#29992;&#36884;&#23601;&#21487;&#20197;&#30693;&#36947;&#12290;&#36825;2&#20010;API&#29992;&#20110;&#19981;&#25910;&#21457;&#21253;&#20294;&#21448;&#38656;&#35201;&#26597;&#25214;&#36335;&#30001;&#30340;&#22330;&#21512;&#65292;&#25152;&#20197;ip6_pol_route_lookup&#19981;&#36827;&#34892;routing clone&#21363;&#19981;&#38656;&#35201;&#20026;network route&#20811;&#38534;&#21019;&#24314;&#20986;host route&#12290;&#32780;ip6_pol_route&#29992;&#20110;&#25910;&#21457;&#21253;&#26102;&#26597;&#25214;&#36335;&#30001;&#65292;&#25152;&#20197;&#23427;&#38656;&#35201;&#36827;&#34892;routing clone&#21363;&#38656;&#35201;&#20026;network route&#20811;&#38534;&#21019;&#24314;&#20986;host route&#12290;
    </p>
    <p>
      
    </p>
    <p>
      3&#65292;ip6_redirect&#21644;ip6_redirect_no_header&#26368;&#32456;&#37117;&#20250;&#20351;&#29992;__ip6_route_redirect&#26469;&#26597;&#25214;&#36335;&#30001;&#12290;__ip6_route_redirect&#19982;&#21069;&#38754;&#30340;&#20989;&#25968;ip6_pol_route_lookup&#19982;ip6_pol_route&#30340;&#21306;&#21035;&#26159;&#65292;__ip6_route_redirect&#35201;&#27714;&#31934;&#30830;&#21305;&#37197;&#32780;&#21518;2&#32773;&#21482;&#38656;&#35201;&#27169;&#31946;&#21305;&#37197;&#65292;&#25152;&#20197;__ip6_route_redirect&#19981;&#20165;&#20165;&#29992;&#28304;IP&#21644;&#30446;&#30340;IP&#26597;&#25214;&#36335;&#30001;&#36824;&#26377;&#29992;&#20986;&#25509;&#21475;&#21644;&#19979;&#19968;&#36339;&#21305;&#37197;&#36335;&#30001;&#12290;redirect&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#26367;&#25442;&#26576;&#19968;&#26465;&#36335;&#30001;&#65292;&#25152;&#20197;&#23427;&#35201;&#31934;&#30830;&#30340;&#25214;&#21040;&#23427;&#24819;&#26367;&#25442;&#30340;&#36335;&#30001;&#65292;&#32780;&#19981;&#26159;&#20687;input&#21644;output&#26597;&#25214;&#36335;&#30001;&#26102;&#37027;&#26679;&#21482;&#38656;&#35201;&#19968;&#20010;&#27169;&#31946;&#30340;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456880715297" FOLDED="true" ID="ID_517913905" MODIFIED="1459281625658">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20915;&#23450;&#26597;&#25214;&#21738;&#24352;&#36335;&#30001;&#34920;
    </p>
    <p>
      ip6_rule_lookup()
    </p>
  </body>
</html></richcontent>
<node CREATED="1457657925855" ID="ID_1839042752" MODIFIED="1457658170113" TEXT="&#x5f53;&#x652f;&#x6301;&#x7b56;&#x7565;&#x8def;&#x7531;&#x65f6;&#x7531;&#x8def;&#x7531;&#x89c4;&#x5219;(struct fib_rule)&#x51b3;&#x5b9a;&#x67e5;&#x627e;&#x54ea;&#x5f20;&#x8def;&#x7531;&#x8868;"/>
<node CREATED="1457658220034" ID="ID_83383328" MODIFIED="1457661398733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25152;&#26377;&#36335;&#30001;&#35268;&#21017;&#34987;&#25918;&#22312;&#20840;&#23616;&#38142;&#34920;fib_rules&#20013;&#65292;&#25353;&#29031;&#20248;&#20808;&#32423;(struct fib_rule -&gt; pref)&#25490;&#21015;&#65292;&#25968;&#20540;&#36234;&#23567;&#21017;&#20248;&#20808;&#32423;&#36234;&#39640;&#12290;
    </p>
    <p>
      &#27880;&#24847;&#36335;&#30001;&#34920;&#26412;&#36523;&#27809;&#26377;&#20248;&#20808;&#32423;&#65292;&#26377;&#20248;&#20808;&#32423;&#30340;&#26159;&#36335;&#30001;&#35268;&#21017;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457658447891" FOLDED="true" ID="ID_403467816" MODIFIED="1459281624712" TEXT="&#x5373;&#x4f7f;&#x7528;&#x6237;&#x6ca1;&#x6709;&#x914d;&#x7f6e;&#x4efb;&#x4f55;&#x8def;&#x7531;&#x89c4;&#x5219;&#xff0c;&#x7cfb;&#x7edf;&#x4e5f;&#x5305;&#x542b;&#x4e09;&#x4e2a;&#x9ed8;&#x8ba4;&#x89c4;&#x5219;">
<node CREATED="1457658480105" ID="ID_1400573773" MODIFIED="1457658490575">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_3.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457658751475" ID="ID_1874703486" MODIFIED="1457659079435">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#35268;&#21017;&#30340;&#40664;&#35748;&#21160;&#20316;&#26159;&#26597;&#25214;&#36335;&#30001;&#34920;&#65292;&#20294;&#26159;&#20063;&#21487;&#20197;&#35774;&#20026;&#19981;&#21516;&#30340;&#21160;&#20316;&#65306;
    </p>
    <p>
      goto&#65306;&#36339;&#21040;&#21478;&#22806;&#19968;&#26465;&#36335;&#30001;&#35268;&#21017;
    </p>
    <p>
      blackhole&#65306;&#31435;&#21363;&#20002;&#24323;&#21253;&#12290;
    </p>
    <p>
      unreachable&#65306;&#31435;&#21363;&#36820;&#22238;&#19981;&#21487;&#36798;&#30340;&#38169;&#35823;&#65292;&#20877;&#30001;&#35843;&#29992;&#32773;&#21457;&#20986;ICMP&#28040;&#24687;&#25552;&#37266;&#28304;&#12290;
    </p>
    <p>
      prohibit&#65306;&#31435;&#21363;&#36820;&#22238;&#31105;&#27490;&#30340;&#38169;&#35823;&#65292;&#20877;&#30001;&#35843;&#29992;&#32773;&#21457;&#20986;ICMP&#28040;&#24687;&#25552;&#37266;&#28304;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#37319;&#29992;&#40664;&#35748;&#21160;&#20316;&#21435;&#26597;&#25214;&#19968;&#24352;&#36335;&#30001;&#34920;&#65292;&#20294;&#21448;&#27809;&#26377;&#21305;&#37197;&#21040;&#20219;&#20309;&#36335;&#30001;&#65292;&#21017;&#32487;&#32493;&#21305;&#37197;&#21097;&#19979;&#30340;&#36335;&#30001;&#35268;&#21017;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458869524349" FOLDED="true" ID="ID_949367544" MODIFIED="1459281647584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#33410;&#28857;&#26597;&#25214; node lookup
    </p>
  </body>
</html></richcontent>
<node CREATED="1456880689165" ID="ID_1432854785" MODIFIED="1458882193783">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#19968;&#37096;&#20998;&#30340;&#30446;&#30340;&#26159;&#25214;&#21040;&#19968;&#20010;struct fib6_node&#32467;&#26500;&#65292;&#23427;&#20195;&#34920;&#30340;&#26159;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;&#65292;&#23427;&#30340;&#19979;&#38754;&#24517;&#39035;&#26377;&#20855;&#20307;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#21363;struct fib6_node -&gt; leaf&#19981;&#33021;&#20026;&#31354;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;struct fib6_node -&gt; leaf&#19981;&#20026;&#31354;&#20195;&#34920;&#36335;&#30001;&#33410;&#28857;&#26159;&#19968;&#20010;&#21494;&#23376;&#33410;&#28857;&#65292;&#20854;&#20013;&#21253;&#21547;&#20102;&#20855;&#20307;&#30340;&#36335;&#30001;&#20449;&#24687;&#12290;&#32780;struct fib6_node -&gt; leaf&#20026;&#31354;&#20195;&#34920;&#36335;&#30001;&#33410;&#28857;&#21482;&#26159;&#19968;&#20010;&#20869;&#37096;&#33410;&#28857;&#65292;&#20165;&#36215;&#21040;&#26500;&#25104;radix&#26641;&#30340;&#20316;&#29992;&#65292;&#20854;&#20013;&#19981;&#21253;&#21547;&#20855;&#20307;&#30340;&#36335;&#30001;&#20449;&#24687;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458869257291" FOLDED="true" ID="ID_1372059982" MODIFIED="1459281635911" TEXT="fib6_lookup()">
<node CREATED="1458869292525" ID="ID_1745058467" MODIFIED="1458869323451">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib6_table_lookup_radix_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1458344824253" ID="ID_1256038484" MODIFIED="1458344861682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_routing_1.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1456880689165" ID="ID_910855630" MODIFIED="1458871197150">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#34920;&#21487;&#20197;&#30475;&#20570;&#26159;2&#31181;radix&#26641;&#26500;&#25104;&#30340;&#65306;
    </p>
    <p>
      &#31532;&#19968;&#31181;radix&#26641;&#29992;&#20110;&#30446;&#30340;IP&#32593;&#27573;&#30340;&#26597;&#25214;&#65292;&#23427;&#26159;&#20027;&#24178;&#12290;
    </p>
    <p>
      &#31532;&#19968;&#31181;radix&#26641;&#30340;&#27599;&#19968;&#20010;&#33410;&#28857;&#19979;&#37117;&#21487;&#33021;&#20877;&#25346;&#19968;&#20010;&#31532;&#20108;&#31181;radix&#26641;&#65292;&#23427;&#29992;&#20110;&#28304;IP&#32593;&#27573;&#26597;&#25214;&#65292;&#23427;&#26159;&#23376;&#26641;&#21363;subtree&#12290;
    </p>
    <p>
      
    </p>
    <p>
      fib6_lookup_1()&#26082;&#21487;&#20197;&#29992;&#26469;&#26597;&#25214;destination&#160;specific tree&#20063;&#21487;&#20197;&#29992;&#26469;&#26597;&#25214;source&#160;&#160;specific tree&#12290;&#36825;&#21462;&#20915;&#20110;&#23427;&#30340;&#21442;&#25968;root&#21644;args&#65306;
    </p>
    <p>
      &#24403;&#26597;&#25214;destination&#160;specific tree&#26102;&#65292;root&#25351;&#21521;destination&#160;specific tree&#30340;&#26681;&#33410;&#28857;&#65292;args&#25351;&#21521;&#25968;&#32452;struct lookup_args args[]&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#65292;&#36825;&#34920;&#31034;&#25628;&#32034;&#20851;&#38190;&#23383;&#26159;&#30446;&#30340;IP&#22320;&#22336;&#65292;&#38656;&#35201;&#29992;&#23427;&#21305;&#37197;&#36335;&#30001;&#33410;&#28857;&#20013;&#30340;&#65306;
    </p>
    <p>
      (struct fib6_node *)fn -&gt; (struct rt6_info *)leaf -&gt; (struct rt6key )rt6i_dst&#65292;&#31532;&#19968;&#20010;offset&#20063;&#27491;&#26159;&#25351;&#21521;&#20102;&#36825;&#20010;&#23383;&#27573;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#26597;&#25214;source&#160;specific tree&#26102;&#65292;root&#25351;&#21521;source&#160;specific tree&#21363;(struct fib6_node *)fn -&gt; (struct fib6_node *)subtree &#30340;&#26681;&#33410;&#28857;&#65292;args&#25351;&#21521;&#25968;&#32452;struct lookup_args args[]&#30340;&#31532;&#20108;&#20010;&#20803;&#32032;&#65292;&#36825;&#34920;&#31034;&#25628;&#32034;&#20851;&#38190;&#23383;&#26159;&#28304;IP&#22320;&#22336;&#65292;&#38656;&#35201;&#29992;&#23427;&#21305;&#37197;&#36335;&#30001;&#33410;&#28857;&#20013;&#30340;&#65306;
    </p>
    <p>
      (struct fib6_node *)fn -&gt; (struct rt6_info *)leaf -&gt; (struct rt6key )rt6i_src&#65292;&#31532;&#20108;&#20010;offset&#20063;&#27491;&#26159;&#25351;&#21521;&#20102;&#36825;&#20010;&#23383;&#27573;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1458869285644" FOLDED="true" ID="ID_254397772" MODIFIED="1459281646059" TEXT="fib6_lookup_1()">
<node CREATED="1458869292525" ID="ID_400651697" MODIFIED="1458869355106">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/fib6_table_lookup_radix_2.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458882477119" ID="ID_1059342574" MODIFIED="1458926488741">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;&#36335;&#30001;&#33410;&#28857;&#30340;fn-&gt;fn_bit&#20195;&#34920;&#20102;&#36825;&#20010;&#36335;&#30001;&#33410;&#28857;&#30340;prefix length
    </p>
    <p>
      &#23427;&#20063;&#29992;&#20110;&#25351;&#23548;&#19979;&#19968;&#27493;&#36941;&#21382;&#65292;&#24403;search key&#20063;&#23601;&#26159;args-&gt;addr&#30340;&#31532;fn-&gt;fn_bit&#20026;0&#26102;&#19979;&#19968;&#27493;&#36941;&#21382;&#21040;&#24038;&#23376;&#26641;&#65292;&#20026;1&#26102;&#36941;&#21382;&#21040;&#21491;&#23376;&#26641;&#12290;&#24403;&#19979;&#19968;&#27493;&#35201;&#36941;&#21382;&#30340;&#23376;&#26641;&#20026;&#31354;&#26102;&#19981;&#20877;&#24448;&#19979;&#36941;&#21382;&#65292;&#32780;&#26159;&#38656;&#35201;&#32771;&#34385;&#24403;&#21069;&#33410;&#28857;&#30340;&#36335;&#30001;&#26159;&#21542;&#21305;&#37197;search key&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458869292525" ID="ID_779420495" MODIFIED="1458942128536">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/fib6_table_lookup_radix_3.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458926672273" ID="ID_1555167327" MODIFIED="1458940937763" TEXT="&#x8003;&#x8651;&#x5f53;&#x524d;&#x8282;&#x70b9;&#x7684;&#x8def;&#x7531;&#x662f;&#x5426;&#x5339;&#x914d;search key">
<node CREATED="1458927379053" ID="ID_1727320144" MODIFIED="1458928021296">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#19968;&#20010;&#36335;&#30001;&#33410;&#28857;&#19979;&#26377;&#36335;&#30001;&#20449;&#24687;&#65292;&#37027;&#23427;&#21487;&#33021;&#23384;&#22312;&#20110;&#36335;&#30001;&#33410;&#28857;&#26412;&#36523;&#65292;&#20063;&#23601;&#26159;fn-&gt;leaf&#19981;&#20026;&#31354;&#12290;&#20063;&#26377;&#21487;&#33021;&#23384;&#22312;&#20110;&#23427;&#30340;source specific tree&#20063;&#23601;&#26159;fn-&gt;subtree&#20013;&#65292;&#27880;&#24847;fn-&gt;subtree&#20063;&#26159;&#19968;&#26869;radix&#26641;&#65292;&#23427;&#20854;&#20013;&#21487;&#33021;&#20063;&#26377;&#24456;&#22810;&#21494;&#23376;&#33410;&#28857;&#20063;&#23601;&#26159;&#21253;&#21547;&#36335;&#30001;&#20449;&#24687;&#30340;&#36335;&#30001;&#33410;&#28857;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#36335;&#30001;&#33410;&#28857;&#26412;&#36523;&#21253;&#21547;&#20102;&#36335;&#30001;&#20449;&#24687;&#65292;&#37027;&#20040;fn-&gt;fn_flags&#20250;&#24102;RTN_RTINFO&#26631;&#35782;&#65292;&#27492;&#26102;fn-&gt;leaf&#19981;&#20026;&#31354;&#65292;fn&#20026;&#21494;&#23376;&#33410;&#28857;&#12290;&#22914;&#26524;&#36335;&#30001;&#33410;&#28857;&#19979;&#21253;&#21547;&#20102;&#28304;&#36335;&#30001;&#20449;&#24687;source specific tree&#65292;&#37027;&#20040;fn-&gt;subtree&#19981;&#20026;&#31354;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458928237436" ID="ID_307782480" MODIFIED="1458929525630">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;&#38544;&#21547;&#30340;&#35268;&#21017;&#26159;&#65292;source specific tree&#21363;fn-&gt;subtree&#24517;&#28982;&#26159;&#25346;&#22312;&#26576;&#20010;&#21494;&#23376;&#33410;&#28857;&#19979;&#65292;&#21363;&#22914;&#26524;fn-&gt;subtree&#19981;&#20026;&#31354;&#37027;&#20040;fn-&gt;leaf&#20063;&#19981;&#20026;&#31354;&#12290;&#20294;&#26159;&#21453;&#36807;&#26469;&#24182;&#19981;&#25104;&#31435;&#65292;fn-&gt;leaf&#19981;&#20026;&#31354;&#26102;fn-&gt;subtree&#21487;&#33021;&#20026;&#31354;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#20010;&#35268;&#21017;&#21487;&#20197;&#20174;&#29992;&#25143;&#23618;&#30340;&#21629;&#20196;&#35266;&#23519;&#24471;&#21040;&#65292;
    </p>
    <p>
      &#24403;&#25105;&#20204;&#29992;&#21629;&#20196; ip -6 route add 2002:c024::0/64 from 2002:c026::0/64 dev eth1 via 2002:c023:9c17:305::1 &#28155;&#21152;&#36335;&#30001;&#26102;&#65292;&#23454;&#38469;&#19978;&#28155;&#21152;&#20102;2&#26465;&#36335;&#30001;&#65306;
    </p>
    <p>
      2002:c024::0/64 from 2002:c026::0/64 via 2002:c023:9c17:305::1 dev eth1 metric 1024
    </p>
    <p>
      2002:c024::0/64 via 2002:c023:9c17:305::1 dev eth1 proto static metric 32551
    </p>
    <p>
      &#21069;&#19968;&#26465;&#34987;&#25918;&#22312;&#20102;source specific tree&#19979;&#38754;&#65292;&#32780;&#36825;&#20010;source specific tree&#27491;&#26159;&#21518;&#19968;&#26465;&#36335;&#30001;&#30340;&#23376;&#26641;&#21363;fn-&gt;subtree&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458930008345" ID="ID_207792644" MODIFIED="1458931172777">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26816;&#26597;&#33410;&#28857;&#30340;&#36335;&#30001;&#26159;&#21542;&#21305;&#37197;search key&#26102;&#65292;&#25105;&#20204;&#39318;&#20808;&#35201;&#27714;search key&#21305;&#37197;&#36335;&#30001;&#20449;&#24687;&#20013;&#30340;&#30446;&#30340;&#32593;&#27573;&#65292;&#21363;ipv6_prefix_equal()&#25152;&#20570;&#30340;&#20107;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26082;&#28982;&#36890;&#36807;fn-&gt;fn_bit&#30340;&#25628;&#32034;&#21040;&#36798;&#20102;&#24403;&#21069;&#33410;&#28857;&#65292;&#35828;&#26126;prefix / fn-&gt;fn_bit&#24050;&#32463;&#21305;&#37197;search key&#20102;&#65292;&#37027;&#20040;&#36824;&#26377;&#24517;&#35201;&#26816;&#26597;fn-&gt;leaf-&gt;rt6i_dst&#21527;&#65311;&#36825;&#37324;&#26377;&#24517;&#35201;&#26159;&#22240;&#20026;fn-&gt;fn_bit&#21644;fn-&gt;leaf-&gt;rt6i_dst-&gt;plen&#19981;&#19968;&#23450;&#30456;&#31561;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458932358443" ID="ID_1724238542" MODIFIED="1458940898751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;fn-&gt;subtree&#19981;&#20026;&#31354;&#26102;&#35828;&#26126;&#27492;&#36335;&#30001;&#33410;&#28857;&#19979;&#26377;&#28304;&#36335;&#30001;source specific tree&#65292;&#27492;&#26102;&#38656;&#35201;&#29992;&#28304;IP&#22320;&#22336;&#22312;source specific tree&#26641;&#20013;&#36827;&#34892;&#36827;&#19968;&#27493;&#30340;&#26597;&#25214;&#65292;&#20197;&#29992;&#28304;IP&#22320;&#22336;&#26469;&#36827;&#34892;&#36335;&#30001;&#36873;&#25321;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      source specific tree&#20063;&#26159;&#19968;&#26869;radix&#26641;&#65292;&#23427;&#30340;&#26500;&#36896;&#23436;&#20840;&#19982;destination specific tree&#30456;&#21516;&#65292;&#25152;&#20197;&#36824;&#26159;&#21487;&#20197;&#29992;&#20989;&#25968;fib6_lookup_1()&#26469;&#26597;&#25214;&#65292;&#21482;&#19981;&#36807;&#20256;&#20837;&#30340;&#21442;&#25968;&#19981;&#19968;&#26679;&#32780;&#24050;&#12290;&#36941;&#21382;source specific tree&#26102;&#20256;&#20837;fib6_lookup_1()&#30340;&#21442;&#25968;root&#26159;&#28304;&#23376;&#26641;fn-&gt;subtree&#65292;&#32780;args&#25351;&#21521;&#20102;args&#25968;&#32452;&#30340;&#31532;&#20108;&#20010;&#20803;&#32032;&#21363;&#28304;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;source specific tree&#20013;&#30340;&#33410;&#28857;&#19981;&#20877;&#26377;&#23376;&#26641;&#21363;fn-&gt;subtree&#20026;&#31354;&#65292;&#36825;&#20445;&#35777;&#20102;&#36941;&#21382;&#19981;&#20250;&#26080;&#27490;&#22659;&#30340;&#36882;&#24402;&#19979;&#21435;&#12290;
    </p>
    <p>
      &#22312;source specific tree&#20013;&#25214;&#19981;&#21040;&#21305;&#37197;&#30340;&#33410;&#28857;&#26102;&#65292;&#38656;&#35201;&#22312;destination specific tree&#20013;&#22238;&#28335;&#65292;&#36825;&#26102;&#21363;&#20351;destination specific tree&#20013;&#21305;&#37197;&#30340;&#24403;&#21069;&#33410;&#28857;&#19979;&#26377;&#36335;&#30001;&#20449;&#24687;&#21363;fn-&gt;leaf&#19981;&#20026;&#31354;fn-&gt;fn_flags &#24102;&#160;&#160;RTN_RTINFO &#26631;&#35782;&#65292;&#20063;&#19981;&#33021;&#20351;&#29992;&#23427;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#36941;&#21382;source specific tree&#26102;&#19968;&#26679;&#23384;&#22312;LPM&#26368;&#38271;&#21305;&#37197;&#65292;&#21363;&#19979;&#27785;&#21040;radix&#26641;&#24213;&#37096;&#36824;&#19981;&#33021;&#21305;&#37197;&#26102;&#38656;&#35201;&#21521;&#19978;&#22238;&#28335;&#12290;&#22914;&#26524;source specific tree&#22238;&#28335;&#23436;&#20102;&#20043;&#21518;&#36824;&#27809;&#26377;&#21305;&#37197;&#21017;&#32487;&#32493;&#22312;destination specific tree&#20013;&#22238;&#28335;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458926672273" ID="ID_1792693147" MODIFIED="1458927294772">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24403;&#21069;&#33410;&#28857;&#30340;&#36335;&#30001;&#19981;&#21305;&#37197;search key&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#22238;&#28335;&#65288;fn = fn-&gt;parent&#65289;&#65292;
    </p>
    <p>
      &#21363;&#22238;&#21040;&#24403;&#21069;&#33410;&#28857;&#30340;&#29238;&#33410;&#28857;&#26816;&#26597;&#26159;&#21542;&#21305;&#37197;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22238;&#28335;&#20854;&#23454;&#23601;&#26159;LPM&#26368;&#38271;&#21305;&#37197;&#65292;&#24403;prefix / 32&#19981;&#33021;&#21305;&#37197;search key&#26102;&#65292;&#23601;&#32771;&#34385;prefix / 31&#33021;&#19981;&#33021;&#21305;&#37197;search key&#65292;
    </p>
    <p>
      &#22914;&#26524;&#36824;&#19981;&#33021;&#23601;&#32771;&#34385;prefix / 30&#33021;&#19981;&#33021;&#21305;&#37197;search key&#65292;&#20197;&#27492;&#31867;&#25512;&#65292;&#30452;&#21040;&#26368;&#21518;&#22238;&#28335;&#21040;radix&#26641;&#30340;&#26681;&#33410;&#28857;prefix / 0&#65292;
    </p>
    <p>
      &#22240;&#20026;&#23427;&#30340;&#25513;&#30721;&#38271;&#24230;&#20026;0&#65292;&#25152;&#20197;&#33021;&#21305;&#37197;&#20219;&#20309;IP&#22320;&#22336;&#12290;&#26681;&#33410;&#28857;&#20854;&#23454;&#23601;&#26159;&#40664;&#35748;&#36335;&#30001;&#65292;&#20294;&#26159;&#31995;&#32479;&#20013;&#21487;&#33021;&#20063;&#27809;&#26377;&#40664;&#35748;&#36335;&#30001;&#65292;
    </p>
    <p>
      &#27492;&#26102;&#26681;&#33410;&#28857;&#24635;&#26159;&#20250;&#22312;&#65292;&#20294;&#23427;&#19979;&#38754;&#27809;&#26377;&#36335;&#30001;&#20449;&#24687;&#65292;&#20063;&#23601;&#26159;fn-&gt;leaf&#20026;&#31354;&#24182;&#19988;fn-&gt;subtree&#20063;&#20026;&#31354;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1458940995946" FOLDED="true" ID="ID_1273252693" MODIFIED="1459291066843">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#20449;&#24687;&#26597;&#25214; info lookup
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;ip6_pol_route()
    </p>
  </body>
</html></richcontent>
<node CREATED="1458344824253" ID="ID_117892305" MODIFIED="1458547175657">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_routing_2.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458941396683" ID="ID_1607560339" MODIFIED="1459290270285">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;struct fib6_node&#23545;&#24212;&#20102;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;&#65288;&#22914;&#26524;&#26377;&#28304;&#36335;&#30001;&#21017;&#26159;&#23545;&#24212;&#20102;&#19968;&#20010;(from, to)&#30340;&#20108;&#20803;&#32452;&#65289;&#65292;&#20294;&#26159;&#21363;&#20351;&#26159;&#21040;&#21516;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;&#20063;&#26377;&#22810;&#26465;&#36335;&#30001;&#65292;&#23427;&#20204;&#21487;&#33021;&#26159;&#20248;&#20808;&#32423;&#19981;&#19968;&#26679;&#65292;&#20063;&#21487;&#33021;&#26159;&#20986;&#25509;&#21475;&#21644;&#19979;&#19968;&#36339;&#19981;&#19968;&#26679;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#20010;rt6_info&#23545;&#24212;&#20102;&#19968;&#26465;&#36335;&#30001;&#65292;&#20063;&#23545;&#24212;&#20102;&#19968;&#26465;&#28155;&#21152;&#36335;&#30001;&#30340;&#21629;&#20196;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#25152;&#26377;&#21040;&#21516;&#19968;&#30446;&#30340;&#32593;&#27573;&#30340;&#36335;&#30001;&#34987;&#20197;&#20004;&#31181;&#38142;&#34920;&#30340;&#24418;&#24335;&#32452;&#32455;&#65306;
    </p>
    <p>
      &#31532;&#19968;&#31181;&#38142;&#34920;&#21487;&#20197;&#31216;&#20043;&#20026;full list&#65292;&#23427;&#21253;&#21547;&#20102;&#36335;&#30001;&#33410;&#28857;&#19979;&#25152;&#26377;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#23427;&#29992;struct rt6_info -&gt;dst-&gt;rt6_next&#30456;&#20114;&#38142;&#25509;&#65292;&#24182;&#29992;&#20248;&#20808;&#32423;(rt6i_metric)&#25490;&#24207;&#65292;&#22914;&#26524;&#20248;&#20808;&#32423;&#30456;&#21516;&#20877;&#25353;&#21152;&#20837;&#20808;&#21518;&#39034;&#24207;&#25490;&#21015;&#65292;&#20063;&#23601;&#26159;&#35828;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#20182;&#20204;&#30340;&#20301;&#32622;&#20250;&#26159;&#32039;&#37051;&#30340;&#65292;&#35265;&#19978;&#22270;&#20013;&#24038;&#36793;&#30340;&#38142;&#25509;&#26041;&#24335;&#12290;
    </p>
    <p>
      &#31532;&#20108;&#31181;&#38142;&#34920;&#21487;&#20197;&#31216;&#20043;&#20026;sibling list&#65292;&#27599;&#19968;&#20010;&#20248;&#20808;&#32423;&#26377;&#23427;&#33258;&#24049;&#30340;sibling list&#65292;&#23427;&#29992;struct rt6_info -&gt;rt6i_siblings&#30456;&#20114;&#38142;&#25509;&#65292;&#23427;&#29992;&#20110;&#38142;&#25509;&#20855;&#26377;&#30456;&#21516;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#20063;&#23601;&#26159;&#35828;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#24444;&#27492;&#20114;&#20026;&#20804;&#24351;&#65292;&#36825;&#31181;&#38142;&#34920;&#38142;&#25509;&#36215;&#26469;&#30340;&#36335;&#30001;&#20855;&#26377;&#30456;&#21516;&#30340;&#20248;&#20808;&#32423;&#20294;&#26159;&#20986;&#25509;&#21475;&#21644;&#19979;&#19968;&#36339;&#19981;&#19968;&#26679;&#65292;&#35265;&#19978;&#22270;&#20013;&#21491;&#36793;&#30340;&#38142;&#25509;&#26041;&#24335;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26082;&#28982;&#21040;&#21516;&#19968;&#30446;&#30340;&#32593;&#27573;&#26377;&#19981;&#21516;&#30340;&#36335;&#30001;&#65292;&#37027;&#23601;&#23384;&#22312;&#22914;&#20309;&#36873;&#25321;&#30340;&#38382;&#39064;&#65292;&#39318;&#20808;&#38656;&#35201;&#26681;&#25454;&#20248;&#20808;&#32423;&#22823;&#23567;&#22312;&#31532;&#19968;&#31181;&#38142;&#34920;&#20013;&#36873;&#25321;&#19968;&#20010;&#65292;&#22914;&#26524;&#26377;&#22810;&#20010;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#21017;&#20877;&#22312;&#31532;&#20108;&#31181;&#38142;&#34920;&#20013;&#36873;&#25321;&#19968;&#20010;&#65292;&#32780;&#22312;&#20004;&#31181;&#38142;&#34920;&#20013;&#36873;&#25321;&#30340;&#31639;&#27861;&#26159;&#19981;&#19968;&#26679;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458942376595" FOLDED="true" ID="ID_125889631" MODIFIED="1459291032630" TEXT="&#x5728;&#x7b2c;&#x4e00;&#x79cd;&#x94fe;&#x8868;full list&#x91cc;&#x627e;&#x8def;&#x7531;&#x4fe1;&#x606f;                     ">
<node CREATED="1458869292525" ID="ID_129682342" MODIFIED="1459281681069">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/fib6_table_lookup_radix_4.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458944554518" ID="ID_891260094" MODIFIED="1459291013244">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rt6_select()
    </p>
    <p>
      &#22312;&#31532;&#19968;&#31181;&#38142;&#34920;full list&#37324;&#25214;&#36335;&#30001;&#20449;&#24687;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#37324;&#30340;&#31574;&#30053;&#26159;&#65306;
    </p>
    <p>
      &#20174;fn-&gt;rr_ptr&#24320;&#22987;&#36941;&#21382;&#65292;&#21482;&#36941;&#21382;&#19982;fn-&gt;rr_ptr&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#32473;&#25152;&#26377;&#30340;&#20505;&#36873;&#32773;&#25171;&#20998;&#65292;&#36873;&#20986;&#24471;&#20998;&#26368;&#39640;&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#30340;&#24471;&#20998;&#21462;&#20915;&#20110;&#20986;&#25509;&#21475;&#26159;&#21542;&#20005;&#26684;&#21305;&#37197;&#20197;&#21450;&#19979;&#19968;&#36339;&#30340;&#37051;&#23621;&#29366;&#24577;&#12290;&#24182;&#19981;&#26159;&#25152;&#26377;&#30340;&#24471;&#20998;&#37117;&#26159;&#21487;&#36873;&#30340;&#65292;&#36825;&#37324;&#35774;&#23450;&#20102;&#19968;&#20010;&#21021;&#22987;&#24471;&#20998;-1&#65292;&#27492;&#26102;&#23545;&#24212;&#30340;&#20505;&#36873;&#36335;&#30001;&#20026;NULL&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#27809;&#26377;&#36335;&#30001;&#30340;&#24471;&#20998;&#36229;&#36807;-1&#65292;&#37027;&#20040;&#26368;&#32456;&#36820;&#22238;NULL&#65292;&#23601;&#26159;&#25214;&#19981;&#21040;&#21305;&#37197;&#30340;&#36335;&#30001;&#12290;&#36825;&#26679;&#20570;&#26159;&#20026;&#20102;&#19981;&#20351;&#29992;&#22826;&#24046;&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36335;&#30001;&#30340;&#24471;&#20998;&#37324;&#38754;&#26377;&#19968;&#31181;&#29305;&#27530;&#24471;&#20998;&#31216;&#20043;&#20026;do_rr&#65292;&#20854;&#20540;&#20026;0&#65292;&#23427;&#27604;&#40664;&#35748;&#20540;-1&#35201;&#22909;&#65292;&#20294;&#36824;&#19981;&#26159;&#27491;&#20540;&#65292;&#25152;&#20197;&#23646;&#20110;&#19981;&#22826;&#22909;&#21448;&#19981;&#22826;&#24046;&#30340;&#24471;&#20998;&#12290;&#22914;&#26524;&#26368;&#32456;&#25214;&#21040;&#30340;&#36335;&#30001;&#30340;&#24471;&#20998;&#26159;do_rr&#30340;&#24471;&#20998;0&#65292;&#37027;&#20040;&#23601;&#23558;fn-&gt;rr_ptr&#25351;&#21521;&#19979;&#19968;&#20010;&#20855;&#26377;&#30456;&#21516;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#65292;&#22914;&#26524;&#27809;&#26377;&#19979;&#19968;&#20010;&#20102;&#23601;&#25351;&#21521;&#31532;&#19968;&#32423;&#38142;&#34920;&#30340;&#22836;&#37096;fn-&gt;leaf&#12290;&#36825;&#37324;&#38544;&#21547;&#30340;&#24847;&#24605;&#26159;&#65292;&#26082;&#28982;&#25214;&#21040;&#30340;&#36335;&#30001;&#21644;&#23427;&#20043;&#21518;&#30340;&#36335;&#30001;&#37117;&#19981;&#26159;&#37027;&#20040;&#22909;&#65292;&#19981;&#22914;&#22312;&#23427;&#20204;&#20043;&#38388;&#36718;&#36716;&#65292;&#23601;&#26159;&#22312;&#20247;&#22810;&#24046;&#32773;&#20013;&#36718;&#36716;round-robin&#65292;&#19981;&#35201;&#24635;&#26159;&#20351;&#29992;&#21516;&#19968;&#20010;&#24046;&#32773;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#20063;&#26159;&#19968;&#31181;&#31649;&#29702;&#30340;&#21746;&#23398;&#65292;&#22914;&#26524;&#20247;&#22810;&#30340;&#21592;&#24037;&#37117;&#19981;&#19978;&#36827;&#65292;&#37027;&#20040;&#23613;&#37327;&#22312;&#23427;&#20204;&#20013;&#38388;&#38543;&#26426;&#36873;&#25321;&#32780;&#19981;&#35201;&#24635;&#26159;&#36873;&#25321;&#21516;&#19968;&#20010;&#65292;&#36825;&#26679;&#21487;&#20197;&#36991;&#20813;&#19968;&#31181;&#38169;&#35273;&#65292;&#23601;&#26159;&#19968;&#20010;&#24046;&#30340;&#21592;&#24037;&#20063;&#21487;&#20197;&#24471;&#21040;&#28608;&#21169;&#24635;&#26159;&#34987;&#36873;&#25321;&#12290;&#26377;&#26368;&#22909;&#30340;&#26102;&#20505;&#36873;&#25321;&#26368;&#22909;&#65292;&#27809;&#26377;&#26368;&#22909;&#30340;&#26102;&#20505;&#20063;&#19981;&#35201;&#24635;&#26159;&#36873;&#25321;&#21516;&#19968;&#20010;&#26368;&#24046;&#30340;&#65292;&#21542;&#21017;&#20250;&#36896;&#25104;&#34987;&#36843;&#30340;&#28608;&#21169;&#65292;&#32473;&#24046;&#32773;&#36896;&#25104;&#38169;&#35273;&#65306;&#19981;&#19978;&#36827;&#20063;&#21487;&#20197;&#24471;&#21040;&#22870;&#21169;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458945635294" ID="ID_270981411" MODIFIED="1458945668997">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_select_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1458950546264" ID="ID_363175511" MODIFIED="1458950944469">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36941;&#21382;&#19982;fn-&gt;rr_ptr&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#32473;&#25152;&#26377;&#30340;&#20505;&#36873;&#32773;&#25171;&#20998;&#65292;&#36873;&#20986;&#24471;&#20998;&#26368;&#39640;&#30340;&#36335;&#30001;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#21021;&#22987;&#30340;&#24471;&#20998;&#20026;-1&#65292;&#23545;&#24212;&#30340;match&#20026;NULL&#65292;&#25152;&#20197;&#20302;&#20110;-1&#30340;&#24471;&#20998;&#30340;&#36335;&#30001;&#26159;&#19981;&#20250;&#34987;&#36873;&#20013;&#30340;&#12290;&#36335;&#30001;&#30340;&#24471;&#20998;&#21487;&#27491;&#21487;&#36127;&#65292;&#21487;&#22823;&#20110;-1&#20063;&#21487;&#23567;&#20110;-1&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36335;&#30001;&#30340;&#24471;&#20998;&#37324;&#38754;&#26377;&#19968;&#31181;&#29305;&#27530;&#24471;&#20998;&#31216;&#20043;&#20026;do_rr&#65292;&#20854;&#20540;&#20026;0&#65292;&#23427;&#27604;&#40664;&#35748;&#20540;-1&#35201;&#22909;&#65292;&#20294;&#36824;&#19981;&#26159;&#27491;&#20540;&#65292;&#25152;&#20197;&#23646;&#20110;&#19981;&#22826;&#22909;&#21448;&#19981;&#22826;&#24046;&#30340;&#24471;&#20998;&#12290;&#22914;&#26524;&#26368;&#32456;&#25214;&#21040;&#30340;&#36335;&#30001;&#30340;&#24471;&#20998;&#26159;do_rr&#30340;&#24471;&#20998;0&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#36718;&#36716;fn-&gt;rr_ptr&#25351;&#21521;&#19979;&#19968;&#20010;&#30456;&#21516;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#65292;&#36825;&#26679;&#20570;&#26159;&#20026;&#20102;&#36991;&#20813;&#28608;&#21169;&#27604;&#36739;&#24046;&#30340;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458946051384" ID="ID_968427033" MODIFIED="1458950576665">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_select_4.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458951471958" ID="ID_263035025" MODIFIED="1458951499237">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rt6_score_route()
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#32473;&#36335;&#30001;&#25171;&#20998;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458951678899" ID="ID_1519140752" MODIFIED="1458951702427" TEXT="&#x9996;&#x5148;&#x6839;&#x636e;&#x51fa;&#x63a5;&#x53e3;&#x662f;&#x5426;&#x5339;&#x914d;&#x7ed9;&#x8def;&#x7531;&#x6253;&#x5206;"/>
<node CREATED="1458951706633" ID="ID_1978418578" MODIFIED="1458951732915" TEXT="&#x7136;&#x540e;&#x6839;&#x636e;&#x4e0b;&#x4e00;&#x8df3;&#x7684;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x7ed9;&#x8def;&#x7531;&#x6253;&#x5206;"/>
</node>
</node>
</node>
<node CREATED="1458945721362" ID="ID_1627831129" MODIFIED="1458950049501">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;round-robin&#36718;&#36716;&#21040;&#19979;&#19968;&#20010;&#36335;&#30001;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#26368;&#32456;&#25214;&#21040;&#30340;&#36335;&#30001;&#30340;&#24471;&#20998;&#26159;do_rr&#30340;&#24471;&#20998;0&#65292;&#37027;&#20040;&#23601;&#23558;fn-&gt;rr_ptr&#25351;&#21521;&#19979;&#19968;&#20010;&#20855;&#26377;&#30456;&#21516;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#65292;&#22914;&#26524;&#27809;&#26377;&#19979;&#19968;&#20010;&#20102;&#23601;&#25351;&#21521;&#31532;&#19968;&#32423;&#38142;&#34920;&#30340;&#22836;&#37096;fn-&gt;leaf&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458946051384" ID="ID_1550628444" MODIFIED="1458946076807">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_select_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1458942516684" FOLDED="true" ID="ID_1363032793" MODIFIED="1459291061418">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      multipath selection&#65306;&#22522;&#20110;hash&#22312;&#31532;&#20108;&#31181;&#38142;&#34920;sibling list&#37324;&#36873;&#20986;&#36335;&#30001;&#20449;&#24687;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458869292525" ID="ID_1209072581" MODIFIED="1459287821392">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/fib6_table_lookup_radix_5.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458952019968" ID="ID_890448182" MODIFIED="1459287876765">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20108;&#31181;&#38142;&#34920;&#29992;rt-&gt;rt6i_nsiblings&#38142;&#25509;&#65292;&#23427;&#20195;&#34920;&#20102;&#20248;&#20808;&#32423;&#30456;&#21516;&#20294;&#20986;&#25509;&#21475;&#21644;&#19979;&#19968;&#36339;&#19981;&#21516;&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#37324;&#30340;&#36873;&#25321;&#31574;&#30053;&#26159;&#65292;&#29992;&#25628;&#32034;&#20851;&#38190;&#23383;struct flowi6 *fl6&#20013;&#30340;&#28304;IP&#65292;&#30446;&#30340;IP&#65292;&#28304;&#31471;&#21475;&#65292;&#30446;&#30340;&#31471;&#21475;&#29983;&#25104;&#19968;&#20010;hash&#20540;&#65292;&#29992;&#27492;hash&#20540;&#22312;&#31532;&#20108;&#31181;&#38142;&#34920;&#37324;&#36873;&#25321;&#19968;&#20010;&#36335;&#30001;&#12290;&#23545;&#36873;&#20013;&#30340;&#36335;&#30001;&#36824;&#35201;&#36827;&#34892;&#25171;&#20998;&#35780;&#20272;&#65292;&#22914;&#26524;&#24471;&#20998;&#20026;&#27491;&#21017;&#36873;&#20013;&#23427;&#65292;&#21542;&#21017;&#23601;&#36873;&#25321;&#31532;&#20108;&#31181;&#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1458942591538" FOLDED="true" ID="ID_1252712286" MODIFIED="1459287574208">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      route clone&#65306;&#26681;&#25454;network route&#20811;&#38534;&#20986;host route&#12290;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458869292525" ID="ID_1213460421" MODIFIED="1458942650692">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/fib6_table_lookup_radix_6.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458952719863" FOLDED="true" ID="ID_507464319" MODIFIED="1459034283453" TEXT="&#x4ec0;&#x4e48;&#x662f;&#x8def;&#x7531;&#x514b;&#x9686;&#xff1f;">
<node CREATED="1458952773974" FOLDED="true" ID="ID_1412721124" MODIFIED="1459034281383">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#21487;&#20197;&#20998;&#20026;2&#38047;&#65306;&#32593;&#32476;&#36335;&#30001;(prefix / prefix_length)&#30340;&#25513;&#30721;&#38271;&#24230;&#23567;&#20110;128&#65292;&#20027;&#26426;&#36335;&#30001;(prefix / 128)&#30340;&#25513;&#30721;&#31561;&#20110;128.
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#25214;&#21040;&#30340;&#36335;&#30001;&#26159;&#19968;&#26465;&#32593;&#32476;&#36335;&#30001;network route&#26102;&#65292;&#38656;&#35201;&#26681;&#25454;&#23427;&#20811;&#38534;&#20986;&#19968;&#20010;&#20027;&#26426;&#36335;&#30001;host route&#26469;&#65292;&#20811;&#38534;&#20986;&#26469;&#30340;&#20027;&#26426;&#36335;&#30001;&#20351;&#29992;&#25628;&#32034;&#20851;&#38190;&#23383;struct flowi6 *fl6&#20013;&#30340;&#28304;IP&#21644;&#30446;&#30340;IP&#26500;&#24314;&#33258;&#24049;&#30340;&#36335;&#30001;&#20449;&#24687;(rt-&gt;rt6i_src.addr&#65292;rt-&gt;rt6i_dst.addr)&#65292;&#36825;&#20004;&#20010;key&#30340;&#25513;&#30721;&#37117;&#26159;128&#12290;&#38500;&#20102;(rt-&gt;rt6i_src.addr&#65292;rt-&gt;rt6i_dst.addr)&#20043;&#22806;&#65292;&#20811;&#38534;&#20986;&#26469;&#30340;&#20027;&#26426;&#36335;&#30001;&#19982;&#21407;&#26377;&#30340;&#32593;&#32476;&#36335;&#30001;&#37117;&#26159;&#19968;&#26679;&#30340;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20811;&#38534;&#20986;&#26469;&#30340;&#36335;&#30001;&#20854;rt-&gt;rt6i_flags &#37117;&#24102;&#26377;&#20004;&#20010;&#20010;&#26631;&#35782;&#160; RTF_CACHE&#21644;DST_HOST&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1458953383393" ID="ID_573740556" MODIFIED="1458953402613">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_select_5.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1458953273384" FOLDED="true" ID="ID_592437421" MODIFIED="1458954304734" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x9700;&#x8981;&#x514b;&#x9686;&#x8def;&#x7531;&#xff1f;">
<node CREATED="1458953562895" ID="ID_1442689896" MODIFIED="1458954188831">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38656;&#35201;&#20811;&#38534;&#36335;&#30001;&#30340;&#21407;&#22240;&#26377;2&#20010;&#65306;
    </p>
    <p>
      
    </p>
    <p>
      1&#65292;&#22914;&#26524;&#32593;&#32476;&#36335;&#30001;&#27809;&#26377;&#25351;&#23450;&#19979;&#19968;&#36339;&#32780;&#23427;&#21448;&#19981;&#26159;&#21040;local host&#30340;&#36335;&#30001;&#65292;&#37027;&#20040;&#38656;&#35201;&#20811;&#38534;&#23427;&#12290;&#22240;&#20026;&#27809;&#26377;&#25351;&#23450;&#19979;&#19968;&#36339;&#65292;&#25152;&#20197;&#20043;&#21518;&#32943;&#23450;&#35201;&#25351;&#23450;&#19968;&#20010;&#19979;&#19968;&#36339;&#65292;&#36825;&#23601;&#28041;&#21450;&#21040;&#35201;&#25913;&#20889;&#32593;&#32476;&#36335;&#30001;&#30340;&#20869;&#23481;&#65292;&#32780;&#32593;&#32476;&#36335;&#30001;&#26159;&#20849;&#20139;&#30340;&#65292;&#19981;&#33021;&#34987;&#25913;&#20889;&#65292;&#25152;&#20197;&#21482;&#33021;&#20811;&#38534;&#19968;&#20221;&#20986;&#26469;&#20197;&#20379;&#22635;&#20805;&#19979;&#19968;&#36339;&#20449;&#24687;&#12290;&#20063;&#23601;&#26159;&#28041;&#21450;&#21040;&#35201;&#25913;&#20889;&#36335;&#30001;&#20869;&#23481;&#30340;&#24773;&#20917;&#19979;&#65292;&#38656;&#35201;&#20811;&#38534;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      2&#65292;&#21040;&#21516;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;&#30340;&#19981;&#21516;&#20027;&#26426;&#65292;&#20854;path MTU&#21487;&#33021;&#26159;&#19981;&#19968;&#26679;&#30340;&#65292;&#32780;MTU&#20449;&#24687;&#26159;&#38656;&#35201;&#20889;&#20837;&#36335;&#30001;&#20869;&#23481;&#30340;&#65292;&#25152;&#20197;&#20063;&#28041;&#21450;&#35201;&#25913;&#20889;&#32593;&#32476;&#36335;&#30001;&#30340;&#20869;&#23481;&#65292;&#32780;&#32593;&#32476;&#36335;&#30001;&#26159;&#20849;&#20139;&#30340;&#65292;&#19981;&#33021;&#34987;&#25913;&#20889;&#65292;&#25152;&#20197;&#21482;&#33021;&#20811;&#38534;&#19968;&#20221;&#20986;&#26469;&#20197;&#20379;&#22635;&#20805;PMTU&#20449;&#24687;&#12290;&#20063;&#23601;&#26159;&#35828;&#28041;&#21450;&#21040;&#30446;&#30340;&#32593;&#27573;&#30340;&#36335;&#30001;&#20449;&#24687;&#19982;&#30446;&#30340;&#32593;&#27573;&#20869;&#20027;&#26426;&#36335;&#30001;&#20449;&#24687;&#19981;&#21305;&#37197;&#26102;&#65292;&#38656;&#35201;&#20811;&#38534;&#36335;&#30001;&#12290;&#36825;&#19982;ipv4&#20013;nh_exception&#30340;&#27010;&#24565;&#31867;&#20284;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458952734872" FOLDED="true" ID="ID_1735536680" MODIFIED="1458954306695" TEXT="&#x4ec0;&#x4e48;&#x6837;&#x7684;&#x8def;&#x7531;&#x9700;&#x8981;&#x514b;&#x9686;&#xff1f;">
<node CREATED="1458954133635" ID="ID_1684164346" MODIFIED="1458954252833">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27809;&#26377;&#25351;&#23450;&#19979;&#19968;&#36339;&#32780;&#21448;&#19981;&#26159;&#21040;local host&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21028;&#26029;&#26465;&#20214;&#65306;(!(rt-&gt;rt6i_flags &amp; (RTF_NONEXTHOP | RTF_GATEWAY)))
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458954262825" ID="ID_645895897" MODIFIED="1458954302067">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25152;&#26377;&#32593;&#32476;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21028;&#26029;&#26465;&#20214;&#65306;(!(rt-&gt;dst.flags &amp; DST_HOST))
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458952749381" FOLDED="true" ID="ID_1234424371" MODIFIED="1459034285236" TEXT="&#x600e;&#x6837;&#x8fdb;&#x884c;&#x8def;&#x7531;&#x514b;&#x9686;&#xff1f;">
<node CREATED="1458954345420" ID="ID_893361418" MODIFIED="1458954743281">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1&#65292;&#22797;&#21046;&#32593;&#32476;&#36335;&#30001;&#30340;&#25152;&#26377;&#20869;&#23481;
    </p>
    <p>
      
    </p>
    <p>
      2&#65292;&#23558;rt-&gt;rt6i_dst&#25913;&#20026;&#25628;&#32034;&#20851;&#38190;&#23383;struct flowi6 *fl6&#20013;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#65292;&#25513;&#30721;&#38271;&#24230;&#25913;&#20026;128&#12290;
    </p>
    <p>
      
    </p>
    <p>
      3&#65292;&#23558;rt-&gt;rt6i_src&#25913;&#20026;&#25628;&#32034;&#20851;&#38190;&#23383;struct flowi6 *fl6&#20013;&#30340;&#28304;IP&#22320;&#22336;&#65292;&#25513;&#30721;&#38271;&#24230;&#25913;&#20026;128&#12290;
    </p>
    <p>
      
    </p>
    <p>
      4&#65292;&#22312;rt-&gt;dst.flags&#19978;&#32622;&#19978;DST_HOST&#26631;&#35782;&#21644;RTF_CACHE&#26631;&#35782;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      5&#65292;&#23558;&#20811;&#38534;&#20986;&#26469;&#30340;&#20027;&#26426;&#36335;&#30001;&#37325;&#26032;&#25554;&#22238;&#21040;&#36335;&#30001;&#34920;&#65306;ip6_ins_rt()&#12290;&#36825;&#26679;&#19979;&#27425;&#23601;&#19981;&#29992;&#20877;&#20811;&#38534;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456866527655" FOLDED="true" ID="ID_698595684" MODIFIED="1459303706302">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26500;&#24314;&#36335;&#30001;&#32531;&#23384;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459050147184" ID="ID_865396662" LINK="#ID_1960501552" MODIFIED="1459050173178" TEXT="struct rt6_info"/>
<node CREATED="1459191281686" ID="ID_1590516333" MODIFIED="1459191327336">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_create_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1459191562019" ID="ID_1477592842" MODIFIED="1459191802340">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26500;&#24314;&#36335;&#30001;&#32531;&#23384;&#23454;&#38469;&#19978;&#21253;&#21547;&#20102;2&#20010;&#27493;&#39588;&#65306;
    </p>
    <p>
      1&#65292;&#21019;&#24314;struct rt6_info&#32467;&#26500;&#65292;&#36825;&#19968;&#27493;&#28041;&#21450;&#21040;&#21021;&#22987;&#21270;rt6_info&#21644;&#20854;&#20013;&#30340;dst&#32467;&#26500;&#12290;
    </p>
    <p>
      2&#65292;&#23558;&#36335;&#30001;&#32531;&#23384;&#25554;&#20837;&#21040;&#36335;&#30001;&#34920;&#20013;&#65292;&#36825;&#19968;&#27493;&#28041;&#21450;&#21040;&#21019;&#24314;&#19968;&#20010;struct fib6_node&#24182;&#23558;&#20854;&#25346;&#21040;&#36335;&#30001;&#34920;&#20013;&#36866;&#24403;&#20301;&#32622;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1459191833874" FOLDED="true" ID="ID_824721865" MODIFIED="1459303700639" TEXT="&#x521b;&#x5efa;struct rt6_info&#x7ed3;&#x6784;">
<node CREATED="1459191474515" FOLDED="true" ID="ID_883269845" MODIFIED="1459303698215">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      inet6_addr_add(dev, addr)
    </p>
    <p>
      &#22312;&#25509;&#21475;&#19978;&#37197;&#32622;IP&#22320;&#22336;&#26102;&#28155;&#21152;&#19968;&#26465;&#21040;&#25152;&#37197;&#32593;&#27573;&#30340;link local&#30340;&#36335;&#30001;
    </p>
    <p>
      
    </p>
    <p>
      &#22312;&#25509;&#21475;&#19978;&#28155;&#21152;&#19968;&#20010;IP&#22320;&#22336;&#20250;&#23548;&#33268;2&#26465;&#36335;&#30001;&#30340;&#28155;&#21152;&#65306;
    </p>
    <p>
      1&#65292;&#19968;&#20010;&#26159;prefix route&#65292;&#20063;&#23601;&#26159;&#25152;&#37197;&#32622;&#22320;&#22336;&#25152;&#22312;&#30340;&#32593;&#27573;&#65292;addr / prefix length&#65292;&#36825;&#26465;&#36335;&#30001;&#34987;&#28155;&#21152;&#21040;main&#34920;&#20013;&#12290;&#36825;&#26465;&#36335;&#30001;&#30340;&#30446;&#30340;&#26159;&#20026;&#25509;&#21475;&#25152;&#22312;&#32593;&#27573;&#30340;&#20854;&#23427;&#20027;&#26426;&#25552;&#20379;&#36335;&#30001;&#12290;
    </p>
    <p>
      2&#65292;&#31532;&#20108;&#20010;&#26159;&#21040;&#25152;&#37197;&#32622;&#22320;&#22336;&#26412;&#36523;&#30340;&#36335;&#30001;&#12290;&#23427;&#22312;&#28155;&#21152;&#22320;&#22336;&#26102;&#34987;&#21021;&#22987;&#21270;&#65292;&#25918;&#22312;ifa-&gt;rt&#20013;&#12290;&#23427;&#26159;&#19968;&#26465;&#20027;&#26426;&#36335;&#30001;&#65292;&#20986;&#25509;&#21475;&#26159;&#29615;&#22238;&#35774;&#22791;&#12290;&#36825;&#26465;&#36335;&#30001;&#34987;&#28155;&#21152;&#21040;local&#34920;&#20013;&#12290;&#27880;&#24847;&#36825;&#26465;&#36335;&#30001;&#30495;&#27491;&#34987;&#28155;&#21152;&#21040;&#36335;&#30001;&#34920;&#20013;&#26159;&#22312;inet6addr_notifier_call_chain()&#36890;&#30693;&#22320;&#22336;&#25913;&#21464;&#26102;&#65292;&#22312;&#21709;&#24212;&#20989;&#25968;__ipv6_ifa_notify()&#20013;&#34987;&#28155;&#21152;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459299044564" ID="ID_576831519" MODIFIED="1459300770710">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_19.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459300780263" ID="ID_1434241368" MODIFIED="1459300789190" TEXT="ipv6_add_addr()">
<node CREATED="1459299044564" ID="ID_293087962" MODIFIED="1459302194820">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_20.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459300780263" ID="ID_609246263" MODIFIED="1459303690793">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Allocate a dst for local (unicast / anycast) address
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;addrconf_dst_alloc(dev, addr)
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#26159;&#19968;&#26465;&#21040;&#25152;&#37197;&#32622;&#22320;&#22336;&#26412;&#36523;&#30340;&#36335;&#30001;&#12290;&#23427;&#22312;&#28155;&#21152;&#22320;&#22336;&#26102;&#34987;&#21021;&#22987;&#21270;&#65292;&#25918;&#22312;ifa-&gt;rt&#20013;&#12290;&#23427;&#26159;&#19968;&#26465;&#20027;&#26426;&#36335;&#30001;&#65292;&#20986;&#25509;&#21475;&#26159;&#29615;&#22238;&#35774;&#22791;&#12290;&#36825;&#26465;&#36335;&#30001;&#34987;&#28155;&#21152;&#21040;local&#34920;&#20013;&#12290;&#27880;&#24847;&#36825;&#26465;&#36335;&#30001;&#30495;&#27491;&#34987;&#28155;&#21152;&#21040;&#36335;&#30001;&#34920;&#20013;&#26159;&#22312;inet6addr_notifier_call_chain()&#36890;&#30693;&#22320;&#22336;&#25913;&#21464;&#26102;&#65292;&#22312;&#21709;&#24212;&#20989;&#25968;__ipv6_ifa_notify()&#20013;&#34987;&#28155;&#21152;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459299044564" ID="ID_200153687" MODIFIED="1459302851370">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_21.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459302889997" ID="ID_215835298" MODIFIED="1459302949577" TEXT="&#x6ce8;&#x610f;&#x6b64;&#x65f6;&#x51fa;&#x63a5;&#x53e3;&#x662f;loopback&#x8bbe;&#x5907;&#xff0c;&#x4f46;&#x662f;&#x4e09;&#x5c42;&#x51fa;&#x63a5;&#x53e3;&#x5374;&#x662f;IP&#x5730;&#x5740;&#x6240;&#x914d;&#x7f6e;&#x7684;&#x63a5;&#x53e3;&#xff0c;&#x4e8c;&#x8005;&#x4e0d;&#x4e00;&#x81f4;"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1459191409127" FOLDED="true" ID="ID_197039095" MODIFIED="1459300772555">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip6_route_add(cfg)
    </p>
    <p>
      &#28155;&#21152;&#29992;&#25143;&#25110;&#32773;ndisc&#21327;&#35758;&#25152;&#37197;&#32622;&#30340;&#36335;&#30001;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459299044564" ID="ID_72042967" MODIFIED="1459299072623">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_create_18.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1459191845871" FOLDED="true" ID="ID_1327651468" MODIFIED="1459292076831" TEXT="&#x5c06;&#x8def;&#x7531;&#x7f13;&#x5b58;&#x63d2;&#x5165;&#x5230;&#x8def;&#x7531;&#x8868;&#x4e2d;">
<node CREATED="1459191357536" ID="ID_189508914" MODIFIED="1459208418589">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib6_add(root_node, rt, nl_info)
    </p>
    <p>
      
    </p>
    <p>
      &#25554;&#20837;&#25805;&#20316;&#39318;&#20808;&#35201;&#22312;destination specific tree&#20013;&#25214;&#21040;&#19968;&#20010;&#25554;&#20837;&#28857;&#65292;&#22914;&#26524;&#36335;&#30001;&#21253;&#21547;&#28304;&#36335;&#30001;&#20449;&#24687;&#65292;&#37027;&#20040;&#36824;&#35201;&#22312;source specific tree&#20013;&#25214;&#21040;&#19968;&#20010;&#25554;&#20837;&#28857;&#65292;&#22914;&#26524;&#25214;&#19981;&#21040;&#37027;&#23601;&#21019;&#24314;&#19968;&#20010;&#25554;&#20837;&#28857;&#12290;&#26597;&#25214;&#24182;&#21019;&#24314;&#25554;&#20837;&#28857;&#30340;&#25805;&#20316;&#26159;&#36890;&#36807;&#20989;&#25968;fib6_add_1()&#36827;&#34892;&#30340;&#12290;&#23427;&#26082;&#21487;&#20197;&#22312;destination specific tree&#19978;&#36827;&#34892;&#20063;&#21487;&#20197;&#22312;source specific tree&#19978;&#36827;&#34892;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#25214;&#21040;&#25554;&#20837;&#28857;&#21518;&#23601;&#35201;&#25226;&#36335;&#30001;&#20449;&#24687;&#25918;&#20837;&#36335;&#30001;&#33410;&#28857;&#12290;&#19968;&#20010;&#36335;&#30001;&#33410;&#28857;&#19979;&#30340;&#22810;&#20010;&#36335;&#30001;&#20449;&#24687;&#20197;2&#32423;&#38142;&#34920;&#30340;&#24418;&#24335;&#32452;&#32455;&#65292;&#20998;&#21035;&#29992;&#20248;&#20808;&#32423;&#21644;hash&#20540;&#25490;&#24207;&#12290;&#25152;&#20197;&#25226;&#36335;&#30001;&#20449;&#24687;&#25918;&#20837;&#36335;&#30001;&#33410;&#28857;&#26102;&#38656;&#35201;&#22312;2&#32423;&#38142;&#34920;&#20013;&#25214;&#21040;&#19968;&#20010;&#21512;&#36866;&#30340;&#20301;&#32622;&#25554;&#20837;&#12290;&#36825;&#26159;&#36890;&#36807;fib6_add_rt2node()&#36827;&#34892;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459207154288" ID="ID_142953608" MODIFIED="1459207170263">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_create_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1459207302250" FOLDED="true" ID="ID_1705883633" MODIFIED="1459292062096" TEXT="fib6_add_1(root, addr, plen)">
<node CREATED="1459210439584" ID="ID_1538191956" MODIFIED="1459210455653">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_create_4.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1459210437343" FOLDED="true" ID="ID_1145540876" MODIFIED="1459214336806">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24453;&#25554;&#20837;&#30340;D&#28857;&#30340;prefix length&#23567;&#20110;C&#28857;&#30340;prefix length&#65292;
    </p>
    <p>
      &#37027;&#20040;&#23601;&#38656;&#35201;&#22312;C&#28857;&#19978;&#26041;&#25554;&#20837;&#20102;&#12290;&#27492;&#26102;&#38656;&#35201;&#32771;&#34385;&#30340;&#26159;&#26032;&#25554;&#20837;&#30340;D&#28857;&#26159;&#20316;&#20026;C&#28857;&#30340;&#29238;&#33410;&#28857;&#36824;&#26159;&#20804;&#24351;&#33410;&#28857;&#12290;
    </p>
    <p>
      &#36825;&#21462;&#20915;&#20110;D&#19982;C&#30340;&#31532;&#19968;&#20010;&#19981;&#21516;&#30340;&#27604;&#29305;&#20301;diff_bit&#26159;&#22823;&#20110;D_len&#36824;&#26159;&#23567;&#20110;D_len&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#31532;&#19968;&#20010;&#19981;&#21516;&#30340;&#27604;&#29305;&#20301;&#23567;&#20110;D_len&#65292;&#20063;&#23601;&#26159;&#35828;D / D_len != C / D_len&#65292;&#36825;&#35828;&#26126;D&#19981;&#33021;&#20570;C&#30340;&#29238;&#33410;&#28857;&#32780;&#21482;&#33021;&#20570;C&#30340;&#20804;&#24351;&#33410;&#28857;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#31532;&#19968;&#20010;&#19981;&#21516;&#30340;&#27604;&#29305;&#20301;&#22823;&#20110;&#31561;&#20110;D_len&#65292;&#20063;&#23601;&#26159;&#35828;D / D_len == C / D_len&#65292;&#36825;&#35828;&#26126;D&#21487;&#20197;&#20316;&#20026;C&#30340;&#29238;&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" ID="ID_658724253" MODIFIED="1459214112241">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_8.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1459210439584" ID="ID_1169262567" MODIFIED="1459213557836">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_12.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" FOLDED="true" ID="ID_668656539" MODIFIED="1459214238863">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_9.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" ID="ID_1327847195" MODIFIED="1459214223826">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_14.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1459210439584" ID="ID_1823969290" MODIFIED="1459213520309">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_13.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" FOLDED="true" ID="ID_298595353" MODIFIED="1459214330900">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_5.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" ID="ID_370115743" MODIFIED="1459214308464">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_15.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1459210437343" FOLDED="true" ID="ID_470151555" MODIFIED="1459214031818">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24453;&#25554;&#20837;&#30340;D&#28857;&#30340;prefix length&#27491;&#22909;&#31561;&#20110;C&#28857;&#30340;prefix length&#65292;
    </p>
    <p>
      &#35828;&#26126;C&#28857;&#23601;&#26159;&#35201;&#25554;&#20837;&#30340;&#20301;&#32622;&#65292;&#27492;&#26102;&#19981;&#29992;&#21019;&#24314;&#26032;&#30340;&#36335;&#30001;&#33410;&#28857;&#65292;&#32780;&#21482;&#38656;&#35201;&#25226;&#36335;&#30001;&#20449;&#24687;&#25918;&#21040;&#36335;&#30001;&#33410;&#28857;C&#20013;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" FOLDED="true" ID="ID_312284500" MODIFIED="1459214031059">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_6.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" ID="ID_965921032" MODIFIED="1459212129699">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_10.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1459210437343" FOLDED="true" ID="ID_256478923" MODIFIED="1459214024695">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#36941;&#21382;&#21040;radix&#26641;&#30340;&#26368;&#24213;&#37096;C&#28857;&#36824;&#27809;&#26377;&#25214;&#21040;&#19968;&#20010;&#21512;&#36866;&#30340;&#25554;&#20837;&#28857;&#65292;&#20063;&#23601;&#26159;&#35828;&#27492;&#26102;D&#28857;&#30340;prefix length&#36824;&#22823;&#20110;&#26368;&#24213;&#37096;C&#28857;&#30340;prefix length&#65292;&#37027;&#23601;&#38656;&#35201;&#22312;C&#28857;&#30340;&#19979;&#38754;&#26032;&#24314;&#19968;&#20010;&#36335;&#30001;&#33410;&#28857;D&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" ID="ID_1479154264" MODIFIED="1459214021003">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_7.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459210439584" ID="ID_758091631" MODIFIED="1459212464288">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_11.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1459208500473" ID="ID_1094217887" MODIFIED="1459208635503">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;source specific tree&#36824;&#19981;&#23384;&#22312;&#65292;&#37027;&#23601;&#38656;&#35201;&#20026;&#20854;&#21019;&#24314;&#19968;&#20010;&#26681;&#33410;&#28857;&#12290;
    </p>
    <p>
      &#26681;&#33410;&#28857;&#21482;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#31354;&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1459208645259" FOLDED="true" ID="ID_1201295204" MODIFIED="1459287971460">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;destination specific tree&#20013;&#30340;&#25554;&#20837;&#28857;&#19979;&#36824;&#27809;&#26377;&#36335;&#30001;&#20449;&#24687; (fn-&gt;leaf == null)&#65292;
    </p>
    <p>
      &#37027;&#21516;&#26102;&#25226;&#24453;&#25554;&#20837;&#30340;&#36335;&#30001;&#20449;&#24687;&#20063;&#25918;&#22312;destination specific tree&#30340;&#25554;&#20837;&#28857;&#19979;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459209238285" ID="ID_1171461867" MODIFIED="1459209253327">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv6_rt_create_3.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1459207359174" FOLDED="true" ID="ID_1584352210" MODIFIED="1459292059495" TEXT="fib6_add_rt2node(fn, rt)">
<node CREATED="1458344824253" ID="ID_424895409" MODIFIED="1459289813713">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_17.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1458583304203" ID="ID_466238760" MODIFIED="1459290118887">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#20449;&#24687;rt6_info&#21516;&#26102;&#29992;2&#31181;&#38142;&#34920;&#38142;&#25509;&#65306;
    </p>
    <p>
      &#31532;&#19968;&#31181;&#38142;&#34920;&#21487;&#20197;&#31216;&#20043;&#20026;full list&#65292;&#23427;&#21253;&#21547;&#20102;&#36335;&#30001;&#33410;&#28857;&#19979;&#25152;&#26377;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#23427;&#29992;struct rt6_info -&gt;dst-&gt;rt6_next&#30456;&#20114;&#38142;&#25509;&#65292;&#24182;&#29992;&#20248;&#20808;&#32423;(rt6i_metric)&#25490;&#24207;&#65292;&#22914;&#26524;&#20248;&#20808;&#32423;&#30456;&#21516;&#20877;&#25353;&#21152;&#20837;&#20808;&#21518;&#39034;&#24207;&#25490;&#21015;&#65292;&#20063;&#23601;&#26159;&#35828;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#20182;&#20204;&#30340;&#20301;&#32622;&#20250;&#26159;&#32039;&#37051;&#30340;&#12290;
    </p>
    <p>
      &#31532;&#20108;&#31181;&#38142;&#34920;&#21487;&#20197;&#31216;&#20043;&#20026;sibling list&#65292;&#27599;&#19968;&#20010;&#20248;&#20808;&#32423;&#26377;&#23427;&#33258;&#24049;&#30340;sibling list&#65292;&#23427;&#29992;struct rt6_info -&gt;rt6i_siblings&#30456;&#20114;&#38142;&#25509;&#65292;&#23427;&#29992;&#20110;&#38142;&#25509;&#20855;&#26377;&#30456;&#21516;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#20063;&#23601;&#26159;&#35828;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#24444;&#27492;&#20114;&#20026;&#20804;&#24351;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458344824253" ID="ID_411749205" MODIFIED="1459289867187">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv6_rt_create_16.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1459289896699" ID="ID_179959997" MODIFIED="1459291349107">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#36941;&#21382;full list&#26102;&#65292;&#22914;&#26524;&#36935;&#21040;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#21017;&#36882;&#22686;&#26032;&#36335;&#30001;&#20449;&#24687;&#30340;rt-&gt;rt6i_nsiblings&#12290;
    </p>
    <p>
      &#22240;&#20026;&#36825;&#20123;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#26368;&#21518;&#37117;&#20250;&#25104;&#20026;&#26032;&#36335;&#30001;&#20449;&#24687;&#30340;&#20804;&#24351;&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1459291524530" ID="ID_1320677769" MODIFIED="1459291570418" TEXT="&#x540c;&#x7b49;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x7684;&#x672b;&#x5c3e;&#x5c31;&#x662f;&#x65b0;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x7684;&#x63d2;&#x5165;&#x4f4d;&#x7f6e;"/>
<node CREATED="1459289896699" ID="ID_1469812078" MODIFIED="1459292035762">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#22312;&#36941;&#21382;full list&#26102;&#65292;&#36935;&#21040;&#36807;&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#37027;&#20040;&#27492;&#26102;&#26032;&#36335;&#30001;&#20449;&#24687;&#30340;rt-&gt;rt6i_nsiblings&#24517;&#19981;&#20026;0&#12290;
    </p>
    <p>
      &#27492;&#26102;&#23601;&#38656;&#35201;&#25226;&#26032;&#36335;&#30001;&#20449;&#24687;&#19982;&#24050;&#23384;&#22312;&#30340;&#31561;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#20449;&#24687;&#29992;&#20804;&#24351;&#38142;&#34920;sibling list&#38142;&#25509;&#36215;&#26469;&#12290;&#20063;&#23601;&#26159;&#24314;&#31435;&#22270;&#20013;&#21491;&#20391;&#32418;&#33394;&#26631;&#35760;&#30340;&#38142;&#34920;&#12290;&#24314;&#31435;&#20804;&#24351;&#38142;&#34920;sibling list&#21518;&#65292;&#20174;&#20219;&#20309;&#19968;&#20010;&#36335;&#30001;&#20449;&#24687;&#37117;&#21487;&#20197;&#36941;&#21382;&#21040;&#20854;&#23427;&#31561;&#20248;&#20808;&#32423;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#20063;&#23601;&#26159;&#23427;&#30340;&#20804;&#24351;&#20204;&#12290;&#38500;&#20102;&#24314;&#31435;&#38142;&#34920;&#65292;&#20063;&#35201;&#26356;&#26032;&#20804;&#24351;&#36335;&#30001;&#20449;&#24687;&#20013;&#30340;&#20851;&#20110;&#20804;&#24351;&#25968;&#37327;&#30340;&#35745;&#25968;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456859061181" FOLDED="true" ID="ID_134500241" MODIFIED="1459303748868" TEXT="&#x8f93;&#x5165;&#x8def;&#x7531;&#x548c;&#x8f93;&#x51fa;&#x8def;&#x7531;&#x7684;&#x533a;&#x522b;">
<node CREATED="1457422280750" ID="ID_897392471" MODIFIED="1457422789168">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36755;&#20837;&#36335;&#30001;&#26159;&#25351;&#31995;&#32479;&#20174;&#26576;&#20010;&#25509;&#21475;&#19978;&#25910;&#21040;&#19968;&#20010;IP&#21253;&#28982;&#21518;&#35201;&#20915;&#23450;&#23427;&#30340;&#21435;&#22788;&#12290;
    </p>
    <p>
      &#36755;&#20986;&#36335;&#30001;&#26159;&#25351;&#31995;&#32479;&#33258;&#24049;&#21457;&#36865;&#19968;&#20010;IP&#21253;&#28982;&#21518;&#35201;&#20915;&#23450;&#23427;&#30340;&#21435;&#22788;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21435;&#22788;&#26377;&#19977;&#31181;&#65306;&#25237;&#36882;&#21040;&#26412;&#22320;(deliver to local)&#65292;&#36716;&#21457;(forward)&#65292;&#30452;&#25509;&#21457;&#36865;(output)&#12290;
    </p>
    <p>
      &#26681;&#25454;IP&#21253;&#30340;&#31867;&#22411;&#65292;&#21487;&#20197;&#26159;&#19978;&#38754;&#19968;&#31181;&#20063;&#21487;&#20197;&#26159;&#19978;&#38754;&#20960;&#31181;&#30340;&#32452;&#21512;&#12290;&#21512;&#27861;&#30340;&#32452;&#21512;&#21253;&#25324;&#65306;
    </p>
    <p>
      &#25237;&#36882;&#21040;&#26412;&#22320;(deliver to local)&#160;&#160;&#160;+&#160;&#160;&#160;&#30452;&#25509;&#21457;&#36865;(output)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457427036986" ID="ID_1984052520" MODIFIED="1457427160896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#36755;&#20837;&#36335;&#30001;&#32780;&#35328;&#65292;&#23427;&#24635;&#26159;&#26377;&#19968;&#20010;skb&#65292;&#25152;&#20197;&#26368;&#32456;&#36755;&#20837;&#36335;&#30001;&#26597;&#25214;&#30340;&#32467;&#26524;&#20063;&#26159;&#23384;&#25918;&#21040;skb-&gt;dst&#12290;
    </p>
    <p>
      &#20294;&#26159;&#23545;&#20110;&#36755;&#20986;&#36335;&#30001;&#32780;&#35328;&#65292;&#24182;&#27809;&#26377;&#19968;&#20010;skb&#20851;&#32852;&#65292;&#25152;&#20197;&#36755;&#20986;&#36335;&#30001;&#26597;&#25214;&#30340;&#32467;&#26524;&#26159;&#36820;&#22238;&#32473;&#35843;&#29992;&#32773;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1306651146780" FOLDED="true" ID="ID_214023506" MODIFIED="1465419206795" TEXT="ipv4">
<node CREATED="1453421347740" FOLDED="true" ID="ID_45965711" MODIFIED="1458696916414" TEXT="&#x57fa;&#x672c;&#x6846;&#x67b6;">
<node CREATED="1453421788924" ID="ID_817335105" MODIFIED="1453421827546">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_route_arch_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453421839264" FOLDED="true" ID="ID_1292444922" MODIFIED="1457852197705" TEXT="IPv4&#x5305;&#x7ed3;&#x6784;">
<node CREATED="1453421861763" FOLDED="true" ID="ID_812387577" MODIFIED="1453431885692">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_header_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1453421941094" ID="ID_779772948" MODIFIED="1453421954695" TEXT="version : 4"/>
<node CREATED="1453421955465" ID="ID_592345968" MODIFIED="1453422176855">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      header length
    </p>
    <p>
      &#21333;&#20301;&#20026;32bit&#20063;&#23601;&#26159;4&#23383;&#33410;&#65292;4bit&#30340;&#26368;&#22823;&#34920;&#31034;&#26159;15&#65292;&#25152;&#20197;&#22836;&#37096;&#26368;&#38271;&#20026;60&#23383;&#33410;&#12290;
    </p>
    <p>
      &#19968;&#33324;&#24773;&#20917;&#19979;IPv4&#22836;&#37096;&#38271;&#24230;&#20026;20&#23383;&#33410;&#65292;&#21363;&#36825;&#37324;&#30340;&#20540;&#20026;5&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453422182235" FOLDED="true" ID="ID_1012287405" MODIFIED="1453422510475">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      type of service
    </p>
    <p>
      QOS&#26631;&#31614;&#65292;&#20998;&#20026;&#21069;&#38754;6 bit&#30340;DSCP&#21644;&#21518;&#38754;2 bit&#30340;ECN&#12290;
    </p>
    <p>
      DSCP&#21253;&#21547;64&#20010;&#32534;&#30721;&#65292;&#27599;&#19968;&#31181;&#20195;&#34920;&#19968;&#31181;QOS&#21547;&#20041;&#65292;&#27604;&#22914;&#23454;&#26102;&#20256;&#36755;&#65292;&#23613;&#21147;&#20256;&#36755;&#65292;&#31561;
    </p>
    <p>
      &#20197;&#20415;&#20013;&#38388;&#35774;&#22791;&#30693;&#36947;&#22914;&#20309;&#20026;&#27492;&#21253;&#25552;&#20379;QOS&#26381;&#21153;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1453422290769" ID="ID_1428928023" MODIFIED="1453422299781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_header_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453422519753" ID="ID_247814344" MODIFIED="1453422744751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      total length
    </p>
    <p>
      &#21253;&#30340;&#24635;&#38271;&#24230;&#65292;16bit&#30340;&#26368;&#22823;&#34920;&#31034;&#20026;65535&#65292;&#25152;&#20197;IP&#21253;&#26368;&#38271;&#20026;65535&#12290;
    </p>
    <p>
      &#20294;&#26159;&#19968;&#33324;2&#23618;&#35774;&#22791;&#30340;&#26368;&#22823;&#24103;&#38271;&#36828;&#23567;&#20110;&#27492;&#20540;&#65292;&#24403;IP&#21253;&#30340;&#38271;&#24230;&#22823;&#20110;2&#23618;&#35774;&#22791;&#30340;&#24103;&#38271;&#38480;&#21046;&#26102;&#65292;&#23601;&#38656;&#35201;&#20998;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453422763050" ID="ID_1457550997" MODIFIED="1453423173241">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      identification
    </p>
    <p>
      IP&#21253;&#30340;&#26631;&#35782;&#65292;IP&#31995;&#32479;&#35745;&#25968;&#22120;&#30340;&#24403;&#21069;&#20540;&#65292;&#27599;&#21457;&#36865;&#19968;&#20010;IP&#21253;&#35745;&#25968;&#22120;&#21152;1&#12290;
    </p>
    <p>
      &#27880;&#24847;&#21516;&#19968;&#20010;IP&#21253;&#30340;&#19981;&#21516;&#20998;&#29255;&#20849;&#20139;&#21516;&#19968;&#20010;ID&#65292;&#25509;&#25910;&#26041;&#20063;&#25454;&#27492;&#25628;&#38598;&#21516;&#19968;&#20010;IP&#21253;&#30340;&#25152;&#26377;&#20998;&#29255;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423243008" ID="ID_1433545735" MODIFIED="1453423366738">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      don't fragment
    </p>
    <p>
      &#19981;&#35201;&#20998;&#29255;&#26631;&#35782;&#20301;&#12290;&#20013;&#38388;&#35774;&#22791;&#25910;&#21040;&#38656;&#35201;&#20998;&#29255;&#20294;&#21448;&#26377;&#27492;&#26631;&#35782;&#30340;&#21253;&#26102;&#24212;&#35813;&#21521;&#28304;&#21457;&#36865;ICMP&#21253;&#21578;&#30693;&#38169;&#35823;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423378695" ID="ID_1767564381" MODIFIED="1453423469191">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      more fragment
    </p>
    <p>
      &#21518;&#32493;&#36824;&#26377;&#26356;&#22810;&#20998;&#29255;&#12290;&#20026;0&#26631;&#35782;&#27809;&#26377;&#21518;&#32493;&#20998;&#29255;&#20102;&#65292;&#23427;&#20063;&#34920;&#31034;&#19968;&#31995;&#21015;&#20998;&#29255;&#30340;&#32467;&#26463;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423500556" ID="ID_199636920" MODIFIED="1453423637526">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fragment offset
    </p>
    <p>
      &#24403;&#21069;&#20998;&#29255;&#22312;&#23436;&#25972;IP&#21253;&#20013;&#30340;&#23383;&#33410;&#20559;&#31227;&#12290;&#23427;&#25551;&#36848;&#20102;&#20998;&#29255;&#22312;&#23436;&#25972;IP&#20013;&#30340;&#20301;&#32622;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423643476" ID="ID_283240355" MODIFIED="1453423877772">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      time to live
    </p>
    <p>
      &#23384;&#27963;&#26102;&#38388;&#65292;&#27599;&#32463;&#36807;&#19968;&#20010;&#36335;&#30001;&#35774;&#22791;&#65292;&#20854;&#20540;&#20943;1&#65292;&#24403;&#20854;&#23567;&#20110;&#31561;&#20110;1&#26102;&#65292;&#20013;&#38388;&#35774;&#22791;&#21521;&#28304;&#21457;&#36865;ICMP&#21578;&#30693;&#38169;&#35823;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423885878" ID="ID_427809004" MODIFIED="1453423957832">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      protocol
    </p>
    <p>
      4&#23618;&#21327;&#35758;&#31867;&#22411;&#65292;&#20063;&#23601;&#26159;IP&#21253;&#36127;&#36733;&#30340;&#31867;&#22411;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453423962979" ID="ID_77709287" MODIFIED="1453424004895">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      checksum
    </p>
    <p>
      IP&#21253;&#22836;&#30340;&#26657;&#39564;&#21644;&#65292;&#21253;&#25324;&#36873;&#39033;&#20294;&#19981;&#21253;&#25324;&#36127;&#36733;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453424011101" ID="ID_159615443" MODIFIED="1453424060488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      source IP address
    </p>
    <p>
      &#28304;IP&#22320;&#22336;&#65292;x.x.x.x
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453424024305" ID="ID_1828003681" MODIFIED="1453424075416">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      destination IP address
    </p>
    <p>
      &#30446;&#30340;IP&#22320;&#22336;&#65292;x.x.x.x
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453424032061" ID="ID_1311805965" MODIFIED="1453424093067">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      options
    </p>
    <p>
      IP&#22836;&#37096;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
<node CREATED="1453424616998" FOLDED="true" ID="ID_459398871" MODIFIED="1453427343508" TEXT="&#x901a;&#x7528;&#x683c;&#x5f0f;">
<node CREATED="1453425799624" ID="ID_264372270" MODIFIED="1453425814107">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_header_5.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1453424694370" FOLDED="true" ID="ID_1551282533" MODIFIED="1453426058990">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_header_3.JPG" />
  </body>
</html></richcontent>
<node CREATED="1453424732698" ID="ID_1575144535" MODIFIED="1453424792704">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      copied
    </p>
    <p>
      &#24403;&#21253;&#38656;&#35201;&#20998;&#29255;&#26102;&#65292;&#27492;&#36873;&#39033;&#24212;&#34987;copy&#33267;&#27599;&#19968;&#20010;&#20998;&#29255;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453425211318" ID="ID_1007610778" MODIFIED="1453425343815">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      class
    </p>
    <table border="0" style="width: 80%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0">
      <tr>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            00
          </p>
        </td>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            control
          </p>
        </td>
      </tr>
      <tr>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            01
          </p>
        </td>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            reserved
          </p>
        </td>
      </tr>
      <tr>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            10
          </p>
        </td>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            measurement
          </p>
        </td>
      </tr>
      <tr>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            11
          </p>
        </td>
        <td valign="top" style="width: 50%; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1; border-right-width: 1; border-bottom-width: 1; border-left-width: 1">
          <p style="margin-top: 1; margin-right: 1; margin-bottom: 1; margin-left: 1">
            reserved
          </p>
        </td>
      </tr>
    </table>
  </body>
</html></richcontent>
</node>
<node CREATED="1453425033722" ID="ID_308958702" MODIFIED="1453425081067">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ipv4_header_4.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453425896244" ID="ID_238338018" MODIFIED="1453425929976">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      length
    </p>
    <p>
      IP&#36873;&#39033;&#30340;&#38271;&#24230;&#65292;&#21253;&#25324;type&#21644;length&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453427283405" ID="ID_1539574809" MODIFIED="1453427340528">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pointer
    </p>
    <p>
      &#19981;&#21516;&#30340;&#36873;&#39033;&#26377;&#19981;&#21516;&#30340;&#29992;&#27861;&#65292;&#20854;&#21021;&#22987;&#20540;&#20026;1&#65292;&#21363;&#25351;&#21521;type&#23383;&#27573;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453426069594" FOLDED="true" ID="ID_1439953555" MODIFIED="1453426370203" TEXT="end of option list">
<node CREATED="1453426122706" ID="ID_1226583362" MODIFIED="1453426196347" TEXT="&#x6b64;&#x9009;&#x9879;&#x7528;&#x4e8e;&#x5c06;IP&#x5934;&#x90e8;&#x5bf9;&#x9f50;&#x5728;4&#x5b57;&#x8282;&#x8fb9;&#x754c;&#xff0c;&#x56e0;&#x4e3a;IP&#x5934;&#x90e8;&#x4e2d;length of header&#x662f;&#x4ee5;4&#x5b57;&#x8282;&#x4e3a;&#x5355;&#x4f4d;&#x7684;"/>
</node>
<node CREATED="1453426218224" FOLDED="true" ID="ID_764663070" MODIFIED="1453426369455" TEXT="No operation">
<node CREATED="1453426254727" ID="ID_1991684711" MODIFIED="1453426288475" TEXT="&#x586b;&#x8865;&#x9009;&#x9879;&#x4e4b;&#x95f4;&#x7684;&#x7a7a;&#x767d;&#xff0c;&#x5c06;&#x540e;&#x7eed;IP&#x9009;&#x9879;&#x5bf9;&#x9f50;&#x5728;&#x7279;&#x5b9a;&#x5b57;&#x8282;&#x8fb9;&#x754c;"/>
</node>
<node CREATED="1453426372241" FOLDED="true" ID="ID_1476754119" MODIFIED="1453426939789" TEXT="source route">
<node CREATED="1453426443760" ID="ID_1983312915" MODIFIED="1453426928387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26469;&#28304;&#22320;&#36335;&#30001;&#65292;&#21363;&#21457;&#36865;&#32773;&#22312;&#27492;&#36873;&#39033;&#20013;&#25351;&#23450;&#21253;&#24212;&#35813;&#32463;&#36807;&#30340;&#36339;&#28857;nexthop&#65292;&#23427;&#26159;&#19968;&#20010;IP&#22320;&#22336;&#30340;&#21015;&#34920;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20005;&#26684;strict&#26469;&#28304;&#22320;&#36335;&#30001;&#65306;&#24517;&#39035;&#20005;&#26684;&#25353;&#29031;&#27425;&#24207;&#32463;&#36807;&#36873;&#39033;&#20013;&#25351;&#23450;&#30340;&#36339;&#28857;&#65292;&#19981;&#33021;&#22810;&#20063;&#19981;&#33021;&#23569;&#12290;
    </p>
    <p>
      &#27604;&#22914;&#36873;&#39033;&#25351;&#23450;&#30340;&#26159;A -&gt; C -&gt; E&#65292;&#37027;&#20040;&#36335;&#24452;A -&gt; B -&gt; C -&gt; E&#26159;&#19981;&#34987;&#20801;&#35768;&#30340;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26494;&#25955;loose&#26469;&#28304;&#22320;&#36335;&#30001;&#65306;&#24212;&#35813;&#25353;&#29031;&#27425;&#24207;&#32463;&#36807;&#36873;&#39033;&#20013;&#25351;&#23450;&#30340;&#36339;&#28857;&#65292;&#33021;&#22810;&#20294;&#19981;&#33021;&#23569;&#12290;
    </p>
    <p>
      &#27604;&#22914;&#36873;&#39033;&#25351;&#23450;&#30340;&#26159;A -&gt; C -&gt; E&#65292;&#37027;&#20040;&#36335;&#24452;A -&gt; B -&gt; C -&gt; E&#26159;&#34987;&#20801;&#35768;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453427098341" FOLDED="true" ID="ID_1383832496" MODIFIED="1453427275751" TEXT="record route">
<node CREATED="1453427108819" ID="ID_476698788" MODIFIED="1453427189111" TEXT="&#x8bb0;&#x5f55;&#x8def;&#x7531;&#xff0c;&#x5b83;&#x8bf7;&#x6c42;&#x53d1;&#x9001;&#x8005;&#x548c;&#x63a5;&#x6536;&#x8005;&#x4e4b;&#x95f4;&#x7684;&#x8def;&#x7531;&#x5668;&#x5b58;&#x50a8;&#x5b83;&#x4eec;&#x8f6c;&#x53d1;&#x5c01;&#x5305;&#x65f6;&#x6240;&#x7528;&#x7684;&#x5916;&#x51fa;&#x63a5;&#x53e3;&#x7684;IP&#x5730;&#x5740;"/>
<node CREATED="1453427251419" ID="ID_620660232" MODIFIED="1453427265929">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_header_6.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453427472322" FOLDED="true" ID="ID_1479091936" MODIFIED="1453427496659" TEXT="timestamp">
<node CREATED="1453427479748" ID="ID_1513307170" MODIFIED="1453427494842" TEXT="&#x8bb0;&#x5f55;&#x63a5;&#x6536;&#x5305;&#x7684;&#x65f6;&#x95f4;"/>
</node>
<node CREATED="1453427572011" FOLDED="true" ID="ID_1368815606" MODIFIED="1453427650385" TEXT="router alert">
<node CREATED="1453427621788" ID="ID_131891658" MODIFIED="1453427646601" TEXT="&#x9700;&#x8981;&#x6cbf;&#x9014;&#x7ecf;&#x8fc7;&#x7684;&#x6bcf;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x5668;&#x5904;&#x7406;"/>
</node>
</node>
</node>
</node>
<node CREATED="1306651152407" FOLDED="true" ID="ID_1095458820" MODIFIED="1458597786426" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1306651162013" ID="ID_1540858254" MODIFIED="1306651175281" TEXT="struct list_head inetsw"/>
<node CREATED="1306651206988" ID="ID_1525675549" MODIFIED="1306651209980" TEXT="inetsw_array"/>
<node CREATED="1306676027828" FOLDED="true" ID="ID_1208471645" MODIFIED="1333010972919" TEXT="struct packet_type ip_packet_type">
<node CREATED="1306676123872" ID="ID_253613778" MODIFIED="1306676164541" TEXT=".type = ETH_P_IP"/>
<node CREATED="1306676165816" ID="ID_75065348" LINK="#ID_714393607" MODIFIED="1306984694934" TEXT=".func = ip_rcv"/>
<node CREATED="1306676183360" ID="ID_921752669" MODIFIED="1306676186291" TEXT=".gso_send_check = inet_gso_send_check"/>
<node CREATED="1306676203062" ID="ID_1571055556" MODIFIED="1306676205890" TEXT=".gso_segment = inet_gso_segment"/>
<node CREATED="1306676220710" ID="ID_134792108" MODIFIED="1306676223814" TEXT=".gro_receive = inet_gro_receive"/>
<node CREATED="1306676239546" ID="ID_1035969316" MODIFIED="1306676242399" TEXT=".gro_complete = inet_gro_complete"/>
</node>
<node CREATED="1333011015599" FOLDED="true" ID="ID_764809875" MODIFIED="1333949258569" TEXT="struct net_protocol *inet_protos[protocol]">
<node CREATED="1333011091135" ID="ID_880495905" MODIFIED="1333011119623" TEXT="&#x51fd;&#x6570;&#x6307;&#x9488;handler : &#x63a5;&#x6536;&#x5c5e;&#x4e8e;&#x8fd9;&#x4e2a;&#x534f;&#x8bae;&#x7684;&#x5305;"/>
<node CREATED="1333011130920" ID="ID_1585191366" MODIFIED="1333011138996" TEXT="&#x51fd;&#x6570;&#x6307;&#x9488;err_handler :"/>
<node CREATED="1333011148101" ID="ID_1970861765" MODIFIED="1333011156931" TEXT="&#x51fd;&#x6570;&#x6307;&#x9488;gso_send_check :"/>
<node CREATED="1333011162602" ID="ID_974234115" MODIFIED="1333011170097" TEXT="&#x51fd;&#x6570;&#x6307;&#x9488;gso_segment :"/>
<node CREATED="1333011178768" ID="ID_180922171" MODIFIED="1333011186867" TEXT="&#x51fd;&#x6570;&#x6307;&#x9488;gro_receive :"/>
<node CREATED="1333011192232" ID="ID_670349389" MODIFIED="1333011199388" TEXT="&#x51fd;&#x6570;&#x6307;&#x9488;gro_complete :"/>
<node CREATED="1333011218025" ID="ID_804332963" MODIFIED="1333011219128" TEXT="no_policy"/>
<node CREATED="1333011227074" ID="ID_1642230896" MODIFIED="1333011229355" TEXT="netns_ok"/>
</node>
</node>
<node CREATED="1306830628659" FOLDED="true" ID="ID_254857431" MODIFIED="1458597782455" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1306830641859" FOLDED="true" ID="ID_1964239103" MODIFIED="1453431941145" TEXT="struct in_ifaddr">
<node CREATED="1306830659539" ID="ID_849844814" MODIFIED="1306830665668" TEXT="struct in_ifaddr *ifa_next"/>
<node CREATED="1306830675938" ID="ID_1835906462" MODIFIED="1306830681285" TEXT="struct in_device *ifa_dev"/>
<node CREATED="1306830689682" ID="ID_524128286" MODIFIED="1306830696624" TEXT="struct rcu_head rcu_head"/>
<node CREATED="1306830704226" ID="ID_46251187" MODIFIED="1306830706204" TEXT="ifa_local"/>
<node CREATED="1306830711489" ID="ID_1068052748" MODIFIED="1306830713065" TEXT="ifa_address"/>
<node CREATED="1306830717537" ID="ID_1654060477" MODIFIED="1306830719004" TEXT="ifa_mask"/>
<node CREATED="1306830723681" ID="ID_345358973" MODIFIED="1306830724923" TEXT="ifa_broadcast"/>
<node CREATED="1306830728929" FOLDED="true" ID="ID_635277357" MODIFIED="1453431940031" TEXT="ifa_scope">
<node CREATED="1306835658215" ID="ID_1018961156" MODIFIED="1306835661743" TEXT="RT_SCOPE_UNIVERSE"/>
<node CREATED="1306835667863" ID="ID_1519036027" MODIFIED="1306835669593" TEXT="RT_SCOPE_SITE"/>
<node CREATED="1306835674838" ID="ID_1847875061" MODIFIED="1306835677138" TEXT="RT_SCOPE_LINK"/>
<node CREATED="1306835681110" ID="ID_1160886929" MODIFIED="1306835682745" TEXT="RT_SCOPE_HOST"/>
<node CREATED="1306835687894" ID="ID_830370798" MODIFIED="1306835689006" TEXT="RT_SCOPE_NOWHERE"/>
</node>
<node CREATED="1306830734225" ID="ID_1103890028" MODIFIED="1306830735442" TEXT="ifa_flags"/>
<node CREATED="1306830739808" ID="ID_1884714178" MODIFIED="1306830741262" TEXT="ifa_prefixlen"/>
<node CREATED="1306830746336" ID="ID_518145066" MODIFIED="1306830747596" TEXT="ifa_label"/>
</node>
<node CREATED="1306833195604" FOLDED="true" ID="ID_103196370" MODIFIED="1456212680905">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct in_device
    </p>
    <p>
      &#34920;&#31034;ipv4&#35774;&#22791;,&#20381;&#38468;&#20110;struct net_device,
    </p>
    <p>
      &#22312;struct net_device&#27880;&#20876;&#23436;&#25104;&#21518;&#30340;&#36890;&#30693;&#38142;&#20013;&#21021;&#22987;&#21270;
    </p>
    <p>
      &#35265;inetdev_init&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306833291218" ID="ID_1708990037" MODIFIED="1306833305658">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_device *dev
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306833312337" ID="ID_905531726" MODIFIED="1306835275384" TEXT="refcnt : &#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
<node CREATED="1306833319793" ID="ID_842207433" MODIFIED="1306833320749" TEXT="dead"/>
<node CREATED="1306833332401" ID="ID_1572029089" LINK="#ID_1964239103" MODIFIED="1306833421423">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct in_ifaddr *ifa_list
    </p>
    <p>
      interface&#19978;&#37197;&#32622;&#30340;IP&#22320;&#22336;&#21015;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306833433758" ID="ID_545796749" MODIFIED="1306833435673" TEXT="mc_list_lock"/>
<node CREATED="1306833446750" ID="ID_1965296392" MODIFIED="1306833452568" TEXT="struct ip_mc_list *mc_list"/>
<node CREATED="1306833467694" ID="ID_1964434834" MODIFIED="1306833468916" TEXT="mc_count"/>
<node CREATED="1306833475069" ID="ID_1172348877" MODIFIED="1306833476048" TEXT="mc_tomb_lock"/>
<node CREATED="1306833481869" ID="ID_633140429" MODIFIED="1306833483122" TEXT="mr_v1_seen"/>
<node CREATED="1306833487997" ID="ID_737528101" MODIFIED="1306833489044" TEXT="mr_v2_seen"/>
<node CREATED="1306833493949" ID="ID_51625739" MODIFIED="1306833494844" TEXT="mr_maxdelay"/>
<node CREATED="1306833500300" ID="ID_1214224959" MODIFIED="1306833501194" TEXT="mr_qrv"/>
<node CREATED="1306833506236" ID="ID_875388146" MODIFIED="1306833507181" TEXT="mr_gq_running"/>
<node CREATED="1306833511996" ID="ID_667714571" MODIFIED="1306833512887" TEXT="mr_ifc_count"/>
<node CREATED="1306833522284" ID="ID_51834857" MODIFIED="1306833528814" TEXT="mr_gq_timer&#x5b9a;&#x65f6;&#x5668;"/>
<node CREATED="1306833533707" ID="ID_721800490" MODIFIED="1306833538095" TEXT="mr_ifc_timer&#x5b9a;&#x65f6;&#x5668;"/>
<node CREATED="1306833546827" ID="ID_1021548363" MODIFIED="1306833551597" TEXT="struct neigh_parms *arp_parms"/>
<node CREATED="1306833561931" FOLDED="true" ID="ID_1021584339" MODIFIED="1359856749172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct ipv4_devconf cnf
    </p>
  </body>
</html></richcontent>
<node CREATED="1306834408198" ID="ID_1254010499" MODIFIED="1306834416519" TEXT="sysctl&#x6307;&#x9488;"/>
<node CREATED="1306834422277" ID="ID_842569754" MODIFIED="1306834426104" TEXT="data&#x6570;&#x7ec4;"/>
<node CREATED="1306834431717" ID="ID_441496150" MODIFIED="1306834433403" TEXT="state"/>
</node>
<node CREATED="1306833587370" ID="ID_1498666321" MODIFIED="1306833599962">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct rcu_head rcu_head
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1360639747193" FOLDED="true" ID="ID_1393937918" MODIFIED="1458194361144" TEXT="&#x521d;&#x59cb;&#x5316;&#x6d41;&#x7a0b;">
<node CREATED="1306650703801" FOLDED="true" ID="ID_522589504" MODIFIED="1456212686786" TEXT="ipv4&#x521d;&#x59cb;&#x5316; &#xff1a;inet_init&#xa;  net/ipv4/af_inet.c">
<node CREATED="1306650770915" FOLDED="true" ID="ID_140231692" MODIFIED="1333949091682" TEXT="1, &#x6ce8;&#x518c;tcp&#x534f;&#x8bae;">
<node CREATED="1333018460226" ID="ID_1856511395" MODIFIED="1333018557778" TEXT="&#x8c03;&#x7528;proto_register&#x6ce8;&#x518c;tcp socket&#x7684;&#x64cd;&#x4f5c;&#x51fd;&#x6570;&#xa;&#x82e5;&#x521b;&#x5efa;&#x7684;socket&#x4e3a;tcp socket&#x65f6;&#x5373;&#x8c03;&#x7528;tcp_prot&#x4e2d;&#x6307;&#x5b9a;&#x7684;&#x64cd;&#x4f5c;&#x51fd;&#x6570;"/>
</node>
<node CREATED="1306650783784" ID="ID_524250756" MODIFIED="1306650796307" TEXT="2, &#x6ce8;&#x518c;udp&#x534f;&#x8bae;"/>
<node CREATED="1306650797373" ID="ID_1216252109" MODIFIED="1306650807217" TEXT="3, &#x6ce8;&#x518c;raw&#x534f;&#x8bae;"/>
<node CREATED="1306650828815" ID="ID_104521908" MODIFIED="1306650855464" TEXT="4, &#x6ce8;&#x518c;ipv4 socket&#x65cf;&#xa;sock_register(&amp;inet_family_ops)"/>
<node CREATED="1306650867997" ID="ID_434146723" MODIFIED="1306650871629" TEXT="5, ip_static_sysctl_init"/>
<node CREATED="1306651016265" ID="ID_1190208971" MODIFIED="1306651043049" TEXT="6, &#x5728;ipv4&#x5185;&#x6dfb;&#x52a0;icmp&#x534f;&#x8bae;"/>
<node CREATED="1306651016265" FOLDED="true" ID="ID_462983110" MODIFIED="1333010951754" TEXT="7, &#x5728;ipv4&#x5185;&#x6dfb;&#x52a0;udp&#x534f;&#x8bae;">
<node CREATED="1333010791350" ID="ID_1798312663" MODIFIED="1333010947488" TEXT="inet_add_protocol&#xa;&#x5728;&#x5168;&#x5c40;&#x6570;&#x7ec4;inet_protos[protocol]&#x4e2d;&#x6dfb;&#x52a0;udp&#x5bf9;&#x5e94;&#x7684;struct net_protocol&#x7ed3;&#x6784;"/>
</node>
<node CREATED="1306651016265" FOLDED="true" ID="ID_1617595755" MODIFIED="1333949124973" TEXT="8, &#x5728;ipv4&#x5185;&#x6dfb;&#x52a0;tcp&#x534f;&#x8bae;">
<node CREATED="1333010791350" ID="ID_832199257" LINK="#ID_764809875" MODIFIED="1333011332014" TEXT="inet_add_protocol&#xa;&#x5728;&#x5168;&#x5c40;&#x6570;&#x7ec4;inet_protos[protocol]&#x4e2d;&#x6dfb;&#x52a0;tcp&#x5bf9;&#x5e94;&#x7684;struct net_protocol&#x7ed3;&#x6784;"/>
</node>
<node CREATED="1306651016265" ID="ID_94503980" MODIFIED="1306651097658" TEXT="9, &#x5728;ipv4&#x5185;&#x6dfb;&#x52a0;igmp&#x534f;&#x8bae;"/>
<node CREATED="1306651124969" ID="ID_790502011" MODIFIED="1306651137104" TEXT="10, &#x521d;&#x59cb;&#x5316;&#x5168;&#x5c40;&#x53d8;&#x91cf;inetsw"/>
<node CREATED="1306651192579" ID="ID_749472412" MODIFIED="1306651205967" TEXT="11, &#x521d;&#x59cb;&#x5316;&#x5168;&#x5c40;&#x53d8;&#x91cf;inetsw_array"/>
<node CREATED="1306651220484" ID="ID_1804315140" MODIFIED="1306651224367" TEXT="12, arp_init"/>
<node CREATED="1306651238205" FOLDED="true" ID="ID_1037044460" MODIFIED="1360741879064">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      13, ip_init
    </p>
    <p>
      net/ipv4/ip_output.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1360639992970" ID="ID_1156177327" LINK="#ID_390954495" MODIFIED="1360640016478" TEXT="1, ip_rt_init"/>
<node CREATED="1306829063850" FOLDED="true" ID="ID_526233796" MODIFIED="1360741876581" TEXT="2, inet_initpeers">
<node CREATED="1360741658565" ID="ID_623846553" MODIFIED="1360741726628" TEXT="&#x521b;&#x5efa;&#x9ad8;&#x901f;&#x7f13;&#x5b58;peer_cachep&#x4ee5;&#x5206;&#x914d;struct inet_peer,&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x7f13;&#x5b58;&#x5ba2;&#x6237;&#x7aef;IP&#x8def;&#x7531;&#x4fe1;&#x606f;&#x7684;&#x7ed3;&#x6784;&#x4f53;"/>
<node CREATED="1360741747541" ID="ID_1503883333" MODIFIED="1360741864971" TEXT="&#x521b;&#x5efa;&#x5b9a;&#x65f6;&#x5668;peer_periodic_timer&#x4ee5;&#x8c03;&#x7528;peer_check_expire&#x5b9a;&#x65f6;&#x56de;&#x6536;&#x9ad8;&#x901f;&#x7f13;&#x5b58;peer_cachep"/>
</node>
<node CREATED="1306829072698" ID="ID_793254947" MODIFIED="1306829075333" TEXT="3, igmp_mc_proc_init"/>
</node>
<node CREATED="1306651253167" FOLDED="true" ID="ID_314474694" MODIFIED="1333017686131" TEXT="14, tcp_v4_init">
<node CREATED="1333011586932" ID="ID_246650487" LINK="#ID_195233229" MODIFIED="1333011611231" TEXT="&#x521d;&#x59cb;&#x5316;hash&#x8868;tcp_hashinfo"/>
<node CREATED="1333013255599" ID="ID_1874799733" LINK="#ID_453977332" MODIFIED="1333013394728" TEXT="&#x8c03;&#x7528;register_pernet_subsys&#x5728;&#x6bcf;&#x4e2a;net&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x4e2d;&#x6ce8;&#x518c;tcp socket&#xa;&#x8fd9;&#x8868;&#x660e;&#x53ef;&#x4ee5;&#x5728;&#x6bcf;&#x4e2a;net&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x4e2d;&#x521b;&#x5efa;tcp&#x7c7b;&#x578b;&#x7684;socket"/>
</node>
<node CREATED="1306651265371" FOLDED="true" ID="ID_989545488" MODIFIED="1333018263487" TEXT="15, tcp_init">
<node CREATED="1333018130815" ID="ID_1836745010" MODIFIED="1333018143096" TEXT="&#x521d;&#x59cb;&#x5316;tcp_hashinfo&#x7684;ehash"/>
<node CREATED="1333018144133" ID="ID_121732085" MODIFIED="1333018152782" TEXT="&#x521d;&#x59cb;&#x5316;tcp_hashinfo&#x7684;bhash"/>
<node CREATED="1333018190991" ID="ID_311176230" MODIFIED="1333018212930" TEXT="&#x8c03;&#x7528;tcp_register_congestion_control&#x6ce8;&#x518c;&#x62e5;&#x585e;&#x7ba1;&#x7406;&#x673a;&#x5236;"/>
</node>
<node CREATED="1306651277165" ID="ID_1832429428" MODIFIED="1306651281709" TEXT="16, udp_init"/>
<node CREATED="1306651290211" ID="ID_933312671" MODIFIED="1306651294176" TEXT="17, udplite4_register"/>
<node CREATED="1306651302391" ID="ID_1038654518" MODIFIED="1306651306284" TEXT="18, icmp_init"/>
<node CREATED="1306651321074" ID="ID_1058647540" MODIFIED="1306651324785" TEXT="19, ip_mr_init"/>
<node CREATED="1306651332885" ID="ID_85995234" MODIFIED="1306651336572" TEXT="20, init_ipv4_mibs"/>
<node CREATED="1306651343036" ID="ID_638213667" MODIFIED="1306651347296" TEXT="21, ipv4_proc_init"/>
<node CREATED="1306651355030" ID="ID_1659395150" MODIFIED="1306651358800" TEXT="22, ipfrag_init"/>
<node CREATED="1306651372271" ID="ID_1727873716" LINK="#ID_1208471645" MODIFIED="1306676264301" TEXT="23, dev_add_pack&#xa;&#x6ce8;&#x518c;&#x8981;&#x63a5;&#x6536;&#x7684;&#x5305;&#x7684;etherType&#x4e3a;ETH_P_IP"/>
</node>
</node>
<node CREATED="1306742811152" FOLDED="true" ID="ID_967793578" MODIFIED="1458250333948" TEXT="&#x5305;&#x5904;&#x7406;&#x6d41;&#x7a0b;">
<node CREATED="1453432898232" FOLDED="true" ID="ID_1664556196" MODIFIED="1458250328378">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21253;&#22788;&#29702;&#27969;&#31243;&#21487;&#20197;&#21010;&#20998;&#20026;5&#20010;&#38454;&#27573;&#65306;
    </p>
    <p>
      input, local in, forward, local out, output
    </p>
  </body>
</html></richcontent>
<node CREATED="1453433040970" ID="ID_1146940368" MODIFIED="1453433123320">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_pkt_process_stages.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453433148407" ID="ID_1102738570" MODIFIED="1456212717862" TEXT="input">
<node CREATED="1306742868031" FOLDED="true" ID="ID_714393607" MODIFIED="1458241072308" TEXT="ip_rcv">
<node CREATED="1453489679162" FOLDED="true" ID="ID_1245284209" MODIFIED="1453489761080" TEXT="&#x8fdb;&#x5165;ip_rcv&#x65f6;skb&#x7684;&#x7ed3;&#x6784;">
<node CREATED="1453489721310" ID="ID_365630444" MODIFIED="1453489755073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_process_input_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306751833505" ID="ID_949091650" MODIFIED="1453490697665">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;pkt_type&#30001;&#39537;&#21160;&#35843;&#29992;eth_type_trans&#35774;&#23450;&#65292;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#20026;&#25509;&#25910;&#35774;&#22791;&#30340;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_HOST&#65292;&#27604;&#22914;&#21457;&#32473;&#26412;&#26426;&#25110;&#32773;&#38656;&#35201;&#26412;&#26426;&#36335;&#30001;&#30340;&#21253;&#12290;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#19981;&#26159;&#25509;&#25910;&#35774;&#22791;&#30340;MAC&#20063;&#19981;&#26159;&#32452;&#25773;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_OTHERHOST&#65292;&#27604;&#22914;bridge&#30340;&#21253;&#12290;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#26159;&#24191;&#25773;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_BROADCAST&#12290;
    </p>
    <p>
      &#24403;&#30446;&#30340;MAC&#22320;&#22336;&#26159;&#32452;&#25773;&#20294;&#19981;&#26159;&#24191;&#25773;MAC&#26102;&#21021;&#22987;&#21270;&#20026;PACKET_MULTICAST&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#33324;&#24773;&#20917;&#19979;skb-&gt;pkt_type == PACKET_OTHERHOST&#30340;&#21253;&#22312;ip_rcv&#20043;&#21069;&#24050;&#34987;&#20002;&#24323;&#12290;
    </p>
    <p>
      &#20294;&#24403;&#35774;&#22791;&#22788;&#20110;&#28151;&#26434;&#27169;&#24335;&#26102;&#65292;&#39537;&#21160;&#20063;&#20250;&#25226;&#36825;&#31181;&#21253;&#25910;&#19978;&#26469;&#65292;&#20197;&#20415;raw socket&#35835;&#21462;&#12290;
    </p>
    <p>
      &#20294;&#26159;ip_rcv&#26412;&#36523;&#19981;&#22788;&#29702;&#21457;&#32473;&#20854;&#23427;&#20027;&#26426;&#30340;&#21253;&#65292;
    </p>
    <p>
      &#21482;&#22788;&#29702;skb-&gt;pkt_type&#31561;&#20110;PACKET_HOST / PACKET_BROADCAST / PACKET_MULTICAST&#30340;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306985581485" ID="ID_50817013" MODIFIED="1453491510831">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_share_check()&#26816;&#26597;skb&#26159;&#21542;&#36824;&#34987;&#20854;&#20182;&#20154;&#25152;&#20351;&#29992;(skb-&gt;users&#24341;&#29992;&#35745;&#25968;&#22823;&#20110;1)
    </p>
    <p>
      &#22914;&#26524;skb&#34987;&#20849;&#20139;&#20102;&#21017;&#20811;&#38534;&#19968;&#20221;&#32473;&#33258;&#24049;&#29992;&#65292;&#22914;&#26524;&#27809;&#26377;&#20849;&#20139;&#21017;&#32487;&#32493;&#20351;&#29992;&#21407;skb&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#38656;&#35201;&#20811;&#38534;skb&#30340;&#21407;&#22240;&#26159;IP&#31995;&#32479;&#38656;&#35201;&#20462;&#25913;IP&#21253;&#65292;&#27604;&#22914;&#36882;&#20943;TTL&#65292;&#20462;&#25913;&#30446;&#30340;&#25110;&#28304;IP&#22320;&#22336;&#65292;&#26356;&#26032;&#26657;&#39564;&#21644;&#65292;&#31561;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453492427320" ID="ID_1366088377" LINK="#ID_379999438" MODIFIED="1453492605081" TEXT="pskb_may_pull&#x6240;&#x505a;&#x7684;&#x5de5;&#x4f5c;&#x662f;&#x68c0;&#x67e5;skb-&gt;data&#x6307;&#x5411;&#x7684;&#x533a;&#x57df;&#x81f3;&#x5c11;&#x5305;&#x542b;&#x4e86;&#x4e00;&#x4e2a;IP&#x5934;&#x90e8;&#xff0c;&#xa;&#x5426;&#x5219;&#x5c06;&#x4ece;skb_shinfo(skb)-&gt;frags[]&#x4e2d;&#x62f7;&#x8d1d;&#x8fc7;&#x6765;"/>
<node CREATED="1453492704311" ID="ID_392800642" MODIFIED="1453492789403" TEXT="&#x5408;&#x6cd5;&#x6027;&#x68c0;&#x67e5;&#xff1a;&#x7248;&#x672c;&#x53f7;&#xff0c;&#x5934;&#x90e8;&#x957f;&#x5ea6;&#xff0c;&#x603b;&#x957f;&#x5ea6;&#xff0c;&#x68c0;&#x9a8c;&#x548c;"/>
<node CREATED="1453492971201" ID="ID_274402677" MODIFIED="1453493742912">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pskb_trim_rcsum&#20027;&#35201;&#26816;&#26597;L2&#26377;&#27809;&#26377;&#23545;IP&#21253;&#36827;&#34892;&#22635;&#20805;&#20197;&#28385;&#36275;&#26368;&#23567;&#24103;&#38271;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26377;&#30340;L2&#35774;&#22791;&#26377;&#26368;&#23567;&#24103;&#38271;&#30340;&#35201;&#27714;&#65292;&#27604;&#22914;&#20197;&#22826;&#32593;&#35201;&#27714;64&#23383;&#33410;&#65292;&#24403;IP&#21253;&#23567;&#20110;&#27492;&#38271;&#24230;&#26102;&#65292;L2&#35774;&#22791;&#20250;&#23545;IP&#21253;&#36827;&#34892;&#22635;&#20805;&#12290;
    </p>
    <p>
      &#27492;&#26102;skb-&gt;len&#23601;&#20250;&#22823;&#20110;IP&#22836;&#37096;&#20013;&#30340;total length&#65292;&#22240;&#27492;&#20989;&#25968;pskb_trim_rcsum&#38656;&#35201;&#23558;skb-&gt;len&#35774;&#32622;&#20026;&#27491;&#30830;&#30340;&#38271;&#24230;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;L2&#35774;&#22791;&#22312;&#20570;&#25509;&#25910;&#20391;&#30340;checksum offloading&#26102;&#26080;&#27861;&#21306;&#20998;&#22635;&#20805;&#30340;&#20869;&#23481;&#19982;&#30495;&#27491;&#30340;&#36127;&#36733;&#65292;&#23601;&#20250;&#38169;&#35823;&#30340;&#35745;&#31639;checksum&#65292;&#22240;&#27492;&#38656;&#35201;&#37325;&#35774;skb-&gt;ip_summed = CHECKSUM_NONE&#20197;&#24378;&#21046;&#35753;L4&#37325;&#26032;&#35745;&#31639;&#26657;&#39564;&#21644;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453494062761" ID="ID_866745138" MODIFIED="1453494084222" TEXT="&#x8bbe;&#x7f6e;L4&#x5934;&#x90e8;&#x8d77;&#x59cb;&#x4f4d;&#x7f6e;skb-&gt;transport_header"/>
<node CREATED="1453494194081" ID="ID_629664732" MODIFIED="1453494451183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_orphan&#20250;&#28165;&#38500;skb&#20043;&#21069;&#30340;owner&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#33324;&#26469;&#35828;socket&#21457;&#36865;skb&#26102;&#65292;&#20250;&#21021;&#22987;&#21270;skb-&gt;sk&#21644;skb-&gt;destructor&#65292;&#20294;&#26159;&#29616;&#22312;&#24050;&#32463;&#36827;&#20837;&#25509;&#25910;&#38454;&#27573;&#65292;&#38656;&#35201;&#28165;&#38500;&#21457;&#36865;&#38454;&#27573;&#30340;owner&#20102;&#65292;&#25152;&#20197;skb_orphan&#20250;&#35843;&#29992;skb-&gt;destructor&#24182;&#28165;&#38500;skb-&gt;sk&#21644;skb-&gt;destructor&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453493907695" ID="ID_1201104195" MODIFIED="1453493941777" TEXT="netfilter pre routing"/>
<node CREATED="1453493964733" FOLDED="true" ID="ID_1519936519" MODIFIED="1458241076294" TEXT="ip_rcv_finish">
<node CREATED="1453494913391" ID="ID_1723636347" MODIFIED="1453495094588">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip_route_input_noref&#65292;&#20026;skb&#26597;&#25214;&#36335;&#30001;&#65292;&#20063;&#21363;&#21021;&#22987;&#21270;skb-&gt;dst&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453494985774" ID="ID_1375728534" MODIFIED="1453494997061" TEXT="ip_rcv_options&#x5904;&#x7406;IP&#x5934;&#x90e8;&#x4e2d;&#x7684;&#x9009;&#x9879;"/>
<node CREATED="1453495018785" ID="ID_1257408303" MODIFIED="1453495342156">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dst_input(skb)&#23558;&#21253;&#25512;&#36865;&#21040;&#19979;&#19968;&#38454;&#27573;&#36827;&#34892;&#22788;&#29702;
    </p>
    <p>
      
    </p>
    <p>
      &#21462;&#20915;&#20110;&#21253;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#26159;&#21457;&#36865;&#32473;local host&#30340;&#36824;&#26159;&#34987;&#36335;&#30001;&#36716;&#21457;&#30340;&#65292;
    </p>
    <p>
      &#19979;&#19968;&#38454;&#27573;&#30340;&#22788;&#29702;&#21487;&#33021;&#26159; ip_local_deliver &#25110;&#32773; ip_forward&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453433166118" ID="ID_209002255" MODIFIED="1456213191073" TEXT="local in">
<node CREATED="1453512663615" FOLDED="true" ID="ID_346186534" MODIFIED="1458241078438" TEXT="ip_local_deliver">
<node CREATED="1453512730029" ID="ID_1950403240" MODIFIED="1453512957801">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19982;&#36716;&#21457;&#21253;&#19981;&#21516;&#65292;&#25237;&#36882;&#21040;&#26412;&#22320;&#19978;&#23618;L4&#21327;&#35758;&#30340;IP&#21253;&#24517;&#39035;&#26159;&#37325;&#32452;&#22909;&#20102;&#30340;&#21253;&#65292;&#36825;&#26159;IP&#23618;&#25552;&#20379;&#32473;L4&#23618;&#30340;&#22522;&#26412;&#26381;&#21153;&#12290;
    </p>
    <p>
      &#37325;&#32452;&#20998;&#29255;&#21253;&#26159;&#36890;&#36807;&#20989;&#25968;ip_defrag&#25191;&#34892;&#30340;&#65292;&#24403;&#25152;&#26377;&#20998;&#29255;&#21040;&#36798;&#21518;&#36825;&#20010;&#20989;&#25968;&#36820;&#22238;&#37325;&#32452;&#22909;&#20102;&#30340;skb&#12290;&#32780;&#22914;&#26524;&#36824;
    </p>
    <p>
      &#26377;&#20998;&#29255;&#27809;&#26377;&#21040;&#36798;&#30340;&#35805;&#36825;&#20010;&#20989;&#25968;&#36820;&#22238;&#31354;&#25351;&#38024;&#65292;&#25972;&#20010;&#21253;&#22788;&#29702;&#27969;&#31243;&#23601;&#27492;&#25130;&#27490;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453493907695" ID="ID_940069697" MODIFIED="1453512711091" TEXT="netfilter local in"/>
<node CREATED="1453512663615" ID="ID_1059214067" MODIFIED="1453512690172" TEXT="ip_local_deliver_finish"/>
</node>
<node CREATED="1453433153463" ID="ID_1320426407" MODIFIED="1456213193506" TEXT="forward">
<node CREATED="1453495864874" FOLDED="true" ID="ID_1436628535" MODIFIED="1458241092362" TEXT="ip_forward">
<node CREATED="1453508629091" ID="ID_442007102" MODIFIED="1453508654132">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_process_forward_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1453496898238" FOLDED="true" ID="ID_716459340" MODIFIED="1453502294220">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_warn_if_lro
    </p>
    <p>
      &#25298;&#32477;&#36716;&#21457;LRO&#21512;&#24182;&#30340;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1453496962454" ID="ID_865349088" MODIFIED="1453497298899">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LRO&#65292;GRO&#20043;&#31867;&#30340;&#24615;&#33021;&#20248;&#21270;&#25216;&#26415;&#20250;&#22312;&#21253;&#25237;&#36882;&#21040;IP&#21327;&#35758;&#26632;&#20043;&#21069;&#23558;&#22810;&#20010;&#21253;&#21512;&#24182;&#25104;&#19968;&#20010;&#22823;&#30340;skb&#65292;&#36825;&#20250;&#38477;&#20302;CPU&#35201;&#22788;&#29702;&#30340;&#21253;&#30340;&#25968;&#37327;&#65292;&#22240;&#27492;&#20250;&#25552;&#39640;&#24615;&#33021;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#33324;&#26469;&#35828;&#36825;&#26679;&#30340;&#20248;&#21270;&#25216;&#26415;&#24212;&#35813;&#20165;&#20165;&#38024;&#23545;&#21457;&#36865;&#32473;local host&#30340;&#21253;&#65292;&#32780;&#19981;&#26159;&#38656;&#35201;&#36335;&#30001;&#36716;&#21457;&#30340;&#21253;&#12290;&#22240;&#20026;&#36335;&#30001;&#36716;&#21457;&#19968;&#20010;&#22823;&#30340;skb&#38656;&#35201;&#37325;&#26032;&#20998;&#29255;&#65292;&#36825;&#20250;&#21152;&#37325;CPU&#36127;&#25285;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453497536064" ID="ID_1682540928" MODIFIED="1453498560924">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LRO&#65292;GRO&#20250;&#23558;&#21512;&#24182;&#30340;&#21253;&#29992;skb-&gt;prev&#65292;skb-&gt;next&#20018;&#32852;&#36215;&#26469;&#12290;&#28982;&#21518;&#29992;skb_shinfo(skb)-&gt;gso_type&#25551;&#36848;&#21512;&#24182;&#21253;&#30340;&#31867;&#22411;&#65292;&#27604;&#22914;TCP&#25110;UDP&#65292;&#20877;&#29992;skb_shinfo(skb)-&gt;gso_size&#25551;&#36848;&#34987;&#21512;&#24182;&#21253;&#30340;&#22823;&#23567;&#65292;&#27604;&#22914;1514&#12290;
    </p>
    <p>
      
    </p>
    <p>
      LRO&#26159;&#32769;&#19968;&#20195;&#30340;&#25216;&#26415;&#65292;GRO&#26159;&#26032;&#19968;&#20195;&#30340;&#25216;&#26415;&#65292;&#23427;&#20204;&#30340;&#21306;&#21035;&#26159;&#65306;
    </p>
    <p>
      LRO&#21482;&#20250;&#35774;&#32622;skb_shinfo(skb)-&gt;gso_type&#32780;&#19981;&#20250;&#35774;&#32622;skb_shinfo(skb)-&gt;gso_size&#65292;&#32780;GRO&#20004;&#32773;&#37117;&#20250;&#35774;&#32622;&#12290;&#22240;&#20026;LRO&#27809;&#26377;&#35774;&#32622;gso_size&#65292;&#36825;&#23601;&#23548;&#33268;&#25903;&#25345;S/G&#21151;&#33021;&#30340;&#35774;&#22791;&#26080;&#27861;&#22312;&#30828;&#20214;&#19978;offloading&#20998;&#27573;(segment)&#65292;&#21363;&#20351;&#26159;&#36719;&#20214;&#30340;GSO&#20063;&#26080;&#27861;&#24110;&#21161;&#20998;&#27573;&#65292;&#22240;&#20026;&#23427;&#19981;&#30693;&#36947;&#35201;&#25226;&#36825;&#20010;&#22823;&#21253;&#20998;&#25104;&#22810;&#23567;&#30340;&#27573;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20026;&#20160;&#20040;&#35774;&#32622;gso_size&#36825;&#20040;&#37325;&#35201;&#32780;&#19981;&#33021;&#31616;&#21333;&#30340;&#26681;&#25454;MTU&#20998;&#27573;&#65311;
    </p>
    <p>
      &#36825;&#28041;&#21450;&#21040;L4&#21327;&#35758;&#30340;2&#31181;&#35774;&#35745;&#65292;UDP&#26159;&#26080;&#36830;&#25509;&#26377;&#36793;&#30028;&#30340;&#65292;TCP&#26159;&#26377;&#36830;&#25509;&#38754;&#21521;&#27969;&#30340;&#12290; &#36825;&#20063;&#23601;&#26159;&#35828;2&#20010;UDP&#21253;&#20043;&#38388;&#26377;&#28165;&#26970;&#30340;&#30028;&#38480;&#65292;&#23601;&#26159;&#21457;&#36865;&#28304;&#21457;&#36865;UDP&#26102;&#30340;&#26679;&#23376;&#65292;&#20013;&#38388;&#30340;&#35774;&#22791;&#19981;&#33021;&#25171;&#30772;&#36825;&#20010;&#30028;&#38480;&#65292;&#26082;&#19981;&#33021;&#21512;&#24182;2&#20010;UDP&#21253;&#65292;&#20063;&#19981;&#33021;&#25226;&#19968;&#37096;&#20998;&#20869;&#23481;&#20174;&#19968;&#20010;&#21253;&#31227;&#21040;&#21478;&#19968;&#20010;&#21253;&#12290;&#22914;&#26524;&#20570;LRO&#26102;&#19981;&#35760;&#24405;gso_size&#21017;&#22312;&#20570;GSO&#25110;S/G&#26102;&#23601;&#26080;&#27861;&#20445;&#25345;&#21407;&#26469;&#30340;&#36793;&#30028;&#65292;&#26681;&#25454;MTU&#20998;&#27573;&#20063;&#20250;&#25171;&#20081;&#21407;&#26469;&#30340;&#36793;&#30028;&#12290;&#24403;&#28982;TCP&#23601;&#27809;&#26377;&#36825;&#26679;&#30340;&#38480;&#21046;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453509851717" ID="ID_1959947196" MODIFIED="1453509852903" TEXT="xfrm4_policy_check"/>
<node CREATED="1453508710603" FOLDED="true" ID="ID_961456167" MODIFIED="1458241088375" TEXT="router alert&#x9009;&#x9879;&#x7684;&#x5904;&#x7406;">
<node CREATED="1453508725130" ID="ID_1211155643" MODIFIED="1453509048330" TEXT="router alert&#x9009;&#x9879;&#x662f;&#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x5668;&#x90fd;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x9009;&#x9879;&#xff0c;&#x5b83;&#x7684;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6ce8;&#x518c;&#x5728;&#x5168;&#x5c40;&#x94fe;&#x8868;ip_ra_chain&#x4e2d;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x4e9b;&#x8bbe;&#x7f6e;&#x4e86;IP_ROUTER_ALERT&#x6807;&#x8bc6;&#x7684;raw socket&#x3002;ip_call_ra_chain&#x6700;&#x540e;&#x8c03;&#x7528;raw_rcv&#xff0c;&#x8fdb;&#x5165;socket&#x63a5;&#x6536;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;"/>
</node>
<node CREATED="1453509466525" ID="ID_1052267383" MODIFIED="1453509715722">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21482;&#22788;&#29702;skb-&gt;pkt_type == PACKET_HOST&#30340;&#21253;&#65292;
    </p>
    <p>
      &#23545;&#20110;PACKET_BROADCAST / PACKET_MULTICAST&#30340;&#21253;&#65292;
    </p>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#21518;skb-&gt;dst-&gt;input&#24050;&#34987;&#35774;&#32622;&#20026;ip_mr_input&#25509;&#25910;&#22788;&#29702;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453509750877" ID="ID_1217206555" MODIFIED="1453509826350" TEXT="&#x56e0;&#x4e3a;&#x8981;&#x4fee;&#x6539;TTL&#xff0c;&#x6240;&#x4ee5;&#x6e05;&#x9664;&#x63a5;&#x6536;&#x65f6;&#x8ba1;&#x7b97;&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x53d1;&#x9001;&#x6d41;&#x7a0b;&#x7684;&#x6700;&#x540e;&#x518d;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;"/>
<node CREATED="1453509884929" ID="ID_569450130" MODIFIED="1453510084631" TEXT="TTL&#x5982;&#x679c;&#x5c0f;&#x4e8e;1&#x5219;&#x4e22;&#x5f03;&#x5305;&#xff0c;&#x5e76;&#x5411;&#x6e90;&#x53d1;&#x9001;ICMP&#x6d88;&#x606f;&#x544a;&#x77e5;"/>
<node CREATED="1453509873545" ID="ID_1778743764" MODIFIED="1453509874516" TEXT="xfrm4_route_forward"/>
<node CREATED="1453509909296" ID="ID_27285976" MODIFIED="1453510387818" TEXT="&#x5982;&#x679c;&#x5e26;&#x6709;&#x4e25;&#x683c;&#x8def;&#x7531;&#x9009;&#x9879;&#xff0c;&#x4e14;&#x8def;&#x7531;&#x9009;&#x4e2d;&#x7684;&#x4e0b;&#x4e00;&#x8df3;&#x4e0d;&#x7b49;&#x4e8e;&#x9009;&#x9879;&#x4e2d;&#x6307;&#x5b9a;&#x7684;&#x4e0b;&#x4e00;&#x8df3;&#xff0c;&#x90a3;&#x4e48;&#x4e5f;&#x8981;&#x4e22;&#x5f03;&#x5305;&#xff0c;&#xa;&#x540c;&#x65f6;&#x5411;&#x6e90;&#x53d1;&#x9001;ICMP&#x6d88;&#x606f;&#x544a;&#x77e5;"/>
<node CREATED="1453510466364" ID="ID_1088014856" MODIFIED="1453510542002" TEXT="&#x5982;&#x679c;&#x5305;&#x957f;&#x8d85;&#x8fc7;&#x4e86;&#x51fa;&#x53e3;&#x7684;MTU&#xff0c;&#x5e76;&#x4e14;&#x4e0d;&#x5141;&#x8bb8;&#x5206;&#x7247;&#xff0c;&#x90a3;&#x4e48;&#x9700;&#x8981;&#x4e22;&#x5f03;&#x5305;&#x5e76;&#x5411;&#x6e90;&#x53d1;&#x9001;ICMP&#x6d88;&#x606f;"/>
<node CREATED="1453510827243" ID="ID_1535301314" MODIFIED="1453510842763" TEXT="&#x9012;&#x51cf;TTL&#x5e76;&#x66f4;&#x65b0;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1453511158441" ID="ID_311756110" MODIFIED="1453511590846">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#20837;&#21475;&#31561;&#20110;&#20986;&#21475;&#26102;&#35828;&#26126;&#24403;&#21069;&#21253;&#30340;&#36335;&#30001;&#36335;&#24452;&#24182;&#19981;&#26159;&#26368;&#20339;&#36335;&#24452;&#65292;&#21253;&#23454;&#38469;&#19978;&#21487;&#20197;&#34987;&#30452;&#25509;&#21457;&#36865;&#32473;&#19979;&#19968;&#36339;&#12290;
    </p>
    <p>
      &#25152;&#20197;&#27492;&#26102;&#32473;&#28304;&#21457;&#36865;&#19968;&#20010;&#37325;&#23450;&#21521;&#30340;ICMP&#21253;&#65292;&#20197;&#35753;&#20854;&#19979;&#27425;&#21033;&#29992;&#26368;&#20339;&#36335;&#30001;&#36335;&#24452;&#21457;&#21253;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#28982;&#36825;&#20040;&#20570;&#30340;&#21069;&#25552;&#26159;&#65306;
    </p>
    <p>
      IP&#21253;&#19981;&#24102;&#20005;&#26684;&#36335;&#30001;&#36873;&#39033;&#12290;&#22240;&#20026;IP&#21253;&#24102;&#20102;&#20005;&#26684;&#36335;&#30001;&#36873;&#39033;&#34920;&#31034;&#28304;&#30830;&#20999;&#30340;&#30693;&#36947;&#24590;&#20040;&#36335;&#30001;&#65292;&#20013;&#38388;&#30340;&#36335;&#30001;&#22120;&#21482;&#33021;&#30456;&#20449;&#23427;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#65292;&#36825;&#37324;&#21457;&#36865;ICMP&#28040;&#24687;&#21518;&#36824;&#32487;&#32493;&#36335;&#30001;&#36716;&#21457;&#21253;&#65292;&#32780;&#19981;&#26159;&#20002;&#24323;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453511650668" ID="ID_1372780657" MODIFIED="1453511683886" TEXT="&#x7528;IP&#x5934;&#x90e8;&#x7684;TOS&#x5b57;&#x6bb5;&#x521d;&#x59cb;&#x5316;skb-&gt;priority&#x3002;"/>
</node>
</node>
<node CREATED="1453493907695" ID="ID_1237129445" MODIFIED="1453495915615" TEXT="netfilter forwarding"/>
<node CREATED="1453495884300" FOLDED="true" ID="ID_466975305" MODIFIED="1458241094618" TEXT="ip_forward_finish">
<node CREATED="1453512049956" ID="ID_184119553" MODIFIED="1453512062489" TEXT="ip_forward_options&#x5904;&#x7406;IP&#x9009;&#x9879;"/>
<node CREATED="1453512211069" ID="ID_292078381" MODIFIED="1453512380040">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21253;&#38271;&#24182;&#27809;&#26377;&#36229;&#20986;&#20986;&#21475;&#30340;MTU&#65292;&#37027;&#20040;&#30452;&#25509;&#35843;&#29992;dst_output&#36827;&#34892;&#19979;&#19968;&#27493;&#22788;&#29702;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#36229;&#20986;&#20102;&#24182;&#19988;&#21253;&#26159;GRO&#21512;&#24182;&#21518;&#30340;&#21253;&#65292;&#37027;&#20040;&#23601;&#23545;&#21512;&#24182;&#38142;skb-&gt;prev&#65292;skb-&gt;next&#20013;&#30340;&#27599;&#19968;&#20010;&#21253;&#35843;&#29992;dst_output&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453433174476" FOLDED="true" ID="ID_1596370435" MODIFIED="1458250322225" TEXT="local out">
<node CREATED="1453615833492" FOLDED="true" ID="ID_1367851460" MODIFIED="1458241123183" TEXT="&#x5185;&#x6838;socket&#x6846;&#x67b6;">
<node CREATED="1453615850588" ID="ID_1996846995" MODIFIED="1453615896960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/kernel_socket_framework.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453620570594" ID="ID_1577773907" MODIFIED="1453620614457">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_process_localout_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453433157181" FOLDED="true" ID="ID_1122184409" MODIFIED="1458241017034" TEXT="output">
<node CREATED="1453621903324" FOLDED="true" ID="ID_1737589177" MODIFIED="1458241014826" TEXT="ip_output">
<node CREATED="1453621958431" ID="ID_1073502584" MODIFIED="1453621995543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;dev = skb_dst(skb)-&gt;dev
    </p>
    <p>
      &#21363;&#23558;&#20986;&#25509;&#21475;&#35774;&#32622;&#20026;&#36335;&#30001;&#36873;&#25321;&#30340;&#20986;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453493907695" ID="ID_701341421" MODIFIED="1453621920383" TEXT="netfilter post routing"/>
<node CREATED="1453621933743" ID="ID_348712526" MODIFIED="1453621934381" TEXT="ip_finish_output">
<node CREATED="1453622025875" ID="ID_1003859688" MODIFIED="1453622043133" TEXT="&#x5982;&#x679c;&#x9700;&#x8981;&#x5206;&#x7247;&#x5219;&#x5148;&#x8c03;&#x7528;ip_fragment&#x8fdb;&#x884c;&#x5206;&#x7247;"/>
<node CREATED="1453622054167" ID="ID_1869411047" MODIFIED="1453622055340" TEXT="ip_finish_output2">
<node CREATED="1453622110235" ID="ID_1983732268" MODIFIED="1453622160967">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      neigh = dst_get_neighbour_noref(dst)
    </p>
    <p>
      &#20174;&#36335;&#30001;&#20013;&#21462;&#24471;&#37051;&#23621;&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453622172932" ID="ID_649052985" MODIFIED="1453622258723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      neigh_output
    </p>
    <p>
      &#35843;&#29992;&#37051;&#23621;&#31995;&#32479;&#30340;&#21457;&#36865;&#20989;&#25968;&#21457;&#36865;IP&#21253;
    </p>
    <p>
      &#33267;&#27492;&#65292;IP&#21253;&#23601;&#31163;&#24320;IP&#23618;&#32780;&#36827;&#20837;L2&#20102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1306829726042" FOLDED="true" ID="ID_415314292" MODIFIED="1457943406901">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19982;&#20854;&#23427;&#27169;&#22359;&#30340;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306830430969" FOLDED="true" ID="ID_662146393" MODIFIED="1359856749172" TEXT="&#x4e0e;netlink&#x7684;&#x63a5;&#x53e3;">
<node CREATED="1306830458168" FOLDED="true" ID="ID_847077534" MODIFIED="1359856749172" TEXT="inet_rtm_newaddr">
<node CREATED="1306830785471" ID="ID_1709191446" MODIFIED="1306830788949" TEXT="__inet_insert_ifa"/>
</node>
<node CREATED="1306830502422" ID="ID_219964343" MODIFIED="1306830504352" TEXT="inet_rtm_deladdr"/>
</node>
<node CREATED="1306830911709" FOLDED="true" ID="ID_195592972" MODIFIED="1359856749172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19982;&#36890;&#30693;&#38142;&#30340;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306830937980" FOLDED="true" ID="ID_1962362739" MODIFIED="1359856749172" TEXT="inetdev_event">
<node CREATED="1306833820085" FOLDED="true" ID="ID_104566471" MODIFIED="1359856749172" TEXT="event = NETDEV_REGISTER">
<node CREATED="1306833881682" FOLDED="true" ID="ID_676118787" MODIFIED="1359856749172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1, &#21021;&#22987;&#21270;struct net_device&#30340;ip_ptr&#20026;
    </p>
    <p>
      struct in_device, &#21363;&#35843;&#29992;inetdev_init
    </p>
  </body>
</html></richcontent>
<node CREATED="1306834525395" ID="ID_95226329" MODIFIED="1306834533464" TEXT="1, &#x5206;&#x914d;&#x5185;&#x5b58;"/>
<node CREATED="1306834535011" ID="ID_1942578918" MODIFIED="1306834572081" TEXT="2, &#x5c06;dev_net(dev)-&gt;ipv4.devconf_dflt&#x62f7;&#x8d1d;&#x81f3;in_dev-&gt;cnf"/>
<node CREATED="1306834564754" ID="ID_261433866" MODIFIED="1306834606158" TEXT="3, in_dev-&gt;cnf.sysctl = NULL"/>
<node CREATED="1306834621953" ID="ID_1535560110" MODIFIED="1306834640240" TEXT="4, &#x5c06;in_dev-&gt;dev&#x5173;&#x8054;&#x81f3;struct net_device"/>
<node CREATED="1306834654127" ID="ID_1493396993" MODIFIED="1306834664894" TEXT="5, &#x4e3a;in_dev-&gt;arp_parms&#x5206;&#x914d;&#x5185;&#x5b58;"/>
<node CREATED="1306834812540" ID="ID_1269561709" MODIFIED="1306834900843" TEXT="6, &#x5982;&#x679c;&#x7cfb;&#x7edf;&#x7684;&#x8f6c;&#x53d1;&#x529f;&#x80fd;&#x6253;&#x5f00;&#x4e86;,&#x5219;&#x7981;&#x6b62;&#x5728;&#x6b64;&#x63a5;&#x53e3;&#x4e0a;&#x63a5;&#x6536;&#x8d85;&#x957f;&#x5305;,&#x4ee5;&#x907f;&#x514d;&#x8f6c;&#x53d1;&#x65f6;&#x7684;&#x5206;&#x7247;"/>
<node CREATED="1306834980168" ID="ID_899270412" MODIFIED="1306834983257" TEXT="7, devinet_sysctl_register(in_dev)"/>
<node CREATED="1306834996264" ID="ID_1855379925" MODIFIED="1306834998706" TEXT="8, ip_mc_init_dev(in_dev)"/>
<node CREATED="1306835009319" ID="ID_1953080733" MODIFIED="1306835070641" TEXT="9, &#x521d;&#x59cb;&#x5316;struct net_device&#x7684;ip_ptr"/>
</node>
</node>
</node>
</node>
<node CREATED="1306831331282" FOLDED="true" ID="ID_784354171" MODIFIED="1359856749172" TEXT="&#x4e0e;ioctl&#x7684;&#x63a5;&#x53e3;">
<node CREATED="1306831363761" FOLDED="true" ID="ID_1228764530" MODIFIED="1359856749172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      inet_ioctl
    </p>
    <p>
      net/ipv4/af_inet.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1306831415519" FOLDED="true" ID="ID_904602018" MODIFIED="1359856749172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      devinet_ioctl
    </p>
    <p>
      net/ipv4/devinet.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1306831679161" ID="ID_156995715" MODIFIED="1306831683396" TEXT="1, xxx"/>
<node CREATED="1306831688425" FOLDED="true" ID="ID_216933178" MODIFIED="1359856749172" TEXT="2, &#x5904;&#x7406;cmd">
<node CREATED="1306831704344" FOLDED="true" ID="ID_886791919" MODIFIED="1359856749172" TEXT="cmd = SIOCSIFADDR">
<node CREATED="1306831821733" FOLDED="true" ID="ID_1705946661" MODIFIED="1359856749172" TEXT="inet_set_ifa">
<node CREATED="1306831909139" FOLDED="true" ID="ID_1785831089" MODIFIED="1359856749172" TEXT="inet_insert_ifa">
<node CREATED="1306831925843" ID="ID_1102240792" LINK="#ID_1709191446" MODIFIED="1306833666271" TEXT="__inet_insert_ifa"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1333011508646" ID="ID_80008492" MODIFIED="1458251521395" TEXT="&#x5b50;&#x6a21;&#x5757;">
<node CREATED="1360639918661" FOLDED="true" ID="ID_1700240668" MODIFIED="1465419204237" TEXT="route">
<node CREATED="1360668903575" FOLDED="true" ID="ID_932327713" MODIFIED="1458696944278" TEXT="&#x91cd;&#x8981;&#x6982;&#x5ff5;">
<node CREATED="1453676621169" FOLDED="true" ID="ID_410103441" MODIFIED="1458251557561" TEXT="&#x8def;&#x7531;&#x7684;&#x4efb;&#x52a1;">
<node CREATED="1453676643765" ID="ID_769657194" MODIFIED="1453677057728">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#22120;&#30340;&#22522;&#26412;&#20219;&#21153;&#26159;&#35782;&#21035;IP&#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#26159;&#30446;&#30340;&#22320;&#22336;&#26412;&#20027;&#26426;&#65292;&#37027;&#20040;IP&#21253;&#23601;&#24212;&#35813;&#25237;&#36882;&#21040;&#32593;&#32476;&#21327;&#35758;&#26632;IP&#23618;&#30340;&#26356;&#19978;&#23618;&#65292;&#27604;&#22914;&#36827;&#20837;socket&#25509;&#25910;&#38431;&#21015;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#26159;&#20854;&#23427;&#20027;&#26426;&#65292;&#37027;&#20040;&#23601;&#24212;&#35813;&#20026;IP&#21253;&#36873;&#25321;&#19968;&#20010;&#20986;&#25509;&#21475;&#21644;&#19968;&#20010;&#19979;&#19968;&#36339;&#65292;&#23558;IP&#21253;&#30340;&#30446;&#30340;MAC&#22320;&#22336;&#25913;&#20026;&#19979;&#19968;&#36339;&#30340;MAC&#22320;&#22336;&#65292;&#28982;&#21518;&#23558;&#21253;&#20174;&#36335;&#30001;&#20986;&#25509;&#21475;&#21457;&#36865;&#20986;&#21435;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453677400892" FOLDED="true" ID="ID_1130967352" MODIFIED="1458251556616" TEXT="&#x7528;&#x4f8b;">
<node CREATED="1453677427512" ID="ID_849505763" MODIFIED="1453687582641" TEXT="&#x5982;&#x4f55;&#x5904;&#x7406;&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x5e7f;&#x64ad;&#x7684;&#x5305;"/>
<node CREATED="1453677427512" ID="ID_140543620" MODIFIED="1453687585643" TEXT="&#x5982;&#x4f55;&#x5904;&#x7406;&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x7ec4;&#x64ad;&#x7684;&#x5305;"/>
<node CREATED="1453677427512" FOLDED="true" ID="ID_1265743103" MODIFIED="1453689184662" TEXT="&#x5982;&#x4f55;&#x5904;&#x7406;&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x5355;&#x64ad;&#x7684;&#x5305;">
<node CREATED="1453687667210" FOLDED="true" ID="ID_1391935350" MODIFIED="1453687955063" TEXT="&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x672c;&#x673a;">
<node CREATED="1453687706114" ID="ID_331100757" MODIFIED="1453687745451" TEXT="&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x672c;&#x673a;&#x914d;&#x7f6e;&#x7684;IP&#x5730;&#x5740;&#x4f46;&#x4e0d;&#x662f;&#x63a5;&#x6536;&#x63a5;&#x53e3;&#x6240;&#x914d;&#x7f6e;&#x7684;&#x5730;&#x5740;"/>
<node CREATED="1453687706114" ID="ID_45508994" MODIFIED="1453687828573" TEXT="&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x672c;&#x673a;&#x914d;&#x7f6e;&#x7684;IP&#x5730;&#x5740;&#x5e76;&#x4e14;&#x662f;&#x63a5;&#x6536;&#x63a5;&#x53e3;&#x6240;&#x914d;&#x7f6e;&#x7684;&#x5730;&#x5740;"/>
<node CREATED="1453687861243" ID="ID_1940910237" MODIFIED="1453687879387" TEXT="&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x73af;&#x56de;&#x5730;&#x5740;127.0.0.1"/>
</node>
<node CREATED="1453687963314" FOLDED="true" ID="ID_1901634046" MODIFIED="1453688424300" TEXT="&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x76f4;&#x8fde;&#x7f51;&#x6bb5;&#x5185;&#x7684;&#x5730;&#x5740;">
<node CREATED="1453688066993" ID="ID_1329300425" MODIFIED="1453688105094" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x5728;&#x540c;&#x4e00;&#x7f51;&#x6bb5;">
<node CREATED="1453688066993" ID="ID_1628401794" MODIFIED="1453688300301" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x5728;&#x540c;&#x4e00;&#x63a5;&#x53e3;&#x4e0a;"/>
<node CREATED="1453688066993" ID="ID_175863453" MODIFIED="1453688310594" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x5728;&#x4e0d;&#x540c;&#x63a5;&#x53e3;&#x4e0a;"/>
</node>
<node CREATED="1453688066993" ID="ID_1683696618" MODIFIED="1453688333599" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e0d;&#x5728;&#x540c;&#x4e00;&#x7f51;&#x6bb5;">
<node CREATED="1453688066993" ID="ID_872408754" MODIFIED="1453688300301" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x5728;&#x540c;&#x4e00;&#x63a5;&#x53e3;&#x4e0a;"/>
<node CREATED="1453688066993" ID="ID_548859829" MODIFIED="1453688310594" TEXT="&#x6e90;&#x5730;&#x5740;&#x4e0e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x5728;&#x4e0d;&#x540c;&#x63a5;&#x53e3;&#x4e0a;"/>
</node>
</node>
<node CREATED="1453687963314" ID="ID_1057523301" MODIFIED="1453688720865" TEXT="&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e3a;&#x8fdc;&#x7a0b;&#x5b50;&#x7f51;&#x5185;&#x7684;&#x5730;&#x5740;">
<node CREATED="1453688731263" ID="ID_1089533656" MODIFIED="1453688744224" TEXT="&#x6ca1;&#x6709;&#x8def;&#x7531;&#x5230;&#x8fbe;&#x8fdc;&#x7a0b;&#x5b50;&#x7f51;"/>
<node CREATED="1453688447184" ID="ID_1213664141" MODIFIED="1453688459592" TEXT="&#x6709;&#x4e00;&#x6761;&#x8def;&#x7531;&#x5230;&#x8fbe;&#x8fdc;&#x7a0b;&#x5b50;&#x7f51;"/>
<node CREATED="1453688447184" ID="ID_1599967209" MODIFIED="1453688469473" TEXT="&#x6709;&#x591a;&#x6761;&#x8def;&#x7531;&#x5230;&#x8fbe;&#x8fdc;&#x7a0b;&#x5b50;&#x7f51;"/>
</node>
</node>
<node CREATED="1453689186389" ID="ID_1761355527" MODIFIED="1453689202400" TEXT="&#x53cd;&#x5411;&#x8def;&#x5f84;&#x8fc7;&#x6ee4;RPF">
<node CREATED="1453689204890" ID="ID_1195409474" MODIFIED="1453689242258" TEXT="&#x5230;&#x6e90;&#x7684;&#x8def;&#x7531;&#x63a5;&#x53e3;&#x5e76;&#x4e0d;&#x7b49;&#x4e8e;&#x5305;&#x7684;&#x63a5;&#x6536;&#x53e3;"/>
<node CREATED="1453689318404" ID="ID_424534379" MODIFIED="1453689356634" TEXT="&#x975e;&#x5bf9;&#x79f0;&#x8def;&#x7531;&#xff1a;&#x4ece;A&#x5230;B&#x7684;&#x8def;&#x7531;&#x8def;&#x5f84;&#x5e76;&#x4e0d;&#x7b49;&#x4e8e;&#x4ece;B&#x5230;A&#x7684;&#x8def;&#x5f84;"/>
</node>
<node CREATED="1453689281355" ID="ID_1079767636" MODIFIED="1453689290011" TEXT="NAT&#x5bf9;&#x8def;&#x7531;&#x7684;&#x5f71;&#x54cd;"/>
<node CREATED="1453688840021" FOLDED="true" ID="ID_716694174" MODIFIED="1453689138238" TEXT="&#x7ba1;&#x7406;&#x914d;&#x7f6e;">
<node CREATED="1453688869660" ID="ID_749375445" MODIFIED="1453688889333" TEXT="&#x5982;&#x4f55;&#x5168;&#x5c40;&#x5730;&#x5f00;&#x542f;&#x6216;&#x5173;&#x95ed;&#x8def;&#x7531;"/>
<node CREATED="1453688892263" ID="ID_418457191" MODIFIED="1453688916443" TEXT="&#x5982;&#x4f55;&#x7981;&#x6b62;&#x8def;&#x7531;&#x4ece;&#x67d0;&#x4e2a;&#x63a5;&#x53e3;&#x8fdb;&#x5165;&#x7684;&#x5305;"/>
<node CREATED="1453688892263" ID="ID_1458146646" MODIFIED="1453688954317" TEXT="&#x5982;&#x4f55;&#x7981;&#x6b62;&#x5c06;&#x5305;&#x8def;&#x7531;&#x5230;&#x67d0;&#x4e2a;&#x51fa;&#x63a5;&#x53e3;"/>
<node CREATED="1453689094261" ID="ID_1762440015" MODIFIED="1453689107054" TEXT="&#x591a;&#x6761;&#x8def;&#x7531;&#x4e4b;&#x95f4;&#x7684;&#x4f18;&#x5148;&#x7ea7;"/>
</node>
<node CREATED="1453689021152" FOLDED="true" ID="ID_1056033510" MODIFIED="1453689091370" TEXT="&#x6027;&#x80fd;">
<node CREATED="1453689025701" ID="ID_1307307340" MODIFIED="1453689075701" TEXT="&#x5f53;&#x6709;&#x5927;&#x91cf;&#x8def;&#x7531;&#x6761;&#x76ee;&#x65f6;&#xff0c;&#x5982;&#x4f55;&#x52a0;&#x901f;&#x8def;&#x7531;"/>
</node>
</node>
</node>
<node CREATED="1453689640236" FOLDED="true" ID="ID_4357729" MODIFIED="1458251559994" TEXT="&#x8def;&#x7531;&#x7684;&#x57fa;&#x672c;&#x5143;&#x7d20;">
<node CREATED="1453689678363" ID="ID_1997119138" MODIFIED="1453689691227" TEXT="&#x76ee;&#x7684;&#x5b50;&#x7f51;"/>
<node CREATED="1453689693708" ID="ID_874944227" MODIFIED="1453689698487" TEXT="&#x5b50;&#x7f51;&#x63a9;&#x7801;"/>
<node CREATED="1453689704139" ID="ID_849664864" MODIFIED="1453689707457" TEXT="&#x4e0b;&#x4e00;&#x8df3;"/>
<node CREATED="1453689710221" ID="ID_960571714" MODIFIED="1453689713550" TEXT="&#x51fa;&#x63a5;&#x53e3;"/>
<node CREATED="1453689824384" FOLDED="true" ID="ID_882984795" MODIFIED="1453690041856" TEXT="metric">
<node CREATED="1453689860110" ID="ID_845136061" MODIFIED="1453689893567" TEXT="&#x8def;&#x7531;&#x8def;&#x5f84;&#x6700;&#x5927;&#x4f20;&#x8f93;&#x5355;&#x5143;&#xff1a;path MTU"/>
<node CREATED="1453689904916" ID="ID_826102635" MODIFIED="1453689911274" TEXT="TCP window"/>
<node CREATED="1453689919362" ID="ID_1108919553" MODIFIED="1453689927046" TEXT="TCP round trip"/>
<node CREATED="1453689936777" ID="ID_846506460" MODIFIED="1453689967780" TEXT="TCP round trip time variation"/>
<node CREATED="1453689983435" ID="ID_857807967" MODIFIED="1453689992059" TEXT="TCP slow start threshold"/>
<node CREATED="1453690000784" ID="ID_1394794128" MODIFIED="1453690006972" TEXT="TCP congestion window"/>
<node CREATED="1453690017633" ID="ID_371700056" MODIFIED="1453690020740" TEXT="TCP MSS"/>
<node CREATED="1453690031721" ID="ID_1552733524" MODIFIED="1453690038965" TEXT="TCP reordering"/>
</node>
<node CREATED="1453690296738" ID="ID_65858296" MODIFIED="1453690299682" TEXT="realm"/>
<node CREATED="1453690379699" ID="ID_1844933241" MODIFIED="1453690412815">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31169;&#26377;&#25110;&#20844;&#26377;&#22320;&#22336;
    </p>
    <p>
      private or public address
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453690327822" FOLDED="true" ID="ID_601441295" MODIFIED="1453690530869" TEXT="IP&#x5730;&#x5740;scope">
<node CREATED="1453690345995" ID="ID_1583108075" MODIFIED="1453690347994" TEXT="host"/>
<node CREATED="1453690354628" ID="ID_1537570311" MODIFIED="1453690355912" TEXT="link"/>
<node CREATED="1453690358085" ID="ID_1821184502" MODIFIED="1453690361705" TEXT="universe"/>
</node>
<node CREATED="1453690327822" FOLDED="true" ID="ID_315946818" MODIFIED="1453690532317" TEXT="&#x8def;&#x7531;scope">
<node CREATED="1453690345995" ID="ID_361212112" MODIFIED="1453690347994" TEXT="host"/>
<node CREATED="1453690354628" ID="ID_1985602194" MODIFIED="1453690355912" TEXT="link"/>
<node CREATED="1453690358085" ID="ID_663699870" MODIFIED="1453690361705" TEXT="universe"/>
</node>
<node CREATED="1453690763129" ID="ID_1090471741" MODIFIED="1453690780248" TEXT="&#x9ed8;&#x8ba4;&#x7f51;&#x5173;"/>
<node CREATED="1453690803099" FOLDED="true" ID="ID_876264960" MODIFIED="1453691360093" TEXT="&#x5b9a;&#x5411;&#x5e7f;&#x64ad;">
<node CREATED="1453691050502" ID="ID_1876103291" MODIFIED="1453691268612">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      subnet / prefix_len
    </p>
    <p>
      &#19968;&#20010;IP&#22320;&#22336;&#36890;&#24120;&#34987;&#21010;&#20998;&#20026;&#23376;&#32593;&#37096;&#20998;&#21644;&#20027;&#26426;&#37096;&#20998;&#65292;&#27604;&#22914;&#22320;&#22336;10.0.0.0/24&#65292;&#37027;&#20040;&#21069;&#38754;&#30340;24&#20301;&#23601;&#26159;&#23376;&#32593;&#37096;&#20998;&#65292;&#21518;&#38754;&#30340;8&#20301;&#23601;&#26159;&#20027;&#26426;&#37096;&#20998;&#12290;&#20027;&#26426;&#37096;&#20998;&#20840;0&#25110;&#20840;1&#32452;&#25104;&#30340;&#22320;&#22336;&#23601;&#26159;&#23376;&#32593;&#24191;&#25773;&#22320;&#22336;&#12290;&#27604;&#22914;10.0.0.0&#21644;10.0.0.255&#23601;&#26159;&#23376;&#32593;&#24191;&#25773;&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453691271675" ID="ID_1453164098" MODIFIED="1453691357076" TEXT="&#x5b50;&#x7f51;&#x5e7f;&#x64ad;&#x5730;&#x5740;&#x53ea;&#x6709;&#x5728;&#x6b64;&#x5b50;&#x7f51;&#x5185;&#x7684;&#x4e3b;&#x673a;&#x548c;&#x8def;&#x7531;&#x5668;&#x624d;&#x77e5;&#x9053;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x5b50;&#x7f51;&#x5e7f;&#x64ad;&#x5730;&#x5740;&#xff0c;&#x800c;&#x4e0d;&#x5728;&#x5176;&#x4e2d;&#x7684;&#x4e3b;&#x673a;&#x548c;&#x8def;&#x7531;&#x5668;&#x662f;&#x65e0;&#x6cd5;&#x77e5;&#x9053;&#x7684;&#x3002;"/>
</node>
<node CREATED="1453691374586" FOLDED="true" ID="ID_1939095188" MODIFIED="1453705286140" TEXT="&#x4e3b;&#x5730;&#x5740;&#x4e0e;&#x8f85;&#x5730;&#x5740;">
<node CREATED="1453704720296" ID="ID_388827159" MODIFIED="1453705091111">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#19968;&#20010;&#25509;&#21475;&#19978;&#37197;&#32622;&#20102;&#22810;&#20010;&#22320;&#22336;&#26102;&#65292;&#21516;&#19968;&#20010;&#23376;&#32593;&#20869;&#31532;&#19968;&#20010;&#37197;&#32622;&#30340;&#22320;&#22336;&#26159;&#20027;&#22320;&#22336;&#65292;&#21518;&#32493;&#30340;&#26159;&#36741;&#22320;&#22336;&#12290;
    </p>
    <p>
      &#20294;&#26159;&#19981;&#21516;&#30340;&#23376;&#32593;&#26377;&#21508;&#33258;&#33258;&#24049;&#30340;&#20027;&#22320;&#22336;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27604;&#22914;&#19968;&#20010;&#25509;&#21475;&#19978;&#37197;&#32622;192.168.1.2/24&#65292;192.168.1.3/24,192.168.1.4/25&#26102;&#65292;192.168.1.2&#21644;192.168.1.4&#37117;&#26159;&#20027;&#22320;&#22336;&#65292;192.168.1.3&#26159;&#36741;&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453705207427" ID="ID_1399381922" MODIFIED="1453705227159" TEXT="&#x5220;&#x9664;&#x4e3b;&#x5730;&#x5740;&#x65f6;&#x8f85;&#x5730;&#x5740;&#x4e5f;&#x4f1a;&#x88ab;&#x5220;&#x9664;"/>
<node CREATED="1453705244159" ID="ID_1271823971" MODIFIED="1453705273328" TEXT="&#x5f53;&#x4e3b;&#x673a;&#x4e3a;&#x672c;&#x5730;&#x751f;&#x6210;&#x7684;&#x6d41;&#x91cf;&#x9009;&#x62e9;&#x6e90;&#x5730;&#x5740;&#x65f6;&#x53ea;&#x8003;&#x8651;&#x4e3b;&#x5730;&#x5740;"/>
</node>
</node>
<node CREATED="1360668919090" FOLDED="true" ID="ID_1639636995" MODIFIED="1458696937079" TEXT="&#x8def;&#x7531;&#x8868;">
<node CREATED="1360668925746" ID="ID_1273523727" MODIFIED="1360668930974" TEXT="&#x8def;&#x7531;&#x6761;&#x76ee;">
<node CREATED="1360668943558" ID="ID_878766651" MODIFIED="1360669234584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;&#36335;&#30001;&#26465;&#30446;&#20915;&#23450;&#20102;&#21435;&#24448;&#26576;&#20010;&#30446;&#30340;&#32593;&#27573;&#30340;&#19979;&#19968;&#36339;(nexthop)&#21450;&#20986;&#25509;&#21475;<br />&#19968;&#26465;&#20856;&#22411;&#30340;&#36335;&#30001;&#26465;&#30446;&#30001;&#20197;&#19979;&#21629;&#20196;&#28155;&#21152;:<br />ip route add <i><b>dst_network</b></i>&#160;via <i><b>next hop</b></i>&#160;dev <i><b>interface</b></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1360669242115" ID="ID_1854570323" MODIFIED="1360669257231" TEXT="&#x591a;&#x8def;&#x7531;&#x8868;">
<node CREATED="1360669261708" ID="ID_912474003" MODIFIED="1360678051649">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38656;&#35201;&#20351;&#29992;&#22810;&#24352;&#36335;&#30001;&#34920;&#30340;&#29702;&#30001; :<br />1, &#21435;&#24448;&#30456;&#21516;&#30340;&#30446;&#30340;&#32593;&#27573;&#26377;&#22810;&#26465;&#36335;&#24452;<br />2, &#20174;&#19981;&#21516;&#30340;&#36335;&#30001;&#21327;&#35758;&#23398;&#20064;&#21040;&#30456;&#21516;&#30340;&#36335;&#30001;&#20449;&#24687;<br />ip route add <i><b>network</b></i>&#160;via <i><b>next hop</b></i>&#160;dev <i><b>interface</b></i>&#160; table <i><b>route table</b></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1360669422754" ID="ID_1158157918" MODIFIED="1360669581876" TEXT="&#x6bcf;&#x5f20;&#x8def;&#x7531;&#x8868;&#x6709;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x6761;&#x76ee;,&#x6309;&#x7167;&#x6700;&#x957f;&#x5339;&#x914d;&#x7684;&#x539f;&#x5219;&#x67e5;&#x627e;&#x6b64;&#x8868;&#xa;&#x6bcf;&#x5f20;&#x8def;&#x7531;&#x8868;&#x6709;&#x4e00;&#x6761;&#x9ed8;&#x8ba4;&#x8def;&#x7531;,&#x5f53;&#x4e00;&#x4e2a;&#x5305;&#x7684;&#x76ee;&#x7684;&#x5730;&#x5740;&#x5339;&#x914d;&#x4e0d;&#x5230;&#xa;&#x6b64;&#x8def;&#x7531;&#x8868;&#x7684;&#x4efb;&#x4f55;&#x8def;&#x7531;&#x6761;&#x76ee;&#x65f6;,&#x4f7f;&#x7528;&#x6b64;&#x8868;&#x7684;&#x9ed8;&#x8ba4;&#x8def;&#x7531;&#x6761;&#x76ee;"/>
</node>
<node CREATED="1453705573749" ID="ID_861000070" MODIFIED="1453705596263" TEXT="&#x7cfb;&#x7edf;&#x9ed8;&#x8ba4;&#x8def;&#x7531;&#x8868;">
<node CREATED="1453706080476" FOLDED="true" ID="ID_1638785818" MODIFIED="1457660561285" TEXT="local table">
<node CREATED="1453706171873" ID="ID_318694785" MODIFIED="1453706332517">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21040;&#26412;&#26426;&#30340;&#36335;&#30001;&#37117;&#23384;&#20648;&#22312;local table&#20013;&#65292;&#36825;&#21253;&#25324;&#20102;&#65306;
    </p>
    <p>
      &#26412;&#26426;&#37197;&#32622;&#30340;IP&#22320;&#22336;
    </p>
    <p>
      &#26412;&#26426;&#37197;&#32622;&#30340;IP&#22320;&#22336;&#23545;&#24212;&#30340;&#23376;&#32593;&#24191;&#25773;&#22320;&#22336;
    </p>
    <p>
      &#29615;&#22238;&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453706826538" ID="ID_682568138" MODIFIED="1453706852320" TEXT="&#x7cfb;&#x7edf;&#x8d1f;&#x8d23;&#x7ef4;&#x62a4;&#x8fd9;&#x5f20;&#x8868;&#xff0c;&#x7528;&#x6237;&#x5e76;&#x4e0d;&#x80fd;&#x66f4;&#x6539;&#x5b83;"/>
</node>
<node CREATED="1453706088381" FOLDED="true" ID="ID_1615269881" MODIFIED="1457660566996" TEXT="main table">
<node CREATED="1453706877606" ID="ID_1563196293" MODIFIED="1453706956720" TEXT="&#x7528;&#x6237;&#x6216;&#x8005;&#x8def;&#x7531;&#x534f;&#x8bae;&#x6dfb;&#x52a0;&#x7684;&#x8def;&#x7531;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6307;&#x5b9a;&#x6dfb;&#x52a0;&#x5230;&#x54ea;&#x5f20;&#x8868;&#xff0c;&#x5219;&#x6dfb;&#x52a0;&#x5230;main table&#x4e2d;"/>
</node>
<node CREATED="1453706093450" ID="ID_688677182" MODIFIED="1453706099792" TEXT="default table"/>
<node CREATED="1453706100505" ID="ID_837693631" MODIFIED="1457660568006" TEXT="user defined table">
<node CREATED="1453706984873" ID="ID_1164761649" MODIFIED="1453707042126" TEXT="&#x5f53;&#x7cfb;&#x7edf;&#x652f;&#x6301;&#x7b56;&#x7565;&#x8def;&#x7531;&#x65f6;&#xff0c;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x5c06;&#x8def;&#x7531;&#x6dfb;&#x52a0;&#x5230;&#x54ea;&#x5f20;&#x8868;&#x91cc;"/>
<node CREATED="1453707044177" ID="ID_96792865" MODIFIED="1453707108586" TEXT="&#x7cfb;&#x7edf;&#x603b;&#x5171;&#x652f;&#x6301;255&#x5f20;&#x8868;&#xff0c;&#x9664;&#x4e86;&#x4e0a;&#x9762;&#x7684;3&#x5f20;&#x8868;&#xff0c;&#x5176;&#x5b83;&#x90fd;&#x662f;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x7684;&#x8868;"/>
</node>
</node>
</node>
<node CREATED="1360668933943" FOLDED="true" ID="ID_347902587" MODIFIED="1458696943437" TEXT="&#x8def;&#x7531;&#x89c4;&#x5219;">
<node CREATED="1360669599065" ID="ID_371557981" MODIFIED="1360678405855">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#35268;&#21017;&#20915;&#23450;&#20102;&#25968;&#25454;&#21253;&#22914;&#20309;&#26597;&#25214;&#36335;&#30001;&#34920;&#20197;&#21450;&#26597;&#25214;&#21738;&#20010;&#36335;&#30001;&#34920;<br />ip rule add from <i><b>192.168.1.0/24</b></i>&#160;to <i><b>192.168.10.0/24</b></i>&#160;dev <i><b>eth0</b></i>&#160;table <i><b>main </b></i>
    </p>
    <p>
      &#25351;&#23450;&#25509;&#21475;eth0&#36827;&#26469;&#30340;&#20174;192.168.1.0/24&#32593;&#27573;&#21040;192.168.10.0/24&#32593;&#27573;&#30340;&#21253;&#22312;main&#36335;&#30001;&#34920;&#20013;&#26597;&#25214;&#36335;&#30001;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453707185523" FOLDED="true" ID="ID_519374797" MODIFIED="1453707923490" TEXT="&#x8def;&#x7531;&#x52a8;&#x4f5c;">
<node CREATED="1453707196827" ID="ID_1316522017" MODIFIED="1453707275896" TEXT="&#x547d;&#x4e2d;&#x8def;&#x7531;&#x540e;&#x7684;&#x9ed8;&#x8ba4;&#x52a8;&#x4f5c;&#x662f;&#x6839;&#x636e;&#x8def;&#x7531;&#x91cc;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x5373;&#x4e0b;&#x4e00;&#x8df3;&#x548c;&#x51fa;&#x63a5;&#x53e3;&#x6765;&#x8f6c;&#x53d1;&#x5305;"/>
<node CREATED="1453707303084" ID="ID_531456722" MODIFIED="1453707334047" TEXT="&#x4f46;&#x662f;&#x7cfb;&#x7edf;&#x8fd8;&#x652f;&#x6301;&#x5176;&#x5b83;&#x8def;&#x7531;&#x52a8;&#x4f5c;">
<node CREATED="1453707344045" ID="ID_1780446748" MODIFIED="1453707395819">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#40657;&#27934;black hole
    </p>
    <p>
      &#21305;&#37197;&#21040;&#36825;&#26465;&#36335;&#30001;&#30340;&#21253;&#23558;&#34987;&#24708;&#24708;&#20002;&#24323;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453707418925" ID="ID_695474548" MODIFIED="1453707587152">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19981;&#21487;&#21040;&#36798;unreachable
    </p>
    <p>
      &#21305;&#37197;&#21040;&#36825;&#26465;&#36335;&#30001;&#30340;&#21253;&#20063;&#20250;&#23558;&#34987;&#20002;&#24323;&#65292;&#20294;&#20250;&#21457;&#36865;&#19968;&#26465;ICMP&#28040;&#24687;&#32473;&#28304;&#21578;&#30693;&#30446;&#30340;&#32593;&#32476;&#19981;&#21487;&#36798;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453707418925" ID="ID_1790545416" MODIFIED="1453707557651">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31105;&#27490;prohibit
    </p>
    <p>
      &#21305;&#37197;&#21040;&#36825;&#26465;&#36335;&#30001;&#30340;&#21253;&#20063;&#20250;&#23558;&#34987;&#20002;&#24323;&#65292;&#20294;&#20250;&#21457;&#36865;&#19968;&#26465;ICMP&#28040;&#24687;&#32473;&#28304;&#21578;&#30693;&#21253;&#34987;&#36807;&#28388;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453707418925" ID="ID_1018609459" MODIFIED="1453707772079">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25918;&#24323;throw
    </p>
    <p>
      &#21305;&#37197;&#21040;&#36825;&#26465;&#36335;&#30001;&#26102;&#65292;&#23558;&#25918;&#24323;&#26597;&#25214;&#24403;&#21069;&#36335;&#30001;&#34920;&#65292;&#22914;&#26524;&#36824;&#26377;&#20854;&#23427;&#36335;&#30001;&#34920;&#21017;&#32487;&#32493;&#26597;&#25214;&#19979;&#19968;&#24352;&#36335;&#30001;&#34920;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453707925933" FOLDED="true" ID="ID_1491646574" MODIFIED="1453710192978" TEXT="&#x8def;&#x7531;&#x7f13;&#x5b58;">
<node CREATED="1453708085783" ID="ID_1376136728" MODIFIED="1453710190884">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#34920;&#20013;&#23384;&#20648;&#30340;&#26159;&#23376;&#32593;&#22320;&#22336;&#65292;&#20294;&#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#21364;&#26159;&#19968;&#20010;&#20027;&#26426;&#22320;&#22336;&#65292;&#25152;&#20197;&#26597;&#25214;&#30340;&#26102;&#20505;&#21482;&#33021;&#29992;&#26368;&#38271;&#21305;&#37197;&#30340;&#21150;&#27861;&#26469;&#36880;&#26465;&#21305;&#37197;&#12290;&#24403;&#36335;&#30001;&#34920;&#24456;&#22823;&#30340;&#26102;&#20505;&#65292;&#36335;&#30001;&#34920;&#26597;&#25214;&#23601;&#20250;&#24456;&#24930;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#20010;&#26174;&#32780;&#26131;&#35265;&#30340;&#35299;&#20915;&#21150;&#27861;&#26159;&#65292;&#22914;&#26524;&#34920;&#20013;&#23384;&#20648;&#30340;&#20063;&#26159;&#20027;&#26426;&#22320;&#22336;&#65292;&#21017;&#21487;&#20197;&#37319;&#29992;hash&#34920;&#24555;&#36895;&#23450;&#20301;&#36335;&#30001;&#26465;&#30446;&#65292;&#28982;&#21518;&#36827;&#34892;&#23436;&#20840;&#21305;&#37197;&#65292;&#36825;&#26679;&#21487;&#20197;&#22823;&#22823;&#20943;&#23569;&#38656;&#35201;&#21305;&#37197;&#30340;&#36335;&#30001;&#26465;&#30446;&#25968;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453708469993" ID="ID_1309416740" MODIFIED="1453708665886">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#32531;&#23384;&#34987;&#25918;&#22312;&#19968;&#24352;hash&#34920;&#37324;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#32531;&#23384;&#30340;key&#21253;&#21547;&#20102;&#30446;&#30340;&#22320;&#22336;&#65292;&#28304;&#22320;&#22336;&#65292;&#21644;&#20854;&#23427;&#19968;&#20123;&#22240;&#32032;&#12290;&#24403;hash&#26597;&#25214;&#21629;&#20013;&#21518;&#23601;&#29992;&#32531;&#23384;&#20013;&#30340;&#20449;&#24687;&#36716;&#21457;&#21253;&#12290;
    </p>
    <p>
      &#24403;&#32531;&#23384;&#19981;&#21629;&#20013;&#26102;&#36716;&#32780;&#26597;&#25214;&#22823;&#30340;&#36335;&#30001;&#34920;&#65292;&#21363;FIB&#34920;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453709023207" ID="ID_908082113" MODIFIED="1453709032612" TEXT="&#x7f13;&#x5b58;&#x7684;&#x8d85;&#x65f6;">
<node CREATED="1453709107064" FOLDED="true" ID="ID_1206099111" MODIFIED="1453709758620" TEXT="&#x7f13;&#x5b58;&#x4ec0;&#x4e48;&#x60c5;&#x51b5;&#x4e0b;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;&#x5df2;&#x8d85;&#x65f6;">
<node CREATED="1453709506512" ID="ID_158828421" MODIFIED="1453709520771">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/route_cache_timeout_1.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1453709649488" ID="ID_664702205" MODIFIED="1453709660659">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/route_cache_timeout_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453709128464" ID="ID_1938000069" MODIFIED="1453709375726" TEXT="&#x7f13;&#x5b58;&#x4ec0;&#x4e48;&#x60c5;&#x51b5;&#x4e0b;&#x88ab;&#x56de;&#x6536;">
<node CREATED="1453709143311" FOLDED="true" ID="ID_510146386" MODIFIED="1453709347448" TEXT="&#x540c;&#x6b65;&#x56de;&#x6536;">
<node CREATED="1453709315490" ID="ID_743722419" MODIFIED="1453709341692">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/route_cache_recycle_async.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453709149570" FOLDED="true" ID="ID_1629453974" MODIFIED="1453709372996" TEXT="&#x5f02;&#x6b65;&#x56de;&#x6536;">
<node CREATED="1453709349722" ID="ID_324282014" MODIFIED="1453709370586">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/route_cache_recycle_sync.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1453709764635" ID="ID_180628949" MODIFIED="1453709794395" TEXT="&#x54ea;&#x4e9b;&#x7f13;&#x5b58;&#x9002;&#x5408;&#x727a;&#x7272;&#x800c;&#x54ea;&#x4e9b;&#x4e0d;&#x9002;&#x5408;">
<node CREATED="1453709802950" FOLDED="true" ID="ID_493797871" MODIFIED="1453709962589" TEXT="&#x5220;&#x9664;&#x4ee3;&#x4ef7;&#x5c0f;&#x800c;&#x9002;&#x5408;&#x727a;&#x7272;&#x7684;&#x7f13;&#x5b58;">
<node CREATED="1453709948460" ID="ID_1169321601" MODIFIED="1453709961254">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/route_cache_candidate_to_delete.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453709802950" FOLDED="true" ID="ID_1713154315" MODIFIED="1453710055113" TEXT="&#x5220;&#x9664;&#x4ee3;&#x4ef7;&#x5927;&#x800c;&#x4e0d;&#x9002;&#x5408;&#x727a;&#x7272;&#x7684;&#x7f13;&#x5b58;">
<node CREATED="1453710034821" ID="ID_554083506" MODIFIED="1453710049806">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/route_cache_candidate_to_not_delete.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1453710344746" FOLDED="true" ID="ID_773897166" MODIFIED="1458696929405" TEXT="&#x8def;&#x7531;&#x9009;&#x62e9;">
<node CREATED="1453710463266" ID="ID_255353064" MODIFIED="1453710725981" TEXT="&#x8def;&#x7531;&#x8868;&#x4e2d;&#x53ef;&#x80fd;&#x4f1a;&#x5b58;&#x5728;&#x5b50;&#x7f51;&#x76f8;&#x540c;&#xff0c;&#x5b50;&#x7f51;&#x63a9;&#x7801;&#x4e5f;&#x76f8;&#x540c;&#x7684;&#x591a;&#x4e2a;&#x8def;&#x7531;&#xff0c;&#x8fd9;&#x65f6;&#x5c31;&#x53ef;&#x80fd;&#x51fa;&#x73b0;&#x4e00;&#x4e2a;IP&#x5305;&#x5339;&#x914d;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x6761;&#x76ee;&#x7684;&#x60c5;&#x51b5;&#x3002;&#xa;&#x6b64;&#x65f6;&#x9996;&#x5148;&#x7528;TOS&#x503c;&#x6765;&#x9009;&#x62e9;&#x8def;&#x7531;&#xff0c;&#x5982;&#x679c;TOS&#x90fd;&#x76f8;&#x540c;&#xff0c;&#x518d;&#x7528;&#x4f18;&#x5148;&#x7ea7;priority&#x6765;&#x9009;&#x62e9;&#x8def;&#x7531;&#x3002;&#x5982;&#x4f55;&#x4f18;&#x5148;&#x7ea7;&#x8fd8;&#x662f;&#x76f8;&#x540c;&#xff0c;&#x5219;&#x7b80;&#x5355;&#x9009;&#x62e9;&#x7b2c;&#x4e00;&#x6761;&#x3002;"/>
</node>
<node CREATED="1457677204123" FOLDED="true" ID="ID_422205699" MODIFIED="1457683586161" TEXT="&#x8def;&#x7531;&#x6807;&#x7b7e;">
<node CREATED="1457677232383" FOLDED="true" ID="ID_1244188975" MODIFIED="1457678202690" TEXT="&#x8def;&#x7531;&#x6807;&#x7b7e;&#x7684;&#x4f5c;&#x7528;">
<node CREATED="1457677552972" FOLDED="true" ID="ID_1557157245" MODIFIED="1457677762429">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_realm_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457677679257" ID="ID_542318228" MODIFIED="1457677760500" TEXT="&#x6d41;&#x91cf;&#x63a7;&#x5236;&#x5b50;&#x7cfb;&#x7edf;&#x5229;&#x7528;&#x8def;&#x7531;&#x5b50;&#x7cfb;&#x7edf;&#x4f20;&#x9012;&#x8fc7;&#x6765;&#x7684;&#x8def;&#x7531;&#x6807;&#x7b7e;&#x5bf9;&#x6d41;&#x8fdb;&#x884c;&#x5206;&#x7c7b;&#xff0c;&#x4ece;&#x800c;&#x51b3;&#x5b9a;QoS&#x7b56;&#x7565;"/>
</node>
<node CREATED="1457677827197" ID="ID_353512927" MODIFIED="1457677844730">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_realm_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457677827197" ID="ID_1833231093" MODIFIED="1457678022606">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_3.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457677827197" ID="ID_942227858" MODIFIED="1457678100663">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_4.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457677827197" ID="ID_338122332" MODIFIED="1457678108305">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_5.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457677241530" FOLDED="true" ID="ID_552403577" MODIFIED="1457679794003" TEXT="&#x5982;&#x4f55;&#x8ba1;&#x7b97;&#x8def;&#x7531;&#x6807;&#x7b7e;">
<node CREATED="1457677827197" ID="ID_1109807436" MODIFIED="1457678213447">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_6.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457677827197" ID="ID_137703415" MODIFIED="1457678412488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_7.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457677827197" ID="ID_1945489864" MODIFIED="1457678341327">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_8.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457677249833" FOLDED="true" ID="ID_357095016" MODIFIED="1457683584504" TEXT="&#x5982;&#x4f55;&#x4f20;&#x9012;&#x8def;&#x7531;&#x6807;&#x7b7e;">
<node CREATED="1457679424531" ID="ID_1331586893" MODIFIED="1457683184469" TEXT="&#x5b58;&#x50a8;realm">
<node CREATED="1457679471140" ID="ID_1837568503" MODIFIED="1457679651959">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31574;&#30053;realm&#23384;&#20648;&#22312;((struct fib4_rule *)fib_rule)-&gt;tclassid
    </p>
    <p>
      &#36335;&#30001;realm&#23384;&#20648;&#22312;struct fib_nh -&gt; nh_tclassid&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457677827197" ID="ID_287177591" MODIFIED="1457679791086">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_9.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457680496351" ID="ID_1891227319" MODIFIED="1457680935788">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#32456;&#30340;&#36335;&#30001;&#26631;&#31614;&#38656;&#35201;&#23384;&#20648;&#22312;skb-&gt;dst.tclassid
    </p>
    <p>
      &#23427;&#20063;&#26159;&#20998;&#20026;2&#20010;realm&#65292;&#28304;realm&#23384;&#20648;&#22312;&#39640;16&#20301;&#65292;&#30446;&#30340;realm&#23384;&#20648;&#22312;&#20302;16&#20301;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457677827197" ID="ID_1009919537" MODIFIED="1457683200362">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_10.JPG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1457683239007" ID="ID_698816156" MODIFIED="1457683464790">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#21518;&#30340;skb-&gt;dst.tclassid&#26469;&#28304;&#20110;3&#37096;&#20998;&#65306;
    </p>
    <p>
      nh-&gt;nh_tclassid&#65292;&#21363;&#36335;&#30001;realm&#65292;&#23427;&#26469;&#28304;&#20110;&#36335;&#30001;&#26597;&#25214;&#24471;&#21040;&#30340;&#36335;&#30001;
    </p>
    <p>
      res-&gt;tclassid&#65292;&#21363;&#31574;&#30053;realm&#65292;&#23427;&#26469;&#28304;&#20110;&#36335;&#30001;&#35268;&#21017;&#65292;&#26159;&#22312;__fib_lookup()&#20013;&#24471;&#21040;&#30340;&#12290;
    </p>
    <p>
      itag&#65292;&#20063;&#26159;&#36335;&#30001;realm&#65292;&#23427;&#26159;&#22312;fib_validate_source()&#20013;&#36890;&#36807;&#26597;&#25214;&#21040;&#28304;&#30340;&#36335;&#30001;&#24471;&#21040;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457683540372" FOLDED="true" ID="ID_1915288723" MODIFIED="1457683577040" TEXT="fib_validate_source()">
<node CREATED="1457677827197" ID="ID_594285875" MODIFIED="1457683566242">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_realm_11.JPG" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1360639948492" FOLDED="true" ID="ID_417873530" MODIFIED="1456860887639" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1360640665863" FOLDED="true" ID="ID_73735414" MODIFIED="1360938295031" TEXT="struct dst_ops ipv4_dst_ops">
<node CREATED="1360644554951" MODIFIED="1360644554951" TEXT=".family = AF_INET"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".protocol = cpu_to_be16(ETH_P_IP)"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".gc = rt_garbage_collect"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".check = ipv4_dst_check"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".destroy = ipv4_dst_destroy"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".ifdown = ipv4_dst_ifdown"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".negative_advice = ipv4_negative_advice"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".link_failure = ipv4_link_failure"/>
<node CREATED="1360644554952" ID="ID_365375838" MODIFIED="1360644554952" TEXT=".update_pmtu = ip_rt_update_pmtu"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".local_out = __ip_local_out"/>
<node CREATED="1360644554952" MODIFIED="1360644554952" TEXT=".entries = ATOMIC_INIT(0)"/>
</node>
<node CREATED="1360641223528" FOLDED="true" ID="ID_1599645799" MODIFIED="1360644626391" TEXT="struct dst_ops ipv4_dst_blackhole_ops">
<node CREATED="1360641252000" ID="ID_1905106070" MODIFIED="1360644588172" TEXT=".family = AF_INET"/>
<node CREATED="1360641401763" ID="ID_195224773" MODIFIED="1360644592030" TEXT=".protocol = cpu_to_be16(ETH_P_IP)"/>
<node CREATED="1360641413440" ID="ID_606049471" MODIFIED="1360644595879" TEXT=".destroy = ipv4_dst_destroy"/>
<node CREATED="1360641423339" ID="ID_1592429591" MODIFIED="1360644599196" TEXT=".check = ipv4_dst_check"/>
<node CREATED="1360641432600" ID="ID_1356432188" MODIFIED="1360644603016" TEXT=".update_pmtu&#x9; = ipv4_rt_blackhole_update_pmtu"/>
<node CREATED="1360641442649" ID="ID_603504566" MODIFIED="1360644605936" TEXT=".entries = ATOMIC_INIT(0)"/>
</node>
<node CREATED="1360644787002" ID="ID_1715315853" MODIFIED="1360936993398" TEXT="struct rt_hash_bucket *rt_hash_table&#xa;&#x5b58;&#x653e;&#x8def;&#x7531;&#x7f13;&#x5b58;(struct rtable)&#x7684;&#x54c8;&#x5e0c;&#x8868;"/>
<node CREATED="1360839437690" FOLDED="true" ID="ID_1753660990" LINK="#ID_1131589468" MODIFIED="1360839909500" TEXT="struct hlist_head *fib_info_hash&#xa;struct hlist_head *fib_info_laddrhash">
<node CREATED="1360839593709" ID="ID_1917440903" MODIFIED="1360839769744" TEXT="&#x6240;&#x6709;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#x4e0b;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;(struct fib_info)&#x6302;&#x63a5;&#x5728;&#xa;&#x54c8;&#x5e0c;&#x8868;fib_info_hash&#x4e0a;, &#x800c;&#x5f53;&#x8bbe;&#x7f6e;&#x4e86;&#x8def;&#x7531;&#x5730;&#x5740;&#x65f6;&#x4e5f;&#x4f1a;&#x6302;&#x63a5;&#x5230;&#x54c8;&#x5e0c;&#x8868;fib_info_laddrhash&#x4e0a;&#xa;"/>
</node>
</node>
<node CREATED="1360639962694" FOLDED="true" ID="ID_623523100" MODIFIED="1457137999206" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1360838091354" FOLDED="true" ID="ID_1413701289" MODIFIED="1457137997886" TEXT="struct fib_config">
<node CREATED="1360838112278" ID="ID_658898031" MODIFIED="1360838136958" TEXT="ip route { add | del | change | append | replace | monitor } ROUTE&#xa;ROUTE := NODE_SPEC [ INFO_SPEC ]&#xa;NODE_SPEC := [ TYPE ] PREFIX [ tos TOS ]&#xa;             [ table TABLE_ID ] [ proto RTPROTO ]&#xa;             [ scope SCOPE ] [ metric METRIC ]&#xa;INFO_SPEC := NH OPTIONS FLAGS [ nexthop NH ]...&#xa;NH := [ via ADDRESS ] [ dev STRING ] [ weight NUMBER ] NHFLAGS&#xa;OPTIONS := FLAGS [ mtu NUMBER ] [ advmss NUMBER ]&#xa;           [ rtt TIME ] [ rttvar TIME ] [reordering NUMBER ]&#xa;           [ window NUMBER] [ cwnd NUMBER ] [ initcwnd NUMBER ]&#xa;           [ ssthresh NUMBER ] [ realms REALM ] [ src ADDRESS ]&#xa;           [ rto_min TIME ] [ hoplimit NUMBER ] &#xa;TYPE := [ unicast | local | broadcast | multicast | throw |&#xa;          unreachable | prohibit | blackhole | nat ]&#xa;TABLE_ID := [ local | main | default | all | NUMBER ]&#xa;SCOPE := [ host | link | global | NUMBER ]&#xa;FLAGS := [ equalize ]&#xa;MP_ALGO := { rr | drr | random | wrandom }&#xa;NHFLAGS := [ onlink | pervasive ]&#xa;RTPROTO := [ kernel | boot | static | NUMBER ]&#xa;TIME := NUMBER[s|ms|us|ns|j]&#xa;"/>
<node CREATED="1360836911423" FOLDED="true" ID="ID_1436235480" MODIFIED="1360839141306" TEXT="struct fib_config : &#x6b64;&#x7ed3;&#x6784;&#x7528;&#x4e8e;&#x7528;&#x6237;&#x5c42;&#x901a;&#x8fc7;ioctl&#x6216;netlink&#x914d;&#x7f6e;&#x8def;&#x7531;&#x4fe1;&#x606f;&#xa;">
<node CREATED="1360837041710" ID="ID_1428653807" MODIFIED="1360837505708" TEXT=" u8 fc_dst_len : &#x5730;&#x5740;&#x957f;&#x5ea6;"/>
<node CREATED="1360837041710" ID="ID_74474137" MODIFIED="1360837550483" TEXT=" u8 fc_tos : ip route add&#x547d;&#x4ee4;&#x4e2d;NODE_SPEC&#x6307;&#x5b9a;&#x7684;&#x670d;&#x52a1;&#x7c7b;&#x578b;"/>
<node CREATED="1360837041710" ID="ID_1742941711" MODIFIED="1360837608910" TEXT=" u8 fc_protocol :ip route add&#x547d;&#x4ee4;&#x4e2d;RTPROTO&#x6307;&#x5b9a;&#x7684;&#x8def;&#x7531;&#x534f;&#x8bae;"/>
<node CREATED="1360837041710" ID="ID_109874329" MODIFIED="1360837655149" TEXT=" u8 fc_scope : ip route add&#x547d;&#x4ee4;&#x4e2d;SCOPE&#x6307;&#x5b9a;&#x7684;&#x8def;&#x7531;&#x8303;&#x56f4;"/>
<node CREATED="1360837041710" ID="ID_617633291" MODIFIED="1360837691849" TEXT=" u8 fc_type : ip route add&#x547d;&#x4ee4;&#x4e2d;TYPE&#x6307;&#x5b9a;&#x7684;&#x8def;&#x7531;&#x7c7b;&#x578b;"/>
<node CREATED="1360837041710" ID="ID_832617958" MODIFIED="1360837722527" TEXT=" u32 fc_table : ip route add&#x547d;&#x4ee4;&#x4e2d;TABLE_ID&#x6307;&#x5b9a;&#x7684;&#x8def;&#x7531;&#x8868;"/>
<node CREATED="1360837041710" ID="ID_48182867" MODIFIED="1360837749468" TEXT=" __be32 fc_dst : ip route add&#x547d;&#x4ee4;&#x4e2d;prefix&#x6307;&#x5b9a;&#x7684;&#x76ee;&#x7684;&#x7f51;&#x6bb5;"/>
<node CREATED="1360837041710" ID="ID_1752127751" MODIFIED="1360837796932" TEXT=" __be32 fc_gw : ip route add&#x547d;&#x4ee4;&#x4e2d;ADDRESS&#x6307;&#x5b9a;&#x7684;&#x4e0b;&#x4e00;&#x8df3;&#x7f51;&#x5173;"/>
<node CREATED="1360837041710" ID="ID_795015993" MODIFIED="1360837845463" TEXT=" int fc_oif : ip route add&#x547d;&#x4ee4;&#x4e2d;dev STRING&#x6307;&#x5b9a;&#x7684;&#x51fa;&#x63a5;&#x53e3;"/>
<node CREATED="1360837041710" ID="ID_1745591326" MODIFIED="1360837041710" TEXT=" u32 fc_flags"/>
<node CREATED="1360837041710" ID="ID_691920850" MODIFIED="1360837951697" TEXT=" u32 fc_priority : &#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1360837041711" ID="ID_1536234205" MODIFIED="1360837041711" TEXT=" __be32 fc_prefsrc"/>
<node CREATED="1360837041711" ID="ID_66742995" MODIFIED="1360837999298" TEXT=" struct nlattr *fc_mx : netlink&#x5c5e;&#x6027;"/>
<node CREATED="1360837041711" MODIFIED="1360837041711" TEXT=" struct rtnexthop *fc_mp"/>
<node CREATED="1360837041711" ID="ID_476711667" MODIFIED="1360838026708" TEXT=" int fc_mx_len : netlink&#x5c5e;&#x6027;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1360837041711" ID="ID_359656794" MODIFIED="1360837041711" TEXT=" int fc_mp_len"/>
<node CREATED="1360837041711" MODIFIED="1360837041711" TEXT=" u32 fc_flow"/>
<node CREATED="1360837041711" MODIFIED="1360837041711" TEXT=" u32 fc_nlflags"/>
<node CREATED="1360837041711" MODIFIED="1360837041711" TEXT=" struct nl_info fc_nlinfo"/>
</node>
</node>
<node CREATED="1360640889443" FOLDED="true" ID="ID_1354738787" MODIFIED="1360938342994" TEXT="struct dst_ops">
<node CREATED="1360640889443" MODIFIED="1360640889443" TEXT=" unsigned short family"/>
<node CREATED="1360640889443" MODIFIED="1360640889443" TEXT=" __be16 protocol"/>
<node CREATED="1360640889443" MODIFIED="1360640889443" TEXT=" unsigned gc_thresh"/>
<node CREATED="1360640889443" MODIFIED="1360640889443" TEXT=" int (*gc)(struct dst_ops *ops)"/>
<node CREATED="1360640889443" ID="ID_112165887" MODIFIED="1360640889443" TEXT=" struct dst_entry * (*check)(struct dst_entry *, __u32 cookie)"/>
<node CREATED="1360640889443" ID="ID_1768831993" MODIFIED="1360640889443" TEXT=" void (*destroy)(struct dst_entry *)"/>
<node CREATED="1360640889443" ID="ID_1067962905" MODIFIED="1360640889443" TEXT=" void (*ifdown)(struct dst_entry *, struct net_device *dev, int how)"/>
<node CREATED="1360640889443" MODIFIED="1360640889443" TEXT=" struct dst_entry * (*negative_advice)(struct dst_entry *)"/>
<node CREATED="1360640889443" MODIFIED="1360640889443" TEXT=" void (*link_failure)(struct sk_buff *)"/>
<node CREATED="1360640889443" ID="ID_700154976" MODIFIED="1360640889443" TEXT=" void (*update_pmtu)(struct dst_entry *dst, u32 mtu)"/>
<node CREATED="1360640889444" MODIFIED="1360640889444" TEXT=" int (*local_out)(struct sk_buff *skb)"/>
<node CREATED="1360640889444" MODIFIED="1360640889444" TEXT=" atomic_t entries"/>
<node CREATED="1360640889444" ID="ID_1131512482" LINK="#ID_631913755" MODIFIED="1360936743082" TEXT=" struct kmem_cache *kmem_cachep&#xa;&#x7528;&#x4e8e;&#x5206;&#x914d;&#x8def;&#x7531;&#x7f13;&#x5b58;(struct rtable)&#x7684;&#x7f13;&#x5b58;&#x5806;"/>
<node CREATED="1360640889444" MODIFIED="1360640889444" TEXT=" struct net *dst_net"/>
</node>
<node CREATED="1360659477998" FOLDED="true" ID="ID_1577652510" MODIFIED="1453940703790" TEXT="struct fib_table &#x8def;&#x7531;&#x51fd;&#x6570;&#x8868;&#xa;&#x5b9a;&#x4e49;&#x4e86;&#x5982;&#x4f55;&#x64cd;&#x4f5c;(&#x6dfb;&#x52a0;/&#x5220;&#x9664;/&#x67e5;&#x627e;)&#x8def;&#x7531;&#x8868;&#x7684;&#x51fd;&#x6570;&#xa;&#x54c8;&#x5e0c;&#x8868;net-&gt;ipv4.fib_table_hash&#x53ef;&#x5b58;&#x653e;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x51fd;&#x6570;&#x8868;,&#x6bd4;&#x5982;:&#xa;RT_TABLE_COMPAT,RT_TABLE_DEFAULT,RT_TABLE_MAIN,RT_TABLE_LOCAL">
<node CREATED="1360660114518" ID="ID_890462967" LINK="#ID_932481285" MODIFIED="1360660260669" TEXT=" struct hlist_node tb_hlist&#xa;&#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;net.ipv4.fib_table_hash&#x54c8;&#x5e0c;&#x8868;&#x4e2d;"/>
<node CREATED="1360660114518" ID="ID_792932464" MODIFIED="1360681861502" TEXT=" u32 tb_id : &#x8def;&#x7531;&#x8868;&#x7684;ID"/>
<node CREATED="1360660114518" MODIFIED="1360660114518" TEXT=" int tb_default"/>
<node CREATED="1360660114518" FOLDED="true" ID="ID_1210238371" MODIFIED="1360838180854" TEXT=" int (*tb_lookup)(struct fib_table *tb, const struct flowi *flp, struct fib_result *res)&#xa;&#x6b64;&#x51fd;&#x6570;&#x7528;&#x4e8e;&#x5177;&#x4f53;&#x7684;&#x8def;&#x7531;&#x67e5;&#x627e;&#x8fc7;&#x7a0b;">
<node CREATED="1360743159153" FOLDED="true" ID="ID_734134135" MODIFIED="1360838178093" TEXT="&#x5f53;struct fib_table&#x662f;RT_TABLE_LOCAL&#x8868;&#x65f6;">
<node CREATED="1360743195327" FOLDED="true" ID="ID_636623849" MODIFIED="1360838177289" TEXT="fn_hash_lookup">
<node CREATED="1360749730384" FOLDED="true" ID="ID_360801119" MODIFIED="1360838176103" TEXT="&#x904d;&#x5386;&#x8def;&#x7531;&#x8868;(struct fib_table)&#x4e2d;&#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x533a;(struct fn_zone)&#x4e0b;&#x7684;&#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)&#xa;&#x6bd4;&#x8f83;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x662f;&#x5426;&#x76f8;&#x540c;((dst ip) &amp; (struct fn_zone-&gt;fz_mask) == (struct fib_node -&gt; fn_key))&#xa;&#x82e5;&#x76f8;&#x540c;&#x5219;&#x8c03;&#x7528;fib_semantic_match&#x8fdb;&#x884c;&#x5339;&#x914d;.">
<node CREATED="1360750148673" FOLDED="true" ID="ID_1095086480" MODIFIED="1360752865944" TEXT="&#x904d;&#x5386;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)&#x4e0b;&#x7684;&#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#x8fdb;&#x884c;&#x5339;&#x914d;">
<node CREATED="1360750231335" ID="ID_383853590" MODIFIED="1360750241655" TEXT="&#x68c0;&#x67e5;&#x670d;&#x52a1;&#x7c7b;&#x578b;&#x662f;&#x5426;&#x5339;&#x914d;"/>
<node CREATED="1360750252851" ID="ID_158765985" MODIFIED="1360750265761" TEXT="&#x68c0;&#x67e5;&#x8def;&#x7531;&#x8303;&#x56f4;&#x662f;&#x5426;&#x5339;&#x914d;"/>
<node CREATED="1360750275848" ID="ID_1711531371" MODIFIED="1360750287663" TEXT="&#x8bbe;&#x7f6e;&#x5df2;&#x8bbf;&#x95ee;&#x6807;&#x8bb0;"/>
<node CREATED="1360750514800" FOLDED="true" ID="ID_1687196352" MODIFIED="1360752864894" TEXT="&#x904d;&#x5386;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#x4e0b;&#x7684;&#x6bcf;&#x4e2a;&#x4e0b;&#x4e00;&#x8df3;(struct fib_nh)">
<node CREATED="1360750649236" ID="ID_1161615081" MODIFIED="1360750716155" TEXT="&#x5982;&#x679c;&#x6b64;&#x4e0b;&#x4e00;&#x8df3;&#x6ca1;&#x6709;&#x88ab;&#x6807;&#x8bb0;&#x4e3a;dead&#x4e14;&#x51fa;&#x63a5;&#x53e3;&#x5339;&#x914d;,&#x5219;&#x8fd4;&#x56de;&#x627e;&#x5230;&#x7684;&#x4e0b;&#x4e00;&#x8df3;"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1360660114518" FOLDED="true" ID="ID_282161755" MODIFIED="1360936070118" TEXT=" int (*tb_insert)(struct fib_table *, struct fib_config *)&#xa;&#x5728;&#x8def;&#x7531;&#x8868;&#x4e2d;&#x63d2;&#x5165;&#x8def;&#x7531;&#x6761;&#x76ee;">
<node CREATED="1360743159153" FOLDED="true" ID="ID_247840223" MODIFIED="1360936067614" TEXT="&#x5f53;struct fib_table&#x662f;RT_TABLE_LOCAL&#x8868;&#x65f6;">
<node CREATED="1360743195327" FOLDED="true" ID="ID_1067858288" MODIFIED="1360936065852" TEXT="fn_hash_insert">
<node CREATED="1360838269166" ID="ID_1797722479" MODIFIED="1360838379576" TEXT="&#x6839;&#x636e;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x7684;prefix &#x957f;&#x5ea6;&#x627e;&#x5230;&#x6240;&#x5c5e;&#x7684;&#x8def;&#x7531;&#x533a;(struct fn_zone)&#xa;&#x5982;&#x679c;&#x5bf9;&#x5e94;&#x7684;&#x8def;&#x7531;&#x533a;&#x8fd8;&#x4e0d;&#x5b58;&#x5728;&#x5219;&#x8c03;&#x7528;fn_new_zone&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65b0;&#x7684;"/>
<node CREATED="1360839993816" ID="ID_965521603" MODIFIED="1360840031586" TEXT="&#x6839;&#x636e;&#x6240;&#x914d;&#x7f6e;&#x7684;&#x8def;&#x7531;&#x8c03;&#x7528;fib_create_info&#x521b;&#x5efa;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x7ed3;&#x6784;(struct fib_info)"/>
<node CREATED="1360840106427" ID="ID_766041821" MODIFIED="1360840137537" TEXT="&#x627e;&#x5230;&#x6240;&#x914d;&#x7f6e;&#x8def;&#x7531;&#x5bf9;&#x5e94;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)"/>
<node CREATED="1360840172054" ID="ID_1875686080" MODIFIED="1360840212039" TEXT="&#x5728;&#x8def;&#x7531;&#x8282;&#x70b9;&#x4e0b;(struct fib_node)&#x627e;&#x4e00;&#x4e2a;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)"/>
<node CREATED="1360840497461" ID="ID_445404570" MODIFIED="1360840697675" TEXT="&#x5982;&#x679c;&#x5b58;&#x5728;&#x8fd9;&#x4e48;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;,&#x8bf4;&#x660e;&#x5230;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x7684;&#x8def;&#x7531;&#x5df2;&#x7ecf;&#x5b58;&#x5728;&#x4e86;,&#x90a3;&#x4e48;&#x53ea;&#x9700;&#x8981;&#x66ff;&#x6362;&#x4ed6;,&#xa;&#x4e5f;&#x5c31;&#x662f;&#x7528;&#x4e0a;&#x9762;&#x521b;&#x5efa;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;(struct fib_info)&#x66ff;&#x6362;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#xa;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x57df;(struct fib_alias -&gt; fa_info)"/>
<node CREATED="1360840823061" ID="ID_766252987" MODIFIED="1360840866725" TEXT="&#x5982;&#x679c;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)&#x4e0d;&#x5b58;&#x5728;&#x5219;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)"/>
<node CREATED="1360840920819" ID="ID_130793286" MODIFIED="1360841111988" TEXT="&#x5728;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)&#x4e0b;&#x627e;&#x4e00;&#x4e2a;&#x7a7a;&#x95f2;&#x7684;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias),&#xa;&#x5982;&#x679c;&#x662f;&#x65b0;&#x521b;&#x5efa;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;&#x5219;struct fib_node -&gt; fn_embedded_alias&#x5373;&#x53ef;&#x7528;,&#xa;&#x82e5;&#x4e0d;&#x662f;&#x65b0;&#x521b;&#x5efa;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;&#x5219;&#x9700;&#x53e6;&#x5916;&#x5206;&#x914d;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)"/>
<node CREATED="1360841122399" ID="ID_1967999470" MODIFIED="1360841216282" TEXT="&#x7528;&#x914d;&#x7f6e;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;(struct fib_config)&#x4ee5;&#x53ca;&#x4e4b;&#x524d;&#x521b;&#x5efa;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;(struct fib_info)&#xa;&#x586b;&#x5145;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)"/>
<node CREATED="1360841253335" ID="ID_1378350841" MODIFIED="1360841472732" TEXT="&#x82e5;&#x662f;&#x65b0;&#x521b;&#x5efa;&#x7684;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)&#x5219;&#x5c06;&#x5176;&#x63d2;&#x5165;&#x6240;&#x5c5e;&#x7684;&#x8def;&#x7531;&#x533a;(struct fib_node)&#x4e2d;"/>
<node CREATED="1360841308611" ID="ID_388213573" MODIFIED="1360841452307" TEXT="&#x5c06;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#x63d2;&#x5165;&#x8def;&#x7531;&#x8282;&#x70b9;(struct fib_node)&#x4e2d;"/>
<node CREATED="1360841353817" ID="ID_1008564742" MODIFIED="1360841419275" TEXT="&#x7528;netlink&#x6d88;&#x606f;&#x901a;&#x544a;&#x7cfb;&#x7edf;&#x53ca;&#x7528;&#x6237;&#x5c42;&#x6dfb;&#x52a0;&#x4e86;&#x4e00;&#x6761;&#x65b0;&#x7684;&#x8def;&#x7531;&#x6761;&#x76ee;"/>
</node>
</node>
</node>
<node CREATED="1360660114518" FOLDED="true" ID="ID_406947214" MODIFIED="1360743315996" TEXT=" int (*tb_delete)(struct fib_table *, struct fib_config *)&#xa;&#x4ece;&#x8def;&#x7531;&#x8868;&#x4e2d;&#x5220;&#x9664;&#x8def;&#x7531;&#x6761;&#x76ee;">
<node CREATED="1360743159153" ID="ID_325034049" MODIFIED="1360743181499" TEXT="&#x5f53;struct fib_table&#x662f;RT_TABLE_LOCAL&#x8868;&#x65f6;">
<node CREATED="1360743195327" ID="ID_1326626950" MODIFIED="1360743243900" TEXT="fn_hash_delete"/>
</node>
</node>
<node CREATED="1360660114518" FOLDED="true" ID="ID_1034227813" MODIFIED="1360743313741" TEXT=" int (*tb_dump)(struct fib_table *table, struct sk_buff *skb, struct netlink_callback *cb)&#xa;&#x5c06;&#x672c;&#x8def;&#x7531;&#x8868;&#x4e2d;&#x7684;&#x8def;&#x7531;&#x6761;&#x76ee;&#x663e;&#x793a;&#x7ed9;&#x7528;&#x6237;&#x770b;">
<node CREATED="1360743159153" ID="ID_544462657" MODIFIED="1360743181499" TEXT="&#x5f53;struct fib_table&#x662f;RT_TABLE_LOCAL&#x8868;&#x65f6;">
<node CREATED="1360743195327" ID="ID_1529095087" MODIFIED="1360743285319" TEXT="fn_hash_dump"/>
</node>
</node>
<node CREATED="1360660114518" FOLDED="true" ID="ID_1688752955" MODIFIED="1360743311247" TEXT=" int (*tb_flush)(struct fib_table *table)&#xa;&#x6e05;&#x7a7a;&#x672c;&#x8def;&#x7531;&#x8868;&#x4e2d;&#x7684;&#x8def;&#x7531;&#x6761;&#x76ee;">
<node CREATED="1360743159153" ID="ID_950275166" MODIFIED="1360743181499" TEXT="&#x5f53;struct fib_table&#x662f;RT_TABLE_LOCAL&#x8868;&#x65f6;">
<node CREATED="1360743195327" ID="ID_993981314" MODIFIED="1360743270512" TEXT="fn_hash_flush"/>
</node>
</node>
<node CREATED="1360660114519" FOLDED="true" ID="ID_984839688" MODIFIED="1360743308820" TEXT=" void (*tb_select_default)(struct fib_table *table, const struct flowi *flp, struct fib_result *res)&#xa;&#x9009;&#x62e9;&#x9ed8;&#x8ba4;&#x8def;&#x7531;">
<node CREATED="1360743159153" ID="ID_363984734" MODIFIED="1360743181499" TEXT="&#x5f53;struct fib_table&#x662f;RT_TABLE_LOCAL&#x8868;&#x65f6;">
<node CREATED="1360743195327" ID="ID_1412469710" MODIFIED="1360743305737" TEXT="fn_hash_select_default"/>
</node>
</node>
<node CREATED="1360660114519" ID="ID_320949177" MODIFIED="1453940697752" TEXT=" unsigned char tb_data[0] : &#x6807;&#x8bc6;fib_table&#x7684;&#x7ed3;&#x5c3e;&#xa;&#x5206;&#x914d;struct fib_table&#x65f6;&#x4e00;&#x822c;&#x4f1a;&#x5728;&#x5176;&#x7ed3;&#x5c3e;&#x5904;&#x540c;&#x65f6;&#x5206;&#x914d;&#x4e00;&#x4e2a;fib zone&#x7684;hash&#x8868;">
<node CREATED="1360682403214" ID="ID_1154726808" MODIFIED="1453940697771" TEXT="struct fn_hash">
<node CREATED="1360682416916" FOLDED="true" ID="ID_304551889" MODIFIED="1360936813014" TEXT="struct fn_zone *fn_zones[33] : &#x8def;&#x7531;&#x533a;&#x6570;&#x7ec4;&#xa;&#x6bcf;&#x4e00;&#x4e2a;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x533a;,&#x56e0;&#x4e3a;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;&#x7684;&#x8303;&#x56f4;&#x662f;0-32,&#xa;&#x56e0;&#x6b64;&#x6570;&#x7ec4;&#x6709;33&#x4e2a;&#x5143;&#x7d20;&#x4ee3;&#x8868;&#x7cfb;&#x7edf;&#x6709;33&#x4e2a;&#x8def;&#x7531;&#x533a;&#xa;">
<node CREATED="1360682574466" FOLDED="true" ID="ID_63574001" MODIFIED="1360936811774" TEXT="struct fn_zone : &#x8def;&#x7531;&#x533a;&#xa;&#x7f51;&#x6bb5;192.168.1.0/24&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x662f;192.168.1.0, &#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;&#x662f;24.&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x533a;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;,192.168.1.0/24&#x548c;192.168.2.0/24&#xa;&#x5177;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;,&#x4f46;&#x662f;&#x5177;&#x6709;&#x76f8;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;24,&#x56e0;&#x6b64;&#x4ed6;&#x4eec;&#x90fd;&#x5c5e;&#x4e8e;&#x540c;&#x4e00;&#x4e2a;&#xa;&#x8def;&#x7531;&#x533a;(fn_zones[24]).&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x533a;&#x4e2d;,&#x4e0d;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x7528;&#x4e0d;&#x540c;&#x7684;struct fib_node&#xa;&#x8868;&#x793a;,&#x6bd4;&#x5982;192.168.1.0/24&#x8868;&#x793a;&#x4e00;&#x4e2a;struct fib_node&#x8def;&#x7531;&#x8282;&#x70b9;,&#x800c;192.168.1.0/24&#xa;&#x8868;&#x793a;&#x53e6;&#x5916;&#x4e00;&#x4e2a;struct fib_node&#x8def;&#x7531;&#x8282;&#x70b9;.">
<node CREATED="1360682587408" ID="ID_584048241" LINK="#ID_1398287022" MODIFIED="1360747183163" TEXT="struct fn_zone *fz_next : &#x7528;&#x4e8e;&#x5c06;struct fn_zone&#x94fe;&#x5165;struct fn_hash-&gt;fn_zone_list"/>
<node CREATED="1360682611274" FOLDED="true" ID="ID_41209094" LINK="#ID_304551889" MODIFIED="1360936811046" TEXT="struct hlist_head *fz_hash : &#x8def;&#x7531;&#x8282;&#x70b9;hash&#x8868;,&#x7528;&#x4e8e;&#x5b58;&#x653e;&#x7ed3;&#x6784;struct fib_node">
<node CREATED="1360744738938" FOLDED="true" ID="ID_1830563949" MODIFIED="1360936807460" TEXT="struct fib_node : &#x8def;&#x7531;&#x8282;&#x70b9;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8282;&#x70b9;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x7f51;&#x6bb5;,&#x5982;192.168.1.0/24&#x548c;&#xa;192.168.2.0/24&#x5404;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8282;&#x70b9;,&#x6ce8;&#x610f;&#x6b64;&#x5904;&#x4e00;&#x4e2a;&#xa;struct fn_zone&#x4e0b;&#x7684;&#x6240;&#x6709;&#x8def;&#x7531;&#x8282;&#x70b9;struct fib_node&#x5177;&#x6709;&#xa;&#x76f8;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;.">
<node CREATED="1360744764976" ID="ID_242922621" MODIFIED="1360748199875" TEXT="struct hlist_node fn_hash : &#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;struct fn_zone -&gt; fz_hash&#x54c8;&#x5e0c;&#x8868;&#x4e0a;"/>
<node CREATED="1360744780737" FOLDED="true" ID="ID_940629100" MODIFIED="1360936806829" TEXT="struct list_head fn_alias : &#x8def;&#x7531;&#x522b;&#x540d;&#x5217;&#x8868;&#xa;&#x5230;&#x8fbe;&#x540c;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x53ef;&#x80fd;&#x6709;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x8def;&#x5f84;,&#x6bcf;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8def;&#x5f84;&#x7528;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#x8868;&#x793a;&#xa;">
<node CREATED="1360748292064" FOLDED="true" ID="ID_945416845" MODIFIED="1360936805975" TEXT="struct fib_alias : &#x8def;&#x7531;&#x522b;&#x540d;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;&#x4ee3;&#x8868;&#x5230;&#x8fbe;&#x540c;&#x4e00;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x7684;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8def;&#x5f84;.">
<node CREATED="1360749064915" ID="ID_1104692237" MODIFIED="1360749208579" TEXT="struct list_head fa_list : &#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;struct fib_node -&gt; fn_alias&#x94fe;&#x8868;&#x4e0a;"/>
<node CREATED="1360749087780" FOLDED="true" ID="ID_407971067" MODIFIED="1360936805256" TEXT="struct fib_info *fa_info : &#x8def;&#x7531;&#x4fe1;&#x606f;">
<node CREATED="1360749510768" ID="ID_1131589468" LINK="#ID_1753660990" MODIFIED="1360839859536" TEXT=" struct hlist_node fib_hash : &#x7528;&#x4e8e;&#x6302;&#x63a5;&#x5230;&#x54c8;&#x5e0c;&#x8868;fib_info_hash&#x4e0a;"/>
<node CREATED="1360749510768" ID="ID_1958379839" LINK="#ID_1753660990" MODIFIED="1360839877487" TEXT=" struct hlist_node fib_lhash : &#x7528;&#x4e8e;&#x6302;&#x63a5;&#x5230;&#x54c8;&#x5e0c;&#x8868;fib_info_laddrhash&#x4e0a;"/>
<node CREATED="1360749510769" ID="ID_549637110" MODIFIED="1360751438724" TEXT=" struct net *fib_net : &#x6240;&#x5c5e;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;"/>
<node CREATED="1360749510769" ID="ID_101020745" MODIFIED="1360749510769" TEXT=" int fib_treeref"/>
<node CREATED="1360749510769" ID="ID_1960322269" MODIFIED="1360749510769" TEXT=" atomic_t fib_clntref"/>
<node CREATED="1360749510769" ID="ID_416689867" MODIFIED="1360751484151" TEXT=" int fib_dead : &#x662f;&#x5426;&#x88ab;&#x6807;&#x8bb0;&#x4e3a;&#x5220;&#x9664;"/>
<node CREATED="1360749510769" ID="ID_358301355" MODIFIED="1360749510769" TEXT=" unsigned fib_flags"/>
<node CREATED="1360749510769" ID="ID_1377317767" MODIFIED="1360751549509" TEXT=" int fib_protocol : &#x6b64;&#x8def;&#x7531;&#x662f;&#x7531;&#x54ea;&#x4e2a;&#x8def;&#x7531;&#x534f;&#x8bae;&#x5b66;&#x4e60;&#x5230;&#x7684;"/>
<node CREATED="1360749510769" ID="ID_427549560" MODIFIED="1360749510769" TEXT=" __be32 fib_prefsrc"/>
<node CREATED="1360749510769" ID="ID_1746506915" MODIFIED="1360751586068" TEXT=" u32 fib_priority : &#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1360749510769" FOLDED="true" ID="ID_485777761" MODIFIED="1360752371676" TEXT=" u32 fib_metrics[RTAX_MAX]&#xa;&#x8861;&#x91cf;&#x4e00;&#x6761;&#x8def;&#x7531;&#x7684;&#x597d;&#x574f;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x6807;&#x51c6;,&#xa;&#x8fd9;&#x4e2a;&#x6570;&#x7ec4;&#x7684;&#x6bcf;&#x4e2a;&#x5143;&#x7d20;&#x8868;&#x793a;&#x4e00;&#x4e2a;&#x8861;&#x91cf;&#x6807;&#x51c6;&#x7684;&#x8861;&#x91cf;&#x503c;">
<node CREATED="1360752218958" ID="ID_19730229" MODIFIED="1360752218958" TEXT="RTAX_UNSPEC"/>
<node CREATED="1360752218958" ID="ID_1334278225" MODIFIED="1360752218958" TEXT="RTAX_LOCK"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_MTU"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_WINDOW"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_RTT"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_RTTVAR"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_SSTHRESH"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_CWND"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_ADVMSS"/>
<node CREATED="1360752218958" ID="ID_1755124639" MODIFIED="1360752218958" TEXT="RTAX_REORDERING"/>
<node CREATED="1360752218958" ID="ID_1577812360" MODIFIED="1360752218958" TEXT="RTAX_HOPLIMIT"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_INITCWND"/>
<node CREATED="1360752218967" MODIFIED="1360752218967" TEXT="RTAX_FEATURES"/>
<node CREATED="1360752218967" MODIFIED="1360752218967" TEXT="RTAX_RTO_MIN"/>
</node>
<node CREATED="1360749510769" ID="ID_1665058798" MODIFIED="1360752454069" TEXT=" int fib_nhs : nexthop&#x8868;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1360749510769" MODIFIED="1360749510769" TEXT=" int fib_power"/>
<node CREATED="1360749510770" FOLDED="true" ID="ID_481350563" MODIFIED="1360936801894" TEXT=" struct fib_nh fib_nh[0] : nexthop&#x8868;, &#x5b83;&#x4e00;&#x822c;&#x4f34;&#x968f;&#xa;struct fib_info&#x4e00;&#x540c;&#x5206;&#x914d;,&#x653e;&#x5728;struct fib_info&#x7ed3;&#x5c3e;&#x5904;&#xa;&#x5230;&#x8fbe;&#x540c;&#x4e00;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x6216;&#x8bb8;&#x6709;&#x591a;&#x4e2a;&#x4e0b;&#x4e00;&#x8df3;,&#x6240;&#x4ee5;&#x8fd9;&#x91cc;&#x7528;&#x94fe;&#x8868;&#x8868;&#x793a;">
<node CREATED="1360749510770" FOLDED="true" ID="ID_1770779860" MODIFIED="1360936800983" TEXT="struct fib_nh : nexthop,&#x4ee3;&#x8868;&#x5230;&#x8fbe;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x9700;&#x8981;&#x7ecf;&#x8fc7;&#x7684;&#x4e0b;&#x4e00;&#x8df3;">
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" struct net_device *nh_dev"/>
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" struct hlist_node nh_hash"/>
<node CREATED="1360749510770" ID="ID_1245521382" MODIFIED="1360753079324" TEXT=" struct fib_info *nh_parent : &#x6240;&#x5c5e;&#x7684;struct fib_info&#x7ed3;&#x6784;"/>
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" unsigned nh_flags"/>
<node CREATED="1360749510770" FOLDED="true" ID="ID_576631941" MODIFIED="1360753402996" TEXT=" unsigned char nh_scope : &#x8df3;&#x8f6c;&#x8303;&#x56f4;">
<node CREATED="1360753303789" ID="ID_1171307329" MODIFIED="1360753356274" TEXT="RT_SCOPE_UNIVERSE : &#x5168;&#x7403;&#x8303;&#x56f4;"/>
<node CREATED="1360753315502" ID="ID_812791626" MODIFIED="1360753365102" TEXT="RT_SCOPE_SITE : &#x7ad9;&#x70b9;&#x8303;&#x56f4;"/>
<node CREATED="1360753323264" ID="ID_1718281350" MODIFIED="1360753373633" TEXT="RT_SCOPE_LINK : &#x94fe;&#x8def;&#x8303;&#x56f4;"/>
<node CREATED="1360753332881" ID="ID_1410882229" MODIFIED="1360753380900" TEXT="RT_SCOPE_HOST : &#x672c;&#x673a;&#x8303;&#x56f4;"/>
<node CREATED="1360753342866" ID="ID_300140909" MODIFIED="1360753399172" TEXT="RT_SCOPE_NOWHERE : &#x76ee;&#x7684;&#x4e0d;&#x5b58;&#x5728;"/>
</node>
<node CREATED="1360749510770" ID="ID_451034360" MODIFIED="1360753034021" TEXT=" int nh_weight : &#x6743;&#x91cd;"/>
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" int nh_power"/>
<node CREATED="1360749510770" ID="ID_1763899603" MODIFIED="1360749510770" TEXT=" __u32 nh_tclassid"/>
<node CREATED="1360749510770" ID="ID_286898653" MODIFIED="1360752999269" TEXT=" int nh_oif :&#x5230;&#x8fbe;&#x4e0b;&#x4e00;&#x8df3;&#x7684;&#x51fa;&#x63a5;&#x53e3;"/>
<node CREATED="1360749510770" ID="ID_846375220" MODIFIED="1360752985411" TEXT=" __be32 nh_gw : &#x4e0b;&#x4e00;&#x8df3;&#x7684;ip&#x5730;&#x5740;"/>
</node>
</node>
</node>
<node CREATED="1360749113487" ID="ID_1061698483" MODIFIED="1360749593882" TEXT="u8 fa_tos : &#x670d;&#x52a1;&#x7c7b;&#x578b;"/>
<node CREATED="1360749127024" FOLDED="true" ID="ID_1457783606" MODIFIED="1360752564042" TEXT="u8 fa_type : &#x8def;&#x7531;&#x7c7b;&#x578b;">
<node CREATED="1360750344906" ID="ID_835293560" MODIFIED="1360750346426" TEXT="RTN_UNSPEC"/>
<node CREATED="1360750353970" ID="ID_118492428" MODIFIED="1360750354702" TEXT="RTN_UNICAST"/>
<node CREATED="1360750362729" ID="ID_1921623931" MODIFIED="1360750363516" TEXT="RTN_LOCAL"/>
<node CREATED="1360750370954" ID="ID_542665255" MODIFIED="1360750371432" TEXT="RTN_BROADCAST"/>
<node CREATED="1360750378164" ID="ID_1691459724" MODIFIED="1360750379188" TEXT="RTN_ANYCAST"/>
<node CREATED="1360750386402" ID="ID_219656804" MODIFIED="1360750387056" TEXT="RTN_MULTICAST"/>
<node CREATED="1360750394533" ID="ID_753266812" MODIFIED="1360750395485" TEXT="RTN_BLACKHOLE"/>
<node CREATED="1360750403765" ID="ID_738886939" MODIFIED="1360750404419" TEXT="RTN_UNREACHABLE"/>
<node CREATED="1360750411557" ID="ID_657267637" MODIFIED="1360750412536" TEXT="RTN_PROHIBIT"/>
<node CREATED="1360750423804" ID="ID_949514382" MODIFIED="1360750425215" TEXT="RTN_THROW"/>
<node CREATED="1360750432778" ID="ID_1909681259" MODIFIED="1360750434251" TEXT="RTN_NAT"/>
<node CREATED="1360750441742" ID="ID_675013438" MODIFIED="1360750442212" TEXT="RTN_XRESOLVE"/>
</node>
<node CREATED="1360749136745" ID="ID_165334985" MODIFIED="1360749579168" TEXT="u8 fa_scope : &#x8def;&#x7531;&#x8303;&#x56f4;"/>
<node CREATED="1360749146026" ID="ID_556768070" MODIFIED="1360749610983" TEXT="u8 fa_state : &#x72b6;&#x6001;&#x6807;&#x8bc6;"/>
</node>
</node>
<node CREATED="1360744797012" ID="ID_1772675618" MODIFIED="1360748245787" TEXT="__be32 fn_key : &#x76ee;&#x7684;&#x7f51;&#x6bb5;,&#x5982;192.168.1.0/24&#x7684;192.168.1.0"/>
<node CREATED="1360744817845" ID="ID_747458906" MODIFIED="1360744979488" TEXT="struct fib_alias fn_embedded_alias : &#x8def;&#x7531;&#x522b;&#x540d;"/>
</node>
</node>
<node CREATED="1360682632617" ID="ID_1742093754" MODIFIED="1360747406299" TEXT="int fz_nent : &#x672c;&#x8def;&#x7531;&#x533a;&#x4e2d;&#x8def;&#x7531;&#x8282;&#x70b9;&#x7684;&#x6570;&#x91cf;"/>
<node CREATED="1360682646178" ID="ID_834526976" MODIFIED="1360747466631" TEXT="int fz_divisor : hash&#x8868;&#x6709;&#x591a;&#x5c11;&#x4e2a;&#x6876;"/>
<node CREATED="1360682656926" ID="ID_1373254760" MODIFIED="1360747507757" TEXT="u32 fz_hashmask : &#x4e0e;hash&#x503c;&#x4e0e;&#x540e;&#x5f97;&#x51fa;&#x6876;&#x7684;&#x4f4d;&#x7f6e;"/>
<node CREATED="1360682670528" ID="ID_1796644647" MODIFIED="1360747563778" TEXT="int fz_order : &#x7f51;&#x7edc;&#x524d;&#x7f00;&#x7684;&#x957f;&#x5ea6;&#xa;&#x5982;192.168.1.0/24&#x7684;order&#x4e3a;24"/>
<node CREATED="1360682684822" ID="ID_1724723236" MODIFIED="1360747598481" TEXT="__be32 fz_mask : &#x7f51;&#x7edc;&#x63a9;&#x7801;&#xa;&#x5982;192.168.1.0/24&#x7684;mask&#x4e3a;255.255.255.0"/>
</node>
</node>
<node CREATED="1360682428018" ID="ID_1398287022" MODIFIED="1360747121688" TEXT="struct fn_zone *fn_zone_list : &#x4e0a;&#x9762;33&#x4e2a;&#x8def;&#x7531;&#x533a;&#x94fe;&#x63a5;&#x6210;&#x7684;&#x94fe;&#x8868;"/>
</node>
</node>
</node>
<node CREATED="1360659014930" FOLDED="true" ID="ID_80452588" MODIFIED="1453936281143" TEXT=" struct fib_rules_ops &#x8def;&#x7531;&#x89c4;&#x5219;&#x51fd;&#x6570;&#x8868;&#xa;&#x5b9a;&#x4e49;&#x4e86;&#x5982;&#x4f55;&#x64cd;&#x4f5c;(&#x6dfb;&#x52a0;/&#x67e5;&#x627e;)&#x8def;&#x7531;&#x89c4;&#x5219;&#x7684;&#x51fd;&#x6570;&#x96c6;&#xa;&#x8def;&#x7531;&#x89c4;&#x5219;&#x51b3;&#x5b9a;&#x4e86;&#x6570;&#x636e;&#x5305;&#x5982;&#x4f55;&#x67e5;&#x627e;&#x8def;&#x7531;&#x8868;&#x4ee5;&#x53ca;&#x67e5;&#x627e;&#x54ea;&#x4e2a;&#x8def;&#x7531;&#x8868;">
<node CREATED="1360662172059" ID="ID_1713127636" MODIFIED="1360662400100" TEXT=" int family : &#x534f;&#x8bae;&#x65cf;"/>
<node CREATED="1360662172059" ID="ID_887589610" MODIFIED="1360662459400" TEXT=" struct list_head list&#xa;&#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;net-&gt;ipv4.rules_ops&#x548c;net-&gt;rules_ops"/>
<node CREATED="1360662172059" ID="ID_1974147631" MODIFIED="1360662172059" TEXT=" int rule_size"/>
<node CREATED="1360662172059" ID="ID_68805991" MODIFIED="1360678635147" TEXT=" int addr_size : &#x5730;&#x5740;&#x957f;&#x5ea6;ipv4&#x6216;ipv6"/>
<node CREATED="1360662172059" ID="ID_1356765435" MODIFIED="1360662172059" TEXT=" int unresolved_rules"/>
<node CREATED="1360662172059" ID="ID_1037676879" MODIFIED="1360662172059" TEXT=" int nr_goto_rules"/>
<node CREATED="1360662172059" ID="ID_1781820440" MODIFIED="1360662172059" TEXT=" int (*action)(struct fib_rule *, struct flowi *, int, struct fib_lookup_arg *)"/>
<node CREATED="1360662172059" ID="ID_126104515" MODIFIED="1360662172059" TEXT=" int (*match)(struct fib_rule *, struct flowi *, int)"/>
<node CREATED="1360662172060" ID="ID_1108915659" MODIFIED="1360662172060" TEXT=" int (*configure)(struct fib_rule *, struct sk_buff *, struct fib_rule_hdr *, struct nlattr **)"/>
<node CREATED="1360662172060" ID="ID_86323701" MODIFIED="1360662172060" TEXT=" int (*compare)(struct fib_rule *, struct fib_rule_hdr *, struct nlattr **)"/>
<node CREATED="1360662172060" ID="ID_1254023970" MODIFIED="1360662172060" TEXT=" int (*fill)(struct fib_rule *, struct sk_buff *, struct fib_rule_hdr *)"/>
<node CREATED="1360662172060" ID="ID_1039214342" MODIFIED="1360662172060" TEXT=" u32 (*default_pref)(struct fib_rules_ops *ops)"/>
<node CREATED="1360662172060" ID="ID_1575102756" MODIFIED="1360678723447" TEXT=" size_t (*nlmsg_payload)(struct fib_rule *)&#xa;&#x7edf;&#x8ba1;&#x8d1f;&#x8f7d;&#x6570;&#x636e;&#x80fd;&#x529b;&#x51fd;&#x6570;&#x6307;&#x9488;"/>
<node CREATED="1360662172060" ID="ID_932207372" MODIFIED="1360678818489" TEXT=" void (*flush_cache)(struct fib_rules_ops *ops)&#xa;&#x4fee;&#x6539;&#x8def;&#x7531;&#x89c4;&#x5219;&#x5217;&#x8868;&#x540e;,&#x5fc5;&#x987b;&#x8c03;&#x7528;&#x6b64;&#x51fd;&#x6570;&#x5237;&#x65b0;&#x8def;&#x7531;&#x7f13;&#x5b58;(route cache)"/>
<node CREATED="1360662172060" ID="ID_724392600" MODIFIED="1360678863458" TEXT=" int nlgroup : &#x8def;&#x7531;netlink&#x7684;&#x7ec4;&#x5212;&#x5206;&#x6807;&#x8bc6;"/>
<node CREATED="1360662172060" ID="ID_1660942620" MODIFIED="1360678898405" TEXT=" const struct nla_policy *policy : netlink&#x7684;&#x5c5e;&#x6027;&#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1360662172060" FOLDED="true" ID="ID_1016406123" MODIFIED="1360681277153" TEXT=" struct list_head rules_list : &#x8def;&#x7531;&#x89c4;&#x5219;&#x5217;&#x8868;">
<node CREATED="1360679154921" FOLDED="true" ID="ID_637341678" MODIFIED="1360681275996" TEXT="struct fib_rule : &#x8def;&#x7531;&#x89c4;&#x5219;&#x7531;&#x4ee5;&#x4e0b;&#x547d;&#x4ee4;&#x6dfb;&#x52a0;&#xa;Usage: ip rule [ list | add | del | flush ] SELECTOR ACTION&#xa;SELECTOR := [ not ] [ from PREFIX ] [ to PREFIX ] [ tos TOS ] [ fwmark FWMARK[/MASK] ]&#xa;                     [ dev STRING ] [ pref NUMBER ]&#xa;ACTION := [ table TABLE_ID ]&#xa;                 [ prohibit | reject | unreachable ]&#xa;                 [ realms [SRCREALM/]DSTREALM ]&#xa;                 [ goto NUMBER ]&#xa;TABLE_ID := [ local | main | default | NUMBER ]&#xa;">
<node CREATED="1360679154921" ID="ID_344047013" MODIFIED="1360679242994" TEXT=" struct list_head list : &#x94fe;&#x8868;&#x5934;"/>
<node CREATED="1360679154921" ID="ID_79865912" MODIFIED="1360679255324" TEXT=" atomic_t refcnt : &#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
<node CREATED="1360679154921" ID="ID_1818768771" MODIFIED="1360679518837" TEXT=" int ifindex : &#x5339;&#x914d;&#x5165;&#x63a5;&#x53e3;"/>
<node CREATED="1360679154921" ID="ID_1697059529" MODIFIED="1360679523741" TEXT=" char ifname[IFNAMSIZ] : &#x5339;&#x914d;&#x5165;&#x63a5;&#x53e3;"/>
<node CREATED="1360679154922" ID="ID_401756802" MODIFIED="1360679545186" TEXT=" u32 mark : &#x5339;&#x914d;&#x5305;&#x7684;netfilter mark"/>
<node CREATED="1360679154922" ID="ID_908143295" MODIFIED="1360679604505" TEXT=" u32 mark_mask : &#x7528;&#x63a9;&#x7801;&#x6307;&#x5b9a;&#x53ea;&#x5339;&#x914d;&#x5305;&#x7684;netfilter mark&#x7684;&#x54ea;&#x4e9b;&#x4f4d;"/>
<node CREATED="1360679154922" ID="ID_1489601435" MODIFIED="1360679883170" TEXT=" u32 pref : &#x89c4;&#x5219;&#x7684;&#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1360679154922" FOLDED="true" ID="ID_64087307" MODIFIED="1360680519583" TEXT=" u32 flags">
<node CREATED="1360680482111" ID="ID_1482473022" MODIFIED="1360680484805" TEXT="FIB_RULE_PERMANENT"/>
<node CREATED="1360680491446" ID="ID_176745337" MODIFIED="1360680492550" TEXT="FIB_RULE_INVERT"/>
<node CREATED="1360680499791" ID="ID_331825131" MODIFIED="1360680501187" TEXT="FIB_RULE_UNRESOLVED"/>
<node CREATED="1360680508151" ID="ID_1665075942" MODIFIED="1360680509183" TEXT="FIB_RULE_DEV_DETACHED"/>
<node CREATED="1360680516757" ID="ID_1367441080" MODIFIED="1360680518498" TEXT="FIB_RULE_FIND_SADDR"/>
</node>
<node CREATED="1360679154922" ID="ID_1947734939" MODIFIED="1360679684454" TEXT=" u32 table : &#x6307;&#x5b9a;&#x5728;&#x54ea;&#x4e2a;&#x8def;&#x7531;&#x8868;&#x91cc;&#x67e5;&#x627e;&#x8def;&#x7531;&#x6761;&#x76ee;"/>
<node CREATED="1360679154922" FOLDED="true" ID="ID_1909176567" MODIFIED="1360680348042" TEXT=" u8 action : &#x5339;&#x914d;&#x89c4;&#x5219;&#x540e;&#x7684;&#x884c;&#x4e3a;">
<node CREATED="1360680054989" ID="ID_1635259485" MODIFIED="1360680056412" TEXT="FR_ACT_UNSPEC"/>
<node CREATED="1360680062912" ID="ID_669874954" MODIFIED="1360680139390" TEXT="FR_ACT_TO_TBL : &#x5230;table&#x6307;&#x5b9a;&#x7684;&#x8def;&#x7531;&#x8868;&#x67e5;&#x627e;&#x8def;&#x7531;"/>
<node CREATED="1360680071218" ID="ID_295855307" MODIFIED="1360680176191" TEXT="FR_ACT_GOTO : &#x8df3;&#x5230;&#x53e6;&#x5916;&#x4e00;&#x6761;&#x8def;&#x7531;&#x89c4;&#x5219;"/>
<node CREATED="1360680079823" ID="ID_620390673" MODIFIED="1360680194244" TEXT="FR_ACT_NOP : &#x65e0;&#x52a8;&#x4f5c;"/>
<node CREATED="1360680088053" ID="ID_1679762545" MODIFIED="1360680237147" TEXT="FR_ACT_BLACKHOLE : &#x9ed1;&#x6d1e;,&#x5373;&#x65e0;&#x58f0;&#x606f;&#x7684;&#x4e22;&#x6389;&#x6b64;&#x5305;"/>
<node CREATED="1360680096592" ID="ID_1739135472" MODIFIED="1360680297163" TEXT="FR_ACT_UNREACHABLE : &#x4e22;&#x6389;&#x6b64;&#x5305;,&#x5e76;&#x6807;&#x8bc6;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x4e0d;&#x53ef;&#x8fbe;"/>
<node CREATED="1360680104146" ID="ID_1575843645" MODIFIED="1360680339696" TEXT="FR_ACT_PROHIBIT : &#x4e22;&#x6389;&#x6b64;&#x5305;,&#x5e76;&#x4e0d;&#x7edf;&#x8ba1;&#x6b64;&#x5305;"/>
</node>
<node CREATED="1360679154922" ID="ID_1596963992" MODIFIED="1360679154922" TEXT=" u32 target"/>
<node CREATED="1360679154922" ID="ID_1208972823" MODIFIED="1360679154922" TEXT=" struct fib_rule * ctarget"/>
<node CREATED="1360679154922" MODIFIED="1360679154922" TEXT=" struct rcu_head rcu"/>
<node CREATED="1360679154922" ID="ID_259756944" MODIFIED="1360679747697" TEXT=" struct net * fr_net : &#x6240;&#x5c5e;&#x7684;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;"/>
</node>
</node>
<node CREATED="1360662172060" ID="ID_437688485" MODIFIED="1360662172060" TEXT=" struct module *owner"/>
<node CREATED="1360662172060" ID="ID_1058983511" MODIFIED="1360678953317" TEXT=" struct net *fro_net : &#x6240;&#x5c5e;&#x7684;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;"/>
</node>
<node CREATED="1360937212442" FOLDED="true" ID="ID_570333402" MODIFIED="1453936275478" TEXT="struct rtable : &#x8def;&#x7531;&#x7f13;&#x5b58;&#xa;&#x4ece;ipv4_dst_ops- &gt; kmem_cachep&#x4e2d;&#x5206;&#x914d;,&#xa;&#x94fe;&#x63a5;&#x4e8e;rt_hash_table&#x4e2d;&#xa;&#x6ce8;&#x610f;, &#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x7f13;&#x5b58;rtable&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x5730;&#x5740;, &#x800c;&#x975e;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x7f51;&#x6bb5;">
<node CREATED="1360937753105" FOLDED="true" ID="ID_1454573889" MODIFIED="1401290725555" TEXT=" struct dst_entry dst : &#x8def;&#x7531;&#x6761;&#x76ee;">
<node CREATED="1360937753105" MODIFIED="1360937753105" TEXT=" struct rcu_head rcu_head"/>
<node CREATED="1360937753105" MODIFIED="1360937753105" TEXT=" struct dst_entry *child"/>
<node CREATED="1360937753105" MODIFIED="1360937753105" TEXT=" struct net_device *dev"/>
<node CREATED="1360937753105" MODIFIED="1360937753105" TEXT=" short error"/>
<node CREATED="1360937753105" MODIFIED="1360937753105" TEXT=" short obsolete"/>
<node CREATED="1360937753105" FOLDED="true" ID="ID_1266687173" MODIFIED="1360937821727" TEXT=" int flags">
<node CREATED="1360937791645" ID="ID_358564381" MODIFIED="1360937793267" TEXT="DST_HOST"/>
<node CREATED="1360937800698" ID="ID_874174075" MODIFIED="1360937802917" TEXT="DST_NOXFRM"/>
<node CREATED="1360937808665" ID="ID_1306122571" MODIFIED="1360937810129" TEXT="DST_NOPOLICY"/>
<node CREATED="1360937817825" ID="ID_1780628637" MODIFIED="1360937819754" TEXT="DST_NOHASH"/>
</node>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" unsigned long expires"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" unsigned short header_len"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" unsigned short trailer_len"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" unsigned int rate_tokens"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" unsigned long rate_last"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" struct dst_entry *path"/>
<node CREATED="1360937753106" ID="ID_1150006529" MODIFIED="1360937753106" TEXT=" struct neighbour *neighbour"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" struct hh_cache *hh"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" struct xfrm_state *xfrm"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" int (*input)(struct sk_buff*)"/>
<node CREATED="1360937753106" MODIFIED="1360937753106" TEXT=" int (*output)(struct sk_buff*)"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" struct dst_ops *ops"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" u32 metrics[RTAX_MAX]"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" __u32 tclassid"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" atomic_t __refcnt"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" int __use"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" unsigned long lastuse"/>
<node CREATED="1360937753107" FOLDED="true" ID="ID_117659060" MODIFIED="1360938021751" TEXT="union">
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" struct dst_entry *next"/>
<node CREATED="1360937753107" ID="ID_232058266" MODIFIED="1360937753107" TEXT=" struct rtable *rt_next"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" struct rt6_info *rt6_next"/>
<node CREATED="1360937753107" MODIFIED="1360937753107" TEXT=" struct dn_route *dn_next"/>
</node>
</node>
<node CREATED="1360937753107" FOLDED="true" ID="ID_1637026977" MODIFIED="1360939133360" TEXT=" struct flowi fl : &#x8def;&#x7531;&#x952e;&#x503c;">
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" int oif"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" int iif"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" __u32 mark"/>
<node CREATED="1360938862848" ID="ID_1576011771" MODIFIED="1360939105026" TEXT="union nl_u">
<node CREATED="1360938862848" ID="ID_947422552" MODIFIED="1360939080257" TEXT="struct ip4_u">
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" __be32 daddr"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" __be32 saddr"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" __u8 tos"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" __u8 scope"/>
</node>
<node CREATED="1360938862848" ID="ID_511009387" MODIFIED="1360939075464" TEXT="struct ip6_u">
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" struct in6_addr daddr"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" struct in6_addr saddr"/>
<node CREATED="1360938862848" MODIFIED="1360938862848" TEXT=" __be32 flowlabel"/>
</node>
<node CREATED="1360938862849" ID="ID_597641121" MODIFIED="1360939070212" TEXT="struct dn_u">
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __le16 daddr"/>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __le16 saddr"/>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u8 scope"/>
</node>
</node>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u8 proto"/>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u8 flags"/>
<node CREATED="1360938862849" ID="ID_1205716464" MODIFIED="1360939100235" TEXT="union uli_u">
<node CREATED="1360938862849" ID="ID_1812228590" MODIFIED="1360939053715" TEXT="struct ports">
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __be16 sport"/>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __be16 dport"/>
</node>
<node CREATED="1360938862849" ID="ID_1385987814" MODIFIED="1360939048946" TEXT="struct icmpt">
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u8 type"/>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u8 code"/>
</node>
<node CREATED="1360938862849" ID="ID_943625845" MODIFIED="1360939043374" TEXT="struct dnports">
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __le16 sport"/>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __le16 dport"/>
</node>
<node CREATED="1360938862849" ID="ID_719252997" MODIFIED="1360938862849" TEXT=" __be32 spi"/>
<node CREATED="1360938862849" ID="ID_1161286838" MODIFIED="1360939020685" TEXT="struct mht">
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u8 type"/>
</node>
</node>
<node CREATED="1360938862849" MODIFIED="1360938862849" TEXT=" __u32 secid"/>
</node>
<node CREATED="1360937753108" ID="ID_1481936458" MODIFIED="1360937753108" TEXT=" struct in_device *idev"/>
<node CREATED="1360937753108" ID="ID_1630994525" MODIFIED="1360939177130" TEXT=" int rt_genid : &#x968f;&#x673a;&#x6570;"/>
<node CREATED="1360937753108" ID="ID_925801636" MODIFIED="1360937753108" TEXT=" unsigned rt_flags"/>
<node CREATED="1360937753108" ID="ID_1194513786" MODIFIED="1360939187016" TEXT=" __u16 rt_type : &#x8def;&#x7531;&#x7c7b;&#x578b;"/>
<node CREATED="1360937753108" ID="ID_905204847" MODIFIED="1360939201976" TEXT=" __be32 rt_dst : &#x76ee;&#x7684;&#x5730;&#x5740;"/>
<node CREATED="1360937753108" ID="ID_1495788987" MODIFIED="1360939214808" TEXT=" __be32 rt_src : &#x6e90;&#x5730;&#x5740;"/>
<node CREATED="1360937753108" ID="ID_465423375" MODIFIED="1360939226371" TEXT=" int rt_iif : &#x5165;&#x63a5;&#x53e3;"/>
<node CREATED="1360937753108" ID="ID_1614453510" MODIFIED="1360939233454" TEXT=" __be32 rt_gateway : &#x7f51;&#x5173;"/>
<node CREATED="1360937753108" ID="ID_882277823" MODIFIED="1360937753108" TEXT=" __be32 rt_spec_dst"/>
<node CREATED="1360937753108" ID="ID_891134267" MODIFIED="1360937753108" TEXT=" struct inet_peer *peer"/>
</node>
<node CREATED="1453936336545" FOLDED="true" ID="ID_406283722" MODIFIED="1453938112877" TEXT="struct flowi4">
<node CREATED="1453936350435" FOLDED="true" ID="ID_1824657141" MODIFIED="1453936877978" TEXT="struct flowi_common&#x9;__fl_common">
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" int flowic_oif"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" int flowic_iif"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" __u32 flowic_mark"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" __u8 flowic_tos"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" __u8 flowic_scope"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" __u8 flowic_proto"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" __u8 flowic_flags"/>
<node CREATED="1453936637977" MODIFIED="1453936637977" TEXT=" __u32 flowic_secid"/>
</node>
<node CREATED="1453936363745" ID="ID_1213729347" MODIFIED="1453936369885" TEXT="__be32 saddr"/>
<node CREATED="1453936381613" ID="ID_904514004" MODIFIED="1453936387320" TEXT="__be32 daddr"/>
<node CREATED="1453936401294" FOLDED="true" ID="ID_1979483964" MODIFIED="1453936867318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      union flowi_uli uli
    </p>
  </body>
</html></richcontent>
<node CREATED="1453936657426" FOLDED="true" ID="ID_1640558840" MODIFIED="1453936862866" TEXT="ports">
<node CREATED="1453936771936" ID="ID_394817526" MODIFIED="1453936785046">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __be16 dport
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453936771936" ID="ID_1972991960" MODIFIED="1453936794353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __be16 sport
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453936667356" FOLDED="true" ID="ID_331096635" MODIFIED="1453936863548" TEXT="icmpt">
<node CREATED="1453936736708" ID="ID_1931602991" MODIFIED="1453936747096" TEXT="__u8 type"/>
<node CREATED="1453936736708" ID="ID_1266664540" MODIFIED="1453936812896" TEXT="__u8 code"/>
</node>
<node CREATED="1453936678353" FOLDED="true" ID="ID_619753211" MODIFIED="1453936864372" TEXT="dnports">
<node CREATED="1453936771936" ID="ID_1486895576" MODIFIED="1453936844306">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __le16 dport
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453936771936" ID="ID_666574165" MODIFIED="1453936851110">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __le16 sport
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453936691619" ID="ID_1558904269" MODIFIED="1453936696579" TEXT="__be32 spi"/>
<node CREATED="1453936706973" ID="ID_507634437" MODIFIED="1453936712286" TEXT="__be32 gre_key"/>
<node CREATED="1453936722996" ID="ID_107553035" MODIFIED="1453936724412" TEXT="mht">
<node CREATED="1453936736708" ID="ID_958583240" MODIFIED="1453936747096" TEXT="__u8 type"/>
</node>
</node>
</node>
<node CREATED="1453938114876" FOLDED="true" ID="ID_1583090852" MODIFIED="1453938828326" TEXT="struct fib_result">
<node CREATED="1453938130970" ID="ID_1939066429" MODIFIED="1453938153697">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned char prefixlen
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453938166005" ID="ID_394826995" MODIFIED="1453938178139">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned char nh_sel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453938691230" ID="ID_1735319012" MODIFIED="1453938800460">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned char type
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453938704272" ID="ID_1691475683" MODIFIED="1453938805602">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned char scope
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453938717476" ID="ID_476191514" MODIFIED="1453938810534">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      u32 tclassid
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1453938743002" ID="ID_1776628569" MODIFIED="1453938743584" TEXT="struct fib_info *fi"/>
<node CREATED="1453938753494" ID="ID_38336268" MODIFIED="1453938754116" TEXT="struct fib_table *table"/>
<node CREATED="1453938765192" ID="ID_915849266" MODIFIED="1453938765835" TEXT="struct list_head *fa_head"/>
</node>
<node CREATED="1360659477998" FOLDED="true" ID="ID_1319628071" MODIFIED="1456859001474" TEXT="struct fib_table &#x8def;&#x7531;&#x51fd;&#x6570;&#x8868;&#xa;&#x5b9a;&#x4e49;&#x4e86;&#x5982;&#x4f55;&#x64cd;&#x4f5c;(&#x6dfb;&#x52a0;/&#x5220;&#x9664;/&#x67e5;&#x627e;)&#x8def;&#x7531;&#x8868;&#x7684;&#x51fd;&#x6570;&#xa;&#x54c8;&#x5e0c;&#x8868;net-&gt;ipv4.fib_table_hash&#x53ef;&#x5b58;&#x653e;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x51fd;&#x6570;&#x8868;,&#x6bd4;&#x5982;:&#xa;RT_TABLE_COMPAT,RT_TABLE_DEFAULT,RT_TABLE_MAIN,RT_TABLE_LOCAL">
<node CREATED="1360660114518" ID="ID_596397225" LINK="#ID_932481285" MODIFIED="1360660260669" TEXT=" struct hlist_node tb_hlist&#xa;&#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;net.ipv4.fib_table_hash&#x54c8;&#x5e0c;&#x8868;&#x4e2d;"/>
<node CREATED="1360660114518" ID="ID_66769581" MODIFIED="1360681861502" TEXT=" u32 tb_id : &#x8def;&#x7531;&#x8868;&#x7684;ID"/>
<node CREATED="1360660114518" ID="ID_1421328998" MODIFIED="1360660114518" TEXT=" int tb_default"/>
<node CREATED="1453940646172" ID="ID_460079636" MODIFIED="1453940651884" TEXT="int tb_num_default"/>
<node CREATED="1360660114519" FOLDED="true" ID="ID_979352754" MODIFIED="1456859000103" TEXT=" unsigned char tb_data[0] : &#x6807;&#x8bc6;fib_table&#x7684;&#x7ed3;&#x5c3e;&#xa;&#x5206;&#x914d;struct fib_table&#x65f6;&#x4e00;&#x822c;&#x4f1a;&#x5728;&#x5176;&#x7ed3;&#x5c3e;&#x5904;&#x540c;&#x65f6;&#x5206;&#x914d;&#x4e00;&#x4e2a;fib zone&#x7684;hash&#x8868;">
<node CREATED="1360682403214" FOLDED="true" ID="ID_493741918" MODIFIED="1456858998475" TEXT="struct fn_hash">
<node CREATED="1360682416916" FOLDED="true" ID="ID_1710465718" MODIFIED="1453940714825" TEXT="struct fn_zone *fn_zones[33] : &#x8def;&#x7531;&#x533a;&#x6570;&#x7ec4;&#xa;&#x6bcf;&#x4e00;&#x4e2a;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x533a;,&#x56e0;&#x4e3a;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;&#x7684;&#x8303;&#x56f4;&#x662f;0-32,&#xa;&#x56e0;&#x6b64;&#x6570;&#x7ec4;&#x6709;33&#x4e2a;&#x5143;&#x7d20;&#x4ee3;&#x8868;&#x7cfb;&#x7edf;&#x6709;33&#x4e2a;&#x8def;&#x7531;&#x533a;&#xa;">
<node CREATED="1360682574466" FOLDED="true" ID="ID_212187604" MODIFIED="1453940711743" TEXT="struct fn_zone : &#x8def;&#x7531;&#x533a;&#xa;&#x7f51;&#x6bb5;192.168.1.0/24&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x662f;192.168.1.0, &#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;&#x662f;24.&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x533a;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;,192.168.1.0/24&#x548c;192.168.2.0/24&#xa;&#x5177;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;,&#x4f46;&#x662f;&#x5177;&#x6709;&#x76f8;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;24,&#x56e0;&#x6b64;&#x4ed6;&#x4eec;&#x90fd;&#x5c5e;&#x4e8e;&#x540c;&#x4e00;&#x4e2a;&#xa;&#x8def;&#x7531;&#x533a;(fn_zones[24]).&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x533a;&#x4e2d;,&#x4e0d;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x7528;&#x4e0d;&#x540c;&#x7684;struct fib_node&#xa;&#x8868;&#x793a;,&#x6bd4;&#x5982;192.168.1.0/24&#x8868;&#x793a;&#x4e00;&#x4e2a;struct fib_node&#x8def;&#x7531;&#x8282;&#x70b9;,&#x800c;192.168.1.0/24&#xa;&#x8868;&#x793a;&#x53e6;&#x5916;&#x4e00;&#x4e2a;struct fib_node&#x8def;&#x7531;&#x8282;&#x70b9;.">
<node CREATED="1360682587408" ID="ID_1073301704" LINK="#ID_1398287022" MODIFIED="1360747183163" TEXT="struct fn_zone *fz_next : &#x7528;&#x4e8e;&#x5c06;struct fn_zone&#x94fe;&#x5165;struct fn_hash-&gt;fn_zone_list"/>
<node CREATED="1360682611274" FOLDED="true" ID="ID_454549794" LINK="#ID_304551889" MODIFIED="1453940710424" TEXT="struct hlist_head *fz_hash : &#x8def;&#x7531;&#x8282;&#x70b9;hash&#x8868;,&#x7528;&#x4e8e;&#x5b58;&#x653e;&#x7ed3;&#x6784;struct fib_node">
<node CREATED="1360744738938" FOLDED="true" ID="ID_492004196" MODIFIED="1453940694431" TEXT="struct fib_node : &#x8def;&#x7531;&#x8282;&#x70b9;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8282;&#x70b9;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x7f51;&#x6bb5;,&#x5982;192.168.1.0/24&#x548c;&#xa;192.168.2.0/24&#x5404;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8282;&#x70b9;,&#x6ce8;&#x610f;&#x6b64;&#x5904;&#x4e00;&#x4e2a;&#xa;struct fn_zone&#x4e0b;&#x7684;&#x6240;&#x6709;&#x8def;&#x7531;&#x8282;&#x70b9;struct fib_node&#x5177;&#x6709;&#xa;&#x76f8;&#x540c;&#x7684;&#x7f51;&#x7edc;&#x524d;&#x7f00;&#x957f;&#x5ea6;.">
<node CREATED="1360744764976" ID="ID_1837860831" MODIFIED="1360748199875" TEXT="struct hlist_node fn_hash : &#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;struct fn_zone -&gt; fz_hash&#x54c8;&#x5e0c;&#x8868;&#x4e0a;"/>
<node CREATED="1360744780737" FOLDED="true" ID="ID_1132176536" MODIFIED="1453940692608" TEXT="struct list_head fn_alias : &#x8def;&#x7531;&#x522b;&#x540d;&#x5217;&#x8868;&#xa;&#x5230;&#x8fbe;&#x540c;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x53ef;&#x80fd;&#x6709;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x8def;&#x5f84;,&#x6bcf;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8def;&#x5f84;&#x7528;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;(struct fib_alias)&#x8868;&#x793a;&#xa;">
<node CREATED="1360748292064" FOLDED="true" ID="ID_1189245097" MODIFIED="1453940691911" TEXT="struct fib_alias : &#x8def;&#x7531;&#x522b;&#x540d;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;&#x4ee3;&#x8868;&#x5230;&#x8fbe;&#x540c;&#x4e00;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x7684;&#xa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x8def;&#x5f84;.">
<node CREATED="1360749064915" ID="ID_829839842" MODIFIED="1360749208579" TEXT="struct list_head fa_list : &#x7528;&#x4e8e;&#x94fe;&#x63a5;&#x5230;struct fib_node -&gt; fn_alias&#x94fe;&#x8868;&#x4e0a;"/>
<node CREATED="1360749087780" FOLDED="true" ID="ID_589335354" MODIFIED="1453940687166" TEXT="struct fib_info *fa_info : &#x8def;&#x7531;&#x4fe1;&#x606f;">
<node CREATED="1360749510768" ID="ID_1817083689" LINK="#ID_1753660990" MODIFIED="1360839859536" TEXT=" struct hlist_node fib_hash : &#x7528;&#x4e8e;&#x6302;&#x63a5;&#x5230;&#x54c8;&#x5e0c;&#x8868;fib_info_hash&#x4e0a;"/>
<node CREATED="1360749510768" ID="ID_65609567" LINK="#ID_1753660990" MODIFIED="1360839877487" TEXT=" struct hlist_node fib_lhash : &#x7528;&#x4e8e;&#x6302;&#x63a5;&#x5230;&#x54c8;&#x5e0c;&#x8868;fib_info_laddrhash&#x4e0a;"/>
<node CREATED="1360749510769" ID="ID_903344915" MODIFIED="1360751438724" TEXT=" struct net *fib_net : &#x6240;&#x5c5e;&#x7f51;&#x7edc;&#x540d;&#x79f0;&#x7a7a;&#x95f4;"/>
<node CREATED="1360749510769" ID="ID_994060168" MODIFIED="1360749510769" TEXT=" int fib_treeref"/>
<node CREATED="1360749510769" ID="ID_1528243039" MODIFIED="1360749510769" TEXT=" atomic_t fib_clntref"/>
<node CREATED="1360749510769" ID="ID_1451251266" MODIFIED="1360751484151" TEXT=" int fib_dead : &#x662f;&#x5426;&#x88ab;&#x6807;&#x8bb0;&#x4e3a;&#x5220;&#x9664;"/>
<node CREATED="1360749510769" ID="ID_1900939549" MODIFIED="1360749510769" TEXT=" unsigned fib_flags"/>
<node CREATED="1360749510769" ID="ID_809748406" MODIFIED="1360751549509" TEXT=" int fib_protocol : &#x6b64;&#x8def;&#x7531;&#x662f;&#x7531;&#x54ea;&#x4e2a;&#x8def;&#x7531;&#x534f;&#x8bae;&#x5b66;&#x4e60;&#x5230;&#x7684;"/>
<node CREATED="1360749510769" ID="ID_1187508245" MODIFIED="1360749510769" TEXT=" __be32 fib_prefsrc"/>
<node CREATED="1360749510769" ID="ID_1095097758" MODIFIED="1360751586068" TEXT=" u32 fib_priority : &#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1360749510769" FOLDED="true" ID="ID_522191117" MODIFIED="1360752371676" TEXT=" u32 fib_metrics[RTAX_MAX]&#xa;&#x8861;&#x91cf;&#x4e00;&#x6761;&#x8def;&#x7531;&#x7684;&#x597d;&#x574f;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x6807;&#x51c6;,&#xa;&#x8fd9;&#x4e2a;&#x6570;&#x7ec4;&#x7684;&#x6bcf;&#x4e2a;&#x5143;&#x7d20;&#x8868;&#x793a;&#x4e00;&#x4e2a;&#x8861;&#x91cf;&#x6807;&#x51c6;&#x7684;&#x8861;&#x91cf;&#x503c;">
<node CREATED="1360752218958" ID="ID_711339254" MODIFIED="1360752218958" TEXT="RTAX_UNSPEC"/>
<node CREATED="1360752218958" ID="ID_10160680" MODIFIED="1360752218958" TEXT="RTAX_LOCK"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_MTU"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_WINDOW"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_RTT"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_RTTVAR"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_SSTHRESH"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_CWND"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_ADVMSS"/>
<node CREATED="1360752218958" ID="ID_1011302400" MODIFIED="1360752218958" TEXT="RTAX_REORDERING"/>
<node CREATED="1360752218958" ID="ID_1059496977" MODIFIED="1360752218958" TEXT="RTAX_HOPLIMIT"/>
<node CREATED="1360752218958" MODIFIED="1360752218958" TEXT="RTAX_INITCWND"/>
<node CREATED="1360752218967" MODIFIED="1360752218967" TEXT="RTAX_FEATURES"/>
<node CREATED="1360752218967" MODIFIED="1360752218967" TEXT="RTAX_RTO_MIN"/>
</node>
<node CREATED="1360749510769" ID="ID_115148723" MODIFIED="1360752454069" TEXT=" int fib_nhs : nexthop&#x8868;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1360749510769" MODIFIED="1360749510769" TEXT=" int fib_power"/>
<node CREATED="1360749510770" FOLDED="true" ID="ID_994861426" MODIFIED="1360936801894" TEXT=" struct fib_nh fib_nh[0] : nexthop&#x8868;, &#x5b83;&#x4e00;&#x822c;&#x4f34;&#x968f;&#xa;struct fib_info&#x4e00;&#x540c;&#x5206;&#x914d;,&#x653e;&#x5728;struct fib_info&#x7ed3;&#x5c3e;&#x5904;&#xa;&#x5230;&#x8fbe;&#x540c;&#x4e00;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x6216;&#x8bb8;&#x6709;&#x591a;&#x4e2a;&#x4e0b;&#x4e00;&#x8df3;,&#x6240;&#x4ee5;&#x8fd9;&#x91cc;&#x7528;&#x94fe;&#x8868;&#x8868;&#x793a;">
<node CREATED="1360749510770" FOLDED="true" ID="ID_1146482634" MODIFIED="1360936800983" TEXT="struct fib_nh : nexthop,&#x4ee3;&#x8868;&#x5230;&#x8fbe;&#x76ee;&#x7684;&#x7f51;&#x6bb5;&#x9700;&#x8981;&#x7ecf;&#x8fc7;&#x7684;&#x4e0b;&#x4e00;&#x8df3;">
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" struct net_device *nh_dev"/>
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" struct hlist_node nh_hash"/>
<node CREATED="1360749510770" ID="ID_1037607710" MODIFIED="1360753079324" TEXT=" struct fib_info *nh_parent : &#x6240;&#x5c5e;&#x7684;struct fib_info&#x7ed3;&#x6784;"/>
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" unsigned nh_flags"/>
<node CREATED="1360749510770" FOLDED="true" ID="ID_1634264924" MODIFIED="1360753402996" TEXT=" unsigned char nh_scope : &#x8df3;&#x8f6c;&#x8303;&#x56f4;">
<node CREATED="1360753303789" ID="ID_1919198817" MODIFIED="1360753356274" TEXT="RT_SCOPE_UNIVERSE : &#x5168;&#x7403;&#x8303;&#x56f4;"/>
<node CREATED="1360753315502" ID="ID_411141652" MODIFIED="1360753365102" TEXT="RT_SCOPE_SITE : &#x7ad9;&#x70b9;&#x8303;&#x56f4;"/>
<node CREATED="1360753323264" ID="ID_96992793" MODIFIED="1360753373633" TEXT="RT_SCOPE_LINK : &#x94fe;&#x8def;&#x8303;&#x56f4;"/>
<node CREATED="1360753332881" ID="ID_1006859322" MODIFIED="1360753380900" TEXT="RT_SCOPE_HOST : &#x672c;&#x673a;&#x8303;&#x56f4;"/>
<node CREATED="1360753342866" ID="ID_1393914393" MODIFIED="1360753399172" TEXT="RT_SCOPE_NOWHERE : &#x76ee;&#x7684;&#x4e0d;&#x5b58;&#x5728;"/>
</node>
<node CREATED="1360749510770" ID="ID_287436084" MODIFIED="1360753034021" TEXT=" int nh_weight : &#x6743;&#x91cd;"/>
<node CREATED="1360749510770" MODIFIED="1360749510770" TEXT=" int nh_power"/>
<node CREATED="1360749510770" ID="ID_785041579" MODIFIED="1360749510770" TEXT=" __u32 nh_tclassid"/>
<node CREATED="1360749510770" ID="ID_1989377462" MODIFIED="1360752999269" TEXT=" int nh_oif :&#x5230;&#x8fbe;&#x4e0b;&#x4e00;&#x8df3;&#x7684;&#x51fa;&#x63a5;&#x53e3;"/>
<node CREATED="1360749510770" ID="ID_1805967522" MODIFIED="1360752985411" TEXT=" __be32 nh_gw : &#x4e0b;&#x4e00;&#x8df3;&#x7684;ip&#x5730;&#x5740;"/>
</node>
</node>
</node>
<node CREATED="1360749113487" ID="ID_1238352456" MODIFIED="1360749593882" TEXT="u8 fa_tos : &#x670d;&#x52a1;&#x7c7b;&#x578b;"/>
<node CREATED="1360749127024" FOLDED="true" ID="ID_1699605948" MODIFIED="1453940688920" TEXT="u8 fa_type : &#x8def;&#x7531;&#x7c7b;&#x578b;">
<node CREATED="1360750344906" ID="ID_938625827" MODIFIED="1360750346426" TEXT="RTN_UNSPEC"/>
<node CREATED="1360750353970" ID="ID_1378737627" MODIFIED="1360750354702" TEXT="RTN_UNICAST"/>
<node CREATED="1360750362729" ID="ID_15081363" MODIFIED="1360750363516" TEXT="RTN_LOCAL"/>
<node CREATED="1360750370954" ID="ID_1159995034" MODIFIED="1360750371432" TEXT="RTN_BROADCAST"/>
<node CREATED="1360750378164" ID="ID_245832065" MODIFIED="1360750379188" TEXT="RTN_ANYCAST"/>
<node CREATED="1360750386402" ID="ID_1618948991" MODIFIED="1360750387056" TEXT="RTN_MULTICAST"/>
<node CREATED="1360750394533" ID="ID_561868194" MODIFIED="1360750395485" TEXT="RTN_BLACKHOLE"/>
<node CREATED="1360750403765" ID="ID_858439707" MODIFIED="1360750404419" TEXT="RTN_UNREACHABLE"/>
<node CREATED="1360750411557" ID="ID_6650699" MODIFIED="1360750412536" TEXT="RTN_PROHIBIT"/>
<node CREATED="1360750423804" ID="ID_134537858" MODIFIED="1360750425215" TEXT="RTN_THROW"/>
<node CREATED="1360750432778" ID="ID_1433589190" MODIFIED="1360750434251" TEXT="RTN_NAT"/>
<node CREATED="1360750441742" ID="ID_1168661478" MODIFIED="1360750442212" TEXT="RTN_XRESOLVE"/>
</node>
<node CREATED="1360749136745" ID="ID_1142004749" MODIFIED="1360749579168" TEXT="u8 fa_scope : &#x8def;&#x7531;&#x8303;&#x56f4;"/>
<node CREATED="1360749146026" ID="ID_1894058588" MODIFIED="1360749610983" TEXT="u8 fa_state : &#x72b6;&#x6001;&#x6807;&#x8bc6;"/>
</node>
</node>
<node CREATED="1360744797012" ID="ID_295175504" MODIFIED="1360748245787" TEXT="__be32 fn_key : &#x76ee;&#x7684;&#x7f51;&#x6bb5;,&#x5982;192.168.1.0/24&#x7684;192.168.1.0"/>
<node CREATED="1360744817845" ID="ID_561796071" MODIFIED="1360744979488" TEXT="struct fib_alias fn_embedded_alias : &#x8def;&#x7531;&#x522b;&#x540d;"/>
</node>
</node>
<node CREATED="1360682632617" ID="ID_595606099" MODIFIED="1360747406299" TEXT="int fz_nent : &#x672c;&#x8def;&#x7531;&#x533a;&#x4e2d;&#x8def;&#x7531;&#x8282;&#x70b9;&#x7684;&#x6570;&#x91cf;"/>
<node CREATED="1360682646178" ID="ID_1210813601" MODIFIED="1360747466631" TEXT="int fz_divisor : hash&#x8868;&#x6709;&#x591a;&#x5c11;&#x4e2a;&#x6876;"/>
<node CREATED="1360682656926" ID="ID_1738423775" MODIFIED="1360747507757" TEXT="u32 fz_hashmask : &#x4e0e;hash&#x503c;&#x4e0e;&#x540e;&#x5f97;&#x51fa;&#x6876;&#x7684;&#x4f4d;&#x7f6e;"/>
<node CREATED="1360682670528" ID="ID_1507157051" MODIFIED="1360747563778" TEXT="int fz_order : &#x7f51;&#x7edc;&#x524d;&#x7f00;&#x7684;&#x957f;&#x5ea6;&#xa;&#x5982;192.168.1.0/24&#x7684;order&#x4e3a;24"/>
<node CREATED="1360682684822" ID="ID_1905067581" MODIFIED="1360747598481" TEXT="__be32 fz_mask : &#x7f51;&#x7edc;&#x63a9;&#x7801;&#xa;&#x5982;192.168.1.0/24&#x7684;mask&#x4e3a;255.255.255.0"/>
</node>
</node>
<node CREATED="1360682428018" ID="ID_1897066028" MODIFIED="1360747121688" TEXT="struct fn_zone *fn_zone_list : &#x4e0a;&#x9762;33&#x4e2a;&#x8def;&#x7531;&#x533a;&#x94fe;&#x63a5;&#x6210;&#x7684;&#x94fe;&#x8868;"/>
</node>
</node>
</node>
</node>
<node CREATED="1360639976455" FOLDED="true" ID="ID_1033736135" MODIFIED="1456858319468" TEXT="&#x521d;&#x59cb;&#x5316;&#x6d41;&#x7a0b;">
<node CREATED="1306829053258" FOLDED="true" ID="ID_390954495" MODIFIED="1360938250488" TEXT="       ip_rt_init&#xa;(net/ipv4/route.c)">
<node CREATED="1306829194022" FOLDED="true" ID="ID_1330466398" MODIFIED="1360641111516" TEXT="1, &#x521d;&#x59cb;&#x5316;&#x5168;&#x5c40;&#x53d8;&#x91cf;ip_rt_acct&#xa;&#x6b64;&#x53d8;&#x91cf;&#x7528;&#x4e8e;&#x7edf;&#x8ba1;&#x6240;&#x8def;&#x7531;&#x7684;&#x5305;/&#x5b57;&#x8282;&#x7684;&#x6570;&#x91cf;">
<node CREATED="1360640395435" FOLDED="true" ID="ID_7003835" MODIFIED="1360640613577" TEXT="struct ip_rt_acct">
<node CREATED="1360640408564" ID="ID_973858598" MODIFIED="1360640451475" TEXT="__u32 o_bytes"/>
<node CREATED="1360640423064" ID="ID_895718132" MODIFIED="1360640457624" TEXT="__u32 o_packets"/>
<node CREATED="1360640432612" ID="ID_862267297" MODIFIED="1360640472621" TEXT="__u32 i_bytes"/>
<node CREATED="1360640441106" ID="ID_750696696" MODIFIED="1360640485955" TEXT="__u32 i_packets"/>
</node>
</node>
<node CREATED="1360641114794" ID="ID_631913755" MODIFIED="1360936488107" TEXT="ipv4_dst_ops.kmem_cachep&#xa;ipv4_dst_blackhole_ops.kmem_cachep = ipv4_dst_ops.kmem_cachep&#xa;&#x521b;&#x5efa;&#x7f13;&#x5b58;&#x5806;ip_dst_cache&#x4ee5;&#x4fbf;&#x4e8e;&#x4ece;&#x4e2d;&#x5206;&#x914d;&#x8def;&#x7531;&#x7f13;&#x5b58;&#x7ed3;&#x6784;(struct rtable)"/>
<node CREATED="1360641152279" ID="ID_648333702" LINK="#ID_1715315853" MODIFIED="1360936778366" TEXT="rt_hash_table&#xa;&#x4ece;&#x7f13;&#x5b58;&#x5806;ip_dst_cache&#x4e2d;&#x5206;&#x914d;&#x7684;&#x8def;&#x7531;&#x7f13;&#x5b58;&#x7ed3;&#x6784;(struct rtable)&#x5747;&#x94fe;&#x63a5;&#x5230;&#x6b64;&#x54c8;&#x5e0c;&#x8868;&#x4e2d;"/>
<node CREATED="1360646330855" ID="ID_1819959957" MODIFIED="1360646333409" TEXT="rt_hash_locks"/>
<node CREATED="1306829116504" FOLDED="true" ID="ID_1446610351" MODIFIED="1360639889964" TEXT="devinet_init">
<node CREATED="1306829327732" ID="ID_639094740" MODIFIED="1306829349726" TEXT="1, &#x6ce8;&#x518c;&#x7f51;&#x7edc;&#x5b50;&#x7cfb;&#x7edf;register_pernet_subsys(&amp;devinet_ops)"/>
<node CREATED="1306829389794" ID="ID_618555364" MODIFIED="1306829392880" TEXT="2, register_gifconf(PF_INET, inet_gifconf)"/>
<node CREATED="1306829432353" ID="ID_779252729" LINK="#ID_1962362739" MODIFIED="1306830957258">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3, &#27880;&#20876;netdevice&#36890;&#30693;&#38142;:&#22238;&#35843;&#20989;&#25968;&#20026; inetdev_event
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306829556029" ID="ID_1459178469" LINK="#ID_847077534" MODIFIED="1306830484222">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4, &#27880;&#20876;netlink&#28040;&#24687;RTM_NEWADDR
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306829556029" ID="ID_169398041" LINK="#ID_219964343" MODIFIED="1306830531693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      5, &#27880;&#20876;netlink&#28040;&#24687;RTM_DELADDR
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306829556029" ID="ID_1125725555" MODIFIED="1306829664638">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6, &#27880;&#20876;netlink&#28040;&#24687;RTM_GETADDR
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1306829127160" FOLDED="true" ID="ID_1714360799" MODIFIED="1360839349087" TEXT="             ip_fib_init&#xa;(net/ipv4/fib_frontend.c)">
<node CREATED="1360647196184" ID="ID_699999110" MODIFIED="1360657936184" TEXT="&#x6ce8;&#x518c;netlink socket&#x9009;&#x9879;RTM_NEWROUTE&#x4ee5;&#x8c03;&#x7528;inet_rtm_newroute&#x6dfb;&#x52a0;&#x8def;&#x7531;&#xa;&#x6ce8;&#x518c;netlink socket&#x9009;&#x9879;RTM_DELROUTE&#x4ee5;&#x8c03;&#x7528;inet_rtm_delroute&#x5220;&#x9664;&#x8def;&#x7531;&#xa;&#x6ce8;&#x518c;netlink socket&#x9009;&#x9879;RTM_GETROUTE&#x4ee5;&#x8c03;&#x7528;inet_dump_fib&#x663e;&#x793a;&#x8def;&#x7531;"/>
<node CREATED="1360647196184" FOLDED="true" ID="ID_1118324912" MODIFIED="1360839346687" TEXT="register_pernet_subsys(&amp;fib_net_ops)">
<node CREATED="1360658151936" FOLDED="true" ID="ID_1500481811" MODIFIED="1360839343165" TEXT="struct pernet_operations fib_net_ops = {&#xa;&#x9;.init = fib_net_init,&#xa;&#x9;.exit = fib_net_exit,&#xa;};&#xa;               (net/ipv4/fib_frontend.c)">
<node CREATED="1360658358711" FOLDED="true" ID="ID_939692623" MODIFIED="1360839342127" TEXT="fib_net_init">
<node CREATED="1360658455447" FOLDED="true" ID="ID_1149902664" MODIFIED="1360839340983" TEXT="ip_fib_net_init">
<node CREATED="1360660576986" ID="ID_479180722" MODIFIED="1360660722692" TEXT="&#x521d;&#x59cb;&#x5316;net-&gt;ipv4.fib_table_hash&#x54c8;&#x5e0c;&#x8868;&#xa;&#x6b64;&#x54c8;&#x5e0c;&#x8868;&#x662f;&#x7cfb;&#x7edf;&#x8def;&#x7531;&#x8868;&#x7684;&#x5165;&#x53e3;"/>
<node CREATED="1360660770916" FOLDED="true" ID="ID_442017863" MODIFIED="1360839339655" TEXT="fib4_rules_init(net)">
<node CREATED="1360660857673" FOLDED="true" ID="ID_353861080" MODIFIED="1360839336658" TEXT="fib4_rules_init &#x5f53;&#x7cfb;&#x7edf;&#x4e0d;&#x652f;&#x6301;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x8868;&#x65f6;&#x4f7f;&#x7528;&#x6b64;&#x5b9a;&#x4e49;&#xa;                 (net/ipv4/fib_frontend.c)">
<node CREATED="1360661112238" FOLDED="true" ID="ID_599290111" MODIFIED="1360839334771" TEXT="&#x8c03;&#x7528;fib_hash_table&#x521d;&#x59cb;&#x5316;&#x672c;&#x5730;&#x8def;&#x7531;&#x51fd;&#x6570;&#x8868;(struct fib_table *tb : RT_TABLE_LOCAL),&#xa;&#x5e76;&#x5c06;&#x5176;&#x52a0;&#x5165;net-&gt;ipv4.fib_table_hash&#x4e2d;">
<node CREATED="1360743011522" ID="ID_1778705736" MODIFIED="1360743013114" TEXT="tb-&gt;tb_lookup = fn_hash_lookup"/>
<node CREATED="1360743025874" ID="ID_1326386280" MODIFIED="1360743027074" TEXT="tb-&gt;tb_insert = fn_hash_insert"/>
<node CREATED="1360743037020" ID="ID_1791317115" MODIFIED="1360743038124" TEXT="tb-&gt;tb_delete = fn_hash_delete"/>
<node CREATED="1360743049533" ID="ID_637229091" MODIFIED="1360743050248" TEXT="tb-&gt;tb_flush = fn_hash_flush"/>
<node CREATED="1360743060059" ID="ID_1185551707" MODIFIED="1360743061347" TEXT="tb-&gt;tb_select_default = fn_hash_select_default"/>
<node CREATED="1360743070676" ID="ID_1672665733" MODIFIED="1360743071908" TEXT="tb-&gt;tb_dump = fn_hash_dump"/>
</node>
<node CREATED="1360661112238" ID="ID_1198489997" LINK="#ID_599290111" MODIFIED="1360743127956" TEXT="&#x8c03;&#x7528;fib_hash_table&#x521d;&#x59cb;&#x5316;&#x672c;&#x5730;&#x8def;&#x7531;&#x51fd;&#x6570;&#x8868;(struct fib_table *tb : RT_TABLE_MAIN),&#xa;&#x5e76;&#x5c06;&#x5176;&#x52a0;&#x5165;net-&gt;ipv4.fib_table_hash&#x4e2d;"/>
</node>
<node CREATED="1360660857673" FOLDED="true" ID="ID_1846493484" MODIFIED="1360738574898" TEXT="fib4_rules_init &#x5f53;&#x7cfb;&#x7edf;&#x652f;&#x6301;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x8868;&#x65f6;&#x4f7f;&#x7528;&#x6b64;&#x5b9a;&#x4e49;&#xa;                 (net/ipv4/fib_rules.c)">
<node CREATED="1360661831631" ID="ID_147429604" MODIFIED="1360661971451" TEXT="&#x521b;&#x5efa;struct fib_rules_ops&#x7ed3;&#x6784;&#x5e76;&#x5c06;&#x5176;&#x653e;&#x5165;&#xa;net-&gt;rules_ops&#x548c;net-&gt;ipv4.rules_ops"/>
<node CREATED="1360662662063" ID="ID_1670587251" LINK="#ID_1016406123" MODIFIED="1360681215619" TEXT="fib_default_rules_init(ops) : &#x6dfb;&#x52a0;3&#x6761;&#x9ed8;&#x8ba4;&#x89c4;&#x5219;,&#x6240;&#x8c13;&#x9ed8;&#x8ba4;&#x89c4;&#x5219;&#x6307;&#x5176;match&#x90e8;&#x5206;&#x80fd;&#x5339;&#x914d;&#x4efb;&#x4f55;&#x5305;&#x7684;&#x8def;&#x7531;&#x89c4;&#x5219;.&#xa;&#x8fd9;&#x91cc;&#x6307;&#x5b9a;&#x5f53;&#x5305;&#x5339;&#x914d;&#x4e0d;&#x5230;&#x4efb;&#x4f55;&#x89c4;&#x5219;&#x65f6;&#x5c06;&#x6309;&#x5148;&#x540e;&#x987a;&#x5e8f;&#x4f9d;&#x6b21;&#x67e5;&#x627e;RT_TABLE_LOCAL, RT_TABLE_MAIN, RT_TABLE_DEFAULT3&#x4e2a;&#x8def;&#x7531;&#x8868;&#x4ee5;&#x83b7;&#x53d6;&#x8def;&#x7531;&#x6761;&#x76ee;&#xa;&#x8def;&#x7531;&#x89c4;&#x5219;&#x5b58;&#x653e;&#x5728;net-&gt;rules_ops-&gt;rules_list&#x4e2d;"/>
</node>
</node>
</node>
<node CREATED="1360658466921" ID="ID_897749832" MODIFIED="1360738885974" TEXT="nl_fib_lookup_init&#xa;&#x521b;&#x5efa;&#x4e00;&#x4e2a;netlink socket&#x5e76;&#x4fdd;&#x5b58;&#x5728;net-&gt;ipv4.fibnl, &#x6b64;socket&#x7528;&#x4e8e;&#x54cd;&#x5e94;&#xa;&#x7528;&#x6237;&#x5c42;&#x7684;&#x8def;&#x7531;&#x64cd;&#x4f5c;(&#x5982;ip route add/del, ip rule add/del)"/>
<node CREATED="1360658476805" ID="ID_1106017355" MODIFIED="1360739161288" TEXT="fib_proc_init&#xa;&#x521b;&#x5efa;proc&#x6587;&#x4ef6;/proc/net/route&#x4ee5;&#x663e;&#x793a;&#x5f53;&#x524d;&#x7cfb;&#x7edf;&#x7684;&#x8def;&#x7531;&#x6761;&#x76ee;"/>
</node>
<node CREATED="1360658373024" ID="ID_464850093" MODIFIED="1360658374447" TEXT="fib_net_exit"/>
</node>
</node>
<node CREATED="1360658011730" FOLDED="true" ID="ID_1499343098" MODIFIED="1360740258263" TEXT="register_netdevice_notifier(&amp;fib_netdev_notifier)&#xa;&#x5728;&#x8bbe;&#x5907;&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x6ce8;&#x518c;&#x56de;&#x8c03;&#x51fd;&#x6570;fib_netdev_event&#x4ee5;&#x54cd;&#x5e94;&#x7f51;&#x7edc;&#x63a5;&#x53e3;&#x7684;up/down&#x4e8b;&#x4ef6;">
<node CREATED="1360739493289" ID="ID_768396708" MODIFIED="1360739495182" TEXT="NETDEV_UP"/>
<node CREATED="1360739504683" ID="ID_1848446509" MODIFIED="1360739505706" TEXT="NETDEV_DOWN"/>
<node CREATED="1360739514677" ID="ID_1573606154" MODIFIED="1360739529017" TEXT="NETDEV_CHANGEMTU&#xa;NETDEV_CHANGE"/>
</node>
<node CREATED="1360658024539" FOLDED="true" ID="ID_536008036" MODIFIED="1360740087756" TEXT="register_inetaddr_notifier(&amp;fib_inetaddr_notifier)&#xa;&#x5728;ip&#x5730;&#x5740;&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x6ce8;&#x518c;&#x56de;&#x8c03;&#x51fd;&#x6570;fib_inetaddr_event&#x4ee5;&#x54cd;&#x5e94;ip&#x5730;&#x5740;&#x7684;add/del&#x4e8b;&#x4ef6;">
<node CREATED="1360740076026" ID="ID_1719704527" MODIFIED="1360740077209" TEXT="NETDEV_UP"/>
<node CREATED="1360740084822" ID="ID_326590696" MODIFIED="1360740086143" TEXT="NETDEV_DOWN"/>
</node>
<node CREATED="1360658037987" ID="ID_1189293242" MODIFIED="1360740462237" TEXT="fib_hash_init()&#xa;&#x521b;&#x5efa;&#x9ad8;&#x901f;&#x7f13;&#x5b58;fn_hash_kmem,&#x5b83;&#x7528;&#x4e8e;&#x5206;&#x914d;struct fib_node, &#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x9879;&#x7ed3;&#x6784;&#xa;&#x521b;&#x5efa;&#x9ad8;&#x901f;&#x7f13;&#x5b58;fn_alias_kmem,&#x5b83;&#x7528;&#x4e8e;&#x5206;&#x914d;struct fib_alias, &#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x522b;&#x540d;&#x7ed3;&#x6784;"/>
</node>
<node CREATED="1360646641367" ID="ID_1845638128" MODIFIED="1360646919641" TEXT="&#x542f;&#x7528;&#x4e00;&#x4e2a;workqueue(&#x8c03;&#x7528;&#x51fd;&#x6570;rt_worker_func)&#x5b9a;&#x65f6;&#x626b;&#x63cf;&#x8def;&#x7531;&#x6761;&#x76ee;&#x662f;&#x5426;&#x8d85;&#x65f6;"/>
<node CREATED="1360646943136" FOLDED="true" ID="ID_788038815" MODIFIED="1360740879619" TEXT="register_pernet_subsys(&amp;rt_secret_timer_ops)">
<node CREATED="1360647014357" FOLDED="true" ID="ID_363223015" MODIFIED="1360740877372" TEXT="struct pernet_operations rt_secret_timer_ops = {&#xa;&#x9;.init = rt_secret_timer_init,&#xa;&#x9;.exit = rt_secret_timer_exit,&#xa;};">
<node CREATED="1360647047914" FOLDED="true" ID="ID_858673913" MODIFIED="1360740876498" TEXT="rt_secret_timer_init">
<node CREATED="1360740775957" ID="ID_930959473" MODIFIED="1360740847718" TEXT="&#x521b;&#x5efa;&#x5b9a;&#x65f6;&#x5668;net-&gt;ipv4.rt_secret_timer&#x4ee5;&#x8c03;&#x7528;rt_secret_rebuild&#x5b9a;&#x65f6;&#x5bf9;&#x7f13;&#x51b2;&#x8fdb;&#x884c;&#x51b2;&#x5237;"/>
</node>
<node CREATED="1360647062245" ID="ID_818491576" MODIFIED="1360647063341" TEXT="rt_secret_timer_exit"/>
</node>
</node>
<node CREATED="1360646952310" ID="ID_106342000" MODIFIED="1360741206888" TEXT="ip_rt_proc_init&#xa;&#x521b;&#x5efa;&#x76ee;&#x5f55;/proc/net/rt_cache&#x4ee5;&#x663e;&#x793a;&#x7cfb;&#x7edf;&#x5f53;&#x524d;&#x7684;&#x8def;&#x7531;&#x7f13;&#x5b58;&#xa;&#x521b;&#x5efa;&#x76ee;&#x5f55;/proc/net/rt_acct&#x4ee5;&#x663e;&#x793a;&#x8def;&#x7531;&#x6761;&#x76ee;&#x7684;&#x7edf;&#x8ba1;&#x4fe1;&#x606f;"/>
<node CREATED="1360647196184" ID="ID_1810093692" MODIFIED="1360647268294" TEXT="&#x6ce8;&#x518c;netlink socket&#x9009;&#x9879;RTM_GETROUTE&#x4ee5;&#x8c03;&#x7528;inet_rtm_getroute&#x5c06;&#x5f53;&#x524d;&#x8def;&#x7531;&#x8868;&#x663e;&#x793a;&#x7ed9;&#x7528;&#x6237;&#x7a7a;&#x95f4;"/>
<node CREATED="1360646964105" FOLDED="true" ID="ID_82853215" MODIFIED="1360938239234" TEXT="register_pernet_subsys(&amp;sysctl_route_ops)">
<node CREATED="1360647335040" ID="ID_1792331541" MODIFIED="1360647456601" TEXT="struct pernet_operations sysctl_route_ops = {&#xa;&#x9;.init = sysctl_route_net_init,&#xa;&#x9;.exit = sysctl_route_net_exit,&#xa;};&#xa;&#x4e3b;&#x8981;&#x662f;&#x5728;&#x6bcf;&#x4e2a;net namespace&#x521b;&#x5efa;&#x65f6;&#x521b;&#x5efa;sysctl&#x76ee;&#x5f55;/proc/sys/net/ipv4/route"/>
</node>
</node>
</node>
<node CREATED="1456726658205" FOLDED="true" ID="ID_444374816" MODIFIED="1458583883421" TEXT="&#x8def;&#x7531;&#x8868;&#x7ed3;&#x6784;">
<node CREATED="1456726896636" FOLDED="true" ID="ID_57479488" MODIFIED="1458251899949" TEXT="trie&#x6811;&#x7684;&#x7ed3;&#x6784;">
<node CREATED="1456727428286" ID="ID_920409583" MODIFIED="1456727462870">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456785140751" FOLDED="true" ID="ID_465235038" MODIFIED="1457137964868" TEXT="struct leaf &#x548c; struct leaf_info&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;">
<node CREATED="1456785682293" ID="ID_1590393863" MODIFIED="1456785693897">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_5.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1456785699684" ID="ID_259953771" MODIFIED="1456785720881" TEXT="1&#xff0c;&#x5982;&#x4f55;&#x5339;&#x914d;leaf&#x4e0b;&#x7684;&#x8def;&#x7531;">
<node CREATED="1456785742622" ID="ID_502474220" MODIFIED="1456785835618" TEXT="&#x6bcf;&#x4e00;&#x4e2a;leaf_info&#x5c31;&#x662f;&#x4e00;&#x6761;&#x8def;&#x7531;&#xff0c;&#x5b83;&#x5bf9;&#x5e94;&#x4e86;Linux kernel 3.4&#x7248;&#x672c;&#x4e2d;&#x7684;fib_node&#xff0c;&#x5373;&#x4e00;&#x4e2a;&#x76ee;&#x7684;&#x7f51;&#x6bb5;key / plen"/>
<node CREATED="1456785850785" ID="ID_11371517" MODIFIED="1456786063670" TEXT="&#x5f53; search_key / plen == key&#x65f6;&#xff0c;&#x5373;&#x7528;&#x67d0;&#x4e2a;leaf_info&#x7684;plen&#x53bb;&#x53d6;search_key&#x524d;plen&#x4f4d;&#xff0c;&#x5176;&#x7ed3;&#x679c;&#x7b49;&#x4e8e;leaf&#x4e2d;&#x7684;key&#x65f6;&#xff0c;&#xa;&#x8fd9;&#x65f6;&#x5c31;&#x5339;&#x914d;&#x5230;&#x4e86;&#x4e00;&#x6761;&#x8def;&#x7531;&#xff0c;&#x4ece;&#x800c;&#x53ef;&#x4ee5;&#x53d6;&#x51fa;leaf_info&#x4e2d;&#x7684;&#x8def;&#x7531;&#x4fe1;&#x606f;&#xff1a;fib_alias -&gt; fib_info -&gt; fib_nh&#x3002;"/>
</node>
<node CREATED="1456786070033" ID="ID_825929380" MODIFIED="1456786107134" TEXT="2&#xff0c;leaf_info &#x5bf9; leaf&#x7684;&#x5236;&#x7ea6;">
<node CREATED="1456786131445" ID="ID_391693629" MODIFIED="1456786282101">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      leaf_info &#35201;&#27714; leaf &#30340; key &#20013;plen &#20043;&#21518;&#30340;&#20301;&#20840;&#20026;0&#12290;
    </p>
    <p>
      &#27604;&#22914;&#65292;&#22914;&#26524;plen&#20026;24&#65292;&#37027;&#20040;&#23601;&#35201;&#27714;key&#20013;24&#20301;&#20043;&#21518;&#30340;&#20301;&#20840;&#20026;0&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456786291291" ID="ID_1982080827" MODIFIED="1456786559397" TEXT="&#x4e00;&#x4e2a;leaf&#x4e0b;&#x9762;&#x53ef;&#x80fd;&#x6709;&#x591a;&#x4e2a;leaf_info&#xff0c;&#x6bcf;&#x4e2a;&#x90fd;&#x8981;&#x6c42;key&#x4e2d;plen&#x4ee5;&#x540e;&#x7684;&#x4f4d;&#x5168;&#x4e3a;0&#xff0c;&#x8fd9;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x53d6;&#x4e00;&#x4e2a;&#x6700;&#x5c0f;&#x7684;plen_min&#xff0c;key&#x4e2d;plen_min&#x4f4d;&#x4e4b;&#x540e;&#x7684;&#x4f4d;&#x5e94;&#x5168;&#x4e3a;0&#x3002;&#xa;&#xa;&#x6bd4;&#x5982;&#x6709;2&#x4e2a;Leaf_info&#xff0c;&#x4e00;&#x4e2a;&#x7684;plen&#x4e3a;20&#xff0c;&#x53e6;&#x4e00;&#x4e2a;&#x4e3a;24&#xff0c;&#x8fd9;&#x5c31;&#x8981;&#x6c42;key&#x4e2d;20&#x4f4d;&#x4ee5;&#x540e;&#x7684;&#x4f4d;&#x5168;&#x4e3a;0&#x3002;"/>
</node>
<node CREATED="1456786652309" ID="ID_1948690386" MODIFIED="1456786675172" TEXT="3&#xff0c;leaf &#x5bf9; leaf_info&#x7684;&#x5236;&#x7ea6;">
<node CREATED="1456786697055" ID="ID_1309328490" MODIFIED="1456787125015">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35774; leaf &#30340; key &#20013;&#26368;&#21518;&#19968;&#20010;1&#25152;&#22312;&#30340;&#20301;&#32622;&#20026; x &#20301;&#65292;&#37027;&#20040;&#36825;&#20010; leaf &#19979;&#30340; leaf_info &#30340; plen &#19981;&#21487;&#33021;&#23567;&#20110; x&#12290;&#22914;&#26524;&#23567;&#20110;x&#65292;&#21017;&#19981;&#20250;&#28385;&#36275;&#19978;&#38754;&#25152;&#35828;&#30340;leaf_info&#23545;leaf&#30340;&#21046;&#32422;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27604;&#22914; key &#20026;192.168.8.0&#65292;&#23427;&#30340;&#26368;&#21518;&#19968;&#20010;1&#22312;&#31532;21&#20301;&#65292;&#25152;&#20197;&#36825;&#20010; leaf &#19979;&#30340;leaf_info &#30340;plen &#19981;&#21487;&#33021;&#23567;&#20110;21&#65292;&#21482;&#33021;&#26159;&#22823;&#20110;&#31561;&#20110;21&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456727564141" FOLDED="true" ID="ID_70245755" MODIFIED="1458251901958" TEXT="&#x8def;&#x5f84;&#x538b;&#x7f29;">
<node CREATED="1456727687414" ID="ID_1622575832" MODIFIED="1456727697939">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456859051347" FOLDED="true" ID="ID_1137929316" MODIFIED="1465419203370" TEXT="&#x8def;&#x7531;&#x67e5;&#x627e;">
<node CREATED="1456903738315" FOLDED="true" ID="ID_202007320" MODIFIED="1458251805929" TEXT="&#x76ee;&#x7684;">
<node CREATED="1456903769295" FOLDED="true" ID="ID_1425965231" MODIFIED="1458251794641">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;&#29702;&#35770;&#19978;&#35762;&#65292;&#36335;&#30001;&#26597;&#25214;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#20915;&#23450;IP&#21253;&#30340;&#21435;&#21521;&#65306;&#36716;&#21457; (forward)&#65292;&#21457;&#36865; (output)&#65292;&#36824;&#26159;&#25237;&#36882;&#21040;local host (input)&#12290;
    </p>
    <p>
      &#20174;&#23454;&#29616;&#19978;&#35762;&#65292;&#23601;&#26159;&#32473;skb-&gt;dst-&gt;input()&#65292;skb-&gt;dst-&gt;output()&#20004;&#20010;&#20989;&#25968;&#25351;&#38024;&#36171;&#20540;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20989;&#25968;skb-&gt;dst-&gt;input()&#20250;&#22312;input&#38454;&#27573;&#34987;&#35843;&#29992;&#65292;&#32780;skb-&gt;dst-&gt;output()&#20250;&#22312;output&#38454;&#27573;&#34987;&#35843;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457648795524" ID="ID_651168946" MODIFIED="1457648828073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457648251460" ID="ID_63384521" MODIFIED="1457648602817">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      input()&#21644;output()&#34987;&#35774;&#32622;&#25104;&#20160;&#20040;&#20540;&#65306;
    </p>
    <p>
      &#39318;&#20808;&#21462;&#20915;&#20110;&#21253;&#26159;&#27491;&#22312;&#34987;&#25509;&#25910;&#36824;&#26159;&#27491;&#22312;&#34987;&#21457;&#36865;&#65292;
    </p>
    <p>
      &#20854;&#27425;&#21462;&#20915;&#20110;&#21253;&#30340;&#30446;&#30340;&#22320;&#22336;&#26159;&#21333;&#25773;&#36824;&#26159;&#32452;&#25773;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457649013921" ID="ID_1785483012" MODIFIED="1457649904180" TEXT="input&#x7684;&#x5305;&#x5728;ip_rcv_finish()&#x4e2d;&#x8c03;&#x7528;ip_route_input_noref()&#x6765;&#x67e5;&#x627e;&#x8def;&#x7531;&#xff0c;&#xa;&#x4ece;&#x800c;&#x4e3a;skb-&gt;dst-&gt;input&#x548c;skb-&gt;dst-&gt;output&#x8d4b;&#x503c;&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x8def;&#x7531;&#x51b3;&#x5b9a;&#x5305;&#x9700;&#x8981;&#x88ab;&#x8f6c;&#x53d1;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_forward&#xff0c;&#x800c;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_output&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x8def;&#x7531;&#x51b3;&#x5b9a;&#x5305;&#x9700;&#x8981;&#x88ab;&#x9001;&#x5f80;&#x672c;&#x5730;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_local_deliver&#xff0c;&#x800c;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_rt_bug&#x3002;&#x521d;&#x59cb;&#x5316;skb-&gt;dst-&gt;output&#x662f;&#x4e3a;&#x4e86;&#x68c0;&#x6d4b;skb-&gt;dst-&gt;output&#x662f;&#x5426;&#x88ab;&#x9519;&#x8bef;&#x7684;&#x8c03;&#x7528;&#xff0c;&#x5bf9;&#x4e8e;&#x9001;&#x5f80;&#x672c;&#x5730;&#x7684;&#x5305;&#x7406;&#x8bba;&#x4e0a;&#x5b83;&#x4e0d;&#x5e94;&#x8be5;&#x88ab;&#x8c03;&#x7528;&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x8def;&#x7531;&#x8868;&#x660e;&#x76ee;&#x7684;&#x5730;&#x5740;&#x4e0d;&#x53ef;&#x8fbe;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_error&#xff0c;&#x8fd9;&#x5c06;&#x4ea7;&#x751f;&#x4e00;&#x4e2a;ICMP&#x6d88;&#x606f;&#x3002;ip_error&#x4f1a;&#x91ca;&#x653e;skb&#x7f13;&#x51b2;&#x533a;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;skb-&gt;dst-&gt;output&#x3002;"/>
<node CREATED="1457649013921" ID="ID_1433996687" MODIFIED="1457651058480" TEXT="output&#x7684;&#x5305;&#x5728;ip_queue_xmit()&#x4e2d;&#x8c03;&#x7528;ip_route_output_ports()&#x6765;&#x67e5;&#x627e;&#x8def;&#x7531;&#xff0c;&#xa;&#x4ece;&#x800c;&#x4e3a;skb-&gt;dst-&gt;input&#x548c;skb-&gt;dst-&gt;output&#x8d4b;&#x503c;&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x76ee;&#x7684;&#x5730;&#x5740;&#x662f;&#x8fdc;&#x7a0b;&#x4e3b;&#x673a;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_output&#xff0c;&#x800c;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_rt_bug&#x3002;&#x521d;&#x59cb;&#x5316;skb-&gt;dst-&gt;input&#x662f;&#x4e3a;&#x4e86;&#x68c0;&#x6d4b;skb-&gt;dst-&gt;input&#x662f;&#x5426;&#x88ab;&#x9519;&#x8bef;&#x7684;&#x8c03;&#x7528;&#xff0c;&#x5bf9;&#x4e8e;&#x9001;&#x5f80;&#x8fdc;&#x7a0b;&#x4e3b;&#x673a;&#x7684;&#x5305;&#x7406;&#x8bba;&#x4e0a;&#x5b83;&#x4e0d;&#x5e94;&#x8be5;&#x88ab;&#x8c03;&#x7528;&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x8def;&#x7531;&#x51b3;&#x5b9a;&#x5305;&#x9700;&#x8981;&#x88ab;&#x9001;&#x5f80;&#x672c;&#x5730;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_output&#xff0c;&#x800c;skb-&gt;dst-&gt;input&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_local_deliver&#x3002;&#x5f53;dst_output&#x8c03;&#x7528;ip_output&#x65f6;&#xff0c;&#x540e;&#x8005;&#x5c06;&#x5305;&#x901a;&#x8fc7;loopback&#x8bbe;&#x5907;&#x9001;&#x51fa;&#xff0c;&#x5bfc;&#x81f4;ip_rcv&#x548c;ip_rcv_finish&#x7684;&#x6267;&#x884c;&#x3002;ip_rcv_finish&#x68c0;&#x67e5;&#x5165;&#x53e3;&#x7f13;&#x51b2;&#x533a;&#xff0c;&#x53d1;&#x73b0;skb-&gt;dst&#x4e2d;&#x5df2;&#x7ecf;&#x5b58;&#x5728;&#x8def;&#x7531;&#x4fe1;&#x606f;&#xff0c;&#x56e0;&#x6b64;&#x8c03;&#x7528;dst_input()&#xff0c;&#x4f9d;&#x6b21;&#x8c03;&#x7528;ip_local_deliver&#x5c06;&#x5305;&#x9001;&#x5f80;&#x672c;&#x5730;&#x3002;&#xa;&#xa;&#x5982;&#x679c;&#x76ee;&#x7684;&#x5730;&#x5740;&#x662f;&#x7ec4;&#x64ad;&#x6216;&#x5e7f;&#x64ad;&#x4e0d;&#xff0c;&#x90a3;&#x4e48;skb-&gt;dst-&gt;output&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_mc_output&#xff0c;&#x4e00;&#x822c;&#x6b64;&#x65f6;&#x4e0d;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;skb-&gt;dst-&gt;input&#x3002;&#x4f46;&#x5982;&#x679c;&#x5305;&#x540c;&#x65f6;&#x8fd8;&#x8981;&#x9001;&#x5230;&#x672c;&#x5730;&#x5c31;&#x9700;&#x8981;&#x628a;skb-&gt;dst-&gt;input&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_local_deliver&#x3002;&#x5982;&#x679c;&#x5728;&#x51fa;&#x63a5;&#x53e3;&#x4e0a;&#x5f00;&#x542f;&#x4e86;&#x7ec4;&#x64ad;&#x8def;&#x7531;&#x90a3;&#x5c31;&#x5e94;&#x8be5;&#x5c06;skb-&gt;dst-&gt;input&#x521d;&#x59cb;&#x5316;&#x4e3a;ip_mr_input&#x3002;"/>
<node CREATED="1457651218968" ID="ID_485601330" MODIFIED="1457651402672">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;skb-&gt;dst&#19981;&#33021;&#34987;&#20351;&#29992;&#26102;&#65292;skb-&gt;dst-&gt;input&#21644;skb-&gt;dst-&gt;output&#34987;&#21021;&#22987;&#21270;&#20026;dst_discard&#65292;&#23427;&#21482;&#26159;&#31616;&#21333;&#20002;&#24323;&#21253;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#36335;&#30001;&#32531;&#23384;&#38656;&#35201;&#34987;&#21024;&#38500;&#20294;&#30001;&#20110;&#24341;&#29992;&#35745;&#25968;&#19981;&#20026;0&#36824;&#19981;&#33021;&#34987;&#38144;&#27585;&#26102;&#23601;&#20250;&#20986;&#29616;&#19978;&#36848;&#24773;&#20917;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1456877294213" FOLDED="true" ID="ID_1431457745" MODIFIED="1458251812500" TEXT="&#x603b;&#x4f53;&#x67b6;&#x6784;">
<node CREATED="1456877307748" ID="ID_920643401" MODIFIED="1456877381814">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_route_arch_3.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456877700631" ID="ID_1478137841" MODIFIED="1456880236916">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24635;&#20307;&#19978;&#36335;&#30001;&#26597;&#25214;&#30340;&#36807;&#31243;&#21487;&#20197;&#20998;&#20026;3&#20010;&#37096;&#20998;&#65306;
    </p>
    <p>
      1&#65292;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi4&#30340;&#21021;&#22987;&#21270;&#19982;&#21512;&#27861;&#24615;&#39564;&#35777;&#12290;&#36825;&#19968;&#37096;&#20998;&#21253;&#25324;fib_lookup()&#20043;&#19978;&#30340;&#25152;&#26377;&#37096;&#20998;&#12290;
    </p>
    <p>
      &#20026;&#25509;&#25910;&#30340;IP&#21253;&#26597;&#25214;&#36335;&#30001;&#65292;&#20854;&#20837;&#21475;&#20989;&#25968;&#26159;ip_route_input_noref&#65307;&#20026;&#26412;&#22320;&#21457;&#36865;&#30340;IP&#21253;&#26597;&#25214;&#36335;&#30001;&#65292;&#20854;&#20837;&#21475;&#20989;&#25968;&#26159;ip_route_output_ports&#12290;
    </p>
    <p>
      
    </p>
    <p>
      2&#65292;&#26681;&#25454;&#30446;&#30340;IP&#22320;&#22336;&#25214;&#20986;&#21305;&#37197;&#30340;&#36335;&#30001;&#12290;&#36825;&#20010;&#37096;&#20998;&#21448;&#21487;&#20197;&#20998;&#20026;3&#20010;&#23376;&#37096;&#20998;&#65306;
    </p>
    <p>
      2.1&#65292;&#20915;&#23450;&#26597;&#25214;&#21738;&#24352;&#36335;&#30001;&#34920;&#12290;&#22914;&#26524;&#24320;&#21551;&#20102;&#31574;&#30053;&#36335;&#30001;&#19988;&#29992;&#25143;&#37197;&#32622;&#20102;&#36335;&#30001;&#35268;&#21017;&#65292;&#37027;&#20040;&#23601;&#26597;&#25214;&#36825;&#20123;&#36335;&#30001;&#35268;&#21017;&#20197;&#20915;&#23450;&#20351;&#29992;&#21738;&#24352;&#36335;&#30001;&#34920;&#12290;&#21542;&#21017;&#23601;&#20381;&#27425;&#26597;&#25214;&#31995;&#32479;&#40664;&#35748;&#30340;&#20960;&#24352;&#34920;&#65306;local, main, default&#12290;
    </p>
    <p>
      2.2&#65292;&#36941;&#21382;trie&#26641;&#20197;&#25214;&#21040;&#21305;&#37197;&#30340;&#36335;&#30001;&#12290;&#26597;&#25214;&#20197;&#26368;&#38271;&#21305;&#37197;&#30340;&#26041;&#24335;&#36827;&#34892;&#12290;&#19968;&#20010;struct leaf_info&#32467;&#26500;&#20195;&#34920;&#20102;&#19968;&#26465;&#36335;&#30001;&#65292;&#23427;&#23454;&#38469;&#19978;&#20195;&#34920;&#20102;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;destination_subnet / prefix_length&#65292;&#19982;&#20197;&#21069;&#30340;fib_node&#32467;&#26500;&#31867;&#20284;&#12290;
    </p>
    <p>
      2.3&#65292;&#29992;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi4&#20013;&#30340;&#20854;&#23427;&#20449;&#24687;&#36807;&#28388;&#36335;&#30001;&#65292;&#24182;&#26681;&#25454;&#25214;&#21040;&#30340;&#36335;&#30001;&#22635;&#20805;&#36335;&#30001;&#36820;&#22238;&#20540;struct fib_result&#12290;&#19968;&#26465;&#36335;&#30001;&#30340;&#36335;&#30001;&#20449;&#24687;&#20998;&#25955;&#22312;3&#20010;&#25968;&#25454;&#32467;&#26500;&#37324;&#38754;&#65306;struct fib_alias&#65292;struct fib_info&#65292;struct fib_nh&#12290;&#19968;&#26465;&#36335;&#30001;&#21487;&#33021;&#30001;&#20110;tos&#20540;&#19981;&#19968;&#26679;&#34893;&#29983;&#20986;&#22810;&#20010;&#21035;&#21517;&#65292;&#31216;&#20043;&#20026;struct fib_alias&#12290;&#23613;&#31649;&#26377;&#22810;&#20010;&#21035;&#21517;&#65292;&#20294;&#23427;&#20204;&#37117;&#25351;&#21521;&#21516;&#19968;&#20010;struct fib_info&#12290;struct fib_info&#37324;&#23384;&#20648;&#20102;&#22823;&#37096;&#20998;&#30340;&#36335;&#30001;&#20449;&#24687;&#65292;&#21253;&#25324;metric, type, scope, nexthop&#12290;&#25903;&#25345;&#22810;&#36335;&#24452;&#36335;&#30001;&#26102;&#65292;&#19968;&#20010;struct fib_info&#37324;&#21487;&#33021;&#21547;&#26377;&#22810;&#20010;struct fib_nh&#32467;&#26500;&#65292;&#36335;&#30001;&#30340;&#26368;&#20851;&#38190;&#30340;&#20449;&#24687;gateway&#65292;oif&#23601;&#23384;&#22312;struct fib_nh&#37324;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      3&#65292;&#26500;&#24314;&#36335;&#30001;&#32531;&#23384;&#12290;&#23545;&#20110;&#26368;&#39030;&#23618;API&#65306;ip_route_input_noref&#65292;ip_route_output_ports&#30340;&#35843;&#29992;&#32773;&#32780;&#35328;&#65292;&#23427;&#20204;&#19981;&#29702;&#35299;&#36335;&#30001;&#31995;&#32479;&#20869;&#37096;&#32467;&#26500;struct fib_alias&#65292;struct fib_info&#65292;struct fib_nh&#12290;&#23427;&#20204;&#21482;&#20351;&#29992;&#36335;&#30001;&#32531;&#23384;&#19982;&#36335;&#30001;&#31995;&#32479;&#20132;&#20114;&#12290;&#19968;&#20010;&#36335;&#30001;&#32531;&#23384;&#30001;&#25968;&#25454;&#32467;&#26500;struct rtable&#20195;&#34920;&#65292;&#29305;&#21035;&#30340;&#65292;&#35843;&#29992;&#32773;&#19968;&#33324;&#21482;&#20250;&#35775;&#38382;&#36335;&#30001;&#32531;&#23384;&#30340;&#21327;&#35758;&#26080;&#20851;&#37096;&#20998;&#65292;&#21363;struct dst_entry&#65292;&#23427;&#26159;struct rtable&#30340;&#22522;&#31867;&#12290;&#25152;&#20197;&#31532;&#19977;&#37096;&#20998;&#30340;&#20219;&#21153;&#23601;&#26159;&#26681;&#25454;&#36335;&#30001;&#26597;&#25214;&#36820;&#22238;&#30340;struct fib_result&#26500;&#24314;&#19968;&#20010;&#36335;&#30001;&#32531;&#23384;struct rtable&#65292;&#24182;&#23558;&#20854;&#20013;&#30340;&#21327;&#35758;&#26080;&#20851;&#37096;&#20998;struct dst_entry&#36171;&#20540;&#32473;skb-&gt;dst&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456859711322" FOLDED="true" ID="ID_782568023" MODIFIED="1457720578594" TEXT="&#x89e6;&#x53d1;&#x8def;&#x7531;&#x67e5;&#x627e;&#x7684;&#x70b9;">
<node CREATED="1456861146859" ID="ID_716700733" MODIFIED="1456861183205">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_route_arch_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456861230581" ID="ID_465985915" MODIFIED="1457573051603">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30001;&#22270;&#20013;&#32511;&#33394;&#26694;&#21487;&#35265;&#65292;&#35302;&#21457;&#36335;&#30001;&#26597;&#25214;&#30340;&#28857;&#20027;&#35201;&#26377;2&#20010;&#65292;&#19968;&#26159;&#25910;&#21253;&#26102;&#65292;&#20108;&#26159;&#21457;&#21253;&#26102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456863790802" ID="ID_604142037" MODIFIED="1456863810864">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_route_arch_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456880581735" FOLDED="true" ID="ID_1736495873" MODIFIED="1458251837807">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi4&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#21021;&#22987;&#21270;&#19982;&#21512;&#27861;&#24615;&#39564;&#35777;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456864191310" ID="ID_1407241849" MODIFIED="1456864204358">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_route_arch_2.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1456864145616" FOLDED="true" ID="ID_1925065705" MODIFIED="1457573274745" TEXT="&#x8def;&#x7531;&#x67e5;&#x627e;API&#x7684;&#x533a;&#x522b;">
<node CREATED="1456865056252" ID="ID_707457105" MODIFIED="1456865449478">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib_table_lookup()&#30340;&#36755;&#20837;&#21442;&#25968;&#21482;&#26377;2&#20010;&#65306;
    </p>
    <p>
      &#19968;&#20010;&#26159;&#25152;&#35201;&#26597;&#25214;&#30340;&#36335;&#30001;&#34920;struct fib_table *tb&#65292;&#23427;&#30001;&#26159;&#21542;&#24320;&#21551;&#20102;&#31574;&#30053;&#36335;&#30001;&#65292;&#20197;&#21450;&#29992;&#25143;&#26159;&#21542;&#37197;&#32622;&#20102;&#36335;&#30001;&#35268;&#21017;&#20915;&#23450;&#12290;
    </p>
    <p>
      &#21478;&#19968;&#20010;&#21442;&#25968;&#26159;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi4 *flp&#65292;&#23427;&#20915;&#23450;&#20102;&#35201;&#26597;&#25214;&#21738;&#26465;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#30340;API&#26377;&#24456;&#22810;&#65292;&#23427;&#20204;&#30340;&#21306;&#21035;&#23601;&#22312;&#20110;&#23545;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;struct flowi4 *flp&#36827;&#34892;&#19981;&#21516;&#30340;&#21021;&#22987;&#21270;&#21644;&#19981;&#21516;&#30340;&#26816;&#26597;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456899472742" ID="ID_197381225" MODIFIED="1456899499892">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ipv4_route_arch_4.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456900426258" ID="ID_1462437552" MODIFIED="1456900437038" TEXT="&#x6240;&#x6709;API&#x7684;&#x76f8;&#x540c;&#x70b9;">
<node CREATED="1456900468263" ID="ID_469266567" MODIFIED="1456900501754" TEXT="&#x6240;&#x6709;API&#x90fd;&#x521d;&#x59cb;&#x5316;&#x4e86;saddr&#xff0c;daddr&#xff0c;tos&#x4e09;&#x4e2a;&#x57df;"/>
</node>
<node CREATED="1456900267686" ID="ID_95459705" MODIFIED="1456901287982" TEXT="input&#x7cfb;&#x5217;API&#x4e0e;output&#x7cfb;&#x5217;API&#x7684;&#x4e0d;&#x540c;&#x70b9;">
<node CREATED="1456902659951" ID="ID_1303116080" MODIFIED="1456903225571">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#22522;&#26412;&#30340;&#21306;&#21035;&#24403;&#28982;&#26159;&#35843;&#29992;input&#31995;&#21015;API&#30340;&#20301;&#32622;&#19982;output&#31995;&#21015;API&#19981;&#21516;&#12290;
    </p>
    <p>
      input&#31995;&#21015;API&#26159;&#22312;&#21253;&#36755;&#20837;&#31995;&#32479;&#26102;&#34987;&#35843;&#29992;&#65292;&#20063;&#21363;ip_recv_finish()&#20989;&#25968;&#20013;&#35843;&#29992;&#12290;&#27492;&#26102;&#26597;&#25214;&#36335;&#30001;&#30340;&#30446;&#30340;&#26159;&#24819;&#20915;&#23450;&#23558;&#21253;&#36716;&#21457;&#21040;&#20986;&#25509;&#21475;&#36824;&#26159;&#25237;&#36882;&#21040;local host&#33258;&#24049;&#12290;
    </p>
    <p>
      output&#31995;&#21015;API&#26159;&#22312;&#26412;&#22320;&#21457;&#21253;&#26102;&#34987;&#35843;&#29992;&#65292;tcp/udp/raw&#20250;&#22312;&#19981;&#21516;&#22320;&#28857;&#35843;&#29992;output&#31995;&#21015;API&#65292;&#20856;&#22411;&#22320;&#65292;tcp&#21253;&#26159;&#22312;ip_queue_xmit()&#20989;&#25968;&#20013;&#35843;&#29992;&#12290;&#27492;&#26102;&#26597;&#25214;&#36335;&#30001;&#30340;&#30446;&#30340;&#26159;&#24819;&#20915;&#23450;&#23558;&#21253;&#21457;&#36865;&#21040;&#20986;&#25509;&#21475;&#36824;&#26159;&#25237;&#36882;&#21040;local host&#33258;&#24049;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456900523706" ID="ID_685884606" MODIFIED="1456900703259">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      input&#31995;&#21015;API&#21021;&#22987;&#21270;&#20102;&#20837;&#21475;&#35774;&#22791;flowic_iif&#65292;&#20294;&#27809;&#26377;&#35774;&#32622;&#20986;&#21475;&#35774;&#22791;flowic_oif
    </p>
    <p>
      output&#31995;&#21015;API&#21021;&#22987;&#21270;&#20102;&#20986;&#21475;&#35774;&#22791;flowic_oif&#65292;&#28982;&#21518;&#23558;&#20837;&#21475;&#35774;&#22791;flowic_iif&#35774;&#32622;&#20026;&#29615;&#22238;&#21475;loopback&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456900785396" ID="ID_1206621057" MODIFIED="1456900912122">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      input&#31995;&#21015;API&#20256;&#20837;&#20102;skb&#20316;&#20026;&#21442;&#25968;&#65292;&#25152;&#20197;&#23427;&#20204;&#19968;&#33324;&#23558;flowic_mark&#21021;&#22987;&#21270;&#20026;skb-&gt;mark&#12290;
    </p>
    <p>
      output&#31995;&#21015;API&#20256;&#20837;&#20102;socket&#20316;&#20026;&#21442;&#25968;&#65292;&#25152;&#20197;&#23427;&#20204;&#19968;&#33324;&#23558;flowic_mark&#21021;&#22987;&#21270;&#20026;sk-&gt;sk_mark&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456900956413" ID="ID_1964567617" MODIFIED="1456901046296">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      input&#31995;&#21015;API&#23558;flowic_scope&#35774;&#20026;universe&#65292;
    </p>
    <p>
      output&#31995;&#21015;API&#21017;&#26681;&#25454;tos&#20540;&#30340;&#26368;&#20302;&#20301;&#19981;&#21516;&#35774;&#32622;&#25104;universe&#25110;link
    </p>
  </body>
</html></richcontent>
<node CREATED="1456901059301" ID="ID_175856153" MODIFIED="1456901225359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      tos&#20540;&#23454;&#38469;&#19978;&#21482;&#21344;&#29992;&#20102;8bit&#30340;&#39640;6bit&#65292;&#21097;&#19979;&#30340;2bit&#27809;&#26377;&#29992;&#65292;&#25925;&#32780;&#21487;&#20197;&#34987;API&#30340;&#35843;&#29992;&#32773;&#29992;&#26469;&#25351;&#31034;scope&#12290;
    </p>
    <p>
      &#22914;&#26524;&#29992;&#25143;&#19981;&#29305;&#24847;&#25351;&#23450;&#65292;&#37027;&#20040;&#26368;&#20302;&#20301;&#20026;0&#65292;scope&#20026;universe&#12290;&#33509;&#29992;&#25143;&#23558;tos&#26368;&#20302;&#20301;&#35774;&#20026;1&#65292;&#37027;&#20040;scope&#23601;&#34987;&#35774;&#20026;link&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456901256299" ID="ID_1640157013" MODIFIED="1456901279913" TEXT="output&#x7cfb;&#x5217;API&#x7684;&#x4e0d;&#x540c;&#x70b9;">
<node CREATED="1456901396390" ID="ID_760621233" MODIFIED="1456901589027">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip_route_output(daddr, saddr, tos, oif)
    </p>
    <p>
      &#25552;&#20379;&#20102;&#22522;&#26412;&#30340;&#21442;&#25968;&#32473;&#35843;&#29992;&#32773;&#65292;&#36825;&#36866;&#29992;&#20110;&#31616;&#21333;&#30340;&#36335;&#30001;&#26597;&#25214;&#22330;&#26223;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456901598737" ID="ID_1013930609" MODIFIED="1456901757075">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip_route_output_ports(flp, sk, daddr, saddr, dport, sport, protocol, tos, oif)
    </p>
    <p>
      &#25552;&#20379;&#20102;&#27604;&#36739;&#20840;&#38754;&#30340;&#21442;&#25968;&#32473;&#35843;&#29992;&#32773;&#65292;&#21253;&#21547;&#20102;flowi4&#26412;&#36523;&#21644;socket&#65292;&#36824;&#26377;4&#23618;&#30340;&#31471;&#21475;&#21495;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456901847538" ID="ID_582236810" MODIFIED="1456902426911">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip_route_output_key(flp)
    </p>
    <p>
      ip_route_output_flow(flp, sk)
    </p>
    <p>
      __ip_route_output_key(flp)
    </p>
    <p>
      &#36825;3&#20010;API&#37117;&#23558;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;flowi4&#26412;&#36523;&#25552;&#20379;&#32473;&#20102;&#35843;&#29992;&#32773;&#65292;&#35843;&#29992;&#32773;&#21487;&#20197;&#33258;&#30001;&#25351;&#23450;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;&#65292;&#22240;&#32780;&#20855;&#26377;&#26368;&#22823;&#30340;&#33258;&#30001;&#24230;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#19977;&#20010;API&#26159;&#20174;&#19978;&#24448;&#19979;&#35843;&#29992;&#30340;&#20851;&#31995;&#65292;&#25152;&#20197;&#26368;&#32456;&#37117;&#20250;&#25191;&#34892;&#21040;__ip_route_output_key()&#12290;
    </p>
    <p>
      ip_route_output_flow()&#38500;&#20102;&#36335;&#30001;&#26597;&#25214;&#22806;&#36824;&#20250;&#20570;&#19968;&#20123;&#39069;&#22806;&#30340;&#24037;&#20316;&#65292;&#37027;&#23601;&#26159;&#25214;&#21040;&#36335;&#30001;&#21518;&#20877;&#26597;&#25214;IPSEC&#20869;&#37096;&#30340;&#34920;&#30475;&#26159;&#21542;&#38656;&#35201;&#23558;skb-&gt;dst&#26367;&#25442;&#20026;IPSEC&#35774;&#32622;struct dst_entry&#65292;&#20197;&#20415;&#36827;&#34892;&#21518;&#32493;&#30340;&#21152;&#23494;&#25110;&#35299;&#23494;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456881659376" ID="ID_241801936" MODIFIED="1457246553114" TEXT="&#x5408;&#x6cd5;&#x6027;&#x9a8c;&#x8bc1;">
<node CREATED="1456881673522" FOLDED="true" ID="ID_493527406" MODIFIED="1457653261668" TEXT="ip_route_input_slow">
<node CREATED="1456907133371" HGAP="237" ID="ID_140941902" MODIFIED="1457033154521" VSHIFT="22">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_input_1.JPG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1457033107476" ID="ID_799524289" MODIFIED="1457033141463">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_input_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457035227923" ID="ID_241579623" MODIFIED="1457035482914">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#65292;broadcast input&#24182;&#19981;&#31616;&#21333;&#25351;&#30446;&#30340;IP&#22320;&#22336;&#20026;255.255.255.255&#12290;
    </p>
    <p>
      &#23427;&#20063;&#21487;&#20197;&#26159;&#23376;&#32593;&#24191;&#25773;&#65292;&#27604;&#22914;192.168.10.255&#25110;&#32773;192.168.10.0&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#31449;&#22312;&#36755;&#20837;&#28857;&#19978;&#32771;&#23519;&#19968;&#20010;&#25910;&#21040;&#30340;&#24191;&#25773;&#21253;&#65292;&#24403;&#28982;&#26159;&#35201;&#23558;&#23427;&#25237;&#36882;&#21040;&#26412;&#22320;&#65292;&#25152;&#20197;&#23427;&#26368;&#32456;&#20250;&#36716;&#20837;local input&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457033208582" ID="ID_302099481" MODIFIED="1457033669459">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib_validate_source() &#65306;&#26816;&#39564;&#28304;IP&#22320;&#22336;&#30340;&#21512;&#27861;&#24615;
    </p>
    <p>
      &#35760;&#20303;&#65292;&#29616;&#22312;&#26159;&#31449;&#22312;&#36755;&#20837;&#28857;&#26816;&#39564;&#28304;IP&#22320;&#22336;&#30340;&#21512;&#27861;&#24615;&#65292;
    </p>
    <p>
      &#37027;&#20040;&#39318;&#20808;&#28304;IP&#22320;&#22336;&#19981;&#33021;&#26159;&#26412;&#22320;&#37197;&#32622;&#30340;IP&#22320;&#22336;&#65292;
    </p>
    <p>
      &#20854;&#27425;&#23427;&#35201;&#31526;&#21512;&#21453;&#21521;&#36335;&#24452;&#36807;&#28388;RPF&#30340;&#26816;&#26597;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21453;&#21521;&#36335;&#24452;&#36807;&#28388;&#65306;&#23558;&#28304;IP&#22320;&#22336;&#20316;&#20026;&#30446;&#30340;IP&#22320;&#22336;&#21435;&#26597;&#25214;&#36335;&#30001;&#65292;&#24471;&#21040;&#30340;&#20986;&#25509;&#21475;&#24517;&#39035;&#31561;&#20110;&#21253;&#30340;&#20837;&#21475;&#12290;
    </p>
    <p>
      &#23427;&#20551;&#35774;&#20102;&#20174;&#28304;IP&#21040;&#30446;&#30340;IP&#30340;&#36335;&#24452;&#21644;&#21040;&#20174;&#30446;&#30340;IP&#21040;&#28304;IP&#30340;&#36335;&#24452;&#26159;&#21516;&#19968;&#26465;&#36335;&#24452;&#65292;&#20294;&#36825;&#31181;&#20551;&#35774;&#22312;&#22810;&#36335;&#24452;&#36335;&#30001;&#26102;&#21487;&#33021;&#20250;&#19981;&#25104;&#31435;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456881686301" FOLDED="true" ID="ID_1911595364" MODIFIED="1457656688628" TEXT="__ip_route_output_key">
<node CREATED="1456952254828" ID="ID_1662227029" MODIFIED="1456952281868">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_output_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456966074785" ID="ID_1021756377" MODIFIED="1456966118086" TEXT="&#x603b;&#x4f53;&#x800c;&#x8a00;&#xff0c;&#x5408;&#x6cd5;&#x6027;&#x9a8c;&#x8bc1;&#x96c6;&#x4e2d;&#x5728;&#x6e90;IP&#xff0c;&#x76ee;&#x7684;IP&#xff0c;&#x51fa;&#x63a5;&#x53e3;&#x4e0a;&#x3002;"/>
<node CREATED="1456966123826" FOLDED="true" ID="ID_1497588561" MODIFIED="1457655756925">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26412;&#22320;&#21457;&#36865;&#30340;IP&#21253;&#24517;&#39035;&#26377;&#19968;&#20010;&#38750;0&#30340;&#28304;IP&#22320;&#22336;&#65292;
    </p>
    <p>
      &#22240;&#27492;&#24517;&#39035;&#22312;&#36335;&#30001;&#26597;&#25214;&#23436;&#25104;&#21518;&#36873;&#23450;&#19968;&#20010;&#38750;0&#30340;&#28304;IP&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456966655542" ID="ID_1952878476" MODIFIED="1456967087936">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21442;&#25968;&#20013;&#30340;&#28304;IP&#22320;&#22336;&#24050;&#32463;&#26159;&#38750;0&#20102;&#65292;&#37027;&#20040;&#25105;&#20204;&#21097;&#19979;&#30340;&#23601;&#26159;&#39564;&#35777;&#20854;&#21512;&#27861;&#24615;&#65306;
    </p>
    <p>
      1&#65292;&#23427;&#19981;&#33021;&#26159;&#24191;&#25773;&#65292;&#32452;&#25773;&#65292;&#25110;0.x.x.x&#12290;
    </p>
    <p>
      2&#65292;&#23427;&#24517;&#39035;&#26159;&#37197;&#32622;&#22312;&#26576;&#20010;&#25509;&#21475;&#19978;&#30340;IP&#22320;&#22336;&#65292;&#32780;&#19981;&#26159;&#19968;&#20010;&#26412;&#22320;&#31995;&#32479;&#19981;&#23384;&#22312;&#30340;&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456966852598" ID="ID_126847659" MODIFIED="1456970976808">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21442;&#25968;&#20013;&#30340;&#28304;IP&#22320;&#22336;&#26159;0&#65292;&#37027;&#20040;&#25105;&#20204;&#24212;&#35813;&#36873;&#25321;&#20986;&#25509;&#21475;&#19978;&#37197;&#32622;&#30340;&#19968;&#20010;IP&#22320;&#22336;&#20316;&#20026;&#28304;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27492;&#26102;&#25105;&#20204;&#38754;&#20020;2&#20010;&#38382;&#39064;&#65306;
    </p>
    <p>
      1&#65292;&#21487;&#33021;&#20986;&#25509;&#21475;&#20063;&#27809;&#26377;&#25351;&#23450;&#65292;&#37027;&#20040;&#23601;&#21482;&#26377;&#31561;&#36335;&#30001;&#36873;&#23450;&#21518;&#20877;&#22312;&#36335;&#30001;&#30340;&#20986;&#25509;&#21475;&#19978;&#36873;&#25321;IP&#22320;&#22336;&#20316;&#20026;&#28304;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      &#37027;&#20040;&#22312;&#21512;&#27861;&#24615;&#39564;&#35777;&#30340;&#29616;&#38454;&#27573;&#28304;IP&#22320;&#22336;&#21482;&#33021;&#30041;&#31354;&#65292;&#30041;&#24453;&#36335;&#30001;&#36873;&#23450;&#21518;&#20877;&#30830;&#23450;&#12290;&#27880;&#24847;&#36335;&#30001;&#30340;&#36873;&#25321;&#21462;&#20915;&#20110;&#30446;&#30340;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      2&#65292;&#22914;&#26524;&#25351;&#23450;&#20102;&#20986;&#25509;&#21475;&#65292;&#36825;&#20010;&#20986;&#25509;&#21475;&#19978;&#20063;&#21487;&#33021;&#37197;&#32622;&#20102;&#22810;&#20010;&#22320;&#22336;&#65292;&#20855;&#20307;&#36873;&#25321;&#21738;&#20010;&#20316;&#28304;IP&#22320;&#22336;&#21462;&#20915;&#20110;&#30446;&#30340;IP&#22320;&#22336;&#65306;
    </p>
    <p>
      &#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#26159;link local&#30340;&#32452;&#25773;224.0.0.x&#25110;&#32773;&#26159;&#24191;&#25773;&#65292;&#37027;&#20040;&#23601;&#22312;&#20986;&#25509;&#21475;&#19978;&#36873;&#25321;&#19968;&#20010;scope&#20026;link&#30340;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#26159;&#19968;&#33324;&#30340;&#32452;&#25773;224.x.x.x&#65292;&#37027;&#20040;&#23601;&#22312;&#20986;&#25509;&#21475;&#19978;&#36873;&#25321;&#19968;&#20010;scope&#20026;universe&#30340;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#26159;&#21333;&#25773;&#65292;&#37027;&#20040;&#23601;&#30475;&#36873;&#23450;&#30340;&#36335;&#30001;&#19978;&#26377;&#27809;&#26377;&#38656;&#35201;&#20248;&#20808;&#20351;&#29992;&#30340;&#28304;IP&#22320;&#22336;(prefer source)&#12290;&#36825;&#20063;&#24847;&#21619;&#30528;&#28304;IP&#30041;&#24453;&#36335;&#30001;&#36873;&#23450;&#21518;&#20877;&#30830;&#23450;&#12290;
    </p>
    <p>
      &#26368;&#21518;&#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#29978;&#33267;&#27809;&#35774;&#32622;&#65292;&#32780;&#26159;&#20026;0&#65292;&#37027;&#20040;&#23601;&#22312;&#20986;&#25509;&#21475;&#19978;&#36873;&#25321;&#19968;&#20010;scope&#20026;host&#30340;IP&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457643889652" FOLDED="true" ID="ID_253887823" MODIFIED="1457645398404" TEXT="inet_select_addr(dev, dst, scope)">
<node CREATED="1457643959027" ID="ID_1564607766" MODIFIED="1457643986403" TEXT="&#x5728;&#x8bbe;&#x5907;&#x4e0a;&#x9009;&#x62e9;&#x4e00;&#x4e2a;&#x76f8;&#x540c;scope&#x7684;&#x4e3b;&#x5730;&#x5740;"/>
<node CREATED="1457644062552" ID="ID_157747645" MODIFIED="1457645375227">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#19977;&#20010;&#21442;&#25968;&#20013;&#65292;scope&#26159;&#24517;&#39035;&#30340;&#65292;&#32780;dev&#65292;dst&#26159;&#21487;&#36873;&#30340;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#25351;&#23450;&#20102;dev&#37027;&#23601;&#20808;&#22312;dev&#19978;&#36873;&#25321;&#65292;&#33509;&#26524;&#27809;&#26377;&#25351;&#23450;&#25110;&#32773;&#22312;&#25351;&#23450;&#30340;dev&#19978;&#25214;&#19981;&#21040;&#65292;&#21017;&#36941;&#21382;&#31995;&#32479;&#20013;&#30340;&#25152;&#26377;&#35774;&#22791;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#25351;&#23450;&#20102;dst&#65292;&#37027;&#23601;&#21482;&#36873;&#25321;&#19982;dst&#21516;&#19968;&#32593;&#27573;&#30340;&#20027;&#22320;&#22336;&#12290;&#27599;&#20010;&#20027;&#22320;&#22336;&#26377;&#19968;&#20010;&#32593;&#27573;&#25513;&#30721;&#12290;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;dst&#21017;&#20219;&#19968;&#20027;&#22320;&#22336;&#37117;&#21487;&#65292;&#21482;&#35201;&#23427;&#26377;&#30456;&#21516;&#30340;scope&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1456971245339" ID="ID_1981492663" MODIFIED="1456971501423">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#26469;&#35828;&#30446;&#30340;IP&#22320;&#22336;&#26159;&#24517;&#39035;&#25351;&#23450;&#30340;&#12290;&#22914;&#26524;&#23454;&#22312;&#27809;&#25351;&#23450;&#65292;&#25105;&#20204;&#21482;&#33021;&#29615;&#22238;&#36825;&#20010;&#21253;&#12290;
    </p>
    <p>
      &#36825;&#24847;&#21619;&#30528;&#25105;&#20204;&#25226;&#30446;&#30340;IP&#22320;&#22336;&#35774;&#20026;&#28304;IP&#22320;&#22336;&#65292;&#25110;&#32773;&#28304;IP&#22320;&#22336;&#20063;&#20026;0&#26102;&#35774;&#20026;&#29615;&#22238;&#22320;&#22336;127.0.0.1&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456971930375" FOLDED="true" ID="ID_121850508" MODIFIED="1457117180302">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26412;&#22320;&#21457;&#36865;&#30340;IP&#21253;&#24517;&#39035;&#26377;&#19968;&#20010;&#20986;&#25509;&#21475;&#65292;
    </p>
    <p>
      &#22240;&#27492;&#24517;&#39035;&#22312;&#36335;&#30001;&#26597;&#25214;&#23436;&#25104;&#21518;&#36873;&#23450;&#19968;&#20010;&#20986;&#25509;&#21475;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456972105808" ID="ID_816914717" MODIFIED="1456972205978">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24050;&#32463;&#25351;&#23450;&#20102;&#20986;&#25509;&#21475;&#65292;&#37027;&#20040;&#21097;&#19979;&#30340;&#23601;&#26159;&#39564;&#35777;&#20854;&#21512;&#27861;&#24615;&#20102;&#65306;
    </p>
    <p>
      &#23427;&#24517;&#39035;&#22312;&#31995;&#32479;&#20013;&#23384;&#22312;&#65292;&#24182;&#19988;&#24050;&#32463;up&#65292;&#36824;&#35201;&#26159;&#19968;&#20010;IP&#23618;&#30340;&#25509;&#21475;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456972902894" ID="ID_1477595764" MODIFIED="1456972955194" TEXT="&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6307;&#x5b9a;&#x51fa;&#x63a5;&#x53e3;&#xff0c;&#x90a3;&#x5c31;&#x53d6;&#x51b3;&#x4e8e;&#x76ee;&#x7684;IP&#x5730;&#x5740;&#x4e86;">
<node CREATED="1456973022734" ID="ID_1081562253" MODIFIED="1456973313578">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#20026;&#32452;&#25773;&#25110;&#32773;&#24191;&#25773;&#65292;&#37027;&#23601;&#36873;&#25321;&#28304;IP&#22320;&#22336;&#25152;&#22312;&#30340;&#25509;&#21475;&#12290;&#24403;&#28982;&#28304;IP&#22320;&#22336;&#20063;&#21487;&#33021;&#27809;&#25351;&#23450;&#65292;&#36825;&#26102;&#23601;&#21482;&#33021;&#31561;&#36335;&#30001;&#36873;&#23450;&#21518;&#20877;&#20316;&#20915;&#23450;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456973022734" ID="ID_142130563" MODIFIED="1456973376287">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#30446;&#30340;&#22320;&#22336;&#20026;&#21333;&#25773;&#65292;&#20063;&#30041;&#24453;&#36335;&#30001;&#36873;&#23450;&#21518;&#20877;&#20316;&#20915;&#23450;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456973396590" ID="ID_1946323760" MODIFIED="1456973445517" TEXT="&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6307;&#x5b9a;&#x76ee;&#x7684;&#x5730;&#x5740;&#xff0c;&#x90a3;&#x4e48;&#x53ea;&#x80fd;&#x73af;&#x56de;IP&#x5305;&#xff0c;&#x6240;&#x4ee5;&#x5c06;&#x51fa;&#x63a5;&#x53e3;&#x8bbe;&#x4e3a;&#x73af;&#x56de;&#x63a5;&#x53e3;&#x3002;"/>
</node>
</node>
<node CREATED="1457654190830" ID="ID_951011713" MODIFIED="1457654815843">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30001;&#21491;&#22270;&#21487;&#30693;&#26377;3&#31181;&#19981;&#38656;&#35201;&#35843;&#29992;fib_lookup()&#21363;&#21487;&#36335;&#30001;&#21253;&#30340;&#24773;&#24418;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457654260331" ID="ID_132753207" MODIFIED="1457654485823">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27809;&#26377;&#25351;&#23450;&#20986;&#25509;&#21475;&#65292;&#20294;&#30446;&#30340;&#22320;&#22336;&#20026;&#32452;&#25773;&#25110;&#24191;&#25773;&#65306;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457654514502" ID="ID_1580143363" MODIFIED="1457654726306">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#25351;&#23450;&#25509;&#21475;&#19978;&#21457;&#36865;&#26412;&#22320;&#22810;&#25773;(224.0.0.x)&#25110;&#24191;&#25773;(255.255.255.255)&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#30001;&#20110;&#26159;&#21463;&#38480;&#30340;&#24191;&#25773;&#65292;&#23427;&#30340;&#30446;&#30340;&#22320;&#22336;&#19968;&#23450;&#26159;&#30446;&#30340;IP&#26412;&#36523;&#65292;&#21363;&#22312;&#20986;&#25509;&#21475;&#30340;link&#19978;&#12290;
    </p>
    <p>
      &#27492;&#26102;&#20986;&#25509;&#21475;&#21644;&#19979;&#19968;&#36339;&#37117;&#24050;&#32463;&#30693;&#36947;&#20102;&#65292;&#25152;&#20197;&#26080;&#38656;&#20877;&#26597;&#25214;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457654738470" ID="ID_1898854602" MODIFIED="1457654808596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30446;&#30340;IP&#26159;0.0.0.0&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#26679;&#30340;&#21253;&#21482;&#33021;&#34987;&#21457;&#36865;&#32473;&#33258;&#24049;&#65292;&#25152;&#20197;&#20063;&#26159;&#30830;&#23450;&#30340;&#65292;&#26080;&#38656;&#20877;&#26597;&#25214;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457250974649" ID="ID_903144174" MODIFIED="1457335916938">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_output_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457251285645" ID="ID_877000673" MODIFIED="1457251350970" TEXT="&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;&#x51fa;&#x63a5;&#x53e3;&#xff0c;&#x90a3;&#x4e48;&#x5373;&#x4f7f;&#x8def;&#x7531;&#x67e5;&#x627e;&#x5931;&#x8d25;&#x4e86;&#x4e5f;&#x53ef;&#x4ee5;&#x7ee7;&#x7eed;&#x53d1;&#x9001;&#x5305;">
<node CREATED="1457655459735" ID="ID_1879723379" MODIFIED="1457655537726">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27492;&#26102;&#34429;&#28982;&#25351;&#23450;&#20102;&#20986;&#25509;&#21475;&#20294;&#27809;&#26377;&#25351;&#23450;&#30446;&#30340;IP&#22320;&#22336;&#65292;&#25152;&#20197;&#21482;&#33021;&#20551;&#23450;&#30446;&#30340;&#22320;&#22336;&#20026;&#20986;&#21475;&#35774;&#22791;&#19978;&#30340;link local&#30340;&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457251573760" ID="ID_52053531" MODIFIED="1457251615952" TEXT="&#x5982;&#x679c;&#x8fd8;&#x6ca1;&#x6307;&#x5b9a;&#x6e90;IP&#x5730;&#x5740;&#xff0c;&#x90a3;&#x5c31;&#x4ece;&#x51fa;&#x63a5;&#x53e3;&#x4e0a;&#x9009;&#x4e00;&#x4e2a;scope&#x4e3a;link&#x7684;IP&#x5730;&#x5740;&#x4f5c;&#x4e3a;&#x6e90;&#x5730;&#x5740;"/>
</node>
<node CREATED="1457251429312" ID="ID_769709634" MODIFIED="1457251487251" TEXT="&#x5982;&#x679c;&#x8def;&#x7531;&#x51b3;&#x5b9a;&#x662f;&#x6295;&#x9012;&#x7ed9;&#x81ea;&#x5df1; (local input)&#xff0c;&#x90a3;&#x4e48;&#x5fc5;&#x987b;&#x5c06;&#x51fa;&#x63a5;&#x53e3;&#x8bbe;&#x7f6e;&#x4e3a;&#x73af;&#x56de;&#x53e3;">
<node CREATED="1457251573760" ID="ID_1905553349" MODIFIED="1457251764335">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#36824;&#27809;&#25351;&#23450;&#28304;IP&#22320;&#22336;&#65292;&#37027;&#23601;&#30475;&#36335;&#30001;&#20013;&#26377;&#27809;&#26377;&#35774;&#32622;&#20248;&#20808;&#36873;&#29992;&#30340;&#28304;IP&#22320;&#22336;&#65292;
    </p>
    <p>
      &#33509;&#27809;&#26377;&#21017;&#21482;&#33021;&#20351;&#29992;&#30446;&#30340;IP&#22320;&#22336;&#20316;&#20026;&#28304;IP&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457251802134" ID="ID_179029164" LINK="#ID_935624093" MODIFIED="1457251990293">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20986;&#25509;&#21475;&#27809;&#26377;&#35774;&#23450;&#24182;&#19988;&#26377;&#22810;&#20010;&#19979;&#19968;&#36339;&#65292;
    </p>
    <p>
      &#25105;&#20204;&#23601;&#35201;&#36827;&#34892;&#22810;&#36335;&#24452;&#36873;&#25321;&#20102;
    </p>
    <p>
      fib_select_multipath ()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457252056964" ID="ID_1195254185" MODIFIED="1457252194601">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20986;&#25509;&#21475;&#27809;&#26377;&#35774;&#23450; &#24182;&#19988;
    </p>
    <p>
      &#25214;&#21040;&#30340;&#36335;&#30001;&#26159;&#40664;&#35748;&#36335;&#30001;0/0 &#24182;&#19988;
    </p>
    <p>
      &#36335;&#30001;&#34920;&#20013;&#26377;&#22810;&#26465;&#40664;&#35748;&#36335;&#30001;
    </p>
    <p>
      &#37027;&#20040;&#25105;&#20204;&#23601;&#35201;&#20174;&#36825;&#22810;&#26465;&#40664;&#35748;&#36335;&#30001;&#20013;&#36873;&#25321;&#19968;&#26465;
    </p>
    <p>
      fib_select_default ()
    </p>
  </body>
</html></richcontent>
<node CREATED="1457252225588" FOLDED="true" ID="ID_1545072481" MODIFIED="1457656354211">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#26469;&#35828;&#19968;&#20010;trie&#21494;&#23376;&#33410;&#28857;&#19979;&#30340;&#22810;&#20010;leaf_info&#65292;&#36335;&#30001;&#26597;&#25214;&#24635;&#26159;&#36820;&#22238;prefix length&#26368;&#38271;&#30340;&#19968;&#20010;&#65292;&#20063;&#23601;&#26159;&#26368;&#38271;&#21305;&#37197;&#27861;&#12290;
    </p>
    <p>
      &#20294;&#26159;&#40664;&#35748;&#36335;&#30001;&#30340;prefix length&#24050;&#32463;&#26159;&#26368;&#30701;&#30340;&#20102;&#65292;&#25152;&#20197;&#26080;&#27861;&#36890;&#36807;prefix length&#26469;&#21306;&#20998;&#22810;&#20010;&#40664;&#35748;&#36335;&#30001;&#30340;&#22909;&#22351;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#32593;&#20851;&#30340;scope&#24517;&#39035;&#26159;link&#65292;&#36825;&#26159;&#26174;&#32780;&#26131;&#35265;&#30340;&#65292;&#36825;&#20316;&#20026;&#21512;&#27861;&#24615;&#26816;&#26597;&#32780;&#19981;&#26159;&#21306;&#20998;&#20248;&#20808;&#32423;&#30340;&#25163;&#27573;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#28982;&#36335;&#30001;&#36824;&#26159;&#26377;2&#20010;&#21306;&#20998;&#20248;&#20808;&#32423;&#30340;&#26631;&#20934;&#65292;tos&#21644;priority&#65306;
    </p>
    <p>
      struct fib_alias -&gt;fa_tos&#20540;&#36234;&#22823;&#21017;&#36335;&#30001;&#20248;&#20808;&#32423;&#36234;&#39640;&#12290;
    </p>
    <p>
      struct fib_info -&gt;priority&#20540;&#36234;&#23567;&#21017;&#36335;&#30001;&#20248;&#20808;&#32423;&#36234;&#39640;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#25152;&#20197;&#22810;&#36335;&#30001;&#36873;&#25321;&#30340;&#36215;&#28857;&#23601;&#26159;&#22312;&#20855;&#26377;&#30456;&#21516;tos&#21644;priority&#20540;&#30340;&#22810;&#20010;&#36335;&#30001;&#20043;&#38388;&#36873;&#25321;&#12290;
    </p>
    <p>
      &#26368;&#21518;&#30340;&#36873;&#25321;&#26631;&#20934;&#26159;&#32593;&#20851;&#30340;&#21487;&#36798;&#24615;&#65292;&#21363;&#37051;&#23621;&#29366;&#24577;&#65292;&#20063;&#23601;&#26159;&#26159;&#21542;&#33021;&#23558;&#32593;&#20851;L3&#22320;&#22336;&#36716;&#25442;&#20026;L2&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457253203838" ID="ID_1512156339" MODIFIED="1457253218249">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_output_3.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457253434952" ID="ID_1614733665" MODIFIED="1457253664298">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#26597;&#25214;&#26102;&#20250;&#25351;&#23450;tos&#20540;&#65292;&#25152;&#20197;&#22810;&#36335;&#30001;&#36873;&#25321;&#39318;&#20808;&#23558;&#36873;&#25321;&#33539;&#22260;&#32553;&#23567;&#21040;
    </p>
    <p>
      &#19982;&#25351;&#23450;tos&#20540;&#30456;&#21516;&#19988;&#20248;&#20808;&#32423;&#26368;&#23567;&#30340;&#19968;&#32452;&#36335;&#30001;&#37324;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27604;&#22914;&#20687;&#21491;&#20391;&#26377;5&#26465;&#40664;&#35748;&#36335;&#30001;&#65292;&#22914;&#26524;&#36335;&#30001;&#26597;&#25214;&#25351;&#23450;&#30340;tos&#20540;&#26159;2&#37027;&#20040;&#25105;&#20204;&#23454;&#38469;&#19978;&#21482;&#33021;&#36873;tos=2&#65292;priority=1&#30340;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457253220816" ID="ID_447102780" MODIFIED="1457254551172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_output_4.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457253672740" ID="ID_101152563" MODIFIED="1457254438919">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;tos&#21644;priority&#37117;&#30456;&#31561;&#30340;&#22522;&#30784;&#19978;&#65292;&#20877;&#29992;&#37051;&#23621;&#21487;&#36798;&#24615;&#29366;&#24577;&#20316;&#21306;&#20998;&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#27492;&#26102;&#20248;&#20808;&#32423;&#21487;&#20197;&#20998;&#20026;3&#20010;&#31561;&#32423;&#65306;
    </p>
    <p>
      &#37051;&#23621;&#29366;&#24577;&#20026;NUD_REACHABLE&#21363;&#26126;&#30830;&#21487;&#36798;&#30340;&#65292;&#20026;&#26368;&#39640;&#31561;&#32423;&#12290;
    </p>
    <p>
      &#37051;&#23621;&#29366;&#24577;&#20026;NUD_VALID&#21363;&#19981;&#30693;&#26159;&#21542;&#21487;&#36798;&#20294;&#30446;&#21069;&#21487;&#29992;&#30340;&#65292;&#20026;&#20013;&#38388;&#31561;&#32423;&#12290;
    </p>
    <p>
      &#37051;&#23621;&#29366;&#24577;&#20026;&#20854;&#23427;&#29366;&#24577;&#21363;&#26126;&#30830;&#19981;&#21487;&#36798;&#30340;&#65292;&#20026;&#26368;&#20302;&#31561;&#32423;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#23558;tos&#21644;priority&#37117;&#30456;&#31561;&#30340;&#25152;&#26377;&#36335;&#30001;&#25490;&#25104;&#22914;&#21491;&#30340;&#34920;&#26684;&#65306;
    </p>
    <p>
      &#36873;&#25321;&#30340;&#21150;&#27861;&#26159;&#65306;&#20174;&#19978;&#21040;&#19979;&#65292;&#20174;&#24038;&#24448;&#21491;&#30340;&#26816;&#26597;&#65292;&#31532;&#19968;&#20010;&#31526;&#21512;&#26465;&#20214;&#30340;&#23601;&#26159;&#25105;&#20204;&#35201;&#36873;&#25321;&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#39318;&#20808;&#26816;&#26597;top&#37027;&#19968;&#26639;&#65292;&#20063;&#23601;&#26159;&#36873;&#25321;&#31532;&#19968;&#20010;&#37051;&#23621;&#29366;&#24577;&#20026;NUD_REACHABLE&#30340;&#36335;&#30001;&#12290;
    </p>
    <p>
      &#20854;&#27425;&#26816;&#26597;middle&#37027;&#19968;&#26639;&#65292;&#20063;&#23601;&#26159;&#36873;&#25321;&#31532;&#19968;&#20010;&#37051;&#23621;&#29366;&#24577;&#20026;NUD_VALID&#30340;&#36335;&#30001;&#12290;&#36825;&#37324;&#26377;&#19968;&#20010;&#20363;&#22806;&#65292;&#23601;&#26159;&#20043;&#21069;&#34987;&#36873;&#20013;&#30340;&#36335;&#30001;&#19981;&#24212;&#35813;&#25918;&#22312;&#36825;&#19968;&#20248;&#20808;&#31561;&#32423;&#65292;&#32780;&#26159;&#35201;&#34987;&#38477;&#19968;&#20010;&#31561;&#32423;&#25918;&#22312;low&#30340;&#31561;&#32423;&#21435;&#27604;&#36739;&#12290;
    </p>
    <p>
      &#26368;&#21518;&#26816;&#26597;low&#37027;&#19968;&#26639;&#12290;&#22312;previous route&#20043;&#21069;&#30340;&#36335;&#30001;&#19981;&#34987;&#25918;&#22312;&#36825;&#19968;&#20248;&#20808;&#31561;&#32423;&#12290;&#32780;previous route&#21482;&#35201;&#26159;&#37051;&#23621;&#29366;&#24577;&#20026;NUD_VALID&#23601;&#31526;&#21512;&#36825;&#19968;&#31561;&#32423;&#12290;previous route&#20043;&#21518;&#30340;&#36335;&#30001;&#37117;&#25918;&#22312;&#36825;&#19968;&#31561;&#32423;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1457655669449" ID="ID_364993241" MODIFIED="1457655892453">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#28304;IP&#22320;&#22336;&#22312;&#21069;&#38754;&#37117;&#27809;&#26377;&#30830;&#23450;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#22312;&#36335;&#30001;&#36873;&#23450;&#21518;&#30830;&#23450;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#36873;&#23450;&#21518;&#29992;&#36335;&#30001;&#20013;&#30340;prefer source address&#20316;&#20026;&#28304;IP&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456880689165" FOLDED="true" ID="ID_1569920475" MODIFIED="1458697272733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;&#30446;&#30340;IP&#22320;&#22336;&#25214;&#20986;&#21305;&#37197;&#30340;&#36335;&#30001;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fib_lookup()
    </p>
  </body>
</html></richcontent>
<node CREATED="1456880715297" FOLDED="true" ID="ID_368161439" MODIFIED="1458697269924" TEXT="&#x51b3;&#x5b9a;&#x67e5;&#x627e;&#x54ea;&#x5f20;&#x8def;&#x7531;&#x8868;">
<node CREATED="1457657925855" ID="ID_531290777" MODIFIED="1457658170113" TEXT="&#x5f53;&#x652f;&#x6301;&#x7b56;&#x7565;&#x8def;&#x7531;&#x65f6;&#x7531;&#x8def;&#x7531;&#x89c4;&#x5219;(struct fib_rule)&#x51b3;&#x5b9a;&#x67e5;&#x627e;&#x54ea;&#x5f20;&#x8def;&#x7531;&#x8868;"/>
<node CREATED="1457658220034" ID="ID_53477279" MODIFIED="1457661398733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25152;&#26377;&#36335;&#30001;&#35268;&#21017;&#34987;&#25918;&#22312;&#20840;&#23616;&#38142;&#34920;fib_rules&#20013;&#65292;&#25353;&#29031;&#20248;&#20808;&#32423;(struct fib_rule -&gt; pref)&#25490;&#21015;&#65292;&#25968;&#20540;&#36234;&#23567;&#21017;&#20248;&#20808;&#32423;&#36234;&#39640;&#12290;
    </p>
    <p>
      &#27880;&#24847;&#36335;&#30001;&#34920;&#26412;&#36523;&#27809;&#26377;&#20248;&#20808;&#32423;&#65292;&#26377;&#20248;&#20808;&#32423;&#30340;&#26159;&#36335;&#30001;&#35268;&#21017;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457658447891" FOLDED="true" ID="ID_488520317" MODIFIED="1458697012766" TEXT="&#x5373;&#x4f7f;&#x7528;&#x6237;&#x6ca1;&#x6709;&#x914d;&#x7f6e;&#x4efb;&#x4f55;&#x8def;&#x7531;&#x89c4;&#x5219;&#xff0c;&#x7cfb;&#x7edf;&#x4e5f;&#x5305;&#x542b;&#x4e09;&#x4e2a;&#x9ed8;&#x8ba4;&#x89c4;&#x5219;">
<node CREATED="1457658480105" ID="ID_1043776126" MODIFIED="1457658490575">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_3.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457658751475" ID="ID_1430782250" MODIFIED="1457659079435">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#35268;&#21017;&#30340;&#40664;&#35748;&#21160;&#20316;&#26159;&#26597;&#25214;&#36335;&#30001;&#34920;&#65292;&#20294;&#26159;&#20063;&#21487;&#20197;&#35774;&#20026;&#19981;&#21516;&#30340;&#21160;&#20316;&#65306;
    </p>
    <p>
      goto&#65306;&#36339;&#21040;&#21478;&#22806;&#19968;&#26465;&#36335;&#30001;&#35268;&#21017;
    </p>
    <p>
      blackhole&#65306;&#31435;&#21363;&#20002;&#24323;&#21253;&#12290;
    </p>
    <p>
      unreachable&#65306;&#31435;&#21363;&#36820;&#22238;&#19981;&#21487;&#36798;&#30340;&#38169;&#35823;&#65292;&#20877;&#30001;&#35843;&#29992;&#32773;&#21457;&#20986;ICMP&#28040;&#24687;&#25552;&#37266;&#28304;&#12290;
    </p>
    <p>
      prohibit&#65306;&#31435;&#21363;&#36820;&#22238;&#31105;&#27490;&#30340;&#38169;&#35823;&#65292;&#20877;&#30001;&#35843;&#29992;&#32773;&#21457;&#20986;ICMP&#28040;&#24687;&#25552;&#37266;&#28304;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#37319;&#29992;&#40664;&#35748;&#21160;&#20316;&#21435;&#26597;&#25214;&#19968;&#24352;&#36335;&#30001;&#34920;&#65292;&#20294;&#21448;&#27809;&#26377;&#21305;&#37197;&#21040;&#20219;&#20309;&#36335;&#30001;&#65292;&#21017;&#32487;&#32493;&#21305;&#37197;&#21097;&#19979;&#30340;&#36335;&#30001;&#35268;&#21017;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456726710639" FOLDED="true" ID="ID_468352946" MODIFIED="1457645475198">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib_table_lookup() &#19978;&#21322;&#37096;&#20998;&#65306;
    </p>
    <p>
      &#26681;&#25454;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;&#20013;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#22312;trie&#26641;&#20013;&#25214;&#21040;&#19968;&#26465;&#20855;&#20307;&#30340;&#36335;&#30001;&#65292;
    </p>
    <p>
      &#21363;&#19968;&#20010;struct leaf_info&#32467;&#26500;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456815363266" ID="ID_1638015936" MODIFIED="1456815411981">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_3.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456732339663" FOLDED="true" ID="ID_1492399732" MODIFIED="1456820061586" TEXT="&#x4e00;&#x6761;&#x8def;&#x7531;&#x7cbe;&#x786e;&#x5339;&#x914d;key&#x662f;&#x6307;&#xff1a;">
<node CREATED="1456819627674" ID="ID_1258023433" MODIFIED="1456819639096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_17.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456819668914" ID="ID_42112029" MODIFIED="1456819911826">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      search key&#31934;&#30830;&#21305;&#37197;&#36335;&#30001;z1&#30340;&#20805;&#20998;&#24517;&#35201;&#26465;&#20214;&#26159;&#65306;
    </p>
    <p>
      search key / z1.plen = z.key&#65292;&#21363;search key&#30340;&#21069;z1.plen&#20301;&#24517;&#39035;&#31561;&#20110;z.key&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27604;&#22914;192.168.8.3&#31934;&#30830;&#21305;&#37197;&#36335;&#30001;z1&#65292;&#20294;192.168.10.3&#19981;&#31934;&#30830;&#21305;&#37197;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456774369009" FOLDED="true" ID="ID_496665301" MODIFIED="1456819427757" TEXT="&#x67e5;&#x627e;&#x4f8b;&#x5b50;">
<node CREATED="1456774404707" ID="ID_427645050" MODIFIED="1456774442065">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_3.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456774477006" ID="ID_1028706402" MODIFIED="1456774511365" TEXT="&#x5728;&#x5982;&#x56fe;&#x6240;&#x793a;&#x7684;trie&#x6811;&#x4e2d;&#x641c;&#x7d22;&#x5339;&#x914d;192.168.10.130&#x7684;&#x8def;&#x7531;"/>
<node CREATED="1456774524269" ID="ID_781710747" MODIFIED="1456774633621" TEXT="&#x9996;&#x5148;&#x904d;&#x5386;&#x5230;X&#x8282;&#x70b9;&#xff0c;&#x5176;pos&#x4e3a;16&#xff0c;bits&#x4e3a;1&#xff0c;&#x6240;&#x4ee5;&#x7528;&#x7b2c;16&#x4f4d;&#x4f5c;&#x5b50;&#x8282;&#x70b9;&#x7684;&#x7d22;&#x5f15;&#xff0c;&#x5373;&#x7528;0&#x7d22;&#x5f15;&#x5230;Z&#x8282;&#x70b9;"/>
<node CREATED="1456774524269" ID="ID_1557773050" MODIFIED="1456774955397">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27492;&#26102;&#36941;&#21382;&#21040;Z&#33410;&#28857;&#65292;&#20854;pos&#20026;22&#65292;bits&#20026;1&#65292;&#25152;&#20197;&#29992;&#31532;22&#20301;&#20316;&#23376;&#33410;&#28857;&#30340;&#32034;&#24341;&#65292;&#21363;&#29992;1&#32034;&#24341;&#21040;&#33410;&#28857;192.168.10.0&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456774524269" ID="ID_1300596600" MODIFIED="1456775013582">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21494;&#23376;&#33410;&#28857;192.168.10.0&#19979;&#21482;&#26377;&#19968;&#26465;&#36335;&#30001;&#65292;&#21363;192.168.10.0/28&#12290;&#20294;&#26159;&#36825;&#26465;&#36335;&#30001;&#24182;&#19981;&#33021;&#21305;&#37197;192.168.10.130&#65292;&#22240;&#20026;
    </p>
    <p>
      192.168.10.130/28 = 192.168.10.128 != 192.168.10.0&#65292;&#25152;&#20197;&#22312;&#21494;&#23376;&#33410;&#28857;192.168.10.0&#22788;&#21305;&#37197;&#22833;&#36133;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456775070400" ID="ID_406505640" MODIFIED="1456775120102" TEXT="&#x7531;&#x4e8e;&#x7cbe;&#x786e;&#x5339;&#x914d;&#x5931;&#x8d25;&#xff0c;&#x6240;&#x4ee5;&#x5fc5;&#x987b;&#x8fdb;&#x5165;prefix matching mode&#x3002;">
<node CREATED="1456775126843" ID="ID_1200565422" MODIFIED="1456775680684" TEXT="&#x5f53;&#x524d;&#x7684;&#x5185;&#x90e8;&#x8282;&#x70b9;&#x662f;Z&#xff0c;&#x5176;&#x5b50;&#x8282;&#x70b9;&#x7d22;&#x5f15;cindex&#x662f;&#x7531;&#x7b2c;22&#x4f4d;&#x6784;&#x6210;&#x7684;1&#xff0c;&#x6b64;&#x65f6;&#x5e94;&#x8be5;&#x4ece;cindex&#x7684;&#x6700;&#x53f3;&#x90e8;&#x5f00;&#x59cb;&#xff0c;&#x4e00;&#x4f4d;&#x4e00;&#x4f4d;&#x5730;&#x987a;&#x5e8f;&#x5730;&#x628a;1&#x780d;&#x6389;&#xff0c;&#x5373;&#x5c06;1&#x53d8;&#x4e3a;0&#x3002;&#x6bcf;&#x780d;&#x6389;&#x4e00;&#x4e2a;1&#xff0c;&#x5373;&#x5c06;1&#x53d8;&#x4e3a;0&#x540e;&#x4f1a;&#x5f62;&#x6210;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x4e0d;&#x540c;&#x503c;&#x7684;cindex&#xff0c;&#x7136;&#x540e;&#x7528;&#x8fd9;&#x4e2a;&#x65b0;&#x7684;cindex&#x503c;&#x53bb;&#x7d22;&#x5f15;&#x5f53;&#x524d;&#x8282;&#x70b9;&#x7684;&#x5b50;&#x8282;&#x70b9;&#xff0c;&#x770b;&#x80fd;&#x4e0d;&#x80fd;&#x5728;&#x65b0;&#x7684;&#x5b50;&#x8282;&#x70b9;&#x4e2d;&#x5339;&#x914d;&#x5230;&#x3002;&#xa;&#xa;&#x5f53;&#x524d;&#x7684;cindex&#x4e3a;1&#xff0c;&#x6240;&#x4ee5;&#x4ece;&#x6700;&#x53f3;&#x90e8;&#x5f00;&#x59cb;&#x4e00;&#x4f4d;&#x4e00;&#x4f4d;&#x5730;&#x987a;&#x5e8f;&#x5730;&#x628a;1&#x780d;&#x6389;&#xff0c;&#x5b83;&#x5c31;&#x53d8;&#x6210;&#x4e86;0,&#x3002;&#xa;&#xa;&#x7528;0&#x53bb;&#x7d22;&#x5f15;Z&#x7684;&#x5b50;&#x8282;&#x70b9;&#x5c31;&#x4f1a;&#x904d;&#x5386;&#x5230;&#x53f6;&#x5b50;&#x8282;&#x70b9;192.168.8.0&#x3002;"/>
<node CREATED="1456774524269" ID="ID_1305038543" MODIFIED="1456775941959">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21494;&#23376;&#33410;&#28857;192.168.8.0&#19979;&#26377;&#20004;&#26465;&#36335;&#30001;&#65292;&#21363;192.168.8.0/24&#21644;192.168.8.0/22&#12290;
    </p>
    <p>
      &#20854;&#20013;&#36335;&#30001;192.168.8.0/24&#24182;&#19981;&#33021;&#21305;&#37197;192.168.10.130&#65292;&#22240;&#20026;192.168.10.130/24 = 192.168.10.0 != 192.168.8.0&#12290;
    </p>
    <p>
      &#20294;&#36335;&#30001;192.168.8.0/22&#33021;&#21305;&#37197;192.168.10.130&#65292;&#22240;&#20026;192.168.10.130/22 = 192.168.8.0 == 192.168.8.0&#12290;
    </p>
    <p>
      &#25152;&#20197;&#22312;&#21494;&#23376;&#33410;&#28857;192.168.8.0&#22788;&#21305;&#37197;&#25104;&#21151;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1456732083887" FOLDED="true" HGAP="18" ID="ID_917262106" MODIFIED="1456819394517" TEXT="prefix matching mode" VSHIFT="-72">
<node CREATED="1456732151377" ID="ID_1971057129" MODIFIED="1456818956662" TEXT="&#x7528;search key&#x641c;&#x7d22;trie&#x6811;&#x641c;&#x7d22;&#x5230;&#x67d0;&#x4e00;&#x4e2a;&#x8282;&#x70b9;(tnode &#x6216; leaf)&#x540e;&#x65e0;&#x6cd5;&#x7ee7;&#x7eed;&#x5339;&#x914d;&#x4e0b;&#x53bb;&#x4e86;&#xff0c;&#x8bf4;&#x660e;&#x5f53;&#x524d;trie&#x6811;&#x4e2d;&#x6ca1;&#x6709;&#x4e00;&#x6761;&#x8def;&#x7531;&#x662f;&#x7cbe;&#x786e;&#x5339;&#x914d;search key&#x7684;&#x3002;&#x8fd9;&#x65f6;&#x5c31;&#x8981;&#x8fdb;&#x5165;prefix matching mode&#x3002;&#xa;&#xa;&#x5177;&#x4f53;&#x6765;&#x8bf4;&#xff0c;&#x5c31;&#x662f;&#x4ece;search key&#x7684;&#x6700;&#x540e;&#x4e00;&#x4f4d;&#x4e0d;&#x5339;&#x914d;&#x7684;&#x4f4d;&#x5f80;&#x56de;&#x780d;&#xff0c;&#x4e00;&#x4f4d;&#x4e00;&#x4f4d;&#x7684;&#x780d;&#xff0c;&#x6bcf;&#x780d;&#x4e00;&#x4f4d;&#x5c31;&#x770b;&#x770b;&#x80fd;&#x4e0d;&#x80fd;&#x5339;&#x914d;&#x5230;&#x7236;&#x8282;&#x70b9;&#x4e0b;&#x7684;&#x67d0;&#x4e00;&#x4e2a;&#x5b50;&#x8282;&#x70b9;&#x3002;&#x5982;&#x679c;&#x780d;&#x5b8c;&#x90fd;&#x65e0;&#x6cd5;&#x5339;&#x914d;&#x5219;&#x56de;&#x6eaf;&#x4e00;&#x7ea7;&#xff0c;&#x56de;&#x5230;&#x7236;&#x8282;&#x70b9;&#x7684;&#x7236;&#x8282;&#x70b9;&#xff0c;&#x7ee7;&#x7eed;&#x780d;&#x3002;">
<node CREATED="1456777006833" ID="ID_1542597841" MODIFIED="1456777130720">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_4.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456777151208" ID="ID_750607685" MODIFIED="1456777204281" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;&#x904d;&#x5386;&#x5230;A&#x8282;&#x70b9;&#xff0c;&#x5e76;&#x4e14;&#x5728;A&#x8282;&#x70b9;&#x4e0b;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x8981;&#x8fdb;&#x5165;prefix matching mode&#x3002;"/>
<node CREATED="1456777218890" ID="ID_698235974" MODIFIED="1456777448952" TEXT="A&#x7684;&#x7236;&#x8282;&#x70b9;&#x662f;D&#xff0c;&#x4e0e;A&#x5bf9;&#x5e94;&#x7684;cindex&#x662f;0b101&#xff0c;&#x90a3;&#x4e48;&#x4ece;cindex&#x7684;&#x6700;&#x53f3;&#x8fb9;&#x5f00;&#x59cb;&#x4e00;&#x4f4d;&#x4e00;&#x4f4d;&#x987a;&#x5e8f;&#x5730;&#x780d;&#xff0c;&#x6700;&#x5148;&#x780d;&#x6389;&#x7684;&#x5c31;&#x662f;&#x6700;&#x53f3;&#x8fb9;&#x7684;1&#xff0c;&#x628a;&#x5b83;&#x53d8;&#x4e3a;0&#xff0c;&#x90a3;&#x4e48;cindex&#x5c31;&#x53d8;&#x6210;&#x4e86;0b100&#xff0c;&#x8fd9;&#x4e2a;cindex&#x7d22;&#x5f15;&#x5230;D&#x4e0b;&#x7684;&#x5b50;&#x8282;&#x70b9;B"/>
<node CREATED="1456777470327" ID="ID_1358740283" MODIFIED="1456777818750" TEXT="&#x5982;&#x679c;&#x5728;&#x5b50;&#x8282;&#x70b9;B&#x4e0b;&#x8fd8;&#x662f;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x8981;&#x7ee7;&#x7eed;&#x780d;&#x3002;&#x521a;&#x624d;&#x780d;&#x6389;&#x7684;&#x662f;cindex&#x7684;&#x6700;&#x53f3;&#x8fb9;&#x7684;&#x4e00;&#x4f4d;&#xff0c;&#x7d27;&#x63a5;&#x7740;&#x5c31;&#x5e94;&#x8be5;&#x780d;&#x4e2d;&#x95f4;&#x90a3;&#x4e00;&#x4f4d;&#x3002;&#x4f46;&#x662f;&#x4e2d;&#x95f4;&#x8fd9;&#x4e00;&#x4f4d;&#x662f;0&#xff0c;&#x628a;&#x5b83;&#x780d;&#x6389;&#x5373;&#x628a;&#x5b83;&#x53d8;&#x6210;0&#x5e76;&#x4e0d;&#x4f1a;&#x6539;&#x53d8;cindex&#x7684;&#x503c;&#xff0c;&#x6211;&#x4eec;&#x7684;&#x76ee;&#x6807;&#x662f;&#x628a;cindex&#x780d;&#x6210;&#x4e00;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x503c;&#xff0c;&#x6240;&#x4ee5;&#x780d;&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#x9047;&#x5230;0&#x5c31;&#x8981;&#x7ee7;&#x7eed;&#x780d;&#xff0c;&#x76f4;&#x5230;&#x780d;&#x6389;&#x4e00;&#x4e2a;1&#x4e3a;&#x6b62;&#x3002;&#x6240;&#x4ee5;&#x7ee7;&#x7eed;&#x780d;&#x5c31;&#x8981;&#x780d;&#x6389;&#x6700;&#x5de6;&#x8fb9;&#x7684;&#x4e00;&#x4f4d;1&#x4e86;&#xff0c;&#x8fd9;&#x65f6;&#x5019;cindex&#x5c31;&#x53d8;&#x6210;&#x4e86;0b000&#xff0c;&#x8fd9;&#x4e2a;cindex&#x7d22;&#x5f15;&#x5230;D&#x4e0b;&#x7684;&#x5b50;&#x8282;&#x70b9;C&#x3002;"/>
<node CREATED="1456778121314" ID="ID_561607302" MODIFIED="1456778682244" TEXT="&#x5982;&#x679c;&#x5728;&#x5b50;&#x8282;&#x70b9;C&#x4e0b;&#x8fd8;&#x662f;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x90a3;&#x4e48;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x6ca1;&#x529e;&#x6cd5;&#x7ee7;&#x7eed;&#x780d;&#x4e86;&#xff0c;&#x56e0;&#x4e3a;cindex&#x603b;&#x5171;&#x53ea;&#x6709;3&#x4f4d;&#xff0c;&#x5168;&#x90e8;&#x780d;&#x5b8c;&#x4e86;&#xff0c;&#x6ca1;&#x6709;&#x529e;&#x6cd5;&#x901a;&#x8fc7;&#x628a;1&#x53d8;&#x4e3a;0&#x6765;&#x4f7f;cindex&#x53d8;&#x4e3a;&#x4e0d;&#x540c;&#x503c;&#x4e86;&#x3002;&#x6b64;&#x65f6;&#x53ea;&#x80fd;&#x518d;&#x56de;&#x6eaf;&#x4e00;&#x7ea7;&#xff0c;&#x4f7f;G&#x6210;&#x4e3a;&#x7236;&#x8282;&#x70b9;&#xff0c;D&#x81ea;&#x5df1;&#x6210;&#x4e3a;&#x5f53;&#x524d;&#x5b50;&#x8282;&#x70b9;&#x3002;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x4e0e;D&#x5bf9;&#x5e94;&#x7684;cindex&#x662f;0b11&#xff0c;&#x5728;&#x6b64;&#x57fa;&#x7840;&#x4e0a;&#x7ee7;&#x7eed;&#x780d;&#x3002;&#xa;&#xa;&#x4ece;&#x65b0;&#x7684;cindex&#x7684;&#x6700;&#x53f3;&#x8fb9;&#x5f00;&#x59cb;&#x4e00;&#x4f4d;&#x4e00;&#x4f4d;&#x987a;&#x5e8f;&#x5730;&#x780d;&#xff0c;&#x6700;&#x5148;&#x780d;&#x6389;&#x7684;&#x5c31;&#x662f;&#x6700;&#x53f3;&#x8fb9;&#x7684;1&#xff0c;&#x628a;&#x5b83;&#x53d8;&#x4e3a;0&#xff0c;&#x90a3;&#x4e48;cindex&#x5c31;&#x53d8;&#x6210;&#x4e86;0b10&#xff0c;&#x8fd9;&#x4e2a;cindex&#x7d22;&#x5f15;&#x5230;G&#x4e0b;&#x7684;&#x5b50;&#x8282;&#x70b9;E"/>
<node CREATED="1456777470327" ID="ID_245156469" MODIFIED="1456778770589" TEXT="&#x5982;&#x679c;&#x5728;&#x5b50;&#x8282;&#x70b9;E&#x4e0b;&#x8fd8;&#x662f;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x8981;&#x7ee7;&#x7eed;&#x780d;&#x3002;&#x521a;&#x624d;&#x780d;&#x6389;&#x7684;&#x662f;cindex&#x7684;&#x6700;&#x53f3;&#x8fb9;&#x7684;&#x4e00;&#x4f4d;&#xff0c;&#x7d27;&#x63a5;&#x7740;&#x5c31;&#x5e94;&#x8be5;&#x780d;&#x6700;&#x5de6;&#x8fb9;&#x90a3;&#x4e00;&#x4f4d;&#xff0c;&#x628a;&#x6700;&#x5de6;&#x8fb9;&#x4e00;&#x4f4d;&#x53d8;&#x6210;0&#xff0c;&#x8fd9;&#x65f6;&#x5019;cindex&#x5c31;&#x53d8;&#x6210;&#x4e86;0b,00&#xff0c;&#x8fd9;&#x4e2a;cindex&#x7d22;&#x5f15;&#x5230;G&#x4e0b;&#x7684;&#x5b50;&#x8282;&#x70b9;F&#x3002;"/>
<node CREATED="1456778778028" ID="ID_525266570" MODIFIED="1456778926002">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#22312;&#23376;&#33410;&#28857;F&#19979;&#36824;&#26159;&#27809;&#26377;&#21305;&#37197;&#30340;&#36335;&#30001;&#65292;&#22240;&#20026;&#22312;&#36825;&#19968;&#32423;&#24050;&#32463;&#27809;&#27861;&#32487;&#32493;&#30733;&#20102;&#65292;&#25152;&#20197;&#21482;&#33021;&#20877;&#21521;&#19978;&#22238;&#28335;&#19968;&#32423;&#12290;&#36825;&#26102;&#29238;&#33410;&#28857;&#35201;&#20877;&#19978;&#19968;&#32423;&#65292;&#32780;cindex&#23601;&#21464;&#25104;&#33410;&#28857;G&#22312;&#26032;&#30340;&#29238;&#33410;&#28857;&#20013;&#30340;&#32034;&#24341;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456778927369" ID="ID_1903351846" MODIFIED="1456778932983" TEXT="&#x4ee5;&#x6b64;&#x7c7b;&#x63a8;&#x3002;"/>
</node>
</node>
</node>
</node>
<node CREATED="1456815418499" ID="ID_1495685860" MODIFIED="1456815430293">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_4.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456729192901" FOLDED="true" ID="ID_435345047" MODIFIED="1456868545025" TEXT="check_leaf()">
<node CREATED="1456819950174" ID="ID_1677448432" MODIFIED="1456820033386" TEXT="&#x904d;&#x5386;leaf&#x4e0b;&#x7684;&#x5404;&#x4e2a;leaf_info&#xff0c;&#x6bcf;&#x4e2a;leaf_info&#x662f;&#x4e00;&#x6761;&#x771f;&#x6b63;&#x7684;&#x8def;&#x7531;&#xff0c;&#x770b;&#x770b;&#x8fd9;&#x4e9b;&#x8def;&#x7531;&#x662f;&#x5426;&#x80fd;&#x7cbe;&#x786e;&#x5339;&#x914d;search key"/>
<node CREATED="1456819627674" ID="ID_206536123" MODIFIED="1456819639096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_17.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456819668914" ID="ID_1091040653" MODIFIED="1456819911826">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      search key&#31934;&#30830;&#21305;&#37197;&#36335;&#30001;z1&#30340;&#20805;&#20998;&#24517;&#35201;&#26465;&#20214;&#26159;&#65306;
    </p>
    <p>
      search key / z1.plen = z.key&#65292;&#21363;search key&#30340;&#21069;z1.plen&#20301;&#24517;&#39035;&#31561;&#20110;z.key&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27604;&#22914;192.168.8.3&#31934;&#30830;&#21305;&#37197;&#36335;&#30001;z1&#65292;&#20294;192.168.10.3&#19981;&#31934;&#30830;&#21305;&#37197;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456820084064" ID="ID_856916726" MODIFIED="1456820189819" TEXT="&#x6ce8;&#x610f;leaf&#x4e0b;&#x7684;leaf_info&#x662f;&#x6309;prefix length&#x4ece;&#x957f;&#x5230;&#x77ed;&#x6392;&#x5217;&#x7684;&#xff0c;&#xa;&#x6240;&#x4ee5;&#x5982;&#x679c;&#x6709;&#x591a;&#x4e2a;&#x53ef;&#x4ee5;&#x7cbe;&#x786e;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x90a3;&#x4e48;&#x6700;&#x540e;&#x8fd4;&#x56de;&#x7684;&#x80af;&#x5b9a;&#x662f;prefix length&#x6700;&#x957f;&#x7684;&#x90a3;&#x4e2a;"/>
</node>
<node CREATED="1456820251957" ID="ID_144898113" LINK="#ID_516455015" MODIFIED="1456868535119">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#26086;&#25214;&#21040;&#19968;&#26465;&#21487;&#20197;&#31934;&#30830;&#21305;&#37197;&#30340;&#36335;&#30001;&#65292;&#21363;&#25214;&#21040;&#19968;&#20010;leaf_info&#65292;&#37027;&#23601;&#21487;&#20197;&#21462;&#20986;leaf_info&#20013;&#30340;&#36335;&#30001;&#20449;&#24687;&#65306;fib_alias -&gt; fib_info -&gt; fib_nh&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1456815505015" ID="ID_1556175083" MODIFIED="1456815515977">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_5.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456731353995" ID="ID_31170318" MODIFIED="1456815737577">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pn&#26159;&#26368;&#36817;&#19968;&#27425;&#21305;&#37197;&#30340;&#20869;&#37096;&#33410;&#28857; tnode&#65292;&#20063;&#23601;&#26159;&#35828;
    </p>
    <p>
      search key / pn.pos = pn.key&#65292;&#21363;search key&#30340;&#21069;pn.pos&#20301;&#19982;pn.key&#30456;&#31561;
    </p>
    <p>
      
    </p>
    <p>
      chopped_off &#26159;cindex&#20013;&#34987;&#30733;&#25481;&#30340;&#20301;&#25968;&#65292;&#21018;&#24320;&#22987;&#36824;&#27809;&#26377;&#36827;&#20837;prefix matching mode&#65292;
    </p>
    <p>
      &#25152;&#20197;&#36824;&#27809;&#26377;&#30733;&#20219;&#20309;&#20301;&#65292;&#22240;&#27492;chopped_off&#21021;&#22987;&#21270;&#20026;0&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456815859035" ID="ID_1366429931" MODIFIED="1456815874877">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_6.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456731701211" ID="ID_1391850864" MODIFIED="1456816467407">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#19968;&#27573;&#20195;&#30721;&#30340;&#30446;&#30340;&#26159;&#25214;&#20986;&#23376;&#33410;&#28857;&#65292;&#26377;2&#31181;&#26041;&#27861;&#65306;
    </p>
    <p>
      1&#65292;&#22914;&#26524;&#24403;&#21069;&#19981;&#26159;prefix matching mode&#65292;&#37027;&#20040;&#23601;&#29992;&#27604;&#29305;&#27573;search key [pn.pos ... pn.pos+pn.bits]&#20316;&#20026;&#23376;&#33410;&#28857;&#32034;&#24341;
    </p>
    <p>
      2&#65292;&#22914;&#26524;chopped_off&#19981;&#20026;0&#65292;&#34920;&#31034;&#24403;&#21069;&#26159;prefix matching mode&#65292;&#37027;&#20040;&#30452;&#25509;&#29992;&#35843;&#25972;&#36807;&#30340;cindex&#20316;&#20026;&#23376;&#33410;&#28857;&#32034;&#24341;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456816030046" ID="ID_323117676" MODIFIED="1456816041298">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_7.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456783932979" ID="ID_1478675390" MODIFIED="1456783978232" TEXT="&#x5982;&#x679c;&#x7d22;&#x5f15;&#x51fa;&#x6765;&#x7684;&#x5b50;&#x8282;&#x70b9;&#x4e3a;&#x7a7a;&#xff0c;&#x90a3;&#x4e48;&#x663e;&#x7136;&#x4e0d;&#x80fd;&#x627e;&#x5230;&#x7cbe;&#x786e;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x56e0;&#x6b64;&#x9700;&#x8981;&#x8fdb;&#x5165;prefix matching mode"/>
</node>
<node CREATED="1456816166861" ID="ID_759153321" MODIFIED="1456816179723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_8.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456783993405" ID="ID_1321618255" MODIFIED="1456816203913" VSHIFT="-5">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#25214;&#21040;&#30340;&#23376;&#33410;&#28857;&#26159;&#21494;&#23376;&#33410;&#28857;&#65292;&#37027;&#20040;&#23601;&#26816;&#26597;&#26159;&#21542;&#33021;&#21305;&#37197;&#21494;&#23376;&#33410;&#28857;&#19979;&#30340;&#26576;&#20010;&#36335;&#30001;
    </p>
    <p>
      &#22914;&#26524;&#33021;&#21305;&#37197;&#33258;&#28982;&#23601;&#25214;&#21040;&#21487;&#20197;&#36820;&#22238;&#20102;&#65292;&#22914;&#26524;&#27809;&#26377;&#21305;&#37197;&#30340;&#36335;&#30001;&#21017;&#35828;&#26126;&#19981;&#33021;&#36827;&#34892;&#31934;&#30830;&#21305;&#37197;&#65292;
    </p>
    <p>
      &#22240;&#32780;&#38656;&#35201;&#36827;&#20837;prefix matching mode
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456816295341" ID="ID_656852196" MODIFIED="1456816305803">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_9.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456784401747" ID="ID_1004320142" MODIFIED="1456784445670" TEXT="&#x56e0;&#x4e3a;&#x4e0d;&#x662f;&#x53f6;&#x5b50;&#x8282;&#x70b9;&#xff0c;&#x6240;&#x4ee5;&#x6240;&#x7d22;&#x5f15;&#x51fa;&#x6765;&#x7684;&#x5b50;&#x8282;&#x70b9;&#x5fc5;&#x7136;&#x662f;&#x5185;&#x90e8;&#x8282;&#x70b9;"/>
</node>
<node CREATED="1456816402073" ID="ID_1034048218" MODIFIED="1456816413145">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_10.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456787838890" FOLDED="true" ID="ID_177264921" MODIFIED="1456817614836" TEXT="&#x6b63;&#x5e38;&#x60c5;&#x51b5;&#x4e0b;current_prefix_length&#x7b49;&#x4e8e;search key&#x7684;&#x957f;&#x5ea6;&#xff0c;&#x4e5f;&#x5c31;&#x662f;32&#x3002;&#x5f53;current_prefix_length&#x5c0f;&#x4e8e;pos + bits&#x65f6;&#xff0c;&#x8bf4;&#x660e;search key&#x5df2;&#x7ecf;&#x88ab;&#x780d;&#x6389;&#x4e00;&#x90e8;&#x5206;&#x4e86;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8fdb;&#x5165;&#x4e86;prefix matching mode&#x3002;&#xa;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x63d0;&#x524d;&#x68c0;&#x6d4b;&#x4e00;&#x4e0b;&#x662f;&#x5426;&#x6709;&#x5fc5;&#x8981;&#x4e0b;&#x6c89;&#x5230;&#x5b50;&#x8282;&#x70b9;cn&#x7ee7;&#x7eed;&#x904d;&#x5386;&#xff1a;&#x53ea;&#x8981;cn.key&#x4e2d;current_prefix_length&#x4f4d;&#x4e4b;&#x540e;&#x6709;1&#xff0c;&#x5b83;&#x5fc5;&#x7136;&#x51fa;&#x73b0;&#x5728;pn.pos+pn.bits&#x4e4b;&#x540e;&#xff0c;&#x56e0;&#x4e3a;&#x6211;&#x4eec;&#x5df2;&#x77e5;cn.key&#x7684;current_prefix_length&#x5230;pn.pos+pn.bits&#x5168;&#x662f;0&#x3002;&#x4f46;&#x662f;&#x6211;&#x4eec;&#x7684;search key&#x7684;current_prefix_length&#x5230;pn.pos+pn.bits&#x5e76;&#x4e0d;&#x5168;&#x662f;0&#xff0c;&#x6709;&#x4e00;&#x4e9b;1&#x88ab;&#x6211;&#x4eec;&#x780d;&#x6210;&#x4e86;0&#xff0c;&#x6240;&#x4ee5;&#x624d;&#x4f1a;&#x8fdb;&#x5165;prefix matching mode&#x3002;&#x8fd9;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x53ea;&#x8981;cn.key&#x4e2d;current_prefix_length&#x4f4d;&#x4e4b;&#x540e;&#x6709;1&#xff0c;&#x90a3;&#x4e48;cn&#x5b50;&#x8282;&#x70b9;&#x4e0b;&#x7684;&#x8def;&#x7531;&#x5fc5;&#x7136;&#x4e0d;&#x5339;&#x914d;search key&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x4eec;&#x5728;current_prefix_length&#x5230;pn.pos+pn.bits&#x4e4b;&#x95f4;&#x5168;&#x662f;0&#xff0c;&#x800c;search key&#x4e0d;&#x662f;&#x3002;&#x65e2;&#x7136;&#x4e0d;&#x5339;&#x914d;&#xff0c;&#x56e0;&#x6b64;&#x6ca1;&#x6709;&#x5fc5;&#x8981;&#x4e0b;&#x6c89;&#x5230;cn&#x7ee7;&#x7eed;&#x904d;&#x5386;&#x3002;">
<node CREATED="1456789608835" ID="ID_1691950890" MODIFIED="1456789620768">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_6.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456789894215" ID="ID_1134734578" MODIFIED="1456790220153" TEXT="&#x8bbe;&#x5f53;&#x524d;&#x7236;&#x8282;&#x70b9;&#x662f;pn&#xff0c;&#x5728;&#x8fdb;&#x5165;prefix matching mode&#x4e4b;&#x524d;&#x7528;cindex = 0b010101&#x8fdb;&#x884c;&#x7d22;&#x5f15;&#xff0c;&#x7d22;&#x5f15;&#x5230; x &#x8282;&#x70b9;&#xff0c;&#x4f46; x &#x5b50;&#x8282;&#x70b9;&#x4e0b;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x6240;&#x4ee5;&#x8fdb;&#x5165;prefix matching mode&#x3002;&#xa;&#xa;&#x780d;&#x6389;cindex&#x7684;&#x6700;&#x53f3;&#x8fb9;&#x4e00;&#x4e2a;1&#x53d8;&#x6210;cindex = 0b010100&#xff0c;&#x7d22;&#x5f15;&#x5230; y &#x8282;&#x70b9;&#x3002;&#x6ce8;&#x610f;&#x6b64;&#x65f6;current_prefix_length&#x4e5f;&#x88ab;&#x66f4;&#x65b0;&#x4e86;&#xff0c;&#x5b83;&#x6307;&#x5411;&#x4e86;cindex &#x4e2d;&#x4ece;&#x53f3;&#x5f80;&#x5de6;&#x7684;&#x4e0b;&#x4e00;&#x4e2a;1&#x5904;&#x3002;"/>
<node CREATED="1456790960500" ID="ID_1856102637" MODIFIED="1456790972301">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_7.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456791033827" ID="ID_1817197238" MODIFIED="1456793579220">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110; y &#32780;&#35328;&#65292;&#27492;&#26102;&#26377;2&#31181;&#24773;&#20917;&#65306;
    </p>
    <p>
      &#22914;&#26524; y &#19978;&#27809;&#26377;&#36335;&#24452;&#21387;&#32553;&#65292;&#37027;&#20040;y.pos&#25351;&#21521; c &#22788;&#65307;
    </p>
    <p>
      &#22914;&#26524; y &#19978;&#26377;&#36335;&#24452;&#21387;&#32553;&#65292;&#37027;&#20040;y.pos&#21487;&#33021;&#25351;&#21521; e &#22788;&#65307;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456791472464" ID="ID_1201725042" MODIFIED="1456816766208">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26082;&#28982;&#29992;cindex&#32034;&#24341;&#21040;&#20102;y&#65292;&#37027;&#20040; y.key &#24517;&#28982;&#21253;&#21547;&#20102;cindex&#20013;&#30340;&#25152;&#26377;&#20301;&#65292;&#25152;&#20197;y.key&#20013;b&#65292;c&#20043;&#38388;&#24517;&#28982;&#27809;&#26377;1&#65292;&#32780;&#26159;&#20840;0&#12290;
    </p>
    <p>
      &#20294;&#22914;&#26524; y &#19978;&#26377;&#36335;&#24452;&#21387;&#32553;&#65292;&#27492;&#26102; y.pos&#25351;&#21521; e&#65292;&#21017;c&#65292;e&#20043;&#38388;&#36824;&#26159;&#21487;&#33021;&#20250;&#26377;1&#65292;&#27604;&#22914; d &#22788;&#26377;&#19968;&#20010; 1&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#33509;c&#65292;e&#38388;&#26377;1&#21017;&#27809;&#26377;&#24517;&#35201;&#36941;&#21382; y &#33410;&#28857;&#20102;&#65292;&#22240;&#20026; y &#33410;&#28857;&#19979;&#30340;&#36335;&#30001;&#30340;prefix len &#24517;&#28982;&#22823;&#20110; d &#30340;&#20301;&#32622;&#65292;&#23545;&#20110;&#36825;&#26679;&#30340;&#36335;&#30001;&#65292;&#25105;&#20204;&#29616;&#22312;&#23601;&#30693;&#36947;&#23427;&#19981;&#21305;&#37197;search key&#12290;&#36825;&#26159;&#22240;&#20026;&#36825;&#26679;&#30340;&#36335;&#30001;&#22312;b&#65292;c&#27573;&#24517;&#28982;&#26159;&#20840;0&#65292;&#32780;&#25105;&#20204;&#30340;search key&#22312;b&#65292;c&#27573;&#19981;&#20026;0(&#34987;&#30733;&#25481;&#21518;&#25165;&#21464;&#25104;0)&#65292;&#25152;&#20197;&#19981;&#21305;&#37197;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456792292472" ID="ID_646556466" LINK="#ID_1309328490" MODIFIED="1456792492589">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;y &#33410;&#28857;&#19979;&#30340;&#36335;&#30001;&#30340;prefix len &#24517;&#28982;&#22823;&#20110; d &#30340;&#20301;&#32622;&#65292;&#36825;&#26159;&#22240;&#20026;&#19968;&#20010;&#33410;&#28857;&#19979;&#30340;&#36335;&#30001;&#30340;prefix len&#24517;&#28982;&#22312;&#36825;&#20010;&#33410;&#28857;&#30340;key&#20013;&#26368;&#21518;&#19968;&#20010;1&#30340;&#20301;&#32622;&#30340;&#21518;&#38754;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456793144469" ID="ID_1412988999" MODIFIED="1456793436942">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23454;&#38469;&#19978;&#21363;&#20351;&#36941;&#21382;&#21040;&#33410;&#28857; y&#65292;&#25105;&#20204;&#20063;&#21482;&#21487;&#33021;&#36827;&#19968;&#27493;&#21435;&#36941;&#21382;y.child [0]&#12290;&#36825;&#26159;&#22240;&#20026;&#23545;&#20110; y &#30340;&#20854;&#23427;&#23376;&#33410;&#28857;&#32780;&#35328;&#65292;y.pos&#20043;&#21518;&#24517;&#26377;&#19968;&#20010;1&#65292;&#36825;&#26679;&#36825;&#20123;&#23376;&#33410;&#28857;&#19979;&#30340;&#36335;&#30001;&#30340;prefix len&#24517;&#28982;&#22823;&#20110; e &#30340;&#20301;&#32622;&#65292;&#20174;&#32780;&#25105;&#20204;&#30693;&#36947;&#36825;&#20123;&#36335;&#30001;&#19982;&#25105;&#20204;&#30340;search key&#22312; b &#65292;c&#27573;&#20250;&#19981;&#21516;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456817801276" ID="ID_1739874558" MODIFIED="1456817812448">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_11.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456795150828" FOLDED="true" ID="ID_676026219" MODIFIED="1456818034198">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21462;search key&#21644;cn.key&#30340;&#21069;cn.pos&#20301;&#36827;&#34892;&#27604;&#36739;&#65292;cn.key&#23454;&#38469;&#19978;&#23601;&#26159;cn.pos&#20043;&#21069;&#30340;&#20301;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#19981;&#30456;&#31561;&#23601;&#24517;&#28982;&#35201;&#36827;&#20837;prefix matching mode&#12290;
    </p>
    <p>
      
    </p>
    <p>
      prefix matching mode&#23454;&#38469;&#19978;&#23601;&#26159;&#30733;&#25481;cindex&#21518;&#38754;&#30340;&#19968;&#20123;1&#65292;&#25226;&#23427;&#21464;&#25104;0&#65292;&#20174;&#32780;&#25226;cindex&#21464;&#25104;&#19981;&#21516;&#30340;&#20540;&#65292;&#20174;&#32780;&#21435;&#32034;&#24341;&#19981;&#21516;&#30340;&#23376;&#33410;&#28857;&#20877;&#36827;&#34892;&#21305;&#37197;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#25152;&#20197;&#36825;&#37324;&#35201;&#23545;&#19981;&#21305;&#37197;&#30340;&#21407;&#22240;&#20570;&#36827;&#19968;&#27493;&#30340;&#20998;&#26512;&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#37324;&#20808;&#23545;&#21464;&#37327;mp&#20570;&#19968;&#19979;&#35299;&#37322;&#65292;&#23427;&#26159;mismatch position&#30340;&#31616;&#20889;&#65292;&#20063;&#23601;&#26159;&#31532;&#19968;&#20010;&#19981;&#21305;&#37197;&#30340;&#20301;&#30340;&#20301;&#32622;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456797356076" ID="ID_1883085358" MODIFIED="1456797365138">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_8.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456797486425" ID="ID_1554141961" MODIFIED="1456798299697">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#19981;&#21305;&#37197;&#26159;&#22240;&#20026;search key&#20013;&#30340;1&#23548;&#33268;&#30340;&#65292;&#37027;&#20040;&#25105;&#20204;&#36824;&#21487;&#20197;&#30733;&#21435;&#36825;&#20123;1&#65292;&#32487;&#32493;&#22312;cn&#19979;&#36827;&#34892;prefix matching&#12290;
    </p>
    <p>
      &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#25105;&#20204;&#30733;&#21435;&#36825;&#20123;&#19981;&#21305;&#37197;&#30340;1&#65292;&#20063;&#23601;&#26159;&#23558;current_prefix_length&#32622;&#20026;mp&#65292;&#36825;&#26679;mp&#20043;&#21518;&#19981;&#21305;&#37197;&#30340;&#37096;&#20998;&#23558;&#19981;&#20877;&#25104;&#20026;search key&#30340;&#19968;&#37096;&#20998;&#65292;&#32780;&#26159;&#20840;&#37096;&#21464;&#20026;0&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#31181;&#24773;&#20917;&#19979;&#25105;&#20204;&#21487;&#20197;&#32487;&#32493;&#19979;&#27785;&#21040;cn&#33410;&#28857;&#36827;&#34892;&#36941;&#21382;&#12290;
    </p>
    <p>
      &#22240;&#20026;current_prefix_len&#24050;&#32463;&#25351;&#21521;mp&#65292;&#25152;&#20197;&#19979;&#27425;&#21462;cindex&#26102;&#24517;&#28982;&#26159;0&#65292;&#21482;&#35201;cn.child [0]&#19979;&#26377;&#36335;&#30001;&#30340;plen&#19981;&#22823;&#20110;mp&#65292;&#21017;&#36824;&#26159;&#21487;&#21305;&#37197;&#21040;&#30340;&#12290;&#20294;&#22914;&#26524;cn.child [0]&#19979;&#25152;&#26377;&#36335;&#30001;&#30340;plen&#37117;&#22823;&#20110;mp&#65292;&#37027;&#20040;&#36824;&#26159;&#27809;&#26377;&#36335;&#30001;&#33021;&#21305;&#37197;&#24403;&#21069;&#30340;search key&#65292;&#22240;&#20026;&#36825;&#20123;&#36335;&#30001;&#19982;search key&#33267;&#23569;&#22312;mp&#22788;&#26159;&#19981;&#21305;&#37197;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456797368572" ID="ID_522408231" MODIFIED="1456797376701">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_9.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456798420443" ID="ID_1535347407" MODIFIED="1456798685046" TEXT="&#x5982;&#x679c;&#x4e0d;&#x5339;&#x914d;&#x662f;&#x56e0;&#x4e3a;cn.key&#x4e2d;&#x7684;1&#x5bfc;&#x81f4;&#x7684;&#xff0c;&#x90a3;&#x4e48;cn&#x4e0b;&#x9762;&#x7684;&#x8def;&#x7531;&#x7684;plen&#x81f3;&#x5c11;&#x5927;&#x4e8e;mp&#xff08;&#x56e0;&#x4e3a;&#x8981;&#x5927;&#x4e8e;&#x6700;&#x540e;&#x4e00;&#x4e2a;1&#x6240;&#x5728;&#x7684;&#x4f4d;&#x7f6e;&#xff09;&#xff0c;&#x8fd9;&#x6837;&#x7684;&#x8def;&#x7531;&#x4e0d;&#x53ef;&#x80fd;&#x5339;&#x914d;search key&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x4eec;&#x81f3;&#x5c11;&#x5728;mp&#x5904;&#x662f;&#x4e0d;&#x5339;&#x914d;&#x7684;&#x3002;&#xa;&#xa;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#x6211;&#x4eec;&#x4e0d;&#x80fd;&#x4e0b;&#x6c89;&#xff0c;&#x53ea;&#x80fd;&#x5de6;&#x79fb;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x780d;&#x5f53;&#x524d;&#x7684;cindex&#xff0c;&#x780d;&#x6389;&#x540e;&#x9762;&#x7684;1&#xff0c;&#x4f7f;&#x4ed6;&#x53d8;&#x6210;&#x4e0d;&#x540c;&#x7684;cindex&#xff0c;&#x53bb;&#x7d22;&#x5f15;pn&#x4e0b;&#x9762;cn&#x5de6;&#x8fb9;&#x7684;&#x8282;&#x70b9;&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1456818115437" ID="ID_1004960960" MODIFIED="1456818125099">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_12.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456799458482" ID="ID_235044027" MODIFIED="1456799593475" TEXT="&#x4e0b;&#x6c89;&#x5230;&#x5b50;&#x8282;&#x70b9;&#x7ee7;&#x7eed;&#x904d;&#x5386;&#x3002;&#x6ce8;&#x610f; chopped_off &#x53ea;&#x5bf9;&#x67d0;&#x4e00;&#x5c42;&#x7684;cindex&#x6709;&#x610f;&#x4e49;&#xff0c;&#x5b83;&#x8868;&#x793a;cindex&#x4e2d;&#x88ab;&#x780d;&#x6389;&#x7684;&#x4f4d;&#x6570;&#x3002;&#x4e0b;&#x6c89;&#x6216;&#x4e0a;&#x6d6e;&#x65f6;&#xff0c;chopped_off&#x90fd;&#x8981;&#x88ab;&#x6e05;0."/>
</node>
<node CREATED="1456818225759" ID="ID_1118887486" MODIFIED="1456818234421">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_13.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456799624205" HGAP="19" ID="ID_778775756" MODIFIED="1456818413539" VSHIFT="1">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36827;&#20837;backtrace&#23601;&#34920;&#31034;&#35201;&#23545;cindex&#36827;&#34892;&#30733;&#30340;&#21160;&#20316;&#20102;&#12290;cindex&#26368;&#21021;&#21462;&#33258;&#20110;search key [pn.pos ... pn.pos+pn.bits]&#65292;
    </p>
    <p>
      &#25152;&#20197;&#23427;&#24635;&#20849;&#26377;pn.bits&#20301;&#65292;&#22914;&#26524;&#20840;&#37096;&#30733;&#23436;&#20102;&#33258;&#28982;&#27809;&#21150;&#27861;&#20877;&#30733;&#20102;&#65292;&#21482;&#33021;&#19978;&#28014;&#21040;&#29238;&#33410;&#28857;&#30340;&#29238;&#33410;&#28857;&#65292;&#20877;&#32487;&#32493;&#36941;&#21382;pn&#24038;&#36793;&#30340;&#33410;&#28857;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#36824;&#27809;&#30733;&#23436;&#65292;&#37027;&#23601;&#20174;&#21491;&#24448;&#24038;&#30733;&#65292;&#30452;&#21040;&#30733;&#25481;&#19968;&#20010;1&#20026;&#27490;&#12290;&#22914;&#26524;&#20174;&#21491;&#24448;&#24038;&#36935;&#21040;&#20102;0&#65292;&#23601;&#32487;&#32493;&#24448;&#24038;&#65292;&#22240;&#20026;&#25226;0&#21464;&#25104;0&#24182;&#19981;&#20250;&#25913;&#21464;cindex&#30340;&#20540;&#65292;&#21482;&#26377;&#25226;1&#21464;&#25104;0&#25165;&#20250;&#25913;&#21464;cindex&#30340;&#20540;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456818521457" ID="ID_139344371" MODIFIED="1456818530839">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_14.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456800084958" ID="ID_1880265925" MODIFIED="1456800170910" TEXT="&#x65e2;&#x7136;&#x662f;&#x8fdb;&#x5165;&#x4e86;prefix matching mode&#xff0c;&#x90a3;&#x4e48;&#x780d;&#x6389;&#x7684;&#x90e8;&#x5206;&#x5c31;&#x4e0d;&#x80fd;&#x8ba1;&#x5165;search key&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x8981;&#x8c03;&#x6574;current_prefix_length&#xff0c;&#x5c06;&#x5b83;&#x6307;&#x5411;&#x672a;&#x780d;&#x6389;&#x7684;&#x90e8;&#x5206;"/>
</node>
<node CREATED="1456818630059" ID="ID_44166089" MODIFIED="1456818640071">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_15.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456800209210" ID="ID_661675410" MODIFIED="1456800359420" TEXT="&#x8fd9;&#x91cc;&#x8fdb;&#x884c;&#x771f;&#x6b63;&#x7684;&#x780d;&#x7684;&#x52a8;&#x4f5c;&#xff0c;&#x6b64;&#x65f6;chopped_off&#x6307;&#x5411;&#x8981;&#x88ab;&#x780d;&#x6389;&#x7684;&#x4f4d;&#xff0c;&#x4ed6;&#x4e00;&#x5b9a;&#x662f;&#x4e00;&#x4e2a;1&#x3002;&#x6240;&#x8c13;&#x780d;&#x5c31;&#x662f;&#x628a;1&#x53d8;&#x4e3a;0&#xff0c;&#x8ba9;cindex&#x6210;&#x4e3a;&#x4e00;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x503c;&#xff0c;&#x4ece;&#x800c;&#x53ef;&#x4ee5;&#x7d22;&#x5f15;&#x7236;&#x8282;&#x70b9;&#x4e0b;&#x4e0d;&#x540c;&#x7684;&#x5b50;&#x8282;&#x70b9;&#x3002;&#x56e0;&#x4e3a;&#x5728;&#x5f53;&#x524d;&#x5b50;&#x8282;&#x70b9;cn&#x4e0b;&#x5df2;&#x7ecf;&#x6ca1;&#x6709;&#x5339;&#x914d;search key&#x7684;&#x8def;&#x7531;&#x4e86;&#x3002;"/>
</node>
<node CREATED="1456818744740" ID="ID_1792487878" MODIFIED="1456818758512">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_table_lookup_trie_16.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456800406108" ID="ID_171905390" MODIFIED="1456818854072" TEXT="&#x5982;&#x679c;cindex&#x5168;&#x90e8;&#x88ab;&#x780d;&#x5b8c;&#x4e86;&#x8fd8;&#x662f;&#x627e;&#x4e0d;&#x5230;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x90a3;&#x53ea;&#x80fd;&#x56de;&#x6eaf;&#x4e00;&#x7ea7;&#xff0c;&#x4e0a;&#x6d6e;&#x5230;&#x7236;&#x8282;&#x70b9;&#x7684;&#x7236;&#x8282;&#x70b9;&#x7ee7;&#x7eed;&#x8fdb;&#x884c;prefix matching&#x3002;&#x8fd9;&#x65f6;&#x8981;&#x91cd;&#x65b0;&#x521d;&#x59cb;&#x5316;&#x4e09;&#x4e2a;&#x53d8;&#x91cf;&#xff1a;pn, cindex, chopped_off&#x3002;&#xa;&#xa;pn&#x81ea;&#x7136;&#x8981;&#x8bbe;&#x4e3a;&#x7236;&#x8282;&#x70b9;&#x7684;&#x7236;&#x8282;&#x70b9;&#xff0c;&#x5373;pn&#x7684;&#x7236;&#x8282;&#x70b9;&#x3002;&#xa;cindex&#x8981;&#x8bbe;&#x4e3a;pn&#x5728;&#x4ed6;&#x81ea;&#x5df1;&#x7684;&#x7236;&#x8282;&#x70b9;&#x4e2d;&#x7684;&#x7d22;&#x5f15;&#x3002;&#xa;chopped_off&#x8981;&#x6e05;&#x4e3a;0&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x53ea;&#x5728;&#x67d0;&#x4e00;&#x5c42;&#x6709;&#x610f;&#x4e49;&#xff0c;&#x4e0b;&#x6c89;&#x4e00;&#x5c42;&#x6216;&#x4e0a;&#x6d6e;&#x4e00;&#x5c42;&#x90fd;&#x8981;&#x8bf7;&#x4e3a;0&#x3002;&#xa;&#xa;&#x6ce8;&#x610f;&#x521d;&#x59cb;&#x5316;&#x5b8c;&#x4e86;&#x4e4b;&#x540e;&#x7ee7;&#x7eed;&#x56de;&#x5230;backtrace&#x5904;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x7ee7;&#x7eed;&#x780d;&#x65b0;&#x7684;cindex&#xff0c;&#x56e0;&#x4e3a;&#x8001;&#x7684;&#x5b50;&#x8282;&#x70b9;pn&#x4e0b;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x53ea;&#x80fd;&#x7ee7;&#x7eed;&#x904d;&#x5386;&#x8001;&#x7684;&#x5b50;&#x8282;&#x70b9;pn&#x7684;&#x5de6;&#x8fb9;&#x5144;&#x5f1f;&#x8282;&#x70b9;&#x3002;"/>
</node>
</node>
<node CREATED="1456867093260" FOLDED="true" ID="ID_332842402" MODIFIED="1457646827908">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib_table_lookup() &#19979;&#21322;&#37096;&#20998;&#65306;
    </p>
    <p>
      &#26681;&#25454;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;&#20013;&#30340;&#20854;&#23427;&#20851;&#38190;&#23383;&#31579;&#36873;fib_alias&#21644;fib_nh&#65292;
    </p>
    <p>
      &#24182;&#26368;&#32456;&#21021;&#22987;&#21270;&#22909;&#35201;&#36820;&#22238;&#30340;struct fib_result *res&#32467;&#26500;&#12290;
    </p>
    <p>
      &#36825;&#19968;&#37096;&#20998;&#31561;&#21516;&#20110;&#20197;&#21069;&#30340;fib_semantic_match()&#21363;&#35821;&#20041;&#21305;&#37197;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456867690406" ID="ID_516455015" MODIFIED="1456868488643">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int check_leaf&#160;&#160;(
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct fib_table *tb,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct trie *t,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct leaf *l,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t_key key,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct flowi4 *flp,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct fib_result *res,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int fib_flags)
    </p>
  </body>
</html></richcontent>
<node CREATED="1456868450409" ID="ID_1756604788" MODIFIED="1456868459642">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_semantic_match.JPG" />
  </body>
</html></richcontent>
<node CREATED="1456872204087" ID="ID_979403014" MODIFIED="1456872498393">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      check_leaf()&#30340;&#36820;&#22238;&#20540;&#26377;3&#31181;&#65306;
    </p>
    <p>
      1 &#65306;&#34920;&#31034;&#27809;&#26377;&#25214;&#21040;&#21305;&#37197;&#30340;&#36335;&#30001;&#65292;&#25152;&#20197;&#24212;&#35813;&#22312;fib_table_lookup()&#20013;&#32487;&#32493;&#36941;&#21382;trie&#26641;&#12290;
    </p>
    <p>
      0&#65306;&#25104;&#21151;&#30340;&#25214;&#21040;&#20102;&#21305;&#37197;&#30340;&#36335;&#30001;&#12290;&#37027;&#20040;&#23601;&#20250;&#20174;fib_table_lookup()&#20013;&#36820;&#22238;&#65292;&#36827;&#20837;&#26500;&#24314;&#36335;&#30001;&#32531;&#23384;&#30340;&#36807;&#31243;&#12290;
    </p>
    <p>
      &lt;0&#65306;&#25214;&#21040;&#20102;&#21305;&#37197;&#30340;&#36335;&#30001;&#65292;&#20294;&#25152;&#25214;&#21040;&#30340;&#36335;&#30001;&#25351;&#31034;&#30340;&#21160;&#20316;&#24182;&#19981;&#26159;&#36716;&#21457;&#65292;&#32780;&#26159;&#31649;&#29702;&#32773;&#21629;&#20196;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456872727639" ID="ID_1907213495" MODIFIED="1456873511934">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#30340;&#40664;&#35748;&#21160;&#20316;&#26159;&#36716;&#21457;&#65292;&#20294;&#31649;&#29702;&#32773;&#20063;&#21487;&#20197;&#25351;&#23450;&#20854;&#23427;&#36335;&#30001;&#21160;&#20316;&#65292;
    </p>
    <p>
      &#36825;&#20123;&#36335;&#30001;&#21160;&#20316;&#30001;struct fib_alias -&gt;fa_type&#35760;&#24405;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36335;&#30001;&#21160;&#20316;&#20026;&#36716;&#21457;&#30340;&#36335;&#30001;&#31867;&#22411;&#26377;&#65306;
    </p>
    <p>
      RTN_UNSPEC
    </p>
    <p>
      RTN_UNICAST
    </p>
    <p>
      RTN_LOCAL
    </p>
    <p>
      RTN_BROADCAST
    </p>
    <p>
      RTN_ANYCAST
    </p>
    <p>
      RTN_MULTICAST
    </p>
    <p>
      
    </p>
    <p>
      &#36335;&#30001;&#31867;&#22411; RTN_BLACKHOLE &#30340;&#38169;&#35823;&#36820;&#22238;&#20540;&#26159; -EINVAL&#65292;&#36825;&#23558;&#23548;&#33268;&#36335;&#30001;&#26597;&#25214;&#30340;&#35843;&#29992;&#32773;&#26080;&#22768;&#24687;&#22320;&#20002;&#24323;IP&#21253;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#31867;&#22411; RTN_UNREACHABLE &#30340;&#38169;&#35823;&#36820;&#22238;&#20540;&#26159; -EHOSTUNREACH&#65292;&#36825;&#23558;&#23548;&#33268;&#35843;&#29992;&#32773;&#20002;&#24323;IP&#21253;&#24182;&#21521;&#28304;&#21457;&#36865;&#19968;&#20010;ICMP&#28040;&#24687;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#31867;&#22411; RTN_PROHIBIT &#30340;&#38169;&#35823;&#36820;&#22238;&#20540;&#26159; -EACCES&#65292;&#36825;&#23558;&#23548;&#33268;&#35843;&#29992;&#32773;&#20002;&#24323;IP&#21253;&#24182;&#21521;&#28304;&#21457;&#36865;&#19968;&#20010;ICMP&#28040;&#24687;&#12290;
    </p>
    <p>
      &#36335;&#30001;&#31867;&#22411; RTN_THROW &#30340;&#38169;&#35823;&#36820;&#22238;&#20540;&#26159; -EAGAIN&#65292;&#36825;&#23558;&#23548;&#33268;&#35843;&#29992;&#32773;&#36339;&#20837;&#21478;&#19968;&#24352;&#36335;&#30001;&#34920;&#32487;&#32493;&#36335;&#30001;&#26597;&#25214;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1456866527655" FOLDED="true" ID="ID_165830848" MODIFIED="1465419202259">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26500;&#24314;&#36335;&#30001;&#32531;&#23384;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457034170920" FOLDED="true" ID="ID_558094840" MODIFIED="1457034895195" TEXT="struct fib_result">
<node CREATED="1457034182211" ID="ID_603977170" MODIFIED="1457034183027" TEXT="prefixlen">
<node CREATED="1457034282769" ID="ID_1194364569" MODIFIED="1457034292928" TEXT="&#x5b50;&#x7f51;&#x63a9;&#x7801;&#x7684;&#x957f;&#x5ea6;"/>
</node>
<node CREATED="1457034191692" ID="ID_290115120" MODIFIED="1457034192482" TEXT="nh_sel">
<node CREATED="1457034295553" ID="ID_113779305" MODIFIED="1457034395787" TEXT="&#x4e00;&#x6761;&#x8def;&#x7531;&#x4e0b;&#x9762;&#x53ef;&#x80fd;&#x6709;&#x591a;&#x4e2a;&#x4e0b;&#x4e00;&#x8df3;&#xff0c;&#x8fd9;&#x662f;&#x7b2c;&#x4e00;&#x4e2a;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x7684;&#x4e0b;&#x4e00;&#x8df3;&#x7684;&#x7d22;&#x5f15;&#x3002;"/>
</node>
<node CREATED="1457034202064" FOLDED="true" ID="ID_1058251578" MODIFIED="1457034676536" TEXT="type">
<node COLOR="#009900" CREATED="1457034433285" ID="ID_851434826" MODIFIED="1457034610410" TEXT="RTN_UNSPEC"/>
<node COLOR="#009900" CREATED="1457034444474" ID="ID_674571511" MODIFIED="1457034624773" TEXT="RTN_UNICAST"/>
<node COLOR="#009900" CREATED="1457034453466" ID="ID_1997129419" MODIFIED="1457034630538" TEXT="RTN_LOCAL"/>
<node COLOR="#009900" CREATED="1457034461659" ID="ID_609628965" MODIFIED="1457034633925" TEXT="RTN_BROADCAST"/>
<node COLOR="#009900" CREATED="1457034470123" ID="ID_1621729296" MODIFIED="1457034637009" TEXT="RTN_ANYCAST"/>
<node COLOR="#009900" CREATED="1457034481169" ID="ID_543982856" MODIFIED="1457034641222" TEXT="RTN_MULTICAST"/>
<node COLOR="#ff0000" CREATED="1457034497152" ID="ID_1300861267" MODIFIED="1457034653762" TEXT="RTN_BLACKHOLE"/>
<node COLOR="#ff0000" CREATED="1457034506445" ID="ID_521066024" MODIFIED="1457034657275" TEXT="RTN_UNREACHABLE"/>
<node COLOR="#ff0000" CREATED="1457034515001" ID="ID_29424908" MODIFIED="1457034660588" TEXT="RTN_PROHIBIT"/>
<node COLOR="#ff0000" CREATED="1457034523370" ID="ID_824584252" MODIFIED="1457034663738" TEXT="RTN_THROW"/>
<node COLOR="#ff0000" CREATED="1457034532895" ID="ID_301485332" MODIFIED="1457034667658" TEXT="RTN_NAT"/>
<node COLOR="#ff0000" CREATED="1457034544112" ID="ID_811781806" MODIFIED="1457034670807" TEXT="RTN_XRESOLVE"/>
<node COLOR="#ff0000" CREATED="1457034551826" ID="ID_1525774809" MODIFIED="1457034673883" TEXT="RTN_POLICY_FAILED"/>
</node>
<node CREATED="1457034212038" FOLDED="true" ID="ID_695646399" MODIFIED="1457034764417" TEXT="scope">
<node CREATED="1457034724439" ID="ID_630149886" MODIFIED="1457034725225" TEXT="RT_SCOPE_UNIVERSE"/>
<node CREATED="1457034732922" ID="ID_357932080" MODIFIED="1457034733607" TEXT="RT_SCOPE_SITE"/>
<node CREATED="1457034741888" ID="ID_92934715" MODIFIED="1457034742549" TEXT="RT_SCOPE_LINK"/>
<node CREATED="1457034751169" ID="ID_1300992232" MODIFIED="1457034751839" TEXT="RT_SCOPE_HOST"/>
<node CREATED="1457034760197" ID="ID_1228739445" MODIFIED="1457034760893" TEXT="RT_SCOPE_NOWHERE"/>
</node>
<node CREATED="1457034222376" ID="ID_571334737" MODIFIED="1457034223131" TEXT="tclassid"/>
<node CREATED="1457034235644" ID="ID_324715766" MODIFIED="1457034236317" TEXT="struct fib_info *fi">
<node CREATED="1457034820794" ID="ID_372487351" MODIFIED="1457034845868" TEXT="&#x771f;&#x6b63;&#x8def;&#x7531;&#x4fe1;&#x606f;&#x5b58;&#x653e;&#x7684;&#x4f4d;&#x7f6e;"/>
</node>
<node CREATED="1457034246725" ID="ID_1118849029" MODIFIED="1457034247531" TEXT="struct fib_table *table">
<node CREATED="1457034850680" ID="ID_1867877015" MODIFIED="1457034861240" TEXT="&#x8def;&#x7531;&#x6240;&#x5728;&#x7684;&#x8def;&#x7531;&#x8868;"/>
</node>
<node CREATED="1457034258903" ID="ID_968685566" MODIFIED="1457034259944" TEXT="struct list_head *fa_head">
<node CREATED="1457034863756" ID="ID_1607852729" MODIFIED="1457034875874" TEXT="&#x8def;&#x7531;&#x7684;&#x522b;&#x540d;&#x5217;&#x8868;"/>
</node>
</node>
<node CREATED="1457035713827" FOLDED="true" ID="ID_313341107" MODIFIED="1458779930426" TEXT="struct rtable">
<node CREATED="1457035729302" FOLDED="true" ID="ID_1565309968" MODIFIED="1458779929482">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct dst_entry dst
    </p>
  </body>
</html></richcontent>
<node CREATED="1457035920439" ID="ID_1095981893" MODIFIED="1457035946563" TEXT="dev"/>
<node CREATED="1457035929395" ID="ID_1154663442" MODIFIED="1457035964567" TEXT="input()"/>
<node CREATED="1457035965810" ID="ID_1078834870" MODIFIED="1457035971110" TEXT="output()"/>
<node CREATED="1457035987105" ID="ID_891619109" MODIFIED="1457035991090" TEXT="... ... ..."/>
</node>
<node CREATED="1457035781686" ID="ID_836344165" MODIFIED="1457035782360" TEXT="rt_genid"/>
<node CREATED="1457035791755" ID="ID_1633937894" MODIFIED="1457035792400" TEXT="rt_flags"/>
<node CREATED="1457035800761" ID="ID_321063370" MODIFIED="1457035801351" TEXT="rt_type"/>
<node CREATED="1457035808732" ID="ID_62634045" MODIFIED="1457035809346" TEXT="rt_is_input"/>
<node CREATED="1457035817322" ID="ID_1803325511" MODIFIED="1457035817854" TEXT="rt_uses_gateway"/>
<node CREATED="1457035831257" ID="ID_438314876" MODIFIED="1457035832952" TEXT="rt_iif"/>
<node CREATED="1457035841497" ID="ID_915961634" MODIFIED="1457035842319" TEXT="rt_gateway"/>
<node CREATED="1457035854062" ID="ID_1259141766" MODIFIED="1457035854787" TEXT="rt_pmtu"/>
<node CREATED="1457035864970" ID="ID_1102944370" MODIFIED="1457035873109">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct list_head rt_uncached
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457033785307" FOLDED="true" ID="ID_1690154999" MODIFIED="1458782574068">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip_route_input_slow
    </p>
    <p>
      &#36755;&#20837;IP&#21253;&#30340;&#36335;&#30001;&#26377;2&#31181;&#65306;
    </p>
    <p>
      &#25237;&#36882;&#21040;&#26412;&#22320; (local input)&#65292;
    </p>
    <p>
      &#25110;&#32773;&#36716;&#21457; (forward)
    </p>
  </body>
</html></richcontent>
<node CREATED="1457058367693" FOLDED="true" ID="ID_1937995387" MODIFIED="1457653101342" TEXT="local input">
<node CREATED="1457058379069" ID="ID_1121197277" MODIFIED="1457058392806">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_input_3.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457058582169" FOLDED="true" ID="ID_575002520" MODIFIED="1458782572987" TEXT="forward">
<node CREATED="1457058685281" ID="ID_1974630748" MODIFIED="1457058702823">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_input_4.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457058960174" ID="ID_1905090717" MODIFIED="1457059226429">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22522;&#20110;&#21738;&#20123;&#20449;&#24687;&#26500;&#24314;&#36335;&#30001;&#32531;&#23384;&#65311;
    </p>
    <p>
      
    </p>
    <p>
      1&#65292;&#28304;IP&#65292;&#30446;&#30340;IP&#65292;&#20837;&#21475;&#35774;&#22791;&#65292;tos&#65306;&#36825;&#20123;&#20449;&#24687;&#26159;&#36335;&#30001;&#26597;&#25214; API &#30340;&#20256;&#20837;&#21442;&#25968;&#12290;
    </p>
    <p>
      2&#65292;&#36335;&#30001;&#26597;&#25214;&#32467;&#26524;struct fib_result&#65306;&#20027;&#35201;&#26159;&#21033;&#29992;struct fib_nh&#37324;&#38754;&#30340;&#20986;&#21475;&#35774;&#22791;&#21644;&#32593;&#20851;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457059284015" FOLDED="true" ID="ID_935624093" MODIFIED="1457653136538" TEXT="&#x591a;&#x8def;&#x5f84;&#x9009;&#x62e9;">
<node CREATED="1457073036080" ID="ID_598713349" MODIFIED="1457073069085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_multipath_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457073464855" ID="ID_804957062" MODIFIED="1457074132751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#20837;&#25509;&#21475;&#31561;&#20110;&#20986;&#25509;&#21475;&#26102;&#20195;&#34920;IP&#21253;&#24403;&#21069;&#36208;&#30340;&#36335;&#24452;&#24182;&#19981;&#26159;&#26368;&#20339;&#36335;&#24452;&#65292;&#28304;&#26412;&#21487;&#20197;&#23558;IP&#21253;&#30452;&#25509;&#21457;&#36865;&#32473;&#36335;&#30001;&#20013;&#30340;&#32593;&#20851;&#12290;
    </p>
    <p>
      &#22240;&#27492;&#38656;&#35201;&#21457;&#36865;&#19968;&#20010;redirect&#30340;ICMP&#28040;&#24687;&#32473;&#28304;&#65292;&#35753;&#20854;&#37325;&#23450;&#21521;&#21040;&#26032;&#30340;&#32593;&#20851;&#32780;&#19981;&#26159;&#25105;&#20204;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#33021;&#36825;&#26679;&#20570;&#30340;&#21069;&#25552;&#39318;&#20808;&#26159;&#20837;&#21475;&#35774;&#22791;&#19978;&#24320;&#21551;&#20102;&#37325;&#23450;&#21521;&#30340;&#37197;&#32622;&#65292;&#20854;&#27425;&#35201;&#30830;&#23450;&#28304;&#19982;&#26032;&#32593;&#20851;&#30830;&#23454;&#22312;&#21516;&#19968;&#20010;&#23376;&#32593;&#20869;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22240;&#20026;&#25105;&#20204;&#32473;&#28304;&#21457;&#20102;&#37325;&#23450;&#21521;&#30340;ICMP&#21253;&#65292;&#25152;&#20197;&#25105;&#20204;&#39044;&#35745;&#19979;&#19968;&#20010;&#30456;&#21516;&#30446;&#30340;IP&#30340;&#21253;&#19981;&#20250;&#20877;&#21457;&#32473;&#25105;&#20204;&#65292;&#25152;&#20197;&#25105;&#20204;&#20063;&#23601;&#19981;&#38656;&#35201;&#25226;&#20026;&#24403;&#21069;&#21253;&#21019;&#24314;&#30340;&#20020;&#26102;&#36335;&#30001;&#32531;&#23384;&#20445;&#23384;&#22312;fib&#34920;&#20013;&#65292;&#20063;&#23601;&#26159;do_cache = false&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457074190517" FOLDED="true" ID="ID_1752478456" MODIFIED="1457079282518">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib nexthop exceptions
    </p>
    <p>
      &#24403;&#25105;&#20204;&#25910;&#21040;&#19968;&#26465;ICMP redirect&#28040;&#24687;&#21578;&#30693;&#25105;&#20204;&#21040;&#26576;&#20010;&#30446;&#30340;IP&#22320;&#22336;&#30340;&#21253;&#38656;&#35201;&#37325;&#23450;&#21521;&#21040;&#21478;&#19968;&#20010;&#32593;&#20851;&#65292;
    </p>
    <p>
      &#25110;&#32773;&#65292;Path MTU discovery&#26426;&#21046;&#21578;&#35785;&#25105;&#20204;&#21040;&#26576;&#20010;&#30446;&#30340;IP&#22320;&#22336;&#30340;&#36335;&#24452;MTU&#25913;&#21464;&#20102;&#26102;&#65292;
    </p>
    <p>
      &#25105;&#20204;&#23601;&#38656;&#35201;&#22312;&#30446;&#30340;IP&#22320;&#22336;&#25152;&#22312;&#30340;&#36335;&#30001;&#19979;&#28155;&#21152;&#19968;&#39033;nexthop exception&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#20363;&#22806;&#30340;&#24847;&#24605;&#26159;&#65306;
    </p>
    <p>
      &#19968;&#20010;&#22823;&#30340;&#30446;&#30340;&#32593;&#27573;&#20013;&#26377;&#20960;&#20010;&#20363;&#22806;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#65292;&#23427;&#20204;&#30340;&#32593;&#20851;&#25110;&#32773;&#36335;&#24452;MTU&#19982;&#20027;&#36335;&#30001;&#19981;&#19968;&#26679;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457075681578" ID="ID_1126558692" MODIFIED="1457075960358">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20026;&#20160;&#20040;&#19981;&#26356;&#26032;&#25972;&#20010;&#36335;&#30001;&#32780;&#21482;&#26159;&#28155;&#21152;&#19968;&#39033;&#20363;&#22806;&#21602;&#65311;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#19968;&#26465;&#36335;&#30001;&#35206;&#30422;&#30340;&#26159;&#19968;&#20010;&#22823;&#30340;&#30446;&#30340;&#32593;&#27573;&#65292;&#32780;&#19968;&#20010;nexthop exception&#21482;&#26159;&#38024;&#23545;&#19968;&#20010;&#30446;&#30340;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      &#24403;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;&#20013;&#30340;&#19968;&#20010;&#30446;&#30340;&#22320;&#22336;&#38656;&#35201;&#37325;&#23450;&#21521;&#21040;&#26032;&#30340;&#32593;&#20851;&#26102;&#65292;&#24182;&#19981;&#34920;&#31034;&#30446;&#30340;&#32593;&#27573;&#20013;&#30340;&#20854;&#23427;&#30446;&#30340;IP&#22320;&#22336;&#20063;&#38656;&#35201;&#37325;&#23450;&#21521;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457077004479" ID="ID_1392498748" MODIFIED="1457077020394">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_nexthop_exception_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457077381393" ID="ID_1809093791" MODIFIED="1457078516739">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fib_nh&#19979;&#30340;nh_exceptions&#25351;&#21521;&#19968;&#24352;hash&#34920;&#65292;
    </p>
    <p>
      &#23427;&#20197;&#30446;&#30340;IP&#22320;&#22336;&#20316;hash&#65292;&#32034;&#24341;&#21040;&#26576;&#20010;fib_nh_exception&#38142;&#34920;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      fnhe_daddr&#26159;&#25628;&#32034;&#20851;&#38190;&#23383;&#65292;
    </p>
    <p>
      fnhe_pmtu(&#26032;&#30340;&#36335;&#24452;MTU)&#21644;fnhe_gw(&#26032;&#30340;&#32593;&#20851;)&#21017;&#26159;&#25105;&#20204;&#24819;&#20445;&#23384;&#30340;&#20363;&#22806;&#20449;&#24687;&#65292;&#23427;&#20204;&#24517;&#26377;&#19968;&#39033;&#19982;&#20027;&#36335;&#30001;fib_nh&#19981;&#21516;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      fnhe_expires&#21644;fnhe_stamp&#29992;&#20110;&#23558;&#27492;&#20363;&#22806;&#36229;&#26102;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26082;&#28982;&#26159;&#20363;&#22806;&#65292;&#37027;&#23601;&#19981;&#33021;&#29992;&#20027;&#36335;&#30001;fib_nh&#37324;&#30340;&#36335;&#30001;&#32531;&#23384;&#65292;&#32780;&#26159;&#38656;&#35201;&#20445;&#23384;&#33258;&#24049;&#30340;&#36335;&#30001;&#32531;&#23384;&#65292;&#25152;&#20197;&#65306;
    </p>
    <p>
      fnhe_rth_input &#23545;&#24212;&#20102;&#22788;&#29702;&#36755;&#20837;&#21253;&#26102;&#35201;&#20351;&#29992;&#30340;&#36335;&#30001;&#32531;&#23384;&#12290;
    </p>
    <p>
      fnhe_rth_output &#23545;&#24212;&#20102;&#22788;&#29702;&#36755;&#20986;&#21253;&#26102;&#35201;&#20351;&#29992;&#30340;&#36335;&#30001;&#32531;&#23384;&#12290;
    </p>
    <p>
      &#20026;&#20160;&#20040;&#38656;&#35201;2&#20010;&#36335;&#30001;&#32531;&#23384;&#65311;&#22240;&#20026;&#23545;&#20110;&#36825;&#20010;&#20363;&#22806;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#65292;&#26082;&#26377;&#21487;&#33021;&#26159;&#26412;&#26426;&#35201;&#21457;&#21253;&#32473;&#23427;(&#38656;&#35201;fnhe_rth_output)&#65292;&#20063;&#26377;&#21487;&#33021;&#26159;&#21035;&#20154;&#32463;&#36807;&#25105;&#21457;&#21253;&#32473;&#23427;&#65292;&#25105;&#38656;&#35201;&#36716;&#21457;(&#38656;&#35201;fnhe_rth_input)&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457078851743" ID="ID_1545843111" MODIFIED="1457078877927" TEXT="&#x89e6;&#x53d1;&#x521b;&#x5efa;struct fib_nh_exception&#x7684;&#x60c5;&#x51b5;">
<node CREATED="1457078881383" ID="ID_1777410420" MODIFIED="1457078897643">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_nexthop_exception_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457078922698" ID="ID_601595365" MODIFIED="1457079089907">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25910;&#21040;&#160;ICMP redirect &#28040;&#24687;&#26102;&#38656;&#35201;&#21019;&#24314;struct fib_nh_exception&#65292;
    </p>
    <p>
      &#24182;&#23558;&#20854;&#20013;&#30340;fnhe_gw&#23383;&#27573;&#35774;&#32622;&#20026; ICMP redirect &#28040;&#24687;&#20013;&#30340;&#26032;&#32593;&#20851;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457078899497" ID="ID_500821560" MODIFIED="1457078912076">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_nexthop_exception_3.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457078922698" ID="ID_1549459551" MODIFIED="1457079216053">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#24452;MTU&#25913;&#21464;&#26102;&#38656;&#35201;&#21019;&#24314;struct fib_nh_exception&#65292;
    </p>
    <p>
      &#24182;&#23558;&#20854;&#20013;&#30340;fnhe_pmtu&#23383;&#27573;&#35774;&#32622;&#20026; path MTU discovery &#21457;&#29616;&#30340;&#26032;MTU&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1457079335223" ID="ID_1280182624" MODIFIED="1457080058359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#30446;&#30340;IP&#22320;&#22336;&#26159;&#19968;&#20010;&#20363;&#22806;&#65292;&#37027;&#20040;&#23427;&#30340;&#36335;&#30001;&#32531;&#23384;&#24212;&#35813;&#20445;&#23384;&#22312;<font face="SansSerif">&#160;</font><font color="black" face="SansSerif">&#8220;struct fib_nh_exception&#8221;-&gt;fnhe_rth_input&#12290; </font>
    </p>
    <p>
      &#22914;&#26524;&#19981;&#26159;&#20363;&#22806;&#65292;&#37027;&#20040;&#23427;&#30340;&#36335;&#30001;&#32531;&#23384;&#24212;&#35813;&#20445;&#23384;&#22312;&#20027;&#36335;&#30001; <font color="black" face="SansSerif">&#8220;struct fib_nh&#8221;-&gt;nh_rth_input&#12290; </font>
    </p>
    <p>
      
    </p>
    <p>
      &#25105;&#20204;&#39318;&#20808;&#21462;&#20986;&#36335;&#30001;&#32531;&#23384;&#65292;&#30475;&#30475;&#23427;&#36824;&#26159;&#19981;&#26159;&#26377;&#25928;&#65292;&#22914;&#26524;&#26377;&#25928;&#23601;&#19981;&#35201;&#37325;&#26032;&#26500;&#24314;&#20102;&#65292;&#21487;&#20197;&#30452;&#25509;&#23558;&#20854;&#36171;&#20540;&#32473;skb&#12290;
    </p>
    <p>
      &#33509;&#26080;&#25928;&#65292;&#21017;&#38656;&#35201;&#37325;&#26032;&#26500;&#24314;&#32531;&#23384;&#65292;&#24182;&#23558;&#29992;&#23427;&#26367;&#25442;&#25481;&#32769;&#30340;&#36335;&#30001;&#32531;&#23384;&#12290;&#20063;&#23601;&#26159;&#20445;&#23384;&#21040;
    </p>
    <p>
      <font color="black" face="SansSerif">&#8220;struct fib_nh_exception&#8221;-&gt;fnhe_rth_input &#25110;&#8220;struct fib_nh&#8221;-&gt;nh_rth_input&#65292;&#21462;&#20915;&#20110;&#30446;&#30340;IP&#26159;&#19981;&#26159;&#19968;&#20010;&#20363;&#22806;&#12290;</font>
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#22914;&#26524;&#30446;&#30340;IP&#26159;&#20363;&#22806;&#65292;&#37027;&#20040;&#36335;&#30001;&#32531;&#23384;&#37324;&#30340;MTU&#65306;rt-&gt;rt_pmtu&#21644;&#32593;&#20851;&#65306;rt-&gt;rt_gateway&#24212;&#35813;&#21462;&#33258;
    </p>
    <p>
      <font color="black" face="SansSerif">struct fib_nh_exception&#8221;&#65292;&#32780;&#19981;&#26159;&#8220;struct fib_nh&#8221;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457080203204" ID="ID_186303821" MODIFIED="1457080309852">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26500;&#24314;&#36335;&#30001;&#32531;&#23384;&#26368;&#37325;&#35201;&#30340;&#20219;&#21153;&#26159;&#35774;&#32622;&#36755;&#20837;&#36755;&#20986;&#20989;&#25968;&#65306;
    </p>
    <p style="margin-top: 0pt; margin-bottom: 0pt; margin-left: 0in; text-align: left">
      <font size="12.0pt" face="SansSerif" color="black"><b>rth-&gt;dst.input= ip_forward</b></font>
    </p>
    <p style="margin-top: 0pt; margin-bottom: 0pt; margin-left: 0in; text-align: left">
      <font size="12.0pt" face="SansSerif" color="black"><b>rth-&gt;dst.output= ip_output</b></font>
    </p>
    <p style="margin-top: 0pt; margin-bottom: 0pt; margin-left: 0in; text-align: left">
      <font size="12.0pt" face="SansSerif" color="black"><b>rth-&gt;rt_is_input = 1</b></font>
    </p>
    <p>
      &#21516;&#26102;&#23558;&#36335;&#30001;&#32531;&#23384;&#26631;&#35760;&#20026;&#36755;&#20837;&#36335;&#30001;&#32531;&#23384;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457080331680" ID="ID_1891728650" MODIFIED="1457080422072" TEXT="&#x8def;&#x7531;&#x7f13;&#x5b58;&#x91cc;&#x7684;&#x8f93;&#x5165;&#x8f93;&#x51fa;&#x51fd;&#x6570;&#x6700;&#x7ec8;&#x51b3;&#x5b9a;&#x4e86;&#x5305;&#x5728;&#x8def;&#x7531;&#x67e5;&#x627e;&#x5b8c;&#x6bd5;&#x540e;&#x5728;&#x7cfb;&#x7edf;&#x91cc;&#x7684;&#x540e;&#x7eed;&#x5904;&#x7406;&#x8def;&#x5f84;&#x3002;"/>
</node>
<node CREATED="1457080082263" ID="ID_1350531441" MODIFIED="1457080110891" TEXT="&#x6700;&#x540e;&#x5b8c;&#x6210;&#x6211;&#x4eec;&#x7684;&#x7ec8;&#x6781;&#x76ee;&#x6807;&#xff1a;&#x628a;&#x8def;&#x7531;&#x7f13;&#x5b58;&#x8d4b;&#x503c;&#x7ed9;skb"/>
</node>
</node>
</node>
<node CREATED="1457117206521" FOLDED="true" ID="ID_661898179" MODIFIED="1465419201101" TEXT="__ip_route_output_key">
<node CREATED="1457341362779" ID="ID_1898875166" MODIFIED="1465419192497">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/ip_route_output_5_0.JPG" />
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1457421786532" ID="ID_851208736" MODIFIED="1457421854788" TEXT="&#x4e00;&#x4e2a;&#x672c;&#x5730;&#x53d1;&#x9001;&#x7684;&#x5305;&#x7ecf;&#x8fc7;&#x8def;&#x7531;&#x9009;&#x62e9;&#x540e;&#x53ef;&#x80fd;&#x7684;&#x8def;&#x7531;&#x7c7b;&#x578b;&#x662f;&#xff1a;unicast, multicast, broadcast, local"/>
<node CREATED="1457422868487" ID="ID_591871243" MODIFIED="1457423653459">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26412;&#22320;&#21457;&#36865;&#19968;&#20010;&#24191;&#25773;&#21253;&#19968;&#33324;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#20986;&#25509;&#21475;&#65292;&#22914;&#26524;&#19981;&#25351;&#23450;&#20986;&#25509;&#21475;&#65292;&#21017;&#23427;&#20165;&#20165;&#26159;&#29615;&#22238;&#32473;&#33258;&#24049;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24191;&#25773;&#21253;&#19981;&#20165;&#38656;&#35201;&#21457;&#36865;&#21040;&#25351;&#23450;&#30340;&#20986;&#25509;&#21475;&#65292;&#36824;&#35201;&#21457;&#36865;&#32473;&#33258;&#24049;&#65292;&#25152;&#20197;&#38656;&#35201;&#35774;&#32622;local&#26631;&#35782;&#12290;
    </p>
    <p>
      &#24191;&#25773;&#21253;&#30340;&#20986;&#25509;&#21475;&#24182;&#19981;&#26159;&#22266;&#23450;&#30340;&#65292;&#25152;&#20197;&#19981;&#33021;&#20026;&#20854;&#21019;&#24314;&#19968;&#20010;&#22266;&#23450;&#30340;&#36335;&#30001;&#32531;&#23384;&#65292;&#21482;&#33021;&#27599;&#20010;&#24191;&#25773;&#21253;&#21333;&#29420;&#21019;&#24314;&#65292;&#25152;&#20197;&#25226; fi &#32622;&#20026;&#31354;&#34920;&#31034;&#19981;&#38656;&#35201;&#20445;&#23384;&#24191;&#25773;&#21253;&#30340;&#36335;&#30001;&#32531;&#23384;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457422868487" FOLDED="true" ID="ID_692794345" MODIFIED="1457425550701">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26412;&#22320;&#21457;&#36865;&#19968;&#20010;&#32452;&#25773;&#21253;&#19968;&#33324;&#20063;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#20986;&#25509;&#21475;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#32452;&#25773;&#21253;&#30340;&#20986;&#25509;&#21475;&#24182;&#19981;&#26159;&#22266;&#23450;&#30340;&#65292;&#25152;&#20197;&#19981;&#33021;&#20026;&#20854;&#21019;&#24314;&#19968;&#20010;&#22266;&#23450;&#30340;&#36335;&#30001;&#32531;&#23384;&#65292;&#21482;&#33021;&#27599;&#20010;&#32452;&#25773;&#21253;&#21333;&#29420;&#21019;&#24314;&#65292;&#25152;&#20197;&#19981;&#38656;&#35201;&#20445;&#23384;&#32452;&#25773;&#21253;&#30340;&#36335;&#30001;&#32531;&#23384;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#26159;&#21542;&#23558;&#32452;&#25773;&#21253;&#29615;&#22238;&#32473;&#33258;&#24049;&#65292;&#21462;&#20915;&#20110;&#21253;&#30340;&#30446;&#30340;&#32452;&#25773;IP&#22320;&#22336;&#26159;&#19981;&#26159;&#22312;&#20986;&#25509;&#21475;&#30340;&#32452;&#25773;&#25509;&#25910;&#21015;&#34920;&#37324;&#38754;&#65292;&#22914;&#26524;&#22312;&#37027;&#20040;&#23601;&#38656;&#35201;&#35774;&#32622;local&#26631;&#35782;&#34920;&#31034;&#38656;&#35201;&#23558;&#32452;&#25773;&#21253;&#29615;&#22238;&#32473;&#33258;&#24049;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457425461531" ID="ID_1511983258" MODIFIED="1457425540162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25509;&#21475;&#30340;&#32452;&#25773;&#25509;&#25910;&#21015;&#34920;
    </p>
    <p>
      &#34920;&#31034;&#25509;&#21475;&#21152;&#20837;&#20102;&#21738;&#20123;&#32452;&#25773;&#32452;&#65292;&#20063;&#23601;&#26159;&#22312;&#36825;&#20010;&#25509;&#21475;&#19978;&#25910;&#21040;&#36825;&#20123;&#32452;&#25773;&#32452;&#30340;&#21253;&#26102;&#35201;&#25237;&#36882;&#21040;&#26412;&#22320;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457425861103" FOLDED="true" ID="ID_1693525617" MODIFIED="1457656153534">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#38656;&#35201;&#21457;&#36865;&#32473;&#33258;&#24049;&#30340;&#21253;&#65292;&#23558; rth-&gt;dst.input = ip_local_deliver&#12290;
    </p>
    <p>
      &#21457;&#36865;&#32473;&#33258;&#24049;&#30340;&#21253;&#34987;&#21457;&#21040;&#29615;&#22238;&#25509;&#21475;&#65292;&#22312;&#29615;&#22238;&#25509;&#21475;&#25910;&#21040;&#36825;&#20010;&#21253;&#26102;&#36825;&#20010;input&#20989;&#25968;&#34987;&#35843;&#29992;&#20174;&#32780;&#23558;&#21253;&#25237;&#36882;&#21040;&#26412;&#22320;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457656131173" ID="ID_1045616743" MODIFIED="1457656143890">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_2.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457426648093" ID="ID_504259702" MODIFIED="1457427014343">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ip_output&#29992;&#20110;&#23558;&#21253;&#20174;&#29305;&#23450;&#20986;&#21475;&#21457;&#20986;&#21435;&#65292;&#20294;&#23545;&#20110;&#24191;&#25773;&#21644;&#32452;&#25773;&#32780;&#35328;&#65292;&#23427;&#20204;&#19981;&#26159;&#21482;&#20174;&#19968;&#20010;&#20986;&#21475;&#21457;&#36865;&#20986;&#21435;&#65292;&#25152;&#20197;&#24517;&#39035;&#29992;ip_mc_output&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21478;&#22806;&#23558;&#32452;&#25773;&#30340;input&#20989;&#25968;&#35774;&#20026;rth-&gt;dst.input = ip_mr_input&#65292;&#36825;&#26159;&#20026;&#20102;&#24403;&#21253;&#37325;&#22238;&#31995;&#32479;&#26102;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#36827;&#34892;&#32452;&#25773;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1457661466747" FOLDED="true" ID="ID_978150884" MODIFIED="1458696961605" TEXT="&#x7279;&#x6b8a;&#x8def;&#x7531;&#x67e5;&#x627e;">
<node CREATED="1457661475770" FOLDED="true" ID="ID_1786912124" MODIFIED="1457661721641" TEXT="&#x6e90;&#x8def;&#x7531;">
<node CREATED="1457661487752" ID="ID_1639890080" MODIFIED="1457661664146">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28304;&#36335;&#30001;&#26159;&#25351;&#21457;&#36865;&#21253;&#30340;&#28304;&#20027;&#26426;&#22312;IP&#36873;&#39033;&#20013;&#25351;&#23450;&#20102;&#21253;&#35201;&#32463;&#36807;&#30340;&#33410;&#28857;&#12290;
    </p>
    <p>
      &#25152;&#20197;&#27492;&#26102;&#24182;&#19981;&#33021;&#26681;&#25454;&#21253;&#30340;&#30446;&#30340;IP&#22320;&#22336;&#20026;&#21253;&#26597;&#25214;&#36335;&#30001;&#65292;&#32780;&#26159;&#24212;&#35813;&#20174;IP&#36873;&#39033;&#20013;&#21462;&#20986;&#19979;&#19968;&#20010;&#24212;&#35813;&#32463;&#36807;&#30340;&#33410;&#28857;&#26469;&#26597;&#25214;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457661709726" ID="ID_325282586" MODIFIED="1457661718971">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_4.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1456859061181" FOLDED="true" ID="ID_677240880" MODIFIED="1458696955718" TEXT="&#x8f93;&#x5165;&#x8def;&#x7531;&#x548c;&#x8f93;&#x51fa;&#x8def;&#x7531;&#x7684;&#x533a;&#x522b;">
<node CREATED="1457422280750" ID="ID_1410914425" MODIFIED="1457422789168">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36755;&#20837;&#36335;&#30001;&#26159;&#25351;&#31995;&#32479;&#20174;&#26576;&#20010;&#25509;&#21475;&#19978;&#25910;&#21040;&#19968;&#20010;IP&#21253;&#28982;&#21518;&#35201;&#20915;&#23450;&#23427;&#30340;&#21435;&#22788;&#12290;
    </p>
    <p>
      &#36755;&#20986;&#36335;&#30001;&#26159;&#25351;&#31995;&#32479;&#33258;&#24049;&#21457;&#36865;&#19968;&#20010;IP&#21253;&#28982;&#21518;&#35201;&#20915;&#23450;&#23427;&#30340;&#21435;&#22788;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21435;&#22788;&#26377;&#19977;&#31181;&#65306;&#25237;&#36882;&#21040;&#26412;&#22320;(deliver to local)&#65292;&#36716;&#21457;(forward)&#65292;&#30452;&#25509;&#21457;&#36865;(output)&#12290;
    </p>
    <p>
      &#26681;&#25454;IP&#21253;&#30340;&#31867;&#22411;&#65292;&#21487;&#20197;&#26159;&#19978;&#38754;&#19968;&#31181;&#20063;&#21487;&#20197;&#26159;&#19978;&#38754;&#20960;&#31181;&#30340;&#32452;&#21512;&#12290;&#21512;&#27861;&#30340;&#32452;&#21512;&#21253;&#25324;&#65306;
    </p>
    <p>
      &#25237;&#36882;&#21040;&#26412;&#22320;(deliver to local)&#160;&#160;&#160;+&#160;&#160;&#160;&#30452;&#25509;&#21457;&#36865;(output)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457427036986" ID="ID_1921740201" MODIFIED="1457427160896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#36755;&#20837;&#36335;&#30001;&#32780;&#35328;&#65292;&#23427;&#24635;&#26159;&#26377;&#19968;&#20010;skb&#65292;&#25152;&#20197;&#26368;&#32456;&#36755;&#20837;&#36335;&#30001;&#26597;&#25214;&#30340;&#32467;&#26524;&#20063;&#26159;&#23384;&#25918;&#21040;skb-&gt;dst&#12290;
    </p>
    <p>
      &#20294;&#26159;&#23545;&#20110;&#36755;&#20986;&#36335;&#30001;&#32780;&#35328;&#65292;&#24182;&#27809;&#26377;&#19968;&#20010;skb&#20851;&#32852;&#65292;&#25152;&#20197;&#36755;&#20986;&#36335;&#30001;&#26597;&#25214;&#30340;&#32467;&#26524;&#26159;&#36820;&#22238;&#32473;&#35843;&#29992;&#32773;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457501841728" FOLDED="true" ID="ID_556210743" MODIFIED="1458696950118" TEXT="&#x8def;&#x7531;&#x7684;&#x5b9a;&#x4e49;">
<node CREATED="1457501973731" FOLDED="true" ID="ID_100103091" MODIFIED="1457510928043">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#23618;&#23545;&#36335;&#30001;&#30340;&#23450;&#20041;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457502180850" ID="ID_1449805696" MODIFIED="1457504414358">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>ip route</b>&#160;{ <b>add</b>&#160;| <b>del</b>&#160;| <b>change</b>&#160;| <b>append</b>&#160; | <b>replace</b>&#160;| <b>monitor</b>&#160;} <i>ROUTE</i>
    </p>
    <p>
      <i>ROUTE</i>&#160;:= <i>NODE_SPEC</i>&#160;[ <i>INFO_SPEC</i>&#160;]
    </p>
    <p>
      <i>NODE_SPEC</i>&#160;:= [ <i>TYPE</i>&#160;] <i>PREFIX</i>&#160;[ <b>tos</b>&#160;<i>TOS</i>&#160; ] [ <b>table</b>&#160;<i>TABLE_ID</i>&#160;] [ <b>proto</b>&#160;<i>RTPROTO</i>&#160; ] [ <b>scope</b>&#160;<i>SCOPE</i>&#160;] [ <b>metric</b>&#160;<i>METRIC</i>&#160;]
    </p>
    <p>
      <i>INFO_SPEC</i>&#160;:= <i>NH OPTIONS FLAGS</i>&#160;[ <b>nexthop</b>&#160;<i>NH</i>&#160; ] ...
    </p>
    <p>
      <i>NH</i>&#160;:= [ <b>via</b>&#160;<i>GATEWAY</i>&#160;] [ <b>dev</b>&#160;<i>OUTPUT_DEVICE</i>&#160; ] [ <b>weight</b>&#160;<i>NUMBER</i>&#160;] <i>NHFLAGS</i>
    </p>
    <p>
      <i>OPTIONS</i>&#160;:= <i>FLAGS</i>&#160;[ <b>mtu</b>&#160;<i>NUMBER</i>&#160;] [ <b>advmss</b>&#160; <i>NUMBER</i>&#160;] [ <b>rtt</b>&#160;<i>TIME</i>&#160;] [ <b>rttvar</b>&#160;<i>TIME</i>&#160; ] [ <b>window</b>&#160;<i>NUMBER</i>&#160;] [ <b>cwnd</b>&#160;<i>NUMBER</i>&#160;] [ <b>initcwnd</b>&#160; <i>NUMBER</i>&#160;] [ <b>ssthresh</b>&#160;<i>REALM</i>&#160;] [ <b>realms</b>&#160;<i>REALM</i>&#160; ] [ <b>rto_min</b>&#160;<i>TIME</i>&#160;] [ <b>initrwnd</b>&#160;<i>NUMBER</i>&#160;]
    </p>
    <p>
      <i>TYPE</i>&#160;:= [ <b>unicast</b>&#160;| <b>local</b>&#160;| <b>broadcast</b>&#160; | <b>multicast</b>&#160;| <b>throw</b>&#160;| <b>unreachable</b>&#160;| <b>prohibit</b>&#160; | <b>blackhole</b>&#160;| <b>nat</b>&#160;]
    </p>
    <p>
      <i>TABLE_ID</i>&#160;:= [ <b>local</b>| <b>main</b>&#160;| <b>default</b>&#160;| <b>all</b>&#160; | <i>NUMBER</i>&#160;]
    </p>
    <p>
      <i>SCOPE</i>&#160;:= [ <b>host</b>&#160;| <b>link</b>&#160;| <b>global</b>&#160;| <i>NUMBER</i>&#160; ]
    </p>
    <p>
      <i>FLAGS</i>&#160;:= [ <b>equalize</b>&#160;]
    </p>
    <p>
      <i>NHFLAGS</i>&#160;:= [ <b>onlink</b>&#160;| <b>pervasive</b>&#160;]
    </p>
    <p>
      <i>RTPROTO</i>&#160;:= [ <b>kernel</b>&#160;| <b>boot</b>&#160;| <b>static</b>&#160;| <i>NUMBER</i>&#160; ]
    </p>
  </body>
</html></richcontent>
<node CREATED="1457502345665" ID="ID_1396001276" MODIFIED="1457502376896" TEXT="&#x7b80;&#x5355;&#x800c;&#x8a00;&#xff0c;&#x4e00;&#x6761;ip route&#x6240;&#x64cd;&#x4f5c;&#x7684;&#x5185;&#x5bb9;&#x79f0;&#x4e4b;&#x4e3a;&#x4e00;&#x6761;&#x8def;&#x7531;"/>
<node CREATED="1457505105860" ID="ID_1110983020" MODIFIED="1457505133982" TEXT="&#x6ce8;&#x610f;METRIC&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x8def;&#x7531;&#x7684;&#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1457502539948" ID="ID_1130196672" MODIFIED="1457504438721">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37027;&#20040;&#21738;&#20123;&#20869;&#23481;&#30340;&#19981;&#21516;&#20250;&#23548;&#33268;&#21019;&#24314;&#19968;&#26465;&#26032;&#30340;&#36335;&#30001;&#65292;&#32780;&#21738;&#20123;&#20869;&#23481;&#30340;&#19981;&#21516;&#20165;&#20165;&#23548;&#33268;&#26367;&#25442;&#24050;&#26377;&#30340;&#36335;&#30001;&#21602;&#65311;
    </p>
    <p>
      &#20063;&#23601;&#26159;&#35828;&#21738;&#20123;&#20869;&#23481;&#26159;&#25628;&#32034;&#36335;&#30001;&#30340;&#20851;&#38190;&#23383;&#65292;&#32780;&#21738;&#20123;&#20869;&#23481;&#20165;&#20165;&#26159;&#36335;&#30001;&#20013;&#30340;&#20449;&#24687;&#65311;
    </p>
    <p>
      
    </p>
    <p>
      &#23646;&#20110;&#25628;&#32034;&#20851;&#38190;&#23383;&#30340;&#20869;&#23481;&#65306;
    </p>
    <p>
      PREFIX
    </p>
    <p>
      TOS
    </p>
    <p>
      TABLE_ID
    </p>
    <p>
      METRIC
    </p>
    <p>
      
    </p>
    <p>
      &#23646;&#20110;&#36335;&#30001;&#20449;&#24687;&#30340;&#20869;&#23481;&#65306;
    </p>
    <p>
      TYPE
    </p>
    <p>
      RTPROTO
    </p>
    <p>
      SCOPE
    </p>
    <p>
      via GATEWAY
    </p>
    <p>
      dev OUTPUT_DEVICE
    </p>
    <p>
      weight NUMBER
    </p>
    <p>
      mtu, ... ... ... rto_min, initwnd
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457503838787" FOLDED="true" ID="ID_1488515279" MODIFIED="1457505439204">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22810;&#36335;&#30001;(multiple route)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#19982;
    </p>
    <p>
      &#22810;&#36335;&#24452;(multiple path)
    </p>
  </body>
</html></richcontent>
<node CREATED="1457503955338" ID="ID_1940623597" MODIFIED="1457504662885">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22810;&#36335;&#30001;(multiple route)
    </p>
    <p>
      &#26159;&#25351;&#26377;&#22810;&#26465;&#21040;&#21516;&#19968;&#30446;&#30340;&#32593;&#27573;&#30340;&#36335;&#30001;&#65292;&#23427;&#20204;&#30340;PREFIX&#30456;&#21516;&#65292;&#20294;&#26159;TOS, TABLE_ID, METRIC&#33267;&#23569;&#26377;&#19968;&#20010;&#19981;&#21516;&#12290;
    </p>
    <p>
      &#20363;&#22914;&#65306;
    </p>
    <p>
      ip route add 220.100.100.0/24 tos 5 metric 6 via 10.0.2.3 dev eth0
    </p>
    <p>
      ip route add 220.100.100.0/24 tos 7 metric 8 via 10.0.2.3 dev eth0
    </p>
    <p>
      
    </p>
    <p>
      &#22810;&#36335;&#24452;(multiple path)
    </p>
    <p>
      &#26159;&#25351;&#19968;&#26465;&#36335;&#30001;&#20013;&#26377;&#22810;&#20010;&#21040;&#36798;&#21516;&#19968;&#30446;&#30340;&#32593;&#27573;&#30340;&#19979;&#19968;&#36339;&#65292;&#20063;&#23601;&#26159;via GATEWAY, dev OUTPUT_DEVICE&#33267;&#23569;&#26377;&#19968;&#20010;&#19981;&#21516;&#12290;
    </p>
    <p>
      &#20363;&#22914;&#65306;
    </p>
    <p>
      ip route add 220.100.100.0/24 tos 5 metric 6 via 10.0.2.3 dev eth0 nexthop via 10.0.2.4 dev eth0
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457504822213" FOLDED="true" ID="ID_1094650873" MODIFIED="1457505437240" TEXT="&#x591a;&#x8def;&#x7531;(multiple route)&#x7684;&#x9009;&#x62e9;&#x7b97;&#x6cd5;">
<node CREATED="1457504835875" ID="ID_736564441" MODIFIED="1457505078712">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39318;&#20808;&#26681;&#25454;&#31574;&#30053;&#36335;&#30001;&#35268;&#21017; (policy route rule) &#36873;&#25321;&#19968;&#20010;&#36335;&#30001;&#34920;&#65292;&#21363;&#30830;&#23450;TABLE_ID&#12290;
    </p>
    <p>
      &#28982;&#21518;&#26681;&#25454;&#36335;&#30001;&#26597;&#25214;&#20851;&#38190;&#23383;tos&#36873;&#25321;&#20855;&#26377;&#30456;&#21516;TOS&#20540;&#30340;&#36335;&#30001;&#65292;&#21363;&#30830;&#23450;TOS&#12290;
    </p>
    <p>
      &#26368;&#21518;&#36873;&#25321;METRIC&#26368;&#23567;&#30340;&#36335;&#30001;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457504857279" FOLDED="true" ID="ID_331564771" MODIFIED="1457505436104" TEXT="&#x591a;&#x8def;&#x5f84;(multiple path)&#x7684;&#x9009;&#x62e9;&#x7b97;&#x6cd5;">
<node CREATED="1457505189526" ID="ID_1495214413" MODIFIED="1457505297846" TEXT="&#x5728;&#x591a;&#x4e2a;&#x4e0b;&#x4e00;&#x8df3;&#x4e4b;&#x95f4;&#x91c7;&#x7528;&#x516c;&#x5e73;&#x52a0;&#x6743;&#x968f;&#x673a;&#x9009;&#x62e9;&#x7b97;&#x6cd5;"/>
<node CREATED="1457073036080" ID="ID_243679690" MODIFIED="1457073069085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ip_route_multipath_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457505454893" FOLDED="true" ID="ID_1238782368" MODIFIED="1457510932154" TEXT="&#x5185;&#x6838;&#x5bf9;&#x8def;&#x7531;&#x7684;&#x5b9a;&#x4e49;">
<node CREATED="1457507066125" ID="ID_569565760" MODIFIED="1457507092146">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/fib_trie_structure_10.JPG" />
  </body>
</html></richcontent>
<node CREATED="1457507110165" ID="ID_379486115" MODIFIED="1457507977986">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30001;&#36335;&#30001;&#30340;&#32452;&#32455;&#21487;&#20197;&#30475;&#21040;&#65306;
    </p>
    <p>
      &#19968;&#20010;struct leaf_info&#20195;&#34920;&#20102;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;prefix/plen&#12290;
    </p>
    <p>
      &#19968;&#20010;struct fib_alias&#20195;&#34920;&#20102;&#21040;&#30446;&#30340;&#32593;&#27573;&#30340;&#19968;&#26465;&#36335;&#30001;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#21040;&#19968;&#20010;&#30446;&#30340;&#32593;&#27573;&#21487;&#33021;&#26377;&#22810;&#26465;&#36335;&#30001;&#65292;&#36825;&#23545;&#24212;&#20102;&#22810;&#20010;struct fib_alias&#12290;
    </p>
    <p>
      fib_alias&#26159;&#25353;&#29031;tos&#20540;&#20174;&#22823;&#21040;&#23567;&#25490;&#21015;&#30340;&#65292;&#22914;&#26524;tos&#20540;&#30456;&#21516;&#21017;&#20877;&#25353;&#29031;fib_alias&#19979;&#38754;&#30340;struct fib_info -&gt; fib_priority&#25490;&#21015;&#12290;
    </p>
    <p>
      &#25353;&#29031;struct fib_info -&gt; fib_priority&#25490;&#21015;fib_alias&#26102;&#26159;&#25353;&#29031;priority&#20540;&#20174;&#23567;&#21040;&#22823;&#25490;&#21015;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457509300554" ID="ID_830949367" MODIFIED="1457509873845">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28155;&#21152;&#21040;&#21516;&#19968;&#30446;&#30340;&#32593;&#27573;&#30340;&#36335;&#30001;&#26102;&#22914;&#20309;&#21028;&#26029;&#26159;&#21542;&#35201;&#28155;&#21152;&#26032;&#30340;fib_alias&#25110;fib_info&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#34429;&#28982;struct fib_alias&#20013;&#21482;&#23384;&#20648;&#20102;tos&#20540;&#65292;&#20294;&#23427;&#25351;&#21521;&#19968;&#20010;fib_info&#65292;&#25152;&#20197;&#19968;&#20010;fib_alias&#23454;&#38469;&#19978;&#20195;&#34920;&#20102;&#160;(tos, priority)&#12290;&#21482;&#35201;&#27809;&#26377;&#20219;&#20309;&#19968;&#20010;&#24050;&#26377;&#30340;fib_alias&#21305;&#37197;&#26032;&#28155;&#21152;&#30340;&#36335;&#30001;&#30340; (tos, priority)&#65292;&#23601;&#38656;&#35201;&#26032;&#28155;&#21152;&#19968;&#20010;fib_alias&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#19968;&#20010;struct fib_info&#20195;&#34920;&#20102;(priority, nexthop)&#65292;&#21482;&#35201;&#27809;&#26377;&#20219;&#20309;&#19968;&#20010;&#24050;&#26377;&#30340;fib_info&#21305;&#37197;&#26032;&#28155;&#21152;&#30340;&#36335;&#30001;&#30340;(priority, nexthop)&#65292;&#23601;&#38656;&#35201;&#26032;&#28155;&#21152;&#19968;&#20010;fib_info&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1457575634923" FOLDED="true" ID="ID_1298396042" MODIFIED="1458251609668" TEXT="&#x9996;&#x9009;&#x6e90;&#x5730;&#x5740;">
<node CREATED="1457575714456" ID="ID_1572980607" MODIFIED="1457575853353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#25910;&#21040;&#19968;&#20010;&#23553;&#21253;&#21487;&#33021;&#20250;&#35302;&#21457;&#19968;&#20010;&#21160;&#20316;&#65292;&#35201;&#27714;&#26412;&#22320;&#20027;&#26426;&#36873;&#25321;&#19968;&#20010;&#28304;IP&#22320;&#22336;&#65292;&#20197;&#20415;&#22312;&#21521;&#27492;&#21253;&#30340;&#28304;&#21457;&#21253;&#26102;&#20351;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457575982784" ID="ID_1747615138" MODIFIED="1457575992299" TEXT="&#x5e94;&#x7528;&#x573a;&#x666f;">
<node CREATED="1457576010952" ID="ID_1988703775" MODIFIED="1457576017353" TEXT="ICMP reply">
<node CREATED="1457576048190" ID="ID_1600241525" MODIFIED="1457577087814">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20027;&#26426;&#25910;&#21040;ICMP echo request&#21518;&#38656;&#35201;&#22238;&#24212;&#19968;&#20010;ICMP echo reply&#65292;&#36825;&#26102;&#38656;&#35201;&#20026;ICMP echo reply&#21253;&#36873;&#25321;&#28304;IP&#22320;&#22336;&#12290;
    </p>
    <p>
      icmp_reply() -&gt; fib_compute_spec_dst()
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457577185049" ID="ID_710747896" MODIFIED="1457577192998" TEXT="IP&#x9009;&#x9879;">
<node CREATED="1457577261503" ID="ID_162396628" MODIFIED="1457577383508">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20123;IP&#36873;&#39033;&#35201;&#27714;&#28304;&#22320;&#22336;&#21644;&#30446;&#30340;&#22320;&#22336;&#20013;&#38388;&#30340;&#20027;&#26426;&#23558;&#23427;&#20204;&#25509;&#25910;&#35813;&#23553;&#21253;&#25509;&#21475;&#30340;IP&#22320;&#22336;&#20889;&#20837;IP&#21253;&#22836;&#20869;
    </p>
    <p>
      ip_options_echo() -&gt; fib_compute_spec_dst()
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1333011524022" FOLDED="true" ID="ID_1513574867" MODIFIED="1360639906726" TEXT="tcp">
<node CREATED="1333011540798" FOLDED="true" ID="ID_97648687" MODIFIED="1359856749173" TEXT="&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1333011575288" FOLDED="true" ID="ID_195233229" MODIFIED="1333948923712" TEXT="struct inet_hashinfo tcp_hashinfo&#xa;&#x6b64;&#x5904;&#x5305;&#x542b;&#x4e86;&#x5904;&#x4e8e;listen, bind, establish&#x4e09;&#x79cd;&#x72b6;&#x6001;&#x7684;tcp socket&#x7684;hash&#x8868;&#xa;listen&#x72b6;&#x6001;&#x7684;socket&#x653e;&#x5728;listening_hash&#x91cc;&#x9762;&#xa;bind&#x72b6;&#x6001;&#x7684;socket&#x653e;&#x5728;bhash&#x91cc;&#x9762;&#xa;establish&#x72b6;&#x6001;&#x7684;socket&#x653e;&#x5728;ehash&#x91cc;&#x9762;">
<node CREATED="1333017452485" ID="ID_405556433" MODIFIED="1333017459445" TEXT="struct inet_ehash_bucket *ehash"/>
<node CREATED="1333017473583" ID="ID_1957564911" MODIFIED="1333017480653" TEXT="spinlock_t *ehash_locks"/>
<node CREATED="1333017494607" ID="ID_453367776" MODIFIED="1333017502743" TEXT="unsigned int ehash_size"/>
<node CREATED="1333017513155" ID="ID_295150795" MODIFIED="1333017519854" TEXT="unsigned int ehash_locks_mask"/>
<node CREATED="1333017542551" ID="ID_172459550" MODIFIED="1333017553862" TEXT="struct inet_bind_hashbucket *bhash"/>
<node CREATED="1333017567260" ID="ID_1650275706" MODIFIED="1333017573767" TEXT="unsigned int bhash_size"/>
<node CREATED="1333017592366" ID="ID_776826127" MODIFIED="1333017600792" TEXT="struct kmem_cache *bind_bucket_cachep"/>
<node CREATED="1333017617760" ID="ID_1239284977" MODIFIED="1333017628856" TEXT="struct inet_listen_hashbucket listening_hash[INET_LHTABLE_SIZE]"/>
<node CREATED="1333017642779" ID="ID_1613728625" MODIFIED="1333017648864" TEXT="atomic_t bsockets"/>
</node>
<node CREATED="1333018587227" FOLDED="true" ID="ID_1427000647" MODIFIED="1333949182717" TEXT="struct proto tcp_prot">
<node CREATED="1333018618033" ID="ID_1733392206" MODIFIED="1333018630584" TEXT="&#x9;.name&#x9;&#x9;&#x9;= &quot;TCP&quot;,&#xa;&#x9;.owner&#x9;&#x9;&#x9;= THIS_MODULE,&#xa;&#x9;.close&#x9;&#x9;&#x9;= tcp_close,&#xa;&#x9;.connect&#x9;&#x9;= tcp_v4_connect,&#xa;&#x9;.disconnect&#x9;&#x9;= tcp_disconnect,&#xa;&#x9;.accept&#x9;&#x9;&#x9;= inet_csk_accept,&#xa;&#x9;.ioctl&#x9;&#x9;&#x9;= tcp_ioctl,&#xa;&#x9;.init&#x9;&#x9;&#x9;= tcp_v4_init_sock,&#xa;&#x9;.destroy&#x9;&#x9;= tcp_v4_destroy_sock,&#xa;&#x9;.shutdown&#x9;&#x9;= tcp_shutdown,&#xa;&#x9;.setsockopt&#x9;&#x9;= tcp_setsockopt,&#xa;&#x9;.getsockopt&#x9;&#x9;= tcp_getsockopt,&#xa;&#x9;.recvmsg&#x9;&#x9;= tcp_recvmsg,&#xa;&#x9;.backlog_rcv&#x9;&#x9;= tcp_v4_do_rcv,&#xa;&#x9;.hash&#x9;&#x9;&#x9;= inet_hash,&#xa;&#x9;.unhash&#x9;&#x9;&#x9;= inet_unhash,&#xa;&#x9;.get_port&#x9;&#x9;= inet_csk_get_port,&#xa;&#x9;.enter_memory_pressure&#x9;= tcp_enter_memory_pressure,&#xa;&#x9;.sockets_allocated&#x9;= &amp;tcp_sockets_allocated,&#xa;&#x9;.orphan_count&#x9;&#x9;= &amp;tcp_orphan_count,&#xa;&#x9;.memory_allocated&#x9;= &amp;tcp_memory_allocated,&#xa;&#x9;.memory_pressure&#x9;= &amp;tcp_memory_pressure,&#xa;&#x9;.sysctl_mem&#x9;&#x9;= sysctl_tcp_mem,&#xa;&#x9;.sysctl_wmem&#x9;&#x9;= sysctl_tcp_wmem,&#xa;&#x9;.sysctl_rmem&#x9;&#x9;= sysctl_tcp_rmem,&#xa;&#x9;.max_header&#x9;&#x9;= MAX_TCP_HEADER,&#xa;&#x9;.obj_size&#x9;&#x9;= sizeof(struct tcp_sock),&#xa;&#x9;.slab_flags&#x9;&#x9;= SLAB_DESTROY_BY_RCU,&#xa;&#x9;.twsk_prot&#x9;&#x9;= &amp;tcp_timewait_sock_ops,&#xa;&#x9;.rsk_prot&#x9;&#x9;= &amp;tcp_request_sock_ops,&#xa;&#x9;.h.hashinfo&#x9;&#x9;= &amp;tcp_hashinfo,&#xa;&#x9;.compat_setsockopt&#x9;= compat_tcp_setsockopt,&#xa;&#x9;.compat_getsockopt&#x9;= compat_tcp_getsockopt,&#xa;"/>
</node>
<node CREATED="1333011015599" FOLDED="true" ID="ID_1944777155" MODIFIED="1333949640210" TEXT="struct net_protocol tcp_protocol">
<node CREATED="1333011091135" ID="ID_553236116" MODIFIED="1333949328298" TEXT=".handler = tcp_v4_rcv: &#x63a5;&#x6536;&#x5c5e;&#x4e8e;&#x8fd9;&#x4e2a;&#x534f;&#x8bae;&#x7684;&#x5305;"/>
<node CREATED="1333011130920" ID="ID_855825767" MODIFIED="1333949357014" TEXT=".err_handler = tcp_v4_err:"/>
<node CREATED="1333011148101" ID="ID_1215284542" MODIFIED="1333949455836" TEXT=".gso_send_check = tcp_v4_gso_send_check:"/>
<node CREATED="1333011162602" ID="ID_1517257783" MODIFIED="1333949458089" TEXT=".gso_segment = tcp_tso_segment:"/>
<node CREATED="1333011178768" ID="ID_1190728789" MODIFIED="1333949460036" TEXT=".gro_receive = tcp4_gro_receive:"/>
<node CREATED="1333011192232" ID="ID_3147426" MODIFIED="1333949462488" TEXT=".gro_complete = tcp4_gro_complete:"/>
<node CREATED="1333011218025" ID="ID_1565091744" MODIFIED="1333949464470" TEXT=".no_policy = 1"/>
<node CREATED="1333011227074" ID="ID_577958502" MODIFIED="1333949466411" TEXT=".netns_ok = 1"/>
</node>
<node CREATED="1334127919184" FOLDED="true" ID="ID_690226162" MODIFIED="1334128156758" TEXT="tcp_socket">
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" struct inet_connection_sock inet_conn"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u16 tcp_header_len"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u16 xmit_size_goal_segs"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" __be32 pred_flags"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 rcv_nxt"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 copied_seq"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 rcv_wup"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 snd_nxt"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 snd_una"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 snd_sml"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 rcv_tstamp"/>
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" u32 lsndtime"/>
<node CREATED="1334127919184" FOLDED="true" ID="ID_1194266833" MODIFIED="1359856749172" TEXT="">
<node CREATED="1334127919184" MODIFIED="1334127919184" TEXT=" struct sk_buff_head prequeue"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" struct task_struct *task"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" struct iovec *iov"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" int memory"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" int len"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" struct dma_chan *dma_chan"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" int wakeup"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" struct dma_pinned_list *pinned_list"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" dma_cookie_t dma_cookie"/>
</node>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" u32 snd_wl1"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" u32 snd_wnd"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" u32 max_window"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" u32 mss_cache"/>
<node CREATED="1334127919185" MODIFIED="1334127919185" TEXT=" u32 window_clamp"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 rcv_ssthresh"/>
<node CREATED="1334127919186" ID="ID_1343233371" MODIFIED="1334127919186" TEXT=" u32 frto_highmark"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u16 advmss"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u8 frto_counter"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u8 nonagle"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 srtt"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 mdev"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 mdev_max"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 rttvar"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 rtt_seq"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 packets_out"/>
<node CREATED="1334127919186" MODIFIED="1334127919186" TEXT=" u32 retrans_out"/>
<node CREATED="1334127919186" ID="ID_422308211" MODIFIED="1334127919186" TEXT=" u16 urg_data"/>
<node CREATED="1334127919187" ID="ID_1137467928" MODIFIED="1334127919187" TEXT=" u8 ecn_flags"/>
<node CREATED="1334127919187" ID="ID_1177657840" MODIFIED="1334127919187" TEXT=" u8 reordering"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 snd_up"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u8 keepalive_probes"/>
<node CREATED="1334127919187" ID="ID_1600316885" MODIFIED="1334127919187" TEXT=" struct tcp_options_received rx_opt"/>
<node CREATED="1334127919187" ID="ID_1996368082" MODIFIED="1334127919187" TEXT=" u32 snd_ssthresh"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 snd_cwnd"/>
<node CREATED="1334127919187" ID="ID_868546501" MODIFIED="1334127919187" TEXT=" u32 snd_cwnd_cnt"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 snd_cwnd_clamp"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 snd_cwnd_used"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 snd_cwnd_stamp"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 rcv_wnd"/>
<node CREATED="1334127919187" MODIFIED="1334127919187" TEXT=" u32 write_seq"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" u32 pushed_seq"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" u32 lost_out"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" u32 sacked_out"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" u32 fackets_out"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" u32 tso_deferred"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" u32 bytes_acked"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct sk_buff* lost_skb_hint"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct sk_buff *scoreboard_skb_hint"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct sk_buff *retransmit_skb_hint"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct sk_buff_head out_of_order_queue"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct tcp_sack_block duplicate_sack[1]"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct tcp_sack_block selective_acks[4]"/>
<node CREATED="1334127919188" MODIFIED="1334127919188" TEXT=" struct tcp_sack_block recv_sack_cache[4]"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" struct sk_buff *highest_sack"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" int lost_cnt_hint"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 retransmit_high"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 lost_retrans_low"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 prior_ssthresh"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 high_seq"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 retrans_stamp"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 undo_marker"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" int undo_retrans"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 total_retrans"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" u32 urg_seq"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" unsigned int keepalive_time"/>
<node CREATED="1334127919189" MODIFIED="1334127919189" TEXT=" unsigned int keepalive_intvl"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" int linger2"/>
<node CREATED="1334127919190" FOLDED="true" ID="ID_748453106" MODIFIED="1359856749173" TEXT="">
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 rtt"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 seq"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 time"/>
</node>
<node CREATED="1334127919190" FOLDED="true" ID="ID_1039066427" MODIFIED="1359856749173" TEXT="">
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" int space"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 seq"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 time"/>
</node>
<node CREATED="1334127919190" FOLDED="true" ID="ID_1136999056" MODIFIED="1359856749173" TEXT="">
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 probe_seq_start"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" u32 probe_seq_end"/>
</node>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" struct tcp_sock_af_ops *af_specific"/>
<node CREATED="1334127919190" MODIFIED="1334127919190" TEXT=" struct tcp_md5sig_info *md5sig_info"/>
</node>
</node>
<node CREATED="1333011551104" ID="ID_1944881437" MODIFIED="1333011556187" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
<node CREATED="1333949647686" ID="ID_492953984" MODIFIED="1333949659588" TEXT="&#x6536;&#x5305; : tcp_v4_rcv"/>
<node CREATED="1333018229822" FOLDED="true" ID="ID_605821547" MODIFIED="1359856749174" TEXT="&#x5b50;&#x6a21;&#x5757;">
<node CREATED="1333018236657" FOLDED="true" ID="ID_1114412451" MODIFIED="1359856749173" TEXT="&#x62e5;&#x585e;&#x7ba1;&#x7406;">
<node CREATED="1333018249044" FOLDED="true" ID="ID_828196401" MODIFIED="1359856749173" TEXT="&#x63a5;&#x53e3;">
<node CREATED="1333018254839" ID="ID_164910745" MODIFIED="1333018256757" TEXT="tcp_register_congestion_control"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1333012805099" FOLDED="true" ID="ID_1868919331" MODIFIED="1397648734738" TEXT="namespace">
<node CREATED="1333012814756" ID="ID_1602881562" MODIFIED="1397648669231" TEXT="&#x539f;&#x7406;">
<node CREATED="1333012844107" ID="ID_1737433040" MODIFIED="1333012953632" TEXT="&#x5728;Linux&#x534f;&#x8bae;&#x6808;&#x4e2d;&#x5f15;&#x5165;&#x7f51;&#x7edc;&#x547d;&#x540d;&#x7a7a;&#x95f4;, &#x662f;&#x4e3a;&#x4e86;&#x652f;&#x6301;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x7684;&#x591a;&#x4e2a;&#x5b9e;&#x4f8b;, &#xa;&#x800c;&#x8fd9;&#x4e9b;&#x534f;&#x8bae;&#x6808;&#x7684;&#x9694;&#x79bb;&#x5c31;&#x662f;&#x7531;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x6765;&#x5b9e;&#x73b0;&#x7684;(&#x534f;&#x8bae;&#x6808;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#x5176;&#x4ed6;&#x534f;&#x8bae;&#x6808;&#x7684;&#x79c1;&#x6709;&#x6570;&#x636e;).&#xa;&#xa;&#x9700;&#x8981;&#x7eb3;&#x5165;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x7684;&#x5143;&#x7d20;&#x5305;&#x62ec;&#x8fdb;&#x7a0b;, &#x5957;&#x63a5;&#x5b57;, &#x7f51;&#x7edc;&#x8bbe;&#x5907;. &#x8fdb;&#x7a0b;&#x521b;&#x5efa;&#x7684;&#x5957;&#x63a5;&#x5b57;&#x5fc5;&#x987b;&#x5c5e;&#x4e8e;&#x67d0;&#x4e2a;&#x547d;&#x540d;&#x7a7a;&#x95f4;, &#xa;&#x5957;&#x63a5;&#x5b57;&#x7684;&#x64cd;&#x4f5c;&#x4e5f;&#x5fc5;&#x987b;&#x5728;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x5185;&#x8fdb;&#x884c;, &#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x4e5f;&#x5fc5;&#x987b;&#x5c5e;&#x4e8e;&#x67d0;&#x4e2a;&#x547d;&#x540d;&#x7a7a;&#x95f4;, &#xa;&#x4f46;&#x53ef;&#x80fd;&#x4f1a;&#x6539;&#x53d8;, &#x56e0;&#x4e3a;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x5c5e;&#x4e8e;&#x516c;&#x5171;&#x8d44;&#x6e90;.&#xa;&#xa;&#x6240;&#x6709;&#x534f;&#x8bae;&#x6808;&#x76f8;&#x5173;&#x7684;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#x90fd;&#x5fc5;&#x987b;&#x4fee;&#x6539;&#x4e3a;&#x534f;&#x8bae;&#x6808;&#x79c1;&#x6709;. &#x6700;&#x597d;&#x7684;&#x529e;&#x6cd5;&#x5c31;&#x662f;&#x8ba9;&#x8fd9;&#x4e9b;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#x6210;&#x4e3a;&#xa;&#x4e00;&#x4e2a;per net namespace&#x53d8;&#x91cf;&#x7684;&#x6210;&#x5458;, &#x7136;&#x540e;&#x4e3a;&#x534f;&#x8bae;&#x6808;&#x7684;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x90fd;&#x52a0;&#x5165;&#x4e00;&#x4e2a;namespace&#x53c2;&#x6570;"/>
</node>
<node CREATED="1333013075528" ID="ID_1559416659" MODIFIED="1333013084315" TEXT="&#x63a5;&#x53e3;">
<node CREATED="1333013085350" ID="ID_453977332" MODIFIED="1333013087451" TEXT="register_pernet_subsys"/>
<node CREATED="1333013108553" ID="ID_1567502944" MODIFIED="1333013109488" TEXT="register_pernet_device"/>
</node>
</node>
<node CREATED="1306743421745" FOLDED="true" ID="ID_721662991" MODIFIED="1443725334820" TEXT="ppp">
<node CREATED="1420010422942" FOLDED="true" ID="ID_1324118026" MODIFIED="1433919335263" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1421127711841" FOLDED="true" ID="ID_1141252084" MODIFIED="1433919334001">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPOX socket
    </p>
    <p>
      &#29992;&#25143;&#23618;&#21487;&#20197;&#25171;&#24320;&#19968;&#20010;PPPOX&#23478;&#26063;&#30340;oscket
    </p>
    <p>
      &#27604;&#22914;socket(AF_PPPOX, SOCK_DGRAM, PX_PROTO_OL2TP)
    </p>
    <p>
      &#29992;&#20197;&#25511;&#21046;&#29305;&#23450;ppp channel&#23618;&#30340;&#34892;&#20026;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421127729701" ID="ID_1529094117" MODIFIED="1421127916202" TEXT="ppp generic&#x5c42;&#x8d1f;&#x8d23;PPPOX family&#x7684;&#x6ce8;&#x518c;">
<node CREATED="1421127953578" ID="ID_1240421922" MODIFIED="1421127963351" TEXT="int pppox_init(void)">
<node CREATED="1421128061075" ID="ID_1048558468" MODIFIED="1421128061755" TEXT="sock_register(&amp;pppox_proto_family)">
<node CREATED="1421127987599" ID="ID_729145562" MODIFIED="1421127988381" TEXT="int sock_register(const struct net_proto_family *ops)"/>
<node CREATED="1421128043959" ID="ID_1506724860" MODIFIED="1421128045405" TEXT="struct net_proto_family pppox_proto_family">
<node CREATED="1421128119050" ID="ID_493257280" MODIFIED="1421128135731">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      .family = PF_PPPOX
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421128149471" ID="ID_310104098" LINK="#ID_510097214" MODIFIED="1421131008207" TEXT=".create = pppox_create"/>
</node>
</node>
</node>
</node>
<node CREATED="1421128570675" ID="ID_1311857862" MODIFIED="1421128595285" TEXT="ppp channel&#x5c42;&#x8d1f;&#x8d23;PPPOX protocol&#x7684;&#x6ce8;&#x518c;">
<node CREATED="1421128627938" ID="ID_1598074897" MODIFIED="1421128635427" TEXT="l2tp">
<node CREATED="1421129128061" ID="ID_1737020084" MODIFIED="1421129133853" TEXT="int pppol2tp_init()">
<node CREATED="1421129069974" ID="ID_1654099554" MODIFIED="1421129071076" TEXT="proto_register(&amp;pppol2tp_sk_proto, 0)">
<node CREATED="1421128748233" ID="ID_914910296" MODIFIED="1421128749355" TEXT="int proto_register(struct proto *prot, int alloc_slab)"/>
<node CREATED="1421130399741" ID="ID_1608647138" MODIFIED="1421130400600" TEXT="struct proto pppol2tp_sk_proto">
<node CREATED="1421130414038" ID="ID_887060963" MODIFIED="1421130424660" TEXT=".name = &quot;PPPOL2TP&quot;"/>
<node CREATED="1421130439041" ID="ID_558820126" MODIFIED="1421130443972" TEXT=".obj_size = sizeof(struct pppox_sock)"/>
</node>
</node>
<node CREATED="1421129089692" ID="ID_1937343141" MODIFIED="1421129090685" TEXT="register_pppox_proto(PX_PROTO_OL2TP, &amp;pppol2tp_proto)">
<node CREATED="1421130192507" ID="ID_57426471" LINK="#ID_418888992" MODIFIED="1421130206431" TEXT="int register_pppox_proto(int proto_num, const struct pppox_proto *pp)"/>
<node CREATED="1421130324016" ID="ID_1109800694" MODIFIED="1421130325024" TEXT="struct pppox_proto pppol2tp_proto">
<node CREATED="1421128969830" ID="ID_503250404" MODIFIED="1421130355357" TEXT=".create = pppol2tp_create"/>
<node CREATED="1421128991334" ID="ID_1565240099" MODIFIED="1421130360711" TEXT=".ioctl = pppol2tp_ioctl"/>
</node>
</node>
</node>
</node>
<node CREATED="1421128636039" ID="ID_939919055" MODIFIED="1421128639415" TEXT="pppoe">
<node CREATED="1421128674321" ID="ID_1726978554" MODIFIED="1421128682869" TEXT="int pppoe_init()">
<node CREATED="1421128683774" ID="ID_1331390392" MODIFIED="1421128686025" TEXT="proto_register(&amp;pppoe_sk_proto, 0)">
<node CREATED="1421128748233" ID="ID_1425965742" MODIFIED="1421128749355" TEXT="int proto_register(struct proto *prot, int alloc_slab)"/>
<node CREATED="1421130490150" ID="ID_1972178316" MODIFIED="1421130492182" TEXT="struct proto pppoe_sk_proto">
<node CREATED="1421130508344" ID="ID_86070782" MODIFIED="1421130516837" TEXT=".name = &quot;PPPOE&quot;"/>
<node CREATED="1421130528913" ID="ID_1681386898" MODIFIED="1421130532946" TEXT=".obj_size = sizeof(struct pppox_sock)"/>
</node>
</node>
<node CREATED="1421128710620" ID="ID_1928171816" MODIFIED="1421128711602" TEXT="register_pppox_proto(PX_PROTO_OE, &amp;pppoe_proto)">
<node CREATED="1421128850397" ID="ID_418888992" MODIFIED="1421128851203" TEXT="int register_pppox_proto(int proto_num, const struct pppox_proto *pp)">
<node CREATED="1421128891248" ID="ID_1340620173" MODIFIED="1421128927576">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppox_protos[proto_num] = pp
    </p>
    <p>
      &#23558;PPPOX&#21327;&#35758;&#25918;&#20837;&#20840;&#23616;&#25968;&#32452;pppox_protos
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1421128781070" ID="ID_449369084" MODIFIED="1421128782985" TEXT="struct pppox_proto pppoe_proto">
<node CREATED="1421128969830" ID="ID_828711057" MODIFIED="1421128976690" TEXT=".create = pppoe_create"/>
<node CREATED="1421128991334" ID="ID_1998767736" MODIFIED="1421129000320" TEXT=".ioctl = pppoe_ioctl"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1421128228982" ID="ID_1805758495" MODIFIED="1421128425935" TEXT="pppol2tp_fd = socket(AF_PPPOX, SOCK_DGRAM, PX_PROTO_OL2TP)"/>
<node CREATED="1421128230637" ID="ID_553897177" MODIFIED="1421128442664" TEXT="pppoe_fd = socket(AF_PPPOX, SOCK_DGRAM, PX_PROTO_OL2TP)">
<node CREATED="1421131027974" ID="ID_1408530630" MODIFIED="1421134653378">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_proto_family pppox_proto_family -&gt; create
    </p>
    <p>
      &#39318;&#20808;&#35843;&#29992;socket&#25152;&#23646;family&#30340;create&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421128338061" ID="ID_510097214" MODIFIED="1421128339298" TEXT="pppox_create">
<node CREATED="1421128355814" ID="ID_255602270" MODIFIED="1421130944482">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppox_protos[protocol]-&gt;create(net, sock)
    </p>
    <p>
      &#20877;&#35843;&#29992;socket&#25152;&#23646;protocol&#30340;create&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421131145306" ID="ID_1494439205" LINK="#ID_1615148337" MODIFIED="1421134536533" TEXT="pppoe_create()"/>
</node>
</node>
</node>
</node>
<node CREATED="1421128483538" ID="ID_1776939696" MODIFIED="1421128536747" TEXT="ioctl(pppol2tp_fd, cmd)"/>
<node CREATED="1421128483538" ID="ID_478167379" MODIFIED="1421128514342" TEXT="ioctl(pppoe_fd, cmd)">
<node CREATED="1421134662336" ID="ID_1247293103" MODIFIED="1421134682954">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_proto_family pppox_proto_family -&gt; ioctl
    </p>
    <p>
      &#39318;&#20808;&#35843;&#29992;socket&#25152;&#23646;family&#30340;ioctl&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421134604633" ID="ID_888987592" MODIFIED="1421134732472">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppox_ioctl()
    </p>
  </body>
</html></richcontent>
<node CREATED="1421134763735" ID="ID_1730848918" MODIFIED="1421134789603">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppox_protos[sk-&gt;sk_protocol]-&gt;ioctl(sock, cmd, arg)
    </p>
    <p>
      &#20877;&#35843;&#29992;socket&#25152;&#23646;protocol&#30340;ioctl&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421134831593" ID="ID_1369121319" LINK="#ID_1477832472" MODIFIED="1421135123890" TEXT="pppoe_ioctl()"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1306743435664" ID="ID_1295238669" MODIFIED="1306743448926" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;"/>
<node CREATED="1306743450752" FOLDED="true" ID="ID_1509135692" MODIFIED="1433823761328" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1420010093978" ID="ID_1373072317" MODIFIED="1420010102494" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1420054702113" ID="ID_1058860826" MODIFIED="1420700819451" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;">
<node CREATED="1420700715256" ID="ID_855903778" MODIFIED="1420700751202" TEXT="&#x7528;&#x6237;&#x5c42;&#x6bcf;&#x6b21;&#x6253;&#x5f00;&#x5b57;&#x7b26;&#x8bbe;&#x5907;&#x6587;&#x4ef6;/dev/ppp&#x65f6;&#x5f97;&#x5230;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;"/>
<node CREATED="1420054629904" ID="ID_1760871681" MODIFIED="1420054648912" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x4e0e;ppp unit&#x7684;&#x5173;&#x7cfb;">
<node CREATED="1420054845245" ID="ID_1289676696" MODIFIED="1420054895488" TEXT="&#x591a;&#x4e2a;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x53ef;&#x4ee5;&#x540c;&#x65f6;attach&#x5230;&#x4e00;&#x4e2a;ppp unit&#xff0c;&#x4f46;&#x662f;&#x4efb;&#x610f;&#x65f6;&#x523b;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x662f;ppp unit&#x7684;owner"/>
<node CREATED="1420054715746" ID="ID_1858964735" MODIFIED="1420055341880" TEXT="ppp unit&#x7684;shutdown&#x548c;destroy&#x662f;2&#x4e2a;&#x6b65;&#x594f;&#xff1a;&#xa;&#x5f53;ppp unit&#x7684;owner&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x5173;&#x95ed;&#x65f6;&#xff0c;ppp unit&#x4f1a;shutdown&#xff0c;&#x6b64;&#x65f6;&#x522b;&#x7684;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x53ef;&#x4ee5;&#x6210;&#x4e3a;&#x6b64;ppp unit&#x7684;owner&#xa;&#x5f53;attach&#x5230;&#x6b64;ppp unit&#x7684;&#x6240;&#x6709;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x90fd;&#x5173;&#x95ed;&#x65f6;&#xff0c;ppp unit&#x4f1a;destroy&#xa;"/>
<node CREATED="1420083596790" ID="ID_1030582580" MODIFIED="1420083687251" TEXT="&#x5f53;((struct ppp_file *)file-&gt;private_data)-&gt;kind == INTERFACE&#x65f6;&#x8868;&#x793a;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;ppp unit"/>
</node>
<node CREATED="1420054649895" ID="ID_1742526507" MODIFIED="1420054663573" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x4e0e;ppp channel&#x7684;&#x5173;&#x7cfb;">
<node CREATED="1420083596790" ID="ID_1629654659" MODIFIED="1420083741593" TEXT="&#x5f53;((struct ppp_file *)file-&gt;private_data)-&gt;kind == CHANNEL&#x65f6;&#x8868;&#x793a;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;ppp channel"/>
</node>
</node>
<node CREATED="1420010531533" ID="ID_445286238" MODIFIED="1420084680799">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp unit
    </p>
    <p>
      &#19968;&#20010;ppp unit&#20195;&#34920;&#20102;&#19968;&#20010;ppp network device&#65292;&#21487;&#20197;&#26377;&#22810;&#20010;channel &#36830;&#25509;connect&#21040;&#36825;&#20010;ppp unit
    </p>
    <p>
      &#24403;&#22810;&#20010;ppp channel connect&#21040;&#36825;&#20010;ppp unit&#26102;&#31216;&#20026;multilink, &#27492;&#26102;ppp unit&#26159;&#22810;&#20010;channel&#30340;&#32465;&#23450;bundle
    </p>
  </body>
</html></richcontent>
<node CREATED="1420011480809" FOLDED="true" ID="ID_536273960" MODIFIED="1420702311846" TEXT="struct ppp">
<node CREATED="1420011935680" FOLDED="true" ID="ID_5592245" MODIFIED="1420013320733" TEXT=" struct ppp_file file">
<node CREATED="1420013132705" ID="ID_416128793" MODIFIED="1420013133654" TEXT="kind">
<node CREATED="1420013150705" ID="ID_1281610535" MODIFIED="1420013152660" TEXT="INTERFACE"/>
<node CREATED="1420013162265" ID="ID_1528059126" MODIFIED="1420013163625" TEXT="CHANNEL"/>
</node>
<node CREATED="1420012285589" ID="ID_88191581" MODIFIED="1420012285589" TEXT=" struct sk_buff_head xq"/>
<node CREATED="1420012285589" ID="ID_1900904138" MODIFIED="1420012285589" TEXT=" struct sk_buff_head rq"/>
<node CREATED="1420012285589" MODIFIED="1420012285589" TEXT=" wait_queue_head_t rwait"/>
<node CREATED="1420012285589" MODIFIED="1420012285589" TEXT=" atomic_t refcnt"/>
<node CREATED="1420012285589" ID="ID_1456781875" MODIFIED="1420012285589" TEXT=" int index"/>
<node CREATED="1420012285589" ID="ID_1087045709" MODIFIED="1420012285589" TEXT=" int dead"/>
</node>
<node CREATED="1420011935680" ID="ID_878914925" MODIFIED="1420700887649">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct file *owner
    </p>
    <p>
      &#20851;&#32852;&#21040;&#27492;ppp unit&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_900527050" MODIFIED="1420085791522">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct list_head channels
    </p>
    <p>
      &#36830;&#25509;&#21040;&#27492;ppp unit&#30340;ppp channel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_1079887926" MODIFIED="1420085809694">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;int n_channels
    </p>
    <p>
      &#19978;&#38754;&#38142;&#34920;&#30340;&#25968;&#30446;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_201824605" MODIFIED="1420011935680" TEXT=" spinlock_t rlock"/>
<node CREATED="1420011935680" ID="ID_1977987501" MODIFIED="1420011935680" TEXT=" spinlock_t wlock"/>
<node CREATED="1420011935680" ID="ID_1061267889" MODIFIED="1420085598700">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;int mru
    </p>
    <p>
      &#26368;&#22823;&#25509;&#25910;&#21333;&#20803;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" FOLDED="true" ID="ID_66432555" MODIFIED="1420087259059">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;unsigned int flags
    </p>
    <p>
      &#36825;&#20123;flag&#19968;&#33324;&#26159;&#22312;ppp LCP&#21327;&#21830;&#20043;&#21518;&#35774;&#32622;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420085917431" ID="ID_1225494573" MODIFIED="1420085919383" TEXT="SC_NO_TCP_CCID">
<node CREATED="1420085936544" ID="ID_1349994456" MODIFIED="1420085939106" TEXT="disable VJ connection-id comp"/>
<node CREATED="1420087024525" ID="ID_824571599" MODIFIED="1420087042610">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      disable connection-id compression for TCP header compression
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420085967872" ID="ID_1269485153" MODIFIED="1420085968740" TEXT="SC_CCP_OPEN">
<node CREATED="1420085979558" ID="ID_1574557821" MODIFIED="1420085980630" TEXT="Look at CCP packets"/>
<node CREATED="1420087088999" ID="ID_703455666" MODIFIED="1420087099351">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Compression Control Protocol (CCP) is open, so inspect CCP packets
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420085998761" ID="ID_50953606" MODIFIED="1420085999441" TEXT="SC_CCP_UP">
<node CREATED="1420086011838" ID="ID_1692731620" MODIFIED="1420086012995" TEXT="May send/recv compressed packets"/>
<node CREATED="1420087113654" ID="ID_1723275298" MODIFIED="1420087114319" TEXT="CCP is up, may (de)compress packets"/>
</node>
<node CREATED="1420086032673" ID="ID_1979388675" MODIFIED="1420086033432" TEXT="SC_LOOP_TRAFFIC">
<node CREATED="1420086045976" ID="ID_1665529071" MODIFIED="1420086047431" TEXT="send traffic to pppd"/>
</node>
<node CREATED="1420086062265" ID="ID_805737518" MODIFIED="1420086062859" TEXT="SC_MULTILINK">
<node CREATED="1420086072968" ID="ID_185651883" MODIFIED="1420086073750" TEXT="do multilink encapsulation"/>
<node CREATED="1420087138630" ID="ID_1801678364" MODIFIED="1420087147920">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      enable PPP multilink fragmentation on transmitted packets
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420086087678" ID="ID_1044916662" MODIFIED="1420086088327" TEXT="SC_MP_SHORTSEQ">
<node CREATED="1420086099809" ID="ID_740167061" MODIFIED="1420086100607" TEXT="use short MP sequence numbers"/>
<node CREATED="1420087167340" ID="ID_488792086" MODIFIED="1420087176426">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      expect short multilink sequence numbers on received multilink fragments
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420086123113" ID="ID_1973328769" MODIFIED="1420086123763" TEXT="SC_MP_XSHORTSEQ">
<node CREATED="1420086134784" ID="ID_221841076" MODIFIED="1420087202880" TEXT="transmit short multilink sequence numbers"/>
</node>
<node CREATED="1420086157377" ID="ID_1635785087" MODIFIED="1420086158706" TEXT="SC_COMP_TCP">
<node CREATED="1420086170470" ID="ID_795611179" MODIFIED="1420086171166" TEXT="TCP (VJ) compression (output)"/>
<node CREATED="1420087002238" ID="ID_1320687310" MODIFIED="1420087003560" TEXT="enable transmit TCP header compression"/>
</node>
<node CREATED="1420086185375" ID="ID_533475050" MODIFIED="1420086186095" TEXT="SC_REJ_COMP_TCP">
<node CREATED="1420086197344" ID="ID_1125984889" MODIFIED="1420086197344" TEXT="reject TCP (VJ) comp. on input"/>
<node CREATED="1420087062945" ID="ID_1808200492" MODIFIED="1420087063680" TEXT="disable receive TCP header decompression"/>
</node>
<node CREATED="1420086198154" ID="ID_823823967" MODIFIED="1420086225132" TEXT="SC_MUST_COMP">
<node CREATED="1420086247747" ID="ID_1602244991" MODIFIED="1420086248584" TEXT="no uncompressed packets may be sent or received"/>
</node>
</node>
<node CREATED="1420011935680" FOLDED="true" ID="ID_1797117800" MODIFIED="1420087380926" TEXT=" unsigned int xstate">
<node CREATED="1420086403055" ID="ID_1568771896" MODIFIED="1420086404161" TEXT="SC_COMP_RUN">
<node CREATED="1420086414118" ID="ID_168038529" MODIFIED="1420086415125" TEXT="compressor has been inited"/>
</node>
</node>
<node CREATED="1420011935680" FOLDED="true" ID="ID_472885253" MODIFIED="1420087379981" TEXT=" unsigned int rstate">
<node CREATED="1420086293269" ID="ID_1826124808" MODIFIED="1420086294755" TEXT="SC_DECOMP_RUN">
<node CREATED="1420086341010" ID="ID_846534079" MODIFIED="1420086341714" TEXT="decompressor has been inited"/>
</node>
<node CREATED="1420086302839" ID="ID_967426925" MODIFIED="1420086303558" TEXT="SC_DC_ERROR">
<node CREATED="1420086371078" ID="ID_1881619835" MODIFIED="1420087315622" TEXT="CCP decompressor detected non-fatal error"/>
</node>
<node CREATED="1420086310401" ID="ID_481043921" MODIFIED="1420086312566" TEXT="SC_DC_FERROR">
<node CREATED="1420086359235" ID="ID_985291491" MODIFIED="1420087328919" TEXT="CCP decompressor detected fatal error"/>
</node>
</node>
<node CREATED="1420011935680" ID="ID_980661988" MODIFIED="1420011935680" TEXT=" int debug"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" struct slcompress *vj"/>
<node CREATED="1420011935680" FOLDED="true" ID="ID_1683311075" MODIFIED="1420094815528">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;enum NPmode npmode[NUM_NP]
    </p>
    <p>
      &#25351;&#23450;&#21508;&#31181;&#21327;&#35758;&#31867;&#22411;&#30340;&#22788;&#29702;&#26041;&#24335;&#65292;&#27604;&#22914;&#25509;&#21463;&#65292;&#20002;&#24323;&#31561;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420094542289" FOLDED="true" ID="ID_1293913336" MODIFIED="1420094642252" TEXT="&#x534f;&#x8bae;&#x7c7b;&#x578b;">
<node CREATED="1420094550226" ID="ID_966573919" MODIFIED="1420094553242" TEXT="PPP_IP"/>
<node CREATED="1420094562373" ID="ID_449900046" MODIFIED="1420094563155" TEXT="PPP_IPV6"/>
<node CREATED="1420094571278" ID="ID_1991396298" MODIFIED="1420094574092" TEXT="PPP_IPX"/>
<node CREATED="1420094583957" ID="ID_1307656299" MODIFIED="1420094585017" TEXT="PPP_AT"/>
<node CREATED="1420094598378" ID="ID_1704735064" MODIFIED="1420094599427" TEXT="PPP_MPLS_UC"/>
<node CREATED="1420094609606" ID="ID_66468428" MODIFIED="1420094610550" TEXT="PPP_MPLS_MC"/>
</node>
<node CREATED="1420094646536" FOLDED="true" ID="ID_1999153877" MODIFIED="1420094734303" TEXT="&#x5904;&#x7406;&#x65b9;&#x5f0f;">
<node CREATED="1420094665319" ID="ID_1165514840" MODIFIED="1420094666780" TEXT="NPMODE_PASS"/>
<node CREATED="1420094681290" ID="ID_923855818" MODIFIED="1420094682008" TEXT="NPMODE_DROP"/>
<node CREATED="1420094693544" ID="ID_401082591" MODIFIED="1420094694353" TEXT="NPMODE_ERROR"/>
<node CREATED="1420094705308" ID="ID_2097618" MODIFIED="1420094706018" TEXT="NPMODE_QUEUE"/>
</node>
</node>
<node CREATED="1420011935680" ID="ID_1833218938" MODIFIED="1420701202700">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct sk_buff *xmit_pending
    </p>
    <p>
      &#25152;&#26377;&#21457;&#36865;&#21040;&#24213;&#23618;ppp channel&#30340;&#21253;&#20808;&#25918;&#21040;&#27492;&#22788;&#65292;&#20877;&#35843;&#29992;ppp_push&#21457;&#36865;&#21040;&#24213;&#23618;ppp channel&#65292;&#33509;&#21457;&#36865;&#22833;&#36133;&#21017;&#32487;&#32493;&#32531;&#23384;&#22312;&#27492;&#22788;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_1629522075" MODIFIED="1420011935680" TEXT=" struct compressor *xcomp"/>
<node CREATED="1420011935680" ID="ID_229767083" MODIFIED="1420011935680" TEXT=" void *xc_state"/>
<node CREATED="1420011935680" ID="ID_48535099" MODIFIED="1420011935680" TEXT=" struct compressor *rcomp"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" void *rc_state"/>
<node CREATED="1420011935680" ID="ID_1494426731" MODIFIED="1420087703645">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;unsigned long last_xmit
    </p>
    <p>
      &#26368;&#21518;&#19968;&#27425;&#21457;&#21253;&#30340;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_1919784686" MODIFIED="1420087714692">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;unsigned long last_recv
    </p>
    <p>
      &#26368;&#21518;&#19968;&#27425;&#25910;&#21253;&#30340;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_63528396" MODIFIED="1420701339310">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct net_device *dev
    </p>
    <p>
      struct ppp&#23454;&#38469;&#19978;&#26159;&#22312;&#20998;&#37197;struct net_device&#26102;&#20316;&#20026;dev-&gt;private&#21516;&#26102;&#20998;&#37197;&#30340;&#65292;&#36825;&#37324;&#25351;&#22238;&#21040;ppp network device
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420011935680" ID="ID_1421547636" MODIFIED="1420011935680" TEXT=" int closing"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" int nxchan"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" u32 nxseq"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" int mrru"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" u32 nextseq"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" u32 minseq"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" struct sk_buff_head mrq"/>
<node CREATED="1420011935680" ID="ID_1896165086" MODIFIED="1420011935680" TEXT=" struct sock_filter *pass_filter"/>
<node CREATED="1420011935680" ID="ID_1067018973" MODIFIED="1420011935680" TEXT=" struct sock_filter *active_filter"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" unsigned pass_len, active_len"/>
<node CREATED="1420011935680" MODIFIED="1420011935680" TEXT=" struct net *ppp_net"/>
</node>
</node>
<node CREATED="1420010540059" ID="ID_970126435" MODIFIED="1420084885104">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp channel
    </p>
    <p>
      &#19968;&#20010;ppp channel&#20195;&#34920;&#20102;&#29992;&#20110;&#20256;&#36755;ppp&#24103;&#30340;&#29289;&#29702;&#36890;&#36947;&#65292;&#27604;&#22914;pppoe, pptp, l2tp.
    </p>
    <p>
      &#19968;&#33324;&#22320;&#65292;ppp channel&#20250;&#23545;ppp&#24103;&#20877;&#36827;&#34892;&#19968;&#27425;&#23553;&#35013;&#65292;&#21152;&#20837;&#24213;&#23618;&#29289;&#29702;&#36890;&#36947;&#33258;&#26377;&#30340;&#22836;&#37096;
    </p>
    <p>
      ppp channel&#36127;&#36131;&#30495;&#27491;&#30340;&#29289;&#29702;&#20256;&#36755;&#21644;&#25509;&#25910;&#65292;&#23427;&#19968;&#33324;&#36830;&#25509;&#21040;&#19968;&#20010;ppp unit&#20316;&#20026;&#20854;&#24213;&#23618;&#36890;&#36947;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420012619416" FOLDED="true" ID="ID_1463633023" MODIFIED="1420949260467" TEXT="struct channel">
<node CREATED="1420012712603" ID="ID_859891038" LINK="#ID_5592245" MODIFIED="1420013089701" TEXT=" struct ppp_file file"/>
<node CREATED="1420012712603" ID="ID_158184725" MODIFIED="1420702610076">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct list_head list
    </p>
    <p>
      &#29992;&#20110;&#38142;&#25509;&#21040;struct ppp_net -&gt; all_channels&#38142;&#34920;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420012712603" FOLDED="true" ID="ID_678099939" MODIFIED="1420949252456">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct ppp_channel *chan
    </p>
    <p>
      &#27880;&#24847;&#22312;ppp generic&#23376;&#23618;&#20013;&#65292;&#29992;struct channel&#26469;&#20195;&#34920;ppp channel
    </p>
    <p>
      &#22312;ppp channel&#23376;&#23618;&#20013;&#65292;&#29992;struct ppp_channel&#26469;&#20195;&#34920;ppp channel
    </p>
    <p>
      &#20063;&#23601;&#26159;&#35828;struct channel&#26159;ppp generic&#23376;&#23618;&#20351;&#29992;&#30340;&#32467;&#26500;
    </p>
    <p>
      struct ppp_channel&#26159;ppp channel&#23376;&#23618;&#29992;&#30340;&#32467;&#26500;&#65292;&#23427;&#20063;&#26159;ppp channel&#23376;&#23618;&#21644;ppp generic&#23376;&#23618;&#20043;&#38388;&#30340;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420012911391" ID="ID_1776127287" MODIFIED="1420702395192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;void *private
    </p>
    <p>
      ppp channel&#23618;&#20351;&#29992;&#30340;&#31169;&#26377;&#32467;&#26500;&#65292;&#19968;&#33324;&#25351;&#21521;&#26576;&#20010;socket
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420012911391" FOLDED="true" ID="ID_1533886622" MODIFIED="1420949251052" TEXT=" const struct ppp_channel_ops *ops">
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" int (*start_xmit)(struct ppp_channel *, struct sk_buff *)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" int (*ioctl)(struct ppp_channel *, unsigned int, unsigned long)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" __be16 (*get_session_id)(struct ppp_channel *)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" struct net_device* (*get_netdev)(struct ppp_channel *)"/>
<node CREATED="1420012911391" ID="ID_889177967" MODIFIED="1420012911391" TEXT=" unsigned char* (*get_remote_mac)(struct ppp_channel *)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" bool (*reg_destroy_method)(struct ppp_channel *, ppp_channel_destroy_method_t method, void *)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" void (*unreg_destroy_method)(struct ppp_channel *)"/>
<node CREATED="1420012911391" ID="ID_661669653" MODIFIED="1420012911391" TEXT=" int (*get_channel_protocol)(struct ppp_channel *)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" void (*hold)(struct ppp_channel *)"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" void (*release)(struct ppp_channel *)"/>
</node>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" int mtu"/>
<node CREATED="1420012911391" ID="ID_45604301" MODIFIED="1420702507037">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;int hdrlen
    </p>
    <p>
      ppp channel&#23618;&#33258;&#24049;&#38656;&#35201;&#28155;&#21152;&#21040;&#21253;&#37324;&#30340;&#23553;&#35013;&#30340;&#22836;&#37096;&#30340;&#38271;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420012911391" ID="ID_1572841751" MODIFIED="1420150710151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;void *ppp
    </p>
    <p>
      &#25351;&#21521;ppp generic&#23618;&#30340;struct channel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" int speed"/>
<node CREATED="1420012911391" MODIFIED="1420012911391" TEXT=" int latency"/>
</node>
<node CREATED="1420012712603" ID="ID_909775557" MODIFIED="1420012712603" TEXT=" struct rw_semaphore chan_sem"/>
<node CREATED="1420012712603" ID="ID_58835177" MODIFIED="1420012712603" TEXT=" spinlock_t downl"/>
<node CREATED="1420012712603" ID="ID_1466826663" MODIFIED="1420014093286">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct ppp *ppp
    </p>
    <p>
      &#27492;channel&#25152;&#36830;&#25509;connect&#30340;ppp unit
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420012712603" ID="ID_672313456" MODIFIED="1420012712603" TEXT=" struct net *chan_net"/>
<node CREATED="1420012712603" ID="ID_509657814" MODIFIED="1420702662303">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct list_head clist
    </p>
    <p>
      &#29992;&#20110;&#38142;&#25509;&#21040;struct ppp -&gt; channels&#38142;&#34920;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420012712603" ID="ID_52701997" MODIFIED="1420012712603" TEXT=" rwlock_t upl"/>
<node CREATED="1420012712603" ID="ID_320842598" MODIFIED="1420012712603" TEXT=" u8 avail"/>
<node CREATED="1420012712603" ID="ID_1741367352" MODIFIED="1420012712603" TEXT=" u8 had_frag"/>
<node CREATED="1420012712603" ID="ID_1778116133" MODIFIED="1420012712603" TEXT=" u32 lastseq"/>
</node>
</node>
<node CREATED="1420056671687" ID="ID_1785058006" MODIFIED="1420060349502">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;ppp unit&#21644;ppp channel&#26377;&#19968;&#20010;unit number&#65292;&#29992;&#25143;&#23618;&#29992;&#27492;&#25968;&#23383;&#26631;&#31034;ppp unit&#21644;ppp channel
    </p>
    <p>
      &#27492;unit number&#23384;&#20648;&#22312;struct ppp -&gt;file.index&#25110;struct channel -&gt;file.index&#20013;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420010686002" FOLDED="true" ID="ID_943276811" MODIFIED="1433823752520" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;&#x7684;&#x7ec4;&#x7ec7;">
<node CREATED="1420059563189" ID="ID_214111244" MODIFIED="1420059588194">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/ppp_generic_data_struct.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1420057515054" ID="ID_1737157950" MODIFIED="1420057544020" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x4e0e;ppp unit&#x548c;ppp channel&#x7684;&#x5173;&#x8054;">
<node CREATED="1420010700235" ID="ID_211571309" MODIFIED="1420010702650" TEXT="struct file *file">
<node CREATED="1420010722482" ID="ID_155426898" MODIFIED="1420013305929">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void *private_data
    </p>
    <p>
      &#36825;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;struct ppp_file *pf&#25351;&#38024;
    </p>
    <p>
      &#24403;&#27492;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#19968;&#20010;ppp unit&#26102;&#65292;&#23427;&#25351;&#21521;&#20102;struct ppp -&gt;file
    </p>
    <p>
      &#24403;&#27492;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#19968;&#20010;ppp channel&#26102;&#65292;&#23427;&#25351;&#21521;&#20102;struct channel -&gt;file
    </p>
    <p>
      &#20877;&#29992;container_of&#23601;&#21487;&#20197;&#24471;&#21040;struct ppp&#25110;&#32773;struct channel&#32467;&#26500;&#20102;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420010789266" ID="ID_724562129" MODIFIED="1420010789266" TEXT="">
<node CREATED="1420010789556" ID="ID_968056610" LINK="#ID_5592245" MODIFIED="1420012499800" TEXT="struct ppp_file *pf"/>
<node CREATED="1420013029201" ID="ID_521311756" LINK="#ID_859891038" MODIFIED="1420013037607" TEXT="struct ppp_file *pf"/>
</node>
</node>
</node>
</node>
<node CREATED="1420059734760" ID="ID_993933376" MODIFIED="1420059785564" TEXT="ppp unit&#x548c;ppp channel&#x7684;&#x5b58;&#x50a8;">
<node CREATED="1420057283019" ID="ID_1460150244" MODIFIED="1420057284098" TEXT="struct ppp_net">
<node CREATED="1420057299112" ID="ID_333430570" MODIFIED="1420057469254">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct idr units_idr
    </p>
    <p>
      &#27492;&#34920;&#20013;&#23384;&#20648;&#20102;&#27492;net namespace&#19979;&#25152;&#26377;&#30340;ppp unit&#65292;&#21487;&#20197;&#29992;ppp unit number&#26597;&#25214;&#21040;&#30456;&#24212;&#30340;struct ppp&#32467;&#26500;
    </p>
    <p>
      &#26597;&#25214;&#20989;&#25968;&#26159;&#65306;struct ppp *ppp_find_unit(struct ppp_net *pn, int unit)
    </p>
  </body>
</html></richcontent>
<node CREATED="1420057476682" ID="ID_1506948185" MODIFIED="1420057483870" TEXT="struct ppp"/>
</node>
<node CREATED="1420057325775" ID="ID_648692993" MODIFIED="1420059715316">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct list_head all_channels
    </p>
    <p>
      &#25152;&#26377;&#30340;ppp channel&#30340;&#38142;&#34920;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420059720187" ID="ID_809730801" MODIFIED="1420059727777" TEXT="struct channel"/>
</node>
</node>
</node>
</node>
<node CREATED="1301306475413" FOLDED="true" ID="ID_1748637046" MODIFIED="1420005737976" TEXT="struct pppoe_net">
<node CREATED="1301306499999" FOLDED="true" ID="ID_801859829" MODIFIED="1420005737010" TEXT="struct pppox_sock *hash_table">
<node CREATED="1301306540019" ID="ID_1046993678" MODIFIED="1301306563533">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sock&#160;sk
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1301306576823" ID="ID_414401799" MODIFIED="1301306582724" TEXT="struct ppp_channel chan"/>
<node CREATED="1301306594729" ID="ID_210392065" MODIFIED="1301306599291" TEXT="next"/>
<node CREATED="1301306618915" ID="ID_430392287" MODIFIED="1301306621254" TEXT="struct pppoe_opt pppoe"/>
<node CREATED="1301306626124" ID="ID_1700429834" MODIFIED="1301306628775" TEXT="num"/>
</node>
<node CREATED="1301306515897" ID="ID_295613511" MODIFIED="1301306518248" TEXT="hash_lock"/>
</node>
<node CREATED="1420005722730" FOLDED="true" ID="ID_334304780" MODIFIED="1420874235603" TEXT="struct ppp_net">
<node CREATED="1420005740297" ID="ID_1863079021" MODIFIED="1420005744320" TEXT="struct idr units_idr"/>
<node CREATED="1420005755694" ID="ID_1038650291" MODIFIED="1420005973919">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct mutex all_ppp_mutex
    </p>
    <p>
      &#27492;&#20114;&#26021;&#38145;&#29992;&#20110;&#20445;&#25252;&#19978;&#38754;&#30340;units_idr
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420005769298" ID="ID_1906202163" MODIFIED="1420005771349" TEXT="struct list_head all_channels"/>
<node CREATED="1420005786001" ID="ID_1151070894" MODIFIED="1420060523996">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct list_head new_channels
    </p>
    <p>
      &#26032;&#24314;&#30340;channel&#20808;&#25918;&#22312;&#36825;&#20010;&#38142;&#34920;&#37324;&#65292;&#24403;&#26377;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#36825;&#20010;channel&#26102;&#20877;&#25226;&#23427;&#31227;&#21040;all_channels&#38142;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420005799243" ID="ID_253094474" MODIFIED="1420874224681">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int last_channel_index
    </p>
    <p>
      ppp channel&#23618;&#35843;&#29992;ppp_register_net_channel()&#23558;struct ppp_channel&#27880;&#20876;&#21040;ppp generic&#23618;&#26102;&#65292;
    </p>
    <p>
      ppp generic&#23618;&#20250;&#32473;&#36825;&#20010;ppp channel&#20998;&#37197;&#19968;&#20010;unit number&#65292;&#36825;&#37324;&#30340;last_channel_index&#23601;&#26159;&#29992;&#20110;&#35760;&#24405;
    </p>
    <p>
      &#26368;&#21518;&#20998;&#37197;&#30340;number
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420005810776" ID="ID_941343180" MODIFIED="1420006042634">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      spinlock_t all_channels_lock
    </p>
    <p>
      &#27492;spin_lock&#29992;&#20110;&#20445;&#25252;&#19978;&#38754;&#30340;all_channels, new_channels, last_channel_index
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1306743501743" ID="ID_1879068050" MODIFIED="1306743508312" TEXT="&#x521d;&#x59cb;&#x5316;&#x6d41;&#x7a0b;"/>
<node CREATED="1420006509140" ID="ID_1537009330" MODIFIED="1433823770842" TEXT="&#x7528;&#x6237;&#x5c42;&#x63a5;&#x53e3;">
<node CREATED="1420006530227" FOLDED="true" ID="ID_1877992343" MODIFIED="1433823802121">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23383;&#31526;&#35774;&#22791;/dev/ppp
    </p>
    <p>
      &#22312;ppp&#19978;&#19979;&#25991;&#20013;&#25152;&#35859;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;ppp unit&#25110;ppp channel&#26159;&#25351;file-&gt;private&#25351;&#21521;
    </p>
    <p>
      struct ppp -&gt;file&#25110;&#32773;struct channel -&gt;file
    </p>
  </body>
</html></richcontent>
<node CREATED="1420006569313" ID="ID_1196956363" MODIFIED="1420006570415" TEXT="struct file_operations ppp_device_fops">
<node CREATED="1420006745749" ID="ID_1040905343" MODIFIED="1420006756507" TEXT=".read = ppp_read">
<node CREATED="1420006915243" ID="ID_147268239" MODIFIED="1420008180937" TEXT="&#x4ece;((struct ppp_file *)file-&gt;private_data)-&gt;rq&#x961f;&#x5217;&#x4e2d;&#x53d6;&#x4e00;&#x4e2a;&#x5305;&#x4f20;&#x9001;&#x5230;&#x7528;&#x6237;&#x5c42;"/>
<node CREATED="1420007027936" ID="ID_1328632799" MODIFIED="1420007052039" TEXT="&#x4ec0;&#x4e48;&#x6837;&#x7684;&#x5305;&#x9700;&#x8981;&#x4f20;&#x9001;&#x5230;&#x7528;&#x6237;&#x5c42;&#xff1f;"/>
</node>
<node CREATED="1420006769146" ID="ID_36689823" MODIFIED="1420006778288" TEXT=".write = ppp_write">
<node CREATED="1420006915243" ID="ID_69715467" MODIFIED="1420007627150" TEXT="&#x5c06;&#x7528;&#x6237;&#x5c42;&#x53d1;&#x9001;&#x7684;&#x5305;&#x653e;&#x5165;((struct ppp_file *)file-&gt;private_data)-&gt;xq&#x961f;&#x5217;&#x4e2d;&#xff0c;&#xa;&#x518d;&#x6839;&#x636e;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;interface&#x8fd8;&#x662f;channel&#x91c7;&#x7528;&#x4e0d;&#x540c;&#x7684;&#x65b9;&#x6cd5;&#x53d1;&#x9001;&#x7528;&#x6237;&#x5c42;&#x7684;&#x5305;">
<node CREATED="1420007616665" ID="ID_277045890" MODIFIED="1420007666663" TEXT="&#x5982;&#x679c;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;interface">
<node CREATED="1420007774039" ID="ID_1993071956" MODIFIED="1420007776063" TEXT="void ppp_xmit_process(struct ppp *ppp)"/>
</node>
<node CREATED="1420007642561" ID="ID_918291409" MODIFIED="1420007671827" TEXT="&#x5982;&#x679c;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;channel">
<node CREATED="1420007815641" ID="ID_1622902504" MODIFIED="1420007817327" TEXT="void ppp_channel_push(struct channel *pch)"/>
</node>
</node>
<node CREATED="1420008240177" ID="ID_6990410" MODIFIED="1420008257217" TEXT="&#x7528;&#x6237;&#x5c42;&#x9700;&#x8981;&#x53d1;&#x9001;&#x4ec0;&#x4e48;&#x6837;&#x7684;&#x5305;&#xff1f;"/>
</node>
<node CREATED="1420006790177" ID="ID_1380894942" MODIFIED="1420006798310" TEXT=".poll = ppp_poll">
<node CREATED="1420008121562" ID="ID_1438269768" MODIFIED="1420008224922">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36718;&#35810;&#25991;&#20214;&#25551;&#36848;&#31526;&#26159;&#21542;&#21487;&#35835;&#21644;&#21487;&#20889;
    </p>
    <p>
      1&#65292;&#24635;&#26159;&#21487;&#20889;
    </p>
    <p>
      2&#65292;&#33509;((struct ppp_file *)file-&gt;private_data)-&gt;rq&#38431;&#21015;&#19981;&#20026;&#31354;&#21017;&#21487;&#35835;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420006816066" ID="ID_200618295" MODIFIED="1420097756262" TEXT=".unlocked_ioctl = ppp_ioctl">
<node CREATED="1420053776027" ID="ID_311626944" MODIFIED="1420053785883" TEXT="&#x5178;&#x578b;&#x72b6;&#x6001;&#x56fe;"/>
<node CREATED="1420053624571" ID="ID_1506871344" MODIFIED="1420060792649" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x5f53;&#x524d;&#x6ca1;&#x6709;attach&#x5230;&#x4efb;&#x4f55;ppp unit&#x6216;ppp channel">
<node CREATED="1420053829539" FOLDED="true" ID="ID_895789113" MODIFIED="1420086764316">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCNEWUNIT
    </p>
    <p>
      &#21019;&#24314;&#19968;&#20010;&#26032;&#30340;ppp unit&#65292; &#24182;&#23558;&#27492;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#26032;&#21019;&#24314;&#30340;ppp unit&#65292;&#24182;&#25104;&#20026;&#27492;ppp unit&#30340;owner
    </p>
  </body>
</html></richcontent>
<node CREATED="1420055889878" ID="ID_780293619" MODIFIED="1420055893699" TEXT="struct ppp * ppp_create_interface(struct net *net, int unit, int *retp)">
<node CREATED="1420055979080" ID="ID_1753499201" MODIFIED="1420056953868" TEXT="&#x5206;&#x914d;&#x4e00;&#x4e2a;struct net_device *dev&#x7ed3;&#x6784;&#xff08;alloc_netdev&#xff09;&#xff0c;&#x5e76;&#x4e3a;&#x5176;&#x4e2d;&#x7684;dev-&gt;private&#x5206;&#x914d;&#x4e00;&#x4e2a;struct ppp&#x7ed3;&#x6784;"/>
<node CREATED="1420056133438" ID="ID_1154779516" MODIFIED="1420056135072" TEXT="dev-&gt;netdev_ops = &amp;ppp_netdev_ops">
<node CREATED="1420056176687" ID="ID_783142692" MODIFIED="1420056177923" TEXT=".ndo_start_xmit = ppp_start_xmit"/>
<node CREATED="1420056191015" ID="ID_1682439921" MODIFIED="1420056192133" TEXT=".ndo_do_ioctl   = ppp_net_ioctl"/>
</node>
<node CREATED="1420056337514" ID="ID_797422017" MODIFIED="1420056526500">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21021;&#22987;&#21270;((struct ppp *)dev-&gt;private)-&gt;file, &#21363;struct ppp_file
    </p>
    <p>
      &#20027;&#35201;&#26159;&#35774;&#32622;ppp_file -&gt; kind&#20026;INTERFACE&#34920;&#31034;&#27492;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#20102;&#19968;&#20010;ppp unit
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420056745734" ID="ID_992893611" MODIFIED="1420056911659" TEXT="&#x6bcf;&#x4e2a;ppp unit&#x6709;&#x4e00;&#x4e2a;unit number&#xff0c;&#x6b64;&#x53f7;&#x7801;&#x53ef;&#x4ee5;&#x7531;&#x7528;&#x6237;&#x6307;&#x5b9a;&#xff08;PPPIOCNEWUNIT ioctl&#x7684;&#x53c2;&#x6570;&#x5927;&#x4e8e;&#x7b49;&#x4e8e;0&#xff09;&#x4e5f;&#x53ef;&#x4ee5;&#x7531;ppp&#x9a71;&#x52a8;&#x81ea;&#x52a8;&#x5206;&#x914d;&#xff08;PPPIOCNEWUNIT ioctl&#x7684;&#x53c2;&#x6570;&#x5c0f;&#x4e8e;0&#xff09;&#xff0c;&#x6b64;&#x53f7;&#x7801;&#x8bb0;&#x5f55;&#x5728;ppp-&gt;file.index&#x4e2d;"/>
<node CREATED="1420056926212" ID="ID_675850775" MODIFIED="1420056926783" TEXT="register_netdev(dev)"/>
<node CREATED="1420057055258" ID="ID_816785756" MODIFIED="1420057089369">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;ppp unit (file-&gt;private_data = &amp;ppp-&gt;file)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420053843924" FOLDED="true" ID="ID_903468396" MODIFIED="1420086824236">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCATTACH
    </p>
    <p>
      &#23558;&#27492;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#19968;&#20010;&#24050;&#32463;&#23384;&#22312;&#30340;ppp unit&#65292;&#20294;&#26159;&#24182;&#19981;&#25104;&#20026;&#27492;ppp unit&#30340;owner
    </p>
  </body>
</html></richcontent>
<node CREATED="1420057055258" ID="ID_1233397624" MODIFIED="1420059890876">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#33021;&#25214;&#21040;ppp unit (ppp_find_unit)&#21017;
    </p>
    <p>
      &#23558;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;ppp unit (file-&gt;private_data = &amp;ppp-&gt;file)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420053852965" FOLDED="true" ID="ID_1873388788" MODIFIED="1420060667792">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCATTCHAN
    </p>
    <p>
      &#23558;&#27492;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#19968;&#20010;&#24050;&#32463;&#23384;&#22312;&#30340;ppp channel
    </p>
  </body>
</html></richcontent>
<node CREATED="1420057055258" ID="ID_1965030981" MODIFIED="1420060658785">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#33021;&#25214;&#21040;ppp channel (ppp_find_channel)&#21017;
    </p>
    <p>
      &#23558;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;ppp channel (file-&gt;private_data = &amp;chan-&gt;file)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420053624571" ID="ID_1793944087" MODIFIED="1420095845032" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x5f53;&#x524d;&#x5df2;&#x7ecf;attach&#x5230;&#x4e00;&#x4e2a;ppp unit">
<node CREATED="1420060810656" FOLDED="true" ID="ID_154848317" LINK="#ID_1741213502" MODIFIED="1420083334256">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCDETACH
    </p>
    <p>
      &#29992;&#25143;&#23618;&#19968;&#33324;&#19981;&#38656;&#35201;&#35843;&#29992;&#27492;ioctl&#65292;&#22240;&#20026;&#30452;&#25509;close&#25991;&#20214;&#25551;&#36848;&#31526;&#21487;&#20197;&#36798;&#21040;&#21516;&#26679;&#30340;&#25928;&#26524;, &#35265;ppp_release
    </p>
  </body>
</html></richcontent>
<node CREATED="1420060938908" ID="ID_991400331" MODIFIED="1420060940261" TEXT="int ppp_release(struct inode *unused, struct file *file)"/>
</node>
<node CREATED="1420085529965" ID="ID_1165935580" MODIFIED="1420085582950">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCSMRU
    </p>
    <p>
      &#35774;&#32622;ppp unit&#30340;&#26368;&#22823;&#25509;&#25910;&#21333;&#20803;&#65306;ppp-&gt;mru
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420085703497" ID="ID_209474177" MODIFIED="1420085750701">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCSFLAGS
    </p>
    <p>
      &#35774;&#32622;ppp unit&#30340;&#26631;&#35782;&#20301;&#65306;ppp-&gt;flags
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420086533419" ID="ID_854462986" MODIFIED="1420086552654">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCGFLAGS
    </p>
    <p>
      &#33719;&#21462;ppp unit&#30340;&#26631;&#35782;&#20301;&#65306;ppp-&gt;flags
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420086577996" FOLDED="true" ID="ID_367843499" MODIFIED="1420087389762">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCSCOMPRESS
    </p>
    <p>
      &#35774;&#32622;&#21387;&#32553;&#31639;&#27861;&#30456;&#20851;&#21442;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420086598926" ID="ID_963464507" MODIFIED="1420086599763" TEXT="int ppp_set_compress(struct ppp *ppp, unsigned long arg)"/>
</node>
<node CREATED="1420087391089" ID="ID_867092252" MODIFIED="1420087444894">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCGUNIT
    </p>
    <p>
      &#33719;&#21462;ppp unit&#30340;unit number&#65306;ppp-&gt;file.index
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420087472025" ID="ID_1734243206" MODIFIED="1420087670294">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCGIDLE
    </p>
    <p>
      &#26597;&#35810;&#25910;&#21457;&#26041;&#21521;&#19978;&#21508;&#33258;&#31354;&#38386;&#20102;&#22810;&#38271;&#26102;&#38388;&#65292;&#21363;&#26368;&#21518;&#19968;&#27425;&#25910;&#21253;&#36317;&#20170;&#22810;&#23569;&#31186;&#65292;&#26368;&#21518;&#19968;&#27425;&#21457;&#21253;&#36317;&#20170;&#22810;&#23569;&#31186;
    </p>
    <p>
      &#35265;ppp-&gt;last_recv&#65292;ppp-&gt;last_xmit
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420094272721" ID="ID_1537937599" MODIFIED="1420094274729" TEXT="PPPIOCSMAXCID"/>
<node CREATED="1420094431634" ID="ID_1767164542" LINK="#ID_1683311075" MODIFIED="1420094855981">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCGNPMODE
    </p>
    <p>
      PPPIOCSNPMODE
    </p>
    <p>
      &#25351;&#23450;&#22914;&#20309;&#22788;&#29702;&#26576;&#31181;&#21327;&#35758;&#30340;&#21253;&#65292;&#35265;ppp-&gt;npmode[x]
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420094972470" ID="ID_1288932780" MODIFIED="1420095612918">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCSPASS
    </p>
    <p>
      PPPIOCSACTIVE
    </p>
    <p>
      PPPIOCSACTIVE&#35774;&#32622;&#19968;&#20010;active&#31867;&#22411;&#30340;BPF filter&#65292;PPPIOCSPASS&#35774;&#32622;&#19968;&#20010;pass&#31867;&#22411;&#30340;BPF filter
    </p>
    <p>
      &#21253;&#39318;&#20808;&#32463;&#36807;pass&#31867;&#22411;&#30340;BPF filter&#65292;&#22914;&#26524;<b><font color="#ff0033">&#27809;&#26377;&#21305;&#37197;&#21017;&#20002;&#24323;&#21253;</font></b>&#65292;&#22914;&#26524;&#21305;&#37197;&#20102;&#20877;
    </p>
    <p>
      &#32463;&#36807;active&#31867;&#22411;&#30340;BPF filter&#65292;&#22914;&#26524;<b><font color="#ff0033">&#21305;&#37197;&#20102;&#21017;&#20002;&#24323;&#21253;</font></b>&#65292;&#22914;&#26524;&#19981;&#21305;&#37197;&#20102;&#21017;&#25509;&#21463;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420094972470" ID="ID_49072709" MODIFIED="1420095800344">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCSMRRU
    </p>
    <p>
      &#35774;&#32622;multilink MRRU (maximum reconstructed receive unit)
    </p>
    <p>
      &#24403;MRRU&#20026;0&#26102;&#20195;&#34920;&#31105;&#27490;&#25509;&#25910;multilink&#29255;&#27573;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420053624571" ID="ID_1292464364" MODIFIED="1420086905861" TEXT="&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x5f53;&#x524d;&#x5df2;&#x7ecf;attach&#x5230;&#x4e00;&#x4e2a;ppp channel">
<node CREATED="1420060810656" FOLDED="true" ID="ID_1483558103" LINK="#ID_1741213502" MODIFIED="1420083329350">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCDETACH
    </p>
    <p>
      &#29992;&#25143;&#23618;&#19968;&#33324;&#19981;&#38656;&#35201;&#35843;&#29992;&#27492;ioctl&#65292;&#22240;&#20026;&#30452;&#25509;close&#25991;&#20214;&#25551;&#36848;&#31526;&#21487;&#20197;&#36798;&#21040;&#21516;&#26679;&#30340;&#25928;&#26524;, &#35265;ppp_release
    </p>
  </body>
</html></richcontent>
<node CREATED="1420060938908" ID="ID_1265332362" MODIFIED="1420060940261" TEXT="int ppp_release(struct inode *unused, struct file *file)"/>
</node>
<node CREATED="1420083977602" FOLDED="true" ID="ID_926359894" MODIFIED="1420085325781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCCONNECT
    </p>
    <p>
      &#23558;ppp channel&#36830;&#25509;&#21040;&#26576;&#20010;ppp unit
    </p>
  </body>
</html></richcontent>
<node CREATED="1420084040498" ID="ID_608849666" MODIFIED="1420084042617" TEXT="int ppp_connect_channel(struct channel *pch, int unit)">
<node CREATED="1420084158302" ID="ID_1790140456" MODIFIED="1420084202983">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;unit number&#25214;&#21040;ppp unit (ppp_find_unit)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420084252887" ID="ID_531329411" MODIFIED="1420084299318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26356;&#26032;ppp unit&#20013;&#35760;&#24405;&#30340;&#22836;&#37096;&#38271;&#24230;&#65288;ppp-&gt;file.hdrlen&#21644;ppp-&gt;dev-&gt;hard_header_len&#65289;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420084333488" ID="ID_1650353451" MODIFIED="1420084499786">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp channel&#24341;&#29992;ppp unit&#65306;pch-&gt;ppp = ppp
    </p>
    <p>
      ppp unit&#24341;&#29992;ppp channel&#65306;&#23558;ppp channel&#21152;&#20837;&#21040;ppp-&gt;channels&#38142;&#34920;&#20013;&#65292;&#35745;&#25968;&#22120;ppp-&gt;n_channels&#21152;1
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420085182023" ID="ID_1167296487" MODIFIED="1420085212594" TEXT="&#x589e;&#x52a0;ppp unit&#x7684;&#x6587;&#x4ef6;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#xff1a;ppp-&gt;file.refcnt"/>
</node>
</node>
<node CREATED="1420084536752" FOLDED="true" ID="ID_1952401397" MODIFIED="1420085326882">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPPIOCDISCONN
    </p>
    <p>
      &#35299;&#38500;ppp channel&#19982;&#26576;&#20010;ppp unit&#30340;&#36830;&#25509;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420084625790" ID="ID_1170903526" MODIFIED="1420084627159" TEXT="int ppp_disconnect_channel(struct channel *pch)">
<node CREATED="1420084333488" ID="ID_1160809540" MODIFIED="1420085121532">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35299;&#38500;ppp channel&#23545;ppp unit&#30340;&#24341;&#29992;&#65306;pch-&gt;ppp = NULL
    </p>
    <p>
      &#35299;&#38500;ppp unit&#23545;ppp channel&#30340;&#24341;&#29992;&#65306;&#23558;ppp channel&#20174;ppp-&gt;channels&#38142;&#34920;&#20013;&#31227;&#38500;&#65292;&#35745;&#25968;&#22120;ppp-&gt;n_channels&#20943;1
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420085220491" ID="ID_1230510465" LINK="#ID_1403538980" MODIFIED="1420085315781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20943;&#23569;ppp unit&#30340;&#25991;&#20214;&#24341;&#29992;&#35745;&#25968;&#65306;ppp-&gt;file.refcnt
    </p>
    <p>
      &#33509;&#25991;&#20214;&#24341;&#29992;&#35745;&#25968;&#21464;&#20026;0&#20102;&#21017;destroy&#27492;ppp unit&#65306;ppp_destroy_interface
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420085388139" ID="ID_1376004659" MODIFIED="1420085454320">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25152;&#26377;&#20854;&#23427;&#30340;ioctl&#21629;&#20196;&#37117;&#20256;&#36882;&#21040;ppp channel&#23618;&#22788;&#29702;
    </p>
    <p>
      pch-&gt;chan-&gt;ops-&gt;ioctl(chan, cmd, arg)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420006838776" ID="ID_360017955" MODIFIED="1420006845793" TEXT=".open = ppp_open">
<node CREATED="1420010012339" ID="ID_46429498" MODIFIED="1420010049535" TEXT="&#x9664;&#x4e86;&#x68c0;&#x67e5;&#x6b64;&#x64cd;&#x4f5c;&#x662f;&#x5426;&#x5177;&#x5907;&#x6743;&#x9650;&#x5916;&#xff0c;&#x4ec0;&#x4e48;&#x4e5f;&#x4e0d;&#x5e72;"/>
</node>
<node CREATED="1420006859392" ID="ID_1741213502" MODIFIED="1420010003786" TEXT=".release = ppp_release">
<node CREATED="1420007616665" ID="ID_670863323" MODIFIED="1420009802390" TEXT="&#x5982;&#x679c;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;interface">
<node CREATED="1420007774039" FOLDED="true" ID="ID_128017084" MODIFIED="1420083207086">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#25991;&#20214;&#25551;&#36848;&#31526;&#26159;&#27492;ppp unit&#30340;owner&#21017;shutdown&#27492;ppp unit
    </p>
    <p>
      void ppp_shutdown_interface(struct ppp *ppp)
    </p>
  </body>
</html></richcontent>
<node CREATED="1420008696630" ID="ID_62255885" MODIFIED="1420008705938" TEXT="&#x4ece;&#x7cfb;&#x7edf;&#x4e2d;&#x6ce8;&#x9500;ppp&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#xff1a;unregister_netdev(ppp-&gt;dev)"/>
<node CREATED="1420008628830" ID="ID_324329616" MODIFIED="1420009215865" TEXT="&#x5c06;ppp unit&#x6807;&#x8bb0;&#x4e3a;&#x6b63;&#x5728;&#x5173;&#x95ed;&#xff1a;ppp-&gt;closing = 1"/>
<node CREATED="1420008798709" ID="ID_1955159142" MODIFIED="1420008820404" TEXT="&#x5c06;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x6807;&#x8bb0;&#x4e3a;dead&#xff1a;ppp-&gt;file.dead = 1"/>
<node CREATED="1420008865536" ID="ID_374327355" MODIFIED="1420009227809" TEXT="&#x5f52;&#x8fd8;&#x6b64;ppp unit&#x6240;&#x5360;&#x7528;&#x7684;unit number">
<node CREATED="1420008905363" ID="ID_293038422" MODIFIED="1420008906981" TEXT="void unit_put(struct idr *p, int n)"/>
</node>
</node>
<node CREATED="1420009175458" FOLDED="true" ID="ID_1403538980" MODIFIED="1420083232116">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24341;&#29992;&#35745;&#25968;&#21464;&#20026;0&#20102;&#65292;&#21017;destroy&#27492;ppp unit
    </p>
    <p>
      void ppp_destroy_interface(struct ppp *ppp)
    </p>
  </body>
</html></richcontent>
<node CREATED="1420009291276" ID="ID_753947412" MODIFIED="1420009440754" TEXT="&#x5728;&#x6ca1;&#x6709;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;&#x6b64;ppp unit (ppp-&gt;file.dead)&#x5e76;&#x4e14;&#x6ca1;&#x6709;channel&#x8fde;&#x63a5;&#x5230;&#x6b64;ppp unit (ppp-&gt;n_channels)&#x65f6;&#xa;&#x6e05;&#x9664;&#x6b64;ppp unit"/>
<node CREATED="1420009516596" ID="ID_853209372" MODIFIED="1420009530831" TEXT="&#x91ca;&#x653e;&#x538b;&#x7f29;&#x7b97;&#x6cd5;&#x5360;&#x7528;&#x7684;&#x8d44;&#x6e90;">
<node CREATED="1420009532759" ID="ID_72931437" MODIFIED="1420009534971" TEXT="void ppp_ccp_closed(struct ppp *ppp)"/>
</node>
<node CREATED="1420009584656" ID="ID_1481361153" MODIFIED="1420009613313" TEXT="&#x6e05;&#x7a7a;&#x6536;&#x53d1;&#x961f;&#x5217;(ppp-&gt;file.rq &#x548c; ppp-&gt;file.xq)"/>
<node CREATED="1420009658140" ID="ID_1222757200" MODIFIED="1420009703015" TEXT="&#x91ca;&#x653e;ppp unit&#x5bf9;&#x5e94;&#x7684;network device (ppp-&gt;dev)"/>
</node>
</node>
<node CREATED="1420007642561" ID="ID_378228467" MODIFIED="1420007671827" TEXT="&#x5982;&#x679c;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;channel">
<node CREATED="1420007815641" FOLDED="true" ID="ID_1420576184" MODIFIED="1420083299485">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24341;&#29992;&#35745;&#25968;&#21464;&#20026;0&#20102;&#65292;&#21017;destroy&#27492;ppp channel
    </p>
    <p>
      void ppp_destroy_channel(struct channel *pch)
    </p>
  </body>
</html></richcontent>
<node CREATED="1420009291276" ID="ID_638026772" MODIFIED="1420009883329" TEXT="&#x5728;&#x6ca1;&#x6709;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;&#x6b64;ppp channel (pch-&gt;file.dead)&#x65f6;&#x6e05;&#x9664;&#x6b64;ppp channel"/>
<node CREATED="1420009584656" ID="ID_790612188" MODIFIED="1420009919530" TEXT="&#x6e05;&#x7a7a;&#x6536;&#x53d1;&#x961f;&#x5217;(pch-&gt;file.rq &#x548c; pch-&gt;file.xq)"/>
<node CREATED="1420009968278" ID="ID_1081442782" MODIFIED="1420009982779" TEXT="&#x91ca;&#x653e;ppp channel"/>
</node>
</node>
</node>
<node CREATED="1420006879555" ID="ID_1048920062" MODIFIED="1420006888447" TEXT=".llseek = noop_llseek"/>
</node>
</node>
</node>
<node CREATED="1420007270035" FOLDED="true" ID="ID_636399994" MODIFIED="1421028803653" TEXT="ppp generic&#x4e0e;ppp channel&#x4e4b;&#x95f4;&#x7684;&#x63a5;&#x53e3;">
<node CREATED="1420096030002" ID="ID_1251234829" MODIFIED="1420096062063" TEXT="ppp channel&#x63d0;&#x4f9b;&#x7ed9;ppp generic&#x7684;&#x63a5;&#x53e3;">
<node CREATED="1420096163434" ID="ID_1050796743" MODIFIED="1420096522232">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      start_xmit()&#160;
    </p>
    <p>
      struct channel -&gt;ppp_channel-&gt;ops-&gt;start_xmit()
    </p>
    <p>
      ppp generic&#23618;&#35843;&#29992;&#27492;&#25509;&#21475;&#23558;ppp&#24103;&#21457;&#36865;&#21040;ppp channel&#23618;
    </p>
    <p>
      &#25104;&#21151;&#36820;&#22238;1&#65292;
    </p>
    <p>
      &#22833;&#36133;&#36820;&#22238;0&#65292;&#27492;&#26102;ppp generic&#23618;&#20250;&#23558;&#24103;&#32531;&#23384;&#36215;&#26469;&#65292;ppp channel&#23618;&#24212;&#22312;&#33021;&#37325;&#26032;&#20256;&#36755;&#24103;&#26102;&#35843;&#29992;ppp_output_wakeup() &#20989;&#25968;&#20197;&#36890;&#30693;ppp generic&#23618;&#37325;&#20256;&#20043;&#21069;&#32531;&#23384;&#30340;&#24103;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420096595722" ID="ID_1253280734" MODIFIED="1420096688875">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ioctl()&#160;
    </p>
    <p>
      struct channel -&gt;ppp_channel-&gt;ops-&gt;ioctl()
    </p>
    <p>
      &#24403;&#29992;&#25143;&#23618;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;channel&#26102;&#65292;&#29992;&#25143;&#23618;&#36890;&#36807;&#27492;&#25509;&#21475;&#25511;&#21046;channel&#30340;&#34892;&#20026;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420096030002" ID="ID_409842203" MODIFIED="1420096087905" TEXT="ppp genericp&#x63d0;&#x4f9b;&#x7ed9;pp channel&#x7684;&#x63a5;&#x53e3;">
<node CREATED="1420096738171" ID="ID_368700180" MODIFIED="1420096871010">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp_register_channel()&#160;
    </p>
    <p>
      ppp_unregister_channel()
    </p>
    <p>
      &#22312;ppp generic&#23618;&#27880;&#20876;&#25110;&#27880;&#38144;ppp channel
    </p>
  </body>
</html></richcontent>
<node CREATED="1420150797587" ID="ID_539890814" MODIFIED="1420150800088" TEXT="ppp_register_channel">
<node CREATED="1420150814580" ID="ID_161985274" MODIFIED="1420150819284" TEXT="int ppp_register_net_channel(struct net *net, struct ppp_channel *chan)">
<node CREATED="1420150842582" ID="ID_1383519410" MODIFIED="1420150855411" TEXT="&#x5206;&#x914d;&#x4e00;&#x4e2a;struct channel&#x7ed3;&#x6784;"/>
<node CREATED="1420150901415" ID="ID_1854056507" MODIFIED="1420151029283">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct ppp_channel&#21644;struct channel&#30456;&#20114;&#24341;&#29992;
    </p>
    <p>
      struct ppp_channel&#24341;&#29992;struct channel&#65306;pch-&gt;chan = chan
    </p>
    <p>
      struct channel&#24341;&#29992;struct ppp_channel&#65306;chan-&gt;ppp = pch
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420151054391" ID="ID_1114155393" MODIFIED="1420151083775" TEXT="&#x5c06;struct channel&#x91cc;&#x9762;&#x7684;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x521d;&#x59cb;&#x5316;&#x4e3a;CHANNEL&#x7c7b;&#x578b;"/>
<node CREATED="1420151108312" ID="ID_592119670" MODIFIED="1420151130954" TEXT="&#x4e3a;struct channel&#x5206;&#x914d;&#x4e00;&#x4e2a;unit number&#xff1a;pch-&gt;file.index"/>
<node CREATED="1420151155748" ID="ID_706018959" MODIFIED="1420151194036" TEXT="&#x5c06;struct channel&#x63d2;&#x5165;&#x5230;struct ppp_net -&gt;new_channels&#x94fe;&#x8868;&#x4e2d;"/>
</node>
</node>
</node>
<node CREATED="1420096897305" ID="ID_140376234" MODIFIED="1420097028954">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp_output_wakeup()&#160;
    </p>
    <p>
      &#22914;&#26524;ppp channel&#23618;&#30001;&#20110;&#26576;&#31181;&#21407;&#22240;&#20572;&#27490;&#25509;&#25910;&#26469;&#20043;ppp generic&#23618;&#30340;&#21253;&#65292;&#21017;&#23427;&#24212;&#22312;&#33021;&#37325;&#26032;&#25509;&#25910;&#21253;&#26102;&#35843;&#29992;ppp_output_wakeup()&#160;&#20989;&#25968;&#36890;&#30693;ppp generic&#23618;&#37325;&#20256;&#21253;&#25110;&#32487;&#32493;&#21457;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420097059344" ID="ID_1838114816" MODIFIED="1420097111130">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp_input()&#160;
    </p>
    <p>
      ppp channel&#23618;&#25910;&#21040;&#19968;&#20010;ppp&#24103;&#65292;&#35843;&#29992;&#27492;&#20989;&#25968;&#23558;&#20854;&#25237;&#36882;&#21040;ppp generic&#23618;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420097059344" ID="ID_1113395684" MODIFIED="1420097264017">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp_input_error()
    </p>
    <p>
      ppp channel&#23618;&#25910;&#21040;&#20102;&#19968;&#20010;ppp&#24103;&#65292;&#20294;&#30001;&#20110;&#26576;&#31181;&#21407;&#22240;drop&#20102;&#23427;&#65292;&#20110;&#26159;&#35843;&#29992;&#27492;&#20989;&#25968;&#36890;&#30693;ppp generic&#23618;&#25509;&#25910;&#20102;&#19968;&#20010;&#38169;&#35823;&#24103;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420097461843" ID="ID_1607628241" MODIFIED="1420097636133">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp_channel_index()&#160;
    </p>
    <p>
      ppp channel&#27880;&#20876;&#21040;ppp generic&#23618;&#34987;&#20998;&#37197;&#20102;&#19968;&#20010;unit number&#65292;&#27492;&#20989;&#25968;&#23601;&#26159;&#33719;&#21462;ppp channel&#30340;unit number
    </p>
    <p>
      &#29992;&#25143;&#23618;&#22312;&#23558;&#25991;&#20214;&#25551;&#36848;&#31526;attach&#21040;&#27492;channel&#26102;&#38656;&#35201;&#25351;&#23450;&#27492;unit number
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420097655858" ID="ID_445764073" MODIFIED="1420097691171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp_unit_number()&#160;
    </p>
    <p>
      &#36820;&#22238;ppp channel&#25152;&#36830;&#25509;&#30340;ppp unit&#30340;unit number
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420007236881" ID="ID_78488108" MODIFIED="1443721916760" TEXT="&#x6536;&#x5305;">
<node CREATED="1421042881206" FOLDED="true" ID="ID_1275090491" MODIFIED="1443725332434" TEXT="&#x6570;&#x636e;&#x5305;">
<node CREATED="1421034859193" ID="ID_1048494264" MODIFIED="1443721924575" TEXT="void ppp_input(struct ppp_channel *chan, struct sk_buff *skb)">
<node CREATED="1421034904751" ID="ID_1024894268" MODIFIED="1421034931345" TEXT="&#x5220;&#x9664;ppp header&#x4e2d;2&#x5b57;&#x8282;&#x7684;protocol&#x5b57;&#x6bb5;"/>
<node CREATED="1421035020393" ID="ID_1634537745" MODIFIED="1421042551675">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21253;&#26159;ppp channel&#23618;&#30340;&#25511;&#21046;&#25253;&#25991;(protocol &gt;= 0xc000)&#65292;&#21017;&#23558;&#21253;&#25918;&#20837;channel&#20851;&#32852;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#30340;&#25509;&#25910;&#38431;&#21015;&#20013;
    </p>
    <p>
      skb_queue_tail(&amp;pch-&gt;file.rq, skb)
    </p>
    <p>
      &#36825;&#26679;&#29992;&#25143;&#23618;&#35835;&#21462;&#27492;&#25991;&#20214;&#26102;&#23601;&#20250;&#35835;&#21462;&#21040;&#36825;&#20010;&#25968;&#25454;&#21253;&#65292;ppp channel&#23618;&#30340;&#25511;&#21046;&#25253;&#25991;&#21253;&#25324;LCP&#31561;&#21327;&#21830;&#25253;&#25991;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421041892872" ID="ID_1734421442" MODIFIED="1421042195296">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPP_LCP 0xc021 /* Link Control Protocol */
    </p>
    <p>
      PPP_PAP 0xc023 /* Password Authentication Protocol */
    </p>
    <p>
      PPP_LQR 0xc025 /* Link Quality Report protocol */
    </p>
    <p>
      PPP_CHAP 0xc223 /* Cryptographic Handshake Auth. Protocol */
    </p>
    <p>
      PPP_CBCP 0xc029 /* Callback Control Protocol */
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1421035214329" ID="ID_702606116" MODIFIED="1421035254379" TEXT="&#x5982;&#x679c;&#x5305;&#x4e0d;&#x662f;ppp&#x534f;&#x8bae;&#x5305;&#xff0c;&#x5219;&#x8c03;&#x7528;ppp_do_recv()&#x7ee7;&#x7eed;&#x5904;&#x7406;">
<node CREATED="1421035233103" ID="ID_222933106" MODIFIED="1421035234338" TEXT="void ppp_do_recv(struct ppp *ppp, struct sk_buff *skb, struct channel *pch)">
<node CREATED="1421035279032" ID="ID_1372547442" MODIFIED="1421035280896" TEXT="void ppp_receive_frame(struct ppp *ppp, struct sk_buff *skb, struct channel *pch)">
<node CREATED="1421035308045" ID="ID_1365797276" MODIFIED="1421035309738" TEXT="void ppp_receive_nonmp_frame(struct ppp *ppp, struct sk_buff *skb)">
<node CREATED="1421035325705" ID="ID_307376809" MODIFIED="1421035338619" TEXT="&#x5982;&#x679c;&#x5305;&#x88ab;&#x538b;&#x7f29;&#x4e86;&#xff0c;&#x5219;&#x89e3;&#x538b;&#x7f29;&#x5b83;"/>
<node CREATED="1421042376582" ID="ID_1329843878" MODIFIED="1421042524449">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21253;&#26159;ppp unit&#23618;&#30340;&#25511;&#21046;&#25253;&#25991;&#65292;&#21017;&#23558;&#21253;&#25918;&#20837;ppp&#20851;&#32852;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#30340;&#25509;&#25910;&#38431;&#21015;&#20013;
    </p>
    <p>
      skb_queue_tail(&amp;ppp-&gt;file.rq, skb)
    </p>
    <p>
      &#36825;&#26679;&#29992;&#25143;&#23618;&#35835;&#21462;&#27492;&#25991;&#20214;&#26102;&#23601;&#20250;&#35835;&#21462;&#21040;&#36825;&#20010;&#25968;&#25454;&#21253;&#65292;ppp unit&#23618;&#30340;&#25511;&#21046;&#25253;&#25991;&#21253;&#25324;IPCP&#31561;&#21327;&#21830;&#25253;&#25991;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421042409154" ID="ID_1685319608" MODIFIED="1421042416926">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPP_IPCP 0x8021 /* IP Control Protocol */
    </p>
    <p>
      PPP_ATCP 0x8029 /* AppleTalk Control Protocol */
    </p>
    <p>
      PPP_IPXCP 0x802b /* IPX Control Protocol */
    </p>
    <p>
      PPP_IPV6CP 0x8057 /* IPv6 Control Protocol */
    </p>
    <p>
      PPP_CCPFRAG 0x80fb /* CCP at link level (below MP bundle) */
    </p>
    <p>
      PPP_CCP 0x80fd /* Compression Control Protocol */
    </p>
    <p>
      PPP_MPLSCP 0x80fd /* MPLS Control Protocol */
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1421042636314" ID="ID_1212448903" MODIFIED="1421042839771">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21253;&#19981;&#26159;&#21327;&#35758;&#25253;&#25991;&#65292;&#21017;&#26356;&#26032;&#65306;
    </p>
    <p>
      &#20837;&#21475;&#35774;&#22791;&#65306;skb-&gt;dev = ppp-&gt;dev
    </p>
    <p>
      &#21327;&#35758;&#31867;&#22411;&#65306;skb-&gt;protocol = ntohs(skb-&gt;data)
    </p>
    <p>
      &#20043;&#21518;&#35843;&#29992;netif_rx(skb)&#23558;&#21253;&#37325;&#26032;&#25237;&#36882;&#21040;kernel
    </p>
    <p>
      &#27492;&#26102;&#25253;&#25991;&#24050;&#21093;&#38500;l2tp header&#21644;ppp header
    </p>
  </body>
</html></richcontent>
<node CREATED="1443724844462" ID="ID_1509844575" MODIFIED="1443725061647">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp interface&#27599;&#27425;&#25910;&#21253;&#37117;&#20250;&#26356;&#26032;ppp-&gt;last_recv, &#32780;&#27599;&#27425;&#21457;&#21253;&#37117;&#20250;&#26356;&#26032;ppp-&gt;last_xmit&#65292;&#36825;2&#20010;&#26102;&#38388;&#29992;&#26469;&#35780;&#20272;ppp interface&#30340;&#31354;&#38386;&#26102;&#38388;&#12290;&#24403;ppp interface&#36816;&#34892;&#22312;dial on demand&#27169;&#24335;&#26102;&#65292;&#22914;&#26524;&#31354;&#38386;&#26102;&#38388;&#36229;&#36807;&#29992;&#25143;&#37197;&#32622;&#30340;&#20540;&#21017;&#24212;&#35813;tear down ppp interface.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1443725083323" ID="ID_942459957" MODIFIED="1443725302349">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppp interface&#22312;dial on demand&#27169;&#24335;&#26102;&#65292;&#24182;&#19981;&#26159;&#25152;&#26377;&#30340;&#27969;&#37117;&#33021;&#28608;&#27963;ppp&#37325;&#26032;&#24314;&#31435;&#36830;&#25509;&#12290;&#29992;&#25143;&#21487;&#20197;&#35774;&#32622;&#19968;&#20010;&#36807;&#28388;&#22120;active_filter&#26469;&#36807;&#28388;&#25910;&#21457;&#30340;&#21253;&#65292;&#23545;&#20110;&#26576;&#20123;&#21253;&#27604;&#22914;&#23450;&#26399;&#30340;&#32452;&#25773;&#65292;&#24191;&#25773;&#21253;&#65292;&#21487;&#20197;&#20808;&#23558;&#20854;queue&#36215;&#26469;&#65292;&#32780;&#24182;&#19981;&#26356;&#26032;ppp-&gt;last_recv&#21644;ppp-&gt;last_xmit&#65292;&#30452;&#21040;&#24517;&#39035;&#35201;&#37325;&#26032;&#24314;&#31435;&#36830;&#25509;ppp interface&#26102;&#25165;&#25226;&#36825;&#20123;&#21253;&#19968;&#36215;&#21457;&#20986;&#21435;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1421042890082" ID="ID_857541898" MODIFIED="1421042893105" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421042903986" ID="ID_1173940388" LINK="#ID_1634537745" MODIFIED="1421042943681" TEXT="ppp channel&#x5c42;&#x63a7;&#x5236;&#x62a5;&#x6587;"/>
<node CREATED="1421042903986" ID="ID_1911253987" LINK="#ID_1329843878" MODIFIED="1421042952923" TEXT="ppp unit&#x5c42;&#x63a7;&#x5236;&#x62a5;&#x6587;"/>
</node>
</node>
<node CREATED="1420007244630" FOLDED="true" ID="ID_1216876067" MODIFIED="1431926926428" TEXT="&#x53d1;&#x5305;">
<node CREATED="1420874294963" ID="ID_37465028" MODIFIED="1420874345651">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25968;&#25454;&#21253;
    </p>
    <p>
      &#25968;&#25454;&#21253;&#30001;&#25805;&#20316;&#31995;&#32479;&#26681;&#25454;&#36335;&#30001;&#36873;&#25321;&#21457;&#36865;&#21040;ppp interface
    </p>
  </body>
</html></richcontent>
<node CREATED="1420056229881" ID="ID_1956515891" MODIFIED="1420182750684">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netdev_tx_t ppp_start_xmit(struct sk_buff *skb, struct net_device *dev)
    </p>
    <p>
      &#29992;&#25143;&#23618;open&#23383;&#31526;&#35774;&#22791;/dev/ppp&#21518;&#25191;&#34892;PPPIOCNEWUNIT ioctl&#21629;&#20196;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;ppp&#32593;&#32476;&#35774;&#22791;
    </p>
    <p>
      ppp_create_interface -&gt; ppp_setup&#20013;&#20250;&#23558;ppp&#32593;&#32476;&#35774;&#22791;&#30340;&#21457;&#21253;&#20989;&#25968;&#21021;&#22987;&#21270;&#20026;ppp_start_xmit
    </p>
  </body>
</html></richcontent>
<node CREATED="1420184534542" ID="ID_1479311348" MODIFIED="1420874567713" TEXT="&#x6839;&#x636e;struct net_device&#x83b7;&#x53d6;struct ppp&#xff1a;netdev_priv(dev)"/>
<node CREATED="1420184576736" ID="ID_1499336883" MODIFIED="1420184631509" TEXT="&#x68c0;&#x67e5;ppp-&gt;npmode[x]&#xff0c;&#x770b;&#x6b64;&#x5305;&#x5bf9;&#x5e94;&#x7684;&#x534f;&#x8bae;&#x7c7b;&#x578b;&#x91ca;&#x653e;&#x88ab;&#x5141;&#x8bb8;&#x901a;&#x8fc7;"/>
<node CREATED="1420184676407" ID="ID_1733470312" MODIFIED="1420184699897" TEXT="&#x5728;&#x6570;&#x636e;&#x5305;&#x7684;&#x5934;&#x90e8;&#x586b;&#x5165;2&#x5b57;&#x8282;&#x7684;&#x534f;&#x8bae;&#x7c7b;&#x578b;"/>
<node CREATED="1420184756423" ID="ID_880968094" MODIFIED="1420184774971" TEXT="&#x5c06;&#x5305;&#x653e;&#x5165;&#x53d1;&#x9001;&#x961f;&#x5217;ppp-&gt;file.xq"/>
<node CREATED="1420184842138" ID="ID_864113596" MODIFIED="1420184890931">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;
    </p>
    <p>
      void ppp_xmit_process(struct ppp *ppp)
    </p>
    <p>
      &#21457;&#36865;&#38431;&#21015;ppp-&gt;file.xq&#20013;&#30340;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420185133727" ID="ID_802240222" MODIFIED="1420186337667">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;void ppp_push(struct ppp *ppp)&#23558;&#21253;&#25512;&#36865;&#21040;ppp channel&#23618;
    </p>
    <p>
      
    </p>
    <p>
      &#21253;&#30001;&#19979;&#38754;&#30340;&#20989;&#25968;ppp_send_frame&#20934;&#22791;&#22909;&#21518;&#25918;&#22312;ppp-&gt;xmit_pending&#19978;
    </p>
    <p>
      &#21253;&#21521;&#19979;&#21457;&#36865;&#21040;ppp channel&#23618;&#22833;&#36133;&#26102;&#65292;&#21253;&#20250;&#32487;&#32493;&#32531;&#23384;&#22312;ppp-&gt;xmit_pending&#19978;&#65292;&#20986;&#29616;&#21457;&#36865;&#22833;&#36133;&#30340;&#24773;&#20917;&#21518;&#65292;
    </p>
    <p>
      ppp generic&#23618;&#23558;&#20572;&#27490;&#21521;ppp channel&#23618;&#21457;&#21253;&#65292;&#30452;&#21040;ppp channel&#23618;&#35843;&#29992;ppp_output_wakeup&#36890;&#30693;ppp generic&#23618;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420186389779" ID="ID_1884377311" MODIFIED="1420874954412" TEXT="pch-&gt;chan-&gt;ops-&gt;start_xmit(pch-&gt;chan, skb)">
<node CREATED="1420874927708" ID="ID_1303887344" LINK="#ID_1368108249" MODIFIED="1420874949350" TEXT="l2tp"/>
</node>
</node>
<node CREATED="1420185547883" ID="ID_1807173068" MODIFIED="1420874804704">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;&#21457;&#36865;&#38431;&#21015;ppp-&gt;file.xq&#21462;&#19968;&#20010;&#21253;&#65292;&#35843;&#29992;&#20989;&#25968;ppp_send_frame&#20934;&#22791;&#25968;&#25454;&#21253;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420185774103" ID="ID_1747316257" MODIFIED="1420874813846">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void ppp_send_frame(struct ppp *ppp, struct sk_buff *skb)
    </p>
    <p>
      &#21387;&#32553;tcp&#22836;&#37096;
    </p>
    <p>
      &#21387;&#32553;&#25972;&#20010;&#21253;
    </p>
    <p>
      &#20934;&#22791;&#22909;&#20043;&#21518;&#30340;&#21253;&#25918;&#22312;ppp-&gt;xmit_pending = skb&#65292;&#28982;&#21518;&#22312;&#19979;&#19968;&#20010;&#24490;&#29615;&#20013;&#34987;ppp_push&#25512;&#36865;&#21040;ppp channel&#23618;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420185632611" ID="ID_1931892613" MODIFIED="1420185733583">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#25152;&#26377;&#21253;&#37117;&#21457;&#36865;&#23436;&#20102;&#21017;&#24320;&#21551;ppp&#32593;&#32476;&#35774;&#22791;&#30340;&#21457;&#36865;queue&#65306;netif_wake_queue(ppp-&gt;dev)
    </p>
    <p>
      &#21542;&#21017;&#33509;&#36824;&#26377;&#21253;&#27809;&#26377;&#21457;&#36865;&#23436;&#21017;&#20851;&#38381;ppp&#32593;&#32476;&#35774;&#22791;&#30340;&#21457;&#36865;queue&#65306;netif_stop_queue(ppp-&gt;dev)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1420876643943" ID="ID_620504186" MODIFIED="1420876852192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21327;&#35758;&#21253;(lcp, ipcp, ip6cp)
    </p>
    <p>
      &#29992;&#25143;&#23618;&#30340;pppd&#25171;&#24320;&#23383;&#31526;&#35774;&#22791;&#25991;&#20214;/dev/ppp&#65292;&#28982;&#21518;&#23558;&#20854;&#20851;&#32852;&#21040;&#26576;&#20010;ppp unit, &#20043;&#21518;&#23558;&#36825;&#20010;ppp unit&#36830;&#25509;connect&#21040;&#26576;&#20010;ppp channel&#65292; &#20043;&#21518;&#24212;&#29992;&#23618;&#23601;&#21487;&#20197;&#23558;&#21327;&#35758;&#21253;&#20889;&#20837;&#21040;&#27492;&#25991;&#20214;&#65292;&#36825;&#26102;&#21327;&#35758;&#21253;&#20063;&#23558;&#21457;&#36865;&#21040;&#23545;&#31471;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420876904283" ID="ID_1011519373" MODIFIED="1420876915604" TEXT="struct file_operations ppp_device_fops.write">
<node CREATED="1420876917750" ID="ID_53329892" MODIFIED="1420876923251" TEXT="ppp_write">
<node CREATED="1420876978148" ID="ID_884105365" MODIFIED="1420877003102" TEXT="&#x4e3a;&#x5373;&#x5c06;&#x53d1;&#x9001;&#x7684;&#x5305;&#x51c6;&#x5907;&#x4e00;&#x4e2a;skb"/>
<node CREATED="1420877004256" ID="ID_889730680" MODIFIED="1420877126627" TEXT="&#x9884;&#x7559;&#x4e00;&#x90e8;&#x5206;&#x7a7a;&#x95f4;&#x7ed9;ppp&#x5934;&#x90e8;&#xff0c;&#x518d;&#x5c06;&#x7528;&#x6237;&#x5c42;&#x7684;&#x5305;&#x590d;&#x5236;&#x5230;skb&#x4e2d;"/>
<node CREATED="1420877070692" ID="ID_472392249" MODIFIED="1420877098721" TEXT="&#x5c06;skb&#x6dfb;&#x52a0;&#x5230;&#x53d1;&#x9001;&#x961f;&#x5217;file.xq&#x4e2d;"/>
<node CREATED="1420877170880" ID="ID_346724149" LINK="#ID_864113596" MODIFIED="1420877321199" TEXT="&#x5982;&#x679c;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x662f;attach&#x5230;ppp unit, &#x5219;&#x8c03;&#x7528;ppp_xmit_process&#x53d1;&#x9001;&#x5305;"/>
<node CREATED="1420877170880" ID="ID_1294961379" MODIFIED="1420877313305" TEXT="&#x5982;&#x679c;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x662f;attach&#x5230;ppp channel, &#x5219;&#x8c03;&#x7528;ppp_channel_push&#x53d1;&#x9001;&#x5305;">
<node CREATED="1420877335020" ID="ID_327670615" MODIFIED="1420877337102" TEXT="void ppp_channel_push(struct channel *pch)">
<node CREATED="1420877376768" ID="ID_1250787110" MODIFIED="1420877445339" TEXT="&#x4ece;&#x53d1;&#x9001;&#x961f;&#x5217;channel-&gt;file.xq&#x53d6;&#x4e00;&#x4e2a;&#x5305;&#xff0c;&#x8c03;&#x7528;channel-&gt;chan-&gt;ops-&gt;start_xmit()&#x53d1;&#x9001;&#x5305;"/>
<node CREATED="1420877486540" ID="ID_1728327739" MODIFIED="1420877511338" TEXT="&#x5982;&#x679c;&#x53d1;&#x9001;&#x5931;&#x8d25;&#x5219;&#x628a;&#x5305;&#x653e;&#x56de;&#x5230;&#x9001;&#x961f;&#x5217;channel-&gt;file.xq"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1420007306035" ID="ID_1652165190" MODIFIED="1420007312527" TEXT="ppp generic"/>
<node CREATED="1420007313229" FOLDED="true" ID="ID_1013263900" MODIFIED="1433921371528" TEXT="ppp channel">
<node CREATED="1420157473012" FOLDED="true" ID="ID_202680271" MODIFIED="1433825561337" TEXT="l2tp">
<node CREATED="1420157483077" ID="ID_421377610" MODIFIED="1420157511914" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1420157513646" FOLDED="true" ID="ID_46083250" MODIFIED="1421551557710" TEXT="&#x534f;&#x8bae;&#x6d41;&#x7a0b;">
<node CREATED="1420157523740" ID="ID_1518392498" MODIFIED="1420157549089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_sequence.gif" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420930693145" FOLDED="true" ID="ID_1447109662" MODIFIED="1421552221865" TEXT="packet format">
<node CREATED="1420930791541" ID="ID_1855992887" MODIFIED="1420934828468" TEXT="data packet">
<node CREATED="1420930820946" ID="ID_915954254" MODIFIED="1420930847572">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_packet_format_1.gif" />
  </body>
</html></richcontent>
</node>
<node CREATED="1420933842878" ID="ID_1950999296" MODIFIED="1420933870684">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_packet_format_3.png" />
  </body>
</html></richcontent>
<node CREATED="1420934094061" ID="ID_1230636959" MODIFIED="1420934100554" TEXT="ppp header">
<node CREATED="1420934102799" ID="ID_1183870796" MODIFIED="1420934112420" TEXT="address"/>
<node CREATED="1420934113018" ID="ID_611376556" MODIFIED="1420934116124" TEXT="control"/>
<node CREATED="1420934116954" ID="ID_508713450" MODIFIED="1420934120083" TEXT="protocol">
<node CREATED="1421041966910" ID="ID_356809530" MODIFIED="1421042150286">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PPP_IP 0x21 /* Internet Protocol */
    </p>
    <p>
      PPP_AT 0x29 /* AppleTalk Protocol */
    </p>
    <p>
      PPP_IPX 0x2b /* IPX protocol */
    </p>
    <p>
      PPP_VJC_COMP 0x2d /* VJ compressed TCP */
    </p>
    <p>
      PPP_VJC_UNCOMP 0x2f /* VJ uncompressed TCP */
    </p>
    <p>
      PPP_MP 0x3d /* Multilink protocol */
    </p>
    <p>
      PPP_IPV6 0x57 /* Internet Protocol Version 6 */
    </p>
    <p>
      PPP_COMPFRAG 0xfb /* fragment compressed below bundle */
    </p>
    <p>
      PPP_COMP 0xfd /* compressed packet */
    </p>
    <p>
      PPP_MPLS_UC 0x0281 /* Multi Protocol Label Switching - Unicast */
    </p>
    <p>
      PPP_MPLS_MC 0x0283 /* Multi Protocol Label Switching - Multicast */
    </p>
    <p>
      PPP_IPCP 0x8021 /* IP Control Protocol */
    </p>
    <p>
      PPP_ATCP 0x8029 /* AppleTalk Control Protocol */
    </p>
    <p>
      PPP_IPXCP 0x802b /* IPX Control Protocol */
    </p>
    <p>
      PPP_IPV6CP 0x8057 /* IPv6 Control Protocol */
    </p>
    <p>
      PPP_CCPFRAG 0x80fb /* CCP at link level (below MP bundle) */
    </p>
    <p>
      PPP_CCP 0x80fd /* Compression Control Protocol */
    </p>
    <p>
      PPP_MPLSCP 0x80fd /* MPLS Control Protocol */
    </p>
    <p>
      PPP_LCP 0xc021 /* Link Control Protocol */
    </p>
    <p>
      PPP_PAP 0xc023 /* Password Authentication Protocol */
    </p>
    <p>
      PPP_LQR 0xc025 /* Link Quality Report protocol */
    </p>
    <p>
      PPP_CHAP 0xc223 /* Cryptographic Handshake Auth. Protocol */
    </p>
    <p>
      PPP_CBCP 0xc029 /* Callback Control Protocol */
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420934146607" ID="ID_464425813" MODIFIED="1420934151584" TEXT="l2tp header">
<node CREATED="1420934153186" ID="ID_1044350332" MODIFIED="1420934156457" TEXT="T">
<node CREATED="1420934161097" ID="ID_355541484" MODIFIED="1420934178790" TEXT="0: data message"/>
<node CREATED="1420934179341" ID="ID_1258753215" MODIFIED="1420934186933" TEXT="1: control message"/>
</node>
<node CREATED="1420934188991" ID="ID_65508111" MODIFIED="1420934191927" TEXT="L">
<node CREATED="1420934193498" ID="ID_1000876126" MODIFIED="1420934203024" TEXT="length field present"/>
</node>
<node CREATED="1420934207352" ID="ID_1579456781" MODIFIED="1420934212086" TEXT="X">
<node CREATED="1420934213469" ID="ID_624650938" MODIFIED="1420934219020" TEXT="reserved"/>
</node>
<node CREATED="1420934220733" ID="ID_1944398702" MODIFIED="1420934223901" TEXT="O">
<node CREATED="1420934225014" ID="ID_1513947351" MODIFIED="1420934233781" TEXT="offset field present"/>
</node>
<node CREATED="1420934240467" ID="ID_1914806369" MODIFIED="1420934243504" TEXT="P">
<node CREATED="1420934244877" ID="ID_327742056" MODIFIED="1420934251422" TEXT="priority"/>
</node>
<node CREATED="1420934297173" ID="ID_1010721995" MODIFIED="1420934303256" TEXT="Ver">
<node CREATED="1420934304323" ID="ID_1997724019" MODIFIED="1420934319806" TEXT="2: L2tp protocol version 2"/>
</node>
<node CREATED="1420934348781" ID="ID_1856639937" MODIFIED="1420934353926" TEXT="Length">
<node CREATED="1420934356510" ID="ID_1319163627" MODIFIED="1420934364997" TEXT="total length of message"/>
</node>
<node CREATED="1420934368164" ID="ID_1271387895" MODIFIED="1420934373843" TEXT="Tunnel ID"/>
<node CREATED="1420934374394" ID="ID_1294834636" MODIFIED="1420934379630" TEXT="Session ID"/>
<node CREATED="1420934381483" ID="ID_752404738" MODIFIED="1420934384016" TEXT="Ns">
<node CREATED="1420934410208" ID="ID_337806523" MODIFIED="1420934420688" TEXT="sequence number for this message"/>
</node>
<node CREATED="1420934423078" ID="ID_465253276" MODIFIED="1420934424651" TEXT="Nr">
<node CREATED="1420934425951" ID="ID_1785994888" MODIFIED="1420934538923" TEXT="sequence number expected in the next message to be received"/>
</node>
<node CREATED="1420934586138" ID="ID_1798724415" MODIFIED="1420934590924" TEXT="Offset">
<node CREATED="1420934591642" ID="ID_380532760" MODIFIED="1420934604225" TEXT="number of octets past the L2TP header at which the payload data is expected to start"/>
</node>
</node>
</node>
<node CREATED="1420933955819" ID="ID_1698430385" MODIFIED="1420934959204" TEXT="ppp header&#x4e2d;&#x7684;protocol&#x57df;&#x6307;&#x660e;&#x4e86;ppp payload&#x662f;&#x4ec0;&#x4e48;&#x7c7b;&#x578b;&#x7684;&#x6570;&#x636e;">
<node CREATED="1420933955819" ID="ID_1883339524" MODIFIED="1420934973956" TEXT="0x0021: IP Protocol version 4"/>
<node CREATED="1420934982343" ID="ID_1951774648" MODIFIED="1420935116324" TEXT="0xc021: ppp link control protocol (ppp LCP)"/>
<node CREATED="1420935042316" ID="ID_42171457" MODIFIED="1420935120918" TEXT="0x8021: ppp internet  protocol control protocol (ppp IPCP)"/>
</node>
<node CREATED="1420939727392" ID="ID_1393045414" MODIFIED="1420939772761" TEXT="&#x5bf9;&#x4e8e;data packet, l2tp header&#x4e2d;&#x7684;Ns, Nr, Offset&#x57df;&#x4e00;&#x822c;&#x662f;&#x6ca1;&#x6709;&#x7684;"/>
</node>
<node CREATED="1420930717714" ID="ID_373519052" MODIFIED="1420930722457" TEXT="control packet">
<node CREATED="1420945633953" ID="ID_1235611370" MODIFIED="1420945661127">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_packet_format_5.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1420945663886" ID="ID_254227616" MODIFIED="1420945684417">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_packet_format_4.png" />
  </body>
</html></richcontent>
<node CREATED="1420945714260" FOLDED="true" ID="ID_784543722" MODIFIED="1420946087755" TEXT="AVP">
<node CREATED="1420945732317" ID="ID_1522998433" MODIFIED="1420945737144" TEXT="M">
<node CREATED="1420945738665" ID="ID_585495338" MODIFIED="1420945851870">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      mandatory
    </p>
    <p>
      &#33509;&#25509;&#25910;&#26041;&#19981;&#33021;&#35782;&#21035;&#27492;AVP&#65292;&#21017;&#24212;&#20002;&#24323;&#27492;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420945855721" ID="ID_657372993" MODIFIED="1420945858443" TEXT="H">
<node CREATED="1420945860260" ID="ID_1346055507" MODIFIED="1420945880808" TEXT="value&#x90e8;&#x5206;&#x662f;&#x5426;&#x5df2;&#x52a0;&#x5bc6;"/>
</node>
<node CREATED="1420945886921" ID="ID_568316021" MODIFIED="1420945893533" TEXT="length">
<node CREATED="1420945894683" ID="ID_1338642965" MODIFIED="1420945912273" TEXT="&#x6574;&#x4e2a;AVP&#x7684;&#x957f;&#x5ea6;"/>
</node>
<node CREATED="1420945926272" ID="ID_1955551864" MODIFIED="1420945939917" TEXT="Vendor ID">
<node CREATED="1420945942337" ID="ID_1361394995" MODIFIED="1420945964200" TEXT="&#x5382;&#x5546;&#x8bc6;&#x522b;&#x7801;"/>
</node>
<node CREATED="1420945966687" ID="ID_720918024" MODIFIED="1420945974731" TEXT="Type">
<node CREATED="1420945985058" ID="ID_1912528690" MODIFIED="1420946027604" TEXT="AVP&#x7c7b;&#x578b;"/>
</node>
<node CREATED="1420946030961" ID="ID_334688026" MODIFIED="1420946036914" TEXT="Value">
<node CREATED="1420946038223" ID="ID_1275703458" MODIFIED="1420946073140" TEXT="AVP&#x7684;&#x503c;&#xff0c;&#x5176;&#x683c;&#x5f0f;&#x53d6;&#x51b3;&#x4e8e;Type&#x548c;Vendor ID"/>
</node>
</node>
<node CREATED="1420934146607" FOLDED="true" ID="ID_485193291" MODIFIED="1420946085196" TEXT="l2tp header">
<node CREATED="1420934153186" ID="ID_1535455367" MODIFIED="1420934156457" TEXT="T">
<node CREATED="1420934161097" ID="ID_436824810" MODIFIED="1420934178790" TEXT="0: data message"/>
<node CREATED="1420934179341" ID="ID_1084179253" MODIFIED="1420934186933" TEXT="1: control message"/>
</node>
<node CREATED="1420934188991" ID="ID_92389755" MODIFIED="1420934191927" TEXT="L">
<node CREATED="1420934193498" ID="ID_926563727" MODIFIED="1420934203024" TEXT="length field present"/>
</node>
<node CREATED="1420934207352" ID="ID_1882667152" MODIFIED="1420934212086" TEXT="X">
<node CREATED="1420934213469" ID="ID_453429472" MODIFIED="1420934219020" TEXT="reserved"/>
</node>
<node CREATED="1420934220733" ID="ID_1747517593" MODIFIED="1420934223901" TEXT="O">
<node CREATED="1420934225014" ID="ID_1498476301" MODIFIED="1420934233781" TEXT="offset field present"/>
</node>
<node CREATED="1420934240467" ID="ID_1999746055" MODIFIED="1420934243504" TEXT="P">
<node CREATED="1420934244877" ID="ID_1496785397" MODIFIED="1420934251422" TEXT="priority"/>
</node>
<node CREATED="1420934297173" ID="ID_145915264" MODIFIED="1420934303256" TEXT="Ver">
<node CREATED="1420934304323" ID="ID_435255610" MODIFIED="1420934319806" TEXT="2: L2tp protocol version 2"/>
</node>
<node CREATED="1420934348781" ID="ID_686373275" MODIFIED="1420934353926" TEXT="Length">
<node CREATED="1420934356510" ID="ID_876520560" MODIFIED="1420934364997" TEXT="total length of message"/>
</node>
<node CREATED="1420934368164" ID="ID_1853638094" MODIFIED="1420934373843" TEXT="Tunnel ID"/>
<node CREATED="1420934374394" ID="ID_644755419" MODIFIED="1420934379630" TEXT="Session ID"/>
<node CREATED="1420934381483" ID="ID_1821412138" MODIFIED="1420934384016" TEXT="Ns">
<node CREATED="1420934410208" ID="ID_916615348" MODIFIED="1420934420688" TEXT="sequence number for this message"/>
</node>
<node CREATED="1420934423078" ID="ID_439755801" MODIFIED="1420934424651" TEXT="Nr">
<node CREATED="1420934425951" ID="ID_806838533" MODIFIED="1420934538923" TEXT="sequence number expected in the next message to be received"/>
</node>
<node CREATED="1420934586138" ID="ID_460827343" MODIFIED="1420934590924" TEXT="Offset">
<node CREATED="1420934591642" ID="ID_885659711" MODIFIED="1420934604225" TEXT="number of octets past the L2TP header at which the payload data is expected to start"/>
</node>
</node>
</node>
<node CREATED="1420946121989" ID="ID_1986014558" MODIFIED="1420946174660" TEXT="&#x5bf9;&#x4e8e;control packet&#xff0c;l2tp header&#x4e2d;&#x7684;Ns, Nr&#x662f;&#x5fc5;&#x987b;&#x8981;&#x6709;&#x7684;"/>
<node CREATED="1420946197913" ID="ID_1277922731" MODIFIED="1420947739799">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;&#19968;&#20010;tunnel&#28041;&#21450;&#30340;&#21253;
    </p>
    <p>
      &#21019;&#24314;tunnel&#20027;&#35201;&#26159;&#20132;&#25442;&#24444;&#27492;&#30340;tunnel id
    </p>
    <p>
      &#33509;&#21457;&#21253;&#26102;&#36824;&#19981;&#30693;&#36947;&#23545;&#31471;&#22312;&#27492;&#25511;&#21046;&#36830;&#25509;&#20013;&#25152;&#20351;&#29992;&#30340;tunnel id&#65292;&#21017;l2tp header&#20013;&#30340;tunnel id&#20351;&#29992;0&#65292;&#27604;&#22914;SCCRQ&#20013;
    </p>
    <p>
      &#33509;&#21457;&#21253;&#26102;&#24050;&#30693;&#36947;&#23545;&#31471;&#22312;&#27492;&#25511;&#21046;&#36830;&#25509;&#20013;&#25152;&#20351;&#29992;&#30340;tunnel id&#65292;&#21017;l2tp header&#20013;&#30340;tunnel id&#20351;&#29992;&#25152;&#30693;&#30340;id&#65292;&#27604;&#22914;SCCRP&#21644;SCCCN&#20013;
    </p>
    <p>
      &#22312;&#25511;&#21046;&#36890;&#36947;&#20013;&#19981;&#20351;&#29992;session id&#65292;&#21363;l2tp header&#20013;&#30340;session id&#22343;&#20026;0
    </p>
  </body>
</html></richcontent>
<node CREATED="1420946251718" ID="ID_1736756740" MODIFIED="1420948451374" TEXT="SCCRQ">
<node CREATED="1420946283742" ID="ID_1758962735" MODIFIED="1420946291177" TEXT="control message AVP">
<node CREATED="1420946357843" ID="ID_1350483328" MODIFIED="1420946400079" TEXT="&#x6307;&#x660e;message type&#x4e3a;Start_Control_Request"/>
</node>
<node CREATED="1420946428618" ID="ID_983206335" MODIFIED="1420946436986" TEXT="protocol version AVP">
<node CREATED="1420946439148" ID="ID_1392424855" MODIFIED="1420946506113" TEXT="&#x6307;&#x660e;l2tp&#x534f;&#x8bae;&#x7684;version&#x548c;revision"/>
</node>
<node CREATED="1420946541576" ID="ID_559865008" MODIFIED="1420946574055" TEXT="framing capabilities AVP">
<node CREATED="1420946596531" ID="ID_850241075" MODIFIED="1420946613621" TEXT="&#x6307;&#x660e;&#x652f;&#x6301;&#x54ea;&#x4e9b;&#x6210;&#x5e27;&#x6280;&#x672f;">
<node CREATED="1420946622596" ID="ID_790496703" MODIFIED="1420946628879" TEXT="Async framing"/>
<node CREATED="1420946629488" ID="ID_1689062968" MODIFIED="1420946641132" TEXT="Sync framing"/>
</node>
</node>
<node CREATED="1420946659034" ID="ID_1572631334" MODIFIED="1420946664477" TEXT="Host name AVP">
<node CREATED="1420946665791" ID="ID_1098160994" MODIFIED="1420946696642" TEXT="&#x6307;&#x660e;&#x53d1;&#x9001;&#x65b9;&#x7684;host name"/>
</node>
<node CREATED="1420946718186" ID="ID_337410984" MODIFIED="1420946731378" TEXT="Assigned tunnel ID AVP">
<node CREATED="1420946732599" ID="ID_1819609379" MODIFIED="1420946773359" TEXT="&#x6307;&#x660e;&#x53d1;&#x9001;&#x65b9;&#x51c6;&#x5907;&#x5728;&#x6b64;&#x63a7;&#x5236;&#x901a;&#x9053;&#x4e2d;&#x4f7f;&#x7528;&#x7684;tunnel id"/>
</node>
</node>
<node CREATED="1420946251718" FOLDED="true" ID="ID_1596203026" MODIFIED="1420947277220" TEXT="SCCRP">
<node CREATED="1420946283742" ID="ID_480314854" MODIFIED="1420946291177" TEXT="control message AVP">
<node CREATED="1420946357843" ID="ID_1878777330" MODIFIED="1420947190272" TEXT="&#x6307;&#x660e;message type&#x4e3a;Start_Control_Reply"/>
</node>
<node CREATED="1420946428618" ID="ID_1945484547" MODIFIED="1420946436986" TEXT="protocol version AVP">
<node CREATED="1420946439148" ID="ID_184573785" MODIFIED="1420946506113" TEXT="&#x6307;&#x660e;l2tp&#x534f;&#x8bae;&#x7684;version&#x548c;revision"/>
</node>
<node CREATED="1420946541576" ID="ID_547276457" MODIFIED="1420946574055" TEXT="framing capabilities AVP">
<node CREATED="1420946596531" ID="ID_1823001792" MODIFIED="1420946613621" TEXT="&#x6307;&#x660e;&#x652f;&#x6301;&#x54ea;&#x4e9b;&#x6210;&#x5e27;&#x6280;&#x672f;">
<node CREATED="1420946622596" ID="ID_1878542851" MODIFIED="1420946628879" TEXT="Async framing"/>
<node CREATED="1420946629488" ID="ID_1273440629" MODIFIED="1420946641132" TEXT="Sync framing"/>
</node>
</node>
<node CREATED="1420946659034" ID="ID_1595410389" MODIFIED="1420946664477" TEXT="Host name AVP">
<node CREATED="1420946665791" ID="ID_973385630" MODIFIED="1420946696642" TEXT="&#x6307;&#x660e;&#x53d1;&#x9001;&#x65b9;&#x7684;host name"/>
</node>
<node CREATED="1420947218854" ID="ID_562402421" MODIFIED="1420947229202" TEXT="receive window size AVP">
<node CREATED="1420947237334" ID="ID_760966920" MODIFIED="1420947253167" TEXT="&#x6307;&#x660e;receive window size"/>
</node>
<node CREATED="1420946718186" ID="ID_150071173" MODIFIED="1420946731378" TEXT="Assigned tunnel ID AVP">
<node CREATED="1420946732599" ID="ID_1222307120" MODIFIED="1420946773359" TEXT="&#x6307;&#x660e;&#x53d1;&#x9001;&#x65b9;&#x51c6;&#x5907;&#x5728;&#x6b64;&#x63a7;&#x5236;&#x901a;&#x9053;&#x4e2d;&#x4f7f;&#x7528;&#x7684;tunnel id"/>
</node>
</node>
<node CREATED="1420946251718" FOLDED="true" ID="ID_1336681878" MODIFIED="1420947918217" TEXT="SCCCN">
<node CREATED="1420946283742" ID="ID_1241086435" MODIFIED="1420946291177" TEXT="control message AVP">
<node CREATED="1420946357843" ID="ID_1485696641" MODIFIED="1420947420570" TEXT="&#x6307;&#x660e;message type&#x4e3a;Start_Control_Connected"/>
</node>
</node>
<node CREATED="1420947885732" FOLDED="true" ID="ID_450502059" MODIFIED="1420947968253" TEXT="ZLB ACK">
<node CREATED="1420947927953" ID="ID_470028410" MODIFIED="1420947962585" TEXT="&#x4ec5;&#x4f5c;ack&#x4e4b;&#x7528;&#xff0c;&#x8868;&#x793a;&#x6536;&#x5230;&#x4e86;SCCCN"/>
</node>
</node>
<node CREATED="1420946197913" ID="ID_1090456195" MODIFIED="1420949124176">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;&#19968;&#20010;session&#28041;&#21450;&#30340;&#21253;
    </p>
    <p>
      &#21019;&#24314;session&#20027;&#35201;&#26159;&#20132;&#25442;&#24444;&#27492;&#30340;session id
    </p>
    <p>
      &#33509;&#21457;&#21253;&#26102;&#36824;&#19981;&#30693;&#36947;&#23545;&#31471;&#22312;&#27492;&#25968;&#25454;&#36830;&#25509;&#20013;&#25152;&#20351;&#29992;&#30340;session id&#65292;&#21017;l2tp header&#20013;&#30340;session id&#20351;&#29992;0&#65292;&#27604;&#22914;ICRQ&#20013;
    </p>
    <p>
      &#33509;&#21457;&#21253;&#26102;&#24050;&#30693;&#36947;&#23545;&#31471;&#22312;&#27492;&#25968;&#25454;&#36830;&#25509;&#20013;&#25152;&#20351;&#29992;&#30340;session id&#65292;&#21017;l2tp header&#20013;&#30340;session id&#20351;&#29992;&#25152;&#30693;&#30340;id&#65292;&#27604;&#22914;ICRP&#21644;ICCN&#20013;
    </p>
    <p>
      &#19968;&#20010;session&#20174;&#23646;&#20110;&#19968;&#20010;tunnel&#65292;&#19968;&#20010;tunnel&#21487;&#20197;&#21253;&#21547;&#22810;&#20010;session
    </p>
    <p>
      &#21019;&#24314;session&#26102;&#21644;&#21019;&#24314;session&#21518;&#30340;&#25968;&#25454;&#36890;&#36947;&#20013;&#65292;l2tp header&#20013;&#30340;tunnel&#160; id&#20026;session&#25152;&#20174;&#23646;&#30340;tunnel&#30340;id
    </p>
  </body>
</html></richcontent>
<node CREATED="1420946251718" ID="ID_1720668086" MODIFIED="1420948037917" TEXT="ICRQ">
<node CREATED="1420946283742" ID="ID_1384786816" MODIFIED="1420946291177" TEXT="control message AVP">
<node CREATED="1420946357843" ID="ID_123012289" MODIFIED="1420948065375" TEXT="&#x6307;&#x660e;message type&#x4e3a;Incoming_Call_Request"/>
</node>
<node CREATED="1420946718186" ID="ID_1537197377" MODIFIED="1420948085561" TEXT="Assigned session AVP">
<node CREATED="1420946732599" ID="ID_1437860745" MODIFIED="1420948107285" TEXT="&#x6307;&#x660e;&#x53d1;&#x9001;&#x65b9;&#x51c6;&#x5907;&#x5728;&#x6b64;&#x6570;&#x636e;&#x901a;&#x9053;&#x4e2d;&#x4f7f;&#x7528;&#x7684;session id"/>
</node>
<node CREATED="1420946428618" ID="ID_174002337" MODIFIED="1420948152462" TEXT="Call serial number AVP">
<node CREATED="1420946439148" ID="ID_1069443974" MODIFIED="1420948208386" TEXT="&#x4e00;&#x4e2a;session&#x5c31;&#x662f;&#x4e00;&#x4e2a;call&#xff0c;&#x8fd9;&#x91cc;&#x6307;&#x660e;call&#x7684;serial number"/>
</node>
</node>
<node CREATED="1420946251718" ID="ID_1883966954" MODIFIED="1420948224924" TEXT="ICRP">
<node CREATED="1420946283742" ID="ID_424688784" MODIFIED="1420946291177" TEXT="control message AVP">
<node CREATED="1420946357843" ID="ID_893204828" MODIFIED="1420948344143" TEXT="&#x6307;&#x660e;message type&#x4e3a;Incoming_Call_Reply"/>
</node>
<node CREATED="1420946718186" ID="ID_729863738" MODIFIED="1420948085561" TEXT="Assigned session AVP">
<node CREATED="1420946732599" ID="ID_1168689425" MODIFIED="1420948107285" TEXT="&#x6307;&#x660e;&#x53d1;&#x9001;&#x65b9;&#x51c6;&#x5907;&#x5728;&#x6b64;&#x6570;&#x636e;&#x901a;&#x9053;&#x4e2d;&#x4f7f;&#x7528;&#x7684;session id"/>
</node>
</node>
<node CREATED="1420946251718" ID="ID_348746124" MODIFIED="1420948409769" TEXT="ICCN">
<node CREATED="1420946283742" ID="ID_135870312" MODIFIED="1420946291177" TEXT="control message AVP">
<node CREATED="1420946357843" ID="ID_579270877" MODIFIED="1420948428265" TEXT="&#x6307;&#x660e;message type&#x4e3a;Incoming_Call_Connected"/>
</node>
<node CREATED="1420946541576" ID="ID_455052459" MODIFIED="1420948476826" TEXT="framing type AVP">
<node CREATED="1420946596531" ID="ID_171792765" MODIFIED="1420948505150" TEXT="&#x6307;&#x660e;&#x6b64;&#x6570;&#x636e;&#x901a;&#x9053;&#x4e2d;&#x4f7f;&#x7528;&#x54ea;&#x79cd;&#x6210;&#x5e27;&#x6280;&#x672f;">
<node CREATED="1420946622596" ID="ID_1111264158" MODIFIED="1420946628879" TEXT="Async framing"/>
<node CREATED="1420946629488" ID="ID_56080673" MODIFIED="1420946641132" TEXT="Sync framing"/>
</node>
</node>
<node CREATED="1420948528682" ID="ID_550442586" MODIFIED="1420948536592" TEXT="connect speed AVP">
<node CREATED="1420948628108" ID="ID_1108627393" MODIFIED="1420948717483" TEXT="&#x6307;&#x660e;&#x6b64;&#x6570;&#x636e;&#x901a;&#x9053;&#x4e2d;&#x4f7f;&#x7528;&#x7684;&#x53d1;&#x9001;&#x901f;&#x7387;&#xff0c;&#x5355;&#x4f4d;&#x4e3a;bps"/>
</node>
</node>
<node CREATED="1420947885732" ID="ID_332484145" MODIFIED="1420948721609" TEXT="ZLB ACK">
<node CREATED="1420947927953" ID="ID_272184885" MODIFIED="1420948727347" TEXT="&#x4ec5;&#x4f5c;ack&#x4e4b;&#x7528;&#xff0c;&#x8868;&#x793a;&#x6536;&#x5230;&#x4e86;ICCN"/>
</node>
</node>
</node>
</node>
<node CREATED="1420159573147" FOLDED="true" ID="ID_860714525" MODIFIED="1431927843826" TEXT="&#x7f16;&#x7a0b;&#x6a21;&#x578b;">
<node CREATED="1420159631602" ID="ID_24183634" MODIFIED="1421026265263">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_program_model.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1420159633820" ID="ID_28583040" MODIFIED="1420950039993" TEXT="xl2tpd&#x7f16;&#x7a0b;&#x6a21;&#x578b;">
<node CREATED="1420159683271" ID="ID_1182898665" MODIFIED="1420170823376">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;l2tp control connection&#24314;&#31435;&#26102;&#65292;xl2tpd&#24212;&#25171;&#24320;&#19968;&#20010;tunnel management pppol2tp socket
    </p>
    <p>
      &#35774;&#32622;&#22909;&#21442;&#25968;(fd, s_tunnel, s_session, d_tunnel, d_session)&#21518;&#35843;&#29992;connect&#31995;&#32479;&#35843;&#29992;&#65292;&#36890;&#30693;l2tp&#39537;&#21160;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#26159;&#19968;&#20010;&#19987;&#38376;&#29992;&#20110;&#36319;l2tp&#39537;&#21160;&#36890;&#20449;&#30340;socket&#65292;xl2tpd&#21487;&#20197;&#20351;&#29992;&#27492;socket&#25511;&#21046;l2tp tunnel&#30340;&#19968;&#20123;&#34892;&#20026;
    </p>
    <p>
      &#27880;&#24847;&#27492;&#22788;&#26159;&#20026;l2tp tunnel&#24314;&#31435;&#30340;&#25511;&#21046;&#31649;&#29702;&#29992;&#30340;socket&#65292;
    </p>
    <p>
      &#25152;&#20197;5&#20803;&#21442;&#25968;(fd, s_tunnel, s_session, d_tunnel, d_session)&#20013;&#30340;s_session&#21644;d_session&#22343;&#20026;0
    </p>
  </body>
</html></richcontent>
<node CREATED="1420160068969" ID="ID_192857039" MODIFIED="1420160126830">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;kernel_fd = socket(AF_PPPOX, SOCK_DGRAM, PX_PROTO_OL2TP);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (kernel_fd &gt;= 0) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct sockaddr_pppol2tp sax;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct sockaddr_in const *peer_addr;
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;peer_addr = l2tp_tunnel_get_peer_addr(tunnel);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;memset(&amp;sax, 0, sizeof(sax));
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.sa_family = AF_PPPOX;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.sa_protocol = PX_PROTO_OL2TP;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.fd = udp_fd;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* fd of tunnel UDP socket */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.addr.sin_addr.s_addr = peer_addr-&gt;sin_addr.s_addr;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.addr.sin_port = peer_addr-&gt;sin_port;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.addr.sin_family = AF_INET;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.s_tunnel = tunnel_id;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.s_session = 0;&#160;&#160;&#160;&#160;&#160;/* special case: mgmt socket */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.d_tunnel = 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.d_session = 0;&#160;&#160;&#160;&#160;&#160;/* special case: mgmt socket */
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;connect(kernel_fd, (struct sockaddr *)&amp;sax, sizeof(sax) ) &#65307;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420160478805" ID="ID_1528534345" MODIFIED="1420160481861" TEXT="pppol2tp_connect">
<node CREATED="1420162128052" ID="ID_1054065644" MODIFIED="1420171128021" TEXT="&#x521b;&#x5efa;&#x4e00;&#x4e2a;struct l2tp_tunnel&#x5e76;&#x5c06;&#x5176;&#x4e0e;udp socket&#x5173;&#x8054;&#x8d77;&#x6765;">
<node CREATED="1420162334403" ID="ID_1356901887" MODIFIED="1420162336712" TEXT="int l2tp_tunnel_create(struct net *net, int fd, int version, u32 tunnel_id, u32 peer_tunnel_id, struct l2tp_tunnel_cfg *cfg, struct l2tp_tunnel **tunnelp)">
<node CREATED="1420162383931" ID="ID_279006988" MODIFIED="1420162507296">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20998;&#37197;&#19968;&#20010;struct l2tp_tunnel&#32467;&#26500;&#65292;&#24182;&#21021;&#22987;&#21270;&#20854;&#20004;&#31471;tunnel id&#21644;&#23553;&#35013;&#26041;&#24335;
    </p>
    <p>
      tunnel-&gt;tunnel_id
    </p>
    <p>
      tunnel-&gt;peer_tunnel_id
    </p>
    <p>
      tunnel-&gt;encap&#65292;&#23553;&#35013;&#26041;&#24335;&#26159;L2TP_ENCAPTYPE_UDP
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420162576650" ID="ID_202714520" LINK="#ID_1342950021" MODIFIED="1421033342024">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;udp socket&#21464;&#20026;&#19968;&#20010;encapsulation socket&#65292;
    </p>
    <p>
      &#23558;&#20854;&#23553;&#35013;&#26041;&#24335;&#25913;&#20026;UDP_ENCAP_L2TPINUDP&#65306;udp_sk(sk)-&gt;encap_type = UDP_ENCAP_L2TPINUDP
    </p>
    <p>
      &#23558;&#20854;&#25910;&#21253;&#20989;&#25968;&#25913;&#20026;l2tp_udp_encap_recv&#65306;udp_sk(sk)-&gt;encap_rcv = l2tp_udp_encap_recv
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420162619243" ID="ID_1969520970" MODIFIED="1420162637273" TEXT="&#x5c06;tunnel&#x4e0e;udp socket&#x5173;&#x8054;&#x8d77;&#x6765;">
<node CREATED="1420162760414" ID="ID_448853754" MODIFIED="1420162761899" TEXT="struct udp_sock">
<node CREATED="1420162786508" ID="ID_929362186" MODIFIED="1420162788407" TEXT="struct inet_sock inet">
<node CREATED="1420162851028" ID="ID_1793714297" MODIFIED="1420162909941">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void *sk_user_data
    </p>
    <p>
      &#36825;&#20010;&#25351;&#38024;&#23601;&#25351;&#21521;&#20102;&#26032;&#21019;&#24314;&#30340;struct l2tp_tunnel
    </p>
  </body>
</html></richcontent>
<node CREATED="1420162914473" ID="ID_1777791920" MODIFIED="1420162916145" TEXT="struct l2tp_tunnel"/>
</node>
</node>
</node>
</node>
<node CREATED="1420162681529" ID="ID_130675357" MODIFIED="1420162711466" TEXT="&#x5c06;tunnel&#x6dfb;&#x52a0;&#x5230;struct l2tp_net pn-&gt;l2tp_tunnel_list&#x94fe;&#x8868;&#x4e2d;"/>
</node>
<node CREATED="1421029578165" ID="ID_264068329" MODIFIED="1421029796151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      tunnel-&gt;recv_payload_hook = pppol2tp_recv_payload_hook
    </p>
    <p>
      &#28155;&#21152;&#27492;hook&#30340;&#30446;&#30340;&#26159;&#22312;&#23558;ppp frame(&#21253;&#21547;ppp header&#21644;ppp payload)&#20256;&#36882;&#32473;ppp generic&#23618;&#26102;&#65292;&#21024;&#38500;ppp header&#20013;&#30340;address(0xff)&#21644;control(0x03)&#22495;&#65292;&#22240;&#20026;&#36825;&#20004;&#20010;&#22495;&#22312;&#21457;&#36865;&#25968;&#25454;&#21253;&#26102;&#20063;&#26159;&#30001;ppp channel&#23618;&#28155;&#21152;&#30340;&#65292;&#25152;&#20197;&#35841;&#28155;&#21152;&#35841;&#21024;&#38500;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1420171080609" ID="ID_1379511999" MODIFIED="1420171120497" TEXT="&#x521b;&#x5efa;&#x4e00;&#x4e2a;struct l2tp_session&#x5e76;&#x5c06;&#x5176;&#x4e0e;udp socket&#x5173;&#x8054;&#x8d77;&#x6765;">
<node CREATED="1420171083264" ID="ID_1584669282" MODIFIED="1420171087773" TEXT="struct l2tp_session *l2tp_session_create(int priv_size, struct l2tp_tunnel *tunnel, u32 session_id, u32 peer_session_id, struct l2tp_session_cfg *cfg)">
<node CREATED="1421030058570" ID="ID_1050960848" MODIFIED="1421030178258">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20998;&#37197;&#19968;&#20010;struct l2tp_session&#32467;&#26500;&#65292;&#24182;&#21021;&#22987;&#21270;&#20854;&#20004;&#31471;session id
    </p>
    <p>
      &#24182;&#23558;session&#20851;&#32852;&#21040;tunnel&#65306;session-&gt;tunnel = tunnel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421030240281" ID="ID_1883705950" MODIFIED="1421030287977">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25351;&#23450;&#19968;&#20010;&#21457;&#21253;&#26102;&#22914;&#20309;&#26500;&#24314;l2tp header&#30340;&#20989;&#25968;&#65306;
    </p>
    <p>
      session-&gt;build_header = l2tp_build_l2tpv2_header
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421030404506" ID="ID_1678676602" MODIFIED="1421030522672">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25351;&#23450;l2tp header&#30340;&#38271;&#24230;&#65306;session-&gt;hdr_len
    </p>
    <p>
      &#40664;&#35748;&#24773;&#20917;&#19979;&#23427;&#20026;6(2byte flags, 2byte tunnel id, 2byte session id)&#65292;&#22914;&#26524;&#25910;&#21457;&#24207;&#21015;&#21495;&#21017;&#20877;&#21152;4(2byte Ns, 2byte Nr)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421030617632" ID="ID_1016658113" MODIFIED="1421030644620" TEXT="&#x5c06;session&#x6dfb;&#x52a0;&#x5230;tunnel-&gt;session_hlist&#x94fe;&#x8868;&#x4e2d;"/>
<node CREATED="1421030679146" ID="ID_664645241" MODIFIED="1421030727437" TEXT="&#x5c06;sessin&#x6dfb;&#x52a0;&#x5230;&#x5168;&#x5c40;&#x94fe;&#x8868;struct l2tp_net-&gt;l2tp_session_hlist&#x4e2d;"/>
</node>
<node CREATED="1421030802881" ID="ID_1110932205" MODIFIED="1421030909388">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21021;&#22987;&#21270;(struct pppol2tp_session *)(session-&gt;priv)
    </p>
    <p>
      &#36825;&#20010;&#31169;&#26377;&#25968;&#25454;&#32467;&#26500;&#20027;&#35201;&#29992;&#26469;&#20445;&#23384;session&#23545;&#24212;&#30340;pppox socket&#21644;&#29992;&#26469;&#21457;&#36865;&#25968;&#25454;&#21253;&#30340;udp socket
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421031121760" ID="ID_271265178" LINK="#ID_1548505761" MODIFIED="1421034738121">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      session-&gt;recv_skb = pppol2tp_recv
    </p>
    <p>
      &#27492;&#25910;&#21253;&#20989;&#25968;&#20174;udp socket&#25910;&#21253;&#65292;&#28982;&#21518;&#23558;&#25968;&#25454;&#21253;&#20256;&#36882;&#21040;ppp generic&#23618;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421031272253" ID="ID_1697303351" MODIFIED="1421031293176" TEXT="&#x521d;&#x59cb;&#x5316;session&#x6240;&#x5173;&#x8054;&#x7684;struct ppp_channel">
<node CREATED="1421031354557" ID="ID_1320237876" MODIFIED="1421031369230" TEXT=".private = pppol2tp socket"/>
<node CREATED="1421031397129" ID="ID_1244683270" MODIFIED="1421031405570" TEXT=".ops = &amp;pppol2tp_chan_ops">
<node CREATED="1421031420364" ID="ID_1470389961" MODIFIED="1421031421696" TEXT=".start_xmit =  pppol2tp_xmit"/>
</node>
</node>
<node CREATED="1421031445826" ID="ID_435648159" MODIFIED="1421031488463" TEXT="&#x8c03;&#x7528;ppp_register_net_channel()&#x5c06;session&#x5173;&#x8054;&#x7684;struct ppp_channel&#x6ce8;&#x518c;&#x5230;ppp generic&#x5c42;"/>
</node>
</node>
</node>
<node CREATED="1420159683271" ID="ID_70109164" MODIFIED="1420172606042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;l2tp session&#24314;&#31435;&#26102;&#65292;xl2tpd&#24212;&#25171;&#24320;&#19968;&#20010;session pppol2tp data socket
    </p>
    <p>
      &#35774;&#32622;&#22909;&#21442;&#25968;(fd, s_tunnel, s_session, d_tunnel, d_session)&#21518;&#35843;&#29992;connect&#31995;&#32479;&#35843;&#29992;&#65292;&#36890;&#30693;l2tp&#39537;&#21160;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#26159;&#19968;&#20010;&#19987;&#38376;&#29992;&#20110;&#36319;l2tp&#39537;&#21160;&#36890;&#20449;&#30340;socket&#65292;xl2tpd&#21487;&#20197;&#20351;&#29992;&#27492;socket&#25511;&#21046;l2tp session&#30340;&#19968;&#20123;&#34892;&#20026;
    </p>
    <p>
      &#27880;&#24847;&#27492;&#22788;&#26159;&#20026;l2tp session&#24314;&#31435;&#30340;&#25511;&#21046;&#31649;&#29702;&#29992;&#30340;socket&#65292;
    </p>
    <p>
      &#25152;&#20197;5&#20803;&#21442;&#25968;(fd, s_tunnel, s_session, d_tunnel, d_session)&#20013;&#30340;s_session&#21644;d_session&#19981;&#24212;&#20026;0
    </p>
  </body>
</html></richcontent>
<node CREATED="1420160068969" ID="ID_1517921911" MODIFIED="1420172776711">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;kernel_fd = socket(AF_PPPOX, SOCK_DGRAM, PX_PROTO_OL2TP);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (kernel_fd &gt;= 0) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct sockaddr_pppol2tp sax;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct sockaddr_in const *peer_addr;
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;peer_addr = l2tp_tunnel_get_peer_addr(tunnel);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;memset(&amp;sax, 0, sizeof(sax));
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.sa_family = AF_PPPOX;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.sa_protocol = PX_PROTO_OL2TP;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.fd = udp_fd;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* fd of tunnel UDP socket */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.addr.sin_addr.s_addr = peer_addr-&gt;sin_addr.s_addr;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.addr.sin_port = peer_addr-&gt;sin_port;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.addr.sin_family = AF_INET;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.s_tunnel&#160;&#160;= tunnel_id;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.s_session = session_id;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.d_tunnel&#160;&#160;= peer_tunnel_id;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sax.pppol2tp.d_session = peer_session_id;
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;connect(kernel_fd, (struct sockaddr *)&amp;sax, sizeof(sax) ) &#65307;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420160478805" ID="ID_1528434714" MODIFIED="1420160481861" TEXT="pppol2tp_connect">
<node CREATED="1420162128052" ID="ID_1965971649" MODIFIED="1420172972667" TEXT="&#x627e;&#x5230;tunnel_id&#x5bf9;&#x5e94;&#x7684;struct l2tp_tunnel"/>
<node CREATED="1420171080609" ID="ID_228928806" MODIFIED="1420171120497" TEXT="&#x521b;&#x5efa;&#x4e00;&#x4e2a;struct l2tp_session&#x5e76;&#x5c06;&#x5176;&#x4e0e;udp socket&#x5173;&#x8054;&#x8d77;&#x6765;">
<node CREATED="1420171083264" ID="ID_1080353695" MODIFIED="1420171087773" TEXT="struct l2tp_session *l2tp_session_create(int priv_size, struct l2tp_tunnel *tunnel, u32 session_id, u32 peer_session_id, struct l2tp_session_cfg *cfg)"/>
</node>
<node CREATED="1420173389051" ID="ID_470752961" MODIFIED="1420173410495" TEXT="&#x5728;ppp generic&#x5c42;&#x6ce8;&#x518c;ppp channel">
<node CREATED="1420181792809" ID="ID_1501900227" MODIFIED="1420181794148" TEXT="ppp_register_net_channel"/>
</node>
</node>
</node>
<node CREATED="1421026946472" ID="ID_556799994" MODIFIED="1421027110219">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      session&#24314;&#31435;&#21518;&#20250;&#21551;&#21160;pppd&#65292;pppd&#21021;&#22987;&#21270;&#36807;&#31243;&#20013;&#20250;&#21152;&#36733;pppol2tp&#36825;&#20010;plugin
    </p>
    <p>
      &#27492;&#26102;pppd&#20013;&#30340;&#20840;&#23616;&#21464;&#37327;the_channel&#20250;&#34987;&#21021;&#22987;&#21270;&#25104;struct channel pppol2tp_channel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421027166138" ID="ID_193530532" MODIFIED="1421027218511" TEXT="pppd&#x5728;&#x521d;&#x59cb;&#x5316;&#x7684;&#x540e;&#x9762;&#x9636;&#x6bb5;&#x4f1a;&#x542f;&#x7528;ppp interface&#xff0c;&#x5373;start_link()">
<node CREATED="1421027223884" ID="ID_784990726" MODIFIED="1421027318296" TEXT="&#x9996;&#x5148;&#x4f1a;&#x7528;xl2tpd&#x4f20;&#x8fc7;&#x6765;&#x7684;fd, &#x5373;session-&gt;pppox_fd&#x6765;&#x67e5;&#x8be2;channel&#x7684;index"/>
<node CREATED="1421027346273" ID="ID_1982105369" MODIFIED="1421027394392" TEXT="&#x6253;&#x5f00;&#x5b57;&#x7b26;&#x8bbe;&#x5907;/dev/ppp&#xff0c;&#x5e76;&#x5c06;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;&#x4e0a;&#x9762;&#x67e5;&#x8be2;&#x5230;&#x7684;channel"/>
<node CREATED="1421027346273" ID="ID_692828966" MODIFIED="1421027449398" TEXT="&#x518d;&#x6253;&#x5f00;&#x5b57;&#x7b26;&#x8bbe;&#x5907;/dev/ppp&#xff0c;&#x5e76;&#x5c06;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;attach&#x5230;&#x65b0;&#x521b;&#x5efa;&#x7684;&#x7684;ppp unit"/>
<node CREATED="1421027472147" ID="ID_139580315" MODIFIED="1421027522788" TEXT="&#x5c06;&#x4e0a;&#x9762;&#x521b;&#x5efa;&#x7684;channel&#x8fde;&#x63a5;connect&#x5230;&#x4e0a;&#x9762;&#x521b;&#x5efa;&#x7684;ppp unit"/>
</node>
<node CREATED="1421027547994" ID="ID_1012464708" MODIFIED="1421027577238" TEXT="&#x81f3;&#x6b64;&#xff0c;&#x8bbe;&#x5907;&#x6a21;&#x578b;&#x6784;&#x5efa;&#x5b8c;&#x6bd5;&#xff0c;&#x53ef;&#x4ee5;&#x5f00;&#x59cb;&#x6536;&#x53d1;&#x5305;&#x4e86;"/>
</node>
</node>
</node>
<node CREATED="1420171253633" ID="ID_1797967230" MODIFIED="1420171262462" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1420171264234" FOLDED="true" ID="ID_1070492859" MODIFIED="1421028295794" TEXT="struct l2tp_tunnel">
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" int magic"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" struct rcu_head rcu"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" rwlock_t hlist_lock"/>
<node CREATED="1420171580425" ID="ID_1614210128" MODIFIED="1420171580425" TEXT=" struct hlist_head session_hlist[L2TP_HASH_SIZE]"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" u32 tunnel_id"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" u32 peer_tunnel_id"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" int version"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" char name[20]"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" int debug"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" enum l2tp_encap_type encap"/>
<node CREATED="1420171580425" ID="ID_1529452895" MODIFIED="1420171580425" TEXT=" struct l2tp_stats stats"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" struct list_head list"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" struct net *l2tp_net"/>
<node CREATED="1420171580425" ID="ID_58494384" MODIFIED="1420171580425" TEXT=" atomic_t ref_count"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" void (*show)(struct seq_file *m, void *arg)"/>
<node CREATED="1420171580425" ID="ID_1674921939" MODIFIED="1420171580425" TEXT=" int (*recv_payload_hook)(struct sk_buff *skb)"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" void (*old_sk_destruct)(struct sock *)"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" struct sock *sock"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" int fd"/>
<node CREATED="1420171580425" MODIFIED="1420171580425" TEXT=" uint8_t priv[0]"/>
</node>
<node CREATED="1420171614165" FOLDED="true" ID="ID_263788820" MODIFIED="1421028293466" TEXT="struct l2tp_session">
<node CREATED="1420171698277" ID="ID_478654556" MODIFIED="1420171698277" TEXT=" int magic"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" struct l2tp_tunnel *tunnel"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u32 session_id"/>
<node CREATED="1420171698277" ID="ID_979029178" MODIFIED="1420171698277" TEXT=" u32 peer_session_id"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u8 cookie[8]"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int cookie_len"/>
<node CREATED="1420171698277" ID="ID_1342337290" MODIFIED="1420171698277" TEXT=" u8 peer_cookie[8]"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int peer_cookie_len"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u16 offset"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u16 l2specific_len"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u16 l2specific_type"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u16 hdr_len"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u32 nr"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" u32 ns"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" struct sk_buff_head reorder_q"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" struct hlist_node hlist"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" atomic_t ref_count"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" char name[32]"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" char ifname[IFNAMSIZ]"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" unsigned data_seq:2"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" unsigned recv_seq:1"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" unsigned send_seq:1"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" unsigned lns_mode:1"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int debug"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int reorder_timeout"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int mtu"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int mru"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" enum l2tp_pwtype pwtype"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" struct l2tp_stats stats"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" struct hlist_node global_hlist"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" int (*build_header)(struct l2tp_session *session, void *buf)"/>
<node CREATED="1420171698277" ID="ID_548358200" MODIFIED="1420171698277" TEXT=" void (*recv_skb)(struct l2tp_session *session, struct sk_buff *skb, int data_len)">
<node CREATED="1420172188861" ID="ID_613256647" MODIFIED="1420172191033" TEXT="pppol2tp_recv"/>
</node>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" void (*session_close)(struct l2tp_session *session)"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" void (*ref)(struct l2tp_session *session)"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" void (*deref)(struct l2tp_session *session)"/>
<node CREATED="1420171698277" MODIFIED="1420171698277" TEXT=" void (*show)(struct seq_file *m, void *priv)"/>
<node CREATED="1420171698277" ID="ID_654539546" MODIFIED="1420172246927">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;uint8_t priv[0]
    </p>
    <p>
      &#25351;&#21521;&#19968;&#20010;struct pppol2tp_session&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420172248729" ID="ID_1097405072" MODIFIED="1420172250332" TEXT="struct pppol2tp_session">
<node CREATED="1420172264322" ID="ID_1794670409" MODIFIED="1420172273268" TEXT="int owner"/>
<node CREATED="1420172288312" ID="ID_25389579" MODIFIED="1420172316655">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sock *sock
    </p>
    <p>
      &#25351;&#21521;pppol2tp socket
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420172288312" ID="ID_825490046" MODIFIED="1420172350255">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sock *tunnel_sock
    </p>
    <p>
      &#25351;&#21521;tunnel udp socket
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420172361976" ID="ID_960040538" MODIFIED="1420172366039" TEXT="int flags"/>
</node>
</node>
</node>
<node CREATED="1420173931681" FOLDED="true" ID="ID_1974228719" MODIFIED="1421033468289" TEXT="&#x6570;&#x636e;&#x7ec4;&#x7ec7;">
<node CREATED="1420181718729" ID="ID_1766124336" MODIFIED="1420181736989">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/l2tp_data_struct_1.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420874858621" FOLDED="true" ID="ID_513253227" MODIFIED="1431927769271" TEXT="&#x6536;&#x5305;">
<node CREATED="1420874871699" ID="ID_196800606" MODIFIED="1420874875494" TEXT="&#x6570;&#x636e;&#x5305;">
<node CREATED="1421032433092" FOLDED="true" ID="ID_1109641467" MODIFIED="1421033353579">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36335;&#30001;&#31995;&#32479;&#20250;&#23558;&#36335;&#30001;&#21040;local&#30340;&#36335;&#30001;&#34920;&#39033;&#30340;input&#20989;&#25968;&#35774;&#32622;&#20026;ip_local_deliver
    </p>
    <p>
      rth-&gt;dst.input= ip_local_deliver&#65292;&#36825;&#26679;&#36335;&#30001;&#21040;&#26412;&#22320;&#30340;&#21253;&#23601;&#30001;ip_local_deliver&#20989;&#25968;&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421032350214" ID="ID_80116866" MODIFIED="1421032354098" TEXT="int ip_local_deliver(struct sk_buff *skb)">
<node CREATED="1421032303325" ID="ID_1240459772" MODIFIED="1421032305025" TEXT="int ip_local_deliver_finish(struct sk_buff *skb)">
<node CREATED="1421032021176" ID="ID_1838825341" MODIFIED="1421032171770">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_protocol udp_protocol
    </p>
    <p>
      inet_init()&#21021;&#22987;&#21270;&#20989;&#25968;&#20013;&#35843;&#29992;inet_add_protocol(&amp;udp_protocol, IPPROTO_UDP)&#28155;&#21152;&#20102;UDP&#21327;&#35758;
    </p>
    <p>
      &#36825;&#26679;&#65292;&#21457;&#36865;&#21040;local&#30340;udp&#21253;&#37117;&#20250;&#30001;udp_rcv()&#25509;&#25910;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421031942747" ID="ID_709160255" MODIFIED="1421031943513" TEXT="int udp_rcv(struct sk_buff *skb)">
<node CREATED="1421031820818" ID="ID_1083471963" MODIFIED="1421031859843">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int __udp4_lib_rcv(struct sk_buff *skb, struct udp_table *udptable, int proto)
    </p>
    <p>
      (net/ipv4/udp.c)
    </p>
  </body>
</html></richcontent>
<node CREATED="1421031737398" ID="ID_497518979" MODIFIED="1421031772321">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int udp_queue_rcv_skb(struct sock *sk, struct sk_buff *skb)
    </p>
    <p>
      (net/ipv4/udp.c)
    </p>
  </body>
</html></richcontent>
<node CREATED="1421032649802" ID="ID_994905391" LINK="#ID_1342950021" MODIFIED="1421033311258">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;udp socket&#26159;&#19968;&#20010;encapsulation socket&#65288;up-&gt;encap_type != 0&#65289;
    </p>
    <p>
      &#21017;&#23558;&#21253;&#20256;&#36882;&#21040;encapsulation handler&#22788;&#29702;&#65306;udp_sk(sk) -&gt; encap_rcv(sk, skb)
    </p>
    <p>
      &#22914;&#26524;encapsulation handler&#30340;&#36820;&#22238;&#20540;&#65306;
    </p>
    <p>
      =0&#65292;encapsulation handler&#24050;&#32463;&#25104;&#21151;&#22788;&#29702;&#27492;&#21253;
    </p>
    <p>
      &gt;=0&#65292;&#27492;&#21253;&#24212;&#32487;&#32493;&#34987;&#25918;&#20837;&#21040;udp socket&#30340;&#25509;&#25910;&#38431;&#21015;&#20013;&#65292;&#30001;&#29992;&#25143;&#23618;&#32487;&#32493;&#25509;&#25910;&#22788;&#29702;
    </p>
    <p>
      &lt;=0&#65292;encapsulation handler&#24076;&#26395;&#27492;&#21253;&#20877;&#34987;&#25552;&#20132;&#19968;&#27425;&#65292;&#21363;&#20877;&#37325;&#26032;&#36208;&#19968;&#27425;&#25509;&#25910;&#36335;&#24452;&#65292;&#22240;&#20026;&#21253;&#21487;&#33021;&#24050;&#32463;&#34987;encapsulation handler&#20462;&#25913;&#36807;&#20102;&#65292;&#25152;&#20197;&#20877;&#36208;&#25509;&#25910;&#36335;&#24452;&#26102;&#65292;&#21487;&#33021;&#30340;&#22788;&#29702;&#22788;&#29702;&#36335;&#24452;&#23601;&#19981;&#19968;&#26679;&#20102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1421033292546" FOLDED="true" ID="ID_1342950021" MODIFIED="1421041492573">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int l2tp_udp_encap_recv(struct sock *sk, struct sk_buff *skb)
    </p>
    <p>
      tunnel&#25910;&#21253;&#36807;&#31243;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421033399905" ID="ID_1244982366" LINK="#ID_1766124336" MODIFIED="1421033428273" TEXT="&#x6839;&#x636e;udp socket&#x627e;&#x5230;tunnel"/>
<node CREATED="1421033489990" ID="ID_1038659543" MODIFIED="1421033502178" TEXT="int l2tp_udp_recv_core(struct l2tp_tunnel *tunnel, struct sk_buff *skb, int (*payload_hook)(struct sk_buff *skb))">
<node CREATED="1421033536653" ID="ID_774542573" MODIFIED="1421033548838" TEXT="&#x68c0;&#x67e5;udp checksum"/>
<node CREATED="1421033581133" ID="ID_1203194292" MODIFIED="1421033593470" TEXT="&#x5220;&#x9664;udp &#x5934;&#x90e8;"/>
<node CREATED="1421033617459" ID="ID_1911420630" MODIFIED="1421033665477" TEXT="&#x68c0;&#x67e5;l2tp header&#x4e2d;&#x7684;&#x7248;&#x672c;&#x53f7;&#x662f;&#x5426;&#x4e0e;tunnel&#x7684;&#x7248;&#x672c;&#x53f7;(tunnel-&gt;version)&#x4e00;&#x81f4;"/>
<node CREATED="1421033697959" ID="ID_1742788709" MODIFIED="1421033801686">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21482;&#22788;&#29702;l2tp data packet (l2tp header-&gt;T = 0)&#65292;&#22914;&#26524;&#26159;l2tp control packet&#21017;&#36820;&#22238;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421033834520" ID="ID_1186258705" MODIFIED="1421033853279" TEXT="&#x4ece;l2tp header&#x4e2d;&#x8bfb;&#x53d6;tunnel id&#x548c;session id"/>
<node CREATED="1421033878304" ID="ID_1641036519" MODIFIED="1421033910516" TEXT="&#x6839;&#x636e;session id&#x627e;&#x5230;struct l2tp_session"/>
<node CREATED="1421033976208" ID="ID_272391553" MODIFIED="1421034041859" TEXT="void l2tp_recv_common(struct l2tp_session *session,&#xa;                                             struct sk_buff *skb, &#xa;                                             unsigned char *ptr, &#xa;                                             unsigned char *optr, &#xa;                                             u16 hdrflags, &#xa;                                             int length, int (*payload_hook)(struct sk_buff *skb))">
<node CREATED="1421034100879" ID="ID_245911889" MODIFIED="1421034116295" TEXT="&#x68c0;&#x67e5;&#x5e8f;&#x5217;&#x53f7;Ns, Nr"/>
<node CREATED="1421034126559" ID="ID_821882839" MODIFIED="1421034135255" TEXT="&#x5220;&#x9664;l2tp header"/>
<node CREATED="1421034182551" ID="ID_273160561" LINK="#ID_264068329" MODIFIED="1421034227661" TEXT="&#x8c03;&#x7528;tunnel-&gt;recv_payload_hook&#x5220;&#x9664;ppp header&#x4e2d;&#x7684;address&#x548c;control&#x57df;"/>
<node CREATED="1421034317124" ID="ID_1564667117" MODIFIED="1421034388304">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_queue_tail(&amp;session-&gt;reorder_q, skb)
    </p>
    <p>
      &#23558;&#21253;&#25918;&#20837;session&#30340;&#37325;&#25490;&#24207;&#38431;&#21015;&#20013;&#65292;&#36825;&#20010;&#38431;&#21015;&#20013;&#30340;&#21253;&#25353;&#29031;&#24207;&#21015;&#21495;&#25490;&#21015;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421034406412" ID="ID_900117731" MODIFIED="1421034407170" TEXT="void l2tp_recv_dequeue(struct l2tp_session *session)">
<node CREATED="1421034499835" ID="ID_718930357" MODIFIED="1421034617033">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;session&#30340;&#37325;&#25490;&#24207;&#38431;&#21015;&#20013;&#21462;&#20986;&#25968;&#25454;&#21253;&#24182;&#35843;&#29992;l2tp_recv_dequeue_skb()&#32487;&#32493;&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421034507473" ID="ID_17612015" MODIFIED="1421034508871" TEXT="void l2tp_recv_dequeue_skb(struct l2tp_session *session, struct sk_buff *skb)">
<node CREATED="1421034603063" ID="ID_1940582284" LINK="#ID_1548505761" MODIFIED="1421034704074">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      session-&gt;recv_skb
    </p>
    <p>
      &#35843;&#29992;session&#30340;&#25910;&#21253;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1421034690284" ID="ID_1548505761" MODIFIED="1421041507089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void pppol2tp_recv(struct l2tp_session *session, struct sk_buff *skb, int data_len)
    </p>
    <p>
      session&#25910;&#21253;&#36807;&#31243;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421034787658" ID="ID_699648849" LINK="#ID_1048494264" MODIFIED="1421041575918">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;session&#25214;&#21040;struct ppp_channel&#65292;&#20877;&#35843;&#29992;ppp_input()&#23558;&#21253;&#25237;&#36882;&#21040;ppp generic&#23618;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1420874876003" ID="ID_1891105141" MODIFIED="1420874881950" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421042983936" ID="ID_965909973" MODIFIED="1421043103245" TEXT="l2tp&#x534f;&#x8bae;&#x5305;&#x7531;&#x53e6;&#x5916;&#x7684;udp_server&#x90a3;&#x4e2a;udp socket&#x6536;&#x5230;&#x5e94;&#x7528;&#x5c42;xl2tpd&#xff0c;&#x5176;&#x5e76;&#x4e0d;&#x4f1a;&#x4ece;l2tp&#x9a71;&#x52a8;&#x6536;&#x4e0a;&#x6765;"/>
</node>
</node>
<node CREATED="1420874864164" ID="ID_1522616361" MODIFIED="1431927723717" TEXT="&#x53d1;&#x5305;">
<node CREATED="1420874886723" FOLDED="true" ID="ID_1490081315" MODIFIED="1431927711916">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25968;&#25454;&#21253;
    </p>
    <p>
      struct channel-&gt;chan-&gt;ops-&gt;start_xmit()
    </p>
  </body>
</html></richcontent>
<node CREATED="1420186443125" ID="ID_1368108249" MODIFIED="1420186445595" TEXT="int pppol2tp_xmit(struct ppp_channel *chan, struct sk_buff *skb)">
<node CREATED="1420186489691" ID="ID_389129909" MODIFIED="1420186762301">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;struct ppp_channel&#25214;&#21040;struct sock&#65306;struct sock *sk = (struct sock *) chan-&gt;private
    </p>
    <p>
      &#20877;&#26681;&#25454;struct sock&#25214;&#21040;struct l2tp_session&#65306;session = pppol2tp_sock_to_session(sk)
    </p>
    <p>
      &#20877;&#26681;&#25454;struct l2tp_session&#25214;&#21040;struct pppol2tp_session&#65306;ps = l2tp_session_priv(session)
    </p>
    <p>
      &#20877;&#26681;&#25454;struct pppol2tp_session&#25214;&#21040;struct l2tp_tunnel&#65306;sk_tun = ps-&gt;tunnel_sock
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420184676407" ID="ID_1184137124" MODIFIED="1420949443744">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#25968;&#25454;&#21253;&#30340;&#22836;&#37096;&#22635;&#20837;1&#23383;&#33410;&#30340;address&#23383;&#27573;&#65306;0xff&#65292;&#21644;1&#23383;&#33410;&#30340;control&#23383;&#27573;&#65306;0x03
    </p>
    <p>
      &#33267;&#27492;ppp header&#26500;&#24314;&#23436;&#27605;(address, control, protocol)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420186871618" ID="ID_562490553" MODIFIED="1420186873024" TEXT="int l2tp_xmit_skb(struct l2tp_session *session, struct sk_buff *skb, int hdr_len)">
<node CREATED="1420186921086" ID="ID_1154388543" MODIFIED="1420186952520" TEXT="&#x6784;&#x5efa;l2tp&#x5934;&#x90e8;&#xff0c;&#x4e3b;&#x8981;&#x662f;&#x586b;&#x5165;tunnel id&#x548c;session id"/>
<node CREATED="1420187112272" ID="ID_1844522508" MODIFIED="1431927699051">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;tunnel-&gt;sock&#20013;&#30340;udp&#28304;&#31471;&#21475;&#21644;&#30446;&#30340;&#31471;&#21475;&#20449;&#24687;&#26500;&#24314;udp&#22836;&#37096;
    </p>
    <p>
      &#23558;skb&#20851;&#32852;&#21040;tunnel-&gt;sock
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1420187224289" ID="ID_75323386" MODIFIED="1420187303453">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int l2tp_xmit_core(struct l2tp_session *session, struct sk_buff *skb, struct flowi *fl, size_t data_len)
    </p>
    <p>
      &#27880;&#24847;flowi&#34920;&#31034;&#28304;ip&#21644;&#30446;&#30340;ip&#65292;&#32780;&#36825;&#20123;&#20449;&#24687;&#24050;&#32463;&#21253;&#21547;&#22312;tunnel-&gt;sock&#20013;&#20102;
    </p>
  </body>
</html></richcontent>
<node CREATED="1420187338589" ID="ID_1602511862" MODIFIED="1420187438195">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int ip_queue_xmit(struct sk_buff *skb, struct flowi *fl)
    </p>
    <p>
      &#33267;&#27492;&#25968;&#25454;&#21253;&#34987;&#21457;&#36865;&#21040;IP&#21327;&#35758;&#26632;&#65292;&#20043;&#21518;&#21327;&#35758;&#26632;&#23558;&#20026;&#21253;&#28155;&#21152;IP&#22836;&#37096;&#65292;&#24182;&#26681;&#25454;&#36335;&#30001;&#21457;&#36865;&#27492;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1420874890698" ID="ID_1584719732" MODIFIED="1420874893873" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421028552548" ID="ID_1456669714" LINK="#ID_24183634" MODIFIED="1421028660170" TEXT="l2tp&#x534f;&#x8bae;&#x5305;&#x901a;&#x8fc7;udp socket&#x53d1;&#x9001;&#xff0c;&#x5e76;&#x4e0d;&#x901a;&#x8fc7;ppp unit&#x548c;ppp channel&#x53d1;&#x9001;"/>
</node>
</node>
</node>
<node CREATED="1421127158266" FOLDED="true" ID="ID_1190120486" MODIFIED="1433921370145" TEXT="pppoe">
<node CREATED="1421134386909" ID="ID_138374382" MODIFIED="1433825571546" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1421134398690" FOLDED="true" ID="ID_172647809" MODIFIED="1433912545075" TEXT="PPPOX socket">
<node CREATED="1433893509029" ID="ID_1591061035" MODIFIED="1433893513210" TEXT="register_pppox_proto(PX_PROTO_OE, &amp;pppoe_proto)"/>
<node CREATED="1433893537563" ID="ID_73203850" MODIFIED="1433893539132" TEXT="struct pppox_proto pppoe_proto">
<node CREATED="1421134439188" ID="ID_1615148337" MODIFIED="1421134460001">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int pppoe_create(struct net *net, struct socket *sock)&#160;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421134462108" HGAP="21" ID="ID_1324660528" MODIFIED="1421134495102" TEXT="&#xa0;&#xa0;&#xa0;&#xa0;&#x521d;&#x59cb;&#x5316;&#x4e00;&#x4e2a;struct sock&#x7ed3;&#x6784;&#xa0;" VSHIFT="3"/>
<node CREATED="1421134912673" ID="ID_1627724936" MODIFIED="1421134930270" TEXT="&#x521d;&#x59cb;&#x5316;socket ops&#xff1a;sock-&gt;ops&#x9;= &amp;pppoe_ops">
<node CREATED="1421134984883" ID="ID_1194974195" MODIFIED="1421134986482" TEXT="struct proto_ops pppoe_ops">
<node CREATED="1421135000930" ID="ID_1982757730" LINK="#ID_565852762" MODIFIED="1421135796937" TEXT=".connect = pppoe_connect"/>
<node CREATED="1421135027727" ID="ID_1718728146" MODIFIED="1421135033611" TEXT=".sendmsg = pppoe_sendmsg"/>
<node CREATED="1421135046070" ID="ID_532647108" MODIFIED="1421135051766" TEXT=".recvmsg = pppoe_recvmsg"/>
<node CREATED="1421135067788" ID="ID_92908071" LINK="#ID_888987592" MODIFIED="1421135088976" TEXT=".ioctl = pppox_ioctl"/>
</node>
</node>
<node CREATED="1421134948760" ID="ID_1694528753" LINK="#ID_1202529491" MODIFIED="1421828922119" TEXT="&#x521d;&#x59cb;&#x5316;&#x6536;&#x5305;&#x51fd;&#x6570;&#xff1a;sk-&gt;sk_backlog_rcv = pppoe_rcv_core"/>
</node>
<node CREATED="1421134857357" ID="ID_1477832472" MODIFIED="1421134872210">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int pppoe_ioctl(struct socket *sock, unsigned int cmd, unsigned long arg)
    </p>
  </body>
</html></richcontent>
<node CREATED="1421829129126" ID="ID_682125299" MODIFIED="1421829204526">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36820;&#22238;ppp channel&#30340;unit number
    </p>
    <p>
      &#36825;&#20010;&#20540;&#26159;&#27880;&#20876;ppp channel&#26102;&#30001;ppp generic&#23618;&#20998;&#37197;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421829206565" ID="ID_371940936" MODIFIED="1421829239078" TEXT="&#x5c06;pppoe socket&#x5207;&#x6362;&#x5230;&#x5df2;&#x7ed1;&#x5b9a;&#x72b6;&#x6001;&#xff1a;sk-&gt;sk_state |= PPPOX_BOUND"/>
</node>
</node>
<node CREATED="1421135772982" ID="ID_565852762" MODIFIED="1421135788093">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int pppoe_connect(struct socket *sock, struct sockaddr *uservaddr, int sockaddr_len, int flags)
    </p>
  </body>
</html></richcontent>
<node CREATED="1421827260929" ID="ID_759327898" MODIFIED="1421827302008" TEXT="&#x89e3;&#x9664;pppoe socket&#x4e4b;&#x524d;&#x7ed1;&#x5b9a;&#x7684;pppoe session">
<node CREATED="1421827341584" ID="ID_442896292" MODIFIED="1421827400696" TEXT="&#x8c03;&#x7528;pn-&gt;pppoe_destroy_method&#x901a;&#x77e5;ppp generic&#x5c42;pppoe session&#x5220;&#x9664;&#x4e86;"/>
<node CREATED="1421827428780" ID="ID_65092394" MODIFIED="1421827463515" TEXT="&#x4ece;pppoe_net&#x7684;hash&#x8868;&#x4e2d;&#x5220;&#x9664;pppoe socket"/>
<node CREATED="1421827491483" ID="ID_346769894" MODIFIED="1421827509889" TEXT="&#x89e3;&#x9664;&#x4e0e;ppp network device&#x7684;&#x5173;&#x8054;"/>
<node CREATED="1421827533114" ID="ID_1789723774" MODIFIED="1421827729057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28165;&#38500;pppoe socket&#20013;&#20445;&#23384;&#30340;(session id, peer hw address, local device name)
    </p>
    <p>
      pppox_socket-&gt;pppoe_pa
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421827601917" ID="ID_113770915" MODIFIED="1421827624825" TEXT="&#x5c06;pppoe socket&#x6062;&#x590d;&#x5230;&#x521d;&#x59cb;&#x72b6;&#x6001;&#xff1a;sk-&gt;sk_state = PPPOX_NONE"/>
</node>
<node CREATED="1421827654290" ID="ID_1507115952" MODIFIED="1421827671440" TEXT="&#x5c06;pppoe socket&#x7ed1;&#x5b9a;&#x5230;&#x65b0;&#x7684;pppoe session">
<node CREATED="1421827533114" ID="ID_829440041" MODIFIED="1421827788016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;(session id, peer hw address, local device name)&#20445;&#23384;&#21040;pppoe socket&#20013;
    </p>
    <p>
      pppox_socket-&gt;pppoe_pa
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421827428780" ID="ID_1689753007" MODIFIED="1421827830319" TEXT="&#x5c06;pppoe socket&#x6dfb;&#x52a0;&#x5230;pppoe_net&#x7684;hash&#x8868;&#x4e2d;"/>
<node CREATED="1421827853418" ID="ID_1751258883" MODIFIED="1421827898458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#20876;pppoe channel (pppox_socket-&gt;chan)
    </p>
    <p>
      ppp_register_net_channel()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421827601917" ID="ID_70678017" MODIFIED="1421828075856">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;pppoe socket&#20999;&#25442;&#21040;&#24050;&#36830;&#25509;&#29366;&#24577;&#65306;sk-&gt;sk_state = PPPOX_CONNECTED
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1421551571053" FOLDED="true" ID="ID_1992981399" MODIFIED="1433893035656" TEXT="&#x534f;&#x8bae;&#x6d41;&#x7a0b;">
<node CREATED="1421551581333" ID="ID_1798611950" MODIFIED="1421551617201">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_protocol_flow.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1421551627199" FOLDED="true" ID="ID_192766083" MODIFIED="1433891821511" TEXT="packet format">
<node CREATED="1421551665206" FOLDED="true" ID="ID_81801514" MODIFIED="1433891819870" TEXT="data packet">
<node CREATED="1421551682055" ID="ID_842169126" MODIFIED="1421551697658">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_packet_format_1.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1421551707454" ID="ID_1170540841" MODIFIED="1421551743144">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_packet_format_2.png" />
  </body>
</html></richcontent>
<node CREATED="1421551871619" ID="ID_778201162" MODIFIED="1421551885471" TEXT="PPPoE Header"/>
<node CREATED="1421551886922" ID="ID_1187051129" MODIFIED="1421551891658" TEXT="PPP Header">
<node CREATED="1421551895601" ID="ID_1271960504" LINK="#ID_508713450" MODIFIED="1421551922547" TEXT="protocol"/>
</node>
</node>
</node>
<node CREATED="1421551669337" FOLDED="true" ID="ID_224528755" MODIFIED="1433888335959" TEXT="control packet">
<node CREATED="1421552178009" ID="ID_429827833" MODIFIED="1421552189396">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_packet_format_4.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1421552190989" ID="ID_57752854" MODIFIED="1421552202599">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_packet_format_3.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1421552248350" ID="ID_691778201" MODIFIED="1421552256320" TEXT="Discovery Stage">
<node CREATED="1421552324553" FOLDED="true" ID="ID_1521063655" MODIFIED="1433861535022" TEXT="PADI">
<node CREATED="1421552543238" ID="ID_1500475368" MODIFIED="1421552552637">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_packet_format_PADI.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1421552328089" FOLDED="true" ID="ID_1936353448" MODIFIED="1433861538359" TEXT="PADO">
<node CREATED="1421552555354" ID="ID_557449661" MODIFIED="1421552566917">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_packet_format_PADO.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1421552331205" ID="ID_943667172" MODIFIED="1421552334155" TEXT="PADR"/>
<node CREATED="1421552334811" ID="ID_631776763" MODIFIED="1421552341356" TEXT="PADS"/>
<node CREATED="1421552345894" ID="ID_1619908200" MODIFIED="1421552349574" TEXT="PADT"/>
<node CREATED="1421552622321" FOLDED="true" ID="ID_1783361851" MODIFIED="1433861541178" TEXT="TLV">
<node CREATED="1421552627836" ID="ID_1006931296" MODIFIED="1421552630008" TEXT="0x0000 End-Of-List"/>
<node CREATED="1421552642085" ID="ID_680496116" MODIFIED="1421552643898" TEXT="0x0101 Service-Name"/>
<node CREATED="1421552653537" ID="ID_98509747" MODIFIED="1421552654514" TEXT="0x0102 AC-Name"/>
<node CREATED="1421552664551" ID="ID_1713927698" MODIFIED="1421552665115" TEXT="0x0103 Host-Uniq"/>
<node CREATED="1421552676879" ID="ID_1754603355" MODIFIED="1421552677505" TEXT="0x0104 AC-Cookie"/>
<node CREATED="1421552689276" ID="ID_1698248184" MODIFIED="1421552689832" TEXT="0x0105 Vendor-Specific"/>
<node CREATED="1421552702103" ID="ID_1563990866" MODIFIED="1421552702667" TEXT="0x0110 Relay-Session-Id"/>
<node CREATED="1421552714540" ID="ID_1675406521" MODIFIED="1421552715642" TEXT="0x0201 Service-Name-Error"/>
<node CREATED="1421552725179" ID="ID_1121391992" MODIFIED="1421552725719" TEXT="0x0202 AC-System-Error"/>
<node CREATED="1421552735905" ID="ID_1707557278" MODIFIED="1421552737522" TEXT="0x0203 Generic-Error"/>
</node>
</node>
<node CREATED="1421552281006" ID="ID_1588051917" MODIFIED="1421552283553" TEXT="Session Stage"/>
</node>
</node>
<node CREATED="1421818696804" FOLDED="true" ID="ID_864564104" MODIFIED="1433914015076" TEXT="&#x7f16;&#x7a0b;&#x6a21;&#x578b;">
<node CREATED="1421827127454" ID="ID_1080552134" MODIFIED="1421827143862">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_program_model.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1421818708755" ID="ID_1721789537" MODIFIED="1433894443520" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1421818716418" FOLDED="true" ID="ID_1289216919" MODIFIED="1433913956662" TEXT="&#x6570;&#x636e;&#x7ec4;&#x7ec7;">
<node CREATED="1421823349362" ID="ID_1240377448" MODIFIED="1421823375760">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pppoe_data_struct_1.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1421135258584" FOLDED="true" ID="ID_302372660" MODIFIED="1433921364432" TEXT="&#x6536;&#x5305;">
<node CREATED="1421828117092" FOLDED="true" ID="ID_201155266" MODIFIED="1433921362054" TEXT="&#x6570;&#x636e;&#x5305;">
<node CREATED="1421135293699" ID="ID_1948459722" MODIFIED="1421828656239">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppoe&#21021;&#22987;&#21270;&#26102;&#27880;&#20876;&#20102;packet type&#65306;
    </p>
    <p>
      dev_add_pack(&amp;pppoes_ptype)&#65306;&#29992;&#20110;&#25509;&#25910;PPPoE session&#28040;&#24687;(eth_type = 0x8864)
    </p>
  </body>
</html></richcontent>
<node CREATED="1421135624537" ID="ID_1517676492" MODIFIED="1421135678514">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int pppoe_rcv(struct sk_buff *skb,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct net_device *dev,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct packet_type *pt,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct net_device *orig_dev)
    </p>
  </body>
</html></richcontent>
<node CREATED="1421828378351" ID="ID_1736383597" MODIFIED="1421828490263">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;&#21253;&#20013;&#30340;session id, &#28304;mac&#22320;&#22336;&#65292;&#20837;&#21475;device&#65292;&#26597;&#25214;&#20986;&#23545;&#24212;&#30340;pppoe socket
    </p>
    <p>
      &#27880;&#24847;pppoe socket&#26159;&#20197;pppox_socket&#30340;&#24418;&#24335;&#25918;&#22312;pppoe_net&#30340;hash&#34920;&#20013;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421828751864" ID="ID_1665640517" MODIFIED="1421828869048">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;socket&#25910;&#21253;&#20989;&#25968;&#65306;sk_receive_skb(sk_pppox(po), skb, 0)
    </p>
    <p>
      &#33267;&#27492;&#65292;&#21253;&#23558;&#36208;socket&#25910;&#21253;&#36335;&#24452;&#65292;&#26368;&#32456;&#20250;&#35843;&#29992;&#21040;&#21019;&#24314;socket&#26102;&#25351;&#23450;&#30340;
    </p>
    <p>
      sk-&gt;sk_backlog_rcv = pppoe_rcv_core
    </p>
  </body>
</html></richcontent>
<node CREATED="1421828901771" ID="ID_1202529491" MODIFIED="1421828903196" TEXT="int pppoe_rcv_core(struct sock *sk, struct sk_buff *skb)">
<node CREATED="1421829310633" ID="ID_809359290" MODIFIED="1421829413136">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;pppoe socket&#22788;&#20110;&#24050;&#32465;&#23450;&#29366;&#24577;(sk-&gt;sk_state &amp; PPPOX_BOUND)&#65292;&#21017;&#35843;&#29992;
    </p>
    <p>
      ppp_input()&#23558;&#21253;&#25237;&#36882;&#21040;ppp generic&#23618;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;pppoe socket&#22312;pppoe_ioctl()&#20013;&#34987;&#32622;&#20026;&#24050;&#32465;&#23450;&#29366;&#24577;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421829448583" ID="ID_1458034780" LINK="#ID_1048494264" MODIFIED="1421829472006" TEXT="ppp_input()"/>
</node>
<node CREATED="1421829537362" ID="ID_1766478833" MODIFIED="1421829608819" TEXT="&#x82e5;pppoe socket&#x8fd8;&#x672a;&#x7ed1;&#x5b9a;&#xff0c;&#x5219;&#x8c03;&#x7528;int sock_queue_rcv_skb(struct sock *sk, struct sk_buff *skb)&#x5148;&#x628a;&#x5305;queue&#x5728;socket&#x7684;&#x6536;&#x5305;&#x961f;&#x5217;&#x91cc;&#xff0c;&#x5e76;&#x901a;&#x77e5;&#x7528;&#x6237;&#x5c42;&#x6b64;socket&#x6709;&#x5305;&#x53ef;&#x6536;"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1421828127226" FOLDED="true" ID="ID_654132323" MODIFIED="1433921362880" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421135293699" ID="ID_541154125" MODIFIED="1421828297342">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pppoe&#21021;&#22987;&#21270;&#26102;&#27880;&#20876;&#20102;packet type&#65306;
    </p>
    <p>
      dev_add_pack(&amp;pppoed_ptype)&#65306;&#29992;&#20110;&#25509;&#25910;PPPoE discovery&#28040;&#24687;(eth_type = 0x8863)
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#27492;&#22788;&#20165;&#25509;&#25910;PADT&#21327;&#35758;&#21253;&#65292;&#20854;&#20182;&#31867;&#22411;&#30340;&#21327;&#35758;&#21253;&#22914;PADI,PADO,PADR,PADS&#22343;&#30001;rp-pppoe plugin&#25171;&#24320;&#30340;
    </p>
    <p>
      raw socket&#30452;&#25509;&#25509;&#25910;&#65292;&#19981;&#32463;&#36807;pppoe&#39537;&#21160;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1421135595119" ID="ID_102856537" MODIFIED="1421135708854" TEXT="int pppoe_disc_rcv(struct sk_buff *skb, &#xa;                                    struct net_device *dev, &#xa;                                    struct packet_type *pt, &#xa;                                    struct net_device *orig_dev)">
<node CREATED="1421828378351" ID="ID_937107415" MODIFIED="1421828490263">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;&#21253;&#20013;&#30340;session id, &#28304;mac&#22320;&#22336;&#65292;&#20837;&#21475;device&#65292;&#26597;&#25214;&#20986;&#23545;&#24212;&#30340;pppoe socket
    </p>
    <p>
      &#27880;&#24847;pppoe socket&#26159;&#20197;pppox_socket&#30340;&#24418;&#24335;&#25918;&#22312;pppoe_net&#30340;hash&#34920;&#20013;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421828549063" ID="ID_250590373" MODIFIED="1421828625107">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;pppoe socket&#26631;&#35760;&#20026;&#20725;&#27515;&#29366;&#24577;&#65306;sk-&gt;sk_state = PPPOX_ZOMBIE
    </p>
    <p>
      &#27492;&#26102;session&#24050;&#32463;&#26029;&#20102;&#65292;&#20294;&#26159;&#36824;&#27809;&#26377;&#35299;&#38500;&#19982;ppp&#25509;&#21475;&#30340;&#32465;&#23450;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1421135264802" FOLDED="true" ID="ID_332559676" MODIFIED="1433919353065" TEXT="&#x53d1;&#x5305;">
<node CREATED="1421829672363" ID="ID_67809295" MODIFIED="1421829675443" TEXT="&#x6570;&#x636e;&#x5305;">
<node CREATED="1421829680701" ID="ID_1229693893" MODIFIED="1421829681699" TEXT="int pppoe_xmit(struct ppp_channel *chan, struct sk_buff *skb)">
<node CREATED="1421829712281" ID="ID_1279542269" MODIFIED="1421829722239" TEXT="&#x4ece;struct ppp_channel&#x627e;&#x5230;pppoe socket"/>
<node CREATED="1421829834851" ID="ID_607403163" MODIFIED="1421829990678">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;pppoe socket&#20013;&#21462;&#20986;(session id, peer hw address,&#160;local device)3&#39033;&#20449;&#24687;&#65306;
    </p>
    <p>
      1&#65292; &#28155;&#21152;pppoe &#22836;&#37096;&#65292;&#22635;&#20805;sessin id
    </p>
    <p>
      2&#65292;&#23558;&#30446;&#30340;mac&#22320;&#22336;&#20462;&#25913;&#20026;peer hw address
    </p>
    <p>
      3&#65292;&#23558;&#21253;&#30340;&#20986;&#25509;&#21475;&#35774;&#32622;&#20026;pppoe socket&#20013;&#20445;&#23384;&#30340;local device
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1421829814949" ID="ID_583618615" MODIFIED="1421829830392" TEXT="&#x8c03;&#x7528;int dev_queue_xmit(struct sk_buff *skb)&#x5c06;&#x5305;&#x53d1;&#x9001;&#x5230;&#x51fa;&#x63a5;&#x53e3;&#x4e0a;"/>
</node>
</node>
<node CREATED="1421829676172" ID="ID_1711499116" MODIFIED="1421829678590" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421830028586" ID="ID_1553499422" MODIFIED="1421830054781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21327;&#35758;&#21253;&#30001;rp-pppoe plugin&#25171;&#24320;&#30340;raw socket&#30452;&#25509;&#21457;&#36865;&#65292;&#19981;&#32463;&#36807;pppoe&#39537;&#21160;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1433825551092" FOLDED="true" ID="ID_1789182895" MODIFIED="1433921369103" TEXT="pptp">
<node CREATED="1433825577474" ID="ID_989207612" MODIFIED="1433825586023" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1433893599898" FOLDED="true" ID="ID_1441150518" MODIFIED="1433919402057" TEXT="PPPOX_socket">
<node CREATED="1433893638813" ID="ID_1558038286" MODIFIED="1433893640293" TEXT="register_pppox_proto(PX_PROTO_PPTP, &amp;pppox_pptp_proto)"/>
<node CREATED="1433893662014" ID="ID_1285954493" MODIFIED="1433893662700" TEXT="struct pppox_proto pppox_pptp_proto">
<node CREATED="1433893676987" ID="ID_702551438" MODIFIED="1433893677797" TEXT="int pptp_create(struct net *net, struct socket *sock)">
<node CREATED="1421134462108" HGAP="21" ID="ID_1195223996" MODIFIED="1421134495102" TEXT="&#xa0;&#xa0;&#xa0;&#xa0;&#x521d;&#x59cb;&#x5316;&#x4e00;&#x4e2a;struct sock&#x7ed3;&#x6784;&#xa0;" VSHIFT="3"/>
<node CREATED="1421134912673" ID="ID_1247678563" MODIFIED="1433893809632" TEXT="&#x521d;&#x59cb;&#x5316;socket ops&#xff1a;sock-&gt;ops&#x9;= &amp;pptp_ops">
<node CREATED="1421134984883" ID="ID_353645118" MODIFIED="1433893818397" TEXT="struct proto_ops pptp_ops">
<node CREATED="1433894220872" ID="ID_1249757358" LINK="#ID_1340835210" MODIFIED="1433898186164" TEXT=".bind = pptp_bind"/>
<node CREATED="1421135000930" ID="ID_60509645" LINK="#ID_636579561" MODIFIED="1433898330259" TEXT=".connect = pptp_connect"/>
<node CREATED="1433894347289" ID="ID_653074015" LINK="#ID_918204857" MODIFIED="1433898315741" TEXT=".getname = pptp_getname"/>
<node CREATED="1421135067788" ID="ID_1634317275" LINK="#ID_888987592" MODIFIED="1421135088976" TEXT=".ioctl = pppox_ioctl"/>
</node>
</node>
<node CREATED="1433896161181" ID="ID_1571491416" MODIFIED="1433896180093" TEXT="&#x521d;&#x59cb;&#x5316;&#x6536;&#x5305;&#x51fd;&#x6570;&#xff1a;sk-&gt;sk_backlog_rcv = pptp_rcv_core"/>
</node>
</node>
<node CREATED="1433897578365" ID="ID_1340835210" MODIFIED="1433897586699" TEXT="int pptp_bind(struct socket *sock, struct sockaddr *uservaddr, int sockaddr_len)">
<node CREATED="1433897619161" ID="ID_1955458959" MODIFIED="1433897685929" TEXT="&#x5c06;&#x7ed1;&#x5b9a;&#x7684;&#x5730;&#x5740;&#x4fdd;&#x5b58;&#x5230;pppox_sk(sock-&gt;sk)-&gt;proto.pptp-&gt;src_addr"/>
<node CREATED="1433897839019" ID="ID_759597166" MODIFIED="1433897840289" TEXT="int add_chan(struct pppox_sock *sock)">
<node CREATED="1433897859813" ID="ID_467785919" MODIFIED="1433897897399" TEXT="&#x5206;&#x914d;&#x4e00;&#x4e2a;Call ID&#xff0c;&#x4fdd;&#x5b58;&#x5230;pppox_sk(sock-&gt;sk)-&gt;proto.pptp.src_addr.call_id"/>
<node CREATED="1433898004252" ID="ID_351569965" LINK="#ID_1121852652" MODIFIED="1433898140858" TEXT="&#x5c06;pppox_sk(sock-&gt;sk)&#x4fdd;&#x5b58;&#x5230;&#x6570;&#x7ec4;callid_sock&#x4ee5;call id&#x4e3a;&#x4e0b;&#x6807;&#x7684;&#x5143;&#x7d20;&#x4e2d;"/>
</node>
</node>
<node CREATED="1433894409222" ID="ID_636579561" MODIFIED="1433894418727" TEXT="int pptp_connect(struct socket *sock, struct sockaddr *uservaddr, int sockaddr_len, int flags)">
<node CREATED="1433911212517" ID="ID_469425943" MODIFIED="1433911250941" TEXT="&#x521d;&#x59cb;&#x5316;pppox_sk(sock-&gt;sk)-&gt;chan">
<node CREATED="1433911353443" ID="ID_728241207" MODIFIED="1433911389476" TEXT="pppox_sk(sock-&gt;sk)-&gt;chan.private = sk"/>
<node CREATED="1433911369637" ID="ID_1590105978" MODIFIED="1433911394080" TEXT="pppox_sk(sock-&gt;sk)-&gt;chan.ops = &amp;pptp_chan_ops">
<node CREATED="1433912445617" ID="ID_1215555312" MODIFIED="1433912446839" TEXT="struct ppp_channel_ops pptp_chan_ops">
<node CREATED="1433912460405" ID="ID_650036891" LINK="#ID_1109368601" MODIFIED="1433919395224" TEXT=".start_xmit = pptp_xmit"/>
<node CREATED="1433912475398" ID="ID_851007204" MODIFIED="1433912486600" TEXT=".ioctl = pptp_ppp_ioctl"/>
</node>
</node>
<node CREATED="1433911453208" FOLDED="true" ID="ID_1985168996" MODIFIED="1433911872550" TEXT="&#x67e5;&#x627e;&#x5230;&#x5bf9;&#x7aef;&#x7684;&#x8def;&#x7531;&#xff0c;&#x5e76;&#x5c06;&#x5176;&#x586b;&#x5165;socket">
<node CREATED="1433911506464" ID="ID_558983653" MODIFIED="1433911564719">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rt = ip_route_output_ports(sock_net(sk), &amp;fl4, sk,
    </p>
    <p>
      &#160;&#160;&#160;opt-&gt;dst_addr.sin_addr.s_addr,
    </p>
    <p>
      &#160;&#160;&#160;opt-&gt;src_addr.sin_addr.s_addr,
    </p>
    <p>
      &#160;&#160;&#160;0, 0,
    </p>
    <p>
      &#160;&#160;&#160;IPPROTO_GRE, RT_CONN_FLAGS(sk), 0);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433911582886" ID="ID_1966913437" MODIFIED="1433911583711" TEXT="sk_setup_caps(sk, &amp;rt-&gt;dst)"/>
</node>
<node CREATED="1433911997772" ID="ID_379311758" MODIFIED="1433912023081" TEXT="&#x521d;&#x59cb;&#x5316;pppox_sk(sock-&gt;sk)-&gt;chan.mtu"/>
<node CREATED="1433911997772" ID="ID_1704973067" MODIFIED="1433912035364" TEXT="&#x521d;&#x59cb;&#x5316;pppox_sk(sock-&gt;sk)-&gt;chan.hdrlen"/>
</node>
<node CREATED="1433912068631" ID="ID_1299322860" MODIFIED="1433912104990">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#20876;ppp channel
    </p>
    <p>
      ppp_register_channel(pppox_sk(sock-&gt;sk)-&gt;chan)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433912135870" ID="ID_645478317" MODIFIED="1433912225258" TEXT="&#x5c06;&#x5bf9;&#x7aef;IP&#x5730;&#x5740;&#x548c;Call ID&#x586b;&#x5165;pppox_sk(sock-&gt;sk)-&gt;proto.pptp.dst_addr"/>
<node CREATED="1433912251587" ID="ID_450660246" MODIFIED="1433912267932" TEXT="&#x5c06;socket&#x6807;&#x8bb0;&#x4e3a;&#x5df2;&#x8fde;&#x63a5;&#xff1a;sk-&gt;sk_state = PPPOX_CONNECTED"/>
</node>
<node CREATED="1433898217411" ID="ID_918204857" MODIFIED="1433898227376" TEXT="int pptp_getname(struct socket *sock, struct sockaddr *uaddr, int *usockaddr_len, int peer)">
<node CREATED="1433898247404" ID="ID_463804961" MODIFIED="1433898257692" TEXT="&#x5c06;pppox_sk(sock-&gt;sk)-&gt;proto.pptp-&gt;src_addr&#x8fd4;&#x56de;&#x7ed9;&#x7528;&#x6237;&#x5c42;"/>
<node CREATED="1433898265710" ID="ID_167443875" MODIFIED="1433898289539" TEXT="&#x7528;&#x6237;&#x5c42;&#x7528;&#x6b64;API&#x83b7;&#x53d6;call id"/>
</node>
</node>
<node CREATED="1433891836900" FOLDED="true" ID="ID_1364810102" MODIFIED="1433917295954" TEXT="&#x534f;&#x8bae;&#x6d41;&#x7a0b;">
<node CREATED="1433893115087" ID="ID_1900801565" MODIFIED="1433893132639">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_protocol_flow.PNG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1433825587537" FOLDED="true" ID="ID_912527417" MODIFIED="1433893253838" TEXT="packet format">
<node CREATED="1433825602326" FOLDED="true" ID="ID_1879159023" MODIFIED="1433891814197" TEXT="data packet">
<node CREATED="1433890880039" ID="ID_26839694" MODIFIED="1433890965951">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_data_packet_format_1.PNG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1433891777133" ID="ID_719506470" MODIFIED="1433891791935">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_data_packet_format_2.PNG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1433825606971" FOLDED="true" ID="ID_1948581703" MODIFIED="1433888334406" TEXT="control packet">
<node CREATED="1433888272525" ID="ID_1788865828" MODIFIED="1433888299167">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_control_packet_format.PNG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1433861565856" FOLDED="true" ID="ID_890734228" MODIFIED="1433888276922" TEXT="control connection">
<node CREATED="1433861586616" FOLDED="true" ID="ID_1675712662" MODIFIED="1433887829451" TEXT="Start-Control-Connection-Request">
<node CREATED="1433861660000" ID="ID_1012947200" MODIFIED="1433861683269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Start-Control-Connection-Request.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433861751590" ID="ID_1520003320" MODIFIED="1433861753636" TEXT="Control Message Type">
<node CREATED="1433861764316" ID="ID_1749139944" MODIFIED="1433861765396" TEXT="1 for Start-Control-Connection-Request"/>
</node>
<node CREATED="1433861798076" ID="ID_798606637" MODIFIED="1433861798939" TEXT="Protocol Version">
<node CREATED="1433861818502" ID="ID_1677603169" MODIFIED="1433861821013" TEXT="1.0"/>
</node>
<node CREATED="1433861837744" ID="ID_1482984284" MODIFIED="1433861838531" TEXT="Framing Capabilities">
<node CREATED="1433861849687" ID="ID_66355684" MODIFIED="1433861850548" TEXT="1 - Asynchronous Framing supported"/>
<node CREATED="1433861859537" ID="ID_317497278" MODIFIED="1433861860243" TEXT="2 - Synchronous Framing supported"/>
</node>
<node CREATED="1433861870788" ID="ID_1334021263" MODIFIED="1433861871480" TEXT="Bearer Capabilities">
<node CREATED="1433861880732" ID="ID_1029564620" MODIFIED="1433861881431" TEXT="1 - Analog access supported"/>
<node CREATED="1433861890824" ID="ID_1263576209" MODIFIED="1433861891423" TEXT="2 - Digital access supported"/>
</node>
<node CREATED="1433861903767" ID="ID_871520532" MODIFIED="1433861904483" TEXT="Maximum Channels">
<node CREATED="1433861987209" ID="ID_1899331611" MODIFIED="1433861988804" TEXT="The total number of individual PPP sessions this PAC can support.  In Start-Control-Connection-Requests issued by the PNS, this value SHOULD be set to 0.  It MUST be ignored by the PAC."/>
</node>
<node CREATED="1433862044835" ID="ID_1499055572" MODIFIED="1433862046248" TEXT="Firmware Revision">
<node CREATED="1433862069131" ID="ID_1603579520" MODIFIED="1433862080191" TEXT="the firmware revision number of the issuing PAC or PAS"/>
</node>
<node CREATED="1433862095975" ID="ID_1825955519" MODIFIED="1433862096662" TEXT="Host Name"/>
<node CREATED="1433862105147" ID="ID_489176563" MODIFIED="1433862106342" TEXT="Vendor Name"/>
</node>
</node>
<node CREATED="1433861586616" FOLDED="true" ID="ID_888928819" MODIFIED="1433886984880" TEXT="Start-Control-Connection-Reply">
<node CREATED="1433861660000" ID="ID_538212882" MODIFIED="1433862206631">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/pptp_msg_Start-Control-Connection-Reply.PNG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1433861751590" ID="ID_574935243" MODIFIED="1433861753636" TEXT="Control Message Type">
<node CREATED="1433861764316" ID="ID_354284167" MODIFIED="1433862232742" TEXT="2 for Start-Control-Connection-Reply"/>
</node>
<node CREATED="1433861798076" ID="ID_1899381937" MODIFIED="1433861798939" TEXT="Protocol Version">
<node CREATED="1433861818502" ID="ID_848082732" MODIFIED="1433861821013" TEXT="1.0"/>
</node>
<node CREATED="1433862258141" FOLDED="true" ID="ID_608326196" MODIFIED="1433862351896" TEXT="Result Code">
<node CREATED="1433862271476" ID="ID_1933513044" MODIFIED="1433862272338" TEXT="1 - Successful channel establishment"/>
<node CREATED="1433862282879" ID="ID_950989616" MODIFIED="1433862289242" TEXT="2 - General error -- Error Code indicates the problem"/>
<node CREATED="1433862302572" ID="ID_743319160" MODIFIED="1433862303185" TEXT="3 - Command channel already exists"/>
<node CREATED="1433862316600" ID="ID_1197549744" MODIFIED="1433862323298" TEXT="4 - Requester is not authorized to establish a command channel"/>
<node CREATED="1433862332889" ID="ID_633722548" MODIFIED="1433862339772" TEXT="5 - The protocol version of the requester is not supported"/>
</node>
<node CREATED="1433862353999" FOLDED="true" ID="ID_517477948" MODIFIED="1433862427417" TEXT="Error Code">
<node CREATED="1433862412573" ID="ID_1946734275" MODIFIED="1433862423928" TEXT="This field is set to 0 unless a &quot;General Error&quot; exists, in which case Result Code is set to 2 and this field is set to the value corresponding to the general error condition"/>
</node>
<node CREATED="1433861837744" ID="ID_337265239" MODIFIED="1433861838531" TEXT="Framing Capabilities">
<node CREATED="1433861849687" ID="ID_470634200" MODIFIED="1433861850548" TEXT="1 - Asynchronous Framing supported"/>
<node CREATED="1433861859537" ID="ID_369131261" MODIFIED="1433861860243" TEXT="2 - Synchronous Framing supported"/>
</node>
<node CREATED="1433861870788" ID="ID_1815771529" MODIFIED="1433861871480" TEXT="Bearer Capabilities">
<node CREATED="1433861880732" ID="ID_469755614" MODIFIED="1433861881431" TEXT="1 - Analog access supported"/>
<node CREATED="1433861890824" ID="ID_852361677" MODIFIED="1433861891423" TEXT="2 - Digital access supported"/>
</node>
<node CREATED="1433861903767" ID="ID_557968359" MODIFIED="1433861904483" TEXT="Maximum Channels">
<node CREATED="1433861987209" ID="ID_1375170723" MODIFIED="1433861988804" TEXT="The total number of individual PPP sessions this PAC can support.  In Start-Control-Connection-Requests issued by the PNS, this value SHOULD be set to 0.  It MUST be ignored by the PAC."/>
</node>
<node CREATED="1433862044835" ID="ID_434065031" MODIFIED="1433862046248" TEXT="Firmware Revision">
<node CREATED="1433862069131" ID="ID_1431408275" MODIFIED="1433862080191" TEXT="the firmware revision number of the issuing PAC or PAS"/>
</node>
<node CREATED="1433862095975" ID="ID_1821879131" MODIFIED="1433862096662" TEXT="Host Name"/>
<node CREATED="1433862105147" ID="ID_1647114467" MODIFIED="1433862106342" TEXT="Vendor Name"/>
</node>
</node>
<node CREATED="1433862527611" FOLDED="true" ID="ID_1937869816" MODIFIED="1433886981407" TEXT="Stop-Control-Connection-Request">
<node CREATED="1433862552750" ID="ID_247686713" MODIFIED="1433862578824">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Stop-Control-Connection-Request.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433861751590" ID="ID_792186953" MODIFIED="1433861753636" TEXT="Control Message Type">
<node CREATED="1433861764316" ID="ID_11945901" MODIFIED="1433862613497" TEXT="3 for Stop-Control-Connection-Request"/>
</node>
<node CREATED="1433862628784" ID="ID_253101599" MODIFIED="1433862629515" TEXT="Reason">
<node CREATED="1433862651642" ID="ID_1295855361" MODIFIED="1433862656251" TEXT="1 (None) - General request to clear control connection"/>
<node CREATED="1433862668400" ID="ID_383110429" MODIFIED="1433862674113" TEXT="2 (Stop-Protocol) - Can&apos;t support peer&apos;s version of the protocol"/>
<node CREATED="1433862682876" ID="ID_842699403" MODIFIED="1433862687177" TEXT="3 (Stop-Local-Shutdown) - Requester is being shut down"/>
</node>
</node>
</node>
<node CREATED="1433862527611" FOLDED="true" ID="ID_299265645" MODIFIED="1433886979616" TEXT="Stop-Control-Connection-Reply">
<node CREATED="1433862552750" ID="ID_1127769004" MODIFIED="1433862761754">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/pptp_msg_Stop-Control-Connection-Reply.PNG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1433861751590" ID="ID_105658950" MODIFIED="1433861753636" TEXT="Control Message Type">
<node CREATED="1433861764316" ID="ID_284209728" MODIFIED="1433862779764" TEXT="4 for Stop-Control-Connection-Reply"/>
</node>
<node CREATED="1433862628784" ID="ID_1804005" MODIFIED="1433862797800" TEXT="Result Code">
<node CREATED="1433862651642" ID="ID_499233888" MODIFIED="1433862814435" TEXT="1 (OK) - Control connection closed"/>
<node CREATED="1433862668400" ID="ID_1247451423" MODIFIED="1433862831707" TEXT="2 (General Error) - Control connection not closed for reason indicated in Error Code"/>
</node>
<node CREATED="1433862353999" ID="ID_74711323" MODIFIED="1433862863847" TEXT="Error Code">
<node CREATED="1433862412573" ID="ID_1718427433" MODIFIED="1433862423928" TEXT="This field is set to 0 unless a &quot;General Error&quot; exists, in which case Result Code is set to 2 and this field is set to the value corresponding to the general error condition"/>
</node>
</node>
</node>
<node CREATED="1433862946947" FOLDED="true" ID="ID_363391088" MODIFIED="1433886978159" TEXT="Echo-Request">
<node CREATED="1433862949502" ID="ID_1812150811" MODIFIED="1433862973411">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Echo-Request.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433862990128" ID="ID_101387554" MODIFIED="1433862990818" TEXT="Control Message Type">
<node CREATED="1433862999566" ID="ID_1677803824" MODIFIED="1433863000303" TEXT="5 for Echo-Request"/>
</node>
<node CREATED="1433863014575" ID="ID_269002388" MODIFIED="1433863015105" TEXT="Identifier"/>
</node>
</node>
<node CREATED="1433863085164" FOLDED="true" ID="ID_549604313" MODIFIED="1433877593291" TEXT="Echo-Reply">
<node CREATED="1433862949502" ID="ID_834473447" MODIFIED="1433863112539">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/pptp_msg_Echo-Reply.PNG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1433862990128" ID="ID_1675335973" MODIFIED="1433862990818" TEXT="Control Message Type">
<node CREATED="1433862999566" ID="ID_976444960" MODIFIED="1433863131261" TEXT="6 for Echo-Reply"/>
</node>
<node CREATED="1433863014575" ID="ID_501833731" MODIFIED="1433863015105" TEXT="Identifier"/>
<node CREATED="1433862628784" ID="ID_432122993" MODIFIED="1433862797800" TEXT="Result Code">
<node CREATED="1433862651642" ID="ID_305984436" MODIFIED="1433863193662" TEXT="1 (OK) - The Echo-Reply is valid"/>
<node CREATED="1433862668400" ID="ID_1366851210" MODIFIED="1433863216844" TEXT="2 (General Error) - Echo-Request not accepted for the reason indicated in Error Code"/>
</node>
<node CREATED="1433862353999" ID="ID_1110504853" MODIFIED="1433862863847" TEXT="Error Code">
<node CREATED="1433862412573" ID="ID_886099010" MODIFIED="1433862423928" TEXT="This field is set to 0 unless a &quot;General Error&quot; exists, in which case Result Code is set to 2 and this field is set to the value corresponding to the general error condition"/>
</node>
</node>
</node>
</node>
<node CREATED="1433884835950" FOLDED="true" ID="ID_1599084351" MODIFIED="1433888277731" TEXT="call session">
<node CREATED="1433864274673" FOLDED="true" ID="ID_1456913216" MODIFIED="1433886994418" TEXT="Outgoing-Call-Request">
<node CREATED="1433864293827" ID="ID_1091020191" MODIFIED="1433864360725" TEXT="The Outgoing-Call-Request is a PPTP control message sent by the PNS to the PAC to indicate that an outbound call from the PAC is to be established.&#xa;&#x7b80;&#x5355;&#x7684;&#x8bf4;outbound call&#x662f;&#x6307;&#x4ece;&#x516c;&#x53f8;&#x6253;&#x5230;&#x5ba2;&#x6237;&#x7684;&#x7535;&#x8bdd;"/>
<node CREATED="1433864365725" ID="ID_361045181" MODIFIED="1433877575561">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Outgoing-Call-Request.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433864430054" ID="ID_1344146625" MODIFIED="1433864432425" TEXT="Control Message Type">
<node CREATED="1433864440880" ID="ID_1524472980" MODIFIED="1433864441658" TEXT="7 for Outgoing-Call-Request"/>
</node>
<node CREATED="1433864457576" ID="ID_1222478551" MODIFIED="1433864458090" TEXT="Call ID">
<node CREATED="1433864509083" ID="ID_1254052990" MODIFIED="1433864527020" TEXT="A unique identifier, unique to a particular PAC-PNS pair assigned by the PNS to this session.  It is used to multiplex and demultiplex data sent over the tunnel between the PNS and PAC involved in this session."/>
<node CREATED="1433864540952" ID="ID_1281107016" MODIFIED="1433864587881" TEXT="Call ID&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;control connection&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x4e00;&#x5bf9;PAC-PNS&#x3002;"/>
<node CREATED="1433864710783" ID="ID_655606875" MODIFIED="1433864751492" TEXT="Call ID&#x7531;PAC&#x548c;PNS&#x5404;&#x81ea;&#x5206;&#x914d;&#xff0c;&#x6240;&#x5206;&#x914d;&#x7684;Call ID&#x53ea;&#x5bf9;&#x81ea;&#x5df1;&#x6709;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1433864605305" ID="ID_390589168" MODIFIED="1433864606121" TEXT="Call Serial Number">
<node CREATED="1433864667225" ID="ID_1019986559" MODIFIED="1433864687770" TEXT="An identifier assigned by the PNS to this session for the purpose of identifying this particular session in logged session information.  Unlike the Call ID, both the PNS and PAC associate the same Call Serial Number with a given session. The combination of IP address and call serial number SHOULD be unique."/>
<node CREATED="1433864761172" ID="ID_1386085037" MODIFIED="1433864790790" TEXT="Call Serial Number&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;session&#xff0c;&#x5373;&#x4e00;&#x4e2a;Call"/>
<node CREATED="1433864800870" ID="ID_1352985382" MODIFIED="1433864873108" TEXT="Call Serial Number&#x7531;PNS&#x5206;&#x914d;&#xff0c;PNS&#x548c;PAC&#x90fd;&#x7528;&#x76f8;&#x540c;&#x7684;Call Serial Number&#x8bc6;&#x522b;&#x8fd9;&#x4e2a;session&#xff0c;&#x5373;Call Serial Number&#x5728;PAC&#x548c;PNS&#x4e24;&#x7aef;&#x90fd;&#x6709;&#x76f8;&#x540c;&#x7684;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1433864887757" ID="ID_925000672" MODIFIED="1433864888979" TEXT="Minimum BPS">
<node CREATED="1433864900400" ID="ID_783462517" MODIFIED="1433864901139" TEXT="The lowest acceptable line speed"/>
</node>
<node CREATED="1433864910248" ID="ID_1272295206" MODIFIED="1433864910692" TEXT="Maximum BPS">
<node CREATED="1433864919839" ID="ID_912463093" MODIFIED="1433864920560" TEXT="The highest acceptable line speed"/>
</node>
<node CREATED="1433864935143" ID="ID_1168549830" MODIFIED="1433864935687" TEXT="Bearer Type">
<node CREATED="1433864944524" ID="ID_181123" MODIFIED="1433864948798" TEXT="1 - Call to be placed on an analog channel"/>
<node CREATED="1433864955911" ID="ID_1625994529" MODIFIED="1433864959039" TEXT="2 - Call to be placed on a digital channel"/>
<node CREATED="1433864965971" ID="ID_851291719" MODIFIED="1433864968829" TEXT="3 - Call can be placed on any type of channel"/>
</node>
<node CREATED="1433864977460" ID="ID_1592005124" MODIFIED="1433864977999" TEXT="Framing Type">
<node CREATED="1433864988860" ID="ID_355358068" MODIFIED="1433864989540" TEXT="1 - Call to use Asynchronous framing"/>
<node CREATED="1433864998088" ID="ID_1645402854" MODIFIED="1433864998591" TEXT="2 - Call to use Synchronous framing"/>
<node CREATED="1433865006688" ID="ID_1890455126" MODIFIED="1433865010064" TEXT="3 - Call can use either type of framing"/>
</node>
<node CREATED="1433865029013" ID="ID_324385914" MODIFIED="1433865050074" TEXT="Packet Recv. Window Size">
<node CREATED="1433865044623" ID="ID_1332299548" MODIFIED="1433865054640" TEXT="The number of received data packets the PNS will buffer for this session"/>
</node>
<node CREATED="1433865065775" ID="ID_125470673" MODIFIED="1433865066220" TEXT="Packet Processing Delay">
<node CREATED="1433865088531" ID="ID_11740953" MODIFIED="1433865098497" TEXT="A measure of the packet processing delay that might be imposed on data sent to the PNS from the PAC.  This value is specified in units of 1/10 seconds."/>
</node>
<node CREATED="1433865109568" ID="ID_811244612" MODIFIED="1433865110328" TEXT="Phone Number Length">
<node CREATED="1433865120940" ID="ID_1898128588" MODIFIED="1433865123913" TEXT="The actual number of valid digits in the Phone Number field"/>
</node>
<node CREATED="1433865132015" ID="ID_1998264873" MODIFIED="1433865132541" TEXT="Phone Number">
<node CREATED="1433865152327" ID="ID_1372680157" MODIFIED="1433865165532" TEXT="The number to be dialed to establish the outgoing session.  For ISDN and analog calls this field is an ASCII string.  If the Phone Number is less than 64 octets in length, the remainder of this field is filled with octets of value 0"/>
</node>
<node CREATED="1433865176069" ID="ID_266534960" MODIFIED="1433865176589" TEXT="Subaddress">
<node CREATED="1433865191094" ID="ID_1689298852" MODIFIED="1433865204614" TEXT="A 64 octet field used to specify additional dialing information"/>
</node>
</node>
</node>
<node CREATED="1433876093806" FOLDED="true" ID="ID_1737012413" MODIFIED="1433886999584" TEXT="Outgoing-Call-Reply">
<node CREATED="1433876129442" ID="ID_1603849658" MODIFIED="1433876148890">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Outgoing-Call-Reply.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433864430054" ID="ID_713850962" MODIFIED="1433864432425" TEXT="Control Message Type">
<node CREATED="1433864440880" ID="ID_618853707" MODIFIED="1433876184135" TEXT="8 for Outgoing-Call-Reply"/>
</node>
<node CREATED="1433864457576" ID="ID_1667453223" MODIFIED="1433864458090" TEXT="Call ID">
<node CREATED="1433864509083" ID="ID_1854594936" MODIFIED="1433876478640" TEXT="A unique identifier, unique to a particular PAC-PNS pair assigned by the PAC to this session.  It is used to multiplex and demultiplex data sent over the tunnel between the PNS and PAC involved in this session."/>
<node CREATED="1433864540952" ID="ID_1044040697" MODIFIED="1433864587881" TEXT="Call ID&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;control connection&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x4e00;&#x5bf9;PAC-PNS&#x3002;"/>
<node CREATED="1433864710783" ID="ID_804399620" MODIFIED="1433864751492" TEXT="Call ID&#x7531;PAC&#x548c;PNS&#x5404;&#x81ea;&#x5206;&#x914d;&#xff0c;&#x6240;&#x5206;&#x914d;&#x7684;Call ID&#x53ea;&#x5bf9;&#x81ea;&#x5df1;&#x6709;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1433876503714" ID="ID_223369116" MODIFIED="1433876505647" TEXT="Peer&apos;s Call ID">
<node CREATED="1433876537681" ID="ID_1425078954" MODIFIED="1433876559095" TEXT="This field is set to the value received in the Call ID field of the corresponding Outgoing-Call-Request message.  It is used by the PNS to match the Outgoing-Call-Reply with the Outgoing-Call-Request it issued. It also is used as the value sent in the GRE header for mux/demuxing."/>
<node CREATED="1433876563680" ID="ID_611228159" MODIFIED="1433876574154" TEXT="PNS&#x5206;&#x914d;&#x7684;Call ID"/>
</node>
<node CREATED="1433877455384" ID="ID_1453045038" MODIFIED="1433877456966" TEXT="Result Code">
<node CREATED="1433877465762" ID="ID_1331026088" MODIFIED="1433877470621" TEXT="1 (Connected) - Call established with no errors"/>
<node CREATED="1433877479692" ID="ID_708963449" MODIFIED="1433877487659" TEXT="2 (General Error) - Outgoing Call not established for the reason indicated in Error Code"/>
<node CREATED="1433877496693" ID="ID_1870652188" MODIFIED="1433877501292" TEXT="3 (No Carrier) - Outgoing Call failed due to no carrier detected"/>
<node CREATED="1433877509951" ID="ID_1609756762" MODIFIED="1433877516596" TEXT="4 (Busy) - Outgoing Call failed due to detection of a busy signal"/>
<node CREATED="1433877524435" ID="ID_1771665607" MODIFIED="1433877531018" TEXT="5 (No Dial Tone) - Outgoing Call failed due to lack of a dial tone"/>
<node CREATED="1433877538832" ID="ID_688433026" MODIFIED="1433877544927" TEXT="6 (Time-out) - Outgoing Call was not established within time allotted by PAC"/>
<node CREATED="1433877555983" ID="ID_721912800" MODIFIED="1433877560146" TEXT="7 (Do Not Accept) - Outgoing Call administratively prohibited"/>
</node>
<node CREATED="1433862353999" ID="ID_696531133" MODIFIED="1433877590758" TEXT="Error Code">
<node CREATED="1433862412573" ID="ID_630097517" MODIFIED="1433862423928" TEXT="This field is set to 0 unless a &quot;General Error&quot; exists, in which case Result Code is set to 2 and this field is set to the value corresponding to the general error condition"/>
</node>
<node CREATED="1433877609679" ID="ID_1551683502" MODIFIED="1433877610380" TEXT="Cause Code">
<node CREATED="1433877653145" ID="ID_728721264" MODIFIED="1433877656553" TEXT="This field gives additional failure information"/>
</node>
<node CREATED="1433877667738" ID="ID_875698560" MODIFIED="1433877668306" TEXT="Connect Speed">
<node CREATED="1433877680454" ID="ID_857599753" MODIFIED="1433877681153" TEXT="The actual connection speed used"/>
</node>
<node CREATED="1433865029013" ID="ID_1685414242" MODIFIED="1433865050074" TEXT="Packet Recv. Window Size">
<node CREATED="1433865044623" ID="ID_1920743335" MODIFIED="1433877730623" TEXT="The number of received data packets the PAC will buffer for this session"/>
</node>
<node CREATED="1433865065775" ID="ID_54766055" MODIFIED="1433865066220" TEXT="Packet Processing Delay">
<node CREATED="1433865088531" ID="ID_68543473" MODIFIED="1433877761001" TEXT="A measure of the packet processing delay that might be imposed on data sent to the PAC from the PNS.  This value is specified in units of 1/10 seconds."/>
</node>
<node CREATED="1433877776661" ID="ID_181265839" MODIFIED="1433877777288" TEXT="Physical Channel ID">
<node CREATED="1433877852155" ID="ID_1956799232" MODIFIED="1433877864470" TEXT="This field is set by the PAC in a vendor- specific manner to the physical channel number used to place this call.  It is used for logging purposes only."/>
</node>
</node>
</node>
<node CREATED="1433864274673" FOLDED="true" ID="ID_1575244897" MODIFIED="1433878637255" TEXT="Incoming-Call-Request">
<node CREATED="1433864293827" ID="ID_1424788777" MODIFIED="1433878031134" TEXT="The Incoming-Call-Request is a PPTP control message sent by the PAC to the PNS to indicate that an inbound call from the PAC is to be established.&#xa;&#x7b80;&#x5355;&#x7684;&#x8bf4;inbound call&#x662f;&#x6307;&#x4ece;&#x5ba2;&#x6237;&#x6253;&#x5230;&#x516c;&#x53f8;&#x7684;&#x7535;&#x8bdd;"/>
<node CREATED="1433864365725" ID="ID_1146724935" MODIFIED="1433878165153">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/pptp_msg_Incoming-Call-Request.PNG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1433864430054" ID="ID_1977416962" MODIFIED="1433864432425" TEXT="Control Message Type">
<node CREATED="1433864440880" ID="ID_1364036388" MODIFIED="1433878183421" TEXT="9 for Incoming-Call-Request"/>
</node>
<node CREATED="1433864457576" ID="ID_1963989090" MODIFIED="1433864458090" TEXT="Call ID">
<node CREATED="1433864509083" ID="ID_1041380700" MODIFIED="1433878226941" TEXT="A unique identifier, unique to a particular PAC-PNS pair assigned by the PAC to this session.  It is used to multiplex and demultiplex data sent over the tunnel between the PNS and PAC involved in this session."/>
<node CREATED="1433864540952" ID="ID_61327337" MODIFIED="1433864587881" TEXT="Call ID&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;control connection&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x4e00;&#x5bf9;PAC-PNS&#x3002;"/>
<node CREATED="1433864710783" ID="ID_156440634" MODIFIED="1433864751492" TEXT="Call ID&#x7531;PAC&#x548c;PNS&#x5404;&#x81ea;&#x5206;&#x914d;&#xff0c;&#x6240;&#x5206;&#x914d;&#x7684;Call ID&#x53ea;&#x5bf9;&#x81ea;&#x5df1;&#x6709;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1433864605305" ID="ID_1674669178" MODIFIED="1433864606121" TEXT="Call Serial Number">
<node CREATED="1433864667225" ID="ID_1221643886" MODIFIED="1433878255982" TEXT="An identifier assigned by the PAC to this session for the purpose of identifying this particular session in logged session information.  Unlike the Call ID, both the PNS and PAC associate the same Call Serial Number with a given session. The combination of IP address and call serial number SHOULD be unique."/>
<node CREATED="1433864761172" ID="ID_897471936" MODIFIED="1433864790790" TEXT="Call Serial Number&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;session&#xff0c;&#x5373;&#x4e00;&#x4e2a;Call"/>
<node CREATED="1433864800870" ID="ID_1194767180" MODIFIED="1433878288230" TEXT="Call Serial Number&#x7531;PAC&#x5206;&#x914d;&#xff0c;PNS&#x548c;PAC&#x90fd;&#x7528;&#x76f8;&#x540c;&#x7684;Call Serial Number&#x8bc6;&#x522b;&#x8fd9;&#x4e2a;session&#xff0c;&#x5373;Call Serial Number&#x5728;PAC&#x548c;PNS&#x4e24;&#x7aef;&#x90fd;&#x6709;&#x76f8;&#x540c;&#x7684;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1433864935143" ID="ID_1306294855" MODIFIED="1433864935687" TEXT="Bearer Type">
<node CREATED="1433864944524" ID="ID_956500658" MODIFIED="1433864948798" TEXT="1 - Call to be placed on an analog channel"/>
<node CREATED="1433864955911" ID="ID_1971835872" MODIFIED="1433864959039" TEXT="2 - Call to be placed on a digital channel"/>
</node>
<node CREATED="1433877776661" ID="ID_619328941" MODIFIED="1433877777288" TEXT="Physical Channel ID">
<node CREATED="1433877852155" ID="ID_1514230658" MODIFIED="1433878419830" TEXT="This field is set by the PAC in a vendor-specific manner to the number of the physical channel this call arrived on"/>
</node>
<node CREATED="1433878476499" ID="ID_144054802" MODIFIED="1433878477718" TEXT="Dialed Number Length">
<node CREATED="1433865120940" ID="ID_1182300852" MODIFIED="1433878500109" TEXT="The actual number of valid digits in the Dialed Number field"/>
</node>
<node CREATED="1433878512675" ID="ID_1491876576" MODIFIED="1433878513430" TEXT="Dialing Number Length">
<node CREATED="1433878522887" ID="ID_495438487" MODIFIED="1433878527286" TEXT="The actual number of valid digits in the Dialing Number field"/>
</node>
<node CREATED="1433878537909" ID="ID_1262586227" MODIFIED="1433878538502" TEXT="Dialed Number">
<node CREATED="1433878567831" ID="ID_233348769" MODIFIED="1433878568684" TEXT="The number that was dialed by the caller"/>
</node>
<node CREATED="1433878589315" ID="ID_1348929506" MODIFIED="1433878591209" TEXT="Dialing Number">
<node CREATED="1433878600885" ID="ID_1200831128" MODIFIED="1433878601607" TEXT="The number from which the call was placed"/>
</node>
<node CREATED="1433865176069" ID="ID_1390103063" MODIFIED="1433865176589" TEXT="Subaddress">
<node CREATED="1433865191094" ID="ID_206785747" MODIFIED="1433865204614" TEXT="A 64 octet field used to specify additional dialing information"/>
</node>
</node>
</node>
<node CREATED="1433876093806" FOLDED="true" ID="ID_1862487122" MODIFIED="1433884019618" TEXT="Incoming-Call-Reply">
<node CREATED="1433876129442" ID="ID_970652534" MODIFIED="1433878690306">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/pptp_msg_Incoming-Call-Reply.PNG" />
    </p>
  </body>
</html></richcontent>
<node CREATED="1433864430054" ID="ID_1822796083" MODIFIED="1433864432425" TEXT="Control Message Type">
<node CREATED="1433864440880" ID="ID_1803336945" MODIFIED="1433878707738" TEXT="10 for Incoming-Call-Reply"/>
</node>
<node CREATED="1433864457576" ID="ID_129502327" MODIFIED="1433864458090" TEXT="Call ID">
<node CREATED="1433864509083" ID="ID_860736254" MODIFIED="1433878730837" TEXT="A unique identifier, unique to a particular PAC-PNS pair assigned by the PNS to this session.  It is used to multiplex and demultiplex data sent over the tunnel between the PNS and PAC involved in this session."/>
<node CREATED="1433864540952" ID="ID_16706236" MODIFIED="1433864587881" TEXT="Call ID&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;control connection&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x4e00;&#x5bf9;PAC-PNS&#x3002;"/>
<node CREATED="1433864710783" ID="ID_819598897" MODIFIED="1433864751492" TEXT="Call ID&#x7531;PAC&#x548c;PNS&#x5404;&#x81ea;&#x5206;&#x914d;&#xff0c;&#x6240;&#x5206;&#x914d;&#x7684;Call ID&#x53ea;&#x5bf9;&#x81ea;&#x5df1;&#x6709;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1433876503714" ID="ID_611471750" MODIFIED="1433876505647" TEXT="Peer&apos;s Call ID">
<node CREATED="1433876537681" ID="ID_383247402" MODIFIED="1433878805725" TEXT="This field is set to the value received in the Call ID field of the corresponding Incoming-Call-Request message.  It is used by the PAC to match the Incoming-Call-Reply with the Incoming-Call-Request it issued. It also is used as the value sent in the GRE header for mux/demuxing."/>
<node CREATED="1433876563680" ID="ID_1944721702" MODIFIED="1433876574154" TEXT="PNS&#x5206;&#x914d;&#x7684;Call ID"/>
</node>
<node CREATED="1433877455384" ID="ID_232299175" MODIFIED="1433877456966" TEXT="Result Code">
<node CREATED="1433877465762" ID="ID_1381202852" MODIFIED="1433878847240" TEXT="1 (Connect) - The PAC should answer the incoming call"/>
<node CREATED="1433877479692" ID="ID_1668896357" MODIFIED="1433878860407" TEXT="2 (General Error) - The Incoming Call should not be established due to the reason indicated in Error Code"/>
<node CREATED="1433877496693" ID="ID_550974119" MODIFIED="1433878881748" TEXT="3 (Do Not Accept) - The PAC should not accept the incoming call.  It should hang up or issue a busy indication"/>
</node>
<node CREATED="1433862353999" ID="ID_164456841" MODIFIED="1433877590758" TEXT="Error Code">
<node CREATED="1433862412573" ID="ID_1120636949" MODIFIED="1433862423928" TEXT="This field is set to 0 unless a &quot;General Error&quot; exists, in which case Result Code is set to 2 and this field is set to the value corresponding to the general error condition"/>
</node>
<node CREATED="1433865029013" ID="ID_170786446" MODIFIED="1433865050074" TEXT="Packet Recv. Window Size">
<node CREATED="1433865044623" ID="ID_91446964" MODIFIED="1433877730623" TEXT="The number of received data packets the PAC will buffer for this session"/>
</node>
<node CREATED="1433865065775" ID="ID_163052002" MODIFIED="1433865066220" TEXT="Packet Processing Delay">
<node CREATED="1433865088531" ID="ID_939072574" MODIFIED="1433877761001" TEXT="A measure of the packet processing delay that might be imposed on data sent to the PAC from the PNS.  This value is specified in units of 1/10 seconds."/>
</node>
</node>
</node>
<node CREATED="1433878981798" FOLDED="true" ID="ID_1702413541" MODIFIED="1433879304295" TEXT="Incoming-Call-Connected">
<node CREATED="1433879092539" ID="ID_1412560719" MODIFIED="1433879113678">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Incoming-Call-Connected.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433879115419" ID="ID_1818746449" MODIFIED="1433879116716" TEXT="Control Message Type">
<node CREATED="1433879127834" ID="ID_143920748" MODIFIED="1433879128580" TEXT="11 for Incoming-Call-Connected"/>
</node>
<node CREATED="1433879142085" ID="ID_640461337" MODIFIED="1433879142645" TEXT="Peer&apos;s Call ID">
<node CREATED="1433879156616" ID="ID_1398737540" MODIFIED="1433879169469" TEXT="This field is set to the value received in the Call ID field of the corresponding Incoming-Call-Reply message.  It is used by the PNS to match the Incoming-Call-Connected with the Incoming-Call-Reply it issued."/>
</node>
<node CREATED="1433879180838" ID="ID_866212789" MODIFIED="1433879183312" TEXT="Connect Speed">
<node CREATED="1433879190439" ID="ID_206351460" MODIFIED="1433879191230" TEXT="The actual connection speed used"/>
</node>
<node CREATED="1433879202356" ID="ID_1493430025" MODIFIED="1433879202942" TEXT="Packet Recv. Window Size">
<node CREATED="1433879215185" ID="ID_1854462737" MODIFIED="1433879220427" TEXT="The number of received data packets the PAC will buffer for this session"/>
</node>
<node CREATED="1433879230420" ID="ID_184195588" MODIFIED="1433879231012" TEXT="Packet Transmit Delay">
<node CREATED="1433879243076" ID="ID_1510939041" MODIFIED="1433879252509" TEXT="A measure of the packet processing delay that might be imposed on data sent to the PAC from the PNS.  This value is specified in units of 1/10 seconds"/>
</node>
<node CREATED="1433879273204" ID="ID_689212230" MODIFIED="1433879273760" TEXT="Framing Type">
<node CREATED="1433879282126" ID="ID_50359480" MODIFIED="1433879282816" TEXT="1 - Call uses asynchronous framing"/>
<node CREATED="1433879291606" ID="ID_410555969" MODIFIED="1433879292149" TEXT="2 - Call uses synchronous framing"/>
</node>
</node>
</node>
<node CREATED="1433879305441" FOLDED="true" ID="ID_1034631426" MODIFIED="1433884018170" TEXT="Call-Clear-Request">
<node CREATED="1433883425857" ID="ID_1055365575" MODIFIED="1433883651073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Call-Clear-Request&#26159;&#30001;PNS&#21521;PAC&#21457;&#20986;&#30340;&#19968;&#20010;PPTP&#28040;&#24687;&#65292;&#25351;&#26126;&#35201;&#26029;&#24320;&#19968;&#20010;call&#12290;&#27491;&#24120;&#24773;&#20917;&#19979;&#65292;PAC&#23558;&#22238;&#20043;&#20197;
    </p>
    <pre class="newpage">Call-Disconnect-Notify&#28040;&#24687;</pre>
  </body>
</html></richcontent>
</node>
<node CREATED="1433879354431" ID="ID_895558765" MODIFIED="1433879370814">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Call-Clear-Request.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433879372560" ID="ID_641490103" MODIFIED="1433879373291" TEXT="Control Message Type">
<node CREATED="1433879382303" ID="ID_1672224574" MODIFIED="1433879382931" TEXT="12 for Call-Clear-Request"/>
</node>
<node CREATED="1433879392515" ID="ID_832028615" MODIFIED="1433879393174" TEXT="Call ID">
<node CREATED="1433879465385" ID="ID_436441016" MODIFIED="1433879481284" TEXT="The Call ID assigned by the PNS to this call.  This value is used instead of the Peer&apos;s Call ID because the latter may not be known to the PNS if the call must be aborted during call establishment."/>
<node CREATED="1433883316717" ID="ID_1274231029" MODIFIED="1433883331724" TEXT="&#x53d1;&#x9001;&#x65b9;&#x81ea;&#x5df1;&#x7684;Call ID"/>
</node>
</node>
</node>
<node CREATED="1433883685039" FOLDED="true" ID="ID_1965857456" MODIFIED="1433884022706" TEXT="Call-Disconnect-Notify">
<node CREATED="1433883732019" ID="ID_359391176" MODIFIED="1433883746448">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Call-Disconnect-Notify.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433879372560" ID="ID_32288071" MODIFIED="1433879373291" TEXT="Control Message Type">
<node CREATED="1433879382303" ID="ID_482285386" MODIFIED="1433883772316" TEXT="13 for Call-Disconnect-Notify"/>
</node>
<node CREATED="1433879392515" ID="ID_1681026304" MODIFIED="1433879393174" TEXT="Call ID">
<node CREATED="1433879465385" ID="ID_1175966305" MODIFIED="1433879481284" TEXT="The Call ID assigned by the PNS to this call.  This value is used instead of the Peer&apos;s Call ID because the latter may not be known to the PNS if the call must be aborted during call establishment."/>
<node CREATED="1433883316717" ID="ID_822724507" MODIFIED="1433883331724" TEXT="&#x53d1;&#x9001;&#x65b9;&#x81ea;&#x5df1;&#x7684;Call ID"/>
</node>
<node CREATED="1433883809152" ID="ID_367654245" MODIFIED="1433883809689" TEXT="Result Code">
<node CREATED="1433883819649" ID="ID_916456405" MODIFIED="1433883823113" TEXT="1 (Lost Carrier) - Call disconnected due to loss of carrier"/>
<node CREATED="1433883832503" ID="ID_254021542" MODIFIED="1433883838820" TEXT="2 (General Error) - Call disconnected for the reason indicated in Error Code"/>
<node CREATED="1433883847754" ID="ID_1549286063" MODIFIED="1433883852503" TEXT="3 (Admin Shutdown) - Call disconnected for administrative reasons"/>
<node CREATED="1433883861332" ID="ID_1771893698" MODIFIED="1433883865353" TEXT="4 (Request) - Call disconnected due to received Call-Clear-Request"/>
</node>
<node CREATED="1433862353999" ID="ID_379114251" MODIFIED="1433877590758" TEXT="Error Code">
<node CREATED="1433862412573" ID="ID_1967869640" MODIFIED="1433862423928" TEXT="This field is set to 0 unless a &quot;General Error&quot; exists, in which case Result Code is set to 2 and this field is set to the value corresponding to the general error condition"/>
</node>
<node CREATED="1433877609679" ID="ID_1681216080" MODIFIED="1433877610380" TEXT="Cause Code">
<node CREATED="1433877653145" ID="ID_212992707" MODIFIED="1433877656553" TEXT="This field gives additional failure information"/>
</node>
<node CREATED="1433883960051" ID="ID_833510328" MODIFIED="1433883962799" TEXT="Call Statistics">
<node CREATED="1433883980588" ID="ID_357180519" MODIFIED="1433883991719" TEXT="This field is an ASCII string containing vendor-specific call statistics that can be logged for diagnostic purposes"/>
</node>
</node>
</node>
<node CREATED="1433884098999" FOLDED="true" ID="ID_185004501" MODIFIED="1433884916221" TEXT="WAN-Error-Notify">
<node CREATED="1433884182619" ID="ID_612852195" MODIFIED="1433884406117" TEXT="&#x5f53;pptp&#x5e95;&#x5c42;&#x7684;wan interface&#x51fa;&#x95ee;&#x9898;&#x65f6;&#xff0c;PAC&#x5411;PNS&#x53d1;&#x51fa;WAN-Error-Notify&#x6d88;&#x606f;&#xff0c;&#x544a;&#x77e5;&#x76f8;&#x5173;&#x7684;&#x9519;&#x8bef;&#x7edf;&#x8ba1;&#x6570;&#x3002;&#x6b64;&#x6d88;&#x606f;60&#x79d2;&#x5185;&#x6700;&#x591a;&#x53d1;&#x9001;&#x4e00;&#x6b21;&#x3002;call&#x91cd;&#x65b0;&#x5efa;&#x7acb;&#x6210;&#x529f;&#x540e;&#xff0c;&#x9519;&#x8bef;&#x7edf;&#x8ba1;&#x6570;&#x5e94;&#x8be5;&#x88ab;&#x6e05;&#x96f6;&#x3002;"/>
<node CREATED="1433884162214" ID="ID_550477811" MODIFIED="1433884178173">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_WAN-Error-Notify.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433884522721" ID="ID_406469366" MODIFIED="1433884523581" TEXT="Control Message Type">
<node CREATED="1433884532329" ID="ID_433318666" MODIFIED="1433884533039" TEXT="14 for WAN-Error-Notify"/>
</node>
<node CREATED="1433884549723" ID="ID_1240571303" MODIFIED="1433884550350" TEXT="Peer&apos;s Call ID">
<node CREATED="1433884560636" ID="ID_1881459926" MODIFIED="1433884568190" TEXT="The Call ID assigned by the PNS to this call"/>
</node>
</node>
</node>
<node CREATED="1433884666264" FOLDED="true" ID="ID_1999759957" MODIFIED="1433888089967" TEXT="Set-Link-Info">
<node CREATED="1433884707575" ID="ID_1728201526" MODIFIED="1433884727057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_msg_Set-Link-Info.PNG" />
  </body>
</html></richcontent>
<node CREATED="1433884740972" ID="ID_842985753" MODIFIED="1433884741682" TEXT="Control Message Type">
<node CREATED="1433884751055" ID="ID_945582228" MODIFIED="1433884752065" TEXT="15 for Set-Link-Info"/>
</node>
<node CREATED="1433884762912" ID="ID_613913698" MODIFIED="1433884763522" TEXT="Peer&apos;s Call ID">
<node CREATED="1433884773218" ID="ID_538298901" MODIFIED="1433884778064" TEXT="The value of the Call ID assigned by the PAC to this call"/>
</node>
<node CREATED="1433884794159" ID="ID_366292562" MODIFIED="1433884795434" TEXT="Send ACCM"/>
<node CREATED="1433884804269" ID="ID_1938396767" MODIFIED="1433884804985" TEXT="Receive ACCM"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1433914005280" FOLDED="true" ID="ID_392488908" MODIFIED="1433919300557" TEXT="&#x7f16;&#x7a0b;&#x6a21;&#x578b;">
<node CREATED="1433918340961" ID="ID_1628574496" MODIFIED="1433918360454">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_program_model.PNG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1433894463474" FOLDED="true" ID="ID_84596489" MODIFIED="1433913988586" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1433894471600" ID="ID_462469215" MODIFIED="1433894475977" TEXT="&#x6570;&#x636e;&#x7ec4;&#x7ec7;">
<node CREATED="1433913961189" ID="ID_1740381593" MODIFIED="1433913976400">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/pptp_data_struct.PNG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1433897954304" ID="ID_148657341" MODIFIED="1433897959352" TEXT="&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1433897960725" ID="ID_1121852652" MODIFIED="1433897971782" TEXT="struct pppox_sock **callid_sock"/>
</node>
</node>
<node CREATED="1433918412004" FOLDED="true" ID="ID_692898931" MODIFIED="1433921366271" TEXT="&#x6536;&#x5305;">
<node CREATED="1433918436769" FOLDED="true" ID="ID_1832754647" MODIFIED="1433921357855" TEXT="&#x6570;&#x636e;&#x5305;">
<node CREATED="1433920483572" ID="ID_552510183" MODIFIED="1433920713351">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pptp&#39537;&#21160;&#21021;&#22987;&#21270;&#26102;&#22312;GRE&#20013;&#27880;&#20876;&#20102;&#25910;&#21253;&#20989;&#25968;pptp_rcv()
    </p>
    <p>
      gre_add_protocol(&amp;gre_pptp_protocol, GREPROTO_PPTP)
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;GRE&#26159;&#26681;&#25454;GRE&#22836;&#37096;&#20013;flags.version&#23383;&#27573;&#26159;&#21542;&#31561;&#20110;GREPROTO_PPTP&#26469;&#21028;&#26029;&#26159;&#21542;&#35843;&#29992;pptp_rcv()&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1433920889741" ID="ID_1187961499" MODIFIED="1433920890438" TEXT="int pptp_rcv(struct sk_buff *skb)">
<node CREATED="1433920896151" ID="ID_76247025" MODIFIED="1433920968143" TEXT="&#x6839;&#x636e;&#x5916;&#x5c42;IP&#x5934;&#x90e8;&#x4e2d;&#x7684;&#x6e90;IP&#x5730;&#x5740;&#x548c;GRE&#x5934;&#x90e8;&#x4e2d;call id&#x627e;&#x5230;&#x6b64;session&#x5bf9;&#x5e94;&#x7684;struct pppox_sock&#x7ed3;&#x6784;"/>
<node CREATED="1433921012708" ID="ID_500960734" MODIFIED="1433921310469">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;socket&#25910;&#21253;&#20989;&#25968;&#65306;sk_receive_skb(sk_pppox(po), skb, 0)
    </p>
    <p>
      &#33267;&#27492;&#65292;&#21253;&#23558;&#36208;socket&#25910;&#21253;&#36335;&#24452;&#65292;&#26368;&#32456;&#20250;&#35843;&#29992;&#21040;&#21019;&#24314;socket&#26102;&#25351;&#23450;&#30340;
    </p>
    <p>
      sk-&gt;sk_backlog_rcv = pppoe_rcv_core
    </p>
  </body>
</html></richcontent>
<node CREATED="1433921044897" ID="ID_1267959165" MODIFIED="1433921046798" TEXT="int pptp_rcv_core(struct sock *sk, struct sk_buff *skb)">
<node CREATED="1433921117061" ID="ID_1367257427" MODIFIED="1433921194132" TEXT="&#x66f4;&#x65b0;pppox_sk(sk)-&gt;proto.pptp&#x4e2d;&#x7684;ack_recv&#x548c;seq_recv"/>
<node CREATED="1433921239185" ID="ID_670499710" MODIFIED="1433921258720" TEXT="&#x5265;&#x6389;GRE&#x5934;&#x90e8;&#x548c;PPP&#x5934;&#x90e8;"/>
<node CREATED="1421829448583" ID="ID_1290872117" LINK="#ID_1048494264" MODIFIED="1421829472006" TEXT="ppp_input()"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1433918446867" FOLDED="true" ID="ID_1061330246" MODIFIED="1433920143894" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421830028586" ID="ID_976830772" MODIFIED="1433920142680">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21327;&#35758;&#21253;&#30001;pptp plugin&#19982;&#23545;&#31471;&#24314;&#31435;&#30340;TCP&#36830;&#25509;&#30452;&#25509;&#25509;&#25910;&#65292;&#19981;&#32463;&#36807;pptp&#39537;&#21160;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1433918471857" FOLDED="true" ID="ID_646232024" MODIFIED="1433920170213" TEXT="&#x53d1;&#x5305;">
<node CREATED="1433918459413" ID="ID_973104171" MODIFIED="1433918460003" TEXT="&#x6570;&#x636e;&#x5305;">
<node CREATED="1433918516076" ID="ID_1109368601" MODIFIED="1433918517745" TEXT="int pptp_xmit(struct ppp_channel *chan, struct sk_buff *skb)">
<node CREATED="1433918677536" ID="ID_204895257" MODIFIED="1433918747083" TEXT="&#x6839;&#x636e;&#x4fdd;&#x5b58;&#x5728;pppox_sock&#x4e2d;&#x672c;&#x7aef;&#x548c;&#x5bf9;&#x7aef;&#x7684;IP&#x5730;&#x5740;&#xff0c;&#x67e5;&#x627e;&#x5230;&#x5bf9;&#x7aef;&#x7684;&#x8def;&#x7531;&#xff0c;&#x5e76;&#x5c06;&#x5176;&#x4fdd;&#x5b58;&#x5230;skb&#x4e2d;">
<node CREATED="1433918758821" ID="ID_914854260" MODIFIED="1433918764626" TEXT="ip_route_output_ports()"/>
<node CREATED="1433918788102" ID="ID_314975389" MODIFIED="1433918789526" TEXT="skb_dst_set(skb, &amp;rt-&gt;dst)"/>
</node>
<node CREATED="1433918829484" ID="ID_1639163325" MODIFIED="1433918905238" TEXT="&#x586b;&#x5145;ppp&#x5934;&#x90e8;&#x4e2d;&#x7684;address&#x548c;control&#x5b57;&#x6bb5;&#xff0c;&#x6bcf;&#x4e2a;&#x5b57;&#x6bb5;&#x90fd;&#x662f;1&#x5b57;&#x8282;&#x7684;&#x56fa;&#x5b9a;&#x503c;"/>
<node CREATED="1433919063230" ID="ID_844153487" MODIFIED="1433919189791">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22635;&#20805;GRE&#22836;&#37096;&#65292;call id&#26159;&#23545;&#31471;&#30340;call id
    </p>
    <p>
      &#22914;&#26524;&#27809;&#26377;&#20174;&#23545;&#31471;&#25509;&#25910;&#21040;&#26356;&#26032;&#30340;sequence number&#65292;&#21017;&#19981;&#29992;&#22635;acknowledgement number&#23383;&#27573;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433919236542" ID="ID_1100553249" MODIFIED="1433919250330" TEXT="&#x586b;&#x5145;&#x5916;&#x5c42;IP&#x5934;&#x90e8;"/>
<node CREATED="1433919285375" FOLDED="true" ID="ID_1620506023" MODIFIED="1433920001196" TEXT="ip_local_out(skb)">
<node CREATED="1433919423176" ID="ID_1693246359" MODIFIED="1433919425307" TEXT="__ip_local_out">
<node CREATED="1433919433901" ID="ID_1802549332" MODIFIED="1433919452619" TEXT="netfilter hook point: local out"/>
<node CREATED="1433919799444" ID="ID_1736869014" MODIFIED="1433919995853" TEXT="skb_dst(skb)-&gt;output(skb)">
<node CREATED="1433919815623" ID="ID_191146607" MODIFIED="1433919817027" TEXT="ip_output">
<node CREATED="1433919833536" ID="ID_150629048" MODIFIED="1433919850110" TEXT="netfilter hook point: postrouting"/>
<node CREATED="1433919859711" ID="ID_729752945" MODIFIED="1433919860643" TEXT="ip_finish_output">
<node CREATED="1433919895175" ID="ID_560999359" MODIFIED="1433919896441" TEXT="ip_finish_output2">
<node CREATED="1433919918145" ID="ID_1835643615" MODIFIED="1433919918871" TEXT="dst_neigh_output">
<node CREATED="1433919943036" ID="ID_1739193629" MODIFIED="1433919943737" TEXT="neigh_hh_output">
<node CREATED="1433919957365" ID="ID_1018217065" MODIFIED="1433919958059" TEXT="dev_queue_xmit"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1433918446867" ID="ID_16954459" MODIFIED="1433918448455" TEXT="&#x534f;&#x8bae;&#x5305;">
<node CREATED="1421830028586" ID="ID_388009419" MODIFIED="1433920155461">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21327;&#35758;&#21253;&#30001;pptp plugin&#29992;TCP socket&#19982;&#23545;&#31471;&#24314;&#31435;TCP&#36830;&#25509;&#21518;&#30452;&#25509;&#21457;&#36865;&#65292;&#19981;&#32463;&#36807;pptp&#39537;&#21160;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1307080318968" FOLDED="true" ID="ID_42715600" MODIFIED="1421043337603" TEXT="bridge">
<node CREATED="1307080328263" ID="ID_150033611" MODIFIED="1307080341145" TEXT="&#x91cd;&#x8981;&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
<node CREATED="1307080342085" ID="ID_1710687306" MODIFIED="1307080349608" TEXT="&#x91cd;&#x8981;&#x5168;&#x5c40;&#x53d8;&#x91cf;"/>
<node CREATED="1307080352788" FOLDED="true" ID="ID_1551476461" MODIFIED="1400829392827" TEXT="&#x521d;&#x59cb;&#x5316; br_init">
<node CREATED="1307080696341" ID="ID_1311988242" MODIFIED="1307080700084" TEXT="1, stp_proto_register(&amp;br_stp_proto)"/>
<node CREATED="1307080710755" ID="ID_180239056" MODIFIED="1307080713912" TEXT="2, br_fdb_init"/>
<node CREATED="1307080725041" ID="ID_1167568072" MODIFIED="1307080727631" TEXT="3, register_pernet_subsys(&amp;br_net_ops)"/>
<node CREATED="1307080735104" ID="ID_1385401768" MODIFIED="1307080738026" TEXT="4, br_netfilter_init"/>
<node CREATED="1307080751022" ID="ID_1944038487" MODIFIED="1307080755325" TEXT="5, register_netdevice_notifier(&amp;br_device_notifier)"/>
<node CREATED="1307080762844" ID="ID_803317152" MODIFIED="1307080765953" TEXT="6, br_netlink_init"/>
<node CREATED="1307080859311" ID="ID_1347891649" MODIFIED="1307080887879" TEXT="7, &#x5c06;hook&#x51fd;&#x6570;br_ioctl_hook&#x8bbe;&#x4e3a;br_ioctl_deviceless_stub"/>
<node CREATED="1307080859311" ID="ID_1141347282" MODIFIED="1307080921111" TEXT="8, &#x5c06;hook&#x51fd;&#x6570;br_handle_frame_hook&#x8bbe;&#x4e3a;br_ioctl_deviceless_stub"/>
</node>
</node>
<node CREATED="1400829638958" FOLDED="true" ID="ID_728101535" MODIFIED="1458868598470" TEXT="neighbour">
<node CREATED="1400831279955" FOLDED="true" ID="ID_1208216503" MODIFIED="1401285417419" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1400831327158" ID="ID_1193327334" MODIFIED="1400891682150" TEXT="neighbour&#x90bb;&#x5c45;&#x5b50;&#x7cfb;&#x7edf;&#x7684;&#x76ee;&#x7684;&#x662f;&#x5b8c;&#x6210;L3&#x5730;&#x5740;&#x5230;L2&#x5730;&#x5740;&#x7684;&#x8f6c;&#x6362;, &#x5373;&#x5730;&#x5740;&#x89e3;&#x6790;&#xa;&#x4e00;&#x4e2a;&#x90bb;&#x5c45;&#x4ee3;&#x8868;&#x4e86;&#x4e00;&#x4e2a;&#x53ef;&#x76f4;&#x8fbe;&#x7684;&#x8bbe;&#x5907;, &#x5b83;&#x4e0e;&#x4e00;&#x4e2a;L3&#x5730;&#x5740;&#x5bf9;&#x5e94;, &#x82e5;&#x6709;&#x591a;&#x4e2a;L3&#x5730;&#x5740;, &#x5219;&#x4ee3;&#x8868;&#x591a;&#x4e2a;&#x90bb;&#x5c45;"/>
<node CREATED="1400831412335" ID="ID_38545490" MODIFIED="1400831453575" TEXT="&#x5730;&#x5740;&#x89e3;&#x6790;&#x901a;&#x8fc7;&#x4ea4;&#x6362;solicitation&#x8bf7;&#x6c42;&#x548c;&#x5e94;&#x7b54;&#x6765;&#x5b8c;&#x6210;">
<node CREATED="1400831468958" ID="ID_436629747" MODIFIED="1400831470038" TEXT="solicitation&#x8bf7;&#x6c42;">
<node CREATED="1400831531680" ID="ID_378961058" MODIFIED="1400831648453" TEXT="&#x8fd9;&#x4e2a;&#x5305;&#x7528;&#x4e8e;&#x67e5;&#x8be2;&#x6240;&#x6709;&#x4e3b;&#x673a;, &#x662f;&#x5426;&#x6709;&#x4e3b;&#x673a;&#x77e5;&#x9053;L3&#x5730;&#x5740;&#x5bf9;&#x5e94;&#x7684;L2&#x5730;&#x5740;&#xa;&#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684;&#x60c5;&#x5f62;, &#x8be5;&#x5305;&#x53ef;&#x80fd;&#x4ee5;&#x5355;&#x64ad;,&#x7ec4;&#x64ad;,&#x6216;&#x5e7f;&#x64ad;&#x7684;&#x5f62;&#x5f0f;&#x53d1;&#x9001;&#x51fa;&#x53bb;"/>
</node>
<node CREATED="1400831471515" ID="ID_899568245" MODIFIED="1400831486481" TEXT="solicitation&#x5e94;&#x7b54;">
<node CREATED="1400831531680" ID="ID_1336234784" MODIFIED="1400831953196" TEXT="&#x8fd9;&#x4e2a;&#x5305;&#x4e00;&#x822c;&#x4f5c;&#x4e3a;solicitation&#x8bf7;&#x6c42;&#x7684;&#x5e94;&#x7b54;, &#x4f46;&#x7279;&#x5b9a;&#x60c5;&#x51b5;&#x4e0b;&#x4e5f;&#x53ef;&#x4ee5;&#x5355;&#x72ec;&#x4ea7;&#x751f;.&#xa;&#x4e00;&#x822c;&#x7531;&#x4e0e;&#x76ee;&#x7684;L3&#x5730;&#x5740;&#x5173;&#x8054;&#x7684;&#x4e3b;&#x673a;&#x4ea7;&#x751f;&#x8fd9;&#x4e2a;&#x5e94;&#x7b54;,&#x4f46;&#x6709;&#x65f6;&#x4e5f;&#x53ef;&#x80fd;&#x7531;&#x53e6;&#x5916;&#x7684;&#x4e3b;&#x673a;&#x4ee3;&#x66ff;&#x4ea7;&#x751f;&#x5e94;&#x7b54;(arp proxy)&#xa;&#x8be5;&#x5305;&#x4e00;&#x822c;&#x4ee5;&#x5355;&#x64ad;&#x5f62;&#x5f0f;&#x53d1;&#x9001;,&#x7279;&#x5b9a;&#x60c5;&#x51b5;&#x4e0b;&#x4e5f;&#x53ef;&#x4ee5;&#x4ee5;&#x5e7f;&#x64ad;&#x5f62;&#x5f0f;&#x53d1;&#x9001;"/>
</node>
</node>
<node CREATED="1400832343625" ID="ID_1013479086" MODIFIED="1400832371028">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_framework.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1400832430767" ID="ID_1722479128" MODIFIED="1400832782293" TEXT="&#x53d1;&#x9001;&#x4e00;&#x4e2a;&#x5305;&#x7684;&#x4e00;&#x822c;&#x8fc7;&#x7a0b; :&#xa;1, &#x9009;&#x62e9;&#x8def;&#x7531;, &#x5f97;&#x5230;&#x4e0b;&#x4e00;&#x8df3;next hop&#x7684;L3&#x5730;&#x5740;&#xa;2, &#x90bb;&#x5c45;&#x5b50;&#x7cfb;&#x7edf;&#x5c06;next hop&#x7684;L3&#x5730;&#x5740;&#x8f6c;&#x6362;&#x6210;L2&#x5730;&#x5740;, &#x5e76;&#x7f13;&#x5b58;&#x8fd9;&#x4e2a;&#x90bb;&#x5c45;&#x4ee5;&#x5907;&#x4e0b;&#x6b21;&#x4f7f;&#x7528;&#xa;3, &#x6839;&#x636e;&#x627e;&#x5230;&#x7684;neighbour&#x586b;&#x5145;L2 header&#xa;4, &#x90bb;&#x5c45;&#x5b50;&#x7cfb;&#x7edf;&#x8c03;&#x7528;dev_queue_xmit&#x5c06;&#x5305;&#x53d1;&#x9001;&#x5230;&#x6d41;&#x91cf;&#x63a7;&#x5236;&#x5373;QoS&#x6a21;&#x5757;"/>
<node CREATED="1400833091664" ID="ID_1725922590" MODIFIED="1400833599297" TEXT="&#x901a;&#x7528;&#x90bb;&#x5c45;&#x57fa;&#x7840;&#x7ed3;&#x6784;&#x53ef;&#x4ee5;&#x57fa;&#x4e8e;&#x4e0d;&#x540c;&#x7684;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;, &#x5b83;&#x4e3a;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x63d0;&#x4f9b;&#x4e86;&#x4ee5;&#x4e0b;&#x7edf;&#x4e00;&#x7684;&#x670d;&#x52a1; :&#xa;1, &#x4e3a;&#x6bcf;&#x4e2a;&#x534f;&#x8bae;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x7f13;&#x5b58;&#x6765;&#x5b58;&#x653e;L3&#x5730;&#x5740;&#x5230;L2&#x5730;&#x5740;&#x7684;&#x8f6c;&#x6362;&#x7ed3;&#x679c;&#xa;2, &#x63d0;&#x4f9b;&#x5728;&#x7f13;&#x5b58;&#x4e2d;&#x6dfb;&#x52a0;,&#x5220;&#x9664;,&#x6539;&#x53d8;,&#x67e5;&#x627e;&#x4e00;&#x4e2a;&#x7279;&#x5b9a;&#x6620;&#x5c04;&#x9879;&#x7684;&#x51fd;&#x6570;&#xa;3, &#x4e3a;&#x7f13;&#x5b58;&#x63d0;&#x4f9b;&#x8001;&#x5316;&#x673a;&#x5236;&#xa;4, &#x5f53;&#x7f13;&#x5b58;&#x6ee1;&#x65f6;&#x63d0;&#x4f9b;&#x66ff;&#x6362;&#x7b56;&#x7565;&#xa;5, &#x4e3a;&#x6bcf;&#x4e2a;&#x90bb;&#x5c45;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x8bf7;&#x6c42;&#x961f;&#x5217;, &#x5f53;&#x8981;&#x53d1;&#x9001;&#x4e00;&#x4e2a;&#x5305;&#x4f46;&#x5176;L2&#x5730;&#x5740;&#x8fd8;&#x4e0d;&#x5728;&#x7f13;&#x5b58;&#x4e2d;&#x65f6;&#x9700;&#x8981;&#x5c06;&#x5305;&#x653e;&#x5165;&#x6b64;&#x961f;&#x5217;,&#xa;    &#x76f4;&#x5230;&#x5b8c;&#x6210;&#x5730;&#x5740;&#x89e3;&#x6790;"/>
<node CREATED="1400834368193" FOLDED="true" ID="ID_1528143654" MODIFIED="1400834461973" TEXT="&#x5730;&#x5740;&#x89e3;&#x6790;&#x8fc7;&#x7a0b;">
<node CREATED="1400834387123" ID="ID_330796617" MODIFIED="1400834398404">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1400834463935" ID="ID_1223527678" MODIFIED="1400885955026" TEXT="&#x53ef;&#x5230;&#x8fbe;&#x6027; : &#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x6307;&#x7684;&#x662f;&#x4e00;&#x79cd;&#x53cc;&#x5411;&#x53ef;&#x5230;&#x8fbe;&#x6027; :&#xa;&#x65e2;&#x80fd;&#x6536;&#x5230;&#x90bb;&#x5c45;&#x7ed9;&#x6211;&#x53d1;&#x7684;&#x5305;, &#x6211;&#x53d1;&#x7ed9;&#x90bb;&#x5c45;&#x7684;&#x5305;&#x4e5f;&#x80fd;&#x88ab;&#x90bb;&#x5c45;&#x6536;&#x5230;.&#xa;&#x6709;&#x4e24;&#x79cd;&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x786e;&#x8ba4;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027; : L4&#x786e;&#x8ba4;, solicitation&#x5e94;&#x7b54;">
<node CREATED="1400890859012" ID="ID_1828818103" LINK="#ID_1654360235" MODIFIED="1400891139700" TEXT="&#x88ab;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;NUD_DELAY&#x5230;NUD_PROBE&#x8fc7;&#x7a0b;&#x4e2d;&#x4f7f;&#x7528;&#x88ab;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;">
<node CREATED="1400834660992" ID="ID_1760311945" MODIFIED="1400834674875" TEXT="L4&#x786e;&#x8ba4;"/>
<node CREATED="1400834663028" ID="ID_865752305" MODIFIED="1400834669223" TEXT="solicitation&#x5e94;&#x7b54;"/>
</node>
<node CREATED="1400890862059" ID="ID_1518068513" LINK="#ID_277110223" MODIFIED="1400891206348" TEXT="&#x4e3b;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;NUD_PROBE&#x5230;NUD_REACHABLE&#x8fc7;&#x7a0b;&#x4e2d;&#x4f7f;&#x7528;&#x4e3b;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;NUD_INCOMPLETE&#x5230;NUD_REACHABLE&#x8fc7;&#x7a0b;&#x4e2d;&#x4f7f;&#x7528;&#x4e3b;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;"/>
<node CREATED="1400887538840" ID="ID_1737746535" MODIFIED="1400887546390" TEXT="dst_confirm">
<node CREATED="1400887554461" ID="ID_1336994637" MODIFIED="1400888166488" TEXT="neigh_confirm&#xa;&#x6b64;&#x51fd;&#x6570;&#x4ec5;&#x4ec5;&#x662f;&#x5c06;neigh-&gt;confirmed&#x66f4;&#x65b0;&#x4e3a;&#x5f53;&#x524d;&#x7684;jiffies.&#x8868;&#x793a;&#x6536;&#x5230;&#x4e86;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;.&#xa;&#x800c;neighbour&#x7684;&#x72b6;&#x6001;&#x5207;&#x6362;&#x53d1;&#x751f;&#x5728;:&#xa;NUD_DELAY&#x6216;NUD_PROBE&#x6240;&#x8d77;&#x7684;&#x5b9a;&#x65f6;&#x5668;(neigh_timer_handler)&#x8d85;&#x65f6;&#x540e;"/>
</node>
</node>
<node CREATED="1400834963713" ID="ID_1429969932" MODIFIED="1400834973439" TEXT="NUD&#x72b6;&#x6001;&#x673a;">
<node CREATED="1400835108266" ID="ID_1550239939" MODIFIED="1400835120613">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_nud.png" />
  </body>
</html></richcontent>
<node CREATED="1400838684935" ID="ID_91020672" MODIFIED="1400886248605" TEXT="&#x521d;&#x59cb;&#x72b6;&#x6001;&#xa;&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;, &#x90bb;&#x5c45;&#x9879;&#x7684;&#x521d;&#x59cb;&#x72b6;&#x6001;&#x4e3a;NUD_NONE, &#xa;&#x4f46;&#x662f;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x76f8;&#x5173;&#x8bbe;&#x5907;&#x7684;&#x7279;&#x6027;(&#x70b9;&#x5230;&#x70b9;)&#x548c;L3&#x5730;&#x5740;(&#x5e7f;&#x64ad;,&#x7ec4;&#x64ad;)&#x6539;&#x53d8;&#x521d;&#x59cb;&#x72b6;&#x6001;"/>
<node CREATED="1400835197959" ID="ID_98842835" MODIFIED="1400835232704" TEXT="NUD_NONE&#xa;&#x65b0;&#x90bb;&#x5c45;&#x9879;&#x7684;&#x521d;&#x59cb;&#x72b6;&#x6001;"/>
<node CREATED="1400835468473" ID="ID_1845146044" MODIFIED="1400835576985" TEXT="NUD_INCOMPLETE&#xa;&#x5df2;&#x53d1;&#x51fa;solicitation&#x8bf7;&#x6c42;,&#x4f46;&#x8fd8;&#x672a;&#x6536;&#x5230;&#x5e94;&#x7b54;,&#x6b64;&#x65f6;L2&#x5730;&#x5740;&#x4e0d;&#x53ef;&#x7528;"/>
<node CREATED="1400835621932" ID="ID_842327943" MODIFIED="1400835712739" TEXT="NUD_REACHABLE&#xa;&#x6536;&#x5230;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x8bc1;&#x636e;(&#x5373;solicitation&#x5e94;&#x7b54;), &#x5c06;&#x90bb;&#x5c45;&#x9879;&#x653e;&#x5165;&#x7f13;&#x5b58;, &#x6b64;&#x65f6;L2&#x5730;&#x5740;&#x53ef;&#x7528;"/>
<node CREATED="1400835772124" ID="ID_1845024491" MODIFIED="1400835816826" TEXT="NUD_FAILED&#xa;solicitation&#x8bf7;&#x6c42;&#x5931;&#x8d25;, &#x90bb;&#x5c45;&#x4e0d;&#x53ef;&#x8fbe;, &#x6b64;&#x65f6;L2&#x5730;&#x5740;&#x4e0d;&#x53ef;&#x7528;"/>
<node CREATED="1400835893353" ID="ID_303070369" MODIFIED="1400839214652" TEXT="NUD_STALE&#xa;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x5df2;&#x7ecf;&#x6709;&#x4e00;&#x6bb5;&#x65f6;&#x95f4;(reachable_time)&#x6ca1;&#x6709;&#x8fdb;&#x884c;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#x4e86;, &#xa;&#x5f53;&#x4e0b;&#x4e00;&#x6b21;&#x6709;&#x5305;&#x53d1;&#x9001;&#x5230;&#x6b64;&#x90bb;&#x5c45;&#x65f6;&#x9700;&#x8981;&#x542f;&#x52a8;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;&#x6b64;&#x72b6;&#x6001;&#x4e0b;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x672a;&#x77e5;, &#x4f46;&#x5176;L2&#x5730;&#x5740;&#x53ef;&#x7528;"/>
<node CREATED="1400835887272" ID="ID_959674145" MODIFIED="1400840386829" TEXT="NUD_DELAY&#xa;&#x5f53;&#x53d1;&#x9001;&#x5305;&#x5230;&#x4e00;&#x4e2a;&#x90bb;&#x5c45;, &#x4e14;&#x6b64;&#x90bb;&#x5c45;&#x7684;&#x72b6;&#x6001;&#x662f;NUD_STALE&#x65f6;, &#x90bb;&#x5c45;&#x7acb;&#x5373;&#x8fdb;&#x5165;NUD_DELAY&#x72b6;&#x6001;, &#x5e76;&#x542f;&#x52a8;&#x4e00;&#x4e2a;&#x5b9a;&#x65f6;&#x5668;&#xa;NUD_DELAY&#x72b6;&#x6001;&#x4ee3;&#x8868;&#x4e86;&#x4e00;&#x4e2a;&#x65f6;&#x95f4;&#x7a97;&#x53e3;,&#x5728;&#x8fd9;&#x4e2a;&#x7a97;&#x53e3;&#x671f;&#x5185;&#x8fdb;&#x884c;&#x88ab;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;&#x6b64;&#x72b6;&#x6001;&#x4e0b;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x672a;&#x77e5;, &#x4f46;&#x5176;L2&#x5730;&#x5740;&#x53ef;&#x7528;">
<node CREATED="1400839569669" ID="ID_1654360235" MODIFIED="1400839813306" TEXT="&#x88ab;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;&#x5e76;&#x4e0d;&#x4e3b;&#x52a8;&#x53d1;&#x9001;solicitation&#x8bf7;&#x6c42;, &#x53ea;&#x662f;&#x76d1;&#x542c;&#x90bb;&#x5c45;&#x662f;&#x5426;&#x53d1;&#x51fa;&#x4e86;&#x5305;, &#x82e5;&#x90bb;&#x5c45;&#x53d1;&#x51fa;&#x4e86;&#x5305;, &#x5219;&#x8868;&#x660e;&#x5b83;&#x4ecd;&#x5728;&#x8fd0;&#x884c;&#x4e14;&#x53ef;&#x5230;&#x8fbe;&#xa;&#x6b64;&#x72b6;&#x6001;&#x4e0b;&#x76d1;&#x542c;&#x7684;&#x5305;&#x5305;&#x62ec; : solicitation&#x5e94;&#x7b54;, L4&#x786e;&#x8ba4;">
<node CREATED="1400840790812" ID="ID_1740350816" MODIFIED="1400886401616" TEXT="solicitation&#x5e94;&#x7b54;&#xa;&#x6536;&#x5230;&#x7684;&#x5355;&#x64ad;solicitation&#x5e94;&#x7b54;&#x4ee3;&#x8868;&#x4e86;&#x53cc;&#x5411;&#x7684;&#x53ef;&#x8fbe;&#x6027;, &#x56e0;&#x6b64;&#x72b6;&#x6001;&#x4ece;NUD_DELAY&#x5207;&#x6362;&#x5230;NUD_REACHABLE&#xa;&#x6536;&#x5230;&#x7684;&#x5e7f;&#x64ad;solicitation&#x5e94;&#x7b54;&#x4ee3;&#x8868;&#x4e86;&#x5355;&#x5411;(&#x90bb;&#x5c45;&#x5230;&#x6211;)&#x7684;&#x53ef;&#x8fbe;&#x6027;, &#x56e0;&#x6b64;&#x72b6;&#x6001;&#x4ece;NUD_DELAY&#x5207;&#x6362;&#x5230;NUD_STALE"/>
<node CREATED="1400840803122" ID="ID_1166437551" MODIFIED="1400887458377" TEXT="L4&#x786e;&#x8ba4;&#xa;&#x5f53;&#x90bb;&#x5c45;&#x786e;&#x8ba4;&#x6211;&#x53d1;&#x7ed9;&#x5b83;&#x7684;&#x5305;&#x540e;, &#x6211;&#x4e0e;&#x90bb;&#x5c45;&#x7684;&#x53cc;&#x5411;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x5c31;&#x5f97;&#x5230;&#x4e86;&#x786e;&#x8ba4;.&#xa;L4&#x786e;&#x8ba4;&#x5305;&#x62ec;&#x4e0d;&#x540c;&#x60c5;&#x5f62;,&#x5176;&#x4e2d;&#x4e00;&#x79cd;&#x5c31;&#x662f;&#x5c31;&#x662f;&#x6536;&#x5230;&#x90bb;&#x5c45;TCP SYN/ACK&#x5305;">
<node CREATED="1400888265325" ID="ID_585024274" MODIFIED="1400888477942" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x4ec5;&#x4ec5;&#x6536;&#x5230;&#x90bb;&#x5c45;&#x53d1;&#x51fa;&#x7684;&#x5305;&#x8fd8;&#x4e0d;&#x80fd;&#x786e;&#x8ba4;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027; ?&#xa;&#x6536;&#x5230;&#x90bb;&#x5c45;&#x53d1;&#x51fa;&#x7684;&#x5305;&#x53ea;&#x80fd;&#x8bc1;&#x660e;&#x90bb;&#x5c45;&#x5230;&#x6211;&#x7684;&#x8def;&#x5f84;&#x662f;&#x901a;&#x7684;, &#x4e0d;&#x80fd;&#x8bc1;&#x660e;&#x6211;&#x5230;&#x90bb;&#x5c45;&#x7684;&#x8def;&#x5f84;&#x662f;&#x901a;&#x7684;&#xa;&#x600e;&#x4e48;&#x8bc1;&#x660e;&#x6211;&#x5230;&#x90bb;&#x5c45;&#x7684;&#x8def;&#x5f84;&#x662f;&#x901a;&#x7684;&#x5462; ? &#x90a3;&#x5c31;&#x662f;&#x6211;&#x6536;&#x5230;&#x90bb;&#x5c45;&#x5bf9;&#x6211;&#x53d1;&#x7ed9;&#x5b83;&#x7684;&#x5305;&#x7684;&#x786e;&#x8ba4;"/>
</node>
</node>
</node>
<node CREATED="1400835924179" ID="ID_1466356535" MODIFIED="1400840392748" TEXT="NUD_PROBE&#xa;&#x5728;&#x90bb;&#x5c45;&#x7684;NUD_DELAY&#x7a97;&#x53e3;&#x671f;&#x5185;&#x6ca1;&#x6709;&#x6536;&#x5230;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;&#x540e;&#x8fdb;&#x5165;NUD_PROBE&#x72b6;&#x6001;, &#x5e76;&#x542f;&#x52a8;&#x4e00;&#x4e2a;&#x5b9a;&#x65f6;&#x5668;&#xa;NUD_PROBE&#x72b6;&#x6001;&#x4ee3;&#x8868;&#x4e86;&#x4e00;&#x4e2a;&#x65f6;&#x95f4;&#x7a97;&#x53e3;,&#x5728;&#x8fd9;&#x4e2a;&#x7a97;&#x53e3;&#x671f;&#x5185;&#x8fdb;&#x884c;&#x4e3b;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;&#x6b64;&#x72b6;&#x6001;&#x4e0b;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x672a;&#x77e5;, &#x4f46;&#x5176;L2&#x5730;&#x5740;&#x53ef;&#x7528;">
<node CREATED="1400840118034" ID="ID_277110223" MODIFIED="1400840353811" TEXT="&#x4e3b;&#x52a8;&#x7684;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x786e;&#x8ba4;&#xa;&#x4e3b;&#x52a8;&#x53d1;&#x9001;solicitation&#x8bf7;&#x6c42;, &#x5e76;&#x5c1d;&#x8bd5;&#x591a;&#x6b21;, &#x76f4;&#x5230;&#x6536;&#x5230;solicitation&#x5e94;&#x7b54;, &#x6216;&#x5c1d;&#x8bd5;&#x6b21;&#x6570;&#x5230;&#x8fbe;&#x4e0a;&#x9650;&#xa;&#x6536;&#x5230;solicitation&#x5e94;&#x7b54;&#x540e;&#x8fdb;&#x5165;NUD_REACHABLE&#x72b6;&#x6001;, &#x82e5;&#x5c1d;&#x8bd5;&#x6b21;&#x6570;&#x5230;&#x8fbe;&#x4e0a;&#x9650;&#x540e;&#x4ecd;&#x672a;&#x6536;&#x5230;solicitation&#x5e94;&#x7b54;&#x5219;&#x8fdb;&#x5165;NUD_FAILED&#x72b6;&#x6001;"/>
</node>
<node CREATED="1400835940612" ID="ID_181553622" MODIFIED="1400837817718" TEXT="NUD_PERMANENT&#xa;neighbour&#x9879;&#x662f;&#x7528;&#x6237;&#x9759;&#x6001;&#x914d;&#x7f6e;&#x7684;,&#x65e0;&#x987b;&#x4f7f;&#x7528;&#x90bb;&#x5c45;&#x534f;&#x8bae;&#x89e3;&#x6790;L2&#x5730;&#x5740;&#xa;&#x4e00;&#x65e6;&#x8fdb;&#x5165;&#x6b64;&#x72b6;&#x6001;&#x5219;&#x4e0d;&#x518d;&#x8f6c;&#x79fb;&#x5230;&#x5176;&#x4ed6;&#x72b6;&#x6001;"/>
<node CREATED="1400837671225" ID="ID_1368385593" MODIFIED="1400837913414" TEXT="NUD_NOARP&#xa;&#x7528;&#x4e8e;&#x6807;&#x8bb0;&#x65e0;&#x987b;&#x4f7f;&#x7528;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x8fdb;&#x884c;L3&#x5230;L2&#x5730;&#x5740;&#x6620;&#x5c04;&#x7684;&#x90bb;&#x5c45;&#xa;&#x4e00;&#x65e6;&#x8fdb;&#x5165;&#x6b64;&#x72b6;&#x6001;&#x5219;&#x4e0d;&#x518d;&#x8f6c;&#x79fb;&#x5230;&#x5176;&#x4ed6;&#x72b6;&#x6001;"/>
<node CREATED="1400837969226" ID="ID_1293519713" MODIFIED="1400838454431" TEXT="&#x6d3e;&#x751f;&#x72b6;&#x6001; : NUD_VALID&#xa;&#x5df2;&#x5b8c;&#x6210;&#x5730;&#x5740;&#x89e3;&#x6790;, &#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x6709;&#x5f85;&#x786e;&#x8ba4;, &#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x53ef;&#x7528;">
<node CREATED="1400837995735" ID="ID_655577681" MODIFIED="1400838027585" TEXT="(NUD_PERMANENT | NUD_NOARP | NUD_REACHABLE | NUD_PROBE | NUD_STALE | NUD_DELAY)"/>
</node>
<node CREATED="1400838172997" ID="ID_1282711866" MODIFIED="1400838425891" TEXT="&#x6d3e;&#x751f;&#x72b6;&#x6001; : NUD_CONNECTED&#xa;&#x8fd9;&#x4e2a;&#x72b6;&#x6001;&#x662f;NUD_VALID&#x7684;&#x5b50;&#x72b6;&#x6001;&#xa;&#x5df2;&#x5b8c;&#x6210;&#x5730;&#x5740;&#x89e3;&#x6790;, &#x5df2;&#x786e;&#x8ba4;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;, &#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x53ef;&#x7528;">
<node CREATED="1400838205068" ID="ID_1656624721" MODIFIED="1400838217025" TEXT="(NUD_PERMANENT | NUD_NOARP | NUD_REACHABLE)"/>
</node>
<node CREATED="1400838474979" ID="ID_1888086016" MODIFIED="1400838625123" TEXT="&#x6d3e;&#x751f;&#x72b6;&#x6001; : NUD_IN_TIMER&#xa;&#x90bb;&#x5c45;&#x9879;&#x5173;&#x8054;&#x4e86;&#x4e00;&#x4e2a;&#x5b9a;&#x65f6;&#x5668;">
<node CREATED="1400838494911" ID="ID_473569006" MODIFIED="1400838509968" TEXT="(NUD_INCOMPLETE | NUD_REACHABLE | NUD_DELAY | NUD_PROBE)"/>
</node>
</node>
</node>
</node>
<node CREATED="1400829713608" FOLDED="true" ID="ID_1534835734" MODIFIED="1458854634534" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1400830247470" FOLDED="true" ID="ID_1142018261" MODIFIED="1401281862783" TEXT="struct neigh_table&#xa;&#x5bf9;&#x5e94;&#x4e86;&#x4e00;&#x79cd;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;, &#x63cf;&#x8ff0;&#x4e86;&#x6b64;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x6240;&#x4f7f;&#x7528;&#x7684;&#x53c2;&#x6570;&#x548c;&#x51fd;&#x6570;&#xa;&#x6240;&#x6709;&#x7684;&#x90bb;&#x5c45;&#x8868;&#x90fd;&#x5b58;&#x653e;&#x5728;&#x5168;&#x5c40;&#x53d8;&#x91cf;neigh_tables&#x4e2d;">
<node CREATED="1400830247470" MODIFIED="1400830247470" TEXT=" struct neigh_table *next"/>
<node CREATED="1400830247470" ID="ID_1846689652" MODIFIED="1400830247470" TEXT=" int family">
<node CREATED="1401031989704" ID="ID_1964178547" MODIFIED="1401031990720" TEXT="AF_INET"/>
<node CREATED="1401031991227" ID="ID_680269870" MODIFIED="1401032010253" TEXT="AF_INET6"/>
</node>
<node CREATED="1400830247470" MODIFIED="1400830247470" TEXT=" int entry_size"/>
<node CREATED="1400830247471" ID="ID_564510373" MODIFIED="1401031841678" TEXT=" int key_len&#xa;&#x6307;&#x5b9a;&#x4e86;neighbour -&gt; primary_key&#x5373;L3&#x5730;&#x5740;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1400830247471" ID="ID_1115404523" MODIFIED="1401031354015" TEXT=" __u32 (*hash)(const void *pkey, const struct net_device *dev, __u32 *hash_rnd)&#xa;&#x8ba1;&#x7b97;&#x90bb;&#x5c45;hash&#x503c;&#x7684;&#x51fd;&#x6570;"/>
<node CREATED="1400830247471" ID="ID_812530994" MODIFIED="1401031753450" TEXT=" int (*constructor)(struct neighbour *)&#xa;neighbour_create&#x51fd;&#x6570;&#x5728;&#x521b;&#x5efa;&#x90bb;&#x5c45;&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#x4f1a;&#x8c03;&#x7528;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x7684;constructor&#x51fd;&#x6570;&#x8ba9;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x4e5f;&#x53c2;&#x4e0e;&#x5230;&#x90bb;&#x5c45;&#x7684;&#x521b;&#x5efa;&#x8fc7;&#x7a0b;&#x4e2d;, &#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x5728;&#x90bb;&#x5c45;&#x521b;&#x5efa;&#x8fc7;&#x7a0b;&#x4e2d;&#x7684;&#x4efb;&#x52a1;&#x662f;:&#xa;0, &#x521d;&#x59cb;&#x5316;&#x90bb;&#x5c45;&#x534f;&#x8bae;&#x7684;&#x53ef;&#x8c03;&#x6574;&#x53c2;&#x6570;neighour-&gt;parms&#xa;1, &#x8bbe;&#x7f6e;&#x90bb;&#x5c45;&#x7684;&#x521d;&#x59cb;&#x72b6;&#x6001;&#xa;2, &#x8bbe;&#x7f6e;&#x90bb;&#x5c45;&#x7684;neighbour -&gt; ops&#xa;3, &#x521d;&#x59cb;&#x5316;&#x90bb;&#x5c45;&#x7684;&#x8f93;&#x51fa;&#x51fd;&#x6570;neighbour -&gt; output"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" int (*pconstructor)(struct pneigh_entry *)"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" void (*pdestructor)(struct pneigh_entry *)"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" void (*proxy_redo)(struct sk_buff *skb)"/>
<node CREATED="1400830247471" ID="ID_480782024" MODIFIED="1401281851235" TEXT=" char *id&#xa;&#x534f;&#x8bae;&#x540d;&#x79f0;"/>
<node CREATED="1400830247471" ID="ID_1718181371" MODIFIED="1400895066926" TEXT=" struct neigh_parms parms&#xa;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x7684;&#x53ef;&#x8c03;&#x6574;&#x53c2;&#x6570;"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" int gc_interval"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" int gc_thresh1"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" int gc_thresh2"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" int gc_thresh3"/>
<node CREATED="1400830247471" MODIFIED="1400830247471" TEXT=" unsigned long last_flush"/>
<node CREATED="1400830247472" ID="ID_897539362" MODIFIED="1401034133707" TEXT=" struct delayed_work gc_work&#xa;&#x5783;&#x573e;&#x56de;&#x6536;&#x5b9a;&#x65f6;&#x5668;">
<node CREATED="1401034135364" ID="ID_1106919886" MODIFIED="1401034136804" TEXT="neigh_periodic_work"/>
</node>
<node CREATED="1400830247472" ID="ID_1786256226" MODIFIED="1400830247472" TEXT=" struct timer_list proxy_timer"/>
<node CREATED="1400830247472" ID="ID_1033800225" MODIFIED="1400830247472" TEXT=" struct sk_buff_head proxy_queue"/>
<node CREATED="1400830247472" MODIFIED="1400830247472" TEXT=" atomic_t entries"/>
<node CREATED="1400830247472" MODIFIED="1400830247472" TEXT=" rwlock_t lock"/>
<node CREATED="1400830247472" MODIFIED="1400830247472" TEXT=" unsigned long last_rand"/>
<node CREATED="1400830247472" ID="ID_1474656964" MODIFIED="1400830247472" TEXT=" struct neigh_statistics __percpu *stats"/>
<node CREATED="1400830247472" FOLDED="true" ID="ID_300560497" MODIFIED="1401281861139" TEXT=" struct neigh_hash_table __rcu *nht&#xa;&#x5b58;&#x653e;struct neighbour&#x7ed3;&#x6784;&#x7684;hash&#x8868;">
<node CREATED="1400909504247" ID="ID_960117621" MODIFIED="1400909514232" TEXT="struct neighbour **hash_buckets"/>
<node CREATED="1400909527266" ID="ID_1311015706" MODIFIED="1400909533515" TEXT="unsigned int hash_shift"/>
<node CREATED="1400909548587" ID="ID_1223855140" MODIFIED="1400909554788" TEXT="__u32 hash_rnd"/>
<node CREATED="1400909567429" ID="ID_1913227656" MODIFIED="1400909585493" TEXT="struct rcu_head rcu"/>
</node>
<node CREATED="1400830247472" MODIFIED="1400830247472" TEXT=" struct pneigh_entry **phash_buckets"/>
</node>
<node CREATED="1400830247472" FOLDED="true" ID="ID_839286285" MODIFIED="1401289996799" TEXT="struct neigh_parms&#xa;&#x5bf9;&#x6bcf;&#x4e2a;&#x8bbe;&#x5907;&#x4e0a;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x884c;&#x4e3a;&#x8fdb;&#x884c;&#x8c03;&#x6574;&#x7684;&#x4e00;&#x7ec4;&#x53c2;&#x6570;.&#xa;&#x6bcf;&#x4e2a;&#x8bbe;&#x5907;&#x4e0a;&#x53ef;&#x4ee5;&#x8fd0;&#x884c;&#x591a;&#x79cd;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;, &#x5982;IPv4&#x7684;arp&#x548c;IPv6&#x7684;ND, &#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x7684;&#x6bcf;&#x79cd;&#x534f;&#x8bae;&#x5747;&#x5bf9;&#x5e94;&#x4e86;&#x4e00;&#x4e2a;&#x6b64;&#x7ed3;&#x6784;&#xa;struct net_device *dev -&gt; ip_ptr -&gt; arp_parms&#xa;struct net_device *dev -&gt; ip6_ptr -&gt; nd_parms&#xa;&#x6bcf;&#x79cd;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x4e5f;&#x6709;&#x4e00;&#x5957;&#x6b64;&#x53c2;&#x6570;, &#x5b83;&#x4f5c;&#x4e3a;&#x6bcf;&#x4e2a;&#x8bbe;&#x5907;&#x4e0a;&#x5bf9;&#x5e94;&#x534f;&#x8bae;&#x7684;&#x9ed8;&#x8ba4;&#x503c; :&#xa;arp_tbl.parms&#xa;nd_tbl.parms">
<node CREATED="1400830247472" MODIFIED="1400830247472" TEXT=" struct net *net"/>
<node CREATED="1400830247472" MODIFIED="1400830247472" TEXT=" struct net_device *dev"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" struct neigh_parms *next"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" int (*neigh_setup)(struct neighbour *)"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" void (*neigh_cleanup)(struct neighbour *)"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" struct neigh_table *tbl"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" void *sysctl_table"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" int dead"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" atomic_t refcnt"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" struct rcu_head rcu_head"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" int base_reachable_time"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" int retrans_time"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" int gc_staletime"/>
<node CREATED="1400830247473" MODIFIED="1400830247473" TEXT=" int reachable_time"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int delay_probe_time"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int queue_len_bytes"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int ucast_probes"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int app_probes"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int mcast_probes"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int anycast_delay"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int proxy_delay"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int proxy_qlen"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" int locktime"/>
</node>
<node CREATED="1400829824786" FOLDED="true" ID="ID_744561957" MODIFIED="1401290176446" TEXT="struct neighbour">
<node CREATED="1400830247470" ID="ID_1230632342" MODIFIED="1400830247470" TEXT=" struct neighbour __rcu *next"/>
<node CREATED="1400892357218" ID="ID_1731899839" LINK="#ID_1142018261" MODIFIED="1400894424713" TEXT=" struct neigh_table *tbl&#xa;&#x6240;&#x5c5e;&#x7684;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;"/>
<node CREATED="1400893325030" ID="ID_614084975" LINK="#ID_839286285" MODIFIED="1400894459493" TEXT="struct neigh_parms *parms&#xa;&#x6240;&#x5c5e;&#x7684;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x7684;&#x53ef;&#x8c03;&#x6574;&#x53c2;&#x6570;"/>
<node CREATED="1400830247474" ID="ID_1055852671" MODIFIED="1400980949159" TEXT=" unsigned long confirmed&#xa;&#x6700;&#x8fd1;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x53d8;&#x4e3a;NUD_CONNECTED&#x7684;&#x65f6;&#x95f4;"/>
<node CREATED="1400830247474" ID="ID_681887522" MODIFIED="1400980970403" TEXT=" unsigned long updated&#xa;&#x6700;&#x8fd1;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x6539;&#x53d8;&#x7684;&#x65f6;&#x95f4;"/>
<node CREATED="1400830247474" MODIFIED="1400830247474" TEXT=" rwlock_t lock"/>
<node CREATED="1400830247475" ID="ID_992509263" MODIFIED="1401034355557" TEXT=" atomic_t refcnt&#xa;&#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
<node CREATED="1400830247475" ID="ID_316338882" MODIFIED="1400981599048" TEXT=" struct sk_buff_head arp_queue&#xa;&#x5305;&#x961f;&#x5217;, &#x7528;&#x4e8e;&#x5b58;&#x653e;&#x7b49;&#x5f85;&#x53d1;&#x5f80;&#x6b64;&#x90bb;&#x5c45;&#x7684;&#x5305;"/>
<node CREATED="1400830247475" ID="ID_1197859936" MODIFIED="1400981624915" TEXT=" unsigned int arp_queue_len_bytes&#xa;&#x4e0a;&#x9762;&#x7684;&#x5305;&#x961f;&#x5217;&#x7684;&#x5b57;&#x8282;&#x6570;&#x957f;&#x5ea6;"/>
<node CREATED="1400830247475" ID="ID_282028469" MODIFIED="1401032904424" TEXT=" struct timer_list timer&#xa;&#x6b64;&#x5b9a;&#x65f6;&#x5668;&#x7528;&#x4e8e;&#x89e6;&#x53d1;&#x90bb;&#x5c45;&#x7684;&#x72b6;&#x6001;&#x8f6c;&#x6362;">
<node CREATED="1401032953290" ID="ID_1926484507" MODIFIED="1401032954577" TEXT="neigh_timer_handler"/>
</node>
<node CREATED="1400830247475" MODIFIED="1400830247475" TEXT=" unsigned long used"/>
<node CREATED="1400830247475" ID="ID_515421345" MODIFIED="1401033292123" TEXT=" atomic_t probes&#xa;&#x6700;&#x591a;&#x5141;&#x8bb8;&#x5c1d;&#x8bd5;&#x51e0;&#x6b21;solicitation&#x8bf7;&#x6c42;"/>
<node CREATED="1400830247475" ID="ID_1875625986" MODIFIED="1400830247475" TEXT=" __u8 flags">
<node CREATED="1400979028604" ID="ID_1857895496" MODIFIED="1400979030036" TEXT="NTF_USE"/>
<node CREATED="1400979041188" ID="ID_707704253" MODIFIED="1400979042268" TEXT="NTF_PROXY"/>
<node CREATED="1400979051399" ID="ID_1037806012" MODIFIED="1400979052511" TEXT="NTF_ROUTER"/>
</node>
<node CREATED="1400830247475" ID="ID_659362070" MODIFIED="1400830247475" TEXT=" __u8 nud_state">
<node CREATED="1401031229936" ID="ID_751383321" MODIFIED="1401031232021" TEXT="NUD_INCOMPLETE"/>
<node CREATED="1401031237909" ID="ID_1653900679" MODIFIED="1401031238957" TEXT="NUD_REACHABLE"/>
<node CREATED="1401031244547" ID="ID_228475122" MODIFIED="1401031244850" TEXT="NUD_STALE"/>
<node CREATED="1401031250719" ID="ID_1804638492" MODIFIED="1401031250889" TEXT="NUD_DELAY"/>
<node CREATED="1401031257393" ID="ID_780246586" MODIFIED="1401031257594" TEXT="NUD_PROBE"/>
<node CREATED="1401031264846" ID="ID_1347270403" MODIFIED="1401031266007" TEXT="NUD_FAILED"/>
<node CREATED="1401031270945" ID="ID_655793700" MODIFIED="1401031271236" TEXT="NUD_NOARP"/>
<node CREATED="1401031277359" ID="ID_1388932816" MODIFIED="1401031278227" TEXT="NUD_PERMANENT"/>
<node CREATED="1401031285428" ID="ID_812378953" MODIFIED="1401031285707" TEXT="NUD_NONE"/>
</node>
<node CREATED="1400830247475" ID="ID_16143364" MODIFIED="1400830247475" TEXT=" __u8 type">
<node CREATED="1400943001625" ID="ID_1302144154" MODIFIED="1400943003763" TEXT="RTN_BROADCAST"/>
<node CREATED="1400943013273" ID="ID_1223689535" MODIFIED="1400943014602" TEXT="RTN_MULTICAST"/>
<node CREATED="1400943023735" ID="ID_1818870846" MODIFIED="1400943025988" TEXT="RTN_UNICAST"/>
</node>
<node CREATED="1400830247475" ID="ID_858588142" MODIFIED="1401034336943" TEXT=" __u8 dead&#xa;&#x90bb;&#x5c45;&#x88ab;&#x6807;&#x8bb0;&#x4e3a;&#x5373;&#x5c06;&#x5220;&#x9664;,&#x4f46;&#x662f;&#x56e0;&#x4e3a;&#x8fd8;&#x88ab;&#x522b;&#x4eba;&#x5f15;&#x7528;&#x7740;,&#xa;&#x6682;&#x65f6;&#x8fd8;&#x4e0d;&#x80fd;&#x5220;&#x9664;&#x8fd9;&#x4e2a;&#x7ed3;&#x6784;,&#x5fc5;&#x987b;&#x7b49;&#x5230;&#x6240;&#x6709;&#x5f15;&#x7528;&#x7ed3;&#x675f;&#x540e;&#x7531;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x56de;&#x6536;"/>
<node CREATED="1400830247475" MODIFIED="1400830247475" TEXT=" seqlock_t ha_lock"/>
<node CREATED="1400830247475" ID="ID_327828869" MODIFIED="1400946556678" TEXT=" unsigned char ha[ALIGN(MAX_ADDR_LEN, sizeof(unsigned long))]&#xa;L2 &#x76ee;&#x7684;&#x5730;&#x5740;"/>
<node CREATED="1400830247476" ID="ID_499992862" MODIFIED="1400947809124" TEXT=" struct hh_cache hh&#xa;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;, &#x5305;&#x62ec;&#x6e90;mac&#x548c;&#x76ee;&#x7684;mac">
<node CREATED="1400830247476" MODIFIED="1400830247476" TEXT=" u16 hh_len"/>
<node CREATED="1400830247476" MODIFIED="1400830247476" TEXT=" u16 __pad"/>
<node CREATED="1400830247476" MODIFIED="1400830247476" TEXT=" seqlock_t hh_lock"/>
<node CREATED="1400830247476" MODIFIED="1400830247476" TEXT=" unsigned long hh_data[xxx]"/>
</node>
<node CREATED="1400830247476" ID="ID_964200330" MODIFIED="1400910680811" TEXT=" int (*output)(struct neighbour *, struct sk_buff *)&#xa;&#x4e0e;L3&#x534f;&#x8bae;, &#x5982;IPv4&#x548c;IPv6, &#x4e4b;&#x95f4;&#x7684;&#x63a5;&#x53e3;&#xa;L3&#x534f;&#x8bae;&#x7528;&#x6b64;&#x63a5;&#x53e3;&#x6765;&#x95f4;&#x63a5;&#x5730;&#x8c03;&#x7528;dev_queue_xmit&#xa;&#x800c;&#x6b64;&#x63a5;&#x53e3;&#x5728;&#x8c03;&#x7528;dev_queue_xmit&#x4e4b;&#x524d;&#x4f1a;&#x5c01;&#x88c5;&#x597d;L2&#x5934;&#x90e8;&#xa;&#x6b64;&#x63a5;&#x53e3;&#x6839;&#x636e;&#x90bb;&#x5c45;&#x7684;&#x4e0d;&#x540c;&#x72b6;&#x6001;&#x4f1a;&#x6307;&#x5411;neighbour -&gt; ops &#x4e2d;4&#x4e2a;output&#x51fd;&#x6570;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;"/>
<node CREATED="1400830247476" ID="ID_1889209670" MODIFIED="1400910732584" TEXT=" const struct neigh_ops *ops&#xa;&#x4e0a;&#x9762;output&#x51fd;&#x6570;&#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;, &#x6839;&#x636e;&#x90bb;&#x5c45;&#x7684;&#x4e0d;&#x540c;&#x72b6;&#x6001;&#x9009;&#x62e9;&#x8fd9;4&#x4e2a;&#x51fd;&#x6570;&#x4e4b;&#x4e00;">
<node CREATED="1400830247476" MODIFIED="1400830247476" TEXT=" int family"/>
<node CREATED="1400830247476" ID="ID_1883228511" MODIFIED="1401033840978" TEXT=" void (*solicit)(struct neighbour *, struct sk_buff *)&#xa;&#x7528;&#x4e8e;&#x53d1;&#x9001;solicitation&#x8bf7;&#x6c42;, skb&#x662f;&#x89e6;&#x53d1;&#x6b64;solicitation&#x8bf7;&#x6c42;&#x7684;&#x5305;"/>
<node CREATED="1400830247476" ID="ID_1447681877" MODIFIED="1401290101802" TEXT=" void (*error_report)(struct neighbour *, struct sk_buff *)&#xa;&#x5f53;&#x90bb;&#x5c45;&#x9879;&#x8fdb;&#x5165;NUD_FAILED&#x72b6;&#x6001;&#x65f6;, &#x90bb;&#x5c45;&#x5c42;&#x8c03;&#x7528;&#x6b64;&#x51fd;&#x6570;&#x901a;&#x77e5;L3&#x534f;&#x8bae;&#x5305;&#x53d1;&#x9001;&#x5931;&#x8d25;"/>
<node CREATED="1400830247476" ID="ID_1716292043" MODIFIED="1401290169704" TEXT=" int (*output)(struct neighbour *, struct sk_buff *)&#xa;&#x5f53;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x6709;&#x5f85;&#x786e;&#x8ba4;&#x65f6;&#x5c06; neigh-&gt;output &#x8bbe;&#x7f6e;&#x4e3a; neigh-&gt;ops-&gt;output&#xa;&#x8868;&#x793a;&#x5728;&#x53d1;&#x5305;&#x524d;&#x5e94;&#x542f;&#x52a8;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;"/>
<node CREATED="1400830247476" ID="ID_1369391480" MODIFIED="1400947200155" TEXT=" int (*connected_output)(struct neighbour *, struct sk_buff *)&#xa;&#x5f53;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x5df2;&#x5f97;&#x5230;&#x786e;&#x8ba4;&#x65f6;&#x5c06; neigh-&gt;output &#x8bbe;&#x7f6e;&#x4e3a; neigh-&gt;ops-&gt;connected_output&#xa;&#x8868;&#x793a;&#x65e0;&#x987b;&#x5728;&#x53d1;&#x5305;&#x7684;&#x65f6;&#x5019;&#x542f;&#x52a8;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;"/>
</node>
<node CREATED="1400830247477" ID="ID_1957187629" MODIFIED="1400830247477" TEXT=" struct rcu_head rcu"/>
<node CREATED="1400830247477" ID="ID_485934274" MODIFIED="1400894949626" TEXT=" struct net_device *dev&#xa;&#x6b64;&#x90bb;&#x5c45;&#x5173;&#x8054;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;, &#x5373;&#x7ecf;&#x7531;&#x54ea;&#x4e2a;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x624d;&#x80fd;&#x5230;&#x8fbe;&#x6b64;&#x90bb;&#x5c45;"/>
<node CREATED="1400830247477" ID="ID_1187077238" MODIFIED="1401031885048" TEXT=" u8 primary_key[0]&#xa;&#x90bb;&#x5c45;&#x5bf9;&#x5e94;&#x7684;L3&#x5730;&#x5740;, &#x5176;&#x957f;&#x5ea6;&#x7531;neigh_table -&gt; key_len&#x6307;&#x5b9a;"/>
</node>
</node>
<node CREATED="1400892512608" ID="ID_343002307" MODIFIED="1400892517267" TEXT="&#x5168;&#x5c40;&#x53d8;&#x91cf;">
<node CREATED="1400892636833" ID="ID_1137604105" MODIFIED="1400892791259" TEXT="struct neigh_table *neigh_tables&#xa;&#x5bf9;&#x6b64;&#x8868;&#x7684;&#x8bbf;&#x95ee;&#x9700;&#x8981;&#x7528;&#x9501;neigh_tbl_lock&#x6765;&#x4fdd;&#x62a4;"/>
<node CREATED="1401281981370" ID="ID_1394410126" MODIFIED="1401281983459" TEXT="struct neigh_table arp_tbl"/>
<node CREATED="1401281981370" ID="ID_441365408" MODIFIED="1401282057952" TEXT="struct neigh_table nd_tbl"/>
</node>
<node CREATED="1400896915673" ID="ID_1233919355" MODIFIED="1401032121872" TEXT="&#x63a5;&#x53e3;">
<node CREATED="1400896948696" FOLDED="true" ID="ID_1913511062" MODIFIED="1401289989957" TEXT="&#x4e0e;L3&#x534f;&#x8bae;&#x7684;&#x63a5;&#x53e3;">
<node CREATED="1400897011203" ID="ID_1861912062" MODIFIED="1400902434797">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_3.jpeg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1400910758466" ID="ID_398908269" MODIFIED="1400910772846" TEXT="neighbour -&gt; output"/>
</node>
<node CREATED="1401032347756" FOLDED="true" ID="ID_93708060" MODIFIED="1458777946312" TEXT="&#x67e5;&#x627e;&#x90bb;&#x5c45;">
<node CREATED="1401032129922" ID="ID_1530818721" MODIFIED="1401032257998" TEXT="neigh_lookup&#xa;&#x7528;L3&#x5730;&#x5740;&#x548c;&#x51fa;&#x53e3;&#x8bbe;&#x5907;&#x4f5c;&#x4e3a;key&#x67e5;&#x627e;&#x90bb;&#x5c45;, &#x82e5;&#x627e;&#x5230;&#x5219;&#x8fd4;&#x56de;&#x7684;&#x90bb;&#x5c45;&#x7684;&#x8ba1;&#x6570;&#x5668;&#x5df2;&#x88ab;&#x52a0;1"/>
<node CREATED="1401032129922" ID="ID_916827951" MODIFIED="1401032385685" TEXT="neigh_lookup_nodev&#xa;&#x7528;L3&#x5730;&#x5740;&#x4f5c;&#x4e3a;key&#x67e5;&#x627e;&#x90bb;&#x5c45;, &#x82e5;&#x627e;&#x5230;&#x5219;&#x8fd4;&#x56de;&#x7684;&#x90bb;&#x5c45;&#x7684;&#x8ba1;&#x6570;&#x5668;&#x5df2;&#x88ab;&#x52a0;1"/>
<node CREATED="1401032448252" ID="ID_640407892" MODIFIED="1401032519379" TEXT="__neigh_lookup&#xa;&#x662f;&#x5bf9;neigh_lookup&#x7684;&#x5c01;&#x88c5;, &#x533a;&#x522b;&#x662f;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x5728;&#x67e5;&#x627e;&#x5931;&#x8d25;&#x65f6;&#x662f;&#x5426;&#x521b;&#x5efa;&#x65b0;&#x7684;&#x90bb;&#x5c45;&#x9879;"/>
<node CREATED="1401032553213" ID="ID_607050106" MODIFIED="1401032595705" TEXT="__neigh_lookup_errno&#xa;&#x4e5f;&#x662f;&#x5bf9;neigh_lookup&#x7684;&#x5c01;&#x88c5;, &#x533a;&#x522b;&#x662f;&#x5728;&#x67e5;&#x627e;&#x5931;&#x8d25;&#x65f6;&#x5fc5;&#x5b9a;&#x521b;&#x5efa;&#x65b0;&#x7684;&#x90bb;&#x5c45;&#x9879;"/>
</node>
<node CREATED="1401032641588" FOLDED="true" ID="ID_13998889" MODIFIED="1458854630705" TEXT="&#x521b;&#x5efa;&#x90bb;&#x5c45;">
<node CREATED="1401112563169" ID="ID_599795273" MODIFIED="1401112579669" TEXT="&#x4ec0;&#x4e48;&#x60c5;&#x51b5;&#x4e0b;&#x4f1a;&#x521b;&#x5efa;&#x90bb;&#x5c45;">
<node CREATED="1401112937022" ID="ID_1960379269" MODIFIED="1458777916688" TEXT="&#x5f53;&#x6709;&#x4e00;&#x4e2a;&#x5411;&#x4e00;&#x53f0;L2&#x5730;&#x5740;&#x672a;&#x77e5;&#x7684;&#x4e3b;&#x673a;&#x7684;&#x4f20;&#x8f93;&#x8bf7;&#x6c42;&#x7684;,&#x5c31;&#x9700;&#x8981;&#x5bf9;&#x8be5;&#x5730;&#x5740;&#x8fdb;&#x884c;&#x89e3;&#x6790;&#xa;&#x53d1;&#x9001;&#x4e00;&#x4e2a;&#x5305;&#x65f6;&#x5148;&#x8fdb;&#x884c;&#x8def;&#x7531;&#x9009;&#x62e9;, &#x8def;&#x7531;&#x7cfb;&#x7edf;&#x4f1a;&#x9488;&#x5bf9;&#x5305;&#x7684;&#x76ee;&#x7684;&#x5730;&#x5740;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x7f13;&#x5b58;struct rtable, &#x4e14;&#x5c06;&#x8def;&#x7531;&#x7f13;&#x5b58;&#x4e0e;&#x90bb;&#x5c45;&#x7ed1;&#x5b9a;&#x8d77;&#x6765;, &#x82e5;&#x90bb;&#x5c45;&#x4e0d;&#x5b58;&#x5728;&#x5219;&#x521b;&#x5efa;&#x4e4b;">
<node CREATED="1401113633762" ID="ID_1127826851" MODIFIED="1401113636266" TEXT="ip_rcv_finish">
<node CREATED="1401113646540" ID="ID_1245857450" MODIFIED="1401113647980" TEXT="ip_route_input_noref">
<node CREATED="1401113667075" ID="ID_1872196964" MODIFIED="1401113668427" TEXT="ip_route_input_common">
<node CREATED="1401113705956" ID="ID_442250564" MODIFIED="1401113706963" TEXT="ip_route_input_slow">
<node CREATED="1401113845685" ID="ID_1124716117" MODIFIED="1401113846604" TEXT="ip_mkroute_input">
<node CREATED="1401113857468" ID="ID_1199993330" MODIFIED="1401113858267" TEXT="rt_intern_hash">
<node CREATED="1401113878404" ID="ID_512992901" MODIFIED="1401113879748" TEXT="rt_bind_neighbour">
<node CREATED="1401113915557" ID="ID_988809592" MODIFIED="1401113916540" TEXT="ipv4_neigh_lookup">
<node CREATED="1401113926707" ID="ID_519889739" MODIFIED="1401113927826" TEXT="neigh_create"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1401113981323" ID="ID_898107831" MODIFIED="1401114198174" TEXT="&#x6536;&#x5230;solicitation&#x8bf7;&#x6c42;, &#x56e0;&#x4e3a;solicitation&#x8bf7;&#x6c42;&#x4e2d;&#x6709;&#x53d1;&#x9001;&#x8005;&#x7684;L3&#x5730;&#x5740;&#x548c;L2&#x5730;&#x5740;, &#x56e0;&#x800c;&#x53ef;&#x4ee5;&#x4e3a;&#x53d1;&#x9001;&#x8005;&#x521b;&#x5efa;&#x90bb;&#x5c45;&#x9879;.&#xa;&#x7136;&#x800c;&#x8fd9;&#x79cd;&#x88ab;&#x52a8;&#x5b66;&#x4e60;&#x5230;&#x7684;&#x4fe1;&#x606f;&#x4e0e;&#x4e3b;&#x52a8;&#x901a;&#x8fc7;solicitation&#x8bf7;&#x6c42;&#x548c;&#x5e94;&#x7b54;&#x83b7;&#x5f97;&#x7684;&#x4fe1;&#x606f;&#x5e76;&#x4e0d;&#x5177;&#x6709;&#x76f8;&#x540c;&#x7684;&#x6743;&#x5a01;&#x6027;"/>
<node CREATED="1401114457217" ID="ID_42391963" MODIFIED="1401114497048" TEXT="&#x624b;&#x5de5;&#x6dfb;&#x52a0;, &#x7ba1;&#x7406;&#x5458;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;ip neigh add&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x90bb;&#x5c45;&#x9879;"/>
</node>
<node CREATED="1401114559239" ID="ID_1418195514" MODIFIED="1401114583708" TEXT="struct neighbour *&#xa;neigh_create(struct neigh_table *tbl, const void *pkey, struct net_device *dev)">
<node CREATED="1401114668251" ID="ID_487950724" MODIFIED="1401114696444" TEXT="&#x8c03;&#x7528;neigh_alloc&#x5206;&#x914d;struct neighbour&#x7ed3;&#x6784;"/>
<node CREATED="1401114706894" ID="ID_765404366" MODIFIED="1401114745580" TEXT="&#x8bbe;&#x7f6e;L3&#x5730;&#x5740;&#x548c;&#x5173;&#x8054;&#x7684;struct net_device"/>
<node CREATED="1401114763588" ID="ID_1469179676" MODIFIED="1401115935312" TEXT="&#x8c03;&#x7528;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x7684;&#x51fd;&#x6570;tbl-&gt;constructor&#x6765;&#x521d;&#x59cb;&#x5316;&#x90bb;&#x5c45;&#x9879;, &#xa;&#x4e00;&#x822c;&#x662f;&#x521d;&#x59cb;&#x5316;neighbour -&gt; ops&#x548c;neighbour -&gt; output, &#x4ee5;&#x53ca;&#x8bbe;&#x5b9a;&#x90bb;&#x5c45;&#x7684;&#x521d;&#x59cb;&#x72b6;&#x6001;"/>
<node CREATED="1401114939141" ID="ID_693654841" MODIFIED="1401115971910" TEXT="&#x8c03;&#x7528;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x7684;&#x51fd;&#x6570;dev-&gt;netdev_ops-&gt;ndo_neigh_construct&#x6765;&#x521d;&#x59cb;&#x5316;&#x90bb;&#x5c45;&#x9879;,&#xa;&#x4e00;&#x822c;&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x6ca1;&#x6709;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;"/>
<node CREATED="1401115233170" ID="ID_1068037818" MODIFIED="1401115785762" TEXT="&#x8c03;&#x7528;struct in_device/struct inet6_dev&#x5b9a;&#x4e49;&#x7684;&#x51fd;&#x6570;neighbour -&gt; parms -&gt; neigh_setup&#x6765;&#x6784;&#x9020;&#x90bb;&#x5c45;&#x9879;&#xa;&#x6b64;&#x51fd;&#x6570;&#x4e00;&#x822c;&#x4e0d;&#x8bbe;&#x7f6e;"/>
<node CREATED="1401115859869" ID="ID_367989243" MODIFIED="1401115883337" TEXT="&#x5c06;&#x90bb;&#x5c45;&#x9879;&#x52a0;&#x5165;&#x6240;&#x5c5e;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x7684;hash&#x8868;"/>
</node>
</node>
<node CREATED="1400909751144" ID="ID_1484382376" MODIFIED="1401034369568" TEXT="&#x5f15;&#x7528;">
<node CREATED="1401034446518" ID="ID_572414483" MODIFIED="1401034450153" TEXT="neigh_hold"/>
<node CREATED="1401034456454" ID="ID_303196864" MODIFIED="1401034457609" TEXT="neigh_release"/>
</node>
<node CREATED="1401283596898" ID="ID_640651602" MODIFIED="1401283607389" TEXT="&#x4e8b;&#x4ef6;">
<node CREATED="1401283585689" FOLDED="true" ID="ID_1140937209" MODIFIED="1401285737030" TEXT="&#x4ea7;&#x751f;&#x7684;&#x4e8b;&#x4ef6;">
<node CREATED="1401283798289" ID="ID_1029107840" MODIFIED="1401283961735" TEXT="&#x5f53;&#x90bb;&#x5c45;&#x8fdb;&#x5165;NUD_FAILED&#x72b6;&#x6001;&#x65f6;, &#x90bb;&#x5c45;&#x5c42;&#x6267;&#x884c;neighbour -&gt; ops -&gt; error_report&#x51fd;&#x6570;&#xa;&#x5c06;&#x90bb;&#x5c45;&#x4e0d;&#x53ef;&#x8fbe;&#x8fd9;&#x4e2a;&#x4e8b;&#x4ef6;&#x901a;&#x77e5;&#x7ed9;&#x4e0a;&#x5c42;&#x534f;&#x8bae;">
<node CREATED="1401283977927" ID="ID_365548682" MODIFIED="1401283979047" TEXT="neigh_timer_handler">
<node CREATED="1401283992257" ID="ID_1806892759" MODIFIED="1401283993325" TEXT="neigh_invalidate">
<node CREATED="1401284020706" ID="ID_716115583" MODIFIED="1401284122626" TEXT="&#x53d6;&#x51fa;neighbour -&gt; arp_queue&#x4e2d;&#x7684;&#x6bcf;&#x4e00;&#x4e2a;&#x5305;&#x8c03;&#x7528;neigh-&gt;ops-&gt;error_report(neigh, skb)&#x4ee5;&#x901a;&#x77e5;&#x4e0a;&#x5c42;&#x534f;&#x8bae;&#x53d1;&#x9001;&#x5931;&#x8d25;, &#x8fd9;&#x540c;&#x65f6;&#x610f;&#x5473;&#x7740;neighbour -&gt; arp_queue&#x961f;&#x5217;&#x88ab;&#x6e05;&#x7a7a;"/>
</node>
</node>
</node>
</node>
<node CREATED="1401283614160" FOLDED="true" ID="ID_1869567701" MODIFIED="1401285738414" TEXT="&#x63a5;&#x6536;&#x7684;&#x4e8b;&#x4ef6;">
<node CREATED="1401284496755" ID="ID_890160189" MODIFIED="1401284962523" TEXT="&#x8bbe;&#x5907;&#x7684;L3&#x5730;&#x5740;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xa;&#x8bbe;&#x5907;&#x94fe;&#x8def;&#x72b6;&#x6001;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xa;&#x5e94;&#x91c7;&#x53d6;&#x7684;&#x884c;&#x52a8; :&#xa;&#x6e05;&#x9664;&#x6240;&#x6709;&#x4e0e;&#x6b64;&#x8bbe;&#x5907;&#x5173;&#x8054;&#x7684;&#x90bb;&#x5c45;&#x9879;">
<node CREATED="1401284616530" ID="ID_817000004" MODIFIED="1401284618179" TEXT="inetdev_destroy">
<node CREATED="1401284652244" ID="ID_592579568" MODIFIED="1401284653780" TEXT="arp_ifdown">
<node CREATED="1401284667392" ID="ID_552955182" MODIFIED="1401284668463" TEXT="neigh_ifdown">
<node CREATED="1401284685182" ID="ID_1223811217" MODIFIED="1401284767496" TEXT="neigh_flush_dev&#xa;&#x6e05;&#x9664;&#x6240;&#x6709;&#x4e0e;&#x6b64;&#x8bbe;&#x5907;&#x5173;&#x8054;&#x7684;&#x90bb;&#x5c45;&#x9879;"/>
</node>
</node>
</node>
<node CREATED="1401284638438" ID="ID_160794462" MODIFIED="1401284639582" TEXT="fib_disable_ip">
<node CREATED="1401284813284" ID="ID_433243425" LINK="#ID_592579568" MODIFIED="1401284829808" TEXT="arp_ifdown"/>
</node>
</node>
<node CREATED="1401284880834" ID="ID_1830891312" MODIFIED="1401285008802" TEXT="&#x8bbe;&#x5907;&#x7684;L2&#x5730;&#x5740;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xa;&#x5e94;&#x91c7;&#x53d6;&#x7684;&#x884c;&#x52a8; :&#xa;&#x66f4;&#x65b0;&#x6240;&#x6709;&#x4e0e;&#x6b64;&#x8bbe;&#x5907;&#x5173;&#x8054;&#x7684;&#x90bb;&#x5c45;&#x9879;&#x7684;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x4e2d;&#x7684;&#x6e90;L2&#x5730;&#x5740;">
<node CREATED="1401285078019" ID="ID_1960542815" MODIFIED="1401285101966" TEXT="arp_netdev_event : NETDEV_CHANGEADDR">
<node CREATED="1401285113922" ID="ID_83262670" MODIFIED="1401285115010" TEXT="neigh_changeaddr">
<node CREATED="1401285127643" ID="ID_606900118" LINK="#ID_1223811217" MODIFIED="1401285146591" TEXT="neigh_flush_dev"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1401285428663" FOLDED="true" ID="ID_206585972" MODIFIED="1401285740133" TEXT="&#x5e94;&#x7528;&#x5c42;&#x63a5;&#x53e3;">
<node CREATED="1401285458724" ID="ID_1574652505" MODIFIED="1401285508699" TEXT="&#x6539;&#x53d8;&#x8bbe;&#x5907;&#x7684;L2&#x5730;&#x5740;&#xa;ip link set eth0 lladdr 01:02:03:04:05:06"/>
</node>
</node>
<node CREATED="1400942309626" FOLDED="true" ID="ID_611637451" MODIFIED="1458779847789" TEXT="output&#x51fd;&#x6570;&#x7684;&#x9009;&#x62e9;">
<node CREATED="1400942491626" ID="ID_1593804596" MODIFIED="1400942505219">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_4.jpeg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1400942331291" ID="ID_907869948" MODIFIED="1400942355096" TEXT="neighbour -&gt; ops&#x7684;&#x521d;&#x59cb;&#x5316;">
<node CREATED="1400942541701" ID="ID_374333020" MODIFIED="1400943159314" TEXT="&#x6b64;&#x51fd;&#x6570;&#x8868;&#x7531;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x6839;&#x636e;&#x8bbe;&#x5907;&#x7c7b;&#x578b;&#x5728;&#x521b;&#x5efa;&#x90bb;&#x5c45;&#x65f6;&#x521d;&#x59cb;&#x5316;, &#x4e00;&#x65e6;&#x521d;&#x59cb;&#x5316;, &#x5219;&#x5728;&#x90bb;&#x5c45;&#x7684;&#x751f;&#x5b58;&#x671f;&#x5185;&#x90fd;&#x4e0d;&#x6539;&#x53d8;"/>
<node CREATED="1400942910864" ID="ID_301486615" MODIFIED="1400942938068" TEXT="ipv4 arp">
<node CREATED="1400943212425" FOLDED="true" ID="ID_403949837" MODIFIED="1400949335793" TEXT="&#x5f53;&#x8bbe;&#x5907;&#x4e0d;&#x9700;&#x8981;&#x8fdb;&#x884c;L3&#x5730;&#x5740;&#x5230;L2&#x5730;&#x5740;&#x6620;&#x5c04;&#x65f6;(&#x5373;dev-&gt;header_ops == null), &#x521d;&#x59cb;&#x5316;&#x4e3a;&#xa;arp_direct_ops&#xa;&#x6b64;&#x65f6;&#x65e0;&#x8bba;&#x662f;neighbour -&gt; output &#x8fd8;&#x662f; neighbour -&gt; ops &#x5185;&#x7684;&#x51fd;&#x6570;&#x90fd;&#x88ab;&#x521d;&#x59cb;&#x5316;&#x4e3a;&#xa;neigh_direct_output, &#x800c;&#x5b83;&#x53ea;&#x662f;&#x7b80;&#x5355;&#x5730;&#x8c03;&#x7528;&#x4e86; dev_queue_xmit">
<node CREATED="1400943306906" ID="ID_489385427" MODIFIED="1400943345125" TEXT=".family = AF_INET"/>
<node CREATED="1400943321946" ID="ID_1839549755" MODIFIED="1400943353086" TEXT=".output = neigh_direct_output"/>
<node CREATED="1400943333894" ID="ID_759452088" MODIFIED="1400943360743" TEXT=".connected_output = neigh_direct_output"/>
</node>
<node CREATED="1400943871733" FOLDED="true" ID="ID_1328792951" MODIFIED="1400949337473" TEXT="&#x5f53;&#x8bbe;&#x5907;&#x662f;&#x6ca1;&#x6709;&#x91c7;&#x7528;&#x65b0;&#x90bb;&#x5c45;&#x57fa;&#x7840;&#x7ed3;&#x6784;&#x7684;&#x65e7;&#x8bbe;&#x5907;&#x65f6;, &#x521d;&#x59cb;&#x5316;&#x4e3a;&#xa;arp_broken_ops">
<node CREATED="1400943306906" ID="ID_301045591" MODIFIED="1400943345125" TEXT=".family = AF_INET"/>
<node CREATED="1400944022909" ID="ID_752830491" MODIFIED="1400944030271" TEXT=".solicit = arp_solicit"/>
<node CREATED="1400944040825" ID="ID_750542079" MODIFIED="1400944049248" TEXT=".error_report = arp_error_report"/>
<node CREATED="1400943321946" ID="ID_426240438" MODIFIED="1400944066607" TEXT=".output = neigh_compat_output"/>
<node CREATED="1400943333894" ID="ID_1120659294" MODIFIED="1400944072643" TEXT=".connected_output = neigh_compat_output"/>
</node>
<node CREATED="1400944272270" ID="ID_980529637" MODIFIED="1400946416490" TEXT="&#x5f53;&#x8bbe;&#x5907;&#x5141;&#x8bb8;&#x7f13;&#x5b58;L2&#x5934;&#x90e8;&#x65f6;(dev-&gt;header_ops-&gt;cache != 0), &#x521d;&#x59cb;&#x5316;&#x4e3a;&#xa;arp_hh_ops">
<node CREATED="1400943306906" ID="ID_463851562" MODIFIED="1400943345125" TEXT=".family = AF_INET"/>
<node CREATED="1400944022909" ID="ID_1463445286" MODIFIED="1400944030271" TEXT=".solicit = arp_solicit"/>
<node CREATED="1400944040825" ID="ID_1408296066" MODIFIED="1400944049248" TEXT=".error_report = arp_error_report"/>
<node CREATED="1400943321946" ID="ID_1494101529" MODIFIED="1400945161622" TEXT=".output = neigh_resolve_output"/>
<node CREATED="1400943333894" ID="ID_1303997239" MODIFIED="1400945167229" TEXT=".connected_output = neigh_resolve_output"/>
</node>
<node CREATED="1400944272270" ID="ID_1006764278" MODIFIED="1400946418138" TEXT="&#x5f53;&#x8bbe;&#x5907;&#x4e0d;&#x5141;&#x8bb8;&#x7f13;&#x5b58;L2&#x5934;&#x90e8;&#x65f6;(dev-&gt;header_ops-&gt;cache == 0), &#x521d;&#x59cb;&#x5316;&#x4e3a;&#xa;arp_generic_ops">
<node CREATED="1400943306906" ID="ID_1406409136" MODIFIED="1400943345125" TEXT=".family = AF_INET"/>
<node CREATED="1400944022909" ID="ID_1373657370" MODIFIED="1400944030271" TEXT=".solicit = arp_solicit">
<node CREATED="1401034611210" ID="ID_727210165" MODIFIED="1401034633021" TEXT="&#x8c03;&#x7528;&#x6b64;&#x51fd;&#x6570;&#x53d1;&#x9001;solicitation&#x8bf7;&#x6c42;"/>
</node>
<node CREATED="1400944040825" ID="ID_779703369" MODIFIED="1400944049248" TEXT=".error_report = arp_error_report"/>
<node CREATED="1400943321946" ID="ID_1523532693" MODIFIED="1401282599773" TEXT=".output = neigh_resolve_output&#xa;&#x6b64;&#x51fd;&#x6570;&#x7684;&#x4e3b;&#x8981;&#x4efb;&#x52a1;&#x662f; : &#x89e3;&#x6790;L2&#x5730;&#x5740;, &#x521d;&#x59cb;&#x5316;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;, &#x5728;L2&#x5730;&#x5740;&#x89e3;&#x6790;&#x5b8c;&#x6210;&#x524d;&#xa;neigh_resolve_output&#x53ea;&#x662f;&#x5c06;&#x5305;&#x653e;&#x5165;neighbour -&gt; arp_queue&#x961f;&#x5217;&#x5185;">
<node CREATED="1401121665210" ID="ID_1681937725" MODIFIED="1401121684409" TEXT="&#x9996;&#x5148;&#x89e6;&#x53d1;&#x6709;&#x5305;&#x53d1;&#x9001;&#x7684;&#x4e8b;&#x4ef6;, &#x5b83;&#x4f1a;&#x5bfc;&#x81f4;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x673a;&#x7684;&#x8f6c;&#x6362; : neigh_event_send">
<node CREATED="1401121746319" ID="ID_1243125329" MODIFIED="1401121747179" TEXT="neigh-&gt;used = now"/>
<node CREATED="1401121728322" ID="ID_145953994" MODIFIED="1401121730099" TEXT="__neigh_event_send">
<node CREATED="1401121850086" ID="ID_427040939" MODIFIED="1401121894049" TEXT="&#x5f53;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x662f;NUD_INCOMPLETE&#x65f6;&#x5c06;&#x5305;&#x653e;&#x5165;&#x961f;&#x5217;neighour-&gt;arp_queue"/>
</node>
</node>
<node CREATED="1400946608813" ID="ID_1158061979" MODIFIED="1401122034778" TEXT="&#x5f53;&#x4e0a;&#x9762;&#x7684;&#x51fd;&#x6570;neigh_event_send&#x8fd4;&#x56de;0&#x65f6;&#x8868;&#x793a;L2&#x5730;&#x5740;&#x6210;&#x529f;&#x5f97;&#x5230;&#x89e3;&#x6790;, &#x56e0;&#x800c;&#x5c31;&#x53ef;&#x4ee5;&#x6784;&#x9020;L2&#x5934;&#x90e8;&#x548c;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x4e86;&#xa;&#x8c03;&#x7528;dev-&gt;header_ops-&gt;cache&#x521d;&#x59cb;&#x5316;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#xa;&#x8c03;&#x7528;dev-&gt;header_ops-&gt;create&#x6784;&#x5efa;L2&#x5934;&#x90e8;, &#x7136;&#x540e;&#x8c03;&#x7528;dev_queue_xmit&#x4f20;&#x8f93;&#x5305;&#xa;L2 &#x76ee;&#x7684;&#x5730;&#x5740;&#x6765;&#x81ea;&#x4e8e;neighbour -&gt; ha, L2 &#x6e90;&#x5730;&#x5740;&#x6765;&#x81ea;&#x4e8e;dev-&gt;dev_addr"/>
</node>
<node CREATED="1400943333894" ID="ID_609286260" MODIFIED="1400945234324" TEXT=".connected_output = neigh_connected_output">
<node CREATED="1400946608813" ID="ID_1169005228" MODIFIED="1400946796856" TEXT="&#x8c03;&#x7528;dev-&gt;header_ops-&gt;create&#x6784;&#x5efa;L2&#x5934;&#x90e8;, &#x7136;&#x540e;&#x8c03;&#x7528;dev_queue_xmit&#x4f20;&#x8f93;&#x5305;&#xa;L2 &#x76ee;&#x7684;&#x5730;&#x5740;&#x6765;&#x81ea;&#x4e8e;neighbour -&gt; ha, L2 &#x6e90;&#x5730;&#x5740;&#x6765;&#x81ea;&#x4e8e;dev-&gt;dev_addr"/>
</node>
</node>
</node>
<node CREATED="1400942916084" ID="ID_74152184" MODIFIED="1400942932771" TEXT="ipv6 nd"/>
</node>
<node CREATED="1400942731891" ID="ID_75380750" MODIFIED="1400942751268" TEXT="neighbour -&gt; output&#x7684;&#x521d;&#x59cb;&#x5316;">
<node CREATED="1400942759372" ID="ID_575077654" MODIFIED="1400942843290" TEXT="&#x6b64;&#x51fd;&#x6570;&#x7531;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;&#x6839;&#x636e;&#x90bb;&#x5c45;&#x7684;&#x4e0d;&#x540c;&#x7684;&#x72b6;&#x6001;&#x8bbe;&#x7f6e;&#x4e3a;neighbour -&gt; ops&#x51fd;&#x6570;&#x8868;&#x5185;&#x4e0d;&#x540c;&#x7684;&#x51fd;&#x6570;"/>
<node CREATED="1400946896550" ID="ID_1067926396" MODIFIED="1400947131564" TEXT="&#x4efb;&#x4f55;&#x65f6;&#x5019;&#x90bb;&#x5c45;&#x8fdb;&#x5165;NUD_CONNECTED&#x72b6;&#x6001;&#x96c6;&#x65f6;&#x8c03;&#x7528;neigh_connect&#x51fd;&#x6570;&#x5c06;&#xa;neigh-&gt;output &#x8bbe;&#x7f6e;&#x4e3a; neigh-&gt;ops-&gt;connected_output&#xa;&#x6b64;&#x65f6;&#x8868;&#x793a;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x5df2;&#x5f97;&#x5230;&#x786e;&#x8ba4;,&#x65e0;&#x987b;&#x5728;&#x53d1;&#x5305;&#x7684;&#x65f6;&#x5019;&#x542f;&#x52a8;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;"/>
<node CREATED="1400946896550" ID="ID_490446651" MODIFIED="1400948039653" TEXT="&#x4efb;&#x4f55;&#x65f6;&#x5019;&#x90bb;&#x5c45;&#x79bb;&#x5f00;NUD_CONNECTED&#x72b6;&#x6001;&#x96c6;&#x65f6;&#x8c03;&#x7528;neigh_suspect&#x51fd;&#x6570;&#x5c06;&#xa;neigh-&gt;output &#x8bbe;&#x7f6e;&#x4e3a; neigh-&gt;ops-&gt;output&#xa;&#x6b64;&#x65f6;&#x8868;&#x793a;&#x5bf9;&#x90bb;&#x5c45;&#x7684;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x4ea7;&#x751f;&#x7591;&#x60d1;,&#x9700;&#x8981;&#x5728;&#x53d1;&#x5305;&#x7684;&#x65f6;&#x5019;&#x542f;&#x52a8;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;"/>
<node CREATED="1400949431008" ID="ID_1613601527" MODIFIED="1400949601901" TEXT="&#x5f53;&#x90bb;&#x5c45;&#x88ab;&#x6807;&#x8bb0;&#x4e3a;&#x5373;&#x5c06;&#x5220;&#x9664;&#x4f46;&#x8fd8;&#x6709;&#x5176;&#x4ed6;&#x7528;&#x6237;&#x5728;&#x4f7f;&#x7528;&#x8fd9;&#x4e2a;&#x90bb;&#x5c45;&#x7ed3;&#x6784;&#x65f6;, &#xa;&#x5c06;neighbour -&gt; output &#x8bbe;&#x7f6e;&#x4e3a;neigh_blackhole, &#x7528;&#x4e8e;&#x4e22;&#x5f03;&#x6240;&#x6709;&#x53d1;&#x9001;&#x5230;&#x8fd9;&#x4e2a;&#x90bb;&#x5c45;&#x7684;&#x5305;"/>
</node>
</node>
<node CREATED="1400945663639" FOLDED="true" ID="ID_1420572344" MODIFIED="1458867844570" TEXT="&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x7684;&#x6539;&#x53d8;">
<node CREATED="1400978029029" FOLDED="true" ID="ID_1707063682" MODIFIED="1400983248171" TEXT="int neigh_update(struct neighbour *neigh, const u8 *lladdr, u8 new, u32 flags)&#xa;&#x7528;&#x4e8e;&#x6539;&#x53d8;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x6216;&#x6539;&#x53d8;&#x90bb;&#x5c45;&#x7684;&#x72b6;&#x6001;&#xa;&#x6ce8;&#x610f;, &#x5f53;&#x6b64;&#x51fd;&#x6570;&#x7528;&#x4e8e;&#x6539;&#x53d8;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x65f6;, &#x82e5;&#x65b0;&#x65e7;&#x5730;&#x5740;&#x4e0d;&#x4e00;&#x6837;, &#x4e14;&#x65e7;&#x72b6;&#x6001;&#x4e3a;NUD_VALID, &#x6b64;&#x65f6;&#x9664;&#x975e;flags&#x5e26;&#x4e0a;NEIGH_UPDATE_F_OVERRIDE&#x6807;&#x5fd7;, &#x5426;&#x5219;&#x4e0d;&#x5141;&#x8bb8;&#x6539;&#x53d8;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;">
<node CREATED="1400978379578" ID="ID_808846167" MODIFIED="1400978381106" TEXT="neigh : &#x9700;&#x8981;&#x6539;&#x53d8;&#x72b6;&#x6001;&#x7684;&#x90bb;&#x5c45;"/>
<node CREATED="1400978392337" ID="ID_526067096" MODIFIED="1400978439744" TEXT="lladdr : &#x65b0;&#x7684;L2&#x5730;&#x5740;, &#xa;&#x5b83;&#x53ef;&#x80fd;&#x4e3a;&#x7a7a;, &#x6bd4;&#x5982;&#x901a;&#x8fc7;&#x8c03;&#x7528;neigh_update&#x6765;&#x5220;&#x9664;&#x4e00;&#x4e2a;&#x90bb;&#x5c45;&#x65f6;(&#x8bbe;&#x7f6e;&#x5176;&#x72b6;&#x6001;&#x4e3a;NUD_FAILED)"/>
<node CREATED="1400978411586" ID="ID_1752118024" MODIFIED="1400978412914" TEXT="new : &#x65b0;&#x7684;&#x72b6;&#x6001;"/>
<node CREATED="1400978359986" FOLDED="true" ID="ID_594949929" MODIFIED="1400979339602" TEXT="flags">
<node CREATED="1400978366528" ID="ID_1438578539" MODIFIED="1400978683239" TEXT="NEIGH_UPDATE_F_OVERRIDE&#xa;&#x7ba1;&#x7406;&#x6027;&#x4ee3;&#x7801;&#x7528;&#x8fd9;&#x4e2a;&#x6807;&#x5fd7;&#x533a;&#x5206;add&#x548c;replace&#x547d;&#x4ee4;&#xa;&#x534f;&#x8bae;&#x4ee3;&#x7801;&#x7528;&#x8fd9;&#x4e2a;&#x6807;&#x5fd7;&#x7ed9;L2&#x5730;&#x5740;&#x8bbe;&#x5b9a;&#x4e00;&#x4e2a;&#x6700;&#x5c0f;&#x751f;&#x5b58;&#x671f;"/>
<node CREATED="1400978452560" ID="ID_1196461831" MODIFIED="1400979332112" TEXT="NEIGH_UPDATE_F_WEAK_OVERRIDE&#xa;&#x5982;&#x679c;&#x53c2;&#x6570;lladdr&#x63d0;&#x4f9b;&#x7684;&#x65b0;&#x5730;&#x5740;&#x4e0e;&#x90bb;&#x5c45;&#x5f53;&#x524d;&#x7684;&#x5730;&#x5740;neigh-&gt;ha&#x4e0d;&#x540c;, &#x90a3;&#x4e48;&#x65b0;&#x5730;&#x5740;&#x662f;&#x53ef;&#x7591;&#x7684;,&#xa;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x90bb;&#x5c45;&#x4f1a;&#x8f6c;&#x6362;&#x5230;NUD_STALE&#x72b6;&#x6001;&#x4ee5;&#x89e6;&#x53d1;&#x90bb;&#x5c45;&#x53ef;&#x5230;&#x8fbe;&#x6027;&#x9a8c;&#x8bc1;"/>
<node CREATED="1400978463814" ID="ID_299088657" MODIFIED="1400979122012" TEXT="NEIGH_UPDATE_F_OVERRIDE_ISROUTER&#xa;&#x8868;&#x793a;ipv6&#x6807;&#x5fd7;NTF_ROUTER&#x53ef;&#x4ee5;&#x88ab;&#x8986;&#x76d6;"/>
<node CREATED="1400978473495" ID="ID_189063669" MODIFIED="1400979002308" TEXT="NEIGH_UPDATE_F_ISROUTER&#xa;&#x4ec5;&#x5728;ipv6&#x4e2d;&#x4f7f;&#x7528;, &#x8868;&#x793a;&#x6b64;&#x90bb;&#x5c45;&#x662f;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x5668;, &#x7528;&#x4e8e;&#x521d;&#x59cb;&#x5316;neighour -&gt; flags &#x4e2d;&#x7684;ipv6&#x6807;&#x5fd7;NTF_ROUTER"/>
<node CREATED="1400978484621" ID="ID_565242067" MODIFIED="1400978538483" TEXT="NEIGH_UPDATE_F_ADMIN&#xa;&#x66f4;&#x65b0;&#x547d;&#x4ee4;&#x6765;&#x81ea;&#x7528;&#x6237;&#x914d;&#x7f6e;"/>
</node>
</node>
<node CREATED="1400979925029" FOLDED="true" ID="ID_69362809" MODIFIED="1400983563163" TEXT="&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x66f4;&#x65b0;&#x9700;&#x8981;&#x5b8c;&#x6210;&#x7684;&#x4efb;&#x52a1; :&#xa;-&gt;&#x5408;&#x6cd5;&#x6027;&#x68c0;&#x67e5; : &#x5f53;&#x524d;&#x72b6;&#x6001;&#x662f;NUD_NOARP&#x6216;NUD_PERMANENT&#x65f6;,&#x9664;&#x4e86;&#x7ba1;&#x7406;&#x547d;&#x4ee4;&#x5916;,&#x4e0d;&#x80fd;&#x6539;&#x53d8;&#x72b6;&#x6001;&#xa;-&gt;&#x66f4;&#x65b0;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#xa;-&gt;&#x66f4;&#x65b0;&#x90bb;&#x5c45;&#x7684;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#xa;-&gt;&#x8bbe;&#x7f6e;&#x90bb;&#x5c45;&#x4e3a;&#x65b0;&#x72b6;&#x6001;&#xa;-&gt;&#x6839;&#x636e;&#x65b0;&#x65e7;&#x72b6;&#x6001;, &#x542f;&#x52a8;&#x6216;&#x505c;&#x6b62;&#x5b9a;&#x65f6;&#x5668;&#xa;-&gt;&#x4e3a;neighbour -&gt; output&#x9009;&#x62e9;neighbour -&gt; ops&#x4e2d;&#x5408;&#x9002;&#x7684;output&#x51fd;&#x6570;&#xa;-&gt;&#x5904;&#x7406;&#x90bb;&#x5c45;&#x4e0a;queue&#x5185;&#x7684;&#x5305;, &#x600e;&#x4e48;&#x5904;&#x7406; : &#xa;1, &#x4efb;&#x4f55;&#x65f6;&#x5019;&#x53ea;&#x8981;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x4e0d;&#x662f;NUD_VALID, &#x5219;&#x8981;&#x53d1;&#x5f80;&#x6b64;&#x90bb;&#x5c45;&#x7684;&#x5305;&#x5e94;&#x653e;&#x5165;&#x6b64;&#x90bb;&#x5c45;&#x7684;queue&#x5185;&#xa;2, &#x4efb;&#x4f55;&#x65f6;&#x5019;&#x53ea;&#x8981;&#x90bb;&#x5c45;&#x72b6;&#x6001;&#x662f;NUD_VALID, &#x5219;&#x53d1;&#x5f80;&#x90bb;&#x5c45;&#x7684;&#x5305;&#x548c;queue&#x5185;&#x7684;&#x5305;&#x76f4;&#x63a5;&#x7528;neighbour-&gt;output&#x8f93;&#x51fa;&#xa;-&gt;&#x5f53;&#x72b6;&#x6001;&#x4ece;NUD_VALID&#x96c6;&#x5408;&#x8fdb;&#x5165;&#x975e;NUD_VALID&#x96c6;&#x5408;&#x6216;L2&#x5730;&#x5740;&#x6539;&#x53d8;&#x4e86;&#x65f6;&#x901a;&#x77e5;&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;">
<node CREATED="1400979941374" ID="ID_1399907835" MODIFIED="1400979970199">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_5.jpeg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1400980024488" ID="ID_1270298100" MODIFIED="1400980032937">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_6.jpeg" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1400980020729" ID="ID_437139292" MODIFIED="1400980023291" TEXT="xxx"/>
</node>
<node CREATED="1401116360838" FOLDED="true" ID="ID_785305361" MODIFIED="1458868593837" TEXT="&#x5783;&#x573e;&#x56de;&#x6536;">
<node CREATED="1401116369347" ID="ID_122347640" MODIFIED="1401116375093" TEXT="&#x540c;&#x6b65;&#x56de;&#x6536;">
<node CREATED="1401116406892" ID="ID_449666429" MODIFIED="1401116469011" TEXT="&#x82e5;&#x5206;&#x914d;&#x65b0;&#x90bb;&#x5c45;&#x9879;&#x65f6;, &#x90bb;&#x5c45;&#x5185;&#x5b58;&#x6c60;&#x7528;&#x5b8c;&#x4e86;, &#x5219;&#x9700;&#x8981;&#x540c;&#x6b65;&#x6e05;&#x7406;&#x4ee5;&#x817e;&#x51fa;&#x7a7a;&#x95f4;&#x6765;">
<node CREATED="1401116614328" ID="ID_1463612243" MODIFIED="1401118733178" TEXT="neigh_forced_gc&#xa;&#x6e05;&#x9664;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x4e3a;1&#x4e14;&#x4e0d;&#x662f;NUD_PERMANENT&#x7684;&#x90bb;&#x5c45;&#x9879;"/>
</node>
</node>
<node CREATED="1401116375753" ID="ID_629489976" MODIFIED="1401116382039" TEXT="&#x5f02;&#x6b65;&#x56de;&#x6536;">
<node CREATED="1401116498423" ID="ID_847234930" MODIFIED="1401116536911" TEXT="&#x5468;&#x671f;&#x6027;&#x6267;&#x884c;&#x7684;&#x5f02;&#x6b65;&#x6e05;&#x7406;&#x7528;&#x4e8e;&#x6e05;&#x7406;&#x4e00;&#x6bb5;&#x65f6;&#x95f4;&#x4ee5;&#x6765;&#x6ca1;&#x6709;&#x88ab;&#x4f7f;&#x7528;&#x8fc7;&#x7684;&#x90bb;&#x5c45;&#x9879;">
<node CREATED="1401118820107" ID="ID_688768854" MODIFIED="1401118823143" TEXT="neigh_periodic_work">
<node CREATED="1401119033961" ID="ID_1830120295" MODIFIED="1401119281748" TEXT="&#x66f4;&#x65b0;&#x90bb;&#x5c45;&#x9879;&#x6700;&#x65b0;&#x88ab;&#x4f7f;&#x7528;&#x7684;&#x65f6;&#x95f4; : n-&gt;used = n-&gt;confirmed&#xa;n-&gt;used&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x5224;&#x65ad;&#x8fd9;&#x4e2a;&#x90bb;&#x5c45;&#x9879;&#x6709;&#x591a;&#x957f;&#x65f6;&#x95f4;&#x6ca1;&#x6709;&#x88ab;&#x4f7f;&#x7528;&#x4e86;"/>
<node CREATED="1401119112869" ID="ID_1030385752" MODIFIED="1401119132669" TEXT="&#x6e05;&#x9664;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x4e3a;1&#x4e14;&#x72b6;&#x6001;&#x4e3a;NUD_FAILED&#x7684;&#x90bb;&#x5c45;&#x9879;"/>
<node CREATED="1401119142207" ID="ID_64887942" MODIFIED="1401119212055" TEXT="&#x6e05;&#x9664;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x4e3a;1&#x4e14;&#x81f3;&#x5c11;neighbour-&gt;parms-&gt;gc_staletime&#x65f6;&#x95f4;&#x5185;&#x6ca1;&#x6709;&#x4f7f;&#x7528;&#x7684;&#x90bb;&#x5c45;&#x9879;"/>
</node>
</node>
</node>
</node>
<node CREATED="1400909770699" FOLDED="true" ID="ID_511811177" MODIFIED="1401282402486" TEXT="L2&#x5934;&#x90e8;&#x7f13;&#x5b58;">
<node CREATED="1400909831335" ID="ID_1168945987" MODIFIED="1400909989736" TEXT="L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#xa;&#x5373;&#x5c06;L2&#x5934;&#x90e8;(&#x5305;&#x62ec;dst mac, src mac, ethertype)&#x7f13;&#x5b58;&#x5728;struct neighbour -&gt; hh -&gt; hh_data&#x4e2d;&#xa;&#x4ee5;&#x540e;&#x6bcf;&#x6b21;&#x53d1;&#x9001;&#x5305;&#x5230;&#x8fd9;&#x4e2a;&#x90bb;&#x5c45;&#x65f6;, &#x76f4;&#x63a5;&#x5c06;&#x7f13;&#x5b58;&#x7684;&#x5934;&#x90e8;&#x590d;&#x5236;&#x5230;&#x5305;&#x7684;L2&#x5934;&#x90e8;&#x4f4d;&#x7f6e;"/>
<node CREATED="1400910082004" ID="ID_291364077" MODIFIED="1400910270775" TEXT="L2&#x5934;&#x90e8;&#x4e0d;&#x662f;&#x4e00;&#x5b9a;&#x80fd;&#x7f13;&#x5b58;, &#x5982;&#x679c;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x7684;mac&#x5730;&#x5740;&#x662f;&#x52a8;&#x6001;&#x7684;, &#x6bcf;&#x65f6;&#x6bcf;&#x523b;&#x90fd;&#x4f1a;&#x53d8;&#x52a8;&#x7684;, &#x5219;&#x4e0d;&#x80fd;&#x7f13;&#x5b58;L2&#x5934;&#x90e8;&#xa;&#x56e0;&#x6b64;&#x80fd;&#x5426;&#x7f13;&#x5b58;L2&#x5934;&#x90e8;&#x53d6;&#x51b3;&#x4e8e;&#x8bbe;&#x5907;&#x7279;&#x6027;, &#x6240;&#x4ee5;neighbour -&gt; hh&#x5b57;&#x6bb5;&#x53ef;&#x80fd;&#x4e3a;&#x7a7a;"/>
<node CREATED="1401119607037" ID="ID_1023199418" MODIFIED="1401282392571" TEXT="L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x7684;&#x521d;&#x59cb;&#x5316;&#x662f;&#x5728;&#x51fd;&#x6570;neigh_resolve_output&#x4e2d;&#x5b8c;&#x6210;&#x7684;&#xa;L2&#x5934;&#x90e8;&#x7684;&#x6784;&#x9020;&#x6216;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x7684;&#x6784;&#x9020;&#x90fd;&#x662f;&#x901a;&#x8fc7;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x6765;&#x6784;&#x9020;&#x7684;, &#xa;&#x90bb;&#x5c45;&#x901a;&#x7528;&#x57fa;&#x7840;&#x7ed3;&#x6784;&#x53ea;&#x662f;&#x8d1f;&#x8d23;&#x51b3;&#x5b9a;&#x4f55;&#x65f6;&#x8c03;&#x7528;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;">
<node CREATED="1401119953739" ID="ID_1939892617" MODIFIED="1401120033982" TEXT="dev-&gt;header_ops-&gt;create()&#x7528;&#x4e8e;&#x521b;&#x5efa;L2&#x5934;&#x90e8;"/>
<node CREATED="1401119891454" ID="ID_1973937798" MODIFIED="1401119908516" TEXT="dev-&gt;header_ops-&gt;cache()&#x7528;&#x4e8e;&#x6784;&#x9020;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;"/>
<node CREATED="1401120012007" ID="ID_1716842974" MODIFIED="1401120026270" TEXT="dev-&gt;header_ops-&gt;cache_update()&#x7528;&#x4e8e;&#x66f4;&#x65b0;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;"/>
<node CREATED="1401119927346" ID="ID_896091614" MODIFIED="1401120127403" TEXT="dev-&gt;header_ops-&gt;rebuild()&#x7528;&#x4e8e;&#x517c;&#x5bb9;&#x6027;"/>
<node CREATED="1401119986165" ID="ID_962457267" MODIFIED="1401120099070" TEXT="dev-&gt;header_ops-&gt;parse&#x7528;&#x4e8e;&#x4ece;L2&#x5934;&#x90e8;&#x4e2d;&#x53d6;&#x51fa;&#x6e90;L2&#x5730;&#x5740;"/>
</node>
<node CREATED="1401120264432" ID="ID_1497060096" MODIFIED="1401120274398" TEXT="&#x7f13;&#x5b58;&#x7684;&#x5931;&#x6548;&#x4e0e;&#x66f4;&#x65b0;">
<node CREATED="1401120298913" ID="ID_439078656" MODIFIED="1401120621258" TEXT="&#x5f53;&#x4e00;&#x4e2a;&#x672c;&#x5730;&#x8bbe;&#x5907;&#x7684;L2&#x5730;&#x5740;&#x53d1;&#x751f;&#x6539;&#x53d8;&#x65f6;,&#x6240;&#x6709;&#x4e0e;&#x8fd9;&#x4e2a;&#x5730;&#x5740;&#x5173;&#x8054;&#x7684;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x5c31;&#x5931;&#x6548;&#x4e86;&#xa;&#x6536;&#x5230;NETDEV_CHANGEADDR&#x4e8b;&#x4ef6;&#x65f6;, &#x8c03;&#x7528;neigh_changeaddr&#x6765;&#x4f7f;&#x6240;&#x6709;&#x4e0e;&#x8fd9;&#x4e2a;&#x8bbe;&#x5907;&#x5173;&#x8054;&#x7684;&#x90bb;&#x5c45;&#x5931;&#x6548;">
<node CREATED="1401120633796" ID="ID_887115575" MODIFIED="1401120636538" TEXT="neigh_flush_dev"/>
</node>
<node CREATED="1401120689959" ID="ID_1830467424" MODIFIED="1401120742638" TEXT="&#x5f53;&#x4e00;&#x4e2a;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x6539;&#x53d8;&#x65f6;, &#x8c03;&#x7528;neigh_update_hhs&#x66f4;&#x65b0;&#x6b64;&#x90bb;&#x5c45;&#x7684;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;"/>
</node>
<node CREATED="1401120953892" ID="ID_57733656" MODIFIED="1401120964801" TEXT="&#x5982;&#x4f55;&#x4f7f;&#x7528;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;">
<node CREATED="1401120976580" ID="ID_1805961450" MODIFIED="1401120977763" TEXT="ip_output">
<node CREATED="1401120989804" ID="ID_4772647" MODIFIED="1401120991552" TEXT="ip_finish_output">
<node CREATED="1401121001578" ID="ID_867113033" MODIFIED="1401121002705" TEXT="ip_finish_output2">
<node CREATED="1401121027763" ID="ID_1069473643" MODIFIED="1401121029556" TEXT="neigh_output">
<node CREATED="1401121168335" ID="ID_342763228" MODIFIED="1401121300643" TEXT="&#x5982;&#x679c;&#x90bb;&#x5c45;&#x4e2d;&#x6709;&#x6709;&#x6548;&#x7684;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x4e14;&#x90bb;&#x5c45;&#x7684;&#x72b6;&#x6001;&#x4e3a;NUD_CONNECTED, &#xa;&#x5219;&#x4f7f;&#x7528;neigh_hh_output &#x8f93;&#x51fa;&#x5305;">
<node CREATED="1401121322538" ID="ID_1778173752" MODIFIED="1401121351998" TEXT="&#x76f4;&#x63a5;&#x5c06;neighbour -&gt; hh-&gt;hh_data&#x4e2d;&#x7684;L2&#x5934;&#x90e8;&#x590d;&#x5236;&#x5230;skb&#x4e2d;"/>
</node>
<node CREATED="1401121243378" ID="ID_1654793611" MODIFIED="1401121296156" TEXT="&#x5982;&#x679c;&#x90bb;&#x5c45;&#x4e2d;&#x6ca1;&#x6709;&#x6709;&#x6548;&#x7684;L2&#x5934;&#x90e8;&#x7f13;&#x5b58;&#x6216;&#x90bb;&#x5c45;&#x7684;&#x72b6;&#x6001;&#x4e0d;&#x4e3a;NUD_CONNECTED,  &#xa;&#x5219;&#x4f7f;&#x7528;neighour -&gt; output &#x8f93;&#x51fa;&#x5305;"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1401282760687" ID="ID_676678315" MODIFIED="1401290707591" TEXT="&#x90bb;&#x5c45;&#x53d1;&#x73b0;&#x534f;&#x8bae;">
<node CREATED="1401282769223" FOLDED="true" ID="ID_110872824" MODIFIED="1401290708826" TEXT="arp">
<node CREATED="1401282774883" ID="ID_525832774" MODIFIED="1401282785922" TEXT="&#x62a5;&#x6587;&#x7ed3;&#x6784;">
<node CREATED="1401286785578" FOLDED="true" ID="ID_1066181640" MODIFIED="1401289011563">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_7.jpeg" />
  </body>
</html></richcontent>
<node CREATED="1401286839457" ID="ID_1581712441" MODIFIED="1401286853252" TEXT="&#x786c;&#x4ef6;&#x7c7b;&#x578b;">
<node CREATED="1401287023052" ID="ID_1815720148" MODIFIED="1401287024733" TEXT="ARPHRD_ETHER"/>
</node>
<node CREATED="1401287032481" ID="ID_521329590" MODIFIED="1401287037894" TEXT="&#x534f;&#x8bae;&#x7c7b;&#x578b;">
<node CREATED="1401287067006" ID="ID_679584364" MODIFIED="1401287068804" TEXT="ETH_P_IP"/>
<node CREATED="1401287069824" ID="ID_1532426927" MODIFIED="1401287074792" TEXT="ETH_P_IPV6"/>
</node>
<node CREATED="1401287084068" ID="ID_691804093" MODIFIED="1401287095309" TEXT="&#x786c;&#x4ef6;&#x5730;&#x5740;&#x957f;&#x5ea6; = 6"/>
<node CREATED="1401287096530" ID="ID_1991364314" MODIFIED="1401287103976" TEXT="&#x534f;&#x8bae;&#x5730;&#x5740;&#x957f;&#x5ea6; = 4"/>
<node CREATED="1401287107827" ID="ID_1471909781" MODIFIED="1401287110890" TEXT="&#x64cd;&#x4f5c;&#x7801;">
<node CREATED="1401287133464" ID="ID_429826588" MODIFIED="1401287134576" TEXT="ARPOP_REQUEST">
<node CREATED="1401287551754" ID="ID_830314132" MODIFIED="1401287703517" TEXT="solicitation&#x8bf7;&#x6c42;&#xa;&#x5bf9;&#x4e8e;&#x65b0;&#x90bb;&#x5c45;&#x9879;&#x6765;&#x8bf4;, &#x8fd9;&#x4e2a;&#x5305;&#x88ab;&#x53d1;&#x9001;&#x5230;&#x5e7f;&#x64ad;&#x5730;&#x5740;&#xa;&#x82e5;&#x4e3a;&#x4e86;&#x786e;&#x8ba4;&#x4e00;&#x4e2a;&#x5b58;&#x5728;&#x7684;&#x90bb;&#x5c45;&#x9879;, &#x8fd9;&#x4e2a;&#x5305;&#x88ab;&#x53d1;&#x9001;&#x5230;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;">
<node CREATED="1401288038190" ID="ID_918260201" MODIFIED="1401288175008" TEXT="&#x65e0;&#x7aef;ARP&#xa;&#x6307;&#x53d1;&#x9001;&#x7684;solicitation&#x8bf7;&#x6c42;&#x4e0d;&#x662f;&#x4e3a;&#x4e86;&#x89e3;&#x6790;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;&#x800c;&#x662f;&#x4e3a;&#x4e86;&#x544a;&#x8bc9;&#x522b;&#x4eba;&#x81ea;&#x5df1;&#x7684;&#x4fe1;&#x606f;">
<node CREATED="1401288300735" ID="ID_1319882849" MODIFIED="1401288687210" TEXT="L2&#x5730;&#x5740;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xa;L2&#x5730;&#x5740;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x7684;&#x8282;&#x70b9;&#x53d1;&#x9001;&#x4e00;&#x4e2a;solicitation&#x8bf7;&#x6c42;, &#x4ee5;&#x63d0;&#x524d;&#x89e6;&#x53d1;L3&#x5730;&#x5740;&#x548c;&#x65b0;&#x7684;L2&#x5730;&#x5740;&#x7684;&#x5173;&#x8054;"/>
<node CREATED="1401288410091" ID="ID_1711895512" MODIFIED="1401288541006" TEXT="&#x91cd;&#x590d;&#x5730;&#x5740;&#x68c0;&#x6d4b;&#xa;&#x6b63;&#x5728;&#x914d;&#x7f6e;&#x65b0;L3&#x5730;&#x5740;&#x7684;&#x8282;&#x70b9;&#x53d1;&#x51fa;&#x4e00;&#x4e2a;solicitation&#x8bf7;&#x6c42;, &#x5176;&#x76ee;&#x7684;&#x534f;&#x8bae;&#x5730;&#x5740;&#x6b63;&#x662f;&#x81ea;&#x5df1;&#x65b0;&#x914d;&#x7f6e;&#x7684;&#x5730;&#x5740;, &#x901a;&#x8fc7;&#x67e5;&#x770b;&#x662f;&#x5426;&#x6709;&#x5176;&#x4ed6;&#x8282;&#x70b9;&#x56de;&#x590d;&#x6b64;solicitation&#x8bf7;&#x6c42;, &#x6765;&#x68c0;&#x6d4b;&#x91cd;&#x590d;&#x5730;&#x5740;"/>
<node CREATED="1401288618695" ID="ID_45980396" MODIFIED="1401288858621" TEXT="&#x865a;&#x62df;IP&#xa;&#x5f53;&#x4e00;&#x4e2a;&#x8282;&#x70b9;&#x5b95;&#x673a;, &#x5b83;&#x7684;&#x5907;&#x7528;&#x8282;&#x70b9;&#x542f;&#x7528;&#x540e;, &#x53d1;&#x9001;&#x4e00;&#x4e2a;solicitation&#x8bf7;&#x6c42;, &#x5176;&#x76ee;&#x7684;&#x534f;&#x8bae;&#x5730;&#x5740;&#x662f;&#x4e3b;&#x5907;&#x4e24;&#x8282;&#x70b9;&#x5171;&#x7528;&#x7684;L3&#x5730;&#x5740;, &#x4ee5;&#x63d0;&#x524d;&#x89e6;&#x53d1;L3&#x5730;&#x5740;&#x548c;&#x5907;&#x7528;&#x8282;&#x70b9;&#x7684;L2&#x5730;&#x5740;&#x7684;&#x5173;&#x8054;"/>
</node>
</node>
</node>
<node CREATED="1401287143379" ID="ID_414426907" MODIFIED="1401287144402" TEXT="ARPOP_REPLY">
<node CREATED="1401287735182" ID="ID_515210055" MODIFIED="1401287955879" TEXT="solicitation&#x5e94;&#x7b54;&#xa;&#x4f5c;&#x4e3a;solicitation&#x8bf7;&#x6c42;&#x7684;&#x5e94;&#x7b54;&#x65f6;, &#x8fd9;&#x4e2a;&#x5305;&#x88ab;&#x53d1;&#x9001;&#x5230;&#x8bf7;&#x6c42;&#x8005;&#x7684;L2&#x5730;&#x5740;&#xa;&#x6709;&#x65f6;&#x5f53;&#x4e3b;&#x673a;&#x7684;L3&#x5730;&#x5740;&#x6216;L2&#x5730;&#x5740;&#x6539;&#x53d8;&#x65f6;, &#x4e3b;&#x673a;&#x5c06;&#x8fd9;&#x4e2a;&#x5305;&#x53d1;&#x9001;&#x5230;&#x5e7f;&#x64ad;&#x5730;&#x5740;, &#x4ee5;&#x66f4;&#x65b0;&#x522b;&#x7684;&#x4e3b;&#x673a;&#x4e0a;&#x5b83;&#x81ea;&#x5df1;&#x5bf9;&#x5e94;&#x7684;&#x90bb;&#x5c45;&#x7f13;&#x5b58;"/>
</node>
<node CREATED="1401287152648" ID="ID_35385609" MODIFIED="1401287153669" TEXT="ARPOP_RREQUEST"/>
<node CREATED="1401287163114" ID="ID_1315928723" MODIFIED="1401287164065" TEXT="ARPOP_RREPLY"/>
</node>
<node CREATED="1401287193470" ID="ID_39761058" MODIFIED="1401287204395" TEXT="&#x53d1;&#x9001;&#x65b9;&#x786c;&#x4ef6;&#x5730;&#x5740;"/>
<node CREATED="1401287206403" ID="ID_855320271" MODIFIED="1401287215272" TEXT="&#x53d1;&#x9001;&#x65b9;&#x534f;&#x8bae;&#x5730;&#x5740;"/>
<node CREATED="1401287230037" ID="ID_130230134" MODIFIED="1401287237767" TEXT="&#x76ee;&#x7684;&#x5730;&#x786c;&#x4ef6;&#x5730;&#x5740;">
<node CREATED="1401287290933" ID="ID_1903152489" MODIFIED="1401287509619" TEXT="&#x5728;solicitation&#x8bf7;&#x6c42;&#x4e2d;, &#x8fd9;&#x4e2a;&#x57df;&#x4e00;&#x822c;&#x4e3a;&#x7a7a;, &#x5373;&#x4e3a;&#x6240;&#x8981;&#x89e3;&#x6790;&#x7684;L2&#x5730;&#x5740;&#xa;&#x4f46;&#x6709;&#x65f6;&#x53d1;&#x9001;&#x65b9;&#x4e3a;&#x4e86;&#x786e;&#x8ba4;&#x4e00;&#x4e2a;&#x5b58;&#x5728;&#x7684;neighbour&#x9879;, &#x800c;&#x53d1;&#x51fa;&#x4e00;&#x4e2a;&#x8bf7;&#x6c42;, &#x5176;&#x4e2d;&#x5305;&#x542b;&#x5df2;&#x77e5;&#x7684;&#x90bb;&#x5c45;&#x7684;L2&#x5730;&#x5740;"/>
</node>
<node CREATED="1401287238507" ID="ID_1600775472" MODIFIED="1401287245129" TEXT="&#x76ee;&#x7684;&#x5730;&#x534f;&#x8bae;&#x5730;&#x5740;"/>
</node>
</node>
<node CREATED="1401282792668" ID="ID_1716415067" MODIFIED="1401283357208" TEXT="&#x53ef;&#x8c03;&#x6574;&#x53c2;&#x6570;&#xa;ipv4 : /proc/sys/net/ipv4/neigh/eth0/&#xa;ipv6 : /proc/sys/net/ipv6/neigh/eth0/"/>
<node CREATED="1401282899572" ID="ID_1113125921" MODIFIED="1401282905451" TEXT="&#x63a5;&#x53e3;">
<node CREATED="1401282906696" ID="ID_964186588" MODIFIED="1401290346051" TEXT="&#x63a5;&#x6536;arp&#x5305;&#xa;&#x5728;&#x521d;&#x59cb;&#x5316;&#x51fd;&#x6570;arp_init&#x4e2d;&#x8c03;&#x7528;dev_add_pack&#x6ce8;&#x518c;&#x51fd;&#x6570;arp_rcv&#x6765;&#x63a5;&#x6536;arp&#x5305;">
<node CREATED="1401282947998" ID="ID_788915144" MODIFIED="1401282949727" TEXT="arp_rcv"/>
</node>
<node CREATED="1401290357223" ID="ID_92694312" MODIFIED="1401290422457" TEXT="&#x53d1;&#x9001;arp&#x5305;&#xa;neighbour&#x72b6;&#x6001;&#x673a;&#x5c06;&#x89e6;&#x53d1;&#x53d1;&#x9001;solicitation&#x8bf7;&#x6c42;, &#x4ece;&#x800c;&#x53d1;&#x9001;arp">
<node CREATED="1401290424700" ID="ID_772499082" MODIFIED="1401290497538" TEXT="neighbour -&gt; ops -&gt; solicit = arp_solicit">
<node CREATED="1401290516170" ID="ID_578029053" MODIFIED="1401290517385" TEXT="arp_send"/>
</node>
</node>
</node>
<node CREATED="1401289019777" FOLDED="true" ID="ID_268560030" MODIFIED="1401289976399" TEXT="L3&#x5730;&#x5740;&#x5c5e;&#x4e8e;&#x4e3b;&#x673a;&#x800c;&#x4e0d;&#x5c5e;&#x4e8e;&#x63a5;&#x53e3;&#x8bbe;&#x5907;">
<node CREATED="1401289119141" ID="ID_284648373" MODIFIED="1401289275689" TEXT="&#x4e3b;&#x673a;&#x5c06;&#x4f1a;&#x5bf9;&#x76ee;&#x7684;&#x534f;&#x8bae;&#x5730;&#x5740;&#x662f;&#x672c;&#x673a;&#x914d;&#x7f6e;&#x7684;&#x4efb;&#x610f;L3&#x5730;&#x5740;&#x7684;solicitation&#x8bf7;&#x6c42;&#x505a;&#x51fa;&#x5e94;&#x7b54;, &#xa;&#x800c;&#x4e0d;&#x7ba1;&#x5176;&#x662f;&#x5728;&#x54ea;&#x4e2a;&#x63a5;&#x53e3;&#x8bbe;&#x5907;&#x4e0a;&#x6536;&#x5230;&#x7684;"/>
<node CREATED="1401289355687" ID="ID_201185966" MODIFIED="1401289361845" TEXT="arp flux">
<node CREATED="1401289413433" ID="ID_1379012378" MODIFIED="1401289425845">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/neighbour_8.jpeg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1401289487575" ID="ID_200934238" MODIFIED="1401289631951" TEXT="&#x4e3b;&#x673a;B&#x6709;2&#x4e2a;NIC&#x63a5;&#x5728;&#x540c;&#x4e00;&#x4e2a;LAN&#x4e0a;, &#x5f53;A&#x53d1;&#x9001;solicitation&#x8bf7;&#x6c42;&#x65f6;, B&#x5c06;&#x6536;&#x5230;2&#x4efd;&#x8bf7;&#x6c42;, B&#x4e5f;&#x4f1a;&#x5e94;&#x7b54;2&#x4efd;&#xa;&#x8fd9;&#x4f1a;&#x5bfc;&#x81f4;A&#x7684;&#x6df7;&#x6dc6;"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1306651511319" FOLDED="true" ID="ID_1576420467" MODIFIED="1458256410906" POSITION="right" TEXT="&#x7f51;&#x7edc;&#x7cfb;&#x7edf;&#x63a5;&#x53e3;">
<node CREATED="1306651567021" FOLDED="true" ID="ID_10757660" MODIFIED="1419015285563" TEXT="&#x6536;&#x5305;&#x6d41;&#x7a0b;">
<node CREATED="1306653399148" ID="ID_1694467969" MODIFIED="1413307251051" TEXT="&#x8bbe;&#x5907;&#x9a71;&#x52a8;">
<node CREATED="1306653439170" ID="ID_468717733" MODIFIED="1413307253406" TEXT="&#x6536;&#x5305;&#x4e2d;&#x65ad;">
<node CREATED="1306653513709" FOLDED="true" ID="ID_1035105795" MODIFIED="1413307647761" TEXT="1, &#x8c03;&#x7528;napi_schedule_prep&#x4ee5;&#x786e;&#x5b9a;&#x662f;&#x5426;&#x9700;&#x8981;&#x8c03;&#x5ea6;">
<node CREATED="1306654192573" ID="ID_1802028993" MODIFIED="1306654358054" TEXT="&#x5982;&#x679c;&#x8c03;&#x5ea6;&#x672a;&#x88ab;&#x7981;&#x6b62;&#xff08;napi-&gt;state&#x4e0a;NAPI_STATE_DISABLE&#x672a;&#x7f6e;&#x4f4d;&#xff09;&#xff0c;&#xa;&#x4e14;&#x8c03;&#x5ea6;&#x8fd8;&#x672a;&#x5f00;&#x59cb;&#xff08;napi-&gt;state&#x4e0a;NAPI_STATE_SCHED&#x672a;&#x7f6e;&#x4f4d;&#xff09;&#xff0c;&#xa;&#x5219;&#x8868;&#x793a;&#x9700;&#x8981;&#x8c03;&#x5ea6;"/>
</node>
<node CREATED="1306653557692" ID="ID_1839977408" MODIFIED="1306727137369" TEXT="2, &#x82e5;&#x9700;&#x8981;&#x8c03;&#x5ea6;&#x5219;&#x5173;&#x95ed;&#x6536;&#x5305;&#x4e2d;&#x65ad;"/>
<node CREATED="1306653580744" ID="ID_1883190548" MODIFIED="1413308799277" TEXT="3, &#x8c03;&#x7528;__napi_schedule">
<node CREATED="1306683965396" ID="ID_1816977622" MODIFIED="1306684031539" TEXT="1, &#x5c06;napi-&gt;state&#x7684;NAPI_STATE_SCHED&#x4f4d;&#x7f6e;&#x4e0a;"/>
<node CREATED="1306671433772" ID="ID_1394658671" MODIFIED="1306684043076" TEXT="2, &#x5c06;&#x8fd9;&#x8bbe;&#x5907;&#x7684;napi_struct&#x94fe;&#x5165;softnet_data.poll_list&#x4e2d;"/>
<node CREATED="1306671599877" ID="ID_964769282" MODIFIED="1306684048757" TEXT="3, &#x89e6;&#x53d1;&#x8f6f;&#x4e2d;&#x65ad;NET_RX_SOFTIRQ">
<node CREATED="1413247986898" ID="ID_107085972" MODIFIED="1413247988762" TEXT="__raise_softirq_irqoff(NET_RX_SOFTIRQ);"/>
</node>
</node>
</node>
</node>
<node CREATED="1306653419383" ID="ID_1599749040" MODIFIED="1413307317343" TEXT="&#x7f51;&#x7edc;&#x5185;&#x6838;">
<node CREATED="1306674173475" FOLDED="true" ID="ID_307790411" MODIFIED="1413315432139" TEXT="&#x8f6f;&#x4e2d;&#x65ad;NET_RX_SOFTIRQ&#xa;     net_rx_action">
<node CREATED="1306680267214" ID="ID_946297664" MODIFIED="1306680385536" TEXT="1, &#x9650;&#x5b9a;&#x6b64;&#x6b21;&#x8f6f;&#x4e2d;&#x65ad;&#x6700;&#x591a;&#x5904;&#x7406;budget&#x4e2a;&#x5305;&#xa;    &#x9650;&#x5b9a;&#x6b64;&#x6b21;&#x8f6f;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x65f6;&#x95f4;&#x6700;&#x957f;&#x4e3a;time_limit"/>
<node CREATED="1306680432903" ID="ID_320028019" MODIFIED="1413309793687">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2, &#24403;&#21069;CPU&#30340;&#36718;&#35810;&#38431;&#21015;softnet_data.poll_list&#19981;&#20026;&#31354;&#26102;
    </p>
  </body>
</html></richcontent>
<node CREATED="1306680477394" ID="ID_1684262802" MODIFIED="1306680569642" TEXT="1, &#x68c0;&#x67e5;&#x662f;&#x5426;&#x8d85;&#x65f6;&#x6216;&#x5df2;&#x5904;&#x7406;&#x5305;&#x662f;&#x5426;&#x6570;&#x8d85;&#x51fa;&#x9650;&#x5236;"/>
<node CREATED="1306681283331" ID="ID_1667777613" MODIFIED="1306681293584" TEXT="2, &#x5f00;&#x4e2d;&#x65ad;"/>
<node CREATED="1306680600745" ID="ID_1415094654" MODIFIED="1306681303596" TEXT="3, &#x53d6;&#x51fa;&#x8f6e;&#x8be2;&#x8bbe;&#x5907;&#x7684;struct napi_struct&#x7ed3;&#x6784;&#xff0c;&#x5982;&#x679c;&#x6b64;&#x8bbe;&#x5907;&#x9700;&#x8981;&#x8c03;&#x5ea6;&#xa;   &#xff08;napi-&gt;state&#x4e0a;NAPI_STATE_SCHED&#x7f6e;&#x4f4d;&#xff0c;&#x5373;&#x6709;&#x5305;&#x9700;&#x5904;&#x7406;&#xff09;&#xff0c;&#xa;    &#x5219;&#x8c03;&#x7528;napi-&gt;poll()&#x51fd;&#x6570;&#x8fdb;&#x884c;&#x6536;&#x5305;&#x3002;poll()&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x5df2;&#x5904;&#x7406;&#x5305;&#x4e2a;&#x6570;"/>
<node CREATED="1306681306653" ID="ID_1689921594" MODIFIED="1306681338554" TEXT="4, &#x66f4;&#x65b0;budget, &#x5e76;&#x5173;&#x4e2d;&#x65ad;"/>
<node CREATED="1306681407150" ID="ID_1422904636" MODIFIED="1413309813651" TEXT="5, &#x82e5;&#x6b64;&#x8bbe;&#x5907;&#x5df2;&#x5904;&#x7406;&#x5305;&#x6570;&#x8fbe;&#x5230;&#x5176;&#x6743;&#x91cd;&#xff0c;&#x5219;&#x8868;&#x660e;&#xa;    &#x6b64;&#x8bbe;&#x5907;&#x9700;&#x8ba9;&#x51fa;CPU&#xff0c;&#x8ba9;&#x5176;&#x4ed6;&#x8bbe;&#x5907;&#x5904;&#x7406;&#x6536;&#x5305;">
<node CREATED="1306682553878" ID="ID_1432385331" MODIFIED="1413309821052" TEXT="1, &#x82e5;&#x5df2;&#x7981;&#x6b62;&#x8c03;&#x5ea6;&#xff0c;&#x5219;&#x8c03;&#x7528;napi_complete">
<node CREATED="1306682745144" ID="ID_1649925057" MODIFIED="1306682780651" TEXT="1, &#x5c06;&#x8bbe;&#x5907;&#x7684;napi&#x4ece;softnet_data.poll_list&#x4e2d;&#x5220;&#x9664;"/>
<node CREATED="1306682786986" ID="ID_1157821458" MODIFIED="1306682854721" TEXT="2, &#x6e05;&#x9664;&#x8bbe;&#x5907;napi-&gt;state&#x4e0a;&#x7684;NAPI_STATE_SCHED&#xa;    &#x8868;&#x793a;&#x65e0;&#x9700;&#x518d;&#x8c03;&#x5ea6;&#x6b64;&#x8bbe;&#x5907;"/>
</node>
<node CREATED="1306682577428" ID="ID_1845049687" MODIFIED="1306682662627" TEXT="2, &#x82e5;&#x8fd8;&#x672a;&#x7981;&#x6b62;&#x8c03;&#x5ea6;&#xff0c;&#x5219;&#x5c06;&#x8bbe;&#x5907;&#x7684;napi&#xa;    &#x79fb;&#x81f3;softnet_data.poll_list&#x672b;&#x5c3e;"/>
</node>
</node>
<node CREATED="1306682991945" ID="ID_877266652" MODIFIED="1306683105967" TEXT="3, &#x82e5;&#x8fbe;&#x5230;&#x9650;&#x65f6;&#xff0c;&#x8fbe;&#x5230;&#x9650;&#x5236;&#x6700;&#x5927;&#x5904;&#x7406;&#x5305;&#x6570;&#x540e;&#xa;    &#x8fd8;&#x6709;&#x672a;&#x5904;&#x7406;&#x7684;&#x5305;&#x5219;&#x89e6;&#x53d1;&#x8f6f;&#x4e2d;&#x65ad;NET_RX_SOFTIRQ"/>
</node>
<node CREATED="1306684314369" FOLDED="true" ID="ID_1433191896" MODIFIED="1413307460259" TEXT="netif_receive_skb">
<node CREATED="1306734366051" ID="ID_1951764217" MODIFIED="1306734485560">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1, &#22914;&#26524;skb-&gt;vlan_tci&#35774;&#32622;&#20102;&#21017;&#21551;&#29992;vlan&#21152;&#36895;&#25509;&#25910;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vlan_hwaccel_do_receive
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1306735762335" ID="ID_1538517551" MODIFIED="1306735766580" TEXT="2, netpoll_receive_skb"/>
<node CREATED="1306735817406" ID="ID_1472028461" MODIFIED="1306735874812" TEXT="3, &#x7ed9;skb&#x6253;&#x4e0a;&#x65f6;&#x95f4;&#x6233;"/>
<node CREATED="1306735899692" ID="ID_1109076162" MODIFIED="1306735929648" TEXT="4, &#x5c06;skb-&gt;iif&#x8bbe;&#x4e3a;&#x63a5;&#x6536;&#x7684;&#x8bbe;&#x5907;"/>
<node CREATED="1306736061687" ID="ID_642794188" MODIFIED="1306736075265" TEXT="5, &#x5904;&#x7406;&#x7aef;&#x53e3;&#x96c6;&#x7fa4;"/>
<node CREATED="1306736595786" ID="ID_1830689076" MODIFIED="1306736656251" TEXT="6, &#x521d;&#x59cb;&#x5316;skb&#x7684;network_header,transport_header,mac_len"/>
<node CREATED="1306736732438" ID="ID_575412473" MODIFIED="1306736741297" TEXT="7, &#x8bbe;&#x7f6e;skb-&gt;tc_verd"/>
<node CREATED="1306737248970" FOLDED="true" ID="ID_555800224" MODIFIED="1359856749178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      8, &#23558;skb&#25237;&#36882;&#21040;&#24819;&#25509;&#25910;&#20219;&#24847;etherType&#21253;&#30340;&#21327;&#35758;&#27169;&#22359;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deliver_skb
    </p>
  </body>
</html></richcontent>
<node CREATED="1306984005621" ID="ID_116807434" MODIFIED="1306984025619" TEXT="&#x9012;&#x589e;skb&#x7684;&#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
<node CREATED="1306738072069" ID="ID_695785277" MODIFIED="1306738112900" TEXT="&#x8c03;&#x7528;&#x6240;&#x6ce8;&#x518c;&#x7684;struct packet_type&#x7684;func&#x51fd;&#x6570;"/>
</node>
<node CREATED="1306737473653" ID="ID_1714083054" MODIFIED="1306737477823" TEXT="9, handle_ing"/>
<node CREATED="1306737505556" FOLDED="true" ID="ID_1939196362" MODIFIED="1359856749178" TEXT="10, handle_bridge">
<node CREATED="1307003324318" ID="ID_733821368" MODIFIED="1307003413404">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1, &#21028;&#26029;&#25509;&#25910;&#35774;&#22791;&#26159;&#21542;&#20026;&#19968;&#20010;bridge&#30340;&#31471;&#21475;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#21363;skb-&gt;dev-&gt;br_port&#19981;&#20026;&#31354;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1307003495975" ID="ID_1937155126" MODIFIED="1307003575846" TEXT="2, &#x82e5;&#x5305;&#x8fd8;&#x6ca1;&#x6709;&#x6295;&#x9012;&#x5230;&#x4e0a;&#x4e00;&#x4e2a;&#x60f3;&#x63a5;&#x6536;&#x6b64;&#x5305;&#x7684;&#x534f;&#x8bae;&#x6a21;&#x5757;,&#x5219;&#x6295;&#x9012;&#x5b83;"/>
<node CREATED="1307003592361" FOLDED="true" ID="ID_146215717" MODIFIED="1359856749178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3, br_handle_frame_hook = br_handle_frame
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;net/bridge/br_input.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1307067226138" ID="ID_769175707" MODIFIED="1307067252025" TEXT="1, &#x786e;&#x8ba4;&#x5305;&#x7684;&#x6e90;MAC&#x5730;&#x5740;&#x4e0d;&#x662f;&#x7ec4;&#x64ad;&#x6216;&#x5168;0"/>
<node CREATED="1306985581485" ID="ID_890915903" MODIFIED="1306985691196">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2, &#22914;&#26524;&#27492;skb&#36824;&#34987;&#20854;&#20182;&#20154;&#25152;&#20351;&#29992;(&#24341;&#29992;&#35745;&#25968;&#22823;&#20110;1)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#21017;&#20811;&#38534;&#27492;skb,&#20811;&#38534;&#30340;skb&#32473;&#33258;&#24049;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1307067368423" FOLDED="true" ID="ID_626753390" MODIFIED="1359856749178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3, &#33509;&#30446;&#30340;MAC&#26159;linklocal&#30340;&#22320;&#22336;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#21363;01:80:c2:00:00:0X
    </p>
  </body>
</html></richcontent>
<node CREATED="1307067487559" ID="ID_257146284" MODIFIED="1307067508559" TEXT="1, &#x82e5;&#x4e3a;pause&#x5e27;,&#x5219;&#x4e22;&#x5f03;"/>
<node CREATED="1307068949695" ID="ID_1152104291" LINK="#ID_182932941" MODIFIED="1307069514632">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2, &#33509;bridge&#30340;stp&#21151;&#33021;&#27809;&#20351;&#33021;,&#19988;&#21253;&#20026;&#21333;&#25773;&#21017;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#36339;&#36807;netfilter&#30340;bridge&#34920;&#30340;LOCAL_IN&#38142;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#30452;&#25509;&#36827;&#34892;&#36716;&#21457;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1307069151475" ID="ID_1979314089" MODIFIED="1307069167628" TEXT="3, &#x5904;&#x7406;netfilter&#x7684;bridge&#x8868;&#x7684;LOCAL_IN&#x94fe;&#x4e2d;&#x7684;&#x89c4;&#x5219;"/>
<node CREATED="1307069216842" FOLDED="true" ID="ID_1738760642" MODIFIED="1307069328497" TEXT="4, &#x5b8c;&#x6210;netfilter&#x5904;&#x7406;&#x540e;&#x8c03;&#x7528;br_handle_local_finish">
<node CREATED="1307069251429" ID="ID_21578738" MODIFIED="1307069298784">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26356;&#26032;FDB&#34920;(&#21363;MAC&#22320;&#22336;&#23398;&#20064;)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;br_fdb_update
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1307069416287" ID="ID_794817244" LINK="#ID_1433191896" MODIFIED="1307072200088" TEXT="5, &#x4ece;br_handle_frame&#x51fd;&#x6570;&#x4e2d;&#x8fd4;&#x56de;"/>
</node>
<node CREATED="1307069501987" FOLDED="true" ID="ID_182932941" MODIFIED="1359856749178" TEXT="4, &#x8f6c;&#x53d1;">
<node CREATED="1307070213921" ID="ID_484007609" MODIFIED="1307070288192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1, &#33509;&#25509;&#25910;&#21253;&#30340;bridge&#31471;&#21475;&#30340;stp&#29366;&#24577;&#19981;&#20026;
    </p>
    <p>
      &#160;&#160;&#160;&#160;forwarding&#21644;learning,&#21017;&#20002;&#24323;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1307069561387" ID="ID_1281053415" MODIFIED="1307070301236" TEXT="2, &#x5f53;&#x63a5;&#x6536;&#x5305;&#x7684;bridge&#x7aef;&#x53e3;&#x7684;stp&#x72b6;&#x6001;&#x4e3a;forwarding&#x65f6;&#x68c0;&#x67e5;&#xa;    &#x5305;&#x662f;&#x5426;&#x9700;&#x8981;&#x8def;&#x7531;,&#x82e5;&#x9700;&#x8981;&#x8def;&#x7531;,&#x5219;&#x4e0d;&#x518d;&#x8fdb;&#x884c;bridge&#x4e2d;&#x7684;&#x8f6c;&#x53d1;&#xa;                        br_should_route_hook"/>
<node CREATED="1307070066566" ID="ID_32318593" MODIFIED="1307070306622">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3, &#33509;&#21253;&#30340;&#30446;&#30340;MAC&#22320;&#22336;&#20026;bridge&#30340;MAC&#22320;&#22336;&#21017;&#35774;&#32622;
    </p>
    <p>
      &#160;&#160;&#160;&#160;skb-&gt;pkt_type = PACKET_HOST
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1307069151475" ID="ID_655070434" MODIFIED="1307070382730" TEXT="4, &#x5904;&#x7406;netfilter&#x7684;bridge&#x8868;&#x7684;prerouting&#x94fe;&#x4e2d;&#x7684;&#x89c4;&#x5219;"/>
<node CREATED="1307070512760" FOLDED="true" ID="ID_1450576672" MODIFIED="1359856749178" TEXT="5, &#x5b8c;&#x6210;netfilter&#x5904;&#x7406;&#x540e;&#x8c03;&#x7528;br_handle_frame_finish">
<node CREATED="1307070590830" ID="ID_89566712" MODIFIED="1307070610251" TEXT="1, &#x786e;&#x5b9a;&#x63a5;&#x6536;&#x7aef;&#x53e3;&#x6ca1;&#x6709;disable"/>
<node CREATED="1307070612474" ID="ID_1599010980" MODIFIED="1307070637580" TEXT="2, &#x66f4;&#x65b0;FDB(&#x5373;MAC&#x5730;&#x5740;&#x5b66;&#x4e60;&#x8868;)"/>
<node CREATED="1307070677250" ID="ID_1702595646" MODIFIED="1307070708936" TEXT="3, &#x82e5;&#x63a5;&#x6536;&#x7aef;&#x53e3;stp&#x72b6;&#x6001;&#x4e3a;learning&#x5219;&#x4e22;&#x5f03;&#x6b64;&#x5305;"/>
<node CREATED="1307070857689" FOLDED="true" ID="ID_616370519" MODIFIED="1307072273758">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4, &#30830;&#23450;&#21253;&#26159;&#21542;&#38656;&#35201;&#36716;&#21457;&#32473;&#33258;&#24049;local_in
    </p>
  </body>
</html></richcontent>
<node CREATED="1307070964058" ID="ID_1290908428" MODIFIED="1307070996905" TEXT="1, &#x82e5;&#x63a5;&#x6536;&#x8bbe;&#x5907;&#x5904;&#x4e8e;&#x6df7;&#x6742;&#x6a21;&#x5f0f;,&#x5219;&#x5e94;&#x8f6c;&#x53d1;&#x7ed9;&#x81ea;&#x5df1;"/>
<node CREATED="1307071039440" ID="ID_96004115" MODIFIED="1307071065256" TEXT="2, &#x82e5;&#x5305;&#x7684;&#x76ee;&#x7684;MAC&#x5730;&#x5740;&#x4e3a;&#x7ec4;&#x64ad;,&#x5219;&#x5e94;&#x8f6c;&#x53d1;&#x7ed9;&#x81ea;&#x5df1;"/>
<node CREATED="1307071077579" ID="ID_1791004929" MODIFIED="1307071114304" TEXT="3, &#x82e5;&#x5305;&#x7684;&#x76ee;&#x7684;MAC&#x5730;&#x5740;&#x4e3a;bridge&#x7684;MAC&#x5730;&#x5740;,&#x5219;&#x5e94;&#x8f6c;&#x53d1;&#x7ed9;&#x81ea;&#x5df1;"/>
</node>
<node CREATED="1307070894068" FOLDED="true" ID="ID_1652530235" MODIFIED="1307072277693" TEXT="5, &#x786e;&#x5b9a;&#x5305;&#x662f;&#x5426;&#x9700;&#x8981;&#x5728;bridge&#x4e0a;&#x8f6c;&#x53d1;">
<node CREATED="1307071077579" ID="ID_1634740590" MODIFIED="1307071204431" TEXT="&#x82e5;&#x5305;&#x7684;&#x76ee;&#x7684;MAC&#x5730;&#x5740;&#x4e3a;bridge&#x7684;MAC&#x5730;&#x5740;,&#x5219;&#x4e0d;&#x5e94;&#x518d;&#x5728;bridge&#x4e0a;&#x8f6c;&#x53d1;"/>
</node>
<node CREATED="1307071226983" FOLDED="true" ID="ID_225202160" MODIFIED="1359856749178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6, &#33509;&#38656;&#35201;&#36716;&#21457;&#32473;&#33258;&#24049;&#21017;&#35843;&#29992;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;br_pass_frame_up
    </p>
  </body>
</html></richcontent>
<node CREATED="1307071995645" ID="ID_13872395" MODIFIED="1307072021814" TEXT="1, &#x5c06;skb-&gt;dev&#x8bbe;&#x4e3a;bridge&#x8bbe;&#x5907;"/>
<node CREATED="1307069151475" ID="ID_562675363" MODIFIED="1307072078753" TEXT="2, &#x5904;&#x7406;netfilter&#x7684;bridge&#x8868;&#x7684;local_in&#x94fe;&#x4e2d;&#x7684;&#x89c4;&#x5219;"/>
<node CREATED="1307072106621" ID="ID_884032442" LINK="#ID_1433191896" MODIFIED="1307072139592" TEXT="3, &#x5b8c;&#x6210;netfilter&#x5904;&#x7406;&#x540e;&#x8c03;&#x7528;netif_receive_skb"/>
</node>
<node CREATED="1307071287054" FOLDED="true" ID="ID_567802358" MODIFIED="1359856749178" TEXT="7, &#x82e5;&#x9700;&#x8981;&#x5728;bridge&#x4e0a;&#x8f6c;&#x53d1;">
<node CREATED="1307071353189" ID="ID_911188027" MODIFIED="1307071507482" TEXT="1, &#x82e5;&#x5305;&#x7684;&#x76ee;&#x7684;MAC&#x5df2;&#x5728;FDB&#x4e2d;&#x5b66;&#x4e60;&#x5230;&#x65f6;&#x8c03;&#x7528;br_forward"/>
<node CREATED="1307071353189" ID="ID_1284644769" MODIFIED="1307071546807" TEXT="2, &#x82e5;&#x5305;&#x7684;&#x76ee;&#x7684;MAC&#x672a;&#x5728;FDB&#x4e2d;&#x5b66;&#x4e60;&#x5230;&#x65f6;&#x8c03;&#x7528;br_flood_forward"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1306737517155" ID="ID_849176017" MODIFIED="1306737520732" TEXT="11, handle_macvlan"/>
<node CREATED="1306737625985" FOLDED="true" ID="ID_1279032905" MODIFIED="1359856749178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      12, &#23558;skb&#25237;&#36882;&#21040;&#24819;&#25509;&#25910;&#27492;&#21253;&#30340;etherType&#30340;&#21327;&#35758;&#27169;&#22359;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deliver_skb
    </p>
  </body>
</html></richcontent>
<node CREATED="1306984005621" ID="ID_1503396794" MODIFIED="1306984025619" TEXT="&#x9012;&#x589e;skb&#x7684;&#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
<node CREATED="1306738072069" ID="ID_1257828573" MODIFIED="1306738112900" TEXT="&#x8c03;&#x7528;&#x6240;&#x6ce8;&#x518c;&#x7684;struct packet_type&#x7684;func&#x51fd;&#x6570;"/>
</node>
</node>
</node>
</node>
<node CREATED="1306651586999" FOLDED="true" ID="ID_695055773" MODIFIED="1458256409731" TEXT="&#x53d1;&#x5305;&#x6d41;&#x7a0b;">
<node CREATED="1458256292301" FOLDED="true" ID="ID_791729097" MODIFIED="1458256406635" TEXT="&#x57fa;&#x672c;&#x6846;&#x67b6;">
<node CREATED="1458256335407" ID="ID_473320682" MODIFIED="1458256362426">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/eth_tx_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1413322153447" FOLDED="true" ID="ID_1350000538" MODIFIED="1458256287278">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21457;&#21253;&#25509;&#21475;(&#27492;&#20989;&#25968;&#23558;&#21253;&#25918;&#20837;&#19968;&#20010;&#38431;&#21015;,&#28982;&#21518;&#35302;&#21457;NET_TX_SOFTIRQ&#36719;&#20013;&#26029;)
    </p>
    <p>
      int dev_queue_xmit(struct sk_buff *skb)
    </p>
  </body>
</html></richcontent>
<node CREATED="1413322420606" ID="ID_30947986" MODIFIED="1413322469614" TEXT="&#x5173;&#x95ed;&#x8f6f;&#x4e2d;&#x65ad;"/>
<node CREATED="1413322538700" FOLDED="true" ID="ID_728479068" MODIFIED="1429309373744" TEXT="&#x66f4;&#x65b0;skb-&gt;priority">
<node CREATED="1413322550578" ID="ID_1487311632" MODIFIED="1413322551747" TEXT="void skb_update_prio(struct sk_buff *skb)">
<node CREATED="1413322651623" ID="ID_1513116626" MODIFIED="1429309360924">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;skb-&gt;priority&#20026;&#31354;&#65292;&#20986;&#21475;&#35774;&#22791;&#20351;&#33021;&#20102;CONFIG_NETPRIO_CGROUP&#21151;&#33021;&#65292;&#19988;&#21457;&#36865;&#30340;&#21253;&#26159;&#26412;&#22320;socket&#21457;&#36865;&#30340;&#21253;&#26102;
    </p>
    <p>
      &#23558;skb-&gt;sk-&gt;sk_cgrp_prioidx&#26144;&#23556;&#21040;skb-&gt;priority
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413322797056" ID="ID_1200612819" MODIFIED="1413322811570" TEXT="skb-&gt;priority = skb-&gt;dev-&gt;priomap[skb-&gt;sk-&gt;sk_cgrp_prioidx]"/>
</node>
</node>
<node CREATED="1413323447621" FOLDED="true" ID="ID_637694309" MODIFIED="1429317097402">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#20986;&#21475;&#35774;&#22791;&#19978;&#36873;&#25321;&#19968;&#20010;queue, &#20986;&#21475;&#35774;&#22791;&#30340;queue&#22312;skb-&gt;dev-&gt;_tx[x]
    </p>
    <p>
      struct netdev_queue *dev_pick_tx(struct net_device *dev, struct sk_buff *skb)
    </p>
    <p>
      &#22914;&#20309;&#36873;&#25321;&#19968;&#20010;queue&#30340;&#31574;&#30053;&#26377;&#24456;&#22810; :
    </p>
  </body>
</html></richcontent>
<node CREATED="1413323778506" ID="ID_1961658386" MODIFIED="1429309478650" TEXT="&#x5982;&#x679c;&#x51fa;&#x53e3;&#x8bbe;&#x5907;&#x53ea;&#x6709;&#x4e00;&#x4e2a;queue(dev-&gt;real_num_tx_queues == 1),&#x90a3;&#x53ea;&#x80fd;&#x7528;&#x8fd9;&#x4e2a;&#x552f;&#x4e00;&#x7684;queue&#xff1a;dev-&gt;_tx[0]"/>
<node CREATED="1413323628751" ID="ID_381014403" MODIFIED="1413323711230" TEXT="&#x5982;&#x679c;skb-&gt;dev-&gt;netdev_ops-&gt;ndo_select_queue&#x51fd;&#x6570;&#x6307;&#x9488;&#x4e0d;&#x4e3a;&#x7a7a;,&#x5219;&#x8ba9;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x6765;&#x4f5c;&#x6b64;&#x51b3;&#x5b9a;"/>
<node CREATED="1413323975807" ID="ID_112652802" LINK="#ID_623303774" MODIFIED="1429314048524">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#26159;&#26412;&#22320;socket&#21457;&#36865;&#30340;&#21253;, &#19988;socket&#25351;&#23450;&#20102;&#20986;&#21475;queue(skb-&gt;sk-&gt;sk_tx_queue_mapping), &#21017;&#36873;&#25321;&#23427;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;socket&#26159;&#21033;&#29992;XPS&#26426;&#21046;&#25351;&#23450;&#20986;&#21475;queue(skb-&gt;sk-&gt;sk_tx_queue_mapping)&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413324229477" ID="ID_866155208" MODIFIED="1429309915699">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#19978;&#38754;&#30340;&#21150;&#27861;&#37117;&#26080;&#27861;&#20351;&#29992;, &#21017;&#26681;&#25454;xps&#26426;&#21046;&#36873;&#20986;&#19968;&#20010;queue
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;get_xps_queue(dev,&#160;skb)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413324229477" ID="ID_798894712" MODIFIED="1429316893970">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#19978;&#38754;&#30340;&#21150;&#27861;&#37117;&#26080;&#27861;&#20351;&#29992;, &#21017;&#35745;&#31639;&#20986;&#19968;&#20010;tx hash&#20877;&#29992;&#36825;&#20010;hash&#20540;&#26469;&#36873;&#25321;tx queue
    </p>
    <p>
      u16 skb_tx_hash(const struct net_device *dev,&#160;const struct sk_buff *skb)
    </p>
  </body>
</html></richcontent>
<node CREATED="1429316921354" ID="ID_730052475" MODIFIED="1429317089988">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      tx hash&#25353;&#29031;&#20248;&#20808;&#32423;&#21487;&#20197;&#26377;3&#31181;&#35745;&#31639;&#26041;&#27861;&#65306;
    </p>
    <p>
      1&#65292;&#39318;&#20808;&#21462;&#33258;skb-&gt;queue_mapping
    </p>
    <p>
      2&#65292;&#33509;&#31532;&#19968;&#27493;&#21462;&#19981;&#21040;&#65292;&#21017;&#22312;&#21253;&#26159;&#26412;&#22320;socket&#21457;&#20986;&#30340;&#24773;&#20917;&#19979;&#65292;&#21462;&#33258;skb-&gt;sk-&gt;sk_hash
    </p>
    <p>
      3&#65292;&#33509;&#31532;&#19977;&#27493;&#20063;&#21462;&#19981;&#21040;&#65292;&#21017;&#29992;&#21253;&#30340;&#19968;&#20123;&#23383;&#27573;&#35745;&#31639;hash&#20540;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1413327845346" FOLDED="true" ID="ID_832438448" MODIFIED="1429337642103">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#25152;&#36873;&#25321;&#30340;queue&#25152;&#23646;&#30340;Qdisc&#25552;&#20379;&#20102;enqueue&#20989;&#25968;
    </p>
    <p>
      &#21017;&#35843;&#29992;&#36825;&#20010;Qdisc-&gt;enqueue&#20989;&#25968;&#23558;&#21253;&#25918;&#20837;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413327918311" ID="ID_1001760496" MODIFIED="1423116984329">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int __dev_xmit_skb(struct sk_buff *skb, struct Qdisc *q,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct net_device *dev,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct netdev_queue *txq)
    </p>
  </body>
</html></richcontent>
<node CREATED="1413333246964" ID="ID_612831763" MODIFIED="1413333282530" TEXT="&#x5982;&#x679c;Qdisc&#x6ca1;&#x6709;active&#x90a3;&#x4e48;&#x4e22;&#x6389;&#x8981;&#x53d1;&#x9001;&#x7684;&#x5305;"/>
<node CREATED="1413333331893" FOLDED="true" ID="ID_157425753" MODIFIED="1429318005957">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35774;&#32622;Qdisc&#30340;&#30446;&#30340;&#26159;&#26377;&#22810;&#20010;&#21253;&#35201;&#21457;&#36865;&#26102;, &#20808;queue&#20303;&#23427;&#20204;, &#20877;&#36873;&#25321;&#20248;&#20808;&#21457;&#36865;&#21738;&#19968;&#20010;
    </p>
    <p>
      &#25152;&#20197;&#22914;&#26524;Qdisc&#37324;&#38754;&#27809;&#26377;queue&#20303;&#21035;&#30340;&#21253;, &#20165;&#20165;&#24403;&#21069;&#19968;&#20010;&#21253;&#38656;&#35201;&#21457;&#36865;&#26102;, &#20877;&#36827;&#34892;enqueue&#21644;dequeue&#23601;&#26377;&#28857;&#22810;&#20313;, &#27492;&#26102;&#24212;&#35813;&#30452;&#25509;&#21457;&#36865;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413333581803" ID="ID_1073414916" MODIFIED="1429317829034" TEXT="&#x5f53;&#x7136;&#x8fd9;&#x4e48;&#x505a;&#x6709;&#x51e0;&#x4e2a;&#x524d;&#x63d0;">
<node CREATED="1413333597843" ID="ID_1169634482" MODIFIED="1413333628787" TEXT="Qdisc&#x6709;&#x8fd9;&#x4e2a;TCQ_F_CAN_BYPASS&#x529f;&#x80fd;"/>
<node CREATED="1413333650653" ID="ID_632744388" MODIFIED="1413333711564" TEXT="Qdisc&#x91cc;&#x6ca1;&#x6709;queue&#x4f4f;&#x5176;&#x5b83;&#x5305; : !qdisc_qlen(q)"/>
<node CREATED="1413333757077" ID="ID_27913823" MODIFIED="1413333792008" TEXT="Qdisc&#x4e0d;&#x662f;&#x6b63;&#x5728;&#x88ab;&#x8c03;&#x5ea6; : !qdisc_is_running(qdisc)"/>
</node>
<node CREATED="1413333867885" ID="ID_524393988" MODIFIED="1413414448134" TEXT="int sch_direct_xmit(struct sk_buff *skb,&#xa;                              struct Qdisc *q,&#xa;                              struct net_device *dev,&#xa;                              struct netdev_queue *txq,&#xa;                              spinlock_t *root_lock)">
<node CREATED="1413333970629" ID="ID_1714419509" LINK="#ID_1739407236" MODIFIED="1413333991168" TEXT="dev_hard_start_xmit"/>
<node CREATED="1413333997685" FOLDED="true" ID="ID_544777383" MODIFIED="1429318003910" TEXT="&#x56e0;&#x4e3a;&#x8fd9;&#x91cc;&#x6709;&#x4e00;&#x4e2a;queue,&#x6240;&#x4ee5;&#x53d1;&#x9001;&#x5931;&#x8d25;&#x540e;&#x8fd8;&#x53ef;&#x4ee5;&#x91cd;&#x65b0;&#x653e;&#x5165;queue&#x5185;&#x4e0b;&#x6b21;&#x518d;&#x53d1;&#x9001;">
<node CREATED="1413334063156" ID="ID_1418943884" MODIFIED="1413334064158" TEXT="int dev_requeue_skb(struct sk_buff *skb, struct Qdisc *q)">
<node CREATED="1413334097518" ID="ID_1964939720" LINK="#ID_417375533" MODIFIED="1413414480766" TEXT="void __netif_schedule(struct Qdisc *q)"/>
</node>
</node>
</node>
</node>
<node CREATED="1413335118910" ID="ID_506356553" MODIFIED="1413335162805" TEXT="&#x5982;&#x679c;Qdisc&#x5185;&#x8fd8;&#x6709;&#x5176;&#x5b83;&#x5305;,&#x5219;&#x5e94;&#x5148;&#x5c06;&#x5305;queue&#x5165;Qdisc&#x5185;">
<node CREATED="1413335164300" ID="ID_455171492" MODIFIED="1413335176139" TEXT="qdisc-&gt;enqueue(skb, qdisc)"/>
</node>
<node CREATED="1413335206318" ID="ID_1540174237" MODIFIED="1429337631290" TEXT="&#x56e0;&#x4e3a;&#x6709;&#x5305;queue&#x5165;Qdisc&#x4e86;,&#x6240;&#x4ee5;&#x81f3;&#x5c11;&#x8981;run&#x4e00;&#x6b21;Qdisc">
<node CREATED="1413335240439" FOLDED="true" ID="ID_573724330" MODIFIED="1429337639439">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void __qdisc_run(struct Qdisc *q)
    </p>
    <p>
      &#23601;&#26159;&#19981;&#20572;&#20174;Qdisc&#37324;&#38754;&#21462;&#21253;,&#28982;&#21518;&#21457;&#36865;,&#30452;&#21040;&#21457;&#36865;&#27425;&#25968;&#36229;&#36807;&#26576;&#20010;&#35774;&#23450;&#30340;&#26435;&#37325;
    </p>
    <p>
      &#27492;&#26102;&#33509;Qdisc&#37324;&#36824;&#26377;&#21253;&#21017;&#38656;&#35302;&#21457;&#36719;&#20013;&#26029;NET_TX_SOFTIRQ, &#22312;&#36719;&#20013;&#26029;&#20869;&#32487;&#32493;&#21457;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413335285341" ID="ID_364444115" MODIFIED="1413396969634">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int qdisc_restart(struct Qdisc *q)
    </p>
    <p>
      &#35843;&#29992;Qdisc-&gt;dequeue&#21462;&#21253;, &#28982;&#21518;&#35843;&#29992;sch_direct_xmit&#21457;&#36865;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413396971171" ID="ID_467495758" LINK="#ID_524393988" MODIFIED="1413396978071" TEXT="sch_direct_xmit"/>
</node>
<node CREATED="1413397044117" FOLDED="true" ID="ID_656863601" MODIFIED="1429318112394">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21457;&#21253;&#25968;&#37327;&#36229;&#36807;&#26576;&#20010;&#26435;&#37325;&#25110;&#24403;&#21069;&#31995;&#32479;&#38656;&#35201;&#35843;&#24230;&#21017;&#35843;&#29992;void __netif_schedule(struct Qdisc *q)&#35302;&#21457;&#36719;&#20013;&#26029;NET_TX_SOFTIRQ, &#20197;&#20415;&#21518;&#32493;&#22312;&#36719;&#20013;&#26029;&#20869;&#32487;&#32493;&#21457;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413397149100" ID="ID_417375533" MODIFIED="1413397150153" TEXT="void __netif_schedule(struct Qdisc *q)">
<node CREATED="1413397578285" ID="ID_1678245398" MODIFIED="1413397665374">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;Qdisc&#25554;&#20837;&#21040;softnet_data&#30340;&#21457;&#21253;&#35843;&#24230;&#21015;&#34920;&#20013;
    </p>
    <p>
      &#21363;Qdisc-&gt;next_sched&#38142;&#20837;softnet_data-&gt;output_queue
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1413397690749" ID="ID_1258945726" MODIFIED="1413397698652" TEXT="&#x89e6;&#x53d1;&#x8f6f;&#x4e2d;&#x65ad;NET_TX_SOFTIRQ">
<node CREATED="1413397712709" ID="ID_388530946" MODIFIED="1413397713684" TEXT="raise_softirq_irqoff(NET_TX_SOFTIRQ);"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1413329632784" FOLDED="true" ID="ID_1629761885" MODIFIED="1429318806294">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;Qdisc&#27809;&#26377;enqueue&#20989;&#25968;, &#34920;&#26126;&#27809;&#26377;queue,&#25152;&#20197;&#30452;&#25509;&#35843;&#29992;&#32593;&#32476;&#35774;&#22791;&#30340;ndo_start_xmit&#20989;&#25968;&#21457;&#36865;
    </p>
    <p>
      &#22914;&#26524;&#30452;&#25509;&#21457;&#36865;&#22833;&#36133;&#21017;&#20002;&#24323;&#21253;,&#22240;&#20026;&#27809;&#26377;queue&#21487;&#20197;&#32531;&#23384;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413330112834" ID="ID_1155612073" MODIFIED="1413330113811" TEXT="&#x80fd;&#x591f;&#x76f4;&#x63a5;&#x53d1;&#x9001;&#x5fc5;&#x987b;&#x6ee1;&#x8db3;&#x51e0;&#x4e2a;&#x6761;&#x4ef6; :">
<node CREATED="1413329866410" ID="ID_658615132" MODIFIED="1413329954479" TEXT="&#x63a5;&#x53e3;&#x5fc5;&#x987b;&#x662f;UP&#x7684;(dev-&gt;flags &amp; IFF_UP)"/>
<node CREATED="1413329994848" FOLDED="true" ID="ID_1013365825" MODIFIED="1413333072271" TEXT="queue&#x6ca1;&#x6709;&#x88ab;&#x7981;&#x6b62;(!netif_xmit_stopped(txq))">
<node CREATED="1413330506936" ID="ID_848542337" MODIFIED="1413330537618" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x53ef;&#x4ee5;&#x7528;&#x4ee5;&#x4e0b;&#x51e0;&#x4e2a;API&#x5f00;&#x542f;&#x548c;&#x505c;&#x6b62;queue"/>
<node CREATED="1413330422409" ID="ID_612737091" MODIFIED="1413330423777" TEXT="void netif_start_queue(struct net_device *dev)"/>
<node CREATED="1413330462326" ID="ID_1114663860" MODIFIED="1413330462910" TEXT="void netif_wake_queue(struct net_device *dev)"/>
<node CREATED="1413330480825" ID="ID_1703408315" MODIFIED="1413330482081" TEXT="void netif_stop_queue(struct net_device *dev)"/>
</node>
</node>
<node CREATED="1413330075480" ID="ID_1739407236" MODIFIED="1423462948385">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30452;&#25509;&#21457;&#36865;&#21253;
    </p>
    <p>
      int dev_hard_start_xmit(struct sk_buff *skb, struct net_device *dev, struct netdev_queue *txq)
    </p>
  </body>
</html></richcontent>
<node CREATED="1423463047627" ID="ID_1444804450" MODIFIED="1423463136432">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;dev-&gt;priv_flags&#19978;&#26377;&#26631;&#35782;IFF_XMIT_DST_RELEASE&#65292;&#34920;&#31034;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#22312;&#21457;&#21253;&#36807;&#31243;&#20013;&#19981;&#20877;&#38656;&#35201;&#36335;&#30001;&#20449;&#24687;&#65292;&#22240;&#27492;&#22312;&#36825;&#37324;&#21487;&#20197;&#25226;skb-&gt;dst&#25152;&#20195;&#34920;&#30340;&#36335;&#30001;&#20449;&#24687;&#37322;&#25918;&#25481;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423463154477" ID="ID_1808574145" MODIFIED="1423463397721">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#26631;&#35782;IFF_XMIT_DST_RELEASE&#40664;&#35748;&#26159;&#22312;dev-&gt;priv_flags&#19978;&#30340;&#65292;&#22240;&#20026;&#19968;&#33324;&#24773;&#20917;&#19979;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#22312;&#21457;&#21253;&#36807;&#31243;&#20013;&#19981;&#38656;&#35201;&#36335;&#30001;&#20449;&#24687;&#65292;&#36825;&#20010;&#26631;&#35782;&#22312;&#20998;&#37197;struct net_device&#32467;&#26500;&#26102;&#23601;&#24050;&#32622;&#20301;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423463505236" ID="ID_382009298" MODIFIED="1423463509300" TEXT="alloc_netdev()">
<node CREATED="1423463455768" ID="ID_338277093" MODIFIED="1423463459916" TEXT="alloc_netdev_mqs()">
<node CREATED="1423463539032" ID="ID_943752129" MODIFIED="1423463541260" TEXT="dev-&gt;priv_flags = IFF_XMIT_DST_RELEASE"/>
</node>
</node>
</node>
<node CREATED="1423463647750" ID="ID_1003819062" MODIFIED="1423463650267" TEXT="skb_dst_drop(skb)"/>
</node>
<node CREATED="1413331252522" ID="ID_621427350" MODIFIED="1423117302707">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;&#27599;&#19968;&#20010;any packet type(&#21363;&#25910;&#21457;&#26102;&#32463;&#36807;&#30340;&#20219;&#20309;&#21253;&#37117;&#35201;&#22788;&#29702;)&#30340;&#25910;&#21253;&#20989;&#25968;&#22788;&#29702;&#27492;&#22788;&#21457;&#36865;&#30340;&#21253;
    </p>
    <p>
      void dev_queue_xmit_nit(struct sk_buff *skb, struct net_device *dev)
    </p>
    <p>
      raw socket&#21363;&#27880;&#20876;&#22312;any packet type&#20013;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413332472972" ID="ID_1019599564" MODIFIED="1413332538989">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#36890;&#36807;socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL))&#21019;&#24314;&#30340;&#21407;&#22987;&#22871;&#25509;&#21475;&#65292;&#19981;&#20294;&#21487;&#20197;&#25509;&#21463;&#20174;&#22806;&#37096;&#36755;&#20837;&#30340;&#25968;&#25454;&#21253;&#65292;&#32780;&#19988;&#23545;&#20110;&#30001;&#20110;&#26412;&#22320;&#36755;&#20986;&#30340;&#25968;&#25454;&#21253;&#65292;&#22914;&#26524;&#28385;&#36275;&#26465;&#20214;&#65292;&#20063;&#21487;&#20197;&#33021;&#25509;&#21463;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      dev_queue_xmit_nit&#23601;&#26159;&#29992;&#26469;&#25509;&#25910;&#30001;&#20110;&#26412;&#22320;&#36755;&#20986;&#30340;&#25968;&#25454;&#21253;&#65292;&#22312;&#38142;&#36335;&#23618;&#30340;&#36755;&#20986;&#36807;&#31243;&#20013;&#65292;&#20250;&#35843;&#29992;&#27492;&#20989;&#25968;&#65292;&#23558;&#28385;&#36275;&#26465;&#20214;&#30340;&#25968;&#25454;&#21253;&#36755;&#20837;&#21040;RAW&#22871;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1413331566195" ID="ID_545020641" MODIFIED="1413331675932">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#26377;vlan tag(skb-&gt;vlan_tci != 0)&#19988;&#30828;&#20214;&#19981;&#36127;&#36131;&#21152;vlan tag,&#37027;&#20040;&#22312;&#36719;&#20214;&#37324;&#21152;&#19978;
    </p>
    <p>
      struct sk_buff *__vlan_put_tag(struct sk_buff *skb, u16 vlan_tci)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1423464137177" ID="ID_636485408" MODIFIED="1423464421258" TEXT="&#x5982;&#x679c;&#x9700;&#x8981;&#x505a;segmentation (&#x5373;skb_shinfo(skb)-&gt;gso_size != 0)&#xff0c;&#xa;&#x800c;&#x786c;&#x4ef6;&#x53c8;&#x4e0d;&#x652f;&#x6301;&#x6b64;&#x79cd;&#x7c7b;&#x578b;&#x7684;segmentation offloading&#xa;(&#x5373;skb-&gt;dev-&gt;features &amp; skb_shinfo(skb)-&gt;gso_type == 0)&#xff0c;&#xa;&#x5219;&#x9700;&#x8981;&#x901a;&#x8fc7;&#x8f6f;&#x4ef6;&#x6765;&#x505a;segmentation">
<node CREATED="1423464465897" ID="ID_1881965062" LINK="#ID_769716863" MODIFIED="1423544653287" TEXT="dev_gso_segment()"/>
</node>
<node CREATED="1423548911983" ID="ID_769446014" MODIFIED="1423549019854" TEXT="&#x5982;&#x679c;&#x5305;&#x7684;&#x5185;&#x5bb9;&#x4e0d;&#x662f;&#x4f4d;&#x4e8e;&#x8fde;&#x7eed;&#x5185;&#x5b58;&#x4e2d;&#xff0c;&#x5e76;&#x4e14;&#x786c;&#x4ef6;&#x4e5f;&#x4e0d;&#x652f;&#x6301;&#x975e;&#x8fde;&#x7eed;&#x5185;&#x5b58;&#xff0c;&#x5219;&#x5c06;&#x5305;&#x5185;&#x5bb9;&#x7ebf;&#x6027;&#x5316;&#xff0c;&#x5373;&#x642c;&#x79fb;&#x5230;&#x4e00;&#x5757;&#x8fde;&#x7eed;&#x5185;&#x5b58;&#x4e2d;">
<node CREATED="1423549037376" ID="ID_6198288" MODIFIED="1423549039447" TEXT="__skb_linearize(skb)"/>
</node>
<node CREATED="1413331751899" ID="ID_1999369756" MODIFIED="1413331839887" TEXT="&#x5982;&#x679c;&#x5305;&#x7684;&#x7f51;&#x7edc;&#x5c42;&#x548c;&#x4f20;&#x8f93;&#x5c42;&#x5934;&#x90e8;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x6ca1;&#x6709;&#x8ba1;&#x7b97;,&#x4e14;&#x786c;&#x4ef6;&#x4e0d;&#x652f;&#x6301;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;,&#x90a3;&#x4e48;&#x5728;&#x8fd9;&#x91cc;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1413331883780" ID="ID_1588324328" MODIFIED="1413331922823">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#21457;&#36865;&#21253;
    </p>
    <p>
      skb-&gt;dev-&gt;netdev_ops-&gt;ndo_start_xmit(skb, dev)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1413322208771" ID="ID_1391798542" MODIFIED="1429320279244">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36719;&#20013;&#26029;NET_TX_SOFTIRQ
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;net_tx_action
    </p>
  </body>
</html></richcontent>
<node CREATED="1413413238448" FOLDED="true" ID="ID_540400590" MODIFIED="1458256147819">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;&#21253;&#21457;&#36865;&#23436;&#27605;&#21518;, &#35201;&#37322;&#25918;&#23427;&#21344;&#26377;&#30340;skb, &#30495;&#27491;&#37322;&#25918;&#30340;&#20989;&#25968;&#26159;dev_kfree_skb(skb).
    </p>
    <p>
      &#36825;&#20010;&#24037;&#20316;&#19968;&#33324;&#26159;&#30001;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#22312;&#25910;&#21040;&#21457;&#21253;&#23436;&#25104;&#30340;&#30828;&#20013;&#26029;&#21518;&#26469;&#20570;, &#20294;&#26159;&#36825;&#20010;&#24037;&#20316;&#32791;&#26102;&#36739;&#38271;, &#20250;&#36896;&#25104;&#30828;&#20013;&#26029;&#21709;&#24212;&#21464;&#24930;.
    </p>
    <p>
      &#25152;&#20197;&#24403;&#38656;&#35201;&#22312;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;&#20013;&#37322;&#25918;skb&#26102;&#25226;&#36825;&#20010;&#24037;&#20316;&#20132;&#32473;NET_TX_SOFTIRQ&#36719;&#20013;&#26029;&#26469;&#20570;, &#20013;&#26029;&#20165;&#38656;&#23558;&#38656;&#35201;&#37322;&#25918;&#30340;skb&#25918;&#20837;softnet_data-&gt;completion_queue
    </p>
  </body>
</html></richcontent>
<node CREATED="1413414072690" ID="ID_1344283286" MODIFIED="1413414114834" TEXT="&#x904d;&#x5386;softnet_data-&gt;completion_queue, &#x8c03;&#x7528;__kfree_skb(skb)&#x91ca;&#x653e;&#x8fd9;&#x4e2a;&#x94fe;&#x8868;&#x4e2d;&#x7684;skb"/>
<node CREATED="1413413881914" ID="ID_1763833029" MODIFIED="1413413883860" TEXT="void dev_kfree_skb_any(struct sk_buff *skb)">
<node CREATED="1413413902625" ID="ID_620522936" MODIFIED="1413413970316">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#21069;&#22788;&#20110;&#20013;&#26029;&#20869;&#21017;&#20165;&#20165;&#23558;skb&#38142;&#20837;softnet_data-&gt;completion_queue
    </p>
    <p>
      dev_kfree_skb_irq(skb)
    </p>
  </body>
</html></richcontent>
<node CREATED="1413413988801" ID="ID_826547406" MODIFIED="1413413990376" TEXT="&#x5c06;skb&#x94fe;&#x5165;softnet_data-&gt;completion_queue"/>
<node CREATED="1413414003273" ID="ID_146034872" MODIFIED="1413414011245" TEXT="&#x89e6;&#x53d1;&#x8f6f;&#x4e2d;&#x65ad;NET_TX_SOFTIRQ"/>
</node>
<node CREATED="1413413240043" ID="ID_1859450523" MODIFIED="1413413241742" TEXT="dev_kfree_skb(skb)"/>
</node>
</node>
<node CREATED="1413414234443" ID="ID_1231783061" MODIFIED="1423462935081" TEXT="&#x904d;&#x5386;softnet_data-&gt;output_queue&#x4e2d;&#x7684;Qdisc">
<node CREATED="1413414289729" ID="ID_1127164094" MODIFIED="1413414315070" TEXT="&#x5982;&#x679c;&#x80fd;&#x6210;&#x529f;&#x7684;&#x9501;&#x4f4f;&#x8fd9;&#x4e2a;Qdisc&#x5219;&#x8c03;&#x7528;qdisc_run(q)&#x8c03;&#x5ea6;&#x5b83;">
<node CREATED="1413414316228" ID="ID_1625925337" MODIFIED="1413414734580">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      qdisc_run(q) : &#25552;&#20379;qdisc_run_begin(q)&#21644;qdisc_run_end(q)&#30340;&#20445;&#25252;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413414594673" ID="ID_535423974" LINK="#ID_573724330" MODIFIED="1413414778090">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      __qdisc_run(q) : &#35843;&#29992;&#32773;&#25552;&#20379;&#20102;qdisc_run_begin(q)&#21644;qdisc_run_end(q)&#30340;&#20445;&#25252;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1413414318457" ID="ID_414428649" LINK="#ID_417375533" MODIFIED="1413414513061">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#19981;&#33021;&#38145;&#20303;&#36825;&#20010;Qdisc&#21017;&#34920;&#26126;&#21035;&#30340;CPU&#22312;&#35843;&#24230;&#36825;&#20010;Qdisc, &#22240;&#27492;&#38656;&#35201;&#24310;&#36831;&#23427;
    </p>
    <p>
      &#36825;&#37324;&#35843;&#29992;__netif_reschedule(q)&#20877;&#27425;&#35843;&#24230;&#27492;Qdisc
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1413334328324" FOLDED="true" ID="ID_1310145984" MODIFIED="1458256290743" TEXT="&#x57fa;&#x672c;&#x539f;&#x5219;">
<node CREATED="1413334337502" ID="ID_326957852" MODIFIED="1413334586305">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#27425;&#21457;&#21253;&#26102;&#24635;&#26159;run&#19968;&#36941;Qdisc(__qdisc_run(q)), &#38500;&#38750;&#27492;Qdisc&#24050;&#32463;&#22312;running&#20102;
    </p>
    <p>
      &#22914;&#26524;&#24403;&#21069;Qdisc&#37324;&#38754;&#27809;&#26377;queue&#20303;&#30340;&#20854;&#23427;&#21253;,&#21017;&#36825;&#26679;&#20570;&#21487;&#20197;&#26126;&#26174;&#20943;&#23567;&#24403;&#21069;&#21253;&#30340;&#21457;&#36865;&#24310;&#26102;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413334602268" ID="ID_428817792" MODIFIED="1413334861176">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21457;&#21253;&#26102;run Qdisc&#19981;&#33021;&#26102;&#38388;&#36807;&#38271;, &#21542;&#21017;&#24433;&#21709;&#25910;&#21253;&#36807;&#31243;, &#22240;&#20026;&#27492;&#26102;&#23454;&#38469;&#19978;&#26159;&#22312;NET_RX_SOFTIRQ&#37324;&#38754;
    </p>
    <p>
      &#25152;&#20197;&#21457;&#21253;&#26102;run Qdisc&#22914;&#26524;&#36229;&#36807;&#19968;&#20010;&#26435;&#37325;,&#21017;&#35302;&#21457;NET_TX_SOFTIRQ&#36719;&#20013;&#26029;,
    </p>
    <p>
      &#22312;net_tx_action&#20013;&#21435;&#21457;&#36865;&#21097;&#20313;&#30340;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413334942334" ID="ID_1637252936" MODIFIED="1413335048363">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CPU&#21457;&#36865;&#19968;&#20010;Qdisc&#20869;&#30340;&#21253;&#26102;&#24635;&#26159;&#35201;&#29992;
    </p>
    <p>
      qdisc_run_begin(q)
    </p>
    <p>
      qdisc_run_end(q)
    </p>
    <p>
      &#21253;&#35065;&#36215;&#26469;, &#20197;&#36991;&#20813;&#22810;&#20010;CPU&#21516;&#26102;&#21457;&#36865;&#19968;&#20010;Qdisc&#20869;&#30340;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1318519162561" FOLDED="true" ID="ID_1140335888" MODIFIED="1458256159726" TEXT="napi&#x5de5;&#x4f5c;&#x539f;&#x7406;">
<node CREATED="1318522031112" ID="ID_891593010" MODIFIED="1318522035292" TEXT="&#x539f;&#x7406;"/>
<node CREATED="1318522036601" FOLDED="true" ID="ID_1626973616" MODIFIED="1458256157764" TEXT="&#x521d;&#x59cb;&#x5316;&#xff1a;&#xa;register_netdev&#x4e4b;&#x524d;&#x5e94;&#x8c03;&#x7528;netif_napi_add&#xa;&#x5c06;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x4e0e;napi&#x5173;&#x8054;&#x8d77;&#x6765;">
<node CREATED="1318522441322" ID="ID_956141994" MODIFIED="1318522487356" TEXT="&#x6b64;&#x51fd;&#x6570;&#x4f1a;&#x5c06;napi-&gt;state&#x4e0a;&#x7684;NAPI_STATE_SCHED&#x7f6e;&#x4f4d;"/>
</node>
<node CREATED="1318522493997" ID="ID_437927741" MODIFIED="1413308846947" TEXT="open:&#xa;&#x8c03;&#x7528;napi_enable&#x4ee5;&#x5141;&#x8bb8;poll&#x6b64;&#x8bbe;&#x5907;">
<node CREATED="1318522441322" ID="ID_1461228609" MODIFIED="1318522700582" TEXT="&#x6b64;&#x51fd;&#x6570;&#x4f1a;&#x5c06;napi-&gt;state&#x4e0a;&#x7684;NAPI_STATE_SCHED&#x4f4d;&#x6e05;&#x9664;"/>
</node>
<node CREATED="1318522744190" ID="ID_1093003079" MODIFIED="1413310949155" TEXT="&#x6536;&#x5305;&#x4e2d;&#x65ad;&#xff1a;&#xa;&#x9996;&#x5148;&#x8c03;&#x7528;napi_schedule_prep&#x786e;&#x5b9a;&#x53ef;&#x4ee5;&#x5f00;&#x59cb;&#x65b0;&#x4e00;&#x8f6e;&#x8c03;&#x5ea6;&#xa;&#xff08;&#x5373;&#x8c03;&#x5ea6;&#x6ca1;&#x6709;&#x88ab;&#x7981;&#x6b62;&#x4e14;&#x6ca1;&#x6709;&#x6b63;&#x5728;&#x8fd0;&#x884c;&#x7684;&#x8c03;&#x5ea6;&#xff09;&#xff0c;&#xa;&#x4e4b;&#x540e;&#x5173;&#x95ed;&#x6536;&#x5305;&#x4e2d;&#x65ad;&#xff0c;&#x518d;&#x8c03;&#x7528;__napi_schedule&#x5f00;&#x59cb;&#x65b0;&#x4e00;&#x8f6e;&#x8c03;&#x5ea6;">
<node CREATED="1318523168775" ID="ID_444914463" MODIFIED="1318524160692" TEXT="napi_schedule_prep&#x4f1a;&#x8bbe;&#x7f6e;napi-&gt;state&#x4e0a;&#x7684;NAPI_STATE_SCHED&#x4f4d;"/>
<node CREATED="1318523204359" ID="ID_100986265" MODIFIED="1318523264734" TEXT="__napi_schedule&#x5373;&#x5c06;napi-&gt;poll_list&#x52a0;&#x5165;softnet_data.poll_list&#x4e2d;"/>
</node>
<node CREATED="1318523285357" ID="ID_970903096" MODIFIED="1413311503481" TEXT="poll&#xff1a;&#xa;&#x9996;&#x5148;&#x8c03;&#x7528;netif_receive_skb&#x6536;&#x5305;&#xff0c;&#x5fc5;&#x987b;&#x4fdd;&#x8bc1;&#x5df2;&#x5904;&#x7406;&#x5305;&#x6570;&#x4e0d;&#x8d85;&#x8fc7;&#x4f20;&#x5165;&#x53c2;&#x6570;budget&#xff08;&#x5373;netif_napi_add&#x65f6;&#x8bbe;&#x5b9a;&#x7684;&#x6743;&#x91cd;&#xff09;&#xff0c;&#x82e5;budget&#x5df2;&#x7528;&#x5b8c;&#x4f46;&#x8fd8;&#x6709;&#x5305;&#x8981;&#x5904;&#x7406;&#x5219;&#x8c03;&#x7528;napi_complete&#x5b8c;&#x540e;&#x8fd8;&#x8981;&#x8c03;&#x7528;napi_reschedule&#x518d;&#x8bf7;&#x6c42;&#x65b0;&#x7684;&#x8c03;&#x5ea6;&#x3002;&#x82e5;budget&#x672a;&#x7528;&#x5b8c;&#x4e14;&#x5305;&#x5df2;&#x5904;&#x7406;&#x5b8c;&#x5219;&#x6253;&#x5f00;&#x6536;&#x5305;&#x4e2d;&#x65ad;&#x518d;&#x8c03;&#x7528;napi_complete&#x3002;">
<node CREATED="1318523168775" ID="ID_270410606" MODIFIED="1318523905101" TEXT="napi_complete&#x4f1a;&#x6e05;&#x9664;napi-&gt;state&#x4e0a;&#x7684;NAPI_STATE_SCHED&#x4f4d;"/>
<node CREATED="1318524008730" ID="ID_1103698761" MODIFIED="1318524101643" TEXT="napi_reschedule&#x5373;&#xff1a;&#xa;&#x5148;&#x8c03;&#x7528;napi_schedule_prep&#xa;&#x518d;&#x8c03;&#x7528;__napi_schedule"/>
</node>
<node CREATED="1413247764736" ID="ID_209074643" LINK="#ID_964769282" MODIFIED="1413309317012">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25910;&#21253;&#20013;&#26029;&#20013;&#35843;&#29992;__napi_schedule&#26102;&#35302;&#21457;NET_RX_SOFTIRQ&#36719;&#20013;&#26029;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1413248314291" ID="ID_1833885805" LINK="#ID_307790411" MODIFIED="1413309412977" TEXT="napi&#x7684;&#x6267;&#x884c;"/>
<node CREATED="1413308873576" ID="ID_1229744835" MODIFIED="1413308876129" TEXT="API">
<node CREATED="1413312604195" ID="ID_806920526" MODIFIED="1413312639396" TEXT="void netif_napi_add(struct net_device *dev, struct napi_struct *napi, &#xa;                                int (*poll)(struct napi_struct *, int), int weight)"/>
<node CREATED="1413311980258" FOLDED="true" ID="ID_88451113" MODIFIED="1413315418438">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void napi_schedule(struct napi_struct *n)
    </p>
    <p>
      bool napi_reschedule(struct napi_struct *napi)
    </p>
    <p>
      &#36825;&#20004;&#20010;&#20989;&#25968;&#38500;&#20102;&#26377;&#26080;&#36820;&#22238;&#20540;&#20043;&#22806;&#27809;&#26377;&#21306;&#21035;
    </p>
  </body>
</html></richcontent>
<node CREATED="1413312080905" ID="ID_1484203564" LINK="#ID_504072477" MODIFIED="1413312087654" TEXT="__napi_schedule"/>
</node>
<node CREATED="1413311792352" FOLDED="true" ID="ID_504072477" MODIFIED="1413315419431" TEXT="void __napi_schedule(struct napi_struct *n)">
<node CREATED="1413311623640" ID="ID_879431452" MODIFIED="1413311831988" TEXT="&#x5c06;struct napi_struct&#x7ed3;&#x6784;&#x63d2;&#x5165;&#x5230;softnet_data.poll_list&#x4e2d;"/>
<node CREATED="1413311852618" ID="ID_1310065133" MODIFIED="1413311873817" TEXT="&#x89e6;&#x53d1;&#x8f6f;&#x4e2d;&#x65ad;NET_RX_SOFTIRQ">
<node CREATED="1413311862142" ID="ID_177001108" MODIFIED="1413311862142" TEXT="__raise_softirq_irqoff(NET_RX_SOFTIRQ);"/>
</node>
</node>
<node CREATED="1413311597610" FOLDED="true" ID="ID_1117804209" MODIFIED="1413315420395" TEXT="void napi_complete(struct napi_struct *n)">
<node CREATED="1413311623640" ID="ID_211671764" MODIFIED="1413311659436" TEXT="&#x5c06;struct napi_struct&#x7ed3;&#x6784;&#x4ece;softnet_data.poll_list&#x4e2d;&#x5220;&#x9664;"/>
<node CREATED="1413311679154" ID="ID_1718149872" MODIFIED="1413311700123" TEXT="&#x6e05;&#x9664;struct napi_struct&#x7ed3;&#x6784;&#x4e0a;&#x7684;NAPI_STATE_SCHED&#x6807;&#x8bc6;"/>
</node>
</node>
</node>
</node>
<node CREATED="1385368159422" FOLDED="true" ID="ID_1163945954" MODIFIED="1458256126647" POSITION="right" TEXT="&#x7f51;&#x7edc;&#x9a71;&#x52a8;">
<node CREATED="1385368169546" FOLDED="true" ID="ID_1061298545" MODIFIED="1419015295870" TEXT="bonding">
<node CREATED="1385368184890" ID="ID_807085508" MODIFIED="1385371406918" TEXT="load balancing (round-robin)">
<node CREATED="1385368368004" FOLDED="true" ID="ID_1860220606" MODIFIED="1385371407757" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1385368377860" ID="ID_1933958566" MODIFIED="1385368379512" TEXT="Round-robin&#xff08;&#x5faa;&#x73af;&#x8d5b;&#xff09;&#x7b56;&#x7565;&#xff1a;&#x6309;&#x987a;&#x5e8f;&#x4f20;&#x8f93;&#x6570;&#x636e;&#x5305;&#xff0c;&#x4ece;&#x7b2c;&#x4e00;&#x4e2a;&#x53ef;&#x7528;&#x7684;slave&#x5230;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53ef;&#x7528;&#x7684;slave"/>
</node>
</node>
<node CREATED="1385368223400" ID="ID_607472256" MODIFIED="1385368224404" TEXT="fault-tolerance (active-backup)">
<node CREATED="1385368409587" FOLDED="true" ID="ID_1530861192" MODIFIED="1385371408797" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1385368414450" ID="ID_167087691" MODIFIED="1385368415694" TEXT="Active-backup&#xff08;&#x6fc0;&#x6d3b;-&#x5907;&#x4efd;&#xff09;&#x7b56;&#x7565;&#xff1a;&#x53ea;&#x6709;&#x4e00;&#x4e2a;slave&#x662f;&#x6fc0;&#x6d3b;&#x7684;(active)&#x3002;&#x5176;&#x4ed6;&#x7684;slave&#x53ea;&#x6709;&#x5728;&#x5f53;&#x524d;&#x6fc0;&#x6d3b;&#x7684;slave&#x6545;&#x969c;&#x540e;&#x624d;&#x4f1a;&#x53d8;&#x4e3a;&#x6fc0;&#x6d3b;&#x7684;(active)"/>
<node CREATED="1385368523935" ID="ID_1855302367" MODIFIED="1385369059231" TEXT="active-backup&#x6a21;&#x5f0f;&#x4e0b;&#x51fa;&#x73b0;failover&#x65f6;&#x3010;&#x6307;&#x4e00;&#x4e2a;slave&#x53d1;&#x751f;&#x6545;&#x969c;&#xff0c;&#x53e6;&#x4e00;&#x4e2a;slave&#x88ab;&#x6fc0;&#x6d3b;&#x3011;&#xff0c;bonding&#x5c06;&#x4f1a;&#x5728;&#x65b0;&#x7684;slave&#x4e0a;&#x53d1;&#x9001;ARP&#x8bf7;&#x6c42;&#xff0c;&#x9488;&#x5bf9;&#x6bcf;&#x4e2a;&#x57fa;&#x4e8e;&#x6b64;bonding master&#x7684;layer3 interface&#x53d1;&#x9001;&#x4e00;&#x4e2a;ARP.&#x9488;&#x5bf9;VLAN&#x63a5;&#x53e3;&#x7684;ARP&#x8bf7;&#x6c42;&#x5c06;&#x4f1a;&#x88ab;&#x6253;&#x4e0a;&#x76f8;&#x5e94;&#x7684;VLAN id."/>
</node>
<node CREATED="1385369768264" ID="ID_1905945127" MODIFIED="1385371411681" TEXT="&#x914d;&#x7f6e;&#x53c2;&#x6570;">
<node CREATED="1385369788600" FOLDED="true" ID="ID_465227392" MODIFIED="1385371412581" TEXT="primary">
<node CREATED="1385369805287" ID="ID_1389518493" MODIFIED="1385369807840" TEXT="&#x6307;&#x5b9a;&#x54ea;&#x4e2a;slave&#x6210;&#x4e3a;&#x4e3b;&#x8bbe;&#x5907;&#xff08;primary device&#xff09;&#xff0c;&#x53d6;&#x503c;&#x4e3a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x5982;eth0&#xff0c;eth1&#x7b49;&#x3002;&#x53ea;&#x8981;&#x6307;&#x5b9a;&#x7684;&#x8bbe;&#x5907;&#x53ef;&#x7528;&#xff0c;&#x5b83;&#x5c06;&#x4e00;&#x76f4;&#x662f;&#x6fc0;&#x6d3b;&#x7684;slave&#x3002;&#x53ea;&#x6709;&#x5728;&#x4e3b;&#x8bbe;&#x5907;&#xff08;primary device&#xff09;&#x65ad;&#x7ebf;&#x65f6;&#x624d;&#x4f1a;&#x5207;&#x6362;&#x8bbe;&#x5907;&#x3002;&#x8fd9;&#x5728;&#x5e0c;&#x671b;&#x67d0;&#x4e2a;slave&#x8bbe;&#x5907;&#x4f18;&#x5148;&#x4f7f;&#x7528;&#x7684;&#x60c5;&#x5f62;&#x4e0b;&#x5f88;&#x6709;&#x7528;&#xff0c;&#x6bd4;&#x5982;&#xff0c;&#x67d0;&#x4e2a;slave&#x8bbe;&#x5907;&#x6709;&#x66f4;&#x9ad8;&#x7684;&#x541e;&#x5410;&#x7387;&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1385368232376" ID="ID_440132217" MODIFIED="1385368233172" TEXT="load balancing (xor)">
<node CREATED="1385369100543" FOLDED="true" ID="ID_638265443" MODIFIED="1385371414733" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1385369105309" ID="ID_1560071735" MODIFIED="1385369127068" TEXT="XOR&#x7b56;&#x7565;&#xff1a;&#x57fa;&#x4e8e;&#x6307;&#x5b9a;&#x7684;&#x4f20;&#x8f93;HASH&#x7b56;&#x7565;&#x4f20;&#x8f93;&#x6570;&#x636e;&#x5305;&#x3002;&#x7f3a;&#x7701;&#x7684;&#x7b56;&#x7565;&#x662f;&#xff1a;(&#x6e90;MAC&#x5730;&#x5740; XOR &#x76ee;&#x6807;MAC&#x5730;&#x5740;) % slave&#x6570;&#x91cf;&#x3002;&#x5176;&#x4ed6;&#x7684;&#x4f20;&#x8f93;&#x7b56;&#x7565;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;xmit_hash_policy&#x9009;&#x9879;&#x6307;&#x5b9a;."/>
</node>
<node CREATED="1385370364182" ID="ID_828553902" MODIFIED="1385370371713" TEXT="&#x914d;&#x7f6e;&#x53c2;&#x6570;">
<node CREATED="1385370373462" FOLDED="true" ID="ID_1425252960" MODIFIED="1385371415445" TEXT="xmit_hash_policy">
<node CREATED="1385370413332" ID="ID_767749794" MODIFIED="1385370416447" TEXT="layer2">
<node CREATED="1385370429620" ID="ID_456885160" MODIFIED="1385370468753" TEXT="(SrcMAC XOR DstMAC)%slave_number"/>
</node>
<node CREATED="1385370494114" ID="ID_1820807510" MODIFIED="1385370495677" TEXT="layer3+4">
<node CREATED="1385370580559" ID="ID_823695833" MODIFIED="1385370650777" TEXT="((SrcPort XOR DstPort) XOR ((SrcIP XOR DstIP) AND 0xffff))%slave_number"/>
</node>
</node>
</node>
</node>
<node CREATED="1385368241480" ID="ID_874213891" MODIFIED="1385368242147" TEXT="fault-tolerance (broadcast)">
<node CREATED="1385369144780" FOLDED="true" ID="ID_1987731130" MODIFIED="1385371417701" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1385369150172" ID="ID_292574606" MODIFIED="1385369167255" TEXT="Broadcase&#xff08;&#x5e7f;&#x64ad;&#xff09;&#x7b56;&#x7565;&#xff1a;&#x5728;&#x6bcf;&#x4e2a;slave&#x63a5;&#x53e3;&#x4e0a;&#x4f20;&#x8f93;&#x6bcf;&#x4e2a;&#x6570;&#x636e;&#x5305;"/>
</node>
</node>
<node CREATED="1385368250216" ID="ID_1838385855" MODIFIED="1385368250899" TEXT="IEEE 802.3ad Dynamic link aggregation">
<node CREATED="1385369263848" FOLDED="true" ID="ID_1827855" MODIFIED="1385371419357" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1385369270904" ID="ID_1896875982" MODIFIED="1385369285335" TEXT="IEEE 802.3ad Dynamic link aggregation&#xff08;&#x52a8;&#x6001;&#x94fe;&#x63a5;&#x805a;&#x5408;&#xff09;&#x3002;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x805a;&#x5408;&#x7ec4;&#xff0c;&#x5b83;&#x4eec;&#x5171;&#x4eab;&#x540c;&#x6837;&#x7684;&#x901f;&#x7387;&#x548c;&#x53cc;&#x5de5;&#x8bbe;&#x5b9a;&#x3002;&#x6839;&#x636e;802.3ad&#x89c4;&#x8303;&#x5c06;&#x591a;&#x4e2a;slave&#x5de5;&#x4f5c;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x6fc0;&#x6d3b;&#x7684;&#x805a;&#x5408;&#x4f53;&#x4e0b;."/>
</node>
<node CREATED="1385370364182" ID="ID_470919710" MODIFIED="1385370371713" TEXT="&#x914d;&#x7f6e;&#x53c2;&#x6570;">
<node CREATED="1385370373462" FOLDED="true" ID="ID_1799116004" MODIFIED="1385371420933" TEXT="xmit_hash_policy">
<node CREATED="1385370413332" ID="ID_805591293" MODIFIED="1385370416447" TEXT="layer2">
<node CREATED="1385370429620" ID="ID_112199456" MODIFIED="1385370468753" TEXT="(SrcMAC XOR DstMAC)%slave_number"/>
</node>
<node CREATED="1385370494114" ID="ID_613359080" MODIFIED="1385370495677" TEXT="layer3+4">
<node CREATED="1385370580559" ID="ID_239569045" MODIFIED="1385370650777" TEXT="((SrcPort XOR DstPort) XOR ((SrcIP XOR DstIP) AND 0xffff))%slave_number"/>
</node>
</node>
<node CREATED="1385370697355" FOLDED="true" ID="ID_1640805526" MODIFIED="1385535520592" TEXT="lacp_rate">
<node CREATED="1385370722219" ID="ID_1874388292" MODIFIED="1385370738582" TEXT="slow(0) : &#x8bf7;&#x6c42;&#x5bf9;&#x7aef;&#x6bcf;30s&#x4f20;&#x8f93;LACPDU"/>
<node CREATED="1385370722219" ID="ID_1314974119" MODIFIED="1385370755840" TEXT="fast(1) : &#x8bf7;&#x6c42;&#x5bf9;&#x7aef;&#x6bcf;1s&#x4f20;&#x8f93;LACPDU"/>
</node>
</node>
</node>
<node CREATED="1385368258887" ID="ID_461796037" MODIFIED="1385368259459" TEXT="transmit load balancing">
<node CREATED="1385369358181" FOLDED="true" ID="ID_800821173" MODIFIED="1385371423397" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1385369364117" ID="ID_1571107701" MODIFIED="1385369374500" TEXT="&#x4f20;&#x8f93;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#xff1a;&#x5728;&#x6bcf;&#x4e2a;slave&#x4e0a;&#x6839;&#x636e;&#x5f53;&#x524d;&#x7684;&#x8d1f;&#x8f7d;&#xff08;&#x6839;&#x636e;&#x901f;&#x5ea6;&#x8ba1;&#x7b97;&#xff09;&#x5206;&#x914d;&#x5916;&#x51fa;&#x6d41;&#x91cf;&#x3002;&#x5982;&#x679c;&#x6b63;&#x5728;&#x63a5;&#x53d7;&#x6570;&#x636e;&#x7684;slave&#x51fa;&#x6545;&#x969c;&#x4e86;&#xff0c;&#x53e6;&#x4e00;&#x4e2a;slave&#x63a5;&#x7ba1;&#x5931;&#x8d25;&#x7684;slave&#x7684;MAC&#x5730;&#x5740;"/>
</node>
</node>
<node CREATED="1385368267063" ID="ID_700894305" MODIFIED="1385368267589" TEXT="adaptive load balancing"/>
<node CREATED="1385369874245" FOLDED="true" ID="ID_837848949" MODIFIED="1385621851324" TEXT="&#x6240;&#x6709;&#x6a21;&#x5f0f;&#x9002;&#x7528;&#x7684;&#x914d;&#x7f6e;&#x53c2;&#x6570;">
<node CREATED="1385369909892" FOLDED="true" ID="ID_455263662" MODIFIED="1385371426349" TEXT="miimon">
<node CREATED="1385369944211" ID="ID_614681301" MODIFIED="1385369968734" TEXT="&#x76d1;&#x63a7;&#x94fe;&#x8def;up/down&#x72b6;&#x6001;&#x7684;&#x9891;&#x7387;"/>
</node>
<node CREATED="1385370010945" FOLDED="true" ID="ID_1591750564" MODIFIED="1385371426941">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      downdelay
    </p>
    <p>
      &#20165;&#22312;miimon&#38750;0&#26102;&#26377;&#25928;
    </p>
  </body>
</html></richcontent>
<node CREATED="1385370026160" ID="ID_311408878" MODIFIED="1385370027212" TEXT="&#x5728;&#x53d1;&#x73b0;&#x94fe;&#x8def;&#x6545;&#x969c;&#x540e;&#xff0c;&#x7b49;&#x5f85;&#x4e00;&#x6bb5;&#x65f6;&#x95f4;&#x7136;&#x540e;&#x7981;&#x6b62;&#x4e00;&#x4e2a;slave"/>
</node>
<node CREATED="1385370010945" FOLDED="true" ID="ID_216901270" MODIFIED="1385371427549">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      updelay
    </p>
    <p>
      &#20165;&#22312;miimon&#38750;0&#26102;&#26377;&#25928;
    </p>
  </body>
</html></richcontent>
<node CREATED="1385370026160" ID="ID_1099675952" MODIFIED="1385370128456" TEXT="&#x5f53;&#x53d1;&#x73b0;&#x4e00;&#x4e2a;&#x94fe;&#x8def;&#x6062;&#x590d;&#x65f6;&#xff0c;&#x5728;&#x6fc0;&#x6d3b;&#x8be5;&#x94fe;&#x8def;&#x4e4b;&#x524d;&#x7684;&#x7b49;&#x5f85;&#x65f6;&#x95f4;"/>
</node>
<node CREATED="1385370234618" FOLDED="true" ID="ID_1601829775" MODIFIED="1385371557337" TEXT="use_carrier">
<node CREATED="1385370254761" ID="ID_1011640206" MODIFIED="1385371555750">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26159;&#21542;&#20351;&#29992;&#32593;&#32476;&#39537;&#21160;&#31243;&#24207;&#30340;netif_carrier_ok()&#20989;&#25968;&#26469;&#21028;&#26029;&#38142;&#36335;&#29366;&#24577;
    </p>
    <p>
      &#22914;&#26524;&#20026;0&#21017;&#20808;&#26597;&#35810;&#35774;&#22791;&#65288;&#36890;&#36807;ioctl&#65289;&#30340;MII&#23492;&#23384;&#22120;&#24182;&#26816;&#26597;&#38142;&#36335;&#29366;&#24577;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#26597;&#35810;&#22833;&#36133;&#65288;&#36820;&#22238;&#36733;&#27874;&#26029;&#24320;&#19981;&#23646;&#20110;&#22833;&#36133;&#65289;&#65292;&#21017;MII&#30417;&#25511;&#20250;&#21457;&#36865;&#19968;&#20010;
    </p>
    <p>
      ethtool ETHOOL_GLINK&#26597;&#35810;&#20197;&#23581;&#35797;&#33719;&#21462;&#31867;&#20284;&#30340;&#20449;&#24687;&#65292;&#22914;&#26524;&#20004;&#31181;&#26041;&#27861;
    </p>
    <p>
      &#37117;&#22833;&#36133;&#20102;&#65288;&#35774;&#22791;&#19981;&#25903;&#25345;&#25110;&#32773;&#22312;&#22788;&#29702;MII&#23492;&#23384;&#22120;&#21644;ethtool&#26597;&#35810;&#26102;&#21457;&#29983;&#20102;&#38169;&#35823;&#65289;&#65292;
    </p>
    <p>
      &#37027;&#20040; MII&#30417;&#25511;&#23558;&#20250;&#20551;&#23450;&#38142;&#36335;&#26159;&#27491;&#24120;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1385621862405" ID="ID_1183165379" MODIFIED="1385621877559" TEXT="&#x6dfb;&#x52a0;slave">
<node CREATED="1385621953817" ID="ID_1512014775" MODIFIED="1385621954725" TEXT="bonding_store_slaves">
<node CREATED="1385621970376" FOLDED="true" ID="ID_165716141" MODIFIED="1385624989669" TEXT="bond_enslave">
<node CREATED="1385622011383" ID="ID_408992290" MODIFIED="1385622805092">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26377;&#19977;&#31181;&#21150;&#27861;&#26469;&#30417;&#25511;slave&#30340;&#38142;&#36335;&#29366;&#24577;:
    </p>
    <p>
      1, &#22914;&#26524;slave&#30340;net device&#39537;&#21160;&#36127;&#36131;&#26356;&#26032;netdev&#30340;carrier&#26631;&#24535;&#20301;,&#21017;mii monitor&#26102;&#21487;&#20197;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      &#160;&#160;&#160;&#160;netif_carrier_ok(slave_dev)&#26469;&#26816;&#27979;slave&#30340;&#38142;&#36335;&#29366;&#24577;.
    </p>
    <p>
      2, &#22914;&#26524;slave&#30340;net device&#39537;&#21160;&#25903;&#25345;ethtool&#39537;&#21160;&#25509;&#21475;,&#21017;mii monitor&#26102;&#21487;&#20197;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      &#160;&#160;&#160;&#160;slave_dev-&gt;ethtool_ops-&gt;get_link(slave_dev)&#26469;&#26816;&#27979;slave&#30340;&#38142;&#36335;&#29366;&#24577;.
    </p>
    <p>
      3, &#22914;&#26524;slave&#30340;net device&#39537;&#21160;&#25903;&#25345;ioctl&#39537;&#21160;&#25509;&#21475;,&#21017;mii monitor&#26102;&#21487;&#20197;&#35843;&#29992;ioctl&#26469;&#26816;&#27979;slave&#30340;&#38142;&#36335;&#29366;&#24577;.
    </p>
    <p>
      
    </p>
    <p>
      &#24403;&#31995;&#32479;&#21442;&#25968;use_carrier&#20026;1(&#40664;&#35748;&#20540;)&#26102;,&#20351;&#29992;&#31532;&#19968;&#31181;&#26041;&#27861;,&#21542;&#21017;&#20381;&#27425;&#23581;&#35797;&#31532;2,3&#31181;&#26041;&#27861;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1385622867437" ID="ID_77158606" MODIFIED="1385622885144" TEXT="&#x5982;&#x679c;&#x5df2;&#x7ecf;&#x662f;slave&#x5219;&#x8fd4;&#x56de;&#x9519;&#x8bef;"/>
<node CREATED="1385622916043" ID="ID_117365258" MODIFIED="1385622921319" TEXT="vlan challenged&#x68c0;&#x6d4b;"/>
<node CREATED="1385622940154" ID="ID_1250025202" MODIFIED="1385623143312" TEXT="slave&#x52a0;&#x5165;bond&#x524d;&#x5fc5;&#x987b;&#x5148;down&#x6389;"/>
<node CREATED="1385623125828" ID="ID_947369365" MODIFIED="1385623176271" TEXT="&#x5982;&#x679c;&#x662f;bond&#x7684;&#x7b2c;&#x4e00;&#x4e2a;slave&#x5219;&#x5c06;bond&#x7684;&#x9a71;&#x52a8;&#x7c7b;&#x578b;&#x6539;&#x4e3a;ethernet&#x9a71;&#x52a8;">
<node CREATED="1385623190146" ID="ID_15058617" MODIFIED="1385623191246" TEXT="ether_setup(bond_dev)"/>
</node>
<node CREATED="1385623210690" ID="ID_1183537770" MODIFIED="1385623248732" TEXT="&#x5982;&#x679c;&#x4e0d;&#x662f;bond&#x7684;&#x7b2c;&#x4e00;&#x4e2a;slave&#x5219;&#x9700;&#x786e;&#x4fdd;bond&#x548c;slave&#x7684;&#x9a71;&#x52a8;&#x7c7b;&#x578b;&#x76f8;&#x540c;"/>
<node CREATED="1385623297439" ID="ID_461460437" MODIFIED="1385623324266" TEXT="&#x786e;&#x4fdd;slave&#x7684;net device&#x9a71;&#x52a8;&#x652f;&#x6301;&#x4fee;&#x6539;mac&#x5730;&#x5740;"/>
<node CREATED="1385623362141" ID="ID_1042477998" MODIFIED="1385623378520" TEXT="&#x5728;&#x901a;&#x77e5;&#x94fe;&#x4e0a;&#x53d1;&#x5e03;NETDEV_JOIN&#x6d88;&#x606f;"/>
<node CREATED="1385623396812" ID="ID_1925874291" MODIFIED="1385623436695" TEXT="&#x5982;&#x679c;bond&#x8fd8;&#x6ca1;&#x6709;mac&#x5730;&#x5740;&#x5219;&#x5c06;slave&#x7684;mac&#x5730;&#x5740;&#x8d4b;&#x503c;&#x7ed9;&#x5b83;"/>
<node CREATED="1385623480409" ID="ID_824016042" MODIFIED="1385623510066" TEXT="&#x5206;&#x914d;&#x65b0;&#x7684;slave&#x7ed3;&#x6784;&#x57df; : new_slave">
<node CREATED="1385623531960" ID="ID_856128903" MODIFIED="1385623533012" TEXT="queue_id = 0"/>
<node CREATED="1385623558568" ID="ID_502630593" MODIFIED="1385623595138" TEXT="&#x8bb0;&#x5f55;slave&#x539f;&#x6709;&#x7684;mtu,&#x7136;&#x540e;&#x5c06;slave&#x7684;mtu&#x6539;&#x4e3a;bond&#x7684;mtu"/>
<node CREATED="1385623558568" ID="ID_497161420" MODIFIED="1385623643143" TEXT="&#x8bb0;&#x5f55;slave&#x539f;&#x6709;&#x7684;mac&#x5730;&#x5740;,&#x7136;&#x540e;&#x5c06;slave&#x7684;mac&#x5730;&#x5740;&#x6539;&#x4e3a;bond&#x7684;mac&#x5730;&#x5740;"/>
<node CREATED="1385623803903" ID="ID_1368132259" MODIFIED="1385623814507" TEXT="&#x8bb0;&#x5f55;&#x6240;&#x5728;&#x7684;bond"/>
<node CREATED="1385623815423" ID="ID_580080553" MODIFIED="1385623822810" TEXT="&#x8bb0;&#x5f55;slave_dev"/>
<node CREATED="1385624343231" ID="ID_1217566960" MODIFIED="1385624450278">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35760;&#24405;slave&#30340;link&#29366;&#24577; : BOND_LINK_UP, BOND_LINK_DOWN,BOND_LINK_BACK
    </p>
    <p>
      BOND_LINK_BACK&#34920;&#31034;&#24050;&#32463;link up&#20102;&#20294;&#26159;&#36824;&#38656;&#35201;&#31561;&#24453;&#19968;&#20010;updelay&#38271;&#30340;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1385623709923" ID="ID_1714794473" MODIFIED="1385623726334" TEXT="&#x8ba9;bond&#x6210;&#x4e3a;slave&#x7684;master"/>
<node CREATED="1385623738338" ID="ID_112020087" MODIFIED="1385623739421" TEXT="dev_open(slave_dev)"/>
<node CREATED="1385623846302" ID="ID_1101364448" MODIFIED="1385623862538" TEXT="&#x8ba9;slave&#x8fdb;&#x5165;&#x6df7;&#x6742;&#x6a21;&#x5f0f;"/>
<node CREATED="1385623881646" ID="ID_721825488" MODIFIED="1385623913288" TEXT="&#x5982;&#x679c;bond&#x4e0a;&#x9700;&#x8981;&#x63a5;&#x6536;&#x6240;&#x6709;&#x7ec4;&#x64ad;,&#x5219;&#x8981;&#x6c42;slave&#x4e5f;&#x63a5;&#x6536;&#x6240;&#x6709;&#x7ec4;&#x64ad;"/>
<node CREATED="1385623924476" ID="ID_612533508" MODIFIED="1385624112293" TEXT="&#x5c06;bond&#x4e0a;&#x5df2;&#x6709;&#x7684;&#x7ec4;&#x64ad;&#x7ec4;&#x5168;&#x90e8;&#x52a0;&#x5165;&#x5230;slave&#x4e2d;, &#xa;&#x8ba9;slave&#x63a5;&#x6536;01:80:c2:00:00:02&#x7ec4;&#x64ad;&#x7ec4;(lacp&#x534f;&#x8bae;&#x62a5;&#x6587;&#x7684;&#x76ee;&#x7684;mac&#x5730;&#x5740;)"/>
<node CREATED="1385624129605" ID="ID_231426137" MODIFIED="1385624130449" TEXT="bond_add_vlans_on_slave"/>
<node CREATED="1385624148549" ID="ID_1908163274" MODIFIED="1385624188288" TEXT="&#x5c06;slave&#x52a0;&#x5165;&#x5230;bond&#x7684;slave&#x5217;&#x8868;&#x4e2d; : bond_attach_slave"/>
<node CREATED="1385624226867" ID="ID_169791512" MODIFIED="1385624228909" TEXT="bond_compute_features"/>
<node CREATED="1385624244882" ID="ID_1810831718" MODIFIED="1385624277036" TEXT="&#x83b7;&#x53d6;slave&#x7684;&#x53cc;&#x5de5;&#x548c;&#x901f;&#x7387;"/>
<node CREATED="1385624331951" ID="ID_1743120645" MODIFIED="1385624628294" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;&#x6a21;&#x5f0f;&#x4e3a;802.3ad lacp&#x5219;">
<node CREATED="1385624605350" ID="ID_1366264057" MODIFIED="1385624633485" TEXT="&#x5c06;slave&#x6807;&#x8bb0;&#x4e3a;inactive&#x72b6;&#x6001;">
<font NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1385624713844" ID="ID_407615302" MODIFIED="1385624778589" TEXT="&#x8bbe;&#x7f6e;slave&#x7684;id, slave&#x7684;id&#x6309;&#x52a0;&#x5165;&#x987a;&#x5e8f;&#x9012;&#x589e;"/>
<node CREATED="1385624686788" ID="ID_1809605817" MODIFIED="1385624699252" TEXT="&#x5982;&#x679c;&#x662f;&#x7b2c;&#x4e00;&#x4e2a;slave&#x5219;bond_3ad_initialize"/>
<node CREATED="1385624803200" ID="ID_83230416" MODIFIED="1385624804028" TEXT="bond_3ad_bind_slave">
<node CREATED="1385624809664" ID="ID_288630557" MODIFIED="1385624820364" TEXT="&#x8bbe;&#x7f6e;port&#x76f8;&#x5173;&#x53c2;&#x6570;"/>
<node CREATED="1385624821008" ID="ID_211182741" MODIFIED="1385624839355" TEXT="&#x8bbe;&#x7f6e;aggregator&#x76f8;&#x5173;&#x53c2;&#x6570;"/>
</node>
</node>
<node CREATED="1385624860223" ID="ID_1247376849" MODIFIED="1385624876906" TEXT="&#x66f4;&#x65b0;bond&#x7684;carrier&#x72b6;&#x6001;"/>
<node CREATED="1385624892990" ID="ID_1839670505" MODIFIED="1385624974263" TEXT="&#x8c03;&#x7528;&#x94a9;&#x5b50;&#x51fd;&#x6570;netdev_rx_handler_register&#x4ee5;&#x5c06;slave&#x6536;&#x4e0a;&#x6765;&#x7684;&#x5305;&#x62ff;&#x5230;bonding&#x9a71;&#x52a8;&#x4e2d;&#x6765;&#x5904;&#x91cc;"/>
</node>
</node>
</node>
<node CREATED="1385621884011" ID="ID_316864458" MODIFIED="1385621932725" TEXT="&#x6536;&#x5305;&#x6d41;&#x7a0b;">
<node CREATED="1385625002714" ID="ID_294544690" MODIFIED="1385625004550" TEXT="bond_handle_frame">
<node CREATED="1385625030009" ID="ID_1238251027" MODIFIED="1385625139890">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bond-&gt;recv_probe = bond_3ad_lacpdu_recv
    </p>
    <p>
      &#20165;&#22788;&#29702;lacp&#21327;&#35758;&#21253;
    </p>
  </body>
</html></richcontent>
<node CREATED="1385625118614" ID="ID_1510491981" MODIFIED="1385625119973" TEXT="bond_3ad_rx_indication"/>
</node>
</node>
</node>
</node>
<node CREATED="1389161194581" FOLDED="true" ID="ID_368620813" MODIFIED="1458256125542" TEXT="ethernet&#x9a71;&#x52a8;&#x67b6;&#x6784;">
<node CREATED="1389164319737" FOLDED="true" ID="ID_1212693774" MODIFIED="1427678961095" TEXT="ethtool&#x63a5;&#x53e3;">
<node CREATED="1389164341981" ID="ID_1771679585" MODIFIED="1389164458080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21021;&#22987;&#21270;
    </p>
    <p>
      &#22312;&#35843;&#29992;register_netdev(netdev)&#27880;&#20876;&#32593;&#32476;&#35774;&#22791;&#20043;&#21069;&#24212;
    </p>
    <p>
      &#21021;&#22987;&#21270;netdev-&gt;ethtool_ops
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1389164898938" ID="ID_867325555" MODIFIED="1425280143547" TEXT="ethtool usage">
<node CREATED="1389164923001" ID="ID_1007231008" MODIFIED="1389164924245" TEXT="ethtool DEVNAME">
<node CREATED="1389164935755" ID="ID_413452835" MODIFIED="1389164936951" TEXT="Display standard information about device"/>
<node CREATED="1389164965760" ID="ID_1282987173" LINK="#ID_1029050421" MODIFIED="1389165031243" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;get_settings&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389167360946" ID="ID_508060923" MODIFIED="1389167401608">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool -s|--change DEVNAME
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ speed %d ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ duplex half|full ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ port tp|aui|bnc|mii|fibre ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ autoneg on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ advertise %x ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ phyad %d ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ xcvr internal|external ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ wol p|u|m|b|a|g|s|d... ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ sopass %x:%x:%x:%x:%x:%x ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ msglvl %d | msglvl type on|off ... ]
    </p>
  </body>
</html></richcontent>
<node CREATED="1389167421335" ID="ID_1214620151" MODIFIED="1389167422419" TEXT="Change generic options"/>
<node CREATED="1389167425495" ID="ID_1121998469" MODIFIED="1389167443451" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;set_settings&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389168304419" ID="ID_1422534744" MODIFIED="1389168306527" TEXT="ethtool -a|--show-pause DEVNAME">
<node CREATED="1389168317701" ID="ID_1530935673" MODIFIED="1389168319409" TEXT="Show pause options"/>
<node CREATED="1389167425495" ID="ID_1319648812" MODIFIED="1389168347843" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;get_pauseparam&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389168365005" ID="ID_962027827" MODIFIED="1389168384992">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool -A|--pause DEVNAME
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ autoneg on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ rx on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ tx on|off ]
    </p>
  </body>
</html></richcontent>
<node CREATED="1389168317701" ID="ID_453242811" MODIFIED="1389168408847" TEXT="Set pause options"/>
<node CREATED="1389167425495" ID="ID_1688083905" MODIFIED="1389168413079" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;set_pauseparam&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389167635278" ID="ID_473666854" MODIFIED="1389167636373" TEXT="ethtool -i|--driver DEVNAME">
<node CREATED="1389167646475" ID="ID_1561058879" MODIFIED="1389167647494" TEXT="Show driver information"/>
<node CREATED="1389167425495" ID="ID_1905996278" MODIFIED="1389167671146" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;get_drvinfo&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389167980464" ID="ID_1900018838" MODIFIED="1389167983276" TEXT="ethtool -d|--register-dump DEVNAME">
<node CREATED="1389167991297" ID="ID_170043649" MODIFIED="1389167993005" TEXT="Do a register dump"/>
<node CREATED="1389167425495" ID="ID_58606816" MODIFIED="1389168008359" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;get_regs&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389168141113" ID="ID_1730018155" MODIFIED="1389168159685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool -e|--eeprom-dump DEVNAME
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ raw on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ offset N ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ length N ]
    </p>
  </body>
</html></richcontent>
<node CREATED="1389168175471" ID="ID_1775077812" MODIFIED="1389168176571" TEXT="Do a EEPROM dump"/>
<node CREATED="1389167425495" ID="ID_525976495" MODIFIED="1389168200105" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;get_eeprom&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389169330166" ID="ID_1564620004" MODIFIED="1389169345037">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool -E|--change-eeprom DEVNAME
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ magic N ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ offset N ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ length N ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ value N ]
    </p>
  </body>
</html></richcontent>
<node CREATED="1389169356426" ID="ID_1048211894" MODIFIED="1389169357558" TEXT="Change bytes in device EEPROM"/>
<node CREATED="1389167425495" ID="ID_917632956" MODIFIED="1389169371865" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;set_eeprom&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389169455674" ID="ID_816114862" MODIFIED="1389169457046" TEXT="ethtool -r|--negotiate DEVNAME">
<node CREATED="1389169466156" ID="ID_1044901025" MODIFIED="1389169467112" TEXT="Restart N-WAY negotiation"/>
<node CREATED="1389167425495" ID="ID_1424398613" MODIFIED="1389169620794" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;nway_reset&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389168946873" ID="ID_368957736" MODIFIED="1389168948341" TEXT="ethtool -S|--statistics DEVNAME">
<node CREATED="1389168958107" ID="ID_480123369" MODIFIED="1389168960007" TEXT="Show adapter statistics"/>
<node CREATED="1389167425495" ID="ID_1366219809" MODIFIED="1389168983134" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;get_ethtool_stats&#x51fd;&#x6570;"/>
</node>
<node CREATED="1389168365005" ID="ID_1692259919" MODIFIED="1423462170881">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool -K|--features|--offload DEVNAME
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ rx on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ tx on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ sg on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ tso on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ ufo on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ gso on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ gro on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ lro on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ rxvlan on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ txvlan on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ ntuple on|off ]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ rxhash on|off ]
    </p>
  </body>
</html></richcontent>
<node CREATED="1389168317701" ID="ID_1504416775" MODIFIED="1423462245021" TEXT="Changes the offload parameters and other features of the specified network device">
<node CREATED="1423462349365" ID="ID_1160595306" MODIFIED="1423462377155" TEXT="rx on|off    : Specifies whether RX checksumming should be enabled. "/>
<node CREATED="1423462476622" ID="ID_129978068" MODIFIED="1423462477779" TEXT="tx on|off    : Specifies whether TX checksumming should be enabled."/>
<node CREATED="1423462491216" ID="ID_828043892" MODIFIED="1423462492138" TEXT="sg on|off    : Specifies whether scatter-gather should be enabled. "/>
<node CREATED="1423462504425" ID="ID_1408389463" MODIFIED="1423462505551" TEXT="tso on|off    : Specifies whether TCP segmentation offload should be enabled. "/>
<node CREATED="1423462518307" ID="ID_291794007" MODIFIED="1423462519075" TEXT="ufo on|off    : Specifies whether UDP fragmentation offload should be enabled "/>
<node CREATED="1423462531949" ID="ID_99443323" MODIFIED="1423462532962" TEXT="gso on|off    : Specifies whether generic segmentation offload should be enabled "/>
<node CREATED="1423462543416" ID="ID_1893595694" MODIFIED="1423462543938" TEXT="gro on|off    : Specifies whether generic receive offload should be enabled "/>
<node CREATED="1423462553538" ID="ID_1784573589" MODIFIED="1423462554334" TEXT="lro on|off    : Specifies whether large receive offload should be enabled"/>
<node CREATED="1423462565547" ID="ID_890888274" MODIFIED="1423462566128" TEXT="rxvlan on|off    : Specifies whether RX VLAN acceleration should be enabled"/>
<node CREATED="1423462577170" ID="ID_1610136258" MODIFIED="1423462578156" TEXT="txvlan on|off    : Specifies whether TX VLAN acceleration should be enabled"/>
<node CREATED="1423462588084" ID="ID_1992832726" MODIFIED="1423462588609" TEXT="ntuple on|off    : Specifies whether Rx ntuple filters and actions should be enabled"/>
<node CREATED="1423462599076" ID="ID_1083538054" MODIFIED="1423462599889" TEXT="rxhash on|off    : Specifies whether receive hashing offload should be enabled"/>
</node>
<node CREATED="1389167425495" ID="ID_972814810" MODIFIED="1389168413079" TEXT="&#x6b64;&#x547d;&#x4ee4;&#x5bf9;&#x5e94;&#x4e86;ethtool_ops-&gt;set_pauseparam&#x51fd;&#x6570;"/>
</node>
</node>
<node CREATED="1389164482821" FOLDED="true" ID="ID_605531242" MODIFIED="1423462302578" TEXT="struct ethtool_ops *netdev-&gt;ethtool_ops">
<node CREATED="1389164828791" ID="ID_1029050421" MODIFIED="1389164828791" TEXT=" int (*get_settings)(struct net_device *, struct ethtool_cmd *)">
<node CREATED="1389165144397" FOLDED="true" ID="ID_786801080" MODIFIED="1389167221040" TEXT="struct ethtool_cmd">
<node CREATED="1389165211793" ID="ID_1307197624" MODIFIED="1389165211793" TEXT=" __u32 cmd"/>
<node CREATED="1389165211793" ID="ID_170001126" MODIFIED="1389165211793" TEXT=" __u32 supported">
<node CREATED="1389165276337" FOLDED="true" ID="ID_1451319141" MODIFIED="1389166627962" TEXT="Features this interface supports">
<node CREATED="1389166536310" MODIFIED="1389166536310" TEXT="SUPPORTED_10baseT_Half"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_10baseT_Full"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_100baseT_Half"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_100baseT_Full"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_1000baseT_Half"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_1000baseT_Full"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_Autoneg"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_TP"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_AUI"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_MII"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_FIBRE"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_BNC"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_10000baseT_Full"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_Pause"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_Asym_Pause"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_2500baseX_Full"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_Backplane"/>
<node CREATED="1389166536311" MODIFIED="1389166536311" TEXT="SUPPORTED_1000baseKX_Full"/>
<node CREATED="1389166536312" MODIFIED="1389166536312" TEXT="SUPPORTED_10000baseKX4_Full"/>
<node CREATED="1389166536312" MODIFIED="1389166536312" TEXT="SUPPORTED_10000baseKR_Full"/>
<node CREATED="1389166536312" MODIFIED="1389166536312" TEXT="SUPPORTED_10000baseR_FEC"/>
<node CREATED="1389166536312" MODIFIED="1389166536312" TEXT="SUPPORTED_20000baseMLD2_Full"/>
<node CREATED="1389166536312" MODIFIED="1389166536312" TEXT="SUPPORTED_20000baseKR2_Full"/>
</node>
</node>
<node CREATED="1389165211794" ID="ID_1732581082" MODIFIED="1389165211794" TEXT=" __u32 advertising">
<node CREATED="1389165280146" ID="ID_427663075" LINK="#ID_1451319141" MODIFIED="1389166604734" TEXT="Features this interface advertises"/>
</node>
<node CREATED="1389165211794" ID="ID_1809405293" MODIFIED="1389165211794" TEXT=" __u16 speed">
<node CREATED="1389165330826" FOLDED="true" ID="ID_1243808611" MODIFIED="1389167101734" TEXT="The forced speed (lower bits) in Mbps. &#xa;Please use ethtool_cmd_speed()/_set() to access it">
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="SPEED_10"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="SPEED_100"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="SPEED_1000"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="SPEED_2500"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="SPEED_10000"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="SPEED_UNKNOWN"/>
</node>
</node>
<node CREATED="1389165211794" ID="ID_1069754771" MODIFIED="1389165211794" TEXT=" __u8 duplex">
<node CREATED="1389165450045" FOLDED="true" ID="ID_893198457" MODIFIED="1389167103262" TEXT="Duplex, half or full">
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="DUPLEX_HALF"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="DUPLEX_FULL"/>
<node CREATED="1389167093063" MODIFIED="1389167093063" TEXT="DUPLEX_UNKNOWN"/>
</node>
</node>
<node CREATED="1389165211794" ID="ID_1782351147" MODIFIED="1389165211794" TEXT=" __u8 port">
<node CREATED="1389165464031" FOLDED="true" ID="ID_692910604" MODIFIED="1389167219487" TEXT="Which connector port">
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_TP"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_AUI"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_MII"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_FIBRE"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_BNC"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_DA"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_NONE"/>
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="PORT_OTHER"/>
</node>
</node>
<node CREATED="1389165211794" ID="ID_171472046" MODIFIED="1389165211794" TEXT=" __u8 phy_address">
<node CREATED="1389165494788" ID="ID_1393800818" MODIFIED="1389165495952" TEXT="MDIO PHY address (PRTAD for clause 45)"/>
</node>
<node CREATED="1389165211794" ID="ID_238972738" MODIFIED="1389165211794" TEXT=" __u8 transceiver">
<node CREATED="1389165510551" FOLDED="true" ID="ID_820286715" MODIFIED="1389167110878" TEXT="Which transceiver to use">
<node CREATED="1389167093064" MODIFIED="1389167093064" TEXT="XCVR_INTERNAL"/>
<node CREATED="1389167093065" MODIFIED="1389167093065" TEXT="XCVR_EXTERNAL"/>
<node CREATED="1389167093065" MODIFIED="1389167093065" TEXT="XCVR_DUMMY1"/>
<node CREATED="1389167093065" MODIFIED="1389167093065" TEXT="XCVR_DUMMY2"/>
<node CREATED="1389167093065" MODIFIED="1389167093065" TEXT="XCVR_DUMMY3"/>
</node>
</node>
<node CREATED="1389165211794" ID="ID_204578135" MODIFIED="1389165211794" TEXT=" __u8 autoneg">
<node CREATED="1389165523480" FOLDED="true" ID="ID_1347358703" MODIFIED="1389167112702" TEXT="Enable or disable autonegotiation">
<node CREATED="1389167093065" MODIFIED="1389167093065" TEXT="AUTONEG_DISABLE"/>
<node CREATED="1389167093065" MODIFIED="1389167093065" TEXT="AUTONEG_ENABLE"/>
</node>
</node>
<node CREATED="1389165211794" ID="ID_1543802493" MODIFIED="1389165211794" TEXT=" __u8 mdio_support">
<node CREATED="1389165550877" ID="ID_66708574" MODIFIED="1389165569996" TEXT="MDIO protocols supported. Not set by all drivers."/>
</node>
<node CREATED="1389165211794" ID="ID_1611378771" MODIFIED="1389165211794" TEXT=" __u32 maxtxpkt">
<node CREATED="1389165593844" ID="ID_153588082" MODIFIED="1389165594976" TEXT="Tx pkts before generating tx int"/>
</node>
<node CREATED="1389165211794" ID="ID_191689238" MODIFIED="1389165211794" TEXT=" __u32 maxrxpkt">
<node CREATED="1389165606550" ID="ID_1528642834" MODIFIED="1389165607218" TEXT="Rx pkts before generating rx int"/>
</node>
<node CREATED="1389165211794" ID="ID_506425388" MODIFIED="1389165211794" TEXT=" __u16 speed_hi">
<node CREATED="1389165330826" ID="ID_1777911844" MODIFIED="1389165399108" TEXT="The forced speed (upper bits) in Mbps. &#xa;Please use ethtool_cmd_speed()/_set() to access it"/>
</node>
<node CREATED="1389165211794" MODIFIED="1389165211794" TEXT=" __u8 eth_tp_mdix"/>
<node CREATED="1389165211794" MODIFIED="1389165211794" TEXT=" __u8 reserved2"/>
<node CREATED="1389165211794" ID="ID_936509229" MODIFIED="1389165211794" TEXT=" __u32 lp_advertising">
<node CREATED="1389165626681" ID="ID_1549345603" MODIFIED="1389165627925" TEXT="Features the link partner advertises"/>
</node>
<node CREATED="1389165211794" MODIFIED="1389165211794" TEXT=" __u32 reserved[2]"/>
</node>
</node>
<node CREATED="1389164828791" ID="ID_1610912541" MODIFIED="1389164828791" TEXT=" int (*set_settings)(struct net_device *, struct ethtool_cmd *)"/>
<node CREATED="1389164828791" ID="ID_622616656" MODIFIED="1389164828791" TEXT=" void (*get_drvinfo)(struct net_device *, struct ethtool_drvinfo *)">
<node CREATED="1389167525847" FOLDED="true" ID="ID_1269757780" MODIFIED="1397646550185" TEXT="struct ethtool_drvinfo">
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" __u32 cmd"/>
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" char driver[32]"/>
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" char version[32]"/>
<node CREATED="1389167602310" ID="ID_1727379114" MODIFIED="1389167602310" TEXT=" char fw_version[ETHTOOL_FWVERS_LEN]"/>
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" char bus_info[ETHTOOL_BUSINFO_LEN]"/>
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" char reserved1[32]"/>
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" char reserved2[12]"/>
<node CREATED="1389167602310" MODIFIED="1389167602310" TEXT=" __u32 n_priv_flags"/>
<node CREATED="1389167602311" MODIFIED="1389167602311" TEXT=" __u32 n_stats"/>
<node CREATED="1389167602311" MODIFIED="1389167602311" TEXT=" __u32 testinfo_len"/>
<node CREATED="1389167602311" MODIFIED="1389167602311" TEXT=" __u32 eedump_len"/>
<node CREATED="1389167602311" MODIFIED="1389167602311" TEXT=" __u32 regdump_len"/>
</node>
</node>
<node CREATED="1389164828791" ID="ID_1223594255" MODIFIED="1389164828791" TEXT=" int (*get_regs_len)(struct net_device *)">
<node CREATED="1389167871742" ID="ID_198592504" MODIFIED="1389167899791" TEXT="&#x4e0b;&#x9762;get_regs&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x7684;&#x5185;&#x5bb9;&#x7684;&#x957f;&#x5ea6;"/>
</node>
<node CREATED="1389164828791" ID="ID_1142522763" MODIFIED="1389164828791" TEXT=" void (*get_regs)(struct net_device *, struct ethtool_regs *, void *)">
<node CREATED="1389167904067" ID="ID_1753978484" MODIFIED="1389167917729" TEXT="dump&#x6240;&#x6709;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;"/>
</node>
<node CREATED="1389164828791" ID="ID_1448638443" MODIFIED="1389164828791" TEXT=" void (*get_wol)(struct net_device *, struct ethtool_wolinfo *)">
<node CREATED="1389169902738" ID="ID_1302570887" MODIFIED="1389169904174" TEXT="struct ethtool_wolinfo">
<node CREATED="1389169919428" ID="ID_1258595158" MODIFIED="1389169926201" TEXT="__u32 cmd"/>
<node CREATED="1389169935287" ID="ID_139523538" MODIFIED="1389169940058" TEXT="__u32 supported"/>
<node CREATED="1389169951481" ID="ID_904939552" MODIFIED="1389169956238" TEXT="__u32 wolopts"/>
<node CREATED="1389169969628" ID="ID_431118447" MODIFIED="1389169975744" TEXT="__u8 sopass[SOPASS_MAX]">
<node CREATED="1389169988367" ID="ID_448720824" MODIFIED="1389169989403" TEXT="SecureOn(tm) password"/>
</node>
</node>
</node>
<node CREATED="1389164828791" ID="ID_1971883019" MODIFIED="1389164828791" TEXT=" int (*set_wol)(struct net_device *, struct ethtool_wolinfo *)">
<node CREATED="1389170050857" ID="ID_1411692979" MODIFIED="1389170084337" TEXT="wake-on-lan settings"/>
</node>
<node CREATED="1389164828791" MODIFIED="1389164828791" TEXT=" u32 (*get_msglevel)(struct net_device *)"/>
<node CREATED="1389164828791" MODIFIED="1389164828791" TEXT=" void (*set_msglevel)(struct net_device *, u32)"/>
<node CREATED="1389164828791" ID="ID_361296949" MODIFIED="1389164828791" TEXT=" int (*nway_reset)(struct net_device *)">
<node CREATED="1389169466156" ID="ID_792087951" MODIFIED="1389169654279" TEXT="Restart negotiation"/>
</node>
<node CREATED="1389164828792" ID="ID_1782032631" MODIFIED="1389164828792" TEXT=" u32 (*get_link)(struct net_device *)">
<node CREATED="1389169736439" ID="ID_1335532230" MODIFIED="1389169765323" TEXT="Report whether physical link is up.  &#xa;Will only be called if the netdev is up.  &#xa;Should usually be set to ethtool_op_get_link(), which uses netif_carrier_ok()"/>
</node>
<node CREATED="1389164828792" ID="ID_1706611311" MODIFIED="1389164828792" TEXT=" int (*get_eeprom_len)(struct net_device *)">
<node CREATED="1389167871742" ID="ID_1869042394" MODIFIED="1389168035631" TEXT="&#x4e0b;&#x9762;get_eeprom&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x7684;&#x5185;&#x5bb9;&#x7684;&#x957f;&#x5ea6;"/>
</node>
<node CREATED="1389164828792" ID="ID_1153076707" MODIFIED="1389164828792" TEXT=" int (*get_eeprom)(struct net_device *, struct ethtool_eeprom *, u8 *)">
<node CREATED="1389167904067" ID="ID_1442655184" MODIFIED="1389168121056" TEXT="&#x4ece;eeprom&#x4e2d;&#x6307;&#x5b9a;&#x504f;&#x79fb;&#x5f00;&#x59cb;dump&#x6307;&#x5b9a;&#x957f;&#x5ea6;&#x7684;&#x5185;&#x5bb9;"/>
</node>
<node CREATED="1389164828792" ID="ID_707813169" MODIFIED="1389164828792" TEXT=" int (*set_eeprom)(struct net_device *, struct ethtool_eeprom *, u8 *)">
<node CREATED="1389167904067" ID="ID_738471083" MODIFIED="1389169820832" TEXT="&#x6539;&#x53d8;eeprom&#x4e2d;&#x6307;&#x5b9a;&#x504f;&#x79fb;&#x5f00;&#x59cb;&#x7684;&#x6307;&#x5b9a;&#x957f;&#x5ea6;&#x7684;&#x5185;&#x5bb9;"/>
</node>
<node CREATED="1389164828792" ID="ID_123667049" MODIFIED="1389164828792" TEXT=" int (*get_coalesce)(struct net_device *, struct ethtool_coalesce *)"/>
<node CREATED="1389164828792" ID="ID_260095418" MODIFIED="1389164828792" TEXT=" int (*set_coalesce)(struct net_device *, struct ethtool_coalesce *)"/>
<node CREATED="1389164828792" ID="ID_850474972" MODIFIED="1389164828792" TEXT=" void (*get_ringparam)(struct net_device *, struct ethtool_ringparam *)"/>
<node CREATED="1389164828792" ID="ID_1928182189" MODIFIED="1389164828792" TEXT=" int (*set_ringparam)(struct net_device *, struct ethtool_ringparam *)"/>
<node CREATED="1389164828792" ID="ID_266104376" MODIFIED="1389164828792" TEXT=" void (*get_pauseparam)(struct net_device *, struct ethtool_pauseparam*)"/>
<node CREATED="1389164828792" ID="ID_1265360524" MODIFIED="1389164828792" TEXT=" int (*set_pauseparam)(struct net_device *, struct ethtool_pauseparam*)">
<node CREATED="1389168450490" FOLDED="true" ID="ID_1589975967" MODIFIED="1389168620190" TEXT="struct ethtool_pauseparam">
<node CREATED="1389168463036" ID="ID_972219252" MODIFIED="1389168469893" TEXT="__u32 cmd"/>
<node CREATED="1389168479999" ID="ID_1461724259" MODIFIED="1389168484291" TEXT="__u32 autoneg">
<node CREATED="1389168534472" ID="ID_1332359261" MODIFIED="1389168579239" TEXT="If the link is being auto-negotiated (via ethtool_cmd.autoneg &#x9; &#xa;being true) the user may set &apos;autoneg&apos; here non-zero to have the &#x9; &#xa;pause parameters be auto-negotiated too.  In such a case, the &#x9; &#xa;{rx,tx}_pause values below determine what capabilities are &#x9; &#xa;advertised.&#xa;If &apos;autoneg&apos; is zero or the link is not being auto-negotiated, &#x9; &#xa;then {rx,tx}_pause force the driver to use/not-use pause &#x9; &#xa;flow control."/>
</node>
<node CREATED="1389168494193" ID="ID_278111352" MODIFIED="1389168499042" TEXT="__u32 rx_pause"/>
<node CREATED="1389168511124" ID="ID_62653286" MODIFIED="1389168515316" TEXT="__u32 tx_pause"/>
</node>
</node>
<node CREATED="1389164828792" ID="ID_1246633588" MODIFIED="1389164828792" TEXT=" void (*self_test)(struct net_device *, struct ethtool_test *, u64 *)"/>
<node CREATED="1389164828792" ID="ID_1950663946" MODIFIED="1389164828792" TEXT=" void (*get_strings)(struct net_device *, u32 stringset, u8 *)">
<node CREATED="1389168818229" FOLDED="true" ID="ID_478099529" MODIFIED="1389168891176" TEXT="Get strings that describe requested objects">
<node CREATED="1389168846537" FOLDED="true" ID="ID_872896917" MODIFIED="1389168890513" TEXT="stringset">
<node CREATED="1389168836600" ID="ID_1412704416" MODIFIED="1389168839012" TEXT="ETH_SS_TEST"/>
<node CREATED="1389168863324" ID="ID_304960695" MODIFIED="1389168864056" TEXT="ETH_SS_STATS"/>
<node CREATED="1389168871197" ID="ID_455724854" MODIFIED="1389168871849" TEXT="ETH_SS_PRIV_FLAGS"/>
<node CREATED="1389168878702" ID="ID_62331875" MODIFIED="1389168879450" TEXT="ETH_SS_NTUPLE_FILTERS"/>
<node CREATED="1389168886784" ID="ID_656313823" MODIFIED="1389168887468" TEXT="ETH_SS_FEATURES"/>
</node>
</node>
</node>
<node CREATED="1389164828792" ID="ID_565631824" MODIFIED="1389164828792" TEXT=" int (*set_phys_id)(struct net_device *, enum ethtool_phys_id_state)"/>
<node CREATED="1389164828792" ID="ID_403398927" MODIFIED="1389164828792" TEXT=" void (*get_ethtool_stats)(struct net_device *, struct ethtool_stats *, u64 *)"/>
<node CREATED="1389164828792" MODIFIED="1389164828792" TEXT=" int (*begin)(struct net_device *)"/>
<node CREATED="1389164828792" MODIFIED="1389164828792" TEXT=" void (*complete)(struct net_device *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" u32 (*get_priv_flags)(struct net_device *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*set_priv_flags)(struct net_device *, u32)"/>
<node CREATED="1389164828793" ID="ID_432776841" MODIFIED="1389164828793" TEXT=" int (*get_sset_count)(struct net_device *, int)">
<node CREATED="1389169102626" ID="ID_1879460730" MODIFIED="1389169155509">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Get number of strings that describe requested objects
    </p>
    <p>
      &#21363;get_strings&#20989;&#25968;&#36820;&#22238;&#30340;&#20869;&#23481;&#30340;&#38271;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*get_rxnfc)(struct net_device *, struct ethtool_rxnfc *, u32 *rule_locs)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*set_rxnfc)(struct net_device *, struct ethtool_rxnfc *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*flash_device)(struct net_device *, struct ethtool_flash *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*reset)(struct net_device *, u32 *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" u32 (*get_rxfh_indir_size)(struct net_device *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*get_rxfh_indir)(struct net_device *, u32 *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*set_rxfh_indir)(struct net_device *, const u32 *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" void (*get_channels)(struct net_device *, struct ethtool_channels *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*set_channels)(struct net_device *, struct ethtool_channels *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*get_dump_flag)(struct net_device *, struct ethtool_dump *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*get_dump_data)(struct net_device *, struct ethtool_dump *, void *)"/>
<node CREATED="1389164828793" MODIFIED="1389164828793" TEXT=" int (*set_dump)(struct net_device *, struct ethtool_dump *)"/>
</node>
</node>
<node CREATED="1389169232871" ID="ID_1335804178" MODIFIED="1389169259047" TEXT="&#x94fe;&#x8def;&#x68c0;&#x6d4b;netif_carrier_ok"/>
<node CREATED="1419016322490" FOLDED="true" ID="ID_1969746919" MODIFIED="1453429485869" TEXT="switch&#x63a5;&#x53e3;">
<node CREATED="1419032961149" FOLDED="true" ID="ID_964650400" MODIFIED="1420005616237" TEXT="&#x539f;&#x7406;">
<node CREATED="1419991061818" ID="ID_1923496511" MODIFIED="1419991092124">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/swconfig_framework_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1389164341981" FOLDED="true" ID="ID_831345965" MODIFIED="1419032955751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21021;&#22987;&#21270;
    </p>
  </body>
</html></richcontent>
<node CREATED="1419017086089" ID="ID_1586819520" MODIFIED="1419017115171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/switch_dev.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1419032902485" ID="ID_1506573660" MODIFIED="1419032908825">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      switch_dev&#32467;&#26500;&#19968;&#33324;&#20381;&#38468;&#20110;phy_device&#32467;&#26500;,&#36890;&#29992;&#30340;&#20570;&#27861;&#26159;:
    </p>
    <p>
      struct phy_device-&gt;priv&#25351;&#21521;&#19968;&#20010;phy&#33455;&#29255;&#33258;&#24049;&#31169;&#26377;&#30340;&#32467;&#26500;(&#27604;&#22914;struct ar8216_priv),&#29992;&#20110;&#20445;&#23384;&#23427;&#33258;&#24049;&#30340;&#25968;&#25454;
    </p>
    <p>
      &#20294;&#26159;&#36825;&#20010;phy&#33455;&#29255;&#31169;&#26377;&#32467;&#26500;&#30340;&#31532;&#19968;&#20010;&#25104;&#21592;&#26159;switch_dev&#32467;&#26500;,&#20063;&#23601;&#26159;&#35828;&#21487;&#20197;&#25226;phy&#33455;&#29255;&#31169;&#26377;&#32467;&#26500;&#24403;&#20570;&#19968;&#20010;switch_dev&#32467;&#26500;&#30475;&#24453;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419032927366" ID="ID_164958075" MODIFIED="1419032940578">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;phy&#21021;&#22987;&#21270;&#23436;&#25104;&#21518;&#35843;&#29992;
    </p>
    <p>
      int register_switch(struct switch_dev *dev, struct net_device *netdev)
    </p>
    <p>
      &#23558;switch&#27880;&#20876;&#21040;Linux&#31995;&#32479;
    </p>
    <p>
      &#27880;&#20876;&#20043;&#21069;phy&#39537;&#21160;&#24212;&#35813;&#21021;&#22987;&#21270;
    </p>
    <p>
      swdev-&gt;ops
    </p>
    <p>
      swdev-&gt;name
    </p>
    <p>
      swdev-&gt;netdev
    </p>
    <p>
      swdev-&gt;ports
    </p>
    <p>
      swdev-&gt;vlans
    </p>
    <p>
      swdev-&gt;cpu_port
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1419015682972" FOLDED="true" ID="ID_412152460" MODIFIED="1419032958612" TEXT="struct switch_dev">
<node CREATED="1419016260640" ID="ID_416530484" MODIFIED="1419018793154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;const struct switch_dev_ops *ops
    </p>
    <p>
      &#25805;&#20316;switch&#30340;&#20989;&#25968;&#38598;
    </p>
  </body>
</html></richcontent>
<node CREATED="1419031812629" FOLDED="true" ID="ID_1995736808" MODIFIED="1419032697983" TEXT="&#x5c5e;&#x6027;&#x7684;&#x7ec4;&#x7ec7;">
<node CREATED="1419031850404" ID="ID_117734969" MODIFIED="1419031871581" TEXT="&#x5c5e;&#x6027;&#x6309;&#x7167;&#x5176;&#x529f;&#x80fd;&#x53ef;&#x4ee5;&#x5206;&#x4e3a;">
<node CREATED="1419031872893" ID="ID_49850431" LINK="#ID_754993427" MODIFIED="1419032016518" TEXT="&#x5168;&#x5c40;&#x5c5e;&#x6027;"/>
<node CREATED="1419031880050" ID="ID_560582960" LINK="#ID_229184959" MODIFIED="1419032023320" TEXT="&#x57fa;&#x4e8e;&#x7aef;&#x53e3;&#x7684;&#x5c5e;&#x6027;"/>
<node CREATED="1419031889834" ID="ID_88599650" LINK="#ID_868269183" MODIFIED="1419032029600" TEXT="&#x57fa;&#x4e8e;vlan&#x7684;&#x5c5e;&#x6027;"/>
<node CREATED="1419031898410" ID="ID_21515413" LINK="#ID_1919415325" MODIFIED="1419032042944" TEXT="&#x57fa;&#x4e8e;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x5c5e;&#x6027;"/>
</node>
<node CREATED="1419031907372" ID="ID_613322959" MODIFIED="1419031926589" TEXT="&#x5c5e;&#x6027;&#x6309;&#x7167;&#x5176;&#x5b9a;&#x4e49;&#x8005;&#x53ef;&#x4ee5;&#x5206;&#x4e3a;">
<node CREATED="1419031928219" ID="ID_144077631" LINK="#ID_54081001" MODIFIED="1419032681736" TEXT="linux&#x5b9a;&#x4e49;&#x7684;&#x6807;&#x51c6;&#x5c5e;&#x6027;">
<node CREATED="1419032183077" ID="ID_127357129" MODIFIED="1419032288886">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static struct switch_attr default_global[]
    </p>
    <p>
      (drivers/net/phy/swconfig.c)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419032202181" ID="ID_1262784890" MODIFIED="1419032294830">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static struct switch_attr default_port[]
    </p>
    <p>
      (drivers/net/phy/swconfig.c)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419032215317" ID="ID_329652931" MODIFIED="1419032300502">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static struct switch_attr default_vlan[]
    </p>
    <p>
      (drivers/net/phy/swconfig.c)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419032229885" ID="ID_1889394361" MODIFIED="1419032306080">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static struct switch_attr default_reg[]
    </p>
    <p>
      (drivers/net/phy/swconfig.c)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1419031941211" ID="ID_510273217" LINK="#ID_416530484" MODIFIED="1419032070632" TEXT="vendor&#x5b9a;&#x4e49;&#x7684;&#x79c1;&#x6709;&#x5c5e;&#x6027;"/>
</node>
<node CREATED="1419031979157" ID="ID_731136152" MODIFIED="1419032005774" TEXT="&#x6240;&#x6709;&#x5c5e;&#x6027;&#x90fd;&#x662f;&#x7528;struct switch_attr&#x6765;&#x5b9a;&#x4e49;&#x7684;. &#x5f53;&#x7528;&#x6237;&#x5c42;&#x8bbe;&#x7f6e;&#x4e00;&#x4e2a;&#x5c5e;&#x6027;&#x65f6;&#x4f1a;&#x6307;&#x5b9a;&#x5176;&#x5c5e;&#x6027;id,&#x5f53;&#x8fd9;&#x4e2a;id&#x8d85;&#x8fc7;SWITCH_ATTR_DEFAULTS_OFFSET(0x1000)&#x65f6;&#x7cfb;&#x7edf;&#x8ba4;&#x4e3a;&#x5b83;&#x662f;linux&#x6807;&#x51c6;&#x5c5e;&#x6027;,&#x800c;&#x4e0d;&#x8d85;&#x8fc7;&#x8fd9;&#x4e2a;&#x503c;&#x65f6;&#x8ba4;&#x4e3a;&#x5b83;&#x662f;vendor&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x79c1;&#x6709;&#x5c5e;&#x6027;"/>
</node>
<node CREATED="1419029547781" FOLDED="true" ID="ID_754993427" MODIFIED="1419032699751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct switch_attrlist attr_global : &#20840;&#23616;&#23646;&#24615;
    </p>
  </body>
</html></richcontent>
<node CREATED="1419016260640" ID="ID_1851906952" MODIFIED="1419029562347" TEXT=" struct switch_attrlist">
<node CREATED="1419019185298" ID="ID_1348969804" MODIFIED="1419019239129" TEXT="int n_attr : &#x4e0b;&#x9762;&#x5c5e;&#x6027;&#x6570;&#x7ec4;&#x7684;&#x5143;&#x7d20;&#x4e2a;&#x6570;"/>
<node CREATED="1419019206098" ID="ID_1116058723" MODIFIED="1419029992385" TEXT="struct switch_attr *attrxxx : &#x5c5e;&#x6027;&#x6570;&#x7ec4;">
<node CREATED="1419019375902" ID="ID_579355120" MODIFIED="1419031345837" TEXT=" int disabled : &#x5c5e;&#x6027;&#x662f;&#x5426;&#x88ab;&#x5f00;&#x542f;&#x6216;&#x5173;&#x95ed;"/>
<node CREATED="1419019375902" FOLDED="true" ID="ID_1828798816" MODIFIED="1419029457452" TEXT=" int type : &#x5c5e;&#x6027;&#x503c;&#x7684;&#x7c7b;&#x578b;">
<node CREATED="1419028752970" ID="ID_1005625816" MODIFIED="1419028752970" TEXT="SWITCH_TYPE_UNSPEC"/>
<node CREATED="1419028752970" MODIFIED="1419028752970" TEXT="SWITCH_TYPE_INT"/>
<node CREATED="1419028752970" ID="ID_81190895" MODIFIED="1419028752970" TEXT="SWITCH_TYPE_STRING"/>
<node CREATED="1419028752971" MODIFIED="1419028752971" TEXT="SWITCH_TYPE_PORTS"/>
<node CREATED="1419028752971" ID="ID_1957814317" MODIFIED="1419028752971" TEXT="SWITCH_TYPE_EXT"/>
<node CREATED="1419028752971" ID="ID_1955285605" MODIFIED="1419028752971" TEXT="SWITCH_TYPE_NOVAL"/>
</node>
<node CREATED="1419019375902" ID="ID_454399713" MODIFIED="1419028814896" TEXT=" const char *name : &#x5c5e;&#x6027;&#x540d;"/>
<node CREATED="1419019375902" ID="ID_861463519" MODIFIED="1419028841797" TEXT=" const char *description : &#x5c5e;&#x6027;&#x63cf;&#x8ff0;"/>
<node CREATED="1419019375902" ID="ID_168519364" MODIFIED="1419030035476">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;int (*set)(struct switch_dev *dev, const struct switch_attr *attr, struct switch_val *val)
    </p>
    <p>
      &#35774;&#32622;&#23646;&#24615;&#30340;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1419028398047" ID="ID_141264526" MODIFIED="1419028399327" TEXT="struct switch_val">
<node CREATED="1419028411015" ID="ID_408373663" MODIFIED="1419029096892" TEXT="struct switch_attr *attr : &#x6240;&#x5173;&#x8054;&#x7684;&#x5c5e;&#x6027;"/>
<node CREATED="1419028423136" ID="ID_149463807" MODIFIED="1419029123829" TEXT="int port_vlan : &#x5c5e;&#x6027;&#x6240;&#x57fa;&#x4e8e;&#x7684;port&#x6216;vlan"/>
<node CREATED="1419028436315" ID="ID_1299303398" MODIFIED="1419029446973" TEXT="int len : &#x503c;&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1419028449411" ID="ID_944653774" MODIFIED="1419029071088" TEXT="union value">
<node CREATED="1419028468298" ID="ID_1813517011" MODIFIED="1419028470178" TEXT="char *s"/>
<node CREATED="1419028479499" ID="ID_1175723530" MODIFIED="1419028481368" TEXT="u32 i"/>
<node CREATED="1419028493171" ID="ID_786804550" MODIFIED="1419030943612" TEXT="struct switch_port *ports : &#x5f53;&#x8bfb;&#x5199;&#x57fa;&#x4e8e;&#x7aef;&#x53e3;&#x7684;&#x5c5e;&#x6027;&#x503c;&#x65f6;, "/>
<node CREATED="1419028504216" ID="ID_1594810725" MODIFIED="1419029398034">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct switch_ext *ext_val
    </p>
    <p>
      &#26377;&#30340;&#26102;&#20505;&#35774;&#32622;&#19968;&#20010;&#23646;&#24615;&#21487;&#33021;&#38656;&#35201;&#19968;&#31995;&#21015;&#25805;&#20316;, &#27604;&#22914;&#28155;&#21152;&#19968;&#20010;reserved FDB,&#36825;&#37324;&#29992;&#19968;&#20010;switch_ext&#38142;&#34920;&#34920;&#31034;&#36825;&#19968;&#31995;&#21015;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
<node CREATED="1419028525433" ID="ID_1986822614" MODIFIED="1419028527446" TEXT="char *option_name"/>
<node CREATED="1419028539176" ID="ID_1766217907" MODIFIED="1419028541029" TEXT="char *option_value"/>
<node CREATED="1419028551578" ID="ID_577571429" MODIFIED="1419028553737" TEXT="struct switch_ext *next"/>
</node>
</node>
</node>
</node>
<node CREATED="1419019375902" ID="ID_136354959" MODIFIED="1419028883277">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;int (*get)(struct switch_dev *dev, const struct switch_attr *attr, struct switch_val *val)
    </p>
    <p>
      &#35835;&#21462;&#23646;&#24615;&#20540;&#30340;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419019375902" ID="ID_528945381" MODIFIED="1419019375902" TEXT=" int id"/>
<node CREATED="1419019375902" ID="ID_1941750907" MODIFIED="1419019375902" TEXT=" int ofs"/>
<node CREATED="1419019375902" ID="ID_1540245169" MODIFIED="1419028956972" TEXT=" int max : &#x5c5e;&#x6027;&#x7684;&#x6700;&#x5927;&#x503c;"/>
</node>
</node>
<node CREATED="1419029599867" ID="ID_1886826899" MODIFIED="1419029601815" TEXT="enable_vlan"/>
<node CREATED="1419029610027" ID="ID_966374940" MODIFIED="1419029611944" TEXT="max_frame_size"/>
<node CREATED="1419029618723" ID="ID_535045023" MODIFIED="1419029620307" TEXT="reset_mibs"/>
<node CREATED="1419029627267" ID="ID_610360931" MODIFIED="1419029629031" TEXT="flush_arl"/>
<node CREATED="1419029636129" ID="ID_1114527481" MODIFIED="1419029637755" TEXT="dump_arl"/>
</node>
<node CREATED="1419016260640" FOLDED="true" ID="ID_229184959" LINK="#ID_1851906952" MODIFIED="1419029903045" TEXT=" struct switch_attrlist attr_port : &#x57fa;&#x4e8e;&#x7aef;&#x53e3;&#x7684;&#x5c5e;&#x6027;">
<node CREATED="1419029673907" ID="ID_1672171577" MODIFIED="1419029676253" TEXT="reset_mib"/>
<node CREATED="1419029683651" ID="ID_1190385528" MODIFIED="1419029685541" TEXT="mib"/>
</node>
<node CREATED="1419016260640" FOLDED="true" ID="ID_868269183" LINK="#ID_1851906952" MODIFIED="1419029903908" TEXT=" struct switch_attrlist attr_vlan : &#x57fa;&#x4e8e;vlan&#x7684;&#x5c5e;&#x6027;">
<node CREATED="1419029696147" ID="ID_1556453738" MODIFIED="1419029698992" TEXT="vid"/>
</node>
<node CREATED="1419016260640" ID="ID_1919415325" LINK="#ID_1851906952" MODIFIED="1419029661214" TEXT=" struct switch_attrlist attr_reg : &#x57fa;&#x4e8e;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x5c5e;&#x6027;"/>
<node CREATED="1419016260640" ID="ID_1378699225" MODIFIED="1419016260640" TEXT=" int (*get_reg_val)(struct switch_dev *dev, int reg, int *val)"/>
<node CREATED="1419016260640" ID="ID_269925277" MODIFIED="1419016260640" TEXT=" int (*set_reg_val)(struct switch_dev *dev, int reg, int val)"/>
<node CREATED="1419016260640" ID="ID_274729602" MODIFIED="1419016260640" TEXT=" int (*get_vlan_ports)(struct switch_dev *dev, struct switch_val *val)"/>
<node CREATED="1419016260640" ID="ID_926346939" MODIFIED="1419016260640" TEXT=" int (*set_vlan_ports)(struct switch_dev *dev, struct switch_val *val)"/>
<node CREATED="1419016260640" MODIFIED="1419016260640" TEXT=" int (*get_port_pvid)(struct switch_dev *dev, int port, int *val)"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" int (*set_port_pvid)(struct switch_dev *dev, int port, int val)"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" int (*apply_config)(struct switch_dev *dev)"/>
<node CREATED="1419016260641" ID="ID_725063215" MODIFIED="1419016260641" TEXT=" int (*reset_switch)(struct switch_dev *dev)"/>
<node CREATED="1419016260641" ID="ID_903400668" MODIFIED="1419016260641" TEXT=" int (*get_port_link)(struct switch_dev *dev, int port, struct switch_port_link *link)"/>
<node CREATED="1419016260641" ID="ID_636576525" MODIFIED="1419016260641" TEXT=" int (*get_port_stats)(struct switch_dev *dev, int port, struct switch_port_stats *stats)"/>
</node>
<node CREATED="1419016260641" ID="ID_733425259" MODIFIED="1419029829836" TEXT=" char devname[IFNAMSIZ] : linux&#x7cfb;&#x7edf;&#x5206;&#x914d;&#x7684;&#x540d;&#x5b57;,&#x683c;&#x5f0f;&#x5982;switch1"/>
<node CREATED="1419016260641" ID="ID_204697896" MODIFIED="1419018081849" TEXT=" const char *name : switch&#x7684;&#x578b;&#x53f7;&#x540d;&#x79f0;"/>
<node CREATED="1419016260641" ID="ID_1097124857" MODIFIED="1419018630929" TEXT=" const char *alias : &#x4e00;&#x822c;&#x6307;&#x4e0b;&#x9762;switch&#x6240;&#x4f9d;&#x9644;&#x7684;network device&#x7684;&#x540d;&#x5b57;,&#x5373;swdev-&gt;netdev-&gt;name"/>
<node CREATED="1419016260641" ID="ID_906823965" MODIFIED="1419018565744" TEXT=" struct net_device *netdev : switch&#x6240;&#x4f9d;&#x9644;&#x7684;network device"/>
<node CREATED="1419016260641" ID="ID_955833252" MODIFIED="1419018043329" TEXT=" int ports : switch&#x62e5;&#x6709;&#x7684;port&#x6570;&#x91cf;"/>
<node CREATED="1419016260641" ID="ID_92133536" MODIFIED="1419018120992" TEXT=" int vlans : switch&#x652f;&#x6301;&#x7684;vlan&#x6570;&#x91cf;"/>
<node CREATED="1419016260641" ID="ID_684478342" MODIFIED="1419017966499" TEXT=" int cpu_port : &#x7528;&#x4e8e;&#x5c06;&#x534f;&#x8bae;&#x5e27;trap&#x5230;linux&#x7684;switch&#x7aef;&#x53e3;"/>
<node CREATED="1419016260641" ID="ID_579975550" MODIFIED="1419019013809" TEXT=" int id : switch&#x7684;&#x7f16;&#x53f7;,&#x7531;linux&#x7cfb;&#x7edf;&#x5206;&#x914d;"/>
<node CREATED="1419016260641" ID="ID_764032181" MODIFIED="1419019074757" TEXT=" struct list_head dev_list : &#x7528;&#x4e8e;&#x5c06;switch&#x94fe;&#x63a5;&#x5230;linux&#x5168;&#x5c40;switch&#x94fe;&#x8868;swdevs&#x4e2d;"/>
<node CREATED="1419016260641" ID="ID_54081001" MODIFIED="1419032594454" TEXT=" unsigned long def_global : &#xa;&#x7528;&#x4e8e;&#x6307;&#x5b9a;&#x54ea;&#x4e9b;linux&#x5b9a;&#x4e49;&#x7684;&#x6807;&#x51c6;&#x7684;global&#x5c5e;&#x6027;&#x662f;&#x53ef;&#x7528;&#x7684;, &#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x63a9;&#x7801;, &#x5728;swconfig_defaults_init&#x51fd;&#x6570;&#x4e2d;&#x521d;&#x59cb;&#x5316;"/>
<node CREATED="1419018193126" ID="ID_1709916282" MODIFIED="1419032618808">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned long def_port
    </p>
    <p>
      &#29992;&#20110;&#25351;&#23450;&#21738;&#20123;linux&#23450;&#20041;&#30340;&#26631;&#20934;&#30340;port&#23646;&#24615;&#26159;&#21487;&#29992;&#30340;, &#23427;&#26159;&#19968;&#20010;&#25513;&#30721;, &#22312;swconfig_defaults_init&#20989;&#25968;&#20013;&#21021;&#22987;&#21270;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419018234614" ID="ID_205310603" MODIFIED="1419032645798">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      unsigned long def_vlan
    </p>
    <p>
      &#29992;&#20110;&#25351;&#23450;&#21738;&#20123;linux&#23450;&#20041;&#30340;&#26631;&#20934;&#30340;vlan&#23646;&#24615;&#26159;&#21487;&#29992;&#30340;, &#23427;&#26159;&#19968;&#20010;&#25513;&#30721;, &#22312;swconfig_defaults_init&#20989;&#25968;&#20013;&#21021;&#22987;&#21270;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419016260641" ID="ID_238160572" MODIFIED="1419032663110">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;unsigned long def_reg
    </p>
    <p>
      &#29992;&#20110;&#25351;&#23450;&#21738;&#20123;linux&#23450;&#20041;&#30340;&#26631;&#20934;&#30340;&#23492;&#23384;&#22120;&#23646;&#24615;&#26159;&#21487;&#29992;&#30340;, &#23427;&#26159;&#19968;&#20010;&#25513;&#30721;, &#22312;swconfig_defaults_init&#20989;&#25968;&#20013;&#21021;&#22987;&#21270;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1419016260641" ID="ID_790500710" MODIFIED="1419019102918" TEXT=" struct mutex sw_mutex : &#x8bbf;&#x95ee;switch&#x65f6;&#x9700;&#x8981;&#x6301;&#x6709;&#x7684;&#x4e92;&#x65a5;&#x9501;"/>
<node CREATED="1419016260641" FOLDED="true" ID="ID_721071308" MODIFIED="1419018657227" TEXT=" struct switch_port *portbuf">
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" u32 id"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" u32 flags"/>
</node>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" char buf[128]"/>
<node CREATED="1419016260641" FOLDED="true" ID="ID_750276471" MODIFIED="1419016271376" TEXT=" struct switch_led_trigger *led_trigger">
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" struct led_trigger trig"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" struct switch_dev *swdev"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" struct delayed_work sw_led_work"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" u32 port_mask"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" u32 port_link"/>
<node CREATED="1419016260641" MODIFIED="1419016260641" TEXT=" unsigned long port_traffic[SWCONFIG_LED_NUM_PORTS]"/>
</node>
</node>
</node>
</node>
<node CREATED="1417385334639" FOLDED="true" ID="ID_17555275" MODIFIED="1453431375822" TEXT="offloading">
<node CREATED="1417385351364" FOLDED="true" ID="ID_304987215" MODIFIED="1453430534465" TEXT="rx-checksumming">
<node CREATED="1453429963296" ID="ID_702146759" MODIFIED="1453429990710" TEXT="hardware&#x662f;&#x5426;&#x5df2;offload">
<node CREATED="1453429963296" ID="ID_1677726982" MODIFIED="1453430110612">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hardware&#26159;&#21542;&#24050;&#32463;&#35745;&#31639;&#20102;L4&#30340;&#26657;&#39564;&#21644;&#21462;&#20915;&#20110;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;skb-&gt;ip_summed
    </p>
  </body>
</html></richcontent>
<node CREATED="1453430112949" ID="ID_196597178" MODIFIED="1453430121636" TEXT="CHECKSUM_NONE">
<node CREATED="1453430220368" ID="ID_872930103" MODIFIED="1453430249187" TEXT="&#x786c;&#x4ef6;&#x6ca1;&#x6709;&#x8ba1;&#x7b97;L4&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;skb-&gt;csum&#x65e0;&#x610f;&#x4e49;"/>
</node>
<node CREATED="1453430112949" ID="ID_1655959521" MODIFIED="1453430149444" TEXT="CHECKSUM_HW">
<node CREATED="1453430220368" ID="ID_1174335467" MODIFIED="1453430439584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30828;&#20214;&#35745;&#31639;&#20102;L4&#22836;&#37096;&#21644;&#36127;&#36733;&#30340;&#26657;&#39564;&#21644;&#65292;&#23384;&#25918;&#22312;&#20102;skb-&gt;csum&#20013;&#65292;
    </p>
    <p>
      &#36719;&#20214;&#36824;&#38656;&#23558;&#20266;&#22836;&#37096;&#30340;&#26657;&#39564;&#21644;&#21152;&#21040;skb-&gt;csum&#19978;&#65292;
    </p>
    <p>
      &#24182;&#26368;&#32456;&#27604;&#36739;skb-&gt;csum&#21644;L4&#22836;&#37096;&#20013;&#30340;&#26657;&#39564;&#21644;&#20197;&#39564;&#35777;&#26657;&#39564;&#21644;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1453430112949" ID="ID_48832904" MODIFIED="1453430181830" TEXT="CHECKSUM_UNNECESSARY">
<node CREATED="1453430477208" ID="ID_1625781960" MODIFIED="1453430507808" TEXT="&#x786c;&#x4ef6;&#x8ba1;&#x7b97;&#x5e76;&#x9a8c;&#x8bc1;&#x4e86;L4&#x5934;&#x90e8;&#x548c;&#x8d1f;&#x8f7d;&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x56e0;&#x6b64;&#x8f6f;&#x4ef6;&#x4e0d;&#x9700;&#x8981;&#x518d;&#x505a;&#x4efb;&#x4f55;&#x4e8b;&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1428951812846" ID="ID_1586741295" MODIFIED="1428951835710" TEXT="fold&#x4e0e;unfold">
<node CREATED="1428952054585" ID="ID_746253941" MODIFIED="1428952323962" TEXT="&#x4e3a;&#x65b9;&#x4fbf;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x4e00;&#x822c;&#x5c06;&#x88ab;&#x6821;&#x9a8c;&#x7684;&#x5185;&#x5b58;&#x533a;&#x89c6;&#x4e3a;&#x8fde;&#x7eed;&#x7684;32&#x4f4d;&#x5b57;&#xff0c;&#x7136;&#x540e;&#x4f9d;&#x6b21;&#x5c06;&#x5185;&#x5b58;&#x533a;&#x5185;&#x7684;32&#x4f4d;&#x6570;&#x76f8;&#x52a0;&#xff0c;&#x6bcf;&#x6b21;&#x52a0;&#x5b8c;&#x540e;&#x82e5;&#x6709;&#x8fdb;&#x4f4d;(&#x5373;32&#x4f4d;&#x6ea2;&#x51fa;)&#xff0c;&#x5219;&#x548c;&#x518d;&#x52a0;1&#x3002;&#x8fd9;&#x6837;&#x8ba1;&#x7b97;&#x5f97;&#x5230;&#x7684;&#x7ed3;&#x679c;&#x4e5f;&#x662f;32&#x4f4d;&#x7684;&#xff0c;&#x4e5f;&#x79f0;&#x4e4b;&#x4e3a;unfold&#x7684;&#x3002;"/>
<node CREATED="1428952888252" ID="ID_1375021523" MODIFIED="1428953199414">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#32456;&#30340;&#26657;&#39564;&#21644;&#26159;16&#20301;&#30340;&#65292;&#19988;&#26159;&#19978;&#38754;&#21644;&#21462;&#21453;&#21518;&#30340;&#32467;&#26524;&#65292;&#36825;&#26679;&#30340;&#32467;&#26524;&#31216;&#20043;&#20026;fold&#30340;&#12290;
    </p>
    <p>
      &#25152;&#20197;fold&#23454;&#38469;&#19978;&#21253;&#21547;2&#20010;&#36807;&#31243;&#65306;&#19968;&#26159;&#23558;32&#20301;&#21644;&#21464;&#20026; 16&#20301;&#21644;&#65292;&#20108;&#26159;&#23545;&#21644;&#21462;&#21453;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1428953228439" ID="ID_412619257" MODIFIED="1428953521369" TEXT="&#x5c06;32&#x4f4d;&#x548c;&#x7684;&#x9ad8;&#x4f4e;&#x4e24;&#x4e2a;16&#x4f4d;&#x76f8;&#x52a0;&#x5f97;&#x5230;&#x65b0;&#x7684;32&#x4f4d;&#x548c;&#xff0c;&#x82e5;&#x548c;&#x7684;&#x9ad8;16&#x4f4d;&#x4e0d;&#x4e3a;0&#x8868;&#x793a;16&#x4f4d;&#x76f8;&#x52a0;&#x6709;&#x8fdb;&#x4f4d;&#xff0c;&#x5219;&#x7ee7;&#x7eed;&#x5c06;32&#x4f4d;&#x548c;&#x7684;&#x9ad8;&#x4f4e;&#x4e24;&#x4e2a;16&#x4f4d;&#x76f8;&#x52a0;&#xff0c;&#x76f4;&#x5230;32&#x4f4d;&#x548c;&#x7684;&#x9ad8;16&#x4f4d;&#x4e3a;0&#x3002;&#x6b64;&#x65f6;&#x5c06;32&#x4f4d;&#x548c;&#x8f6c;&#x6362;&#x4e3a;16&#x4f4d;&#x548c;&#xff0c;&#x56e0;&#x4e3a;32&#x4f4d;&#x548c;&#x7684;&#x9ad8;16&#x4f4d;&#x4e3a;0&#xff0c;&#x6240;&#x4ee5;&#x8f6c;&#x6362;&#x4e0d;&#x4f1a;&#x4e22;&#x5931;&#x4fe1;&#x606f;&#x3002;"/>
<node CREATED="1428953530832" ID="ID_569368609" MODIFIED="1428953550558" TEXT="&#x5c06;16&#x4f4d;&#x548c;&#x53d6;&#x53cd;&#xff0c;&#x5f97;&#x5230;&#x6700;&#x7ec8;&#x7684;&#x6821;&#x9a8c;&#x548c;"/>
</node>
</node>
<node CREATED="1427955375990" ID="ID_1846132014" MODIFIED="1427955388076" TEXT="&#x5b8c;&#x6574;&#x6821;&#x9a8c;&#x548c;&#x7b97;&#x6cd5;">
<node CREATED="1427948832864" ID="ID_286826503" MODIFIED="1427955467745">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35745;&#31639;unfold&#30340;&#26657;&#39564;&#21644;(&#21363;32&#20301;&#30340;&#26657;&#39564;&#21644;&#65292;&#36824;&#27809;&#26377;&#36716;&#25442;&#20026;16&#20301;&#30340;&#21644;)
    </p>
    <p>
      unsigned int csum(const unsigned char * buff, unsigned len)
    </p>
  </body>
</html></richcontent>
<node CREATED="1427949568753" ID="ID_127814436" MODIFIED="1427949595839" TEXT="&#x5c06;&#x5185;&#x5b58;&#x533a;&#x89c6;&#x4e3a;&#x8fde;&#x7eed;&#x7684;32&#x4f4d;&#x6570;"/>
<node CREATED="1427949599420" ID="ID_1217581384" MODIFIED="1427955227476" TEXT="&#x4f9d;&#x6b21;&#x5c06;&#x5185;&#x5b58;&#x533a;&#x5185;&#x7684;32&#x4f4d;&#x6570;&#x76f8;&#x52a0;"/>
<node CREATED="1427949672226" ID="ID_664027098" MODIFIED="1427955235080" TEXT="&#x6bcf;&#x6b21;&#x52a0;&#x5b8c;&#x540e;&#x82e5;&#x6709;&#x8fdb;&#x4f4d;&#xff0c;&#x5219;&#x548c;&#x518d;&#x52a0;1"/>
</node>
<node CREATED="1427948962123" ID="ID_175715055" MODIFIED="1427955578158">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#19978;&#38754;&#24471;&#21040;&#30340;32&#20301;&#30340;&#26657;&#39564;&#21644;&#36716;&#25442;&#20026;16&#20301;&#30340;&#26657;&#39564;&#21644; (&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;&#65292;&#33509;&#26377;&#36827;&#20301;&#21017;&#32487;&#32493;&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;)&#65292;
    </p>
    <p>
      &#26368;&#21518;&#23558;&#24471;&#21040;&#30340;16&#20301;&#26657;&#39564;&#21644;&#21462;&#21453;(&#21363;&#21453;&#36716;&#27599;&#19968;&#20301;)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1428954090032" ID="ID_1012927490" MODIFIED="1428954103076" TEXT="&#x90e8;&#x5206;&#x6821;&#x9a8c;&#x548c;&#x7b97;&#x6cd5;">
<node CREATED="1428954379841" ID="ID_33832353" MODIFIED="1428954716893">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37096;&#20998;&#26657;&#39564;&#21644;&#31639;&#27861;&#19968;&#33324;&#29992;&#20110;&#35745;&#31639;TCP/UDP&#20266;&#22836;&#37096;&#30340;&#26657;&#39564;&#21644;&#65292;&#23427;&#21482;&#35745;&#31639;&#37096;&#20998;&#20869;&#23481;&#30340;&#26657;&#39564;&#21644;&#65292;&#32780;&#19981;&#26159;&#20840;&#37096;&#20869;&#23481;&#30340;&#26657;&#39564;&#21644;
    </p>
    <p>
      tcp_hdr-&gt;check = ~tcp_v4_check(length, source_ip, destination_ip, base_csum)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1428954725949" ID="ID_1217362237" MODIFIED="1428955054798">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37096;&#20998;&#26657;&#39564;&#21644;&#31639;&#27861;&#22522;&#26412;&#19978;&#19982;&#23436;&#25972;&#26657;&#39564;&#21644;&#31639;&#27861;&#30456;&#21516;&#65292;&#21306;&#21035;&#22312;&#20110;&#37096;&#20998;&#26657;&#39564;&#21644;&#26368;&#21518;&#24182;&#19981;&#21462;&#21453;&#65292;&#22240;&#20026;&#23427;&#36824;&#27809;&#26377;&#23436;&#25104;
    </p>
    <p>
      &#35265;~tcp_v4_check()&#21069;&#38754;&#30340;&#21462;&#21453;&#25805;&#20316;&#65292;&#22240;&#20026;csum_fold()&#36827;&#34892;&#20102;&#21462;&#21453;&#65292;&#25152;&#20197;&#36825;&#37324;&#26159;&#21462;&#21453;&#20877;&#21462;&#21453;&#65292;&#21363;&#19981;&#21462;&#21453;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427948832864" ID="ID_455184152" MODIFIED="1427955467745">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35745;&#31639;unfold&#30340;&#26657;&#39564;&#21644;(&#21363;32&#20301;&#30340;&#26657;&#39564;&#21644;&#65292;&#36824;&#27809;&#26377;&#36716;&#25442;&#20026;16&#20301;&#30340;&#21644;)
    </p>
    <p>
      unsigned int csum(const unsigned char * buff, unsigned len)
    </p>
  </body>
</html></richcontent>
<node CREATED="1427949568753" ID="ID_226805528" MODIFIED="1427949595839" TEXT="&#x5c06;&#x5185;&#x5b58;&#x533a;&#x89c6;&#x4e3a;&#x8fde;&#x7eed;&#x7684;32&#x4f4d;&#x6570;"/>
<node CREATED="1427949599420" ID="ID_1806963958" MODIFIED="1427955227476" TEXT="&#x4f9d;&#x6b21;&#x5c06;&#x5185;&#x5b58;&#x533a;&#x5185;&#x7684;32&#x4f4d;&#x6570;&#x76f8;&#x52a0;"/>
<node CREATED="1427949672226" ID="ID_809203043" MODIFIED="1427955235080" TEXT="&#x6bcf;&#x6b21;&#x52a0;&#x5b8c;&#x540e;&#x82e5;&#x6709;&#x8fdb;&#x4f4d;&#xff0c;&#x5219;&#x548c;&#x518d;&#x52a0;1"/>
</node>
<node CREATED="1427948962123" ID="ID_765698554" MODIFIED="1428954861710">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#19978;&#38754;&#24471;&#21040;&#30340;32&#20301;&#30340;&#26657;&#39564;&#21644;&#36716;&#25442;&#20026;16&#20301;&#30340;&#26657;&#39564;&#21644; (&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;&#65292;&#33509;&#26377;&#36827;&#20301;&#21017;&#32487;&#32493;&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1427955581342" ID="ID_932325213" MODIFIED="1427955591933" TEXT="&#x9012;&#x589e;&#x6821;&#x9a8c;&#x548c;&#x7b97;&#x6cd5;">
<node CREATED="1428953778364" ID="ID_777468574" MODIFIED="1428953821296" TEXT="&#x9996;&#x5148;&#x786e;&#x5b9a;&#x539f;&#x59cb;&#x6821;&#x9a8c;&#x548c;&#x662f;&#x5b8c;&#x6574;&#x6821;&#x9a8c;&#x548c;&#x8fd8;&#x662f;&#x90e8;&#x5206;&#x6821;&#x9a8c;&#x548c;">
<node CREATED="1428953837739" ID="ID_1442286637" MODIFIED="1428954026750">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23436;&#25972;&#26657;&#39564;&#21644;(skb-&gt;ip_summed == CHECKSUM_COMPLETE)
    </p>
    <p>
      &#22914;&#26524;&#21407;&#22987;&#26657;&#39564;&#21644;&#26159;&#23436;&#25972;&#26657;&#39564;&#21644;&#65292;&#21017;&#34920;&#26126;&#26657;&#39564;&#21644;&#26159;&#21462;&#36807;&#21453;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1428953837739" ID="ID_355233168" MODIFIED="1428954055205">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37096;&#20998;&#26657;&#39564;&#21644;(skb-&gt;ip_summed == CHECKSUM_PARTIAL)
    </p>
    <p>
      &#22914;&#26524;&#21407;&#22987;&#26657;&#39564;&#21644;&#26159;&#37096;&#20998;&#26657;&#39564;&#21644;&#65292;&#21017;&#34920;&#26126;&#26657;&#39564;&#21644;&#26159;&#27809;&#26377;&#21462;&#36807;&#21453;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1428955119488" ID="ID_191045454" MODIFIED="1428955130262" TEXT="&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;&#x8c03;&#x6574;&#x503c;">
<node CREATED="1427955638973" ID="ID_1348216899" MODIFIED="1427955758812">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#25913;&#21464;&#21069;&#30340;&#20869;&#23481;&#21462;&#21453;&#65292;&#28982;&#21518;&#19982;&#25913;&#21464;&#21518;&#30340;&#20869;&#23481;&#19968;&#21516;&#25918;&#20837;&#19968;&#22359;&#20869;&#23384;&#21306;
    </p>
    <p>
      [~from1, ~from2, ~from3, ~from4, to1, to2, to3, to4]
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427955768066" ID="ID_1115323567" LINK="#ID_286826503" MODIFIED="1427955872824" TEXT="&#x8ba1;&#x7b97;&#x4e0a;&#x9762;&#x5f97;&#x5230;&#x7684;&#x5185;&#x5b58;&#x533a;&#x7684;unfold&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x5f97;&#x5230;&#x6821;&#x9a8c;&#x548c;&#x8c03;&#x6574;&#x503c;"/>
</node>
<node CREATED="1428955174937" ID="ID_1471911689" MODIFIED="1428955248554" TEXT="&#x5982;&#x679c;&#x539f;&#x59cb;&#x6821;&#x9a8c;&#x548c;&#x662f;&#x5b8c;&#x6574;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x5219;&#x5c06;&#x4e0a;&#x9762;&#x8ba1;&#x7b97;&#x5f97;&#x5230;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x8c03;&#x6574;&#x503c;&#x53d6;&#x53cd;&#xff0c;&#x518d;&#x52a0;&#x5230;&#x539f;&#x59cb;&#x6821;&#x9a8c;&#x548c;&#x4e0a;"/>
<node CREATED="1428955174937" ID="ID_216840906" MODIFIED="1428955292215" TEXT="&#x5982;&#x679c;&#x539f;&#x59cb;&#x6821;&#x9a8c;&#x548c;&#x662f;&#x90e8;&#x5206;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x5219;&#x5c06;&#x4e0a;&#x9762;&#x8ba1;&#x7b97;&#x5f97;&#x5230;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x8c03;&#x6574;&#x503c;&#x76f4;&#x63a5;&#x52a0;&#x5230;&#x539f;&#x59cb;&#x6821;&#x9a8c;&#x548c;&#x4e0a;"/>
<node CREATED="1427955980058" ID="ID_262597914" MODIFIED="1427956039050">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#19978;&#38754;&#24471;&#21040;&#30340;32&#20301;&#30340;&#26657;&#39564;&#21644;&#36716;&#25442;&#20026;16&#20301;&#30340;&#26657;&#39564;&#21644; (&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;&#65292;&#33509;&#26377;&#36827;&#20301;&#21017;&#32487;&#32493;&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;)
    </p>
    <p>
      &#27492;&#21363;&#26368;&#32456;&#30340;&#26657;&#39564;&#21644;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1427956058569" ID="ID_786717577" MODIFIED="1428955447956">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23436;&#25972;&#26657;&#39564;&#21644;&#31639;&#27861;
    </p>
    <p>
      &#37096;&#20998;&#26657;&#39564;&#21644;&#31639;&#27861;
    </p>
    <p>
      &#36882;&#22686;&#26657;&#39564;&#21644;&#31639;&#27861;
    </p>
    <p>
      &#30340;&#24322;&#21516;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427956095197" ID="ID_998128012" MODIFIED="1427956100396" TEXT="&#x76f8;&#x540c;&#x4e4b;&#x5904;">
<node CREATED="1427949568753" ID="ID_1373894852" MODIFIED="1427949595839" TEXT="&#x5c06;&#x5185;&#x5b58;&#x533a;&#x89c6;&#x4e3a;&#x8fde;&#x7eed;&#x7684;32&#x4f4d;&#x6570;"/>
<node CREATED="1427949599420" ID="ID_37517688" MODIFIED="1427955227476" TEXT="&#x4f9d;&#x6b21;&#x5c06;&#x5185;&#x5b58;&#x533a;&#x5185;&#x7684;32&#x4f4d;&#x6570;&#x76f8;&#x52a0;"/>
<node CREATED="1427949672226" ID="ID_654939146" MODIFIED="1427955235080" TEXT="&#x6bcf;&#x6b21;&#x52a0;&#x5b8c;&#x540e;&#x82e5;&#x6709;&#x8fdb;&#x4f4d;&#xff0c;&#x5219;&#x548c;&#x518d;&#x52a0;1"/>
</node>
<node CREATED="1427956101103" ID="ID_1723624049" MODIFIED="1427956106100" TEXT="&#x4e0d;&#x540c;&#x4e4b;&#x5904;">
<node CREATED="1427956163399" ID="ID_1915308203" MODIFIED="1428955505866">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23436;&#25972;&#26657;&#39564;&#21644;&#31639;&#27861;&#35745;&#31639;&#30340;&#20869;&#23384;&#21306;&#26159;&#23436;&#25972;&#30340;&#20869;&#23481;&#65292;&#20854;&#26368;&#32456;&#26657;&#39564;&#21644;&#20540;&#26159;&#21462;&#36807;&#21453;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427956163399" ID="ID_1893642765" MODIFIED="1428955835005">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37096;&#20998;&#26657;&#39564;&#21644;&#31639;&#27861;&#35745;&#31639;&#30340;&#20869;&#23384;&#21306;&#26159;&#19968;&#37096;&#20998;&#30340;&#20869;&#23481;&#65292;&#20854;&#26368;&#32456;&#26657;&#39564;&#21644;&#20540;&#26159;&#27809;&#26377;&#21462;&#36807;&#21453;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427956291325" ID="ID_1029479566" MODIFIED="1428955794843">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36882;&#22686;&#26657;&#39564;&#21644;&#31639;&#27861;&#35745;&#31639;&#30340;&#26159;&#25913;&#21464;&#37096;&#20998;&#30340;&#20869;&#23481;&#65292;&#20854;&#20013;&#25913;&#21464;&#21069;&#30340;&#20869;&#23481;&#21462;&#21453;&#25918;&#20837;&#20869;&#23384;&#21306;&#65292;&#25913;&#21464;&#21518;&#30340;&#20869;&#23481;&#30452;&#25509;&#25918;&#20837;&#20869;&#23384;&#21306;
    </p>
    <p>
      &#35745;&#31639;&#24471;&#21040;&#26657;&#39564;&#21644;&#30340;&#35843;&#25972;&#20540;
    </p>
    <p>
      &#20877;&#26681;&#25454;&#21407;&#22987;&#26657;&#39564;&#21644;&#26159;&#23436;&#25972;&#26657;&#39564;&#21644;&#36824;&#26159;&#37096;&#20998;&#26657;&#39564;&#21644;&#26469;&#20915;&#23450;&#26159;&#21542;&#23558;&#35843;&#25972;&#20540;&#21462;&#21453;&#65292;&#20043;&#21518;&#20877;&#21152;&#21040;&#21407;&#22987;&#26657;&#39564;&#21644;&#19978;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1427948842099" ID="ID_215962806" MODIFIED="1427948844964" TEXT="API">
<node CREATED="1427949272170" ID="ID_922045159" MODIFIED="1427949303729" TEXT="unsigned int csum_partial (const unsigned char * buff, unsigned len, unsigned int sum)">
<node CREATED="1427949441515" ID="ID_1615324698" MODIFIED="1427949539921" TEXT="&#x8ba1;&#x7b97;buff&#x6307;&#x5411;&#x7684;&#x5185;&#x5b58;&#x533a;&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x7136;&#x540e;&#x52a0;&#x4e0a;sum&#x518d;&#x8fd4;&#x56de;"/>
<node CREATED="1427949747879" ID="ID_605059876" MODIFIED="1427949768434" TEXT="&#x6ce8;&#x610f;&#x8fd4;&#x56de;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x662f;&#x672a;fold&#x7684;"/>
</node>
<node CREATED="1427948904258" ID="ID_668205541" MODIFIED="1427950614759" TEXT="unsigned int csum_fold (unsigned int sum)">
<node CREATED="1427948962123" ID="ID_284007293" MODIFIED="1427949161437">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#19968;&#20010;32&#20301;&#30340;&#26657;&#39564;&#21644;&#36716;&#25442;&#20026;16&#20301;&#30340;&#26657;&#39564;&#21644;(&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;&#65292;&#33509;&#26377;&#36827;&#20301;&#21017;&#32487;&#32493;&#39640;&#20302;&#20004;&#20010;16&#20301;&#30456;&#21152;)&#65292;
    </p>
    <p>
      &#28982;&#21518;&#21462;&#21453;(&#21363;&#21453;&#36716;&#27599;&#19968;&#20301;)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427948963775" ID="ID_1361123372" MODIFIED="1427948991944">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline __sum16 csum_fold(__wsum csum)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;u32 sum = (__force u32)csum;
    </p>
    <p>
      &#160;&#160;&#160;&#160;sum = (sum &amp; 0xffff) + (sum &gt;&gt; 16);
    </p>
    <p>
      &#160;&#160;&#160;&#160;sum = (sum &amp; 0xffff) + (sum &gt;&gt; 16);
    </p>
    <p>
      &#160;&#160;&#160;&#160;return (__force __sum16)~sum;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1417385362292" FOLDED="true" ID="ID_692422208" MODIFIED="1453431372999" TEXT="tx-checksumming">
<node CREATED="1417386143039" ID="ID_1230578225" MODIFIED="1417386274799" TEXT="network device&#x5728;&#x6ce8;&#x518c;&#x65f6;&#x5728;netdev-&gt;features&#x4e2d;&#x8bbe;&#x7f6e;NETIF_F_HW_CSUM&#x6807;&#x8bc6;&#xff0c;&#x8868;&#x793a;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x652f;&#x6301;&#x786c;&#x4ef6;&#x7684;checksum offloading"/>
<node CREATED="1417386375088" ID="ID_992583835" MODIFIED="1417386819078" TEXT="linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x5728;&#x53d1;&#x9001;&#x6570;&#x636e;&#x5305;&#x65f6;&#x82e5;&#x68c0;&#x6d4b;&#x5230;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x652f;&#x6301;checksum offloading&#x65f6;(netdev-&gt;features &amp; NETIF_F_HW_CSUM), &#x5219;&#x4ec5;&#x8ba1;&#x7b97;&#x4f2a;&#x5934;&#x90e8;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x800c;&#x4e0d;&#x8ba1;&#x7b97;layer 4&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x540c;&#x65f6;&#x8bbe;&#x7f6e;&#x4ee5;&#x4e0b;&#x5b57;&#x6bb5;&#x4f9b;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x4f7f;&#x7528;">
<node CREATED="1417386851439" ID="ID_1319354542" MODIFIED="1417386952268" TEXT="skb-&gt;csum_start &#xff1a;&#x9700;&#x8981;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;&#x7684;&#x6570;&#x636e;&#x7684;&#x8d77;&#x59cb;&#x4f4d;&#x7f6e;&#xff0c;&#x4e5f;&#x5c31;&#x662f;layer 4&#x5934;&#x90e8;&#x7684;&#x8d77;&#x59cb;&#x4f4d;&#x7f6e;&#xff0c;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x76f8;&#x5bf9;skb-&gt;head&#x7684;&#x504f;&#x79fb;&#x503c;"/>
<node CREATED="1417386980063" ID="ID_1086541749" MODIFIED="1417387034640" TEXT="skb-&gt;csum_offset &#xff1a;&#x6821;&#x9a8c;&#x548c;&#x7684;&#x5b58;&#x653e;&#x4f4d;&#x7f6e;&#xff0c;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x76f8;&#x5bf9;skb-&gt;csum_start&#x7684;&#x504f;&#x79fb;&#x503c;"/>
<node CREATED="1417387055811" ID="ID_1683353966" MODIFIED="1417387686395" TEXT="tcph-&gt;check&#x6216;udph-&gt;check &#xff1a;&#x4f2a;&#x5934;&#x90e8;&#x7684;&#x6821;&#x9a8c;&#x548c;&#x5b58;&#x653e;&#x5728;tcp/udp&#x7684;checksum&#x5b57;&#x6bb5;&#xff0c;&#x8fd9;&#x91cc;&#x4e5f;&#x662f;skb-&gt;csum_offset&#x6240;&#x6307;&#x7684;&#x4f4d;&#x7f6e;"/>
<node CREATED="1417387162294" ID="ID_1217083906" MODIFIED="1417387275582" TEXT="skb-&gt;ip_summed = CHECKSUM_PARTIAL &#xff1a;&#x8868;&#x793a;layer 4&#x7684;&#x6821;&#x9a8c;&#x548c;&#x53ea;&#x662f;&#x90e8;&#x5206;&#x8ba1;&#x7b97;&#xff08;&#x8ba1;&#x7b97;&#x4e86;&#x4f2a;&#x5934;&#x90e8;&#xff09;&#xff0c;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x8fd8;&#x9700;&#x5168;&#x90e8;&#x8ba1;&#x7b97;&#x6821;&#x9a8c;&#x548c;"/>
</node>
<node CREATED="1417387349251" ID="ID_8979876" MODIFIED="1417387633173" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x5728;skb-&gt;ip_summed&#x4e0a;&#x68c0;&#x6d4b;&#x5230;CHECKSUM_PARTIAL&#x6807;&#x8bc6;&#x65f6;&#xff0c;&#x5e94;&#x8ba1;&#x7b97;&#x4ece;skb-&gt;csum_start&#x5230;&#x5305;&#x672b;&#x5c3e;&#x90e8;&#x5206;&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x5e76;&#x52a0;&#x5230;skb-&gt;csum_offset&#x6240;&#x6307;&#x7684;&#x503c;&#x4e0a;&#x3002;&#x5305;&#x7684;&#x957f;&#x5ea6;&#x7531;skb-&gt;len&#x6307;&#x5b9a;&#x3002;"/>
<node CREATED="1417387162294" ID="ID_1708912187" MODIFIED="1453431365380" TEXT="&#x9664;&#x6b64;&#x4e4b;&#x5916;&#xff0c;&#xa;&#x5f53;skb-&gt;ip_summed = CHECKSUM_NONE &#xff1a;&#x8868;&#x793a;&#x6821;&#x9a8c;&#x548c;&#x8fd8;&#x6ca1;&#x6709;&#x88ab;&#x8ba1;&#x7b97;&#xff0c;&#x540e;&#x7eed;&#x8f6f;&#x4ef6;&#x6216;&#x786c;&#x4ef6;&#x9700;&#x8981;&#x8ba1;&#x7b97;&#xa;&#x5f53;skb-&gt;ip_summed = CHECKSUM_COMPLETE &#xff1a;&#x8868;&#x793a;&#x5df2;&#x5b8c;&#x6210;&#x6821;&#x9a8c;&#x548c;&#x8ba1;&#x7b97;&#xff0c;&#x540e;&#x7eed;&#x8f6f;&#x4ef6;&#x548c;&#x786c;&#x4ef6;&#x90fd;&#x4e0d;&#x9700;&#x8981;&#x518d;&#x8ba1;&#x7b97;"/>
</node>
<node CREATED="1417385376342" ID="ID_62863727" MODIFIED="1417385377362" TEXT="scatter-gather"/>
<node CREATED="1417385394193" ID="ID_41705608" MODIFIED="1417385395690" TEXT="tcp segmentation offload"/>
<node CREATED="1417385408569" ID="ID_1343841833" MODIFIED="1417385410047" TEXT="udp fragmentation offload"/>
<node CREATED="1417385422775" FOLDED="true" ID="ID_239447021" MODIFIED="1429129486516" TEXT="generic segmentation offload">
<node CREATED="1423457115230" FOLDED="true" ID="ID_1075144274" MODIFIED="1429129484040" TEXT="&#x57fa;&#x672c;&#x539f;&#x7406;">
<node CREATED="1423457129503" ID="ID_1556931110" MODIFIED="1423552062162" TEXT="&#x4e00;&#x4e2a;TCP&#x6216;UDP&#x5305;&#x6700;&#x5927;&#x53ef;&#x4ee5;&#x8fbe;&#x5230;65535&#x5b57;&#x8282;&#xff0c;&#x4f46;&#x662f;&#x4e00;&#x4e2a;IP&#x5305;&#x6700;&#x5927;&#x53ea;&#x80fd;&#x8fbe;&#x5230;&#x51fa;&#x63a5;&#x53e3;&#x7684;MTU&#x5927;&#x5c0f;&#xff0c;&#x56e0;&#x6b64;TCP/UDP&#x6570;&#x636e;&#x4f20;&#x9012;&#x5230;IP&#x5c42;&#x65f6;&#x9700;&#x8981;&#x5206;&#x6210;&#x8bb8;&#x591a;&#x6bb5;segments,&#x6bcf;&#x4e00;&#x4e2a;segment&#x5f62;&#x6210;&#x4e00;&#x4e2a;&#x5355;&#x72ec;&#x7684;&#x5305;"/>
<node CREATED="1423457346231" ID="ID_1957540971" MODIFIED="1423639749850" TEXT="&#x6ce8;&#x610f;segmentation&#x4e0e;fragmentation&#x7684;&#x4e0d;&#x540c;">
<node CREATED="1423457405964" ID="ID_945434860" MODIFIED="1423552109012">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;UDP&#32780;&#35328;&#65292;&#29992;&#25143;&#25968;&#25454;&#26159;&#26377;&#36793;&#30028;&#30340;&#65292;&#22240;&#27492;&#29992;&#25143;&#30340;&#25968;&#25454;&#24517;&#39035;&#29992;&#19968;&#20010;IP&#21253;&#21457;&#36865;&#20986;&#21435;
    </p>
    <p>
      &#25152;&#20197;&#19968;&#20010;&#22823;&#30340;UDP&#21253;&#20998;&#25104;&#22810;&#20010;segments&#21518;&#27599;&#20010;segment&#25104;&#20026;IP&#21253;&#30340;&#19968;&#20010;&#20998;&#29255;fragment&#65292;&#25152;&#26377;segment&#32452;&#25104;&#19968;&#20010;IP&#21253;&#12290;
    </p>
    <p>
      &#25152;&#20197;&#23545;UDP&#32780;&#35328;&#65292;&#20570;segmentation&#20854;&#23454;&#23601;&#26159;&#20570;fragmentation&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423459433934" ID="ID_1572984421" MODIFIED="1423459452246">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_UFO_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1423457405964" ID="ID_869642258" MODIFIED="1423552137011">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;TCP&#32780;&#35328;&#65292;&#29992;&#25143;&#25968;&#25454;&#26159;&#26080;&#36793;&#30028;&#30340;&#65292;&#22240;&#27492;&#29992;&#25143;&#30340;&#25968;&#25454;&#21487;&#20197;&#29992;&#22810;&#20010;IP&#21253;&#21457;&#36865;&#20986;&#21435;
    </p>
    <p>
      &#25152;&#20197;&#19968;&#20010;&#22823;&#30340;TCP&#21253;&#20998;&#25104;&#22810;&#20010;segments&#21518;&#27599;&#20010;segment&#25104;&#20026;&#19968;&#20010;&#29420;&#31435;&#30340;IP&#21253;&#12290;
    </p>
    <p>
      &#25152;&#20197;&#23545;TCP&#32780;&#35328;&#65292;&#20570;segmentation&#24182;&#19981;&#20250;&#23548;&#33268;fragmentation&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423459546260" ID="ID_772010298" MODIFIED="1423459558222">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_TSO_1.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1423457924121" ID="ID_1379538912" MODIFIED="1423552151808" TEXT="Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x662f;&#x4ee5;&#x5305;&#x4e3a;&#x5355;&#x4f4d;&#x5904;&#x7406;&#x7684;&#xff0c;&#x5f53;&#x4e00;&#x4e2a;&#x5927;&#x7684;TCP/UDP&#x5305;&#x5206;&#x6210;&#x591a;&#x4e2a;segments&#x540e;&#x610f;&#x5473;&#x7740;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x5305;&#x7684;&#x6570;&#x91cf;&#x589e;&#x591a;&#x4e86;&#xff0c;&#x8fd9;&#x5c31;&#x4f1a;&#x964d;&#x4f4e;&#x5904;&#x7406;&#x901f;&#x5ea6;&#xff0c;&#x5f71;&#x54cd;&#x5230;throughput&#x3002;"/>
<node CREATED="1423458200097" ID="ID_280029124" MODIFIED="1423552172097" TEXT="Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x5bf9;TCP/UDP&#x5927;&#x5305;&#x5206;&#x6210;&#x7684;&#x591a;&#x4e2a;segments&#x7684;&#x5904;&#x7406;&#x5176;&#x5b9e;&#x662f;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#x4e00;&#x4e2a;&#x57fa;&#x672c;&#x7684;offload&#x7684;&#x601d;&#x60f3;&#x662f;&#x5c3d;&#x91cf;&#x7684;&#x5c06;segmentatin&#x7684;&#x65f6;&#x95f4;&#x63a8;&#x8fdf;&#xff1a;&#x5982;&#x679c;&#x53d1;&#x5305;&#x8bbe;&#x5907;&#x652f;&#x6301;TCP/UDP&#x7684;segmentation&#xff0c;&#x5219;&#x5c06;&#x5176;&#x63a8;&#x8fdf;&#x5230;hardware&#x91cc;&#x9762;&#x53bb;&#xff0c;&#x5982;&#x679c;&#x53d1;&#x5305;&#x8bbe;&#x5907;&#x4e0d;&#x652f;&#x6301;TCP/UDP&#x7684;segmentation&#xff0c;&#x5219;&#x5c06;&#x5176;&#x63a8;&#x8fdf;&#x5230;&#x534f;&#x8bae;&#x6808;&#x5904;&#x7406;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x9a71;&#x52a8;&#x53d1;&#x5305;&#x4e4b;&#x524d;&#x3002;"/>
</node>
<node CREATED="1423462628832" FOLDED="true" ID="ID_553120627" MODIFIED="1429129373657" TEXT="API">
<node CREATED="1423462633441" ID="ID_1066888312" MODIFIED="1423462688567" TEXT="&#x5f00;&#x542f;&#x5173;&#x95ed;GSO&#x529f;&#x80fd;">
<node CREATED="1423462709455" ID="ID_1841485839" LINK="#ID_99443323" MODIFIED="1423462744448" TEXT="ethtool -K eth0 gso on"/>
</node>
<node CREATED="1423462690135" ID="ID_209530565" MODIFIED="1423462705246" TEXT="GSO, TSO, UFO&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;"/>
<node CREATED="1423467797058" ID="ID_398398839" MODIFIED="1425279347419" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x5bf9;GSO, TSO, UFO&#x529f;&#x80fd;&#x7684;&#x652f;&#x6301;">
<node CREATED="1423465947640" ID="ID_1475727327" MODIFIED="1423467925596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30828;&#20214;&#25903;&#25345;TSO, UFO, GSO&#30340;&#32593;&#32476;&#35774;&#22791;&#22312;&#27880;&#20876;&#20854;&#32593;&#32476;&#35774;&#22791;&#26102;&#20250;&#22312;dev-&gt;hw_features&#19978;&#32622;&#30456;&#24212;&#30340;&#26631;&#35782;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423466046214" ID="ID_1937528663" MODIFIED="1423466075753" TEXT="&#x82e5;&#x652f;&#x6301;TSO&#xff0c;&#x5219;&#x7f6e;NETIF_F_TSO&#x6807;&#x8bc6;"/>
<node CREATED="1423466046214" ID="ID_363002075" MODIFIED="1423466928965">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#25903;&#25345;UFO&#65292;&#21017;&#32622;NETIF_F_UFO&#26631;&#35782;
    </p>
    <p>
      &#24456;&#23569;&#26377;&#30828;&#20214;&#25903;&#25345;UFO&#65292;&#22240;&#20026;UFO&#28041;&#21450;&#21040;IP&#21253;&#20998;&#29255;&#38382;&#39064;&#65292;&#27604;&#36739;&#22797;&#26434;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1423466046214" ID="ID_1021036753" MODIFIED="1423466145241" TEXT="&#x82e5;&#x652f;&#x6301;GSO&#xff0c;&#x5219;&#x7f6e;NETIF_F_GSO&#x6807;&#x8bc6;"/>
<node CREATED="1423467034955" ID="ID_1270592255" MODIFIED="1423467205386" TEXT="&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x786c;&#x4ef6;&#x5bf9;&#x4e8e;TSO, UFO, GSO&#x7684;&#x652f;&#x6301;&#x90fd;&#x4f9d;&#x8d56;&#x4e8e;scatter/gather&#x8fd9;&#x4e2a;&#x529f;&#x80fd;&#xff0c;&#x6240;&#x4ee5;&#x4e0a;&#x9762;&#x4e09;&#x4e2a;&#x529f;&#x80fd;&#x4e2d;&#x4efb;&#x4f55;&#x4e00;&#x4e2a;&#x4f7f;&#x80fd;&#x90fd;&#x9700;&#x8981;NETIF_F_SG&#x6807;&#x8bc6;&#x5728;dev-&gt;hw_features&#x4e0a;&#x7f6e;&#x4f4d;"/>
</node>
<node CREATED="1423467848776" ID="ID_1768666464" MODIFIED="1423467865168">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      GSO&#26082;&#21487;&#20197;&#22312;&#30828;&#20214;&#19978;&#23454;&#29616;&#65292;&#20063;&#21487;&#20197;&#22312;&#36719;&#20214;&#19978;&#23454;&#29616;&#65292;&#23427;&#19981;&#20381;&#36182;&#20110;&#29305;&#23450;&#30828;&#20214;&#65292;&#25152;&#20197;&#27492;&#39033;&#21151;&#33021;&#22987;&#32456;&#26159;&#20351;&#33021;&#30340;
    </p>
  </body>
</html></richcontent>
<arrowlink DESTINATION="ID_1768666464" ENDARROW="Default" ENDINCLINATION="0;0;" ID="Arrow_ID_578272248" STARTARROW="None" STARTINCLINATION="0;0;"/>
<node CREATED="1423467867876" ID="ID_1277339836" MODIFIED="1423467918143" TEXT="&#x5728;&#x51fd;&#x6570;register_netdevice()&#x4e2d;&#x59cb;&#x7ec8;&#x4f1a;&#x5c06;&#x6807;&#x8bc6;NETIF_F_GSO&#x548c;NETIF_F_GRO&#x8bbe;&#x7f6e;&#x5728;dev-&gt;hw_features&#x548c;dev-&gt;features&#x4e0a;"/>
</node>
</node>
<node CREATED="1423550762835" ID="ID_1937043858" MODIFIED="1423550784852" TEXT="L4&#x5982;&#x4f55;&#x4f7f;&#x7528;&#x6b64;&#x529f;&#x80fd;"/>
</node>
<node CREATED="1423465189309" ID="ID_769716863" MODIFIED="1425280778073" TEXT="&#x8f6f;&#x4ef6;&#x5b9e;&#x73b0;">
<node CREATED="1423547695199" FOLDED="true" ID="ID_1737133946" MODIFIED="1425280833316" TEXT="&#x57fa;&#x672c;&#x6d41;&#x7a0b;">
<node CREATED="1423469710341" ID="ID_643162456" MODIFIED="1423469721678">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GSO_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1423547716018" FOLDED="true" ID="ID_1100646544" MODIFIED="1425281086611" TEXT="&#x6570;&#x636e;&#x6846;&#x67b6;">
<node CREATED="1423546963989" ID="ID_1454300783" MODIFIED="1423546974865">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GSO_2.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1423547770188" ID="ID_102341483" MODIFIED="1423547993974" TEXT="&#x5728;&#x505a;segmentation&#x4e4b;&#x524d;&#xff0c;&#x6240;&#x6709;&#x6570;&#x636e;&#x653e;&#x5728;&#x4e00;&#x4e2a;skb&#x91cc;&#xff0c;skb-&gt;data&#x6307;&#x5411;&#x4e86;&#x9700;&#x8981;&#x505a;segmentation&#x7684;&#x6570;&#x636e;&#xff0c;&#x5305;&#x62ec;L2 header, L3 header, L4 header, L4 payload&#xa;&#x540c;&#x65f6;skb_shinfo(skb)-&gt;gso_size&#xff0c;skb_shinfo(skb)-&gt;gso_segs&#xff0c; skb_shinfo(skb)-&gt;gso_type&#x90fd;&#x4e0d;&#x4e3a;0&#xff0c;&#x8868;&#x793a;&#x9700;&#x8981;&#x505a;segmentation."/>
<node CREATED="1423548009964" ID="ID_1113724757" MODIFIED="1423552239809" TEXT="&#x505a;&#x5b8c;segmentation&#x4e4b;&#x540e;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;segment&#x7531;&#x4e00;&#x4e2a;&#x65b0;&#x7684;skb&#x8868;&#x793a;&#xff0c;&#x4ed6;&#x4eec;&#x94fe;&#x63a5;&#x5728;&#x6700;&#x521d;&#x9700;&#x8981;&#x505a;segmentation&#x7684;&#x539f;&#x59cb;skb&#x7684;&#x540e;&#x9762;&#xff0c;&#x7531;skb-&gt;next&#x6307;&#x51fa;&#x3002;&#x6bcf;&#x4e2a;&#x65b0;&#x7684;segment&#x7684;skb_shinfo(skb)-&gt;gso_xxx&#x5747;&#x4e3a;0,&#x8868;&#x793a;&#x4e0d;&#x518d;&#x9700;&#x8981;&#x505a;segmentation&#x3002;&#x6bcf;&#x4e2a;segment&#x4e2d;L4 payload&#x7684;&#x5927;&#x5c0f;&#x7b49;&#x4e8e;&#x539f;&#x59cb;skb&#x4e2d;skb_shinfo(skb)-&gt;gso_size&#x6307;&#x5b9a;&#x7684;&#x5927;&#x5c0f;&#x3002;"/>
<node CREATED="1423548396268" ID="ID_1481568878" MODIFIED="1423552257254" TEXT="&#x5728;dev_hard_start_xmit()&#x51fd;&#x6570;&#x4e2d;&#x4f1a;&#x8c03;&#x7528;skb-&gt;dev-&gt;ops-&gt;ndo_start_xmit()&#x53d1;&#x9001;&#x6bcf;&#x4e2a;segment&#xff0c;&#x5373;&#x539f;&#x59cb;skb-&gt;next&#x6307;&#x5411;&#x7684;skb&#x94fe;&#x8868;&#x3002;&#x4f46;&#x662f;&#x6ce8;&#x610f;&#x539f;&#x59cb;&#x7684;skb&#x4e0d;&#x4f1a;&#x88ab;&#x53d1;&#x9001;&#xff0c;&#x800c;&#x662f;&#x88ab;free&#x91ca;&#x653e;&#x3002;"/>
<node CREATED="1423550232377" ID="ID_1014946340" MODIFIED="1423553472886" TEXT="segments&#x7684;&#x91ca;&#x653e;">
<node CREATED="1423551986184" ID="ID_1423075746" MODIFIED="1423552398347" TEXT="&#x6ce8;&#x610f;&#x5230;&#x6240;&#x6709;segments&#x90fd;&#x94fe;&#x63a5;&#x5728;&#x539f;&#x59cb;skb&#x7684;skb-&gt;next&#x540e;&#x9762;&#xff0c;&#x800c;&#x539f;&#x59cb;skb&#x662f;&#x4e0d;&#x53d1;&#x9001;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5404;segments&#x5176;&#x5b9e;&#x662f;&#x4e0d;&#x80fd;&#x72ec;&#x7acb;&#x4e8e;&#x539f;&#x59cb;skb&#x800c;&#x5b58;&#x5728;&#x7684;">
<node CREATED="1423552445955" ID="ID_1826751745" MODIFIED="1423552614140">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35797;&#24819;skb&#19981;&#23384;&#22312;&#20102;&#65292;&#21017;segments&#30001;nskb = skb-&gt;next&#34920;&#31034;&#65292;&#20294;&#26159;nsbk&#20316;&#20026;&#38142;&#34920;&#22836;&#21448;&#26159;&#19981;&#21457;&#36865;&#30340;&#65292;&#25152;&#20197;&#26368;&#32456;&#21457;&#20986;&#21435;&#30340;&#21482;&#26159;nskb-&gt;next&#25152;&#25351;&#21521;&#30340;&#21518;&#32493;segments&#65292;&#30001;&#20110;nskb&#19981;&#21457;&#36865;&#65292;&#21017;&#23569;&#20102;&#19968;&#20010;segment&#65292;&#24517;&#28982;&#36896;&#25104;&#38169;&#35823;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1423552625748" ID="ID_639756729" MODIFIED="1423552812809" TEXT="&#x56e0;&#x6b64;&#x5728;&#x91ca;&#x653e;&#x539f;&#x59cb;skb&#x65f6;&#x5fc5;&#x987b;&#x91ca;&#x653e;&#x6240;&#x6709;&#x7684;segments&#xff0c;&#x56e0;&#x6b64;&#x5728;dev_gso_segment()&#x51fd;&#x6570;&#x4e2d;&#x505a;&#x5b8c;segmentation&#x540e;&#x5c06;&#x539f;&#x59cb;skb&#x7684;&#x91ca;&#x653e;&#x51fd;&#x6570;&#x66ff;&#x6362;&#x4e3a;dev_gso_skb_destructor&#x5c31;&#x662f;&#x4e3a;&#x4e86;&#x91ca;&#x653e;&#x539f;&#x59cb;skb&#x65f6;&#x540c;&#x65f6;&#x91ca;&#x653e;&#x6839;&#x636e;&#x539f;&#x59cb;skb&#x751f;&#x6210;&#x7684;segments."/>
<node CREATED="1423552839541" ID="ID_1067843390" MODIFIED="1423553088495" TEXT="&#x5728;dev_hard_start_xmit()&#x51fd;&#x6570;&#x4e2d;&#x53d1;&#x9001;&#x539f;&#x59cb;skb&#x751f;&#x6210;&#x7684;segments&#x65f6;&#xff0c;&#x6709;&#x53ef;&#x80fd;&#x53d1;&#x9001;&#x5931;&#x8d25;&#xff0c;&#x5931;&#x8d25;&#x540e;&#x628a;&#x5931;&#x8d25;&#x7684;segment&#x63d2;&#x56de;&#x5230;&#x539f;&#x59cb;skb&#x7684;skb-&gt;next&#x540e;&#x9762;&#xff0c;&#x7136;&#x540e;&#x8fd4;&#x56de;&#x3002;&#xa;&#x5219;&#x4e0b;&#x6b21;&#x53d1;&#x5305;&#x65f6;&#x7ee7;&#x7eed;&#x53d1;&#x9001;&#x539f;&#x59cb;skb&#xff0c;&#x800c;dev_hard_start_xmit()&#x51fd;&#x6570;&#x68c0;&#x6d4b;&#x5230;&#x539f;&#x59cb;skb&#x7684;skb-&gt;next&#x4e0d;&#x4e3a;&#x7a7a;&#x65f6;&#x76f4;&#x63a5;&#x8df3;&#x5230;gso&#x6807;&#x7b7e;&#x7ee7;&#x7eed;&#x53d1;&#x9001;&#x539f;&#x59cb;skb&#x7684;skb-&gt;next&#x6307;&#x5411;&#x7684;segments.">
<node CREATED="1423553126500" ID="ID_441457106" MODIFIED="1423553353565">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#22312;dev_hard_start_xmit()&#20989;&#25968;&#20013;&#21457;&#36865;segment&#22833;&#36133;&#36820;&#22238;&#21518;&#65292;&#31995;&#32479;&#38656;&#35201;&#37322;&#25918;&#21407;&#22987;skb&#65292;&#21017;&#30001;&#20110;segments&#19981;&#33021;&#29420;&#31435;&#20110;&#21407;&#22987;skb&#32780;&#23384;&#22312;&#65292;&#22240;&#27492;&#22312;&#37322;&#25918;&#21407;&#22987;skb&#30340;&#21516;&#26102;&#20063;&#38656;&#35201;&#37322;&#25918;&#25152;&#26377;segments&#12290;&#36825;&#23601;&#26159;&#20026;&#20160;&#20040;&#35201;&#22312;dev_gso_segment()&#20989;&#25968;&#20013;&#23558;&#21407;&#22987;skb&#30340;&#37322;&#25918;&#20989;&#25968;skb-&gt;destructor &#35774;&#20026; dev_gso_skb_destructor&#30340;&#21407;&#22240;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1423553110704" ID="ID_543591319" MODIFIED="1423553453753" TEXT="&#x91ca;&#x653e;&#x5b8c;&#x6240;&#x6709;segments&#x540e;&#x771f;&#x6b63;&#x91ca;&#x653e;&#x539f;&#x59cb;skb&#x65f6;&#x8fd8;&#x662f;&#x9700;&#x8981;&#x8c03;&#x7528;&#x4fdd;&#x5b58;&#x5728;skb-&gt;cb&#x4e2d;&#x7684;&#x539f;&#x672c;&#x7684;&#x91ca;&#x653e;&#x51fd;&#x6570;&#x6765;&#x91ca;&#x653e;&#x539f;&#x59cb;skb&#x7684;"/>
</node>
</node>
<node CREATED="1423550894764" FOLDED="true" ID="ID_1592370264" MODIFIED="1429123605662" TEXT="dev_gso_segment()">
<node CREATED="1423550905872" ID="ID_1764039637" MODIFIED="1423550928739" TEXT="skb_gso_segment()">
<node CREATED="1423550982308" ID="ID_704474317" MODIFIED="1423551175613" TEXT="&#x8df3;&#x8fc7;&#x6240;&#x6709;vlan tag&#xff0c; &#x53d6;&#x51fa;&#x6700;&#x91cc;&#x9762;&#x7684;L3 type"/>
<node CREATED="1423551192893" ID="ID_1726117553" MODIFIED="1423551220417" TEXT="&#x5c06;&#x6570;&#x636e;&#x6307;&#x9488;skb-&gt;data&#x79fb;&#x5230;L3&#x7f51;&#x7edc;&#x5934;&#x90e8;"/>
<node CREATED="1423551251642" ID="ID_399694288" MODIFIED="1423551364088">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;L3 type&#25214;&#21040;&#23545;&#24212;&#30340;L3 protocol&#20851;&#32852;&#30340;struct packet_type, &#20877;&#35843;&#29992;&#20854;gso_segmenth&#20989;&#25968;&#36827;&#34892;segmentation
    </p>
    <p>
      ptype-&gt;gso_segment(skb, features)
    </p>
  </body>
</html></richcontent>
<node CREATED="1423553647383" ID="ID_164893048" MODIFIED="1423553653751" TEXT="inet_gso_segment()">
<node CREATED="1423638386101" ID="ID_1040088525" MODIFIED="1423638648756">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;L4 protocol&#25214;&#21040;&#23545;&#24212;&#30340;struct net_protocol&#65292;&#20877;&#35843;&#29992;struct net_protocol-&gt;gso_segment()
    </p>
    <p>
      L4&#30340;gso_segment()&#20250;&#23558;L4 payload&#25353;&#29031;&#21407;&#22987;skb&#30340;skb_shinfo(skb)-&gt;gso_size&#20998;&#25104;&#22810;&#20010;&#21253;&#65292;&#24182;&#23558;&#21407;&#22987;skb&#30340;IP&#22836;&#22797;&#21046;&#21040;L4 payload&#30340;&#21069;&#38754;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423639805762" ID="ID_1295123004" MODIFIED="1423639812935" TEXT="udp4_ufo_fragment()">
<node CREATED="1423640350740" ID="ID_1424530213" MODIFIED="1423641610694">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38656;&#35201;&#20570;GSO&#30340;&#21253;&#37117;&#26159;&#27809;&#26377;&#35745;&#31639;&#26657;&#39564;&#21644;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#20570;GSO&#30340;&#21516;&#26102;&#20063;&#38656;&#35201;&#20570;checksum&#30340;offloading&#12290;
    </p>
    <p>
      UDP&#30340;&#26816;&#39564;&#21644;&#21482;&#26159;&#36890;&#36807;skb-&gt;csum_start&#21644;skb-&gt;csum_offset&#21521;&#24213;&#23618;offloading&#35774;&#22791;&#25351;&#20986;&#26469;&#12290;
    </p>
    <p>
      &#21253;&#36208;&#21040;&#36825;&#37324;&#65292;&#35828;&#26126;&#30828;&#20214;&#19981;&#25903;&#25345;UFO&#65292;&#24403;&#28982;&#20063;&#19981;&#20250;&#35745;&#31639;&#38656;&#35201;&#20570;UFO&#30340;&#21253;&#30340;&#26657;&#39564;&#21644;&#20102;&#65292;&#25152;&#20197;&#36825;&#37324;&#38656;&#35201;&#36719;&#20214;&#26469;&#20570;UDP&#30340;&#26657;&#39564;&#21644;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1423641669366" ID="ID_1627994220" MODIFIED="1423641867140" TEXT="&#x6ce8;&#x610f;UFO&#x662f;&#x5c06;&#x5927;&#x7684;UDP&#x5305;&#x5206;&#x6210;&#x591a;&#x4e2a;IP&#x5206;&#x7247;&#xff0c;&#x5404;&#x5206;&#x7247;&#x5171;&#x4eab;&#x4e00;&#x4e2a;UDP&#x5934;&#x90e8;&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x5728;segmentation&#x4e4b;&#x524d;&#x8ba1;&#x7b97;UDP&#x5934;&#x90e8;&#x7684;&#x6821;&#x9a8c;&#x548c;&#xff0c;&#x56e0;&#x4e3a;&#x6b64;&#x65f6;&#x8fd8;&#x80fd;&#x4e00;&#x6b21;&#x6027;&#x8bfb;&#x5230;&#x6240;&#x6709;UDP&#x7684;payload&#xff0c;&#x800c;segmentation&#x4e4b;&#x540e;&#x5c06;&#x8bfb;&#x53d6;&#x4e0d;&#x5230;&#x6240;&#x6709;UDP&#x7684;payload"/>
<node CREATED="1423640302874" ID="ID_203522903" MODIFIED="1423640307539" TEXT="skb_segment()"/>
</node>
</node>
<node CREATED="1423638749399" ID="ID_1325136147" LINK="#ID_945434860" MODIFIED="1423639716310">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;UDP&#32780;&#35328;&#65292;&#25152;&#20998;&#30340;&#22810;&#20010;&#21253;&#37117;&#26159;&#20998;&#29255;IP&#21253;&#65292;&#20182;&#20204;&#20849;&#20139;IP&#22836;&#37096;&#21644;UDP &#22836;&#37096;
    </p>
    <p>
      &#27492;&#26102;&#38656;&#35201;&#26356;&#26032;&#21508;&#20010;segments&#30340;IP&#22836;&#37096;&#20869;&#30340;ID&#65292;fragment offset, more fragment flag&#21644;checksum&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423638916924" ID="ID_723857672" MODIFIED="1423638996972" TEXT="&#x6240;&#x6709;&#x5206;&#x7247;&#x7684;IP&#x5934;&#x90e8;&#x90fd;&#x4f7f;&#x7528;&#x539f;&#x59cb;IP&#x5934;&#x90e8;&#x7684;ID&#x7f16;&#x53f7;&#xff0c;&#x8868;&#x793a;&#x4ed6;&#x4eec;&#x90fd;&#x5c5e;&#x4e8e;&#x540c;&#x4e00;IP&#x5305;"/>
<node CREATED="1423639061639" ID="ID_467705262" MODIFIED="1423639090277" TEXT="&#x66f4;&#x65b0;IP&#x5934;&#x90e8;&#x4e2d;fragment offset&#x57df;"/>
<node CREATED="1423639104329" ID="ID_613133685" MODIFIED="1423639161213" TEXT="&#x5982;&#x679c;&#x4e0d;&#x662f;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#xff0c;&#x5219;&#x8981;&#x5728;IP&#x5934;&#x90e8;&#x4e2d;&#x7f6e;&#x4e0a;more fragment&#x7684;&#x6807;&#x8bc6;&#xff0c;&#x8868;&#x793a;&#x8fd8;&#x6709;&#x540e;&#x7eed;&#x5206;&#x7247;"/>
<node CREATED="1423639193805" ID="ID_1434625534" MODIFIED="1423639223071" TEXT="&#x56e0;&#x4e3a;IP&#x5934;&#x90e8;&#x6709;&#x53d8;&#x5316;&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;IP&#x5934;&#x90e8;&#x5185;&#x7684;checksum"/>
</node>
<node CREATED="1423638749399" ID="ID_1090544690" LINK="#ID_869642258" MODIFIED="1423639731851">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;TCP&#32780;&#35328;&#65292;&#25152;&#20998;&#30340;&#22810;&#20010;&#21253;&#27599;&#19968;&#20010;&#37117;&#26159;&#29420;&#31435;&#30340;IP&#21253;&#65292;&#20182;&#20204;&#20849;&#20139;IP&#22836;&#37096;&#65292;&#20294;&#26377;&#21508;&#33258;&#30340;TCP &#22836;&#37096;
    </p>
    <p>
      &#27492;&#26102;&#20165;&#38656;&#35201;&#26356;&#26032;&#21508;&#20010;segments&#30340;IP&#22836;&#37096;&#20869;&#30340;ID&#21644;checksum&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1423638916924" ID="ID_659083900" MODIFIED="1423639667880">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21508;&#20998;&#29255;&#30340;IP&#22836;&#37096;&#25152;&#20351;&#29992;&#30340;ID&#32534;&#21495;&#22312;&#21407;&#22987;&#21253;&#30340;ID&#30340;&#22522;&#30784;&#19978;&#20381;&#27425;&#36882;&#22686;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1423639193805" ID="ID_1240271992" MODIFIED="1423639223071" TEXT="&#x56e0;&#x4e3a;IP&#x5934;&#x90e8;&#x6709;&#x53d8;&#x5316;&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;IP&#x5934;&#x90e8;&#x5185;&#x7684;checksum"/>
</node>
</node>
</node>
<node CREATED="1423551192893" ID="ID_110813119" MODIFIED="1423551418596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20570;&#23436;segmentation&#21518;&#23558;&#25968;&#25454;&#25351;&#38024;skb-&gt;data&#24674;&#22797;&#21040;L2&#22836;&#37096;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1423551485162" ID="ID_473904497" MODIFIED="1423552282957" TEXT="&#x5c06;&#x539f;&#x59cb;skb&#x7684;&#x91ca;&#x653e;&#x51fd;&#x6570;skb-&gt;destructor&#x4fdd;&#x5b58;&#x5728;skb-&gt;cb&#x4e2d;&#xff0c;&#x5c06;skb-&gt;destructor&#x8bbe;&#x7f6e;&#x4e3a;&#x65b0;&#x7684;&#x91ca;&#x653e;&#x51fd;&#x6570;dev_gso_skb_destructor(). &#x8fd9;&#x4e3b;&#x8981;&#x662f;&#x4e3a;&#x4e86;&#x91ca;&#x653e;&#x539f;&#x59cb;skb&#x65f6;&#x540c;&#x65f6;&#x91ca;&#x653e;&#x6839;&#x636e;&#x539f;&#x59cb;skb&#x751f;&#x6210;&#x7684;segments."/>
</node>
</node>
<node CREATED="1423465200823" ID="ID_1871421687" MODIFIED="1423465206231" TEXT="&#x786c;&#x4ef6;&#x5b9e;&#x73b0;"/>
</node>
<node CREATED="1425279487543" FOLDED="true" ID="ID_1444641181" MODIFIED="1429142137704" TEXT="generic receive offload">
<node CREATED="1425279520088" FOLDED="true" ID="ID_414791480" MODIFIED="1429142029546" TEXT="&#x57fa;&#x672c;&#x539f;&#x7406;">
<node CREATED="1425279649190" ID="ID_1788875455" MODIFIED="1425279885112" TEXT="Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x662f;&#x4ee5;&#x5305;&#x4e3a;&#x5355;&#x4f4d;&#x5904;&#x7406;&#x7684;&#xff0c;&#x66f4;&#x591a;&#x7684;&#x5305;&#x5c31;&#x9700;&#x8981;&#x66f4;&#x591a;&#x7684;&#x5904;&#x7406;&#x65f6;&#x95f4;&#x3002;&#x6240;&#x4ee5;gro&#x7684;&#x4e00;&#x4e2a;&#x57fa;&#x672c;&#x601d;&#x60f3;&#x662f;&#x5408;&#x5e76;&#x591a;&#x4e2a;&#x5c0f;&#x7684;L4 segments&#x7ec4;&#x6210;&#x4e00;&#x4e2a;&#x5927;&#x7684;&#x5305;&#xff0c;&#x518d;&#x6295;&#x9012;&#x5230;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x3002;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x51cf;&#x5c11;&#x6295;&#x9012;&#x5230;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x7684;&#x5305;&#x7684;&#x6570;&#x91cf;&#xff0c;&#x4ece;&#x800c;&#x53ef;&#x4ee5;&#x63d0;&#x9ad8;throughput&#x3002;"/>
<node CREATED="1425282021067" ID="ID_516220305" MODIFIED="1425282436868" TEXT="&#x6bcf;&#x4e2a;struct napi_struct&#x7ed3;&#x6784;&#x90fd;&#x6709;&#x4e00;&#x4e2a;struct sk_buff *gro_list&#x94fe;&#x8868;&#xff0c;&#x5b83;&#x5b58;&#x653e;&#x9700;&#x8981;&#x88ab;&#x5408;&#x5e76;&#x7684;segments&#x3002;gro_count&#x8868;&#x793a;&#x5f53;&#x524d;&#x7684;gro_list&#x4e2d;&#x7684;skb&#x7684;&#x4e2a;&#x6570;&#x3002;&#x6bcf;&#x6b21;&#x6709;&#x65b0;&#x7684;skb&#x4ece;napi_gro_receive()&#x6536;&#x8fdb;&#x6765;&#x65f6;&#x90fd;&#x4f1a;&#x68c0;&#x67e5;gro_list&#x94fe;&#x8868;&#xff0c;&#x770b;&#x770b;&#x65b0;&#x7684;skb&#x662f;&#x5426;&#x80fd;&#x8ddf;&#x94fe;&#x8868;&#x4e2d;&#x67d0;&#x4e2a;skb&#x5408;&#x5e76;&#x3002;&#x5982;&#x679c;&#x80fd;&#x5408;&#x5e76;&#xff0c;&#x5219;&#x91ca;&#x653e;&#x65b0;&#x7684;skb&#x3002;&#x5982;&#x679c;&#x4e0d;&#x80fd;&#x5408;&#x5e76;&#xff0c;&#x5219;&#x5c06;&#x65b0;&#x7684;skb queue&#x5165;gro_list&#x7ee7;&#x7eed;&#x7b49;&#x5f85;&#x5408;&#x5e76;&#x7684;&#x65f6;&#x673a;&#x3002;"/>
<node CREATED="1425283153960" ID="ID_686167903" MODIFIED="1425283323658" TEXT="&#x5728;&#x5904;&#x7406;GRO&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x7cfb;&#x7edf;&#x5728;skb-&gt;cb&#x4e2d;&#x5b58;&#x653e;&#x4e86;&#x4e00;&#x4e2a;struct napi_gro_cb&#x7ed3;&#x6784;&#xff0c;&#x5b83;&#x4fdd;&#x5b58;&#x4e86;GRO&#x8981;&#x4f7f;&#x7528;&#x5230;&#x7684;&#x4e00;&#x4e9b;&#x4e0a;&#x4e0b;&#x6587;&#x3002;&#x5e94;&#x8be5;&#x603b;&#x662f;&#x4f7f;&#x7528;NAPI_GRO_CB(skb)&#x5b8f;&#x6765;&#x8bbf;&#x95ee;&#x6b64;&#x7ed3;&#x6784;&#x3002;">
<node CREATED="1425283336290" FOLDED="true" ID="ID_1101673944" MODIFIED="1425962129581" TEXT="struct napi_gro_cb">
<node CREATED="1425283720636" ID="ID_1358926856" MODIFIED="1425283720636" TEXT=" void *frag0">
<node CREATED="1425343669438" ID="ID_1621408863" MODIFIED="1425344318072" TEXT="&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x5728;GRO&#x5904;&#x7406;&#x8fc7;&#x7a0b;&#x4e2d;&#x9700;&#x8981;&#x8bfb;&#x53d6;&#x5404;&#x79cd;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#xff0c;&#x5982;L2, L3, L4&#xff0c;&#x800c;&#x8fd9;&#x4e9b;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5728;&#x5f00;&#x59cb;GRO&#x5904;&#x7406;&#x524d;&#x53ef;&#x80fd;&#x5e76;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x800c;&#x662f;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#xff0c;&#x800c;frag&#x4e2d;&#x7684;page&#x662f;&#x7269;&#x7406;&#x5730;&#x5740;&#xff0c;&#x5185;&#x6838;&#x9700;&#x8981;&#x5c06;&#x5176;&#x6620;&#x5c04;&#x4e3a;&#x865a;&#x62df;&#x5730;&#x5740;&#x540e;&#x624d;&#x80fd;&#x8bbf;&#x95ee;&#x3002;&#xa;&#xa;&#x6b64;&#x65f6;&#x5f53;&#x7136;&#x6709;2&#x79cd;&#x89e3;&#x51b3;&#x529e;&#x6cd5;&#xff0c;&#x4e00;&#x79cd;&#x662f;&#x5c06;&#x5404;&#x79cd;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x89c1;pskb_may_pull()&#x3002;&#x53e6;&#x4e00;&#x79cd;&#x5c31;&#x662f;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;skb_shinfo(skb)-&gt;frags[x]&#x3002;&#x663e;&#x7136;&#x7b2c;&#x4e8c;&#x79cd;&#x65b9;&#x6cd5;&#x8981;&#x66f4;&#x5feb;&#x4e00;&#x4e9b;&#xff0c;&#x6240;&#x4ee5;&#x7cfb;&#x7edf;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x91c7;&#x7528;&#x4e86;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x3002;&#xa;&#xa;&#x56e0;&#x6b64;&#x7cfb;&#x7edf;&#x5728;&#x5f00;&#x59cb;GRO&#x5904;&#x7406;&#x524d;&#x8c03;&#x7528;skb_gro_reset_offset()&#x5c06;&#x7b2c;&#x4e00;&#x4e2a;frag&#x7684;page&#x6620;&#x5c04;&#x4e3a;&#x865a;&#x62df;&#x5730;&#x5740;&#xff0c;&#x5e76;&#x4fdd;&#x5b58;&#x5728;NAPI_GRO_CB(skb)-&gt;frag0&#x4e2d;&#xff0c;&#x8fd9;&#x6837;&#x4ee5;&#x540e;&#x8981;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x8bfb;&#x53d6;&#x5404;&#x79cd;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x65f6;&#x5c31;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x4f7f;&#x7528;&#x6b64;&#x5730;&#x5740;&#x8bbf;&#x95ee;&#x3002;">
<node CREATED="1425345141211" ID="ID_888012272" MODIFIED="1425345370925" TEXT="&#x5f53;&#x7136;&#x5982;&#x679c;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5df2;&#x7ecf;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x4e86;&#xff0c;&#x90a3;&#x4e48;kernel&#x5c31;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;&#x4e86;&#xff0c;&#x4e5f;&#x5c31;&#x4e0d;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;NAPI_GRO_CB(skb)-&gt;frag0&#x4e86;&#x3002;&#x5f53;skb-&gt;mac_header&#x7b49;&#x4e8e;skb-&gt;tail&#x65f6;&#x53ef;&#x4ee5;&#x8ba4;&#x4e3a;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x8fd8;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x5305;&#x5185;&#x5bb9;&#xff0c;&#x6240;&#x4ee5;&#x8fd8;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;NAPI_GRO_CB(skb)-&gt;frag0&#x3002;"/>
</node>
</node>
<node CREATED="1425283720636" ID="ID_2961368" MODIFIED="1425283720636" TEXT=" unsigned int frag0_len">
<node CREATED="1425344843807" ID="ID_156468772" MODIFIED="1425344878059" TEXT="&#x5373;skb_shinfo(skb)-&gt;frags[0].size&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;frag&#x4e2d;&#x5185;&#x5bb9;&#x7684;&#x5927;&#x5c0f;"/>
</node>
<node CREATED="1425283720636" ID="ID_72733926" MODIFIED="1425283720636" TEXT=" int data_offset">
<node CREATED="1425405975963" ID="ID_951259061" MODIFIED="1425406795640">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#26159;GRO&#22788;&#29702;&#36807;&#31243;&#20013;&#29992;&#21040;&#30340;&#19968;&#20010;&#34394;&#25311;&#27010;&#24565;&#65292;&#23427;&#34920;&#31034;GRO&#24403;&#21069;&#27491;&#22312;&#22788;&#29702;&#30340;&#25968;&#25454;&#30456;&#23545;&#20110;&#21253;&#20869;&#23481;&#24320;&#22987;&#22788;&#30340;&#20559;&#31227;&#12290;&#22240;&#20026;network device driver&#24050;&#32463;&#23558;L2 header pull&#20986;&#26469;&#20102;&#65292;&#25152;&#20197;&#22312;&#24320;&#22987;GRO&#22788;&#29702;&#26102;&#36825;&#20010;&#20559;&#31227;&#20540;&#20026;0&#65292;&#25351;&#21521;L3 header&#12290;
    </p>
    <p>
      &#38543;&#30528;&#26159;&#21542;&#33021;&#21512;&#24182;&#30340;&#21028;&#26029;&#30340;&#28145;&#20837;&#65292;&#36825;&#20010;&#20559;&#31227;&#20540;&#20250;&#36880;&#28176;&#20559;&#31227;&#25351;&#21521;&#21040;L4 header, L5 header&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425406506294" ID="ID_1423935955" MODIFIED="1425406713554">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20026;&#20160;&#20040;&#35828;&#23427;&#26159;&#19968;&#20010;&#34394;&#25311;&#27010;&#24565;&#65311;&#36825;&#26159;&#22240;&#20026;&#23427;&#35201;&#20860;&#23481;3&#31181;&#24773;&#20917;&#65306;
    </p>
    <p>
      &#35201;&#20860;&#23481;&#36825;3&#31181;&#24773;&#20917;&#65292;&#23454;&#38469;&#19978;&#26080;&#27861;&#29992;&#19968;&#20010;&#20855;&#20307;&#30340;&#25351;&#38024;&#26469;&#25351;&#21521;GRO&#27491;&#22312;&#22788;&#29702;&#30340;&#25968;&#25454;&#65292;&#21482;&#33021;&#29992;&#19968;&#20010;&#34394;&#25311;&#20559;&#31227;&#20540;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425406569831" ID="ID_1783804914" MODIFIED="1425406570660" TEXT="skb&#x7684;&#x6240;&#x6709;&#x5185;&#x5bb9;&#x90fd;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#xff0c;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x6ca1;&#x6709;skb&#x7684;&#x5185;&#x5bb9;"/>
<node CREATED="1425406596555" ID="ID_28489230" MODIFIED="1425406598478" TEXT="skb&#x7684;&#x90e8;&#x5206;&#x5185;&#x5bb9;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5176;&#x4f59;&#x5185;&#x5bb9;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;"/>
<node CREATED="1425406618382" ID="ID_887127257" MODIFIED="1425406620281" TEXT="skb&#x7684;&#x5168;&#x90e8;&#x5185;&#x5bb9;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
</node>
</node>
<node CREATED="1425283720636" ID="ID_370534585" MODIFIED="1425283720636" TEXT=" u16 flush">
<node CREATED="1425286304635" ID="ID_1101152848" MODIFIED="1425286340828" TEXT="skb&#x4e0d;&#x80fd;&#x88ab;&#x5408;&#x5e76;&#xff0c;&#x9700;&#x8981;&#x7acb;&#x5373;&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
</node>
<node CREATED="1425283720636" ID="ID_1265081" MODIFIED="1425283720636" TEXT=" u16 flush_id"/>
<node CREATED="1425283720636" ID="ID_1181296841" MODIFIED="1425283720636" TEXT=" u16 count">
<node CREATED="1425286458020" ID="ID_1611036362" MODIFIED="1425286525677" TEXT="&#x6709;&#x591a;&#x5c11;&#x4e2a;segments&#x88ab;&#x5408;&#x5e76;&#x5230;&#x6b64;skb&#xff0c;&#x6ce8;&#x610f;&#x81ea;&#x5df1;&#x4e5f;&#x7b97;&#x4e00;&#x4e2a;&#xff0c;&#x6240;&#x4ee5;skb&#x88ab;&#x653e;&#x5165;gro_list&#x65f6;&#x521d;&#x59cb;&#x503c;&#x662f;1"/>
</node>
<node CREATED="1425283720636" ID="ID_1915473859" MODIFIED="1425283720636" TEXT=" u8 same_flow">
<node CREATED="1425322337734" ID="ID_158428352" MODIFIED="1425322413516" TEXT="&#x5bf9;&#x4e8e;&#x5728;gro_list&#x5185;&#x7684;skb&#x800c;&#x8a00;&#xff0c;&#x8868;&#x793a;gro_list&#x5185;&#x7684;&#x8fd9;&#x4e2a;skb&#x662f;&#x5426;&#x53ef;&#x80fd;&#x4e0e;&#x5f53;&#x524d;&#x6b63;&#x5728;&#x5904;&#x7406;&#x7684;skb&#x5c5e;&#x4e8e;&#x540c;&#x4e00;&#x4e2a;flow"/>
<node CREATED="1425322446085" ID="ID_1842849361" MODIFIED="1425322505540" TEXT="&#x5bf9;&#x4e8e;&#x5f53;&#x524d;&#x6b63;&#x5728;&#x5904;&#x7406;&#x7684;skb&#x800c;&#x8a00;&#xff0c;&#x8868;&#x793a;gro_list&#x5185;&#x662f;&#x5426;&#x6709;skb&#x4e0e;&#x5f53;&#x524d;skb&#x5c5e;&#x4e8e;&#x540c;&#x4e00;flow"/>
<node CREATED="1425407677389" ID="ID_256381087" LINK="#ID_1586666101" MODIFIED="1425407738545" TEXT="&#x8fd9;&#x91cc;&#x7684;&#x76f8;&#x540c;&#x4f1a;&#x5728;&#x6bcf;&#x5c42;&#x90fd;&#x8fdb;&#x884c;&#x5224;&#x65ad;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x5728;L2&#xff0c;L3&#xff0c;L4&#x90fd;&#x4f1a;&#x5224;&#x65ad;"/>
<node CREATED="1425322526130" ID="ID_801220884" MODIFIED="1425322603176" TEXT="&#x8fd9;&#x4e2a;&#x503c;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x88ab;&#x6e05;&#x7a7a;&#xff1f;">
<node CREATED="1425407753176" ID="ID_918127396" MODIFIED="1425408627573" TEXT="&#x8fd9;&#x4e2a;&#x503c;&#x5e76;&#x4e0d;&#x9700;&#x8981;&#x88ab;&#x7279;&#x522b;&#x6e05;&#x7a7a;&#xff0c;&#x5b83;&#x4f1a;&#x5728;L2, L3, L4&#x6bcf;&#x5c42;&#x7684;&#x5224;&#x65ad;&#x8fc7;&#x7a0b;&#x4e2d;&#x8d4b;&#x503c;&#xff0c;&#x76f4;&#x5230;L4&#x5224;&#x65ad;&#x5b8c;&#xff0c;&#x5982;&#x679c;same_flow&#x8fd8;&#x4e3a;1&#xff0c;&#x8868;&#x793a;&#x53ef;&#x4ee5;&#x5408;&#x5e76;"/>
</node>
<node CREATED="1425962008181" ID="ID_1748317302" MODIFIED="1425962021971" TEXT="&#x8fd9;&#x4e2a;&#x503c;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x88ab;&#x8bbe;&#x7f6e;&#xff1f;">
<node CREATED="1425962025242" ID="ID_1270416302" LINK="#ID_207102362" MODIFIED="1425962121987" TEXT="&#x5982;&#x679c;&#x80fd;&#x591f;&#x548c;gro_list&#x4e2d;&#x67d0;&#x4e2a;skb&#x5408;&#x5e76;&#xff0c;&#x5219;&#x5f53;&#x524d;skb&#x7684;same_flow&#x5728;skb_gro_receive()&#x51fd;&#x6570;&#x7684;&#x672b;&#x5c3e;&#x8bbe;&#x4e3a;1."/>
</node>
</node>
<node CREATED="1425283720636" ID="ID_1601857816" MODIFIED="1425283720636" TEXT=" u8 free">
<node CREATED="1425283770603" ID="ID_632964646" MODIFIED="1425283771830" TEXT="NAPI_GRO_FREE"/>
<node CREATED="1425283781048" ID="ID_1617280290" MODIFIED="1425283781821" TEXT="NAPI_GRO_FREE_STOLEN_HEAD"/>
</node>
<node CREATED="1425283720636" ID="ID_50881122" MODIFIED="1425283720636" TEXT=" unsigned long age">
<node CREATED="1425286604721" ID="ID_516425934" MODIFIED="1425286748284">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#34987;&#25918;&#20837;gro_list&#26102;&#30340;&#26102;&#38388;&#65292;&#21363;&#24403;&#26102;&#30340;jiffies
    </p>
    <p>
      &#36825;&#20010;skb&#21487;&#33021;&#24050;&#32463;&#21512;&#24182;&#20102;&#22810;&#20010;segments&#65292;&#27492;&#22788;&#30340;&#26102;&#38388;&#26159;&#25351;&#31532;&#19968;&#20010;segment&#25918;&#20837;gro_list&#30340;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425283720636" MODIFIED="1425283720636" TEXT=" u16 proto"/>
<node CREATED="1425283720636" ID="ID_468683812" MODIFIED="1425283720636" TEXT=" u16 udp_mark"/>
<node CREATED="1425283720636" ID="ID_1130032343" MODIFIED="1425283720636" TEXT=" __wsum csum"/>
<node CREATED="1425283720636" ID="ID_1187474465" MODIFIED="1425283720636" TEXT=" struct sk_buff *last"/>
</node>
</node>
<node CREATED="1425282558411" ID="ID_1586666101" MODIFIED="1425282575006" TEXT="segments&#x5408;&#x5e76;&#x7684;&#x6761;&#x4ef6;&#x662f;&#x4ec0;&#x4e48;&#xff1f;">
<node CREATED="1425407160670" ID="ID_166613303" MODIFIED="1425407173747" TEXT="L2&#xff1a;">
<node CREATED="1425407207661" ID="ID_1362017395" MODIFIED="1425407277414" TEXT="skb-&gt;rxhash&#x5fc5;&#x987b;&#x76f8;&#x540c;&#xff0c;skb-&gt;rxhash&#x662f;&#x8f6f;&#x4ef6;&#x6216;&#x786c;&#x4ef6;&#x5bf9;&#x5305;&#x7684;&#x5173;&#x952e;&#x57df;(src/dst MAC/IP/port)&#x505a;&#x7684;&#x4e00;&#x4e2a;hash"/>
<node CREATED="1425407363693" ID="ID_1267322844" MODIFIED="1425407383569" TEXT="skb-&gt;dev&#x5fc5;&#x987b;&#x76f8;&#x540c;&#xff0c;&#x5373;&#x5165;&#x53e3;&#x8bbe;&#x5907;&#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
<node CREATED="1425407397998" ID="ID_1870704213" MODIFIED="1425407422999" TEXT="skb-&gt;vlan_tci&#x5fc5;&#x987b;&#x76f8;&#x540c;&#xff0c;&#x5373;vlan&#x4fe1;&#x606f;&#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
<node CREATED="1425408664344" ID="ID_630982456" MODIFIED="1425408679837" TEXT="MAC header&#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
</node>
<node CREATED="1425949549462" ID="ID_388997952" MODIFIED="1425949556659" TEXT="L3&#xff1a;">
<node CREATED="1425949571524" ID="ID_591666929" MODIFIED="1425949580611" TEXT="&#x534f;&#x8bae;&#x53f7;&#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
<node CREATED="1425949581242" ID="ID_784166183" MODIFIED="1425949603198" TEXT="&#x6e90;IP &#x548c; &#x76ee;&#x7684;IP &#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
</node>
<node CREATED="1425960686185" ID="ID_1873510996" MODIFIED="1425960691256" TEXT="L4&#xff1a;">
<node CREATED="1425960693700" ID="ID_1218061737" MODIFIED="1425960704413" TEXT="&#x6e90;&#x7aef;&#x53e3;&#x53f7;&#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
<node CREATED="1425960693700" ID="ID_170741567" MODIFIED="1425960726562" TEXT="&#x76ee;&#x7684;&#x7aef;&#x53e3;&#x53f7;&#x5fc5;&#x987b;&#x76f8;&#x540c;"/>
</node>
</node>
<node CREATED="1425282453444" ID="ID_1969715368" MODIFIED="1425282519539" TEXT="&#x5305;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x4e0d;&#x518d;&#x7b49;&#x5f85;&#x5408;&#x5e76;&#xff0c;&#x800c;&#x88ab;&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#xff1f;">
<node CREATED="1425964200540" ID="ID_1426391929" MODIFIED="1425964377701" TEXT="&#x82e5;&#x5728;GRO&#x5904;&#x7406;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x5f53;&#x524d;skb&#x7684;NAPI_GRO_CB(skb)-&gt;flush&#x88ab;&#x7f6e;&#x4e3a;&#x771f;&#xff0c;&#x5219;&#x5f53;&#x524d;skb&#x5728;GRO&#x8fd4;&#x56de;&#x540e;&#x88ab;&#x51fd;&#x6570;napi_skb_finish()&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425964200540" ID="ID_1417556987" MODIFIED="1425964541478" TEXT="&#x82e5;&#x5728;GRO&#x5904;&#x7406;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;gro_list&#x4e2d;&#x6709;&#x4e0e;&#x5f53;&#x524d;skb&#x76f8;&#x540c;&#x6d41;&#x7684;&#x5305;&#xff0c;&#x4f46;&#x53c8;&#x6700;&#x7ec8;&#x6ca1;&#x80fd;&#x4e0e;&#x5f53;&#x524d;skb&#x5408;&#x5e76;&#xff0c;&#x5219;gro_list&#x4e2d;&#x76f8;&#x540c;&#x6d41;&#x7684;&#x5305;&#x5728;GRO&#x8fd4;&#x56de;&#x540e;&#x88ab;&#x51fd;&#x6570;napi_skb_finish()&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425964549593" ID="ID_714674725" MODIFIED="1425964778065">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#22312;&#22788;&#29702;&#23436;&#25152;&#26377;&#21253;&#21518;&#20250;&#22312;&#20854;NAPI&#22238;&#35843;&#20989;&#25968;poll&#26041;&#27861;&#20013;&#35843;&#29992;napi_complete(napi)&#65292;
    </p>
    <p>
      &#36825;&#20010;&#20989;&#25968;&#23558;&#20250;&#25226;gro_list&#20013;&#25152;&#26377;&#21253;&#37117;&#25552;&#20132;&#21040;Linux&#32593;&#32476;&#21327;&#35758;&#26632;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425964802825" ID="ID_737819850" MODIFIED="1425964806606" TEXT="napi_gro_flush()">
<node CREATED="1425964903416" ID="ID_1502820178" MODIFIED="1425965033050">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25353;&#29031;&#21253;&#36827;&#20837;&#31995;&#32479;&#30340;&#26102;&#38388;&#39034;&#24207;flush gro_list&#20013;&#30340;&#21253;
    </p>
    <p>
      &#20063;&#23601;&#26159;&#20174;gro_list&#38142;&#34920;&#23614;&#21040;&#38142;&#34920;&#22836;&#30340;&#39034;&#24207;&#25552;&#20132;&#21253;&#65292;&#22240;&#20026;&#36234;&#26159;&#26411;&#23614;&#30340;&#21253;&#36827;&#31995;&#32479;&#30340;&#26102;&#38388;&#36234;&#26089;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425965047564" ID="ID_432963125" LINK="#ID_939992948" MODIFIED="1425965071830" TEXT="napi_gro_complete(skb)"/>
</node>
</node>
</node>
</node>
<node CREATED="1425321276466" ID="ID_582382485" MODIFIED="1425321300270" TEXT="&#x5408;&#x5e76;&#x4e4b;&#x540e;&#x7684;&#x6570;&#x636e;&#x662f;&#x5982;&#x4f55;&#x5b58;&#x50a8;&#x7684;&#xff1f;"/>
<node CREATED="1425426687386" ID="ID_1129291203" MODIFIED="1429121252276" TEXT="GRO&#x4e0e;GSO&#x7684;&#x5173;&#x8054;">
<node CREATED="1425426738558" ID="ID_1187994299" MODIFIED="1425427094954" TEXT="GRO&#x662f;&#x672c;&#x5730;&#x4f18;&#x5316;&#xff0c;&#x65e8;&#x5728;&#x964d;&#x4f4e;&#x672c;&#x5730;CPU&#x7684;loading&#xff0c;&#x7ecf;&#x8fc7;GRO&#x5408;&#x5e76;&#x540e;&#x7684;&#x5305;&#x5728;&#x7ecf;&#x8fc7;CPU&#x5904;&#x7406;&#x540e;&#x8fd8;&#x662f;&#x8981;&#x6309;&#x7167;&#x539f;&#x6765;&#x7684;&#x5927;&#x5c0f;&#x8fdb;&#x884c;segmentation&#xff0c;&#x6700;&#x7ec8;&#x53d1;&#x51fa;&#x53bb;&#x7684;&#x5305;&#x5176;&#x5b9e;&#x8ddf;&#x6700;&#x521d;&#x8fdb;&#x6765;&#x6ca1;&#x6709;&#x5408;&#x5e76;&#x7684;&#x5305;&#x662f;&#x4e00;&#x6837;&#x7684;&#x3002;&#x800c;&#x6700;&#x540e;&#x5c06;&#x5408;&#x5e76;&#x540e;&#x7684;&#x5305;&#x518d;&#x8fdb;&#x884c;segmentation&#x5176;&#x5b9e;&#x5c31;&#x662f;GSO&#x3002;">
<node CREATED="1425429761096" ID="ID_809716697" MODIFIED="1425429787754">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_4.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425427108702" ID="ID_1455126522" MODIFIED="1425427486721">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      GRO&#26159;&#22914;&#20309;&#19982;GSO&#20851;&#32852;&#30340;&#65311;
    </p>
    <p>
      
    </p>
    <p>
      &#20570;GRO&#26102;&#65292;skb&#22312;&#34987;&#25918;&#36827;gro_list&#26102;&#65292;skb_shinfo(skb)-&gt;gso_size&#20250;&#34987;&#26356;&#26032;&#20026;skb_gro_len(skb)&#65292;&#32780;&#27492;&#26102;skb_gro_len(skb)&#23454;&#38469;&#19978;&#23601;&#26159;L4 payload&#30340;&#38271;&#24230;&#12290;&#20063;&#23601;&#26159;&#35828;&#36825;&#20010;&#28857;&#23601;&#24050;&#32463;&#35201;&#27714;&#21253;&#22312;&#34987;&#20877;&#21457;&#20986;&#21435;&#26102;&#65292;&#38656;&#35201;&#20877;&#34987;&#20998;&#21106;&#25104;&#36827;&#26469;&#26102;&#30340;&#22823;&#23567;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425427516602" ID="ID_686498575" MODIFIED="1425427654977" TEXT="&#x82e5;skb_shinfo(skb)-&gt;gso_size&#x4e0d;&#x4e3a;0&#xff0c;&#x5219;&#x53d1;&#x9001;skb&#x65f6;&#x4f1a;&#x628a;&#x5305;&#x6309;&#x7167;skb_shinfo(skb)-&gt;gso_size&#x5927;&#x5c0f;&#x5206;&#x5272;&#x6210;&#x591a;&#x4e2a;&#x7247;&#x6bb5;&#xff0c;&#x8fd9;&#x4e5f;&#x5c31;&#x662f;segmentation&#xff0c;&#x6216;&#x8005;&#x53eb;GSO&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1425280031594" FOLDED="true" ID="ID_504668172" MODIFIED="1429132194791" TEXT="API">
<node CREATED="1423462633441" ID="ID_852504861" MODIFIED="1425280058291" TEXT="&#x5f00;&#x542f;&#x5173;&#x95ed;GRO&#x529f;&#x80fd;">
<node CREATED="1423462709455" ID="ID_642038059" LINK="#ID_99443323" MODIFIED="1425280067136" TEXT="ethtool -K eth0 gro on"/>
</node>
<node CREATED="1423462690135" ID="ID_1650415494" MODIFIED="1425280140117" TEXT="GRO, LRO&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;"/>
<node CREATED="1423467797058" ID="ID_833547397" MODIFIED="1425280210843" TEXT="&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x5bf9;GRO&#x529f;&#x80fd;&#x7684;&#x652f;&#x6301;">
<node CREATED="1425281329331" ID="ID_677024184" MODIFIED="1425281501019" TEXT="&#x652f;&#x6301;GRO&#x7684;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x5e94;&#x5728;&#x5176;NAPI&#x56de;&#x8c03;&#x51fd;&#x6570;poll&#x65b9;&#x6cd5;&#x4e2d;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x5305;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528;GRO&#x7684;&#x63a5;&#x53e3;napi_gro_receive&#x6216;&#x8005;napi_gro_frags&#x6765;&#x5c06;&#x6570;&#x636e;&#x5305;&#x6295;&#x9012;&#x5230;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x3002;"/>
<node CREATED="1423467034955" ID="ID_1423346510" MODIFIED="1425280750599" TEXT="&#x5982;&#x679c;&#x786c;&#x4ef6;&#x652f;&#x6301;scatter/gather&#x529f;&#x80fd; (NETIF_F_SG&#x6807;&#x8bc6;&#x5728;dev-&gt;hw_features&#x4e0a;&#x7f6e;&#x4f4d;)&#xff0c;&#x5219;GRO&#x53ea;&#x9700;&#x8981;&#x5c06;&#x5404;&#x4e2a;segments&#x5b58;&#x653e;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#xff0c;&#x4ece;&#x800c;&#x53ef;&#x4ee5;&#x52a0;&#x901f;GRO&#x8fc7;&#x7a0b;&#x3002;"/>
<node CREATED="1423467848776" ID="ID_1380115178" MODIFIED="1425280479154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      GRO&#26159;&#19968;&#39033;&#36719;&#20214;&#21151;&#33021;&#65292;&#23427;&#22312;&#36719;&#20214;&#19978;&#23454;&#29616;&#65292;&#19981;&#20381;&#36182;&#20110;&#29305;&#23450;&#30828;&#20214;&#65292;&#25152;&#20197;&#27492;&#39033;&#21151;&#33021;&#22987;&#32456;&#26159;&#20351;&#33021;&#30340;
    </p>
  </body>
</html></richcontent>
<arrowlink DESTINATION="ID_1380115178" ENDARROW="Default" ENDINCLINATION="0;0;" ID="Arrow_ID_940887323" STARTARROW="None" STARTINCLINATION="0;0;"/>
<node CREATED="1423467867876" ID="ID_1809546637" MODIFIED="1423467918143" TEXT="&#x5728;&#x51fd;&#x6570;register_netdevice()&#x4e2d;&#x59cb;&#x7ec8;&#x4f1a;&#x5c06;&#x6807;&#x8bc6;NETIF_F_GSO&#x548c;NETIF_F_GRO&#x8bbe;&#x7f6e;&#x5728;dev-&gt;hw_features&#x548c;dev-&gt;features&#x4e0a;"/>
</node>
</node>
<node CREATED="1423550762835" ID="ID_229665366" MODIFIED="1423550784852" TEXT="L4&#x5982;&#x4f55;&#x4f7f;&#x7528;&#x6b64;&#x529f;&#x80fd;"/>
<node CREATED="1425408725421" ID="ID_1884620500" MODIFIED="1425426566062" TEXT="GRO&#x5e38;&#x7528;&#x64cd;&#x4f5c;&#x51fd;&#x6570;">
<node CREATED="1425408774312" ID="ID_1573169933" MODIFIED="1425408799469">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_gro_mac_header(skb) &#65306;&#35775;&#38382;L2 header
    </p>
  </body>
</html></richcontent>
<node CREATED="1425408891381" ID="ID_856972154" MODIFIED="1425408941609" TEXT="&#x5982;&#x679c;skb&#x7684;&#x5185;&#x5bb9;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;&#x7528;skb_mac_header(skb)&#x8bbf;&#x95ee;"/>
<node CREATED="1425408971912" ID="ID_1397954003" MODIFIED="1425409017163" TEXT="&#x5982;&#x679c;skb&#x7684;&#x5185;&#x5bb9;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#xff0c;&#x5219;&#x7528;NAPI_GRO_CB(skb)-&gt;frag0&#x8bbf;&#x95ee;"/>
</node>
<node CREATED="1425409670448" ID="ID_864514825" MODIFIED="1425409736167" TEXT="skb_gro_offset(skb)&#xff1a;GRO&#x5f53;&#x524d;&#x6b63;&#x5728;&#x5904;&#x7406;&#x7684;&#x6570;&#x636e;&#x76f8;&#x5bf9;&#x4e8e;skb&#x5185;&#x5bb9;&#x5f00;&#x59cb;&#x5904;&#x7684;&#x504f;&#x79fb;"/>
<node CREATED="1425426381897" ID="ID_939992948" MODIFIED="1425426427652" TEXT="napi_gro_complete(skb)&#xff1a;GRO&#x7528;&#x6b64;API&#x5c06;&#x5408;&#x5e76;&#x597d;&#x7684;&#x5305;&#x63d0;&#x4ea4;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;">
<node CREATED="1425430016350" ID="ID_625091438" MODIFIED="1425430136543" TEXT="&#x5982;&#x679c;&#x6b64;skb&#x5b9e;&#x9645;&#x4e0a;&#x5e76;&#x6ca1;&#x6709;&#x5408;&#x5e76;&#x5176;&#x4ed6;skb&#x7684;&#x5185;&#x5bb9;(NAPI_GRO_CB(skb)-&gt;count == 1)&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x5305;&#x88ab;&#x518d;&#x53d1;&#x51fa;&#x53bb;&#x65f6;&#x4e5f;&#x4e0d;&#x9700;&#x8981;&#x505a;GSO&#xff0c;&#x56e0;&#x6b64;&#x5c06;skb_shinfo(skb)-&gt;gso_size&#x7f6e;&#x4e3a;0&#x3002;"/>
<node CREATED="1425430569058" ID="ID_390036856" MODIFIED="1425430653012" TEXT="&#x904d;&#x5386;&#x6240;&#x6709;struct packet_offload&#xff0c;&#x627e;&#x5230;&#x5339;&#x914d;skb-&gt;protocol&#x7684;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528;&#x5b83;&#x7684;gro_complete&#x56de;&#x8c03;&#x51fd;&#x6570; ptype-&gt;callbacks.gro_complete(skb&#xff0c;0)">
<node CREATED="1425963312387" ID="ID_1702310498" MODIFIED="1425963319528" TEXT="inet_gro_complete()">
<node CREATED="1425963343764" ID="ID_158361536" MODIFIED="1425963404022" TEXT="&#x5bf9;&#x4e8e;IP&#x800c;&#x8a00;&#xff0c;&#x5728;&#x5408;&#x5e76;&#x5b8c;&#x6210;&#x540e;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x66f4;&#x65b0;IP head&#x4e2d;&#x7684;checksum, &#x8fd8;&#x6709;L3 payload&#x7684;&#x957f;&#x5ea6;"/>
<node CREATED="1425963422862" ID="ID_1228772846" MODIFIED="1425963496431" TEXT="&#x904d;&#x5386;&#x6240;&#x6709;struct net_offload&#xff0c;&#x627e;&#x5230;&#x5339;&#x914d;L4 protocol&#x7684;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528;&#x5b83;&#x7684;gro_complete&#x56de;&#x8c03;&#x51fd;&#x6570; ptype-&gt;callbacks.gro_complete(skb&#xff0c;20)">
<node CREATED="1425963343764" ID="ID_1264683666" MODIFIED="1425963563939" TEXT="&#x5bf9;&#x4e8e;TCP&#x800c;&#x8a00;&#xff0c;&#x5728;&#x5408;&#x5e76;&#x5b8c;&#x6210;&#x540e;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x66f4;&#x65b0;TCP head&#x4e2d;&#x7684;checksum"/>
<node CREATED="1425963593750" ID="ID_1615657210" MODIFIED="1425963685782" TEXT="&#x56e0;&#x4e3a;&#x5408;&#x5e76;&#x540e;&#x7684;&#x5305;&#x518d;&#x53d1;&#x51fa;&#x53bb;&#x65f6;&#x8fd8;&#x9700;&#x8981;&#x505a;GSO,&#x56e0;&#x6b64;&#x8fd8;&#x9700;&#x8981;&#x8bbe;&#x7f6e;skb_shinfo(skb)-&gt;gso_segs&#xff0c;&#x5b83;&#x5b9e;&#x9645;&#x4e0a;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;NAPI_GRO_CB(skb)-&gt;count&#xff0c;&#x5373;&#x5408;&#x5e76;&#x7684;&#x7247;&#x6bb5;&#x6570;&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1425426587146" ID="ID_1303450197" MODIFIED="1425426608505" TEXT="&#x8c03;&#x7528;netif_receive_skb_internal(skb)&#x5c06;&#x5305;&#x63d0;&#x4ea4;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
</node>
</node>
</node>
<node CREATED="1425280764283" ID="ID_1373036430" MODIFIED="1429124365856" TEXT="&#x8f6f;&#x4ef6;&#x5b9e;&#x73b0;">
<node CREATED="1425281066548" FOLDED="true" ID="ID_1041888939" MODIFIED="1429142040671" TEXT="&#x57fa;&#x672c;&#x6d41;&#x7a0b;">
<node CREATED="1425966197995" ID="ID_738840776" MODIFIED="1425966225713">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_flow.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425344943548" ID="ID_1123491384" MODIFIED="1425345001534" TEXT="GRO&#x4e3b;&#x8981;&#x5206;&#x4e3a;2&#x4e2a;&#x5927;&#x7684;&#x6b65;&#x594f;&#xff1a;">
<node CREATED="1425345003673" ID="ID_50726327" MODIFIED="1425345097638">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21028;&#26029;skb&#26159;&#21542;&#33021;&#19982;gro_list&#20013;&#30340;&#26576;&#20010;skb&#21512;&#24182;&#65292;&#21028;&#26029;&#33021;&#21542;&#21512;&#24182;&#26159;&#20998;&#23618;&#27425;&#36827;&#34892;&#30340;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425345427456" ID="ID_468902242" MODIFIED="1425345452652" TEXT="dev_gro_receive()&#x4e3b;&#x8981;&#x6839;&#x636e;L2&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5224;&#x65ad;&#x80fd;&#x5426;&#x5408;&#x5e76;"/>
<node CREATED="1425345427456" ID="ID_879065905" MODIFIED="1425345478633" TEXT="inet_gro_receive()&#x4e3b;&#x8981;&#x6839;&#x636e;L3&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5224;&#x65ad;&#x80fd;&#x5426;&#x5408;&#x5e76;"/>
<node CREATED="1425345427456" ID="ID_1014851556" MODIFIED="1425345504352" TEXT="tcp_gro_receive()&#x4e3b;&#x8981;&#x6839;&#x636e;L4&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5224;&#x65ad;&#x80fd;&#x5426;&#x5408;&#x5e76;"/>
</node>
<node CREATED="1425345038445" ID="ID_270166725" MODIFIED="1425345594391" TEXT="&#x5728;&#x4ee5;&#x4e0a;&#x5224;&#x65ad;&#x5b8c;&#x6210;&#x540e;&#x5982;&#x679c;&#x5224;&#x65ad;&#x7ed3;&#x679c;&#x662f;&#x53ef;&#x4ee5;&#x548c;gro_list&#x4e2d;&#x67d0;&#x4e2a;skb&#x5408;&#x5e76;&#xff0c;&#x5219;&#x8c03;&#x7528;skb_gro_receive()&#x5b9e;&#x65bd;&#x5408;&#x5e76;"/>
</node>
<node CREATED="1425427988168" ID="ID_693811077" MODIFIED="1425428011388" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x53ea;&#x6709;TCP&#x652f;&#x6301;GRO&#xff1f;">
<node CREATED="1425966426637" ID="ID_509756500" MODIFIED="1425966825755">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      GRO&#21512;&#24182;&#21518;&#30340;&#21253;&#20877;&#21457;&#20986;&#21435;&#26102;&#36824;&#35201;&#20570;GSO&#65292;&#21363;&#20877;&#20998;&#25104;&#23567;&#30340;segmentation&#65292;&#27599;&#20010;segmentation&#22823;&#23567;&#20026;skb_shinfo(skb)-&gt;gso_size&#12290;&#19968;&#26041;&#38754;&#20570;GRO&#26102;&#24182;&#27809;&#26377;&#35760;&#24405;&#21508;&#20010;&#21512;&#24182;&#21069;&#30340;&#21253;&#30340;&#36793;&#30028;&#65292;&#36793;&#30028;&#20449;&#24687;&#22312;&#21512;&#24182;&#21518;&#20002;&#22833;&#20102;&#65307;&#21478;&#19968;&#26041;&#38754;&#20570;GSO&#26102;&#23558;&#21253;&#20877;&#21010;&#20998;&#20026;skb_shinfo(skb)-&gt;gso_size&#22823;&#23567;&#20063;&#21183;&#24517;&#25171;&#30772;&#21512;&#24182;&#21069;&#21508;&#20010;&#21253;&#30340;&#36793;&#30028;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#24635;&#20043;&#32463;&#36807;GRO, GSO&#20043;&#21518;&#65292;&#21253;&#30340;&#36793;&#30028;&#23601;&#25171;&#20081;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425966865339" ID="ID_1737322698" MODIFIED="1425966906324" TEXT="&#x5bf9;&#x4e8e;TCP&#x800c;&#x8a00;&#xff0c;&#x6253;&#x4e71;&#x8fb9;&#x754c;&#x65e0;&#x5173;&#x7d27;&#x8981;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x662f;&#x9762;&#x5411;&#x6d41;&#x7684;&#xff0c;&#x662f;&#x65e0;&#x8fb9;&#x754c;&#x7684;"/>
<node CREATED="1425966910283" ID="ID_1751816833" MODIFIED="1425967042599" TEXT="&#x5bf9;&#x4e8e;UDP&#x800c;&#x8a00;&#xff0c;&#x8fd9;&#x662f;&#x4e0d;&#x53ef;&#x63a5;&#x53d7;&#x7684;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x662f;&#x9762;&#x5411;&#x6570;&#x636e;&#x62a5;&#x7684;&#xff0c;&#x662f;&#x6709;&#x8fb9;&#x754c;&#x7684;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x7528;&#x6237;&#x53d1;&#x51fa;&#x7684;&#x6570;&#x636e;&#x5fc5;&#x987b;&#x7528;&#x4e00;&#x4e2a;IP&#x5305;&#x5c01;&#x88c5;&#xff0c;&#x800c;&#x4e0d;&#x80fd;&#x7528;&#x591a;&#x4e2a;IP&#x5305;&#x5c01;&#x88c5;&#xff0c;&#x56e0;&#x6b64;&#x5bf9;UDP&#x5305;&#x4e0d;&#x80fd;&#x505a;GRO&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1425281073602" FOLDED="true" ID="ID_1465009032" MODIFIED="1429125029226" TEXT="&#x6570;&#x636e;&#x6846;&#x67b6;">
<node CREATED="1425342139052" FOLDED="true" ID="ID_998792613" MODIFIED="1425850814550">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#36827;&#20837;&#20989;&#25968;dev_gro_receive()&#20043;&#21069;&#65292;skb&#30340;&#20869;&#23481;&#20998;&#24067;&#21487;&#33021;&#26377;3&#31181;&#24773;&#20917;&#65306;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#27492;&#26102;&#39537;&#21160;&#24050;&#32463;&#35843;&#29992;eth_type_trans(skb, dev)&#65292;&#21363;skb-&gt;protocol&#65292;skb-&gt;pkt_type&#65292;skb-&gt;mac_header&#22343;&#24050;&#34987;&#21021;&#22987;&#21270;&#65292;&#32780;skb-&gt;data&#24050;&#32463;&#25351;&#21521;&#20102;L3 header&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425342219065" ID="ID_1737427974" MODIFIED="1425342323433" TEXT="skb&#x7684;&#x6240;&#x6709;&#x5185;&#x5bb9;&#x90fd;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#xff0c;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x6ca1;&#x6709;skb&#x7684;&#x5185;&#x5bb9;">
<node CREATED="1425342400460" ID="ID_1171609567" MODIFIED="1425342412305">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_2.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425342390344" ID="ID_392575569" MODIFIED="1425343319692">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#30340;&#37096;&#20998;&#20869;&#23481;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#65292;&#20854;&#20313;&#20869;&#23481;&#22312;skb_shinfo(skb)-&gt;frags[x]&#20013;(S/G support&#30340;&#20856;&#22411;&#24773;&#20917;)
    </p>
  </body>
</html></richcontent>
<node CREATED="1425342337260" ID="ID_745286214" MODIFIED="1425342363449">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425342983326" ID="ID_770894228" MODIFIED="1425343308200">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb&#30340;&#20840;&#37096;&#20869;&#23481;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;(none S/G support&#30340;&#20856;&#22411;&#24773;&#20917;)
    </p>
  </body>
</html></richcontent>
<node CREATED="1425343221590" ID="ID_1841854613" MODIFIED="1425343235779">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_3.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425432280114" FOLDED="true" ID="ID_207102362" MODIFIED="1429125026943">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb_gro_receive(head, skb)&#65292;&#23558;skb&#21512;&#24182;&#21040;head&#20013;
    </p>
    <p>
      &#26681;&#25454;&#21512;&#24182;&#21069;skb&#20013;&#20869;&#23481;&#30340;&#20998;&#24067;&#24773;&#20917;&#65292;&#21487;&#20197;&#23558;&#21512;&#24182;&#20998;&#20026;&#20960;&#31867;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425432528537" FOLDED="true" ID="ID_298900171" MODIFIED="1429124647037">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      L2, L3, L4&#22836;&#37096;&#20449;&#24687;&#19981;&#26159;&#20840;&#37096;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#65292;&#21363;skb_headlen(skb) &lt;= skb_gro_offset(skb)&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#20010;case&#30340;&#29305;&#20363;&#26159;&#25152;&#26377;L2, L3, L4&#22836;&#37096;&#20449;&#24687;&#37117;&#19981;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#65292;&#32780;&#22312;skb_shinfo(skb)-&gt;frags[x]&#20013;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22312;&#36825;&#20010;case&#19979;&#65292;&#34987;&#21512;&#24182;&#30340;skb&#30340;NAPI_GRO_CB(skb)-&gt;free = NAPI_GRO_FREE( = 1)
    </p>
  </body>
</html></richcontent>
<node CREATED="1425433069035" ID="ID_639762947" MODIFIED="1425433079411">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_5.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425447517016" ID="ID_1153032123" MODIFIED="1425447532798">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_6.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425447579124" ID="ID_548513245" MODIFIED="1425448088438" TEXT="&#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x53ea;&#x9700;&#x8981;&#x628a;skb_shinfo(skb)-&gt;frags[x]&#x590d;&#x5236;&#x8ffd;&#x52a0;&#x5230;skb_shinfo(head)-&gt;frags[x]&#x3002; &#x5bf9;&#x4e8e;skb_shinfo(skb)-&gt;frags[0]&#x800c;&#x8a00;&#xff0c;&#x6709;&#x4e00;&#x90e8;&#x5206;&#x5934;&#x90e8;&#x4fe1;&#x606f;(L3,L4)&#x5728;&#x8fd9;&#x4e2a;frag&#x91cc;&#x9762;&#xff0c;&#x800c;&#x8fd9;&#x90e8;&#x5206;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5728;head&#x91cc;&#x9762;&#x5df2;&#x7ecf;&#x6709;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x9700;&#x8981;&#x4e86;&#xff0c;&#x6240;&#x4ee5;skb_shinfo(head)-&gt;frags[1]&#x4e2d;&#x7684;offset&#x548c;size&#x8981;&#x8df3;&#x8fc7;&#x8fd9;&#x4e00;&#x90e8;&#x5206;&#x91cd;&#x590d;&#x7684;&#x5934;&#x90e8;&#x3002;">
<node CREATED="1425448227071" ID="ID_1518863355" MODIFIED="1425448516572">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#30456;&#24403;&#20110;&#25226;skb&#30340;&#19968;&#37096;&#20998;&#20869;&#23481;&#25644;&#31227;&#21040;&#20102;head&#20013;&#65292;&#22240;&#27492;&#20108;&#32773;&#30340;len, data_len, true_size&#37117;&#35201;&#26356;&#26032;&#12290;
    </p>
    <p>
      &#27880;&#24847;&#65292;&#23545;&#20110;head&#32780;&#35328;&#22686;&#21152;&#20102;1960&#23383;&#33410;&#30340;&#20869;&#23481;&#12290;&#32780;&#23545;&#20110;skb&#26469;&#35828;&#20943;&#23569;&#20102;2000&#23383;&#33410;&#30340;&#20869;&#23481;&#65292;&#36825;&#26159;&#22240;&#20026;skb_shinfo(skb)-&gt;frags[0]&#20013;40&#23383;&#33410;&#30340;L3,L4&#22836;&#37096;&#20449;&#24687;&#34987;head, skb&#20108;&#32773;&#37117;&#25243;&#24323;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425448634678" ID="ID_1483535111" MODIFIED="1425448853368" TEXT="skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x5185;&#x5bb9;&#x4e0d;&#x518d;&#x9700;&#x8981;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;skb&#x548c;head&#x80fd;&#x591f;&#x5408;&#x5e76;&#x7684;&#x524d;&#x63d0;&#x662f;L2,L3,L4&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x4e00;&#x6837;&#xff0c;&#x800c;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x662f;&#x90e8;&#x5206;&#x7684;L2,L3,L4&#x5934;&#x90e8;&#x4fe1;&#x606f;&#xff0c;&#x8fd9;&#x4e9b;&#x4fe1;&#x606f;&#x5728;head&#x4e2d;&#x5df2;&#x7ecf;&#x6709;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x9700;&#x8981;&#x642c;&#x79fb;&#x5230;head&#x4e2d;&#x3002;">
<node CREATED="1425449087180" ID="ID_1581850819" LINK="#ID_1950295829" MODIFIED="1425851126170" TEXT="&#x65e2;&#x7136;skb-&gt;data&#x6307;&#x5411;&#x7684;&#x5185;&#x5bb9;&#x5df2;&#x7ecf;&#x65e0;&#x7528;&#xff0c;&#x56e0;&#x6b64;&#x5c06;NAPI_GRO_CB(skb)-&gt;free &#x8bbe;&#x7f6e;&#x4e3a; NAPI_GRO_FREE(=1)&#xff0c;&#x8fd9;&#x4f1a;&#x5bfc;&#x81f4;skb&#x672c;&#x8eab;&#x4ee5;&#x53ca;skb-&gt;head&#x6307;&#x5411;&#x7684;&#x5185;&#x5b58;&#x533a;&#x5728;napi_skb_finish&#x51fd;&#x6570;&#x4e2d;&#x88ab;&#x91ca;&#x653e;&#x3002;"/>
</node>
<node CREATED="1425450081403" ID="ID_1185841471" MODIFIED="1425450241766">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;NAPI_GRO_CB(head)-&gt;count&#21152;1&#65292;&#34920;&#31034;&#22312;head&#20013;&#21448;&#21512;&#24182;&#20102;&#21478;&#22806;&#19968;&#20010;&#21253;
    </p>
    <p>
      &#23558;NAPI_GRO_CB(skb)-&gt;same_flow&#35774;&#20026;1&#65292;&#34920;&#31034;&#24050;&#32463;&#23558;skb&#21512;&#24182;&#21040;gro_list&#20013;&#26576;&#20010;skb&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425457246774" ID="ID_1194740809" MODIFIED="1429124657693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      L2, L3, L4&#22836;&#37096;&#20449;&#24687;&#20840;&#37096;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#65292;&#21363;skb_headlen(skb) &gt; skb_gro_offset(skb)&#12290;
    </p>
    <p>
      &#27880;&#24847;&#34429;&#28982;&#22836;&#37096;&#20449;&#24687;&#20840;&#37096;&#22312;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#65292;&#20294;&#26159;&#20854;&#20313;&#30340;payload&#21487;&#33021;&#36824;&#22312;skb_shinfo(skb)-&gt;frags[x]&#20013;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425457295358" FOLDED="true" ID="ID_1814193015" MODIFIED="1425938763791">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;head_frag == 1
    </p>
    <p>
      &#36825;&#34920;&#26126;skb-&gt;head&#25351;&#21521;&#30340;&#26159;&#26576;&#20010;page&#30340;&#19968;&#37096;&#20998;&#65292;&#20063;&#23601;&#26159;&#35828;skb-&gt;head&#25351;&#21521;&#30340;&#20869;&#23384;&#21306;&#22312;&#29289;&#29702;&#19978;&#26159;&#36830;&#32493;&#30340;&#65292;
    </p>
    <p>
      &#21487;&#20197;&#23558;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#30340;&#20869;&#23481;&#36716;&#25442;&#20026;&#19968;&#20010;skb_frag_t&#32467;&#26500;&#65292;&#22240;&#32780;&#21487;&#20197;&#26041;&#20415;&#30340;&#23558;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;&#38500;L2,L3,L4&#22836;&#37096;&#20197;&#22806;&#30340;&#20869;&#23481;&#21512;&#24182;&#21040;head&#20013;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22312;&#36825;&#20010;case&#19979;&#65292;&#34987;&#21512;&#24182;&#30340;skb&#30340;NAPI_GRO_CB(skb)-&gt;free = NAPI_GRO_FREE_STOLEN_HEAD( = 2)
    </p>
  </body>
</html></richcontent>
<node CREATED="1425458099013" ID="ID_1260457145" MODIFIED="1425458111834">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_7.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425459422370" ID="ID_33981171" MODIFIED="1425459436719">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_8.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425459687263" ID="ID_1270982088" MODIFIED="1425459702786" TEXT="&#x8fd9;&#x91cc;&#x5b9e;&#x9645;&#x4e0a;&#x9762;&#x4e34;2&#x4e2a;&#x95ee;&#x9898;&#xff1a;">
<node CREATED="1425459715465" ID="ID_1174477819" MODIFIED="1425459744192" TEXT="&#x5982;&#x4f55;&#x5c06;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x9664;L2,L3,L4&#x5934;&#x90e8;&#x4e4b;&#x5916;&#x7684;&#x5185;&#x5bb9;&#x5408;&#x5e76;&#x5230;head">
<node CREATED="1425459808633" ID="ID_1331069140" MODIFIED="1425460030946" TEXT="&#x8fd9;&#x91cc;&#x56e0;&#x4e3a;skb-&gt;head_frag&#x4e3a;1&#xff0c;&#x56e0;&#x800c;&#x53ef;&#x4ee5;&#x5c06;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x9664;L2,L3,L4&#x5934;&#x90e8;&#x4e4b;&#x5916;&#x7684;&#x5185;&#x5bb9;&#x8f6c;&#x6362;&#x4e3a;&#x4e00;&#x4e2a;skb_frag_t&#x7684;&#x7ed3;&#x6784;&#xff0c;&#x8fd9;&#x4e2a;&#x7ed3;&#x6784;&#x9644;&#x52a0;&#x5728;skb_shinfo(head)-&gt;frags[x]&#x540e;&#x9762;&#x3002;"/>
<node CREATED="1425460039648" ID="ID_553560666" MODIFIED="1425460040930" TEXT="&#x6ce8;&#x610f;skb_shinfo(head)-&gt;frags[1]&#x7684;offset&#x5df2;&#x7ecf;&#x8df3;&#x8fc7;&#x4e86;L2,L3,L4&#x5934;&#x90e8;&#xff0c;&#x6307;&#x5411;&#x4e86;L4 payload&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x4e9b;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5728;head&#x4e2d;&#x5df2;&#x7ecf;&#x6709;&#x4e86;&#xff0c;&#x56e0;&#x800c;&#x4e0d;&#x9700;&#x8981;&#x91cd;&#x590d;&#x4e86;&#x3002;"/>
</node>
<node CREATED="1425459715465" ID="ID_507702700" MODIFIED="1425459785815" TEXT="&#x5982;&#x4f55;&#x5c06;skb_shinfo(skb)-&gt;frags[x]&#x4e2d;&#x7684;&#x5185;&#x5bb9;&#x5408;&#x5e76;&#x5230;head">
<node CREATED="1425460119161" ID="ID_1071689357" MODIFIED="1425460244241">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30452;&#25509;&#25226;skb_shinfo(skb)-&gt;frags[x]&#22797;&#21046;&#36861;&#21152;&#21040;skb_shinfo(head)-&gt;frags[x]&#21518;&#38754;&#12290;&#27880;&#24847;skb_shinfo(skb)-&gt;frags[x]&#20013;&#30340;offset&#19981;&#38656;&#35201;&#35843;&#25972;&#65292;&#22240;&#20026;L2,L3,L4&#22836;&#37096;&#27809;&#26377;&#24310;&#20280;&#21040;&#36825;&#37324;&#26469;&#65292;&#20063;&#23601;&#26159;&#36825;&#37324;&#27809;&#26377;&#37325;&#22797;&#20869;&#23481;&#65292;&#22240;&#32780;&#19981;&#33021;&#24573;&#30053;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425460372736" ID="ID_369124232" MODIFIED="1425460643223" TEXT="&#x7ecf;&#x8fc7;&#x4e0a;&#x8ff0;&#x8f6c;&#x6362;&#xff0c;skb&#x7ed3;&#x6784;&#x4f53;&#x672c;&#x8eab;&#x5df2;&#x65e0;&#x7528;&#xff0c;&#x53ef;&#x4ee5;&#x88ab;&#x91ca;&#x653e;&#xff0c;&#x4f46;&#x662f;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x5185;&#x5b58;&#x533a;&#x5df2;&#x88ab;&#x8f6c;&#x6362;&#x4e3a;&#x4e00;&#x4e2a;skb_frag_t&#x5408;&#x5e76;&#x5230;head&#x4e2d;&#xff0c;&#x56e0;&#x800c;skb-&gt;head&#x5206;&#x914d;&#x7684;&#x5185;&#x5b58;&#x533a;&#x8fd8;&#x4e0d;&#x80fd;&#x91ca;&#x653e;&#x3002;&#x5c06;NAPI_GRO_CB(skb)-&gt;free &#x8bbe;&#x7f6e;&#x4e3a; NAPI_GRO_FREE_STOLEN_HEAD(=2)&#xff0c;&#x8fd9;&#x4f1a;&#x5bfc;&#x81f4;napi_skb_finish&#x51fd;&#x6570;&#x91ca;&#x653e;skb&#x7ed3;&#x6784;&#x4f53;&#x672c;&#x8eab;&#xff0c;&#x800c;&#x4e0d;&#x91ca;&#x653e;skb-&gt;head&#x5206;&#x914d;&#x7684;&#x5185;&#x5b58;&#x533a;&#x3002;"/>
<node CREATED="1425450081403" ID="ID_621633091" MODIFIED="1425450241766">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;NAPI_GRO_CB(head)-&gt;count&#21152;1&#65292;&#34920;&#31034;&#22312;head&#20013;&#21448;&#21512;&#24182;&#20102;&#21478;&#22806;&#19968;&#20010;&#21253;
    </p>
    <p>
      &#23558;NAPI_GRO_CB(skb)-&gt;same_flow&#35774;&#20026;1&#65292;&#34920;&#31034;&#24050;&#32463;&#23558;skb&#21512;&#24182;&#21040;gro_list&#20013;&#26576;&#20010;skb&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425457295358" ID="ID_1380064803" MODIFIED="1425938799596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb-&gt;head_frag == 0
    </p>
    <p>
      &#27492;&#26102;&#26080;&#27861;&#20877;&#23558;&#24403;&#21069;skb&#30452;&#25509;&#21512;&#24182;&#21040;head&#30340;skb_shinfo(head)-&gt;frags[x]&#20013;&#65292;
    </p>
    <p>
      &#36825;&#26102;&#21482;&#33021;&#23558;&#24403;&#21069;skb&#25346;&#25509;&#21040;head&#30340;skb_shinfo(head)-&gt;frag_list&#19978;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22312;&#36825;&#20010;case&#19979;&#65292;&#34987;&#21512;&#24182;&#30340;skb&#30340;NAPI_GRO_CB(skb)-&gt;free = GRO_MERGED( = 0)
    </p>
    <p>
      
    </p>
    <p>
      &#36825;&#20010;&#36807;&#31243;&#20998;&#20026;2&#27493;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425860538146" FOLDED="true" ID="ID_537159706" MODIFIED="1429125015767">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39318;&#20808;&#26681;&#25454;&#21407;head&#26500;&#36896;&#19968;&#20010;&#21253;&#21547;L2,L3,L4&#22836;&#37096;&#30340;&#26032;&#30340;skb&#65292;&#36825;&#20010;skb&#20013;&#30340;&#22836;&#37096;&#20449;&#24687;&#23558;&#34987;frag_list&#20013;&#25152;&#26377;&#20998;&#29255;&#21253;skb&#25152;&#20849;&#20139;&#12290;&#36825;&#20010;&#26032;&#30340;head&#21482;&#21253;&#21547;L2,L3,L4&#22836;&#37096;&#20449;&#24687;&#65292;&#19981;&#21253;&#21547;L4 payload&#12290;&#23558;&#32769;&#30340;head&#25346;&#25509;&#21040;&#26032;&#30340;head&#30340;skb_shinfo(new_head)-&gt;frag_list&#19978;&#12290;&#32769;&#30340;head&#23558;&#36339;&#36807;L2,L3,L4&#22836;&#37096;&#25351;&#21521;L4 payload&#65292;&#22240;&#20026;&#36825;&#37096;&#20998;&#22836;&#37096;&#22312;&#26032;&#30340;head&#20013;&#24050;&#32463;&#22797;&#21046;&#36807;&#21435;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425860864097" ID="ID_270674974" MODIFIED="1425860887645">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_9.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425860976418" ID="ID_973042833" MODIFIED="1425861110840" TEXT="&#x65b0;&#x6784;&#x5efa;&#x7684;new_head&#x53ea;&#x5305;&#x542b;L2,L3,L4&#x5934;&#x90e8;&#x4fe1;&#x606f;&#xff0c;&#x4e0d;&#x5305;&#x542b;L4 payload&#xff0c;&#x8fd9;&#x4e2a;skb&#x5c06;&#x88ab;&#x6240;&#x6709;frag_list&#x4e2d;&#x7684;skb&#x6240;&#x5171;&#x4eab;&#x3002;&#x8001;&#x7684;head&#x6302;&#x63a5;&#x5230;skb_shinfo(new_head)-&gt;frag_list&#x94fe;&#x8868;&#x4e0a;&#x3002;"/>
<node CREATED="1425861127971" ID="ID_798967266" MODIFIED="1425861309729" TEXT="&#x53d1;&#x9001;&#x65f6;&#x505a;GSO&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;GSO size&#x6362;&#x5230;&#x4e86;&#x65b0;&#x7684;new head&#x7684;skb_shinfo(new_head)-&gt;gso_size&#x4e0a;&#xff0c;&#x8fd9;&#x4e2a;&#x503c;&#x5c31;&#x662f;&#x505a;segmentation&#x65f6;&#x9700;&#x8981;&#x628a;&#x5408;&#x5e76;&#x540e;&#x7684;&#x5305;&#x518d;&#x5206;&#x5272;&#x6210;&#x5c0f;&#x5305;&#x65f6;&#x5c0f;&#x5305;&#x7684;&#x5927;&#x5c0f;&#xff0c;&#x5b83;&#x662f;&#x6307;L4 payload&#x7684;&#x5927;&#x5c0f;&#x3002;">
<node CREATED="1425861346977" ID="ID_853168153" MODIFIED="1425861359845" TEXT="skb_shinfo(old_head)-&gt;gso_size = 0"/>
</node>
<node CREATED="1425861395785" ID="ID_453135428" MODIFIED="1425861503353" TEXT="&#x65b0;&#x7684;new head&#x7684;NAPI_GRO_CB(p)-&gt;last&#x6307;&#x5411;&#x4e86;&#x8001;&#x7684;head&#x3002;&#x5982;&#x679c;&#x6709;&#x65b0;&#x7684;&#x5305;&#x8981;&#x5408;&#x5e76;&#x5230;new head&#xff0c;&#x5b83;&#x5c06;&#x88ab;&#x6302;&#x63a5;&#x5230;&#x8001;&#x7684;head&#x7684;old_head-&gt;next&#x4e0a;&#x3002;"/>
<node CREATED="1425861525078" ID="ID_770741208" MODIFIED="1425861562193" TEXT="&#x8001;&#x7684;head&#x9700;&#x8981;&#x8df3;&#x8fc7;&#x5176;L2,L3,L4&#x5934;&#x90e8;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x90e8;&#x5206;&#x4fe1;&#x606f;&#x5728;&#x65b0;&#x7684;head&#x4e2d;&#x5df2;&#x7ecf;&#x6709;&#x4e86;&#x3002;"/>
</node>
<node CREATED="1425862152095" FOLDED="true" ID="ID_535759130" MODIFIED="1425862697686" TEXT="&#x7136;&#x540e;&#x5c06;&#x5f53;&#x524d;skb&#x6302;&#x63a5;&#x5230;skb_shinfo(head)-&gt;frag_list&#x4e0a;&#x3002;">
<node CREATED="1425862202336" ID="ID_206370027" MODIFIED="1425862213485">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_GRO_10.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425862403022" ID="ID_1256469228" MODIFIED="1425862505303" TEXT="&#x5c06;&#x5f53;&#x524d;skb&#x6302;&#x63a5;&#x5230;head&#x7684;skb_shinfo(head)-&gt;frag_list&#x94fe;&#x8868;&#x7684;&#x6700;&#x540e;&#xff0c;&#x540c;&#x65f6;&#x5f53;&#x524d;skb&#x5e94;&#x8be5;&#x8df3;&#x8fc7;L2,L3,L4&#x5934;&#x90e8;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x90e8;&#x5206;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x5728;head&#x4e2d;&#x5df2;&#x7ecf;&#x6709;&#x4e86;"/>
<node CREATED="1425862550561" ID="ID_1262478003" MODIFIED="1425862631625" TEXT="&#x6302;&#x63a5;&#x5b8c;&#x6210;&#x540e;&#x5e94;&#x5c06;NAPI_GRO_CB(jead)-&gt;last&#x6307;&#x5411;&#x5f53;&#x524d;skb&#xff0c;&#x8868;&#x793a;&#x5f53;&#x524d;skb&#x662f;&#x672c;&#x5408;&#x5e76;&#x5305;&#x7684;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x5305;&#x3002;"/>
<node CREATED="1425862646006" ID="ID_721100056" MODIFIED="1425862689882" TEXT="&#x66f4;&#x65b0;head&#x6240;&#x6709;&#x76f8;&#x5173;&#x957f;&#x5ea6;&#xff0c;&#x4ee5;&#x53ca;&#x9012;&#x589e;NAPI_GRO_CB(head)-&gt;count"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1425190472907" FOLDED="true" ID="ID_1512286123" MODIFIED="1429125036810" TEXT="napi_gro_receive()">
<node CREATED="1425282771434" FOLDED="true" ID="ID_1858388168" MODIFIED="1429124501451">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ret = dev_gro_receive(napi, skb)
    </p>
    <p>
      &#30495;&#27491;&#30340;segments&#21512;&#24182;&#30340;&#24037;&#20316;&#22312;dev_gro_receive()&#20013;&#23436;&#25104;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425341163257" ID="ID_123152690" MODIFIED="1425341215836">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      GRO&#20165;&#22312;NETIF_F_GRO&#26631;&#35782;&#22312;skb-&gt;dev-&gt;features&#19978;&#20351;&#33021;&#26102;&#25165;&#36827;&#34892;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425341390874" ID="ID_1097956147" MODIFIED="1425341536936" TEXT="&#x5982;&#x679c;skb&#x5df2;&#x7ecf;&#x505a;&#x8fc7;GRO (skb_shinfo(skb)-&gt;gso_size != 0)&#xff0c;&#x5219;&#x4e0d;&#x518d;&#x505a;GRO&#xff0c;&#x6b64;&#x65f6;&#x8fd4;&#x56de;GRO_NORMAL&#x8ba9;napi_skb_finish()&#x628a;skb&#x7acb;&#x5373;&#x5582;&#x7ed9;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425341390874" ID="ID_298947528" MODIFIED="1425341620630" TEXT="&#x5982;&#x679c;skb&#x662f;&#x591a;&#x4e2a;&#x5206;&#x7247;&#x5305;&#x91cd;&#x7ec4;&#x540e;&#x7684;&#x5305; (skb_shinfo(skb)-&gt;frag_list != NULL)&#xff0c;&#x5219;&#x4e0d;&#x518d;&#x505a;GRO&#xff0c;&#x6b64;&#x65f6;&#x8fd4;&#x56de;GRO_NORMAL&#x8ba9;napi_skb_finish()&#x628a;skb&#x7acb;&#x5373;&#x5582;&#x7ed9;&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425405830551" ID="ID_493161011" MODIFIED="1425405888051">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;skb_gro_reset_offset(skb)&#21021;&#22987;&#21270;
    </p>
    <p>
      NAPI_GRO_CB(skb)-&gt;data_offset
    </p>
    <p>
      NAPI_GRO_CB(skb)-&gt;frag0
    </p>
    <p>
      NAPI_GRO_CB(skb)-&gt;frag0_len
    </p>
    <p>
      &#19977;&#20010;&#23383;&#27573;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425406826985" ID="ID_588638697" MODIFIED="1425406907141" TEXT="&#x5982;&#x679c;L2 header&#x5df2;&#x7ecf;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;NAPI_GRO_CB(skb)-&gt;frag0&#x4e5f;&#x4e0d;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;&#xff0c;&#x56e0;&#x4e3a;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x901a;&#x8fc7;skb-&gt;data&#x8bfb;&#x53d6;&#x5404;&#x79cd;&#x5934;&#x90e8;&#x4fe1;&#x606f;"/>
</node>
<node CREATED="1425407067647" ID="ID_1907880528" LINK="#ID_166613303" MODIFIED="1425937979931">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35843;&#29992;gro_list_prepare(napi, skb)&#26816;&#26597;L2 header&#65292;&#20174;L2&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#27491;&#22312;&#22788;&#29702;&#30340;skb&#33021;&#21542;&#21644;gro_list&#20013;&#26576;&#20010;skb&#21512;&#24182;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425409090036" ID="ID_1667961269" MODIFIED="1425409092444" TEXT="NAPI_GRO_CB(skb)-&gt;csum = skb-&gt;csum">
<node CREATED="1425409093731" ID="ID_1604330639" MODIFIED="1425409113592" TEXT="&#x4ec0;&#x4e48;&#x5730;&#x65b9;&#x4f1a;&#x7528;&#x5230;&#x5b83;&#xff1f;"/>
</node>
<node CREATED="1425409274201" ID="ID_165655238" MODIFIED="1425409438673" TEXT="&#x904d;&#x5386;&#x6240;&#x6709;struct packet_offload&#xff0c;&#x627e;&#x5230;&#x5339;&#x914d;skb-&gt;protocol&#x7684;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528;&#x5b83;&#x7684;gro_receive&#x56de;&#x8c03;&#x51fd;&#x6570;&#xa;ptype-&gt;callbacks.gro_receive(&amp;napi-&gt;gro_list, skb)&#xff0c;&#x8fd9;&#x5c31;&#x8fdb;&#x5165;&#x4e86;L3&#x5224;&#x65ad;">
<node CREATED="1425409478621" FOLDED="true" ID="ID_1807828710" MODIFIED="1425943018280" TEXT="&#x8fdb;&#x5165;L3&#x4e4b;&#x524d;&#xff0c;&#x9996;&#x5148;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;network header">
<node CREATED="1425409603339" HGAP="24" ID="ID_168728782" MODIFIED="1425409776104" TEXT="&#x5b9e;&#x9645;&#x4e0a;&#x6b64;&#x65f6;skb-&gt;data&#x5df2;&#x7ecf;&#x6307;&#x5411;&#x4e86;L3 header" VSHIFT="8"/>
</node>
<node CREATED="1425409800883" ID="ID_281057680" MODIFIED="1425409816415">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NAPI_GRO_CB(skb)-&gt;same_flow = 0;
    </p>
    <p>
      NAPI_GRO_CB(skb)-&gt;flush = 0;
    </p>
    <p>
      NAPI_GRO_CB(skb)-&gt;free = 0;
    </p>
    <p>
      NAPI_GRO_CB(skb)-&gt;udp_mark = 0;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425409838710" ID="ID_1611047141" MODIFIED="1425409858860" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x5728;&#x8fd9;&#x91cc;&#x521d;&#x59cb;&#x5316;&#x5b83;&#x4eec;&#xff1f;"/>
</node>
<node CREATED="1425410082583" ID="ID_113206698" MODIFIED="1425410088389" TEXT="inet_gro_receive()">
<node CREATED="1425948850109" ID="ID_1921165611" MODIFIED="1425948946906" TEXT="&#x5982;&#x679c;L3&#x5934;&#x90e8;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;&#x7528;pskb_may_pull()&#x628a;L3&#x5934;&#x90e8;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
<node CREATED="1425949232300" ID="ID_724821675" MODIFIED="1425949329818" TEXT="&#x5982;&#x679c;ip header&#x4e2d;&#x8bb0;&#x5f55;&#x7684;&#x957f;&#x5ea6;&#x4e0e;skb-&gt;len&#x4e2d;&#x8bb0;&#x5f55;&#x7684;&#x957f;&#x5ea6;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x5219;&#x9700;&#x8981;flush&#xff0c;&#x5373;&#x5c06;&#x5305;&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425949232300" ID="ID_1242333622" MODIFIED="1425949481528" TEXT="&#x5982;&#x679c;&#x662f;&#x5206;&#x7247;&#x5305;&#xff0c;&#x5219;&#x9700;&#x8981;flush&#xff0c;&#x5373;&#x5c06;&#x5305;&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425949803034" ID="ID_818449437" LINK="#ID_388997952" MODIFIED="1425949879488" TEXT="&#x904d;&#x5386;gro_list&#x4e2d;&#x7684;skb&#xff0c;&#x4ece;L3&#x5c42;&#x9762;&#x4e0a;&#x5224;&#x65ad;&#x662f;&#x5426;&#x80fd;&#x4e0e;gro_list&#x4e2d;&#x67d0;&#x4e2a;skb&#x5408;&#x5e76;"/>
<node CREATED="1425960289317" ID="ID_1252433357" MODIFIED="1425960427568">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;gro_list&#20013;&#19982;&#24403;&#21069;skb&#21516;&#28304;IP&#65292;&#21516;&#30446;&#30340;IP&#65292;&#21516;&#21327;&#35758;&#21495;&#30340;&#21253;&#32780;&#35328;
    </p>
    <p>
      &#22312;&#20197;&#19979;&#20960;&#31181;&#24773;&#20917;&#19979;&#65292;&#38656;&#35201;&#34987;flush&#65292;&#21363;&#23558;gro_list&#20013;&#30340;&#21253;&#21890;&#32473;Linux&#32593;&#32476;&#21327;&#35758;&#26632;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425960454051" ID="ID_1655154339" MODIFIED="1425960543960" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x4e0e;gro_list&#x4e2d;&#x540c;&#x6d41;&#x7684;&#x5305;&#x7684;ttl, tos, FRAG_DF&#x4e0d;&#x540c;"/>
<node CREATED="1425960558497" ID="ID_1178755058" MODIFIED="1425960570412" TEXT="&#x5f53;&#x524d;skb&#x9700;&#x8981;&#x88ab;flush"/>
</node>
<node CREATED="1425949917524" ID="ID_1663428925" MODIFIED="1425949936851" TEXT="&#x8df3;&#x8fc7;L3&#x5934;&#x90e8;&#xff0c;&#x6307;&#x5411;L4&#x5934;&#x90e8;"/>
<node CREATED="1425949959615" ID="ID_517848396" MODIFIED="1425950024160" TEXT="&#x8c03;&#x7528;L4 protocol&#x5bf9;&#x5e94;&#x7684;gro_receive&#x51fd;&#x6570;&#xff1a;struct net_offload *ops-&gt;callbacks.gro_receive()">
<node CREATED="1425950052894" ID="ID_1125852318" MODIFIED="1425950058507" TEXT="tcp_gro_receive()">
<node CREATED="1425948850109" ID="ID_1017122523" MODIFIED="1425950087249" TEXT="&#x5982;&#x679c;L4&#x5934;&#x90e8;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;&#x7528;pskb_may_pull()&#x628a;L4&#x5934;&#x90e8;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
<node CREATED="1425950149365" ID="ID_611842521" MODIFIED="1425950200694" TEXT="TCP&#x53ef;&#x80fd;&#x6709;&#x4e00;&#x4e9b;&#x9009;&#x9879;&#xff0c;&#x5982;&#x679c;&#x8fd9;&#x4e9b;&#x9009;&#x9879;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;&#x7528;pskb_may_pull()&#x628a;&#x8fd9;&#x4e9b;&#x9009;&#x9879;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
<node CREATED="1425960612409" ID="ID_1788584716" MODIFIED="1425960627956" TEXT="&#x5c06;NAPI_GRO_CB(skb)-&gt;data_offset&#x6307;&#x5411;L4 payload"/>
<node CREATED="1425960667522" ID="ID_873487432" LINK="#ID_1873510996" MODIFIED="1425960757841" TEXT="&#x904d;&#x5386;gro_list&#x4e2d;&#x7684;skb&#xff0c;&#x4ece;L4&#x5c42;&#x9762;&#x4e0a;&#x5224;&#x65ad;&#x662f;&#x5426;&#x80fd;&#x4e0e;gro_list&#x4e2d;&#x67d0;&#x4e2a;skb&#x5408;&#x5e76;"/>
<node CREATED="1425961307122" ID="ID_701868111" MODIFIED="1425961931197" TEXT="&#x81f3;&#x6b64;gro_list&#x4e2d;&#x6709;&#x6ca1;&#x6709;&#x5305;&#x53ef;&#x4ee5;&#x548c;&#x5f53;&#x524d;skb&#x5408;&#x5e76;&#x5df2;&#x7ecf;&#x786e;&#x5b9a;&#x4e86;&#xff0c;&#x4e4b;&#x540e;&#x5c31;&#x662f;&#x8981;&#x786e;&#x5b9a;&#x5f53;&#x524d;&#x7684;skb&#x548c;&#x627e;&#x5230;&#x7684;gro_list&#x4e2d;same flow&#x7684;&#x5305;&#x662f;&#x5426;&#x8981;flush&#x4e86;&#x3002;&#x5176;&#x5b9e;&#x4e24;&#x8005;&#x662f;&#x5426;&#x8981;flush&#x7684;&#x5224;&#x65ad;&#x662f;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;&#x9700;&#x8981;flush&#x5219;&#x53e6;&#x5916;&#x4e00;&#x4e2a;&#x4e5f;&#x9700;&#x8981;flush&#x3002;&#xa;&#x533a;&#x522b;&#x5728;&#x4e8e;&#xff1a;&#xa;&#x5bf9;&#x4e8e;&#x5f53;&#x524d;skb&#xff0c;&#x5b83;&#x662f;&#x901a;&#x8fc7;&#x8bbe;&#x7f6e;NAPI_GRO_CB(skb)-&gt;flush&#x6765;&#x786e;&#x5b9a;&#x9700;&#x8981;flush&#x5f53;&#x524d;skb&#x7684;&#xa;&#x5bf9;&#x4e8e;gro_list&#x4e2d;&#x627e;&#x5230;&#x7684;skb&#xff0c;&#x5b83;&#x662f;&#x901a;&#x8fc7;&#x76f4;&#x63a5;&#x5c06;&#x627e;&#x5230;&#x7684;skb&#x8fd4;&#x56de;&#x6765;&#x786e;&#x5b9a;&#x9700;&#x8981;flush&#x627e;&#x5230;&#x7684;skb&#x7684;">
<node CREATED="1425961398500" ID="ID_1679925464" MODIFIED="1425962211704" TEXT="&#x5982;&#x679c;NAPI_GRO_CB(skb)-&gt;flush&#x4e4b;&#x524d;&#x5c31;&#x88ab;&#x7f6e;&#x4e3a;&#x771f;&#x4e86;&#xff0c;&#x5219;&#x81ea;&#x7136;&#x662f;&#x8981;flush"/>
<node CREATED="1425961398500" ID="ID_858639808" MODIFIED="1425962311233" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x7684;TCP&#x5934;&#x90e8;&#x5177;&#x6709;&#x4ee5;&#x4e0b;flags&#x5219;&#x9700;&#x8981;flush">
<node CREATED="1425962333423" ID="ID_1543716053" MODIFIED="1425962334300" TEXT="TCP_FLAG_CWR"/>
</node>
<node CREATED="1425962389217" ID="ID_28932799" MODIFIED="1425962428426" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x4e0e;&#x627e;&#x5230;&#x7684;skb&#x7684;&#x5982;&#x4e0b;flags&#x4e0d;&#x540c;&#x5219;&#x9700;&#x8981;flush">
<node CREATED="1425962430255" ID="ID_1743040191" MODIFIED="1425962431457" TEXT="TCP_FLAG_ECE"/>
<node CREATED="1425962441659" ID="ID_1085838692" MODIFIED="1425962442232" TEXT="TCP_FLAG_URG"/>
<node CREATED="1425962450288" ID="ID_1926880284" MODIFIED="1425962450796" TEXT="TCP_FLAG_ACK"/>
<node CREATED="1425962459194" ID="ID_1286815636" MODIFIED="1425962459749" TEXT="TCP_FLAG_RST"/>
<node CREATED="1425962467694" ID="ID_1213841044" MODIFIED="1425962468295" TEXT="TCP_FLAG_SYN"/>
</node>
<node CREATED="1425962497509" ID="ID_455924957" MODIFIED="1425962508769" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x4e0e;&#x627e;&#x5230;&#x7684;skb&#x7684;ack_seq&#x4e0d;&#x540c;&#x5219;&#x9700;&#x8981;flush"/>
<node CREATED="1425962518086" ID="ID_968095794" MODIFIED="1425962527055" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x4e0e;&#x627e;&#x5230;&#x7684;skb&#x7684;options&#x4e0d;&#x540c;&#x5219;&#x9700;&#x8981;flush"/>
<node CREATED="1425962546951" ID="ID_626456036" MODIFIED="1425962597366" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x7684;&#x957f;&#x5ea6;&#x5c0f;&#x4e8e;&#x5176;&#x4e2d;TCP header&#x4e2d;&#x8f7d;&#x660e;&#x7684;mss&#x5219;&#x9700;&#x8981;flush"/>
<node CREATED="1425962621928" ID="ID_152986316" MODIFIED="1425962657421" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x548c;&#x627e;&#x5230;&#x7684;skb&#x7684;&#x5e8f;&#x5217;&#x53f7;&#x4e0d;&#x8fde;&#x7eed;&#x5219;&#x9700;&#x8981;flush"/>
</node>
<node CREATED="1425962830434" ID="ID_479661244" LINK="#ID_207102362" MODIFIED="1425962920885" TEXT="&#x5728;&#x4e0d;&#x9700;&#x8981;flush&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x8c03;&#x7528;&#x51fd;&#x6570;skb_gro_receive()&#x5408;&#x5e76;&#x4e8c;&#x8005;"/>
<node CREATED="1425962699153" ID="ID_1101161296" MODIFIED="1425962786654" TEXT="&#x5982;&#x679c;&#x5f53;&#x524d;skb&#x548c;&#x627e;&#x5230;&#x7684;skb&#x5728;&#x51fd;&#x6570;skb_gro_receive()&#x4e2d;&#x6ca1;&#x6709;&#x5408;&#x5e76;&#x6210;&#x529f;&#xff0c;&#x5219;&#x627e;&#x5230;&#x7684;skb&#x9700;&#x8981;&#x88ab;flush&#xff0c;&#x800c;&#x5f53;&#x524d;skb&#x9700;&#x8981;&#x88ab;queue&#x8d77;&#x6765;"/>
</node>
</node>
</node>
<node CREATED="1425410234621" FOLDED="true" ID="ID_1359780221" MODIFIED="1425943016773" TEXT="&#x8fd4;&#x56de;&#x503c;&#x7684;&#x4f5c;&#x7528;">
<node CREATED="1425410272214" ID="ID_705513078" MODIFIED="1425410273637" TEXT="NAPI_GRO_CB(skb)-&gt;same_flow">
<node CREATED="1425939055029" ID="ID_1051354060" MODIFIED="1425939165210" TEXT="&#x5982;&#x679c;&#x503c;&#x4e3a;&#x771f;&#xff0c;&#x8868;&#x793a;gro_list&#x4e2d;&#x6709;&#x4e00;&#x4e2a;&#x5305;&#x4e0e;&#x5f53;&#x524d;skb&#x5c5e;&#x4e8e;&#x540c;&#x4e00;&#x6761;&#x6d41;&#xff0c;&#x5f53;&#x524d;skb&#x5df2;&#x7ecf;&#x88ab;&#x5408;&#x5e76;&#x5230;&#x90a3;&#x4e2a;&#x76f8;&#x540c;&#x6d41;&#x7684;&#x5305;&#x91cc;&#x53bb;&#x4e86;"/>
</node>
<node CREATED="1425410284847" ID="ID_1054996906" MODIFIED="1425410285957" TEXT="NAPI_GRO_CB(skb)-&gt;flush"/>
<node CREATED="1425410296643" ID="ID_583576632" MODIFIED="1425410297738" TEXT="NAPI_GRO_CB(skb)-&gt;free">
<node CREATED="1425940077984" ID="ID_1085771414" LINK="#ID_1485489581" MODIFIED="1425940091790" TEXT="&#x5728;NAPI_GRO_CB(skb)-&gt;same_flow&#x4e3a;&#x771f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x51b3;&#x5b9a;&#x5982;&#x4f55;&#x5904;&#x7406;&#x5f53;&#x524d;skb&#x3002;"/>
</node>
<node CREATED="1425426091257" ID="ID_1190836472" MODIFIED="1425426139866" TEXT="struct packet_offload ptype-&gt;callbacks.gro_receive()&#x7684;&#x8fd4;&#x56de;&#x503c;">
<node CREATED="1425426263896" ID="ID_1647309784" LINK="#ID_939992948" MODIFIED="1425429981331">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#20010;&#36820;&#22238;&#20540;&#22914;&#26524;&#19981;&#20026;&#31354;&#65292;&#21017;&#20195;&#34920;&#19968;&#20010;&#24050;&#32463;&#21512;&#24182;&#21518;&#30340;&#21253;&#65292;&#23427;&#38656;&#35201;&#34987;&#25552;&#20132;&#32473;Linux&#32593;&#32476;&#21327;&#35758;&#26632;
    </p>
    <p>
      &#21512;&#24182;&#21518;&#30340;&#21253;&#25552;&#20132;&#32473;&#21327;&#35758;&#26632;&#26159;&#36890;&#36807;napi_gro_complete(skb)&#36827;&#34892;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1425409921777" ID="ID_1266171606" MODIFIED="1425410020735" TEXT="&#x5982;&#x679c;&#x6ca1;&#x6709;&#x627e;&#x5230;&#x5339;&#x914d;&#x7684;struct packet_offload&#xff0c;&#x5219;&#x8fd4;&#x56de;GRO_NORMAL&#x8868;&#x793a;&#x4e0d;&#x80fd;&#x5408;&#x5e76;skb&#xff0c;&#x9700;&#x8981;&#x7acb;&#x5373;&#x5c06;skb&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425430774972" ID="ID_1042136754" MODIFIED="1425430885100" TEXT="&#x5982;&#x679c;ptype-&gt;callbacks.gro_receive()&#x8fd4;&#x56de;&#x4e0d;&#x4e3a;&#x7a7a;&#xff0c;&#x5219;&#x5c06;&#x8fd4;&#x56de;&#x7684;skb&#x4ece;gro_list&#x4e2d;&#x53d6;&#x51fa;&#xff0c;&#x518d;&#x8c03;&#x7528;napi_gro_complete(skb)&#x5c06;&#x8fd4;&#x56de;&#x7684;skb&#x63d0;&#x4ea4;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425431083153" ID="ID_1356232295" MODIFIED="1425939039937">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;NAPI_GRO_CB(skb)-&gt;same_flow&#20026;&#30495;&#65292;&#34920;&#31034;&#24403;&#21069;&#27491;&#22312;&#22788;&#29702;&#30340;skb&#24050;&#32463;&#34987;&#21512;&#24182;&#21040;gro_list&#20013;&#26576;&#20010;skb.
    </p>
    <p>
      &#27492;&#26102;&#36820;&#22238;&#21518;&#22312;napi_skb_finish()&#20989;&#25968;&#20013;&#23545;&#24403;&#21069;skb&#32467;&#26500;&#30340;&#22788;&#29702;&#21462;&#20915;&#20110;NAPI_GRO_CB(skb)-&gt;free&#30340;&#20540;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425939184973" ID="ID_1485489581" MODIFIED="1425940116461">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NAPI_GRO_CB(skb)-&gt;free&#21487;&#33021;&#30340;&#36820;&#22238;&#20540;&#26377;3&#20010;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425939289090" ID="ID_1447609024" LINK="#ID_1380064803" MODIFIED="1425939484883">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      GRO_MERGED( = 0)&#65292;&#23427;&#34920;&#31034;&#24403;&#21069;skb&#24050;&#32463;&#34987;&#21512;&#24182;&#21040;gro_list&#20013;&#19982;&#23427;&#21516;&#23646;&#19968;&#26465;&#27969;&#30340;&#21253;&#20869;&#65292;
    </p>
    <p>
      &#19988;&#26159;&#34987;&#25346;&#25509;&#21040;skb_shinfo(same_flow_skb)-&gt;frag_list&#19978;&#65292;&#27492;&#26102;&#24403;&#21069;skb&#30340;&#20219;&#20309;&#20869;&#23481;&#37117;&#36824;&#22312;&#20351;&#29992;&#65292;&#22240;&#32780;&#19981;&#33021;&#34987;&#37322;&#25918;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425939289090" ID="ID_1821288062" LINK="#ID_298900171" MODIFIED="1425939804663">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NAPI_GRO_FREE == GRO_MERGED_FREE( = 1)&#65292;&#23427;&#34920;&#31034;&#24403;&#21069;skb&#24050;&#32463;&#34987;&#21512;&#24182;&#21040;gro_list&#20013;&#19982;&#23427;&#21516;&#23646;&#19968;&#26465;&#27969;&#30340;&#21253;&#20869;&#65292;skb_shinfo(skb)-&gt;frags[x]&#24050;&#32463;&#34987;&#21512;&#24182;&#65292;&#20294;skb-&gt;head&#20197;&#21450;skb&#26412;&#36523;&#24182;&#27809;&#26377;&#34987;&#21512;&#24182;&#65292;&#22240;&#32780;skb-&gt;head&#20197;&#21450;skb&#26412;&#36523;&#38656;&#35201;&#34987;&#37322;&#25918;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425939289090" ID="ID_1721877534" LINK="#ID_1814193015" MODIFIED="1425939972867">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NAPI_GRO_FREE_STOLEN_HEAD( = 2)&#65292;&#23427;&#34920;&#31034;&#24403;&#21069;skb&#24050;&#32463;&#34987;&#21512;&#24182;&#21040;gro_list&#20013;&#19982;&#23427;&#21516;&#23646;&#19968;&#26465;&#27969;&#30340;&#21253;&#20869;&#65292;
    </p>
    <p>
      skb_shinfo(skb)-&gt;frags[x]&#20197;&#21450;skb-&gt;head&#37117;&#34987;&#21512;&#24182;&#20102;&#65292;&#20294;skb&#26412;&#36523;&#24182;&#27809;&#26377;&#34987;&#21512;&#24182;&#65292;&#22240;&#32780;&#21482;&#38656;&#35201;&#37322;&#25918;skb&#26412;&#36523;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425940225005" ID="ID_840952088" MODIFIED="1425940374277" TEXT="&#x5982;&#x679c;NAPI_GRO_CB(skb)-&gt;flush&#x4e3a;&#x771f;&#xff0c;&#x8868;&#x793a;skb&#x9700;&#x8981;&#x88ab;&#x7acb;&#x5373;&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#xff0c;&#x56e0;&#x6b64;&#x8fd4;&#x56de;GRO_NORMAL&#xff0c;&#x8fd9;&#x6837;&#x5728;napi_skb_finish()&#x51fd;&#x6570;&#x4e2d;&#x4f1a;&#x8c03;&#x7528;&#x51fd;&#x6570;netif_receive_skb_internal(skb)&#x5c06;skb&#x5582;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#x3002;"/>
<node CREATED="1425940587260" ID="ID_1026623122" MODIFIED="1425940679119" TEXT="&#x81f3;&#x6b64;&#xff0c;&#x8bf4;&#x660e;&#x5728;gro_list&#x4e2d;&#x6ca1;&#x6709;&#x627e;&#x5230;&#x540c;&#x5c5e;&#x4e00;&#x6761;&#x6d41;&#x7684;&#x5305;&#xff0c;&#x56e0;&#x6b64;&#x5f53;&#x524d;skb&#x9700;&#x8981;&#x88ab;queue&#x8d77;&#x6765;&#xff0c;&#x7b49;&#x5f85;&#x540e;&#x7eed;&#x53ef;&#x4ee5;&#x8ddf;&#x5b83;&#x5408;&#x5e76;&#x7684;&#x5305;"/>
<node CREATED="1425940407580" ID="ID_595720992" MODIFIED="1425940505081" TEXT="&#x5982;&#x679c;gro_list&#x5df2;&#x7ecf;&#x6ee1;&#x4e86;&#xff0c;&#x5219;&#x5c06;&#x6700;&#x8001;&#x7684;&#x4e00;&#x4e2a;(&#x4e5f;&#x5c31;&#x662f;&#x94fe;&#x8868;&#x7684;&#x6700;&#x540e;&#x4e00;&#x4e2a;)&#x63d0;&#x4ea4;&#x7ed9;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425940712837" ID="ID_853834643" MODIFIED="1425940941104">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#24403;&#21069;skb&#25554;&#20837;&#21040;gro_list&#38142;&#34920;&#22836;&#37096;&#65292;&#24182;&#26356;&#26032;skb
    </p>
  </body>
</html></richcontent>
<node CREATED="1425940825738" ID="ID_1330260401" MODIFIED="1425940826809" TEXT="NAPI_GRO_CB(skb)-&gt;count = 1"/>
<node CREATED="1425940837291" ID="ID_268695441" MODIFIED="1425940837956" TEXT="NAPI_GRO_CB(skb)-&gt;age = jiffies"/>
<node CREATED="1425940851806" ID="ID_1289456855" MODIFIED="1425940868174" TEXT="skb_shinfo(skb)-&gt;gso_size&#x7b49;&#x4e8e;L4 payload&#x7684;&#x957f;&#x5ea6;"/>
</node>
<node CREATED="1425941031351" ID="ID_1236587712" MODIFIED="1425941091880" TEXT="&#x4e3a;&#x4fbf;&#x4e8e;&#x540e;&#x7eed;&#x4e0e;&#x5176;&#x5b83;&#x5305;&#x5408;&#x5e76;&#xff0c;&#x5c06;L2,L3,L3,L4&#x5934;&#x90e8;&#x5168;&#x90e8;&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;">
<node CREATED="1425941135004" ID="ID_621817014" MODIFIED="1425941234200" TEXT="&#x5982;&#x679c;&#x8fd9;&#x6837;&#x7684;&#x642c;&#x79fb;&#x5bfc;&#x81f4;&#x4e86;skb_shinfo(skb)-&gt;frags[0]&#x91cc;&#x9762;&#x6ca1;&#x6709;&#x5185;&#x5bb9;&#x4e86;&#xff0c;&#x5219;&#x7b2c;&#x4e00;&#x4e2a;frag&#x9700;&#x8981;&#x88ab;&#x91ca;&#x653e;&#xff0c;&#x540c;&#x65f6;&#x5c06;&#x540e;&#x9762;&#x7684;frags&#x5728;&#x6570;&#x7ec4;&#x4e2d;&#x524d;&#x79fb;&#x4e00;&#x6b65;"/>
</node>
<node CREATED="1425941258541" ID="ID_78911149" MODIFIED="1425941346964" TEXT="&#x5bf9;&#x4e8e;&#x6ca1;&#x6709;&#x88ab;&#x5408;&#x5e76;&#x4e14;&#x88ab;queue&#x5165;gro_list&#x7684;skb&#x800c;&#x8a00;&#xff0c;&#x5176;&#x8fd4;&#x56de;&#x503c;&#x4e3a;GRO_HELD&#xff0c;&#x5176;&#x542b;&#x4e49;&#x4e0e;GRO_MERGED&#x7b49;&#x540c;&#xff0c;&#x5373;&#x4e0d;&#x8981;&#x91ca;&#x653e;skb&#x7684;&#x4efb;&#x4f55;&#x90e8;&#x5206;"/>
</node>
<node CREATED="1425282773455" ID="ID_1191821495" MODIFIED="1425282977933">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      napi_skb_finish(ret, skb)
    </p>
    <p>
      &#26681;&#25454;dev_gro_receive()&#21512;&#24182;&#30340;&#32467;&#26524;&#20915;&#23450;&#26159;&#23558;skb&#21890;&#32473;Linux&#32593;&#32476;&#21327;&#35758;&#26632;&#65292;&#36824;&#26159;&#37322;&#25918;&#19981;&#29992;&#30340;skb&#65292;&#20134;&#25110;&#32773;&#26159;&#20160;&#20040;&#20063;&#19981;&#20570;&#30452;&#25509;&#36820;&#22238;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425283007648" ID="ID_1177182748" MODIFIED="1425340648698" TEXT="&#x5982;&#x679c;dev_gro_receive()&#x7684;&#x8fd4;&#x56de;&#x503c;&#x662f;GRO_NORMAL&#xff0c;&#x8868;&#x793a;skb&#x65e0;&#x6cd5;&#x88ab;&#x5408;&#x5e76;&#xff0c;&#x56e0;&#x800c;&#x9700;&#x8981;&#x88ab;&#x76f4;&#x63a5;&#x5582;&#x7ed9;Linux network stack&#xff0c;&#x8fd9;&#x5373;&#x662f;&#x8c03;&#x7528;netif_receive_skb_internal(skb)"/>
<node CREATED="1425283007648" ID="ID_1599975957" MODIFIED="1425340916901" TEXT="&#x5982;&#x679c;dev_gro_receive()&#x7684;&#x8fd4;&#x56de;&#x503c;&#x662f;GRO_HELD&#xff0c;&#x8868;&#x793a;skb&#x6ca1;&#x6709;&#x88ab;&#x5408;&#x5e76;&#xff0c;&#x4f46;&#x662f;&#x88ab;&#x653e;&#x5165;&#x4e86;gro_list&#x7b49;&#x5f85;&#x5408;&#x5e76;&#xff0c;&#x8fd9;&#x65f6;&#x5bf9;skb&#x7684;&#x5904;&#x7406;&#x5b8c;&#x6bd5;"/>
<node CREATED="1425283007648" ID="ID_1567493042" MODIFIED="1425449454390" TEXT="&#x5982;&#x679c;dev_gro_receive()&#x7684;&#x8fd4;&#x56de;&#x503c;&#x662f;GRO_MERGED_FREE&#xff0c;&#x8868;&#x793a;skb&#x5df2;&#x7ecf;&#x88ab;&#x5408;&#x5e76;&#xff0c;&#x8fd9;&#x65f6;skb&#x5df2;&#x7ecf;&#x65e0;&#x7528;&#xff0c;&#x53ef;&#x4ee5;&#x91ca;&#x653e;&#x4e4b;">
<node CREATED="1425449599005" ID="ID_1950295829" MODIFIED="1425449970022">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;NAPI_GRO_CB(skb)-&gt;free != NAPI_GRO_FREE_STOLEN_HEAD&#34920;&#31034;skb-&gt;head&#25152;&#25351;&#21521;&#30340;&#20869;&#23384;&#21306;&#20063;&#24050;&#26080;&#29992;&#65292;&#21487;&#20197;&#37322;&#25918;&#65292;&#22240;&#27492;&#35843;&#29992;__kfree_skb(skb)&#37322;&#25918;skb, skb-&gt;head, skb_shinf(skb)&#25152;&#25351;&#21521;&#30340;&#19977;&#22359;&#20869;&#23384;&#21306;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425449599005" ID="ID_920095555" MODIFIED="1425449951108">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;NAPI_GRO_CB(skb)-&gt;free == NAPI_GRO_FREE_STOLEN_HEAD&#34920;&#31034;skb-&gt;head&#25152;&#25351;&#21521;&#30340;&#20869;&#23384;&#21306;&#24050;&#34987;&#21512;&#24182;&#21518;&#30340;skb&#24341;&#29992;&#65292;&#36824;&#19981;&#33021;&#37322;&#25918;&#65292;&#22240;&#27492;&#35843;&#29992;kmem_cache_free(skbuff_head_cache, skb)&#37322;&#25918;skb&#26412;&#36523;&#25152;&#25351;&#21521;&#30340;&#19968;&#22359;&#20869;&#23384;&#21306;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1425937800939" FOLDED="true" ID="ID_1769377100" MODIFIED="1425967180567" TEXT="&#x95ee;&#x9898;">
<node CREATED="1425937809054" ID="ID_236878349" MODIFIED="1425937915258" TEXT="&#x5982;&#x679c;L2,L3,L4&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x53ea;&#x6709;&#x90e8;&#x5206;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;GRO&#x5982;&#x4f55;&#x8bfb;&#x53d6;&#x8fd9;&#x4e9b;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#xff1f;">
<node CREATED="1425967094364" ID="ID_1431168876" MODIFIED="1425967162528" TEXT="&#x5982;&#x679c;&#x5934;&#x90e8;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#x5219;&#x8c03;&#x7528;skb_gro_header_slow()&#x5c06;&#x5934;&#x90e8;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
</node>
</node>
</node>
</node>
<node CREATED="1426310324658" FOLDED="true" ID="ID_1198216549" MODIFIED="1429314165192" TEXT="RPS/RFS/RSS/XPS">
<node CREATED="1426310360975" FOLDED="true" ID="ID_1863399207" MODIFIED="1427676396904">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      RSS
    </p>
    <p>
      Receive Side Scaling
    </p>
  </body>
</html></richcontent>
<node CREATED="1426310503766" ID="ID_1586116874" MODIFIED="1426312098928" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1426310511750" ID="ID_871225132" MODIFIED="1426311158938" TEXT="&#x73b0;&#x4ee3;&#x7684;&#x7f51;&#x5361;(NIC)&#x4e00;&#x822c;&#x90fd;&#x652f;&#x6301;&#x591a;&#x4e2a;&#x53d1;&#x9001;&#x961f;&#x5217;&#x548c;&#x591a;&#x4e2a;&#x63a5;&#x6536;&#x961f;&#x5217;&#xff0c;&#x5373;multi-queue&#xff0c;&#x8fd9;&#x91cc;&#x7684;&#x961f;&#x5217;&#x662f;&#x6307;&#x7f51;&#x5361;&#x9a71;&#x52a8;&#x548c;DMA&#x4e4b;&#x95f4;&#x7684;descriptor queue&#x3002;&#x63a5;&#x6536;&#x65f6;&#xff0c;NIC&#x5c06;&#x4e0d;&#x540c;&#x7684;&#x5305;&#x5206;&#x53d1;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x63a5;&#x6536;&#x961f;&#x5217;&#xff0c;&#x4ece;&#x800c;&#x8ba9;&#x4e0d;&#x540c;&#x7684;CPU&#x5904;&#x7406;&#x3002;NIC&#x5e76;&#x975e;&#x968f;&#x673a;&#x5730;&#x5c06;&#x5305;&#x5206;&#x53d1;&#x5230;&#x4e0d;&#x540c;&#x63a5;&#x6536;&#x961f;&#x5217;&#xff0c;&#x800c;&#x662f;&#x9996;&#x5148;&#x5c06;&#x5305;&#x5206;&#x7c7b;&#x4e3a;&#x4e00;&#x6761;&#x6d41;(&#x6bd4;&#x5982;&#x534f;&#x8bae;&#x7c7b;&#x578b;&#xff0c;&#x6e90;IP&#xff0c;&#x76ee;&#x7684;IP&#xff0c;&#x6e90;&#x7aef;&#x53e3;&#xff0c;&#x76ee;&#x7684;&#x7aef;&#x53e3;&#x90fd;&#x76f8;&#x540c;&#x7684;&#x5305;&#x5c5e;&#x540c;&#x4e00;&#x6761;&#x6d41;)&#xff0c;&#x518d;&#x5c06;&#x4e0d;&#x540c;&#x7684;&#x6d41;&#x5206;&#x53d1;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x63a5;&#x6536;&#x961f;&#x5217;&#xff0c;&#x4ece;&#x800c;&#x8ba9;&#x4e0d;&#x540c;&#x7684;&#x6d41;&#x5728;&#x4e0d;&#x540c;&#x7684;CPU&#x4e0a;&#x5904;&#x7406;&#x3002;RSS&#x7684;&#x76ee;&#x7684;&#x662f;&#x63d0;&#x9ad8;&#x5e76;&#x53d1;&#x6027;&#x80fd;&#x3002;"/>
<node CREATED="1426311360806" ID="ID_1319660967" MODIFIED="1426311445152" TEXT="RSS&#x805a;&#x7126;&#x4e8e;&#x7f51;&#x5361;&#x786c;&#x4ef6;&#x548c;&#x7f51;&#x5361;&#x9a71;&#x52a8;&#xff0c;&#x5b83;&#x5b9e;&#x73b0;&#x5728;&#x786c;&#x4ef6;&#x5c42;&#x6b21;&#x4e0a;&#xff0c;&#x8fd9;&#x662f;&#x5b83;&#x4e0e;RPS/RFS&#x7684;&#x4e0d;&#x540c;&#x4e4b;&#x5904;"/>
<node CREATED="1426316922858" ID="ID_537696578" MODIFIED="1426317521870">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#32465;&#23450;&#22810;&#23569;&#20010;&#25509;&#25910;&#38431;&#21015;&#21040;&#19968;&#20010;CPU&#36825;&#20010;&#38382;&#39064;&#65292;&#36825;&#20010;&#38382;&#39064;&#21462;&#20915;&#20110;
    </p>
    <p>
      1&#65292;&#19968;&#20010;CPU&#33021;&#22788;&#29702;&#22810;&#22823;&#27969;&#37327;&#30340;&#21253;&#12290;&#22914;&#26524;&#19968;&#20010;CPU&#33021;&#22788;&#29702;500Mbps&#27969;&#37327;&#30340;&#21253;&#65292;&#32780;&#19968;&#20010;1000Mbps&#32593;&#21345;&#26377;8&#20010;&#25509;&#25910;&#38431;&#21015;&#65292;&#37027;&#20040;&#19968;&#20010;CPU&#26368;&#22810;&#23601;&#21487;&#20197;&#32465;&#23450;4&#20010;&#25509;&#25910;&#38431;&#21015;&#12290;
    </p>
    <p>
      2&#65292;&#31995;&#32479;&#20013;&#24635;&#20849;&#26377;&#22810;&#23569;&#20010;CPU&#12290;&#24212;&#23613;&#21487;&#33021;&#30340;&#35753;&#21508;&#20010;CPU&#30340;&#36127;&#36733;&#36798;&#21040;&#22343;&#34913;&#12290;&#20173;&#20197;&#19978;&#38754;&#30340;&#20171;&#32461;&#20026;&#20363;&#65292;&#22914;&#26524;&#31995;&#32479;&#26377;4&#20010;CPU&#65292;&#21017;&#27599;&#20010;CPU&#24212;&#32465;&#23450;2&#20010;&#25509;&#25910;&#38431;&#21015;&#65292;&#32780;&#19981;&#26159;4&#20010;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426312085976" ID="ID_1850253006" MODIFIED="1426312089329" TEXT="API">
<node CREATED="1426312148614" ID="ID_18323764" MODIFIED="1426312160336" TEXT="ethtool">
<node CREATED="1426312162514" ID="ID_394238429" MODIFIED="1426312287035">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool --config-ntuple
    </p>
    <p>
      MATCH match1 match2 ... matchN TARGET queueX
    </p>
    <p>
      &#23558;&#28385;&#36275;&#26576;&#20123;&#21305;&#37197;&#26465;&#20214;&#30340;&#21253;&#20998;&#21457;&#21040;&#26576;&#20010;&#25509;&#25910;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426314964225" ID="ID_1768923436" MODIFIED="1426315048380">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool --show-rxfh-indir
    </p>
    <p>
      &#26597;&#30475;NIC&#20013;&#30340;RSS&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1426314964225" ID="ID_1033857176" MODIFIED="1426315029330">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool --set-rxfh-indir
    </p>
    <p>
      &#35774;&#32622;NIC&#20013;&#30340;RSS&#34920;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1426311488937" FOLDED="true" ID="ID_433332915" MODIFIED="1427432065918" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1426316692173" ID="ID_68135332" MODIFIED="1426316723793">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_RSS_1.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1426482834986" FOLDED="true" ID="ID_829541717" MODIFIED="1429312021761">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      RPS
    </p>
    <p>
      Receive Packet Steering
    </p>
  </body>
</html></richcontent>
<node CREATED="1426482982236" FOLDED="true" ID="ID_1856516323" MODIFIED="1427671338903" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1426482994731" ID="ID_1487054880" MODIFIED="1426483492476" TEXT="&#x76f8;&#x5bf9;&#x4e8e;RSS&#xff0c;RPS&#x662f;&#x4e00;&#x79cd;&#x7eaf;&#x8f6f;&#x4ef6;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5b83;&#x7684;&#x5904;&#x7406;&#x9636;&#x6bb5;&#x4e5f;&#x4f4d;&#x4e8e;&#x66f4;&#x540e;&#x9762;&#x3002;&#x5728;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x7684;napi-&gt;poll()&#x51fd;&#x6570;&#x4e2d;&#xff0c;&#x5305;&#x4f1a;&#x901a;&#x8fc7;netif_receive_skb()&#x51fd;&#x6570;&#x6295;&#x9012;&#x5230;Linux&#x7f51;&#x7edc;&#x534f;&#x8bae;&#x6808;&#xff0c;&#x6b63;&#x662f;&#x5728;netif_receive_skb()&#x51fd;&#x6570;&#x4e2d;&#xff0c;RPS&#x8ba1;&#x7b97;&#x5305;&#x7684;hash&#x503c;&#x5c06;&#x5305;&#x5f52;&#x7c7b;&#x5230;&#x67d0;&#x4e00;&#x6761;&#x6d41;&#xff0c;&#x7136;&#x540e;&#x5c06;&#x4e0d;&#x540c;&#x6d41;&#x7684;&#x5305;queue&#x5230;&#x4e0d;&#x540c;&#x7684;CPU&#x7684;backlog&#x961f;&#x5217;&#xff0c;&#x4ece;&#x800c;&#x8ba9;&#x4e0d;&#x540c;&#x7684;CPU&#x5904;&#x7406;&#x5305;&#xff0c;&#x4ee5;&#x8fbe;&#x5230;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x3002;"/>
<node CREATED="1426483518207" ID="ID_1382021832" MODIFIED="1426483537050" TEXT="&#x76f8;&#x5bf9;&#x4e8e;RSS&#xff0c;RPS&#x6709;&#x51e0;&#x5927;&#x597d;&#x5904;">
<node CREATED="1426483556219" ID="ID_490652291" MODIFIED="1426483588551" TEXT="&#x5b83;&#x4e0d;&#x4f9d;&#x8d56;&#x4e8e;&#x786c;&#x4ef6;&#xff0c;&#x56e0;&#x6b64;&#x80fd;&#x7528;&#x4e8e;&#x6240;&#x6709;&#x7c7b;&#x578b;&#x7684;NIC&#x4e0a;"/>
<node CREATED="1426483597403" ID="ID_14025734" MODIFIED="1426483651652" TEXT="&#x5b83;&#x662f;&#x8f6f;&#x4ef6;&#x5b9e;&#x73b0;&#xff0c;&#x56e0;&#x800c;&#x80fd;&#x65b9;&#x4fbf;&#x7684;&#x4fee;&#x6539;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x7b56;&#x7565;&#xff0c;&#x6bd4;&#x5982;hash&#x7b97;&#x6cd5;&#xff0c;&#x6d41;&#x5206;&#x914d;&#x7b97;&#x6cd5;"/>
<node CREATED="1426483669925" ID="ID_1139956744" MODIFIED="1426483754936" TEXT="&#x5b83;&#x4e0d;&#x4f1a;&#x589e;&#x52a0;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x786c;&#x4e2d;&#x65ad;&#x6570;&#x91cf;&#xff0c;&#x4f46;&#x4f1a;&#x589e;&#x52a0;CPU&#x95f4;&#x4e2d;&#x65ad;&#x6570;&#x91cf;(IPIs&#xff1a;inter-processor interrupts)"/>
</node>
<node CREATED="1427443394376" ID="ID_739672262" MODIFIED="1427448716399" TEXT="&#x5207;&#x6362;CPU&#x65f6;&#x7684;&#x4e71;&#x5e8f;&#x5904;&#x7406;">
<node CREATED="1427443443353" ID="ID_272421922" MODIFIED="1427443728015">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24320;&#21551;&#20102;RFS&#65292;&#21017;socket&#25152;&#23646;&#30340;application&#25152;&#22312;&#30340;CPU&#21363;&#26159;socket&#35201;&#25910;&#30340;&#27969;&#30340;&#30446;&#30340;CPU&#12290;&#22240;&#20026;application&#20250;&#22240;&#20026;CPU&#32321;&#24537;&#32780;&#35843;&#24230;&#65292;&#25152;&#20197;&#27969;&#20063;&#35201;&#20999;&#25442;CPU&#12290;&#36825;&#26679;&#23601;&#24341;&#30003;&#20986;&#19968;&#20010;&#38382;&#39064;&#65306;&#22914;&#20309;&#20445;&#35777;&#21516;&#19968;&#26465;&#27969;&#30340;&#21253;&#19981;&#20081;&#24207;&#65311;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427443837140" ID="ID_304494761" MODIFIED="1427444130998" TEXT="&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x7684;&#x57fa;&#x672c;&#x5904;&#x7406;&#x539f;&#x5219;&#x662f;&#xff1a;&#xa;&#x5982;&#x679c;&#x8001;&#x7684;CPU&#x6ca1;&#x6709;queue&#x4f4f;&#x6d41;&#x7684;&#x4efb;&#x4f55;&#x5305;&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x7acb;&#x5373;&#x5207;&#x6362;&#x5230;&#x65b0;&#x7684;CPU&#xff1b;&#xa;&#x5982;&#x679c;&#x8001;&#x7684;CPU&#x8fd8;&#x6709;queue&#x4f4f;&#x6d41;&#x7684;&#x4efb;&#x4f55;&#x5305;&#xff0c;&#x5219;&#x6682;&#x65f6;&#x4e0d;&#x80fd;&#x5207;&#x6362;&#x5230;&#x65b0;&#x7684;CPU&#xff0c;&#x987b;&#x7b49;&#x5230;&#x8001;&#x7684;CPU&#x5904;&#x7406;&#x5b8c;&#x88ab;queue&#x4f4f;&#x7684;&#x8fd9;&#x6761;&#x6d41;&#x7684;&#x6240;&#x6709;&#x5305;&#x3002;"/>
<node CREATED="1427447632015" ID="ID_1999975275" MODIFIED="1427448397823" TEXT="&#x6bcf;&#x4e2a;CPU&#x6709;&#x4e00;&#x4e2a;&#x81ea;&#x5df1;&#x7684;&#x5e8f;&#x5217;&#x53f7;&#x7a7a;&#x95f4;&#xff0c;&#x8fd9;&#x4e2a;CPU&#x5904;&#x7406;&#x7684;&#x6bcf;&#x4e00;&#x4e2a;&#x5305;&#x5bf9;&#x5e94;&#x4e86;&#x4e00;&#x4e2a;&#x5e8f;&#x5217;&#x53f7;&#x3002;&#xa;input_queue_tail&#x6307;&#x5411;&#x4e86;&#x6700;&#x65b0;&#x5165;&#x961f;&#x5217;&#x7684;&#x5305;&#xff0c;input_queue_head&#x6307;&#x5411;&#x4e86;&#x6700;&#x65b0;&#x51fa;&#x961f;&#x5217;&#x7684;&#x5305;&#x3002;&#x8fd9;2&#x8005;&#x7684;&#x5dee;&#x503c;&#x5c31;&#x662f;&#x76ee;&#x524d;&#x8fd8;&#x5728;&#x961f;&#x5217;&#x4e2d;&#x672a;&#x5904;&#x7406;&#x7684;&#x5305;&#x6570;&#x91cf;&#x3002;&#xa;struct rps_dev_flow-&gt;last_qtail&#x8bb0;&#x5f55;&#x4e86;&#x4e00;&#x6761;&#x6d41;&#x7684;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5305;&#x5728;CPU&#x7684;queue&#x4e2d;&#x7684;&#x5e8f;&#x5217;&#x53f7;&#xff0c;&#x5f53;input_queue_head&#x5927;&#x4e8e;&#x8fd9;&#x4e2a;&#x5e8f;&#x5217;&#x53f7;&#x65f6;&#x5c31;&#x8868;&#x793a;CPU&#x5df2;&#x7ecf;&#x5904;&#x7406;&#x5b8c;&#x8fd9;&#x6761;&#x6d41;&#x7684;&#x6240;&#x6709;&#x5305;&#xff0c;&#x6b64;&#x65f6;&#x5c31;&#x53ef;&#x4ee5;&#x5207;&#x6362;CPU&#x4e86;&#x3002;&#x82e5;input_queue_head&#x5c0f;&#x4e8e;&#x8fd9;&#x4e2a;&#x5e8f;&#x5217;&#x53f7;&#x65f6;&#x5c31;&#x8868;&#x793a;CPU&#x8fd8;&#x672a;&#x5904;&#x7406;&#x5b8c;&#x8fd9;&#x6761;&#x6d41;&#x7684;&#x6240;&#x6709;&#x5305;&#xff0c;&#x6b64;&#x65f6;&#x8fd9;&#x6761;&#x6d41;&#x4e0d;&#x53ef;&#x4ee5;&#x5207;&#x6362;CPU&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x5f15;&#x8d77;&#x4e71;&#x5e8f;&#x3002;">
<node CREATED="1427448110809" ID="ID_1386560030" MODIFIED="1427448123462">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_RPS_3.JPG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1426662245880" ID="ID_1865816830" MODIFIED="1427676839267" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1427442657733" ID="ID_1951280183" MODIFIED="1427442681571">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_RPS_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1427448445454" ID="ID_1299791011" MODIFIED="1427448710391">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#24773;&#20917;&#19979;&#65292;&#24212;&#35813;&#23558;rps_sock_flow_table&#21516;&#27493;&#21040;rps_dev_flow_table&#65288;&#30456;&#21516;&#30340;hash&#22312;2&#20010;&#34920;&#20013;&#23545;&#24212;&#30456;&#21516;&#30340;CPU&#65289;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#22914;&#26524;&#21457;&#29983;&#20102;CPU&#20999;&#25442;&#65292;&#19988;&#27969;&#22312;&#32769;&#30340;CPU&#19978;&#36824;&#26377;&#26410;&#22788;&#29702;&#30340;&#21253;&#34987;queue&#22312;back_log&#38431;&#21015;&#20013;&#65292;&#21017;&#27492;&#26102;&#19981;&#33021;&#20999;&#25442;&#21040;&#26032;&#30340;CPU&#65292;&#39035;&#31561;&#21040;&#32769;&#30340;CPU&#22788;&#29702;&#23436;&#36825;&#26465;&#27969;&#30340;&#25152;&#26377;&#21253;&#25165;&#33021;&#20999;&#25442;&#12290;(input_queue_head &gt; rps_dev_flow-&gt;last_qtail)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426484235570" ID="ID_396443916" MODIFIED="1426484266114" TEXT="&#x5168;&#x5c40;&#x53d8;&#x91cf;&#xff1a;rps_needed">
<node CREATED="1426484277710" ID="ID_867712606" MODIFIED="1426484303834" TEXT="&#x8fd9;&#x4e2a;&#x53d8;&#x91cf;&#x7528;&#x4e8e;&#x5224;&#x65ad;&#x662f;&#x5426;&#x8981;&#x8fdb;&#x884c;RPS"/>
<node CREATED="1426484337496" ID="ID_1133263557" MODIFIED="1426484358315" TEXT="&#x5b83;&#x4f1a;&#x5728;&#x7528;&#x6237;&#x8bbe;&#x7f6e;/sys/class/net/&lt;dev&gt;/queues/rx-&lt;n&gt;/rps_cpus&#x65f6;&#x88ab;&#x9012;&#x589e;"/>
<node CREATED="1426484337496" ID="ID_428483127" MODIFIED="1427432197895" TEXT="&#x5b83;&#x4f1a;&#x5728;&#x7528;&#x6237;&#x8bbe;&#x7f6e;/proc/sys/net/core/rps_sock_flow_entries&#x65f6;&#x88ab;&#x9012;&#x589e;"/>
</node>
<node CREATED="1427670456533" ID="ID_860153489" MODIFIED="1427670469093" TEXT="struct rps_dev_flow">
<node CREATED="1427670470653" ID="ID_506494718" MODIFIED="1427670471953" TEXT="&#x4e00;&#x4e2a;&#x7ed3;&#x6784;&#x4f53;struct rps_dev_flow&#x5bf9;&#x5e94;&#x4e00;&#x6761;&#x6d41;&#xff0c;&#x6ce8;&#x610f;&#x4e00;&#x6761;&#x6d41;&#x7531;&#x4e00;&#x4e2a;hash&#x503c;&#x8868;&#x793a; "/>
<node CREATED="1427670492395" ID="ID_1545011174" MODIFIED="1427670530139" TEXT="&#x6b64;&#x7ed3;&#x6784;&#x5b58;&#x5728;&#x7684;&#x4e3b;&#x8981;&#x76ee;&#x7684;&#x662f;&#x89e3;&#x51b3;&#x6d41;&#x5728;CPU&#x95f4;&#x5207;&#x6362;&#x65f6;&#x53ef;&#x80fd;&#x7684;&#x4e71;&#x5e8f;&#x95ee;&#x9898;">
<node CREATED="1427670760552" ID="ID_241185894" MODIFIED="1427670852360" TEXT="&#x4e00;&#x4e2a;hash&#x503c;&#x4ee3;&#x8868;&#x4e86;&#x4e00;&#x6761;&#x6d41;&#xff0c;&#x5b83;&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;rps_dev_flow&#x7ed3;&#x6784;&#xff0c;&#x4e5f;&#x5bf9;&#x5e94;&#x4e86;rps_sock_flow_table-&gt;ents[x]&#x4e2d;&#x7684;&#x4e00;&#x9879;"/>
<node CREATED="1427670619237" ID="ID_649481786" MODIFIED="1427670700851" TEXT="&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;rps_dev_flow&#x5e94;&#x4e0e;rps_sock_flow_table&#x4e2d;&#x76f8;&#x540c;&#x7684;&#x6d41;&#x4fdd;&#x6301;&#x540c;&#x6b65;&#xff0c;&#x5373;&#x6709;&#x76f8;&#x540c;&#x7684;&#x76ee;&#x7684;CPU"/>
<node CREATED="1427670713811" ID="ID_1283752265" MODIFIED="1427671153482" TEXT="&#x82e5;rps_dev_flow&#x4e2d;&#x7684;&#x76ee;&#x7684;CPU&#x4e0e;rps_sock_flow_table&#x4e2d;&#x5bf9;&#x5e94;&#x6d41;&#x7684;&#x76ee;&#x7684;CPU&#x4e0d;&#x4e00;&#x81f4;&#xff0c;&#x4e14;&#x6b64;&#x6d41;&#x8fd8;&#x6709;&#x5305;queue&#x5728;&#x8001;&#x7684;CPU&#x4e0a;(old_cpu -&gt; input_queue_head &lt; rps_dev_flow -&gt; last_qtail)&#xff0c;&#x5219;&#x6b64;&#x65f6;&#x8fd8;&#x4e0d;&#x80fd;&#x5207;&#x6362;CPU&#xff0c;&#x9700;&#x7b49;&#x5230;&#x8001;&#x7684;CPU&#x5904;&#x7406;&#x5b8c;&#x6b64;&#x6d41;&#x7684;&#x6240;&#x6709;&#x5305;&#x624d;&#x80fd;&#x5207;&#x6362;CPU&#x3002;"/>
<node CREATED="1427670713811" ID="ID_1197393062" MODIFIED="1427671284872" TEXT="&#x82e5;rps_dev_flow&#x4e2d;&#x7684;&#x76ee;&#x7684;CPU&#x4e0e;rps_sock_flow_table&#x4e2d;&#x5bf9;&#x5e94;&#x6d41;&#x7684;&#x76ee;&#x7684;CPU&#x4e0d;&#x4e00;&#x81f4;&#xff0c;&#x4e14;&#x6b64;&#x6d41;&#x6ca1;&#x6709;&#x5305;queue&#x5728;&#x8001;&#x7684;CPU&#x4e0a;(old_cpu -&gt; input_queue_head &gt; rps_dev_flow -&gt; last_qtail)&#xff0c;&#x5219;&#x6b64;&#x65f6;&#x53ef;&#x4ee5;&#x7acb;&#x5373;&#x5207;&#x6362;CPU&#xff0c;&#x540c;&#x65f6;&#x5c06;&#x6d41;&#x5bf9;&#x5e94;&#x7684;rps_dev_flow&#x4e2d;&#x7684;&#x76ee;&#x7684;CPU&#x66f4;&#x65b0;&#x4e3a;rps_sock_flow_table&#x4e2d;&#x5bf9;&#x5e94;&#x6d41;&#x7684;&#x76ee;&#x7684;CPU&#x3002;">
<node CREATED="1427671172960" ID="ID_730100360" MODIFIED="1427671175420" TEXT="set_rps_cpu"/>
</node>
</node>
</node>
<node CREATED="1427446293771" ID="ID_1668605246" MODIFIED="1427446309107">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_RPS_2.JPG" />
  </body>
</html></richcontent>
<node CREATED="1427446326343" ID="ID_1579242600" MODIFIED="1427446434632" TEXT="&#x6bcf;&#x653e;&#x4e00;&#x4e2a;&#x5305;&#x8fdb;back_log queue&#x5219;&#x9012;&#x589e;input_queue_tail"/>
<node CREATED="1427446326343" ID="ID_1261818599" MODIFIED="1427446424114" TEXT="&#x4ece;back_log queue&#x6bcf;&#x53d6;&#x4e00;&#x4e2a;&#x5305;&#x8fdb;&#x5219;&#x9012;&#x589e;input_queue_head"/>
<node CREATED="1427446445698" ID="ID_464233524" MODIFIED="1427446500730" TEXT="&#x56e0;&#x6b64;input_queue_tail - input_queue_head&#x5c31;&#x662f;back_log queue&#x4e2d;&#x672a;&#x5904;&#x7406;&#x5305;&#x7684;&#x6570;&#x91cf;"/>
</node>
</node>
<node CREATED="1426484226790" FOLDED="true" ID="ID_1248917242" MODIFIED="1429312019089" TEXT="API">
<node CREATED="1427671364783" ID="ID_1927261757" MODIFIED="1427671699689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#21487;&#20197;&#36890;&#36807;&#25991;&#20214;/sys/class/net/&lt;dev&gt;/queues/rx-&lt;n&gt;/rps_cpus
    </p>
    <pre>&#26469;&#35774;&#32622;dev -&gt; _rx [x] .rps_map.cpus [x]</pre>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426485402499" ID="ID_1673483949" MODIFIED="1426485406459" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1426485408848" FOLDED="true" ID="ID_1939169396" MODIFIED="1427674305636" TEXT="dev-&gt;napi-&gt;poll()">
<node CREATED="1426485420347" ID="ID_1557073060" MODIFIED="1426485430474" TEXT="netif_receive_skb()">
<node CREATED="1426657639922" ID="ID_921914929" MODIFIED="1426657665884" TEXT="&#x68c0;&#x67e5;&#x5168;&#x5c40;&#x53d8;&#x91cf;rps_needed&#x786e;&#x5b9a;&#x8981;&#x4e0d;&#x8981;&#x8fdb;&#x884c;RPS"/>
<node CREATED="1426485432264" ID="ID_1582433481" MODIFIED="1426485475123">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      get_rps_cpu()
    </p>
    <p>
      &#30830;&#23450;&#24403;&#21069;&#21253;&#24212;&#35813;&#34987;&#36865;&#21040;&#21738;&#20010;CPU
    </p>
  </body>
</html></richcontent>
<node CREATED="1426486123928" ID="ID_1765459222" MODIFIED="1426486233275" TEXT="&#x9996;&#x5148;&#x786e;&#x5b9a;skb&#x5c5e;&#x4e8e;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x7684;&#x54ea;&#x4e2a;&#x63a5;&#x6536;&#x961f;&#x5217;struct netdev_rx_queue">
<node CREATED="1426486235074" ID="ID_1425791839" MODIFIED="1426657776182">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;skb-&gt;queue_mapping&#19981;&#20026;0&#21017;&#30001;&#23427;&#30830;&#23450;(&#21363;&#29992;&#23427;&#32034;&#24341;&#25968;&#32452;dev-&gt;_rx)&#65292;
    </p>
    <p>
      &#22914;&#26524;&#20026;0&#65292;&#21017;&#21462;dev-&gt;_rx&#25968;&#32452;&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426657938483" ID="ID_1509551156" MODIFIED="1427672034600">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20915;&#23450;&#24403;&#21069;&#21253;&#34987;&#21738;&#20010;CPU&#22788;&#29702;&#65292;&#23454;&#38469;&#19978;&#26377;3&#20010;&#20915;&#31574;&#28857;&#65306;
    </p>
    <p>
      1&#65292;&#26681;&#25454;rps_sock_flow_table&#20915;&#31574;
    </p>
    <p>
      2&#65292;&#26681;&#25454;rps_flow_table&#20915;&#31574;
    </p>
    <p>
      3&#65292;&#26681;&#25454;rps_map&#20915;&#31574;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427671911090" ID="ID_373701750" MODIFIED="1427672110125" TEXT="&#x5982;&#x679c;&#x7528;rps_sock_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;&#x76ee;&#x7684;CPU&#x4e0e;&#x7528;rps_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;&#x76ee;&#x7684;CPU&#x76f8;&#x540c;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x8fd9;&#x4e2a;&#x7ed3;&#x679c;"/>
<node CREATED="1427671911090" ID="ID_1943081830" MODIFIED="1427672215716" TEXT="&#x5982;&#x679c;&#x7528;rps_sock_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;&#x76ee;&#x7684;CPU&#x4e0e;&#x7528;rps_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;&#x76ee;&#x7684;CPU&#x4e0d;&#x540c;&#xff0c;&#x6b64;&#x65f6;&#x8868;&#x660e;&#x6d41;&#x9700;&#x8981;&#x5207;&#x6362;CPU&#xff0c;&#x56e0;&#x6b64;&#x8981;&#x770b;&#x6d41;&#x8fd8;&#x6709;&#x6ca1;&#x6709;&#x5305;queue&#x5728;&#x7528;rps_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;CPU&#x4e0a;">
<node CREATED="1427672234481" ID="ID_307828908" MODIFIED="1427672600551" TEXT="&#x5982;&#x679c;&#x6d41;&#x8fd8;&#x6709;&#x5305;queue&#x5728;&#x7528;rps_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;CPU&#x4e0a;(old_cpu -&gt; input_queue_head &lt; rps_dev_flow -&gt; last_qtail)&#xff0c;&#x8868;&#x660e;&#x6d41;&#x8fd8;&#x6709;&#x5305;queue&#x5728;&#x8001;&#x7684;CPU&#x4e0a;&#xff0c;&#x6b64;&#x65f6;&#x8fd8;&#x4e0d;&#x80fd;&#x5207;&#x6362;CPU&#xff0c;&#x6240;&#x4ee5;&#x91c7;&#x7528;rps_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;CPU&#x4f5c;&#x4e3a;&#x6700;&#x7ec8;&#x76ee;&#x7684;CPU&#x3002;"/>
<node CREATED="1427672234481" ID="ID_591249463" MODIFIED="1427672611706" TEXT="&#x5982;&#x679c;&#x6d41;&#x6ca1;&#x6709;&#x5305;queue&#x5728;&#x7528;rps_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;CPU&#x4e0a;(old_cpu -&gt; input_queue_head &gt; rps_dev_flow -&gt; last_qtail)&#xff0c;&#x5219;&#x6b64;&#x65f6;&#x53ef;&#x4ee5;&#x7acb;&#x5373;&#x5207;&#x6362;CPU&#xff0c;&#x6240;&#x4ee5;&#x91c7;&#x7528;rps_sock_flow_table&#x8868;&#x51b3;&#x7b56;&#x5f97;&#x5230;&#x7684;CPU&#x4f5c;&#x4e3a;&#x6700;&#x7ec8;&#x76ee;&#x7684;CPU&#x3002;">
<node CREATED="1427672410267" ID="ID_573061659" MODIFIED="1427672480574">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21516;&#26102;&#36824;&#35201;&#26356;&#26032;rps_flow_table&#34920;&#20013;&#23545;&#24212;&#27969;&#30340;CPU&#20026;rps_sock_flow_table&#34920;&#24471;&#21040;&#30340;CPU
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1426660300615" ID="ID_267583470" MODIFIED="1427672505351">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#29992;rps_sock_flow_table&#34920;&#21644;rps_flow_table&#34920;&#37117;&#24471;&#19981;&#21040;&#21512;&#27861;&#30340;CPU&#65292;
    </p>
    <p>
      &#21017;&#29992;skb-&gt;rxhash&#32034;&#24341;struct netdev_rx_queue *rxqueue-&gt;rps_map-&gt;cpus&#34920;&#65292;&#33509;&#24471;&#21040;&#30340;CPU&#19981;&#20026;&#31354;&#65292;&#19988;online&#21017;&#20351;&#29992;&#23427;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1426660855648" ID="ID_1158036318" MODIFIED="1426660979184" TEXT="&#x5bf9;&#x4e8e;&#x7528;rps_sock_flow_table&#x548c;rps_flow_table&#x51b3;&#x5b9a;&#x7684;CPU&#x800c;&#x8a00;&#xff0c;&#x5305;&#x5b9e;&#x9645;&#x4e0a;&#x88ab;&#x5bf9;&#x5e94;&#x5230;&#x4e00;&#x6761;&#x6d41;&#xff0c;&#x5373;&#x7528;struct rps_dev_flow&#x8868;&#x793a;&#x7684;&#x6d41;&#xff0c;&#x4e00;&#x4e2a;skb-&gt;rxhash&#x503c;&#x5bf9;&#x5e94;&#x4e00;&#x6761;&#x6d41;"/>
<node CREATED="1426661065052" ID="ID_922189975" MODIFIED="1426661095267" TEXT="&#x5c06;&#x5305;&#x653e;&#x5165;&#x4e0a;&#x9762;&#x6240;&#x83b7;&#x5f97;&#x7684;CPU&#x7684;backlog&#x961f;&#x5217;">
<node CREATED="1426661096650" ID="ID_1190129371" MODIFIED="1426661100355" TEXT="enqueue_to_backlog()">
<node CREATED="1426661472046" ID="ID_1455006319" MODIFIED="1426661552922" TEXT="&#x5982;&#x679c;&#x76ee;&#x7684;CPU&#x7684;backlog queue&#x7684;&#x957f;&#x5ea6;&#x5c0f;&#x4e8e;netdev_max_backlog&#xff0c;&#x4e14;flow limit&#x6ca1;&#x6709;&#x9650;&#x5236;&#x5f53;&#x524d;&#x5305;&#x5165;&#x961f;&#x5217;&#xff0c;&#x5219;&#x5c06;&#x5305;&#x653e;&#x5165;&#x76ee;&#x7684;CPU&#x7684;backlog queue">
<node CREATED="1426661838195" ID="ID_1477190651" MODIFIED="1426661868127" TEXT="&#x5c06;&#x5305;&#x653e;&#x5165;&#x76ee;&#x7684;CPU&#x7684;backlog&#x961f;&#x5217;&#x7684;&#x5c3e;&#x90e8;">
<node CREATED="1426661870272" ID="ID_1321490551" MODIFIED="1426661872690" TEXT="__skb_queue_tail(&amp;sd-&gt;input_pkt_queue, skb)"/>
</node>
<node CREATED="1426661912764" ID="ID_1721264921" MODIFIED="1427672689947" TEXT="&#x9012;&#x589e;struct softnet_data *sd-&gt;input_queue_tail&#xff0c;&#x540c;&#x65f6;&#x5c06;&#x6b64;&#x5e8f;&#x5217;&#x53f7;&#x8bb0;&#x5f55;&#x5728;&#x5305;&#x6240;&#x5728;&#x6d41;struct rps_dev_flow *rflow-&gt;qtail"/>
<node CREATED="1426662063797" ID="ID_167938869" MODIFIED="1426662180377" TEXT="&#x5982;&#x679c;&#x5728;&#x52a0;&#x5165;&#x6b64;&#x5305;&#x524d;&#xff0c;&#x76ee;&#x7684;CPU&#x7684;backlog&#x961f;&#x5217;&#x4e3a;&#x7a7a;&#xff0c;&#x5219;&#x8868;&#x793a;&#x76ee;&#x7684;CPU&#x8fd8;&#x6ca1;&#x6709;&#x51c6;&#x5907;&#x8c03;&#x5ea6;&#x5b83;&#x7684;backlog napi&#xff0c;&#x6240;&#x4ee5;&#x52a0;&#x5165;&#x5f53;&#x524d;&#x5305;&#x540e;&#x9700;&#x8981;&#x8c03;&#x5ea6;&#x76ee;&#x7684;CPU&#x7684;backlog napi">
<node CREATED="1426662200766" ID="ID_59282814" MODIFIED="1427673699044" TEXT="&#x5982;&#x679c;&#x76ee;&#x7684;CPU&#x5c31;&#x662f;&#x5f53;&#x524d;CPU&#xff0c;&#x90a3;&#x4e48;&#x76f4;&#x63a5;&#x8c03;&#x7528;____napi_schedule(sd, &amp;sd-&gt;backlog)"/>
<node CREATED="1427673710114" ID="ID_685360879" MODIFIED="1427673955670">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#30446;&#30340;CPU&#19981;&#26159;&#24403;&#21069;CPU&#65292;&#37027;&#20040;&#23558;&#30446;&#30340;CPU&#30340;struct softnet_data&#32467;&#26500;&#25918;&#20837;&#24403;&#21069;CPU&#30340;struct softnet_data -&gt; rps_ipi_list&#20013;&#65292;&#28982;&#21518;&#35302;&#21457;&#24403;&#21069;CPU&#30340;NET_RX_SOFTIRQ&#36719;&#20013;&#26029;&#65292;&#36827;&#32780;&#24403;&#21069;CPU&#30340;process_backlog&#20989;&#25968;&#34987;&#35843;&#29992;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427673968362" ID="ID_979927436" MODIFIED="1427673971412" TEXT="process_backlog()">
<node CREATED="1427673982599" ID="ID_612578376" MODIFIED="1427673984555" TEXT="net_rps_action_and_irq_enable()">
<node CREATED="1427674153935" ID="ID_1291084208" MODIFIED="1427674205503" TEXT="&#x8fd9;&#x91cc;&#x6700;&#x7ec8;&#x4f1a;&#x5411;&#x76ee;&#x7684;CPU&#x53d1;&#x4e00;&#x4e2a;IPI&#x4e2d;&#x65ad;&#xff0c;&#x5bfc;&#x81f4;&#x76ee;&#x7684;CPU&#x6267;&#x884c;rps_trigger_softirq()&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x8c03;&#x7528;____napi_schedule(sd, &amp;sd-&gt;backlog)"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1426661472046" ID="ID_1116281690" MODIFIED="1426661643064" TEXT="&#x5982;&#x679c;&#x76ee;&#x7684;CPU&#x7684;backlog queue&#x7684;&#x957f;&#x5ea6;&#x5927;&#x4e8e;netdev_max_backlog&#xff0c;&#x6216;&#x8005;flow limit&#x9650;&#x5236;&#x5f53;&#x524d;&#x5305;&#x5165;&#x961f;&#x5217;&#xff0c;&#x5219;&#x4e22;&#x5f03;&#x5f53;&#x524d;&#x5305;"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1427674283143" FOLDED="true" ID="ID_1472245614" MODIFIED="1427674707897" TEXT="process_backlog()">
<node CREATED="1427673982599" ID="ID_504451711" MODIFIED="1427674344168">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      net_rps_action_and_irq_enable()
    </p>
    <p>
      &#26816;&#26597;&#26159;&#21542;&#38656;&#35201;&#21521;&#21035;&#30340;CPU&#21457;&#36865;IPI&#20013;&#26029;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427674153935" ID="ID_1516316760" MODIFIED="1427674205503" TEXT="&#x8fd9;&#x91cc;&#x6700;&#x7ec8;&#x4f1a;&#x5411;&#x76ee;&#x7684;CPU&#x53d1;&#x4e00;&#x4e2a;IPI&#x4e2d;&#x65ad;&#xff0c;&#x5bfc;&#x81f4;&#x76ee;&#x7684;CPU&#x6267;&#x884c;rps_trigger_softirq()&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x8c03;&#x7528;____napi_schedule(sd, &amp;sd-&gt;backlog)"/>
</node>
<node CREATED="1427674637167" ID="ID_1272367817" MODIFIED="1427674683979" TEXT="&#x6ce8;&#x610f;&#x8fd9;&#x91cc;&#x5904;&#x7406;&#x5305;&#x662f;&#x5148;&#x5c06;sd-&gt;input_pkt_queue&#x961f;&#x5217;&#x4e2d;&#x7684;&#x5305;&#x79fb;&#x5230;sd-&gt;process_queue&#x518d;&#x5904;&#x7406;&#x7684;"/>
<node CREATED="1427674702539" ID="ID_1673925465" MODIFIED="1427674703711" TEXT="__netif_receive_skb(skb)"/>
</node>
</node>
</node>
<node CREATED="1427676025128" FOLDED="true" ID="ID_1103834089" MODIFIED="1429312012003" TEXT="RPS Flow Limit">
<node CREATED="1427676045794" ID="ID_1653634891" MODIFIED="1427676154499" TEXT="&#x5982;&#x679c;&#x6709;&#x591a;&#x6761;&#x6d41;&#x8fdb;&#x5165;&#x540c;&#x4e00;&#x4e2a;CPU&#xff0c;&#x800c;&#x8fd9;&#x4e9b;&#x6d41;&#x4e2d;&#x6709;&#x5927;&#x6d41;&#x91cf;&#x7684;&#x6d41;&#xff0c;&#x4e5f;&#x6709;&#x5c0f;&#x6d41;&#x91cf;&#x7684;&#x6d41;&#xff0c;&#x8fd9;&#x6837;&#x5927;&#x6d41;&#x91cf;&#x7684;&#x6d41;&#x5c31;&#x4f1a;&#x8fc7;&#x591a;&#x7684;&#x5360;&#x7528;CPU&#xff0c;&#x5bfc;&#x81f4;&#x5c0f;&#x6d41;&#x91cf;&#x7684;&#x6d41;&#x4e22;&#x5305;&#x4e25;&#x91cd;&#x3002;"/>
<node CREATED="1427676156170" ID="ID_1590501604" MODIFIED="1427676219771" TEXT="&#x89e3;&#x51b3;&#x529e;&#x6cd5;&#x662f;&#x4e22;&#x6389;&#x5927;&#x6d41;&#x91cf;&#x6d41;&#x4e2d;&#x7684;&#x4e00;&#x90e8;&#x5206;&#x5305;&#xff0c;&#x4ee5;&#x4fdd;&#x8bc1;&#x5c0f;&#x6d41;&#x91cf;&#x6d41;&#x7684;&#x901a;&#x8fc7;"/>
<node CREATED="1427676234853" ID="ID_1089435199" MODIFIED="1427676265421" TEXT="&#x901a;&#x8fc7;&#x8bbe;&#x7f6e;/proc/sys/net/core/flow_limit_cpu_bitmap&#x5f00;&#x542f;&#x5404;&#x4e2a;CPU&#x7684;RPS Flow Limit&#x529f;&#x80fd;"/>
<node CREATED="1427676309099" ID="ID_1188102100" MODIFIED="1427676322676" TEXT="&#x901a;&#x8fc7;&#x8bbe;&#x7f6e;net.core.flow_limit_table_len&#x6765;&#x6307;&#x5b9a;hash&#x7a7a;&#x95f4;"/>
</node>
<node CREATED="1427434297805" FOLDED="true" ID="ID_620856173" MODIFIED="1429312024237" TEXT="RFS">
<node CREATED="1427676398971" ID="ID_1248024669" MODIFIED="1427676404504" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1427676478296" ID="ID_156214065" MODIFIED="1427676563322" TEXT="RFS&#x7684;&#x57fa;&#x672c;&#x539f;&#x7406;&#x662f;&#x8ba9;&#x4e00;&#x6761;&#x6d41;&#x5728;&#x5185;&#x6838;&#x7a7a;&#x95f4;&#x548c;&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x90fd;&#x88ab;&#x540c;&#x4e00;&#x4e2a;CPU&#x5904;&#x7406;&#xff0c;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x63d0;&#x9ad8;cache&#x7684;&#x547d;&#x4e2d;&#x7387;&#xff0c;&#x4ece;&#x800c;&#x63d0;&#x9ad8;&#x5904;&#x7406;&#x6548;&#x7387;"/>
</node>
<node CREATED="1427434306158" ID="ID_1574391085" MODIFIED="1427434312620" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
<node CREATED="1427440543129" ID="ID_303603761" MODIFIED="1427676856016" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1427440548887" ID="ID_1918020640" MODIFIED="1427440609888">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/offload_RFS_1.JPG" />
  </body>
</html></richcontent>
<node CREATED="1427440680673" ID="ID_874381118" MODIFIED="1427440888367">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      tcp_v4_do_rcv()
    </p>
    <p>
      tcp_v6_do_rcv()
    </p>
    <p>
      __udp_queue_rcv_skb()
    </p>
    <p>
      __udpv6_queue_rcv_skb()
    </p>
    <p>
      &#36825;&#20960;&#20010;&#20989;&#25968;&#21482;&#26159;&#23558;&#21253;&#25918;&#20837;socket&#30340;queue&#37324;&#65292;&#24182;&#27809;&#26377;&#23558;&#21253;&#36865;&#21040;&#29992;&#25143;&#23618;&#65292;&#25152;&#20197;&#27492;&#26102;&#21482;&#33021;&#35760;&#24405;&#21253;&#30340;hash&#20540;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427440680673" ID="ID_655332810" MODIFIED="1427441149387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      inet_accept()
    </p>
    <p>
      inet_sendmsg()
    </p>
    <p>
      inet_recvmsg()
    </p>
    <p>
      tcp_poll()
    </p>
    <p>
      udp_poll()
    </p>
    <p>
      &#36825;&#20960;&#20010;&#20989;&#25968;&#23558;&#21253;&#36865;&#21040;&#29992;&#25143;&#23618;&#65292;&#27492;&#26102;&#30693;&#36947;&#20102;application&#25152;&#22312;&#30340;CPU&#65292;&#25152;&#20197;&#21487;&#20197;&#25351;&#23450;CPU map&#20102;&#12290;
    </p>
    <p>
      &#27880;&#24847;application&#21487;&#33021;&#35843;&#24230;&#21040;&#19981;&#21516;&#30340;CPU&#65292;&#25152;&#20197;&#38656;&#35201;&#27599;&#27425;&#25910;&#21253;&#26102;&#35774;&#32622;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1427441167272" ID="ID_1764960161" MODIFIED="1427441171621" TEXT="&#x95ee;&#x9898;">
<node CREATED="1427441172878" ID="ID_717915103" MODIFIED="1427441231241" TEXT="application&#x5728;&#x4e0d;&#x540c;CPU&#x95f4;&#x7684;&#x8c03;&#x5ea6;&#x4f1a;&#x4e0d;&#x4f1a;&#x5f15;&#x53d1;RFS&#x7684;&#x6296;&#x52a8;&#xff1f;">
<node CREATED="1427441257236" ID="ID_1557762607" MODIFIED="1427441272924" TEXT="application&#x5728;CPU n"/>
<node CREATED="1427441244319" ID="ID_708876104" MODIFIED="1427441303820" TEXT="&#x6240;&#x6709;&#x6d41;&#x901a;&#x8fc7;RFS&#x96c6;&#x4e2d;&#x5230;CPU n&#x4e0a;"/>
<node CREATED="1427441304850" ID="ID_1561863142" MODIFIED="1427441313167" TEXT="CPU n&#x5fd9;"/>
<node CREATED="1427441257236" ID="ID_1676478398" MODIFIED="1427441337672" TEXT="application&#x8c03;&#x5ea6;&#x5230;CPU m"/>
<node CREATED="1427441244319" ID="ID_307159914" MODIFIED="1427441345265" TEXT="&#x6240;&#x6709;&#x6d41;&#x901a;&#x8fc7;RFS&#x96c6;&#x4e2d;&#x5230;CPU m&#x4e0a;"/>
</node>
</node>
</node>
<node CREATED="1427677128987" FOLDED="true" ID="ID_1059301466" MODIFIED="1429313893552" TEXT="Accelerated RFS">
<node CREATED="1427677136308" ID="ID_979737413" MODIFIED="1427677140950" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1427677142009" ID="ID_1418199634" MODIFIED="1427677307190" TEXT="&#x867d;&#x7136;RSS&#x548c;RPS&#x90fd;&#x80fd;&#x63d0;&#x9ad8;&#x5904;&#x7406;&#x6548;&#x7387;&#xff0c;&#x4f46;&#x662f;&#x5982;&#x679c;RSS&#x628a;&#x5305;&#x9001;&#x5230;CPU A&#xff0c;&#x800c;RPS&#x628a;&#x540c;&#x6837;&#x7684;&#x5305;&#x8c03;&#x5ea6;&#x5230;CPU B&#xff0c;&#x90a3;&#x4e48;&#x5904;&#x7406;&#x6548;&#x7387;&#x53cd;&#x800c;&#x4f1a;&#x964d;&#x4f4e;&#xff0c;&#x56e0;&#x6b64;&#x6709;&#x5fc5;&#x8981;&#x7ed3;&#x5408;RSS&#x548c;RPS&#xff0c;&#x8ba9;&#x4ed6;&#x4eec;&#x90fd;&#x628a;&#x5305;&#x8c03;&#x5ea6;&#x5230;&#x540c;&#x4e00;&#x4e2a;CPU&#x3002;"/>
<node CREATED="1427677443769" ID="ID_183081622" MODIFIED="1427677819921" TEXT="&#x57fa;&#x672c;&#x7684;&#x601d;&#x60f3;&#x662f;&#xff1a;RPS&#x5728;&#x786e;&#x5b9a;&#x6d41;&#x5e94;&#x8be5;&#x88ab;&#x8c03;&#x5ea6;&#x54ea;&#x4e2a;CPU&#x5904;&#x7406;&#x540e;&#xff0c;&#x6307;&#x5bfc;RSS&#x914d;&#x7f6e;&#x786c;&#x4ef6;&#xff0c;&#x8ba9;&#x8fd9;&#x4e2a;&#x6d41;&#x4ece;&#x786c;&#x4ef6;&#x4e0a;&#x8fdb;&#x5165;&#x67d0;&#x4e2a;&#x63a5;&#x6536;&#x961f;&#x5217;&#x3002;&#x4e00;&#x4e2a;&#x63a5;&#x6536;&#x961f;&#x5217;&#x7ed1;&#x5b9a;&#x4e86;&#x4e00;&#x4e2a;&#x786c;&#x4e2d;&#x65ad;&#xff0c;&#x800c;&#x4e00;&#x4e2a;&#x786c;&#x4e2d;&#x65ad;&#x901a;&#x8fc7;&#x6307;&#x5b9a;affinity&#x5c31;&#x53ef;&#x4ee5;&#x7ed1;&#x5b9a;&#x4e00;&#x4e2a;CPU&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x53ef;&#x4ee5;&#x8ba9;&#x6d41;&#x4ece;&#x786c;&#x4ef6;&#x6536;&#x4e0a;&#x6765;&#x65f6;&#x5c31;&#x8fdb;&#x5165;&#x6307;&#x5b9a;&#x7684;CPU&#x3002;"/>
</node>
<node CREATED="1427677832300" ID="ID_1527030444" MODIFIED="1427677834748" TEXT="API">
<node CREATED="1427678973155" ID="ID_1239384344" MODIFIED="1427679027973">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ethtool -K eth0 ntuple on|off
    </p>
    <p>
      &#27492;&#21629;&#20196;&#29992;&#20110;&#24320;&#20851;Accelerated RFS&#21151;&#33021;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1427677835208" ID="ID_964301831" MODIFIED="1427677837425" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1427677860130" ID="ID_1615906883" MODIFIED="1427678015124">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#24212;&#25552;&#20379;ndo_rx_flow_steer&#20989;&#25968;&#65292;&#21363;dev -&gt; netdev_ops-&gt; ndo_rx_flow_steer()&#65292;&#20197;&#25351;&#23450;&#26576;&#26465;&#27969;&#20174;&#30828;&#20214;&#19978;&#36827;&#20837;&#26576;&#20010;&#25509;&#25910;&#38431;&#21015;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427678076641" ID="ID_783831691" MODIFIED="1427678363382" TEXT="RPS&#x5728;&#x51b3;&#x5b9a;&#x6d41;&#x5e94;&#x8be5;&#x8fdb;&#x5165;&#x54ea;&#x4e2a;CPU&#x540e;&#xff0c;&#x8c03;&#x7528;set_rps_cpu()&#x51fd;&#x6570;&#x66f4;&#x65b0;rps_dev_flow_table&#x8868;&#xff0c;&#x540c;&#x65f6;&#x914d;&#x7f6e;RSS&#x4e3a;&#x6d41;&#x6307;&#x5b9a;&#x63a5;&#x6536;&#x961f;&#x5217;">
<node CREATED="1427678386404" ID="ID_198850607" MODIFIED="1427678391986" TEXT="netif_receive_skb_internal()">
<node CREATED="1427678405541" ID="ID_1816963702" MODIFIED="1427678408105" TEXT="get_rps_cpu()">
<node CREATED="1427678425700" ID="ID_1535830842" MODIFIED="1427678427848" TEXT="set_rps_cpu()">
<node CREATED="1427678576175" ID="ID_147969012" MODIFIED="1427678579082" TEXT="dev-&gt;netdev_ops-&gt;ndo_rx_flow_steer()"/>
</node>
</node>
</node>
</node>
<node CREATED="1427678633682" ID="ID_1618073536" MODIFIED="1427678699399">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CPU&#19982;&#25509;&#25910;&#38431;&#21015;&#30340;&#26144;&#23556;&#20851;&#31995;&#65306;
    </p>
    <p>
      &#21363;&#30693;&#36947;&#20102;&#21253;&#30340;&#30446;&#30340;CPU&#65292;&#22914;&#20309;&#30693;&#36947;&#21253;&#30340;&#30446;&#30340;&#25509;&#25910;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427678705192" ID="ID_509496767" MODIFIED="1427678868971">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#19968;&#20010;&#25509;&#25910;&#38431;&#21015;&#23545;&#24212;&#20102;&#19968;&#20010;&#30828;&#20013;&#26029;&#65292;&#32780;&#19968;&#20010;&#30828;&#20013;&#26029;&#26377;&#19968;&#20010;affinity&#65292;&#20854;&#20013;&#25351;&#23450;&#20102;&#36825;&#20010;&#30828;&#20013;&#26029;&#24212;&#35813;&#34987;&#21738;&#20010;CPU&#22788;&#29702;
    </p>
    <p>
      &#36825;&#21487;&#20197;&#35748;&#20026;&#26159;&#19968;&#20010;&#65306;&#25509;&#25910;&#38431;&#21015;&#21040;&#30446;&#30340;CPU&#30340;&#26144;&#23556;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427678805992" ID="ID_372956708" MODIFIED="1427678904746" TEXT="&#x6240;&#x4ee5;&#x901a;&#x8fc7;&#x53cd;&#x5411;&#x67e5;&#x627e;&#x201c;&#x63a5;&#x6536;&#x961f;&#x5217;&#x5230;&#x76ee;&#x7684;CPU&#x7684;&#x6620;&#x5c04;&#x201d;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x6839;&#x636e;CPU&#x5f97;&#x5230;&#x63a5;&#x6536;&#x961f;&#x5217;"/>
<node CREATED="1427679290917" ID="ID_724203737" MODIFIED="1427679519117">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#20010;&#21453;&#21521;&#26597;&#25214;&#34920;&#35760;&#24405;&#22312;dev-&gt;rx_cpu_rmap&#20013;
    </p>
    <p>
      &#21363;dev-&gt;rx_cpu_rmap-&gt;near[cpu].index&#21363;&#21487;&#23558;CPU&#26144;&#23556;&#21040;&#25509;&#25910;&#38431;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1427679340690" FOLDED="true" ID="ID_1104724242" MODIFIED="1429311404055" TEXT="struct cpu_rmap">
<node CREATED="1427679355706" ID="ID_149478181" MODIFIED="1427679356280" TEXT="struct kref&#x9;refcount"/>
<node CREATED="1427679369839" ID="ID_436552779" MODIFIED="1427679377832" TEXT="u16 size, used"/>
<node CREATED="1427679387420" ID="ID_534366582" MODIFIED="1427679398664" TEXT="void **obj"/>
<node CREATED="1427679417275" ID="ID_154953083" MODIFIED="1427679423027" TEXT="near[0]">
<node CREATED="1427679424057" ID="ID_1883410084" MODIFIED="1427679429014" TEXT="u16 index"/>
<node CREATED="1427679437281" ID="ID_188479339" MODIFIED="1427679440572" TEXT="u16 dist"/>
</node>
</node>
<node CREATED="1427679602410" ID="ID_1090806115" MODIFIED="1427679700873">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27492;&#34920;&#30001;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#35843;&#29992;alloc_irq_cpu_rmap()&#20998;&#37197;&#65292;&#20134;&#30001;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;&#35843;&#29992;irq_cpu_rmap_add()&#26356;&#26032;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1427679820342" FOLDED="true" ID="ID_571112895" MODIFIED="1429314160324">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      XPS
    </p>
    <p>
      Transmit Packet Steering
    </p>
  </body>
</html></richcontent>
<node CREATED="1429311454733" ID="ID_55651273" MODIFIED="1429311464422" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1429311690297" ID="ID_24142913" MODIFIED="1429311780951">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#19968;&#20010;&#32593;&#32476;&#35774;&#22791;&#26377;&#22810;&#20010;&#21457;&#36865;&#38431;&#21015;&#26102;&#65292;&#34920;&#26126;&#20801;&#35768;&#22810;&#20010;CPU&#21516;&#26102;&#21521;&#27492;&#32593;&#32476;&#35774;&#22791;&#21457;&#21253;&#65292;&#20174;&#32780;&#25552;&#39640;&#24635;&#30340;throughput&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429311502897" ID="ID_786652876" MODIFIED="1429311568472" TEXT="&#x5f53;&#x7f51;&#x7edc;&#x8bbe;&#x5907;&#x6709;&#x591a;&#x4e2a;&#x53d1;&#x9001;&#x961f;&#x5217;&#x65f6;&#xff0c;XPS&#x7528;&#x4e8e;&#x53d1;&#x5305;&#x65f6;&#x4ece;&#x591a;&#x4e2a;&#x53d1;&#x9001;&#x961f;&#x5217;&#x4e2d;&#x9009;&#x62e9;&#x4e00;&#x4e2a;&#x53d1;&#x9001;&#x961f;&#x5217;"/>
<node CREATED="1429311841965" ID="ID_1576661701" MODIFIED="1429311986761" TEXT="&#x4e3a;&#x4e86;&#x9009;&#x62e9;&#x4e00;&#x4e2a;&#x53d1;&#x9001;&#x961f;&#x5217;&#xff0c;&#x5fc5;&#x987b;&#x8981;&#x6709;&#x4e00;&#x4e2a;cpu &#x5230; tx queue&#x7684;&#x6620;&#x5c04;&#x8868;&#x3002;&#x800c;&#x4e3a;&#x4e86;&#x907f;&#x514d;&#x9501;&#x548c;cache&#x5207;&#x6362;&#x7684;&#x5f00;&#x9500;&#xff0c;&#x5e94;&#x907f;&#x514d;&#x5c06;&#x591a;&#x4e2a;CPU&#x6620;&#x5c04;&#x5230;&#x540c;&#x4e00;&#x4e2a;tx queue&#x3002;"/>
</node>
<node CREATED="1429312111001" ID="ID_1167541067" MODIFIED="1429312113955" TEXT="API">
<node CREATED="1429312114836" ID="ID_1086880495" MODIFIED="1429312454305">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;
    </p>
    <pre>/sys/class/net/&lt;dev&gt;/queues/tx-&lt;n&gt;/xps_cpus</pre>
    <p>
      &#26469;&#24314;&#31435;tx queue&#21040;CPU&#30340;&#26144;&#23556;&#34920;&#65292;&#27492;&#34920;&#30340;&#36870;&#34920;&#21363;CPU&#21040;tx queue&#30340;&#26144;&#23556;&#34920;
    </p>
    <p>
      
    </p>
    <p>
      &#27880;&#24847;&#24212;&#36991;&#20813;&#23558;&#21516;&#19968;&#20010;tx queue&#26144;&#23556;&#21040;&#22810;&#20010;CPU&#65292;&#20294;&#21487;&#20197;&#23558;&#22810;&#20010;tx queue&#26144;&#23556;&#21040;&#21516;&#19968;&#20010;CPU
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1429312352811" ID="ID_305179038" MODIFIED="1429312357000" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1429312589717" ID="ID_1449168553" MODIFIED="1429312598007" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1429312603013" ID="ID_480169067" MODIFIED="1429312887726">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dev-&gt;xps_maps [ cpu ] -&gt;queues [ skb hash ]
    </p>
    <p>
      CPU&#21040;tx queue&#30340;&#26144;&#23556;&#34920;
    </p>
  </body>
</html></richcontent>
<node CREATED="1429312889701" ID="ID_1019410179" MODIFIED="1429312906054">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23427;&#26159;&#26681;&#25454;&#65306;/sys/class/net/&lt;dev&gt;/queues/tx-&lt;n&gt;/xps_cpus
    </p>
    <p>
      tx queue&#21040;CPU&#30340;&#26144;&#23556;&#34920; &#36870;&#21521;&#26500;&#36896;&#20986;&#26469;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429312910434" ID="ID_1286174669" MODIFIED="1429312928209" TEXT="cpu&#x662f;&#x6307;&#x53d1;&#x5305;&#x65f6;&#x7684;&#x5f53;&#x524d;CPU"/>
<node CREATED="1429312935332" ID="ID_1651941147" MODIFIED="1429313137530">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      skb hash
    </p>
    <p>
      &#22914;&#26524;&#21253;&#26159;&#26412;&#22320;socket&#21457;&#36865;&#30340;&#65292;&#21017;skb hash&#26159;&#21457;&#36865;&#23427;&#30340;socket&#25152;&#20851;&#32852;&#30340;hash&#20540;&#65306;skb-&gt;sk-&gt;sk_hash
    </p>
    <p>
      &#22914;&#26524;&#21253;&#26159;&#36716;&#21457;&#30340;&#65292;&#21017;skb hash&#26159;&#23427;&#30340;&#25509;&#25910;hash&#20540;&#65306;skb-&gt;rxhash
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1429313346169" ID="ID_239330627" MODIFIED="1429313354132" TEXT="dev_queue_xmit()">
<node CREATED="1429313335664" ID="ID_844804280" MODIFIED="1429313338876" TEXT="__dev_queue_xmit()">
<node CREATED="1429313318395" ID="ID_1365452807" MODIFIED="1429313320768" TEXT="netdev_pick_tx()">
<node CREATED="1429313269685" ID="ID_1931503761" MODIFIED="1429313272561" TEXT="__netdev_pick_tx()">
<node CREATED="1429313186002" ID="ID_919801567" MODIFIED="1429313237187">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      get_xps_queue()
    </p>
    <p>
      &#26597;&#25214;CPU&#21040;tx queue&#30340;&#26144;&#23556;&#34920;&#24471;&#21040;&#20986;&#21475;tx queue
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429313569391" ID="ID_623303774" MODIFIED="1429314147845">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sk_tx_queue_set(sk, new_index)
    </p>
    <p>
      &#22914;&#26524;&#21253;&#26159;&#26412;&#22320;socket&#21457;&#20986;&#30340;&#21253;&#65292;&#21017;&#23558;&#19978;&#38754;&#25152;&#36873;&#25321;&#30340;tx queue&#35760;&#24405;&#22312;skb-&gt;sk-&gt;sk_tx_queue_mapping
    </p>
    <p>
      &#21017;socket&#21457;&#20986;&#30340;&#21518;&#32493;&#21253;&#23601;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#36825;&#20010;tx queue&#65292;&#32780;&#19981;&#38656;&#35201;&#20877;&#26597;&#25214;CPU&#21040;tx queue&#30340;&#26144;&#23556;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1429318404027" ID="ID_874402495" MODIFIED="1429318406145" TEXT="encapsulation offload"/>
</node>
<node CREATED="1424938116432" FOLDED="true" ID="ID_319986730" MODIFIED="1443721911363" TEXT="edma">
<node CREATED="1429136674528" FOLDED="true" ID="ID_317136120" MODIFIED="1439532361470" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1429136699696" ID="ID_736081687" MODIFIED="1429136839860">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;network device&#35201;&#20570;4&#20214;&#22522;&#26412;&#30340;&#20107;&#65306;
    </p>
    <p>
      &#20026;&#25910;&#21253;&#20934;&#22791;&#25551;&#36848;&#31526;&#21644;&#32531;&#20914;&#21306;
    </p>
    <p>
      &#25910;&#21253;
    </p>
    <p>
      &#21457;&#21253;
    </p>
    <p>
      &#20026;&#21457;&#21253;&#22238;&#25910;&#25551;&#36848;&#31526;&#21644;&#32531;&#20914;&#21306;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425001701106" FOLDED="true" ID="ID_1783595948" MODIFIED="1439576242837" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1425024097896" ID="ID_467091625" MODIFIED="1429060036781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/edma_struct_2.png" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425001727770" FOLDED="true" ID="ID_203640428" MODIFIED="1439533035797" TEXT="struct net_device ">
<node CREATED="1425001769378" HGAP="24" ID="ID_725180959" MODIFIED="1425002063365" TEXT="netdev_priv(dev) " VSHIFT="6">
<node CREATED="1425001788541" HGAP="19" ID="ID_1867461470" MODIFIED="1425002066834" TEXT="struct edma_adapter " VSHIFT="7">
<node CREATED="1425001814704" HGAP="23" ID="ID_406738474" MODIFIED="1425024408919" VSHIFT="11">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct net_device *netdev[1]
    </p>
    <p>
      struct edma_adapter&#25152;&#20851;&#32852;&#30340;struct net_device
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425001984492" ID="ID_1473126441" MODIFIED="1425024443739">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct platform_device *pdev
    </p>
    <p>
      struct edma_adapter&#25152;&#20851;&#32852;&#30340;struct platform_device
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425001998883" FOLDED="true" ID="ID_1166832597" MODIFIED="1429060088172" TEXT="struct edma_common_info *c_info">
<node CREATED="1425023632360" ID="ID_1564966909" MODIFIED="1425024732021">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct edma_tx_desc_ring *tpd_ring[16]
    </p>
    <p>
      16&#20010;tx queue&#65292;&#27599;&#20010;queue&#26377;&#19968;&#20010;&#20013;&#26029;&#21495;&#65292;&#19968;&#20010;queue&#21363;&#26159;512&#20010;descriptor&#38142;&#25509;&#32780;&#25104;&#30340;&#29615;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425023565001" ID="ID_1414643403" MODIFIED="1425023666554" TEXT=" struct edma_tx_desc_ring">
<node CREATED="1425023565001" ID="ID_198822225" MODIFIED="1425023775997" TEXT=" u8 queue_index : queue&#x7684;&#x7f16;&#x53f7;&#xff0c;tx&#x662f;0-15, rx&#x662f;0-7"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u16 size"/>
<node CREATED="1425023565001" ID="ID_299987332" MODIFIED="1425023822974" TEXT=" u16 count : &#x6bcf;&#x4e2a;queue&#x5185;&#x6700;&#x591a;&#x6709;&#x591a;&#x5c11;&#x4e2a;descriptor&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;512&#x4e2a;"/>
<node CREATED="1425023565001" ID="ID_177915118" MODIFIED="1425081240127" TEXT=" void *hw_desc : hardware descriptor array"/>
<node CREATED="1425023565001" ID="ID_1780250806" MODIFIED="1425081504387" TEXT=" dma_addr_t dma  :  &#x5373;&#x4e0a;&#x9762;&#x7684;hw_desc&#x5bf9;&#x5e94;&#x7684;&#x7269;&#x7406;&#x5730;&#x5740;"/>
<node CREATED="1425023565001" ID="ID_1536716462" MODIFIED="1425081639763" TEXT=" u16 sw_next_to_fill  :  &#x5bf9;host&#x800c;&#x8a00;&#xff0c;&#x4e0b;&#x4e00;&#x4e2a;&#x9700;&#x8981;&#x88ab;&#x586b;&#x5145;&#x4e3a;RFD&#x7684;descriptor"/>
<node CREATED="1425023565001" ID="ID_550201056" MODIFIED="1425081727654" TEXT=" u16 sw_next_to_clean  :  &#x5bf9;host&#x800c;&#x8a00;&#xff0c;&#x4e0b;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x88ab;&#x6536;&#x53d6;&#x7684;descriptor&#xff0c;&#x8fd9;&#x610f;&#x5473;&#x7740;EDMA&#x5df2;&#x7ecf;&#x5411;&#x8fd9;&#x4e2a;descriptor&#x586b;&#x5145;&#x4e86;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5305;"/>
<node CREATED="1425023565001" ID="ID_319335665" MODIFIED="1425024985464">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct edma_sw_desc *sw_desc
    </p>
    <p>
      &#27599;&#20010;hardware descriptor&#23545;&#24212;&#20102;&#19968;&#20010;software descriptor
    </p>
  </body>
</html></richcontent>
<node CREATED="1425023565001" ID="ID_1085690054" MODIFIED="1425023565001" TEXT=" struct sk_buff *skb"/>
<node CREATED="1425023565001" ID="ID_333813143" MODIFIED="1425081806614" TEXT=" dma_addr_t dma  :  &#x771f;&#x6b63;&#x5b58;&#x653e;&#x6570;&#x636e;&#x5305;&#x7684;&#x7f13;&#x51b2;&#x533a;&#x5f00;&#x59cb;&#x4f4d;&#x7f6e;"/>
<node CREATED="1425023565001" ID="ID_588123271" MODIFIED="1425081828708" TEXT=" u16 length  :  &#x4e0a;&#x9762;&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5927;&#x5c0f;"/>
<node CREATED="1425023565001" ID="ID_6985053" MODIFIED="1425023565001" TEXT=" u32 flags"/>
</node>
</node>
</node>
<node CREATED="1425023565001" ID="ID_1902992427" MODIFIED="1425024782988">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct edma_rfd_desc_ring *rfd_ring[8]
    </p>
    <p>
      8&#20010;rx queue&#65292;rx queue&#19982;tx queue&#23436;&#20840;&#30456;&#21516;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425023565001" ID="ID_191277514" LINK="#ID_1414643403" MODIFIED="1425023714489" TEXT=" struct edma_rfd_desc_ring"/>
</node>
<node CREATED="1425023565001" ID="ID_226738155" MODIFIED="1425023565001" TEXT=" struct platform_device *pdev"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" struct net_device *netdev[2]"/>
<node CREATED="1425023565001" ID="ID_875513658" MODIFIED="1425023889466" TEXT=" int num_rx_queues : &#x63a5;&#x6536;&#x6709;8&#x4e2a;queue"/>
<node CREATED="1425023565001" ID="ID_1899126503" MODIFIED="1425023904130" TEXT=" int num_tx_queues : &#x53d1;&#x9001;&#x6709;16&#x4e2a;queue"/>
<node CREATED="1425023565001" ID="ID_1774243268" MODIFIED="1425023937825" TEXT=" int tx_irq[16] : &#x6bcf;&#x4e2a;tx queue&#x6240;&#x5bf9;&#x5e94;&#x7684;&#x4e2d;&#x65ad;&#x53f7;"/>
<node CREATED="1425023565001" ID="ID_324778111" MODIFIED="1425023945755" TEXT=" int rx_irq[8] : &#x6bcf;&#x4e2a;rx queue&#x6240;&#x5bf9;&#x5e94;&#x7684;&#x4e2d;&#x65ad;&#x53f7;"/>
<node CREATED="1425023565001" ID="ID_555283759" MODIFIED="1425024024091" TEXT=" u16 tx_ring_count : &#x4e3a;&#x6bcf;&#x4e2a;tx queue&#x5206;&#x914d;&#x591a;&#x5c11;&#x4e2a;descriptor"/>
<node CREATED="1425023565001" ID="ID_273531632" MODIFIED="1425024040515" TEXT=" u16 rx_ring_count : &#x4e3a;&#x6bcf;&#x4e2a;rx queue&#x5206;&#x914d;&#x591a;&#x5c11;&#x4e2a;descriptor"/>
<node CREATED="1425023565001" ID="ID_675787984" MODIFIED="1425023565001" TEXT=" u16 rx_head_buffer_len"/>
<node CREATED="1425023565001" ID="ID_1372666925" MODIFIED="1425023565001" TEXT=" u16 rx_page_buffer_len"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u16 jumbo_enabled"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" struct edma_hw hw">
<node CREATED="1425023565001" ID="ID_387212038" MODIFIED="1425024488669">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;unsigned long __iomem *hw_addr
    </p>
    <p>
      edma GMAC&#23492;&#23384;&#22120;&#22320;&#22336;&#31354;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_1943794634" MODIFIED="1425024525700">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct edma_adapter *adapter
    </p>
    <p>
      &#25152;&#20851;&#32852;&#30340;struct edma_adapter
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u32 rx_intr_mask"/>
<node CREATED="1425023565001" ID="ID_441238524" MODIFIED="1425023565001" TEXT=" u32 tx_intr_mask"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u32 misc_intr_mask"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u32 wol_intr_mask"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" bool intr_clear_type"/>
<node CREATED="1425023565001" ID="ID_1018690790" MODIFIED="1425023565001" TEXT=" bool intr_sw_idx_w"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u16 rx_head_buff_size"/>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" u8 rss_type"/>
</node>
<node CREATED="1425023565001" ID="ID_1938493088" MODIFIED="1429060051305" TEXT=" struct queue_per_cpu_info q_cinfo[EDMA_NR_CPU]">
<node CREATED="1425023565001" ID="ID_925573472" MODIFIED="1425026044368">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;struct napi_struct napi
    </p>
    <p>
      &#27599;&#20010;CPU&#26377;&#19968;&#20010;NAPI&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425026011062" ID="ID_1006349445" MODIFIED="1425026018789" TEXT=".poll  =  edma_poll"/>
</node>
<node CREATED="1425023565001" ID="ID_709706326" MODIFIED="1425027209204">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;u32 tx_mask
    </p>
    <p>
      &#26412;CPU&#36127;&#36131;&#21709;&#24212;&#30340;4&#20010;tx&#20013;&#26029;&#26500;&#25104;&#30340;&#25513;&#30721;&#65292;&#20998;&#21035;&#20026;0x000F, 0x00F0, 0x0F00, 0xF000
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_1625884564" MODIFIED="1425027324911">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;u32 rx_mask
    </p>
    <p>
      &#26412;CPU&#36127;&#36131;&#21709;&#24212;&#30340;2&#20010;rx&#20013;&#26029;&#26500;&#25104;&#30340;&#25513;&#30721;&#65292;&#20998;&#21035;&#20026;0x0003, 0x000C, 0x0030, 0x00C0
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_791800489" MODIFIED="1425027402027">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;u32 tx_status
    </p>
    <p>
      &#35760;&#24405;&#26412;CPU&#36127;&#36131;&#21709;&#24212;&#30340;4&#20010;tx&#20013;&#26029;&#20013;&#21738;&#20960;&#20010;&#35302;&#21457;&#20102;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_1731376081" MODIFIED="1425027417972">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;u32 rx_status
    </p>
    <p>
      &#35760;&#24405;&#26412;CPU&#36127;&#36131;&#21709;&#24212;&#30340;2&#20010;rx&#20013;&#26029;&#20013;&#21738;&#20960;&#20010;&#35302;&#21457;&#20102;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_1253084091" MODIFIED="1425027522725">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;u32 tx_start
    </p>
    <p>
      &#26412;CPU&#36127;&#36131;&#21709;&#24212;&#30340;4&#20010;tx&#20013;&#26029;&#30340;&#36215;&#22987;&#32534;&#21495;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_1775400134" MODIFIED="1425027516616">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;u32 rx_start
    </p>
    <p>
      &#26412;CPU&#36127;&#36131;&#21709;&#24212;&#30340;2&#20010;rx&#20013;&#26029;&#30340;&#36215;&#22987;&#32534;&#21495;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425023565001" ID="ID_820187419" LINK="#ID_1166832597" MODIFIED="1425060738550" TEXT=" struct edma_common_info *c_info"/>
</node>
<node CREATED="1425023565001" MODIFIED="1425023565001" TEXT=" spinlock_t int_lock"/>
</node>
<node CREATED="1425002009974" ID="ID_1141672548" MODIFIED="1425002010530" TEXT="struct edma_rfs_flow_table rfs"/>
<node CREATED="1425002020005" ID="ID_1743057094" MODIFIED="1425002020709" TEXT="set_rfs_filter_callback_t set_rfs_rule"/>
</node>
</node>
<node CREATED="1425025105289" ID="ID_1023220185" MODIFIED="1425025107720" TEXT="struct net_device_ops *netdev_ops">
<node CREATED="1425025127733" ID="ID_1394677165" MODIFIED="1425025143352" TEXT=".ndo_open  =  edma_open"/>
<node CREATED="1425025156701" ID="ID_584148477" MODIFIED="1425025170546" TEXT=".ndo_stop  =  edma_close"/>
<node CREATED="1425025183123" ID="ID_726027436" MODIFIED="1425025194225" TEXT=".ndo_start_xmit  =  edma_xmit"/>
<node CREATED="1425025205785" ID="ID_1523174845" MODIFIED="1425025214638" TEXT=".ndo_set_mac_address  =  edma_set_mac_addr"/>
<node CREATED="1425025228808" ID="ID_514504879" MODIFIED="1425025237355" TEXT=".ndo_rx_flow_steer  =  edma_rx_flow_steer"/>
<node CREATED="1425025255870" ID="ID_910964126" MODIFIED="1425025265956" TEXT=".ndo_register_rfs_filter  =  edma_register_rfs_filter"/>
</node>
<node CREATED="1425025347718" FOLDED="true" ID="ID_1643925256" MODIFIED="1425025596493" TEXT="hw_features">
<node CREATED="1425025387038" ID="ID_1807376837" MODIFIED="1425025586167" TEXT="NETIF_F_HW_CSUM | &#xa;NETIF_F_RXCSUM | &#xa;NETIF_F_HW_VLAN_CTAG_RX | &#xa;NETIF_F_SG | &#xa;NETIF_F_TSO | &#xa;NETIF_F_TSO6 |&#xa;NETIF_F_RXHASH | &#xa;NETIF_F_NTUPLE"/>
</node>
<node CREATED="1425025357408" FOLDED="true" ID="ID_275831566" MODIFIED="1425025597368" TEXT="features">
<node CREATED="1425025460201" ID="ID_97066646" MODIFIED="1425025556230" TEXT="NETIF_F_HW_CSUM | &#xa;NETIF_F_RXCSUM | &#xa;NETIF_F_HW_VLAN_CTAG_TX | &#xa;NETIF_F_HW_VLAN_CTAG_RX | &#xa;NETIF_F_SG | &#xa;NETIF_F_TSO | &#xa;NETIF_F_TSO6 |&#xa;NETIF_F_RXHASH | &#xa;NETIF_F_NTUPLE"/>
</node>
<node CREATED="1425025366529" FOLDED="true" ID="ID_1870826480" MODIFIED="1425025598055" TEXT="vlan_features">
<node CREATED="1425025518818" ID="ID_616280411" MODIFIED="1425025593016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NETIF_F_HW_CSUM |
    </p>
    <p>
      NETIF_F_SG |
    </p>
    <p>
      NETIF_F_TSO |
    </p>
    <p>
      NETIF_F_TSO6 |
    </p>
    <p>
      NETIF_F_RXHASH |
    </p>
    <p>
      NETIF_F_NTUPLE
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425025730608" ID="ID_1094405983" MODIFIED="1425025766273">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct cpu_rmap&#160;&#160;*rx_cpu_rmap
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425060876260" ID="ID_1414788195" MODIFIED="1439590534246" TEXT="&#x4e2d;&#x65ad;">
<node CREATED="1425061055881" ID="ID_759441416" MODIFIED="1429119403945">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/edma_struct_2.png" />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425061106655" FOLDED="true" ID="ID_354165706" MODIFIED="1439586965615" TEXT="&#x6bcf;&#x4e2a;CPU&#x8d1f;&#x8d23;&#x54cd;&#x5e94;4&#x4e2a;tx&#x4e2d;&#x65ad;&#x548c;2&#x4e2a;rx&#x4e2d;&#x65ad;&#xff0c;&#x56e0;&#x6b64;&#x6839;&#x636e;&#x4e2d;&#x65ad;&#x53f7;&#x5c31;&#x53ef;&#x4ee5;&#x5224;&#x65ad;&#x53d1;&#x751f;&#x7684;&#x4e2d;&#x65ad;&#x662f;tx&#x8fd8;&#x662f;rx&#xff0c;&#x4ee5;&#x53ca;&#x53d1;&#x751f;&#x5728;&#x54ea;&#x4e2a;queue&#x4e0a;">
<node CREATED="1425061958490" ID="ID_116639783" MODIFIED="1425062051038">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      request_irq(unsigned int irq, irq_handler_t handler, unsigned long flags, const char *name, void *dev)
    </p>
    <p>
      &#27880;&#24847;&#65306;&#27880;&#20876;&#20013;&#26029;&#26102;&#26368;&#21518;&#19968;&#20010;&#21442;&#25968;dev&#25351;&#21521;struct edma_common_info -&gt; q_cinfo [cpu]
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439573406457" ID="ID_33713163" MODIFIED="1439573419147" TEXT="tx interrupt&#x7684;&#x5904;&#x7406;">
<node CREATED="1439574014479" ID="ID_821014743" MODIFIED="1439574185186">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;cpu&#22788;&#29702;&#21738;&#20123;tx interrupt&#30001;&#19979;&#38754;&#30340;&#21464;&#37327;&#25351;&#23450;
    </p>
    <p>
      struct edma_common_info -&gt;cpu_info [cpu_idx] . tx_start
    </p>
    <p>
      &#23427;&#26159;struct edma_common_info -&gt;tx_irq [ x ]&#25968;&#32452;&#30340;&#32034;&#24341;&#20540;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439573422891" ID="ID_1077177325" MODIFIED="1439573641901" TEXT="cpu0&#x5904;&#x7406;tx_irq[ 8,   9, 10, 11]&#xff0c;&#x5373;105, 106, 107, 108&#x53f7;&#x4e2d;&#x65ad;"/>
<node CREATED="1439573422891" ID="ID_192629443" MODIFIED="1439573687356" TEXT="cpu1&#x5904;&#x7406;tx_irq[12,13,14, 15]&#xff0c;&#x5373;109, 110, 111, 112&#x53f7;&#x4e2d;&#x65ad;"/>
<node CREATED="1439573422891" ID="ID_1355832373" MODIFIED="1439573762179" TEXT="cpu2&#x5904;&#x7406;tx_irq[  0,   1,   2,   3]&#xff0c;&#x5373;97, 98, 99, 100&#x53f7;&#x4e2d;&#x65ad;"/>
<node CREATED="1439573422891" ID="ID_1848867382" MODIFIED="1439573824482" TEXT="cpu3&#x5904;&#x7406;tx_irq[   4,   5,   6,  7]&#xff0c;&#x5373;101, 102, 103, 104&#x53f7;&#x4e2d;&#x65ad;"/>
</node>
<node CREATED="1439573406457" ID="ID_398134479" MODIFIED="1439574475036" TEXT="rx interrupt&#x7684;&#x5904;&#x7406;">
<node CREATED="1439574014479" ID="ID_160352597" MODIFIED="1439574676123">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;cpu&#22788;&#29702;&#21738;&#20123;rx interrupt&#30001;&#19979;&#38754;&#30340;&#21464;&#37327;&#25351;&#23450;
    </p>
    <p>
      struct edma_common_info -&gt;cpu_info [cpu_idx] . rx_start
    </p>
    <p>
      &#23427;&#26159;struct edma_common_info -&gt;rx_irq [ x ]&#25968;&#32452;&#30340;&#32034;&#24341;&#20540;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439573422891" ID="ID_745497633" MODIFIED="1439574569308" TEXT="cpu0&#x5904;&#x7406;rx_irq[ 0, 1]&#xff0c;&#x5373;272, 273&#x53f7;&#x4e2d;&#x65ad;"/>
<node CREATED="1439573422891" ID="ID_1637714321" MODIFIED="1439574605109" TEXT="cpu1&#x5904;&#x7406;rx_irq[ 2, 3]&#xff0c;&#x5373;274, 275&#x53f7;&#x4e2d;&#x65ad;"/>
<node CREATED="1439573422891" ID="ID_796418188" MODIFIED="1439574630953" TEXT="cpu2&#x5904;&#x7406;tx_irq[ 4, 5]&#xff0c;&#x5373;276, 277&#x53f7;&#x4e2d;&#x65ad;"/>
<node CREATED="1439573422891" ID="ID_554819195" MODIFIED="1439574651546" TEXT="cpu3&#x5904;&#x7406;tx_irq[ 6,  7]&#xff0c;&#x5373;278, 279&#x53f7;&#x4e2d;&#x65ad;"/>
</node>
</node>
<node CREATED="1425061821590" FOLDED="true" ID="ID_779691527" MODIFIED="1439577598681" TEXT="edma_interrupt">
<node CREATED="1439576524829" ID="ID_821301959" MODIFIED="1439576613305">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20256;&#20837;&#21442;&#25968;dev&#26159;&#19968;&#20010;struct queue_per_cpu_info&#32467;&#26500;&#65292;&#23427;&#26159;request_irq&#26102;&#25351;&#23450;&#30340;&#21442;&#25968;&#65292;&#21363;&#20013;&#26029;&#25152;&#20851;&#32852;&#30340;cpu.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439576648333" ID="ID_1259416197" MODIFIED="1439577224057" TEXT="&#x8fdb;&#x5165;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x9996;&#x5148;&#x5c4f;&#x853d;&#x6b64;cpu&#x6240;&#x5173;&#x8054;&#x7684;2&#x4e2a;rx, 4&#x4e2a;tx&#x4e2d;&#x65ad;"/>
<node CREATED="1439577296167" ID="ID_1953182943" MODIFIED="1439577344846" TEXT="&#x6bcf;&#x4e2a;cpu&#x6709;&#x4e00;&#x4e2a;NAPI&#x7ed3;&#x6784;&#xff1a;struct edma_common_info -&gt;cpu_info [cpu_idx] . napi"/>
<node CREATED="1425062092708" ID="ID_1551484482" LINK="#ID_1144152000" MODIFIED="1439577377968">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28982;&#21518;&#35843;&#24230;cpu&#20851;&#32852;&#30340;NAPI&#65306;napi_schedule(&amp;q_cinfo-&gt;napi)
    </p>
    <p>
      &#20043;&#21518;&#23545;&#24212;&#30340;CPU&#20250;&#35843;&#24230;NAPI&#27880;&#20876;&#30340;edma_poll&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425062565311" ID="ID_1464079780" MODIFIED="1425062673226">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;napi_schedule()&#20250;&#23558;napi&#35843;&#24230;&#21040;&#24403;&#21069;CPU&#19978;
    </p>
    <p>
      &#32780;&#24403;&#21069;CPU&#21448;&#26159;&#30001;&#24403;&#21069;&#35302;&#21457;&#30340;&#20013;&#26029;&#20915;&#23450;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425062693977" ID="ID_143402445" MODIFIED="1425062751716" TEXT="napi_schedule(&amp;q_cinfo-&gt;napi)">
<node CREATED="1425062709745" ID="ID_473911152" MODIFIED="1425062710411" TEXT="__napi_schedule(n)">
<node CREATED="1425062726812" ID="ID_545099995" MODIFIED="1425062727555" TEXT="____napi_schedule(&amp;__get_cpu_var(softnet_data), n)"/>
</node>
</node>
</node>
<node COLOR="#ff3300" CREATED="1425062972002" ID="ID_1056962156" MODIFIED="1425063023581" TEXT="&#x90a3;&#x4e48;&#x54ea;&#x4e2a;&#x4e2d;&#x65ad;&#x7531;&#x54ea;&#x4e2a;CPU&#x54cd;&#x5e94;&#x53c8;&#x662f;&#x600e;&#x4e48;&#x51b3;&#x5b9a;&#x7684;&#x5462;&#xff1f;">
<node CREATED="1439577487082" ID="ID_1409393348" MODIFIED="1439577516300" TEXT="&#x662f;&#x7531;&#x4e2d;&#x65ad;&#x7684;smp_affinity&#x51b3;&#x5b9a;&#x7684;"/>
</node>
</node>
</node>
<node CREATED="1429133914746" ID="ID_1504815021" MODIFIED="1439577628857" TEXT="edma_poll">
<node CREATED="1429133953206" ID="ID_1410231815" MODIFIED="1429134032144" TEXT="&#x5c06;NAPI&#x8f6c;&#x6362;&#x4e3a;struct queue_per_cpu_info&#x7ed3;&#x6784;&#xff0c;&#x5373;&#x6240;&#x54cd;&#x5e94;&#x4e2d;&#x65ad;&#x5bf9;&#x5e94;&#x7684;EDMA software cpu"/>
<node CREATED="1429134062392" ID="ID_235180943" MODIFIED="1429134193244">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28982;&#21518;&#26816;&#26597;EDMA software cpu&#25152;&#36127;&#36131;&#30340;rx, tx&#20013;&#26029;&#65292;&#30475;&#20182;&#20204;&#26159;&#21542;&#26377;&#21457;&#29983;&#65292;&#26159;&#21542;&#38656;&#35201;&#22788;&#29702;&#65306;
    </p>
    <p>
      &#26816;&#26597;&#30828;&#20214;&#23492;&#23384;&#22120;&#65292;&#20197;&#23545;q_cinfo-&gt;rx_status&#36171;&#20540;&#65307;&#26816;&#26597;&#30828;&#20214;&#23492;&#23384;&#22120;&#65292;&#20197;&#23545;q_cinfo-&gt;tx_status&#36171;&#20540;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429136968487" ID="ID_1265929497" LINK="#ID_1448727144" MODIFIED="1429136984527">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#26377;tx&#20013;&#26029;&#21457;&#29983;&#65292;&#34920;&#31034;&#21457;&#36865;&#23436;&#25104;&#65292;&#38656;&#35201;&#22238;&#25910;skb
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;edma_tx_complete
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429136503468" ID="ID_215661904" LINK="#ID_1790352903" MODIFIED="1429136568331">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#26377;rx&#20013;&#26029;&#21457;&#29983;&#65292;&#21017;&#38656;&#35201;&#25910;&#21253;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;edma_rx_complete
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1429140305078" FOLDED="true" ID="ID_891803096" MODIFIED="1429553545520" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;">
<node CREATED="1429120083416" FOLDED="true" ID="ID_703044371" MODIFIED="1429553537720" TEXT="&#x5728;edma driver&#x4e2d;&#x6709;2&#x4e2a;CPU&#x6982;&#x5ff5;">
<node CREATED="1429120121130" ID="ID_1749773981" MODIFIED="1429551492927" TEXT="EDMA software cpu">
<node CREATED="1429120242401" ID="ID_271971200" MODIFIED="1429132375185" TEXT="&#x6309;&#x7167;EDMA&#x9a71;&#x52a8;&#x7684;&#x89c4;&#x5212;&#xff0c;&#x5b83;&#x7ed9;&#x6bcf;&#x4e2a;hardware cpu&#x5206;&#x914d;&#x4e86;&#x4e00;&#x4e2a;struct queue_per_cpu_info&#x7684;&#x7ed3;&#x6784;&#xff0c;&#x8fd9;&#x91cc;&#x79f0;&#x4e4b;&#x4e3a;EDMA software cpu&#x3002;&#x5728;&#x8fd9;&#x4e2a;&#x89c4;&#x5212;&#x4e2d;,&#xa;cpu0&#x8d1f;&#x8d23;&#x5904;&#x7406; tx_irq [ 0-3 ],     rx_irq [ 0-1 ]&#xa;cpu1&#x8d1f;&#x8d23;&#x5904;&#x7406; tx_irq [ 4-7 ],     rx_irq [ 2-3 ]&#xa;cpu2&#x8d1f;&#x8d23;&#x5904;&#x7406; tx_irq [ 8-11 ],   rx_irq [ 4-5 ]&#xa;cpu3&#x8d1f;&#x8d23;&#x5904;&#x7406; tx_irq [ 12-15 ], rx_irq [ 6-7 ]"/>
</node>
<node CREATED="1429120142136" FOLDED="true" ID="ID_1999564350" MODIFIED="1429551180009" TEXT="hardware cpu">
<node CREATED="1429132440522" ID="ID_1845451976" MODIFIED="1429132530412" TEXT="&#x7269;&#x7406;CPU&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x786c;&#x4ef6;&#x6982;&#x5ff5;&#x800c;&#x4e0d;&#x662f;&#x8f6f;&#x4ef6;&#x6982;&#x5ff5;&#xff0c;&#x5b83;&#x662f;&#x4ee3;&#x7801;&#x771f;&#x6b63;&#x8fd0;&#x884c;&#x7684;CPU"/>
</node>
<node CREATED="1429132594426" ID="ID_1486971528" MODIFIED="1429132625601" TEXT="&#x4e2d;&#x65ad;&#x5982;&#x4f55;&#x5173;&#x8054;&#x5230;hardware cpu&#xff1f;">
<node CREATED="1429132654799" ID="ID_1664095518" MODIFIED="1429132736030" TEXT="&#x4e2d;&#x65ad;&#x7684;&#x914d;&#x7f6e;&#x53c2;&#x6570;&quot;/proc/irq/xxx/smp_affinity&quot;&#x51b3;&#x5b9a;&#x4e86;&#x4e2d;&#x65ad;&#x88ab;&#x54ea;&#x4e2a;hardware cpu&#x54cd;&#x5e94;"/>
</node>
<node CREATED="1429132773426" ID="ID_756791855" MODIFIED="1429132788598" TEXT="&#x4e2d;&#x65ad;&#x5982;&#x4f55;&#x5173;&#x8054;&#x5230;EDMA software cpu&#xff1f;">
<node CREATED="1429132795042" ID="ID_1468200781" MODIFIED="1429133053005" TEXT="&#x6ce8;&#x518c;&#x4e2d;&#x65ad;&#x65f6;request_irq(irq, handler, flags, name, dev)&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53c2;&#x6570;dev&#xa;&#x88ab;&#x6307;&#x5b9a;&#x4e3a;EDMA software cpu&#x5373;struct queue_per_cpu_info&#x7ed3;&#x6784;&#x3002;"/>
<node CREATED="1429133145694" ID="ID_666475252" MODIFIED="1429133220039" TEXT="&#x4e2d;&#x65ad;&#x54cd;&#x5e94;&#x51fd;&#x6570;edma_interrupt(irq, dev)&#x5c06;&#x4f20;&#x5165;&#x7684;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x8f6c;&#x6362;&#x4e3a;&#xa;EDMA software cpu&#x5373;struct queue_per_cpu_info&#x7ed3;&#x6784;&#x3002;"/>
</node>
<node CREATED="1429133317545" ID="ID_1881855701" MODIFIED="1429133380523" TEXT="&#x6ce8;&#x610f;EDMA software cpu&#x53ef;&#x80fd;&#x4e0e;hardware cpu&#x4e00;&#x81f4;&#xff0c;&#x4e5f;&#x53ef;&#x80fd;&#x4e0e;hardware cpu&#x4e0d;&#x4e00;&#x81f4;"/>
<node CREATED="1429135923557" ID="ID_399490083" MODIFIED="1429136140574">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#19968;&#26465;TCP&#27969;&#32780;&#35328;&#65292;&#23384;&#22312;4&#20013;&#20013;&#26029;&#65306;
    </p>
    <p>
      original direction RX interrupt
    </p>
    <p>
      original direction TX interrupt
    </p>
    <p>
      reply&#160;&#160;&#160;&#160;&#160;&#160;direction RX interrupt
    </p>
    <p>
      reply&#160;&#160;&#160;&#160;&#160;&#160;direction TX interrupt
    </p>
    <p>
      &#32780;&#23427;&#20204;&#26681;&#25454;&#19981;&#21516;&#30340;smp_affinity&#35774;&#32622;&#65292;&#21487;&#20197;&#20998;&#37197;&#21040;&#19981;&#21516;&#30340;hardware cpu&#19978;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429551413665" FOLDED="true" ID="ID_1983520190" MODIFIED="1429553536552" TEXT="EDMA software cpu&#x4e0e;hardware cpu&#x4e0d;&#x4e00;&#x81f4;&#x5bfc;&#x81f4;&#x7684;&#x95ee;&#x9898;">
<node CREATED="1429551476243" ID="ID_1602449687" MODIFIED="1429552445578">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;EDMA&#30340;&#35268;&#21010;&#37324;&#65292;
    </p>
    <p>
      tx_irq [ 0-3 ],&#160;&#160;&#160;&#160;&#160;rx_irq [ 0-1 ]&#34987;&#32465;&#23450;&#21040;cpu0
    </p>
    <p>
      tx_irq [ 4-7 ],&#160;&#160;&#160;&#160;&#160;rx_irq [ 2-3 ]&#34987;&#32465;&#23450;&#21040;cpu1
    </p>
    <p>
      tx_irq [ 8-11 ],&#160;&#160;&#160;rx_irq [ 4-5 ]&#34987;&#32465;&#23450;&#21040;cpu2
    </p>
    <p>
      tx_irq [ 12-15 ], rx_irq [ 6-7 ]&#34987;&#32465;&#23450;&#21040;cpu3
    </p>
    <p>
      &#20294;&#23454;&#38469;&#19978;&#36825;&#20123;&#20013;&#26029;&#32465;&#23450;&#21040;&#21738;&#20010;hardware cpu&#26159;&#30001;smp_affinity&#20915;&#23450;&#30340;&#65292;&#23427;&#21487;&#33021;&#19982;&#25152;&#32465;&#23450;&#30340;EDMA software cpu&#19981;&#21516;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429552478955" ID="ID_1575351723" MODIFIED="1429552599016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;tx_irq [ 0-3 ]&#32465;&#23450;&#21040;hardware cpu x,
    </p>
    <p>
      &#32780;rx_irq [ 0-1 ]&#32465;&#23450;&#21040;hardware cpu y
    </p>
  </body>
</html></richcontent>
<node CREATED="1429552647857" ID="ID_616373204" MODIFIED="1429553117708" TEXT="&#x5f53;rx_irq [ 0-1 ]&#x89e6;&#x53d1;&#x540e;&#xff0c;&#x5728;hardware cpu y&#x4e0a;&#x6267;&#x884c;edma_poll()&#x51fd;&#x6570;&#xff0c;&#xa;&#x7531;&#x4e8e;rx_irq [ 0-1 ]&#x7ed1;&#x5b9a;&#x5230;EDMA software cpu 0&#xff0c;&#xa;&#x5b83;&#x4f1a;&#x6267;&#x884c;edma_tx_complete()&#x4ee5;&#x5904;&#x7406;&#x7ed1;&#x5b9a;&#x5230;EDMA software cpu 0&#x7684;tx_irq [ 0 - 3 ]&#xff0c;&#xa;&#x540c;&#x65f6;&#x6267;&#x884c;edma_rx_complete()&#x4ee5;&#x5904;&#x7406;&#x7ed1;&#x5b9a;&#x5230;EDMA software cpu 0&#x7684;rx_irq [ 0 - 1 ]&#xff0c;"/>
<node CREATED="1429552647857" ID="ID_620685687" MODIFIED="1429553204701" TEXT="&#x5f53;tx_irq [ 0-3 ]&#x89e6;&#x53d1;&#x540e;&#xff0c;&#x5728;hardware cpu x&#x4e0a;&#x6267;&#x884c;edma_poll()&#x51fd;&#x6570;&#xff0c;&#xa;&#x7531;&#x4e8e;tx_irq [ 0-3 ]&#x7ed1;&#x5b9a;&#x5230;EDMA software cpu 0&#xff0c;&#xa;&#x5b83;&#x4f1a;&#x6267;&#x884c;edma_tx_complete()&#x4ee5;&#x5904;&#x7406;&#x7ed1;&#x5b9a;&#x5230;EDMA software cpu 0&#x7684;tx_irq [ 0 - 3 ]&#xff0c;&#xa;&#x540c;&#x65f6;&#x6267;&#x884c;edma_rx_complete()&#x4ee5;&#x5904;&#x7406;&#x7ed1;&#x5b9a;&#x5230;EDMA software cpu 0&#x7684;rx_irq [ 0 - 1 ]&#xff0c;"/>
<node CREATED="1429553219454" ID="ID_1495471034" MODIFIED="1429553413779">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#26679;&#65292;&#23454;&#38469;&#19978;tx_irq [ 0 - 3 ] &#20250;&#22312;2&#20010;cpu : x &#21644; y &#19978;&#34987;&#25191;&#34892;
    </p>
    <p>
      &#21516;&#26679;&#30340;&#65292;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rx_irq [ 0 - 1 ] &#20063;&#20250;&#22312;2&#20010;cpu : x &#21644; y &#19978;&#34987;&#25191;&#34892;
    </p>
    <p>
      &#23545;&#20110;tx irq&#32780;&#35328;&#36825;&#21487;&#33021;&#27809;&#26377;&#20160;&#20040;&#38382;&#39064;&#65292;&#20294;&#26159;&#23545;&#20110;rx irq&#32780;&#35328;&#21364;&#20250;&#23548;&#33268;&#21253;&#20081;&#24207;&#30340;&#38382;&#39064;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1429140320226" ID="ID_1050045921" MODIFIED="1429140337149">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_cpu_select_policy.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1429140362490" ID="ID_902420432" MODIFIED="1429140513858" TEXT="&#x4e00;&#x4e2a;&#x5305;&#x5728;&#x4e0a;&#x9762;&#x7684;&#x6bcf;&#x4e2a;&#x5904;&#x7406;&#x9636;&#x6bb5;&#x90fd;&#x53ef;&#x80fd;&#x53d1;&#x751f;CPU&#x5207;&#x6362;&#xff0c;&#x56e0;&#x6b64;&#x4e0a;&#x9762;&#x6bcf;&#x4e00;&#x4e2a;&#x9636;&#x6bb5;&#x90fd;&#x6709;&#x81ea;&#x5df1;&#x7684;CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff0c;&#x5373;&#x9009;&#x62e9;&#x672c;&#x9636;&#x6bb5;&#x5728;&#x54ea;&#x4e2a;cpu&#x4e0a;&#x8fd0;&#x884c;"/>
<node CREATED="1429140575907" ID="ID_1516754088" MODIFIED="1429140591111" TEXT="hardware RX interrupt">
<node CREATED="1429140622976" ID="ID_1635915990" MODIFIED="1429141519188" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;RX&#x4e2d;&#x65ad;&#x7684;&#x914d;&#x7f6e;&#x53c2;&#x6570;&quot;/proc/irq/xxx/smp_affinity&quot;&#x51b3;&#x5b9a;&#x4e86;RX&#x4e2d;&#x65ad;&#x88ab;&#x54ea;&#x4e2a;hardware cpu&#x54cd;&#x5e94;"/>
<node CREATED="1429141477758" ID="ID_575916299" MODIFIED="1429141499048" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;edma_interrupt()">
<node CREATED="1429383158175" ID="ID_1806782056" MODIFIED="1429383167527" TEXT="napi_schedule(napi)"/>
</node>
</node>
<node CREATED="1429140575907" ID="ID_501736348" MODIFIED="1429141535873" TEXT="software RX interrupt">
<node CREATED="1429140622976" ID="ID_1767283363" MODIFIED="1429223498036" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;software RX interrupt&#x4e0e;hardware RX interrupt&#x5728;&#x540c;&#x4e00;&#x4e2a;CPU&#x4e0a;&#x5904;&#x7406;">
<node CREATED="1429141750427" ID="ID_714845822" MODIFIED="1429141898857">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      edma_interrupt()&#20989;&#25968;&#20013;&#29992;&#20989;&#25968;napi_schedule(napi)&#35843;&#24230;napi&#26102;&#20250;&#23558;napi&#35843;&#24230;&#21040;&#24403;&#21069;cpu&#19978;&#65292;&#25152;&#20197;&#21709;&#24212;software RX interrupt&#30340;CPU&#19982;&#21709;&#24212;hardware RX interrupt&#30340;CPU&#26159;&#21516;&#19968;&#20010;CPU
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1429141477758" ID="ID_453369147" MODIFIED="1429141544583" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;edma_poll()">
<node CREATED="1429383132854" ID="ID_1742670750" MODIFIED="1429383135928" TEXT="edma_rx_complete()"/>
</node>
</node>
<node CREATED="1429140575907" ID="ID_1042476887" MODIFIED="1429142163278" TEXT="GRO">
<node CREATED="1429140622976" ID="ID_730330709" MODIFIED="1429142296365" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;GRO&#x4e0e;software RX interrupt&#x5728;&#x540c;&#x4e00;&#x4e2a;CPU&#x4e0a;&#x5904;&#x7406;">
<node CREATED="1429141750427" ID="ID_1489805403" MODIFIED="1429142587738">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21253;&#36827;&#20837;napi-&gt;gro_list&#30340;&#36807;&#31243;&#20013;&#27809;&#26377;&#20219;&#20309;&#20301;&#32622;&#21487;&#33021;&#21457;&#29983;CPU&#20999;&#25442;&#65292;&#25152;&#20197;enqueue&#30340;&#36807;&#31243;&#19982;software RX interrupt&#30340;&#21709;&#24212;&#22312;&#21516;&#19968;&#20010;CPU&#19978;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429142694222" ID="ID_638956910" MODIFIED="1429142929336" TEXT="napi-&gt;gro_list&#x5728;napi_complete()&#x65f6;&#x88ab;flush&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;napi-&gt;gro_list&#x4e2d;&#x6240;&#x6709;&#x7684;&#x5305;&#x90fd;&#x662f;&#x5728;&#x540c;&#x4e00;&#x4e2a;software RX interrupt&#x4e2d;&#x6536;&#x5230;&#x7684;&#xff0c;&#x800c;napi_complete()&#x4e5f;&#x662f;&#x5728;&#x540c;&#x4e00;&#x4e2a;software RX interrupt&#x4e2d;&#x88ab;&#x8c03;&#x7528;&#x7684;&#x3002;&#x6240;&#x4ee5;dequeue&#x8fc7;&#x7a0b;&#x4e0e;enqueue&#x8fc7;&#x7a0b;&#x662f;&#x5728;&#x540c;&#x4e00;&#x4e2a;software RX interrupt&#x4e2d;&#xff0c;&#x56e0;&#x800c;&#x4e5f;&#x662f;&#x5728;&#x540c;&#x4e00;&#x4e2a;CPU&#x4e0a;&#x3002;"/>
</node>
<node CREATED="1429141477758" ID="ID_1041179949" MODIFIED="1429142389926" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;">
<node CREATED="1429142331590" ID="ID_1990884994" MODIFIED="1429142405442">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      enqueue&#20837;&#21475;&#20989;&#25968;&#65306;napi_gro_receive()
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429142212861" FOLDED="true" ID="ID_1031473834" MODIFIED="1429142973923">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dequeue&#20837;&#21475;&#20989;&#25968;&#65306;napi_complete()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429142229485" ID="ID_207451510" MODIFIED="1429142250624" TEXT="napi_gro_flush()">
<node CREATED="1429142240132" ID="ID_1762626848" MODIFIED="1429142246391" TEXT="napi_gro_complete()"/>
</node>
</node>
</node>
</node>
<node CREATED="1429143014624" ID="ID_1060438202" MODIFIED="1429143023125" TEXT="RPS/RFS">
<node CREATED="1429143047490" FOLDED="true" ID="ID_1617791740" MODIFIED="1429223724587">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CPU&#36873;&#25321;&#31574;&#30053;&#65306;
    </p>
    <p>
      1&#65292;&#33509;rps_sock_flow_table&#36873;&#25321;&#30340;cpu&#19982;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table&#30340;&#36873;&#25321;&#19981;&#19968;&#33268;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;1.1 &#33509;&#27969;&#22312;&#26087;CPU&#19978;&#36824;&#26377;&#26410;&#22788;&#29702;&#23436;&#30340;&#21253;&#65292;&#21017;&#26242;&#19981;&#20999;&#25442;&#65292;&#32487;&#32493;&#20351;&#29992;&#26087;CPU&#65292;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#21363;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table&#36873;&#25321;&#30340;CPU
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;1.2 &#33509;&#26080;&#27531;&#30041;&#21253;&#22312;&#26087;CPU&#19978;&#65292;&#21017;&#20999;&#25442;&#21040;&#26032;CPU&#65292;&#19988;&#21516;&#27493;&#21040;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table
    </p>
    <p>
      2&#65292;&#33509;rps_sock_flow_table&#19982;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table&#37117;&#36873;&#25321;&#20102;&#30456;&#21516;CPU, &#21017;&#20351;&#29992;&#23427;
    </p>
    <p>
      3&#65292;&#33509;rps_sock_flow_table&#19982;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table&#37117;&#27809;&#26377;&#36873;&#25321;&#20986;&#21512;&#27861;&#30340;CPU&#65292;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#21017;&#29992;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_map&#36873;&#25321;CPU
    </p>
    <p>
      4&#65292;&#33509;&#21069;&#38754;3&#27493;&#37117;&#27809;&#26377;&#36873;&#25321;&#20986;&#21512;&#27861;&#30340;CPU&#65292;&#21017;&#20351;&#29992;&#24403;&#21069;CPU
    </p>
  </body>
</html></richcontent>
<node CREATED="1429143545399" ID="ID_1216479160" MODIFIED="1429145065543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      EDMA&#22312;&#25910;&#21253;&#26102;&#20250;&#23558;rx ring&#26144;&#23556;&#20026;rx queue&#65292;&#24182;&#35760;&#24405;&#22312;skb-&gt;queue_mapping&#20013;
    </p>
    <p>
      rx ring&#21040;rx queue&#30340;&#26144;&#23556;&#26159;&#65306; ring_to_queue[8] = {0, 0, 1, 1, 2, 2, 3, 3}
    </p>
  </body>
</html></richcontent>
<node CREATED="1429143641007" ID="ID_201285190" MODIFIED="1429143684685" TEXT="&#x8fd9;&#x91cc;&#x6240;&#x8bf4;&#x7684;rx ring&#x662f;&#x6307;struct edma_rfd_desc_ring&#x7ed3;&#x6784;"/>
<node CREATED="1429143688090" ID="ID_1114171847" MODIFIED="1429143724172" TEXT="&#x8fd9;&#x91cc;&#x6240;&#x8bf4;&#x7684;rx queue&#x662f;&#x6307;struct netdev_rx_queue&#x7ed3;&#x6784;"/>
</node>
<node CREATED="1429143751840" ID="ID_99272105" MODIFIED="1429143835090" TEXT="get_rps_cpu()&#x51fd;&#x6570;&#x4e2d;&#x4f1a;&#x7528;skb-&gt;queue_mapping&#x7d22;&#x5f15;dev-&gt;_rx&#x5f97;&#x5230;&#x5305;&#x5e94;&#x8be5;&#x8fdb;&#x5165;&#x7684;rx queue&#xa;&#xff08;&#x5373;struct netdev_rx_queue&#x7ed3;&#x6784;&#xff09;"/>
<node CREATED="1427671364783" ID="ID_1052567723" MODIFIED="1429222925938">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#36890;&#36807;&#25991;&#20214;&#25991;&#20214;/proc/sys/net/core/rps_sock_flow_entries&#26469;&#35774;&#32622;rps_sock_flow_table&#30340;&#26465;&#30446;&#25968;&#65292;&#32780;linux&#20869;&#26680;&#20250;&#22312;socket&#24314;&#31435;&#21644;&#25910;&#21457;&#21253;&#26102;&#26356;&#26032;&#34920;&#20013;&#26465;&#30446;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427671364783" ID="ID_572921715" MODIFIED="1429223091109">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#36890;&#36807;&#25991;&#20214;/sys/devices/soc.0/c080000.edma/net/&lt;eth0|eth1&gt;/queues/rx-&lt;0-3&gt;/rps_flow_cnt&#26469;&#35774;&#32622;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table&#34920;&#20013;&#26465;&#30446;&#25968;&#65292;&#32780;Linux&#20869;&#26680;&#22312;&#26356;&#26032;rps_sock_flow_table&#34920;&#26102;&#20250;&#23558;&#20854;&#21516;&#27493;&#21040;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_flow_table&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1427671364783" ID="ID_533819502" MODIFIED="1429222466266">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#36890;&#36807;&#25991;&#20214;/sys/class/net/&lt;dev&gt;/queues/rx-&lt;n&gt;/rps_cpus
    </p>
    <pre>&#26469;&#35774;&#32622;dev-&gt;_rx [ skb-&gt;queue_mapping ] -&gt;rps_map</pre>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1429143059566" ID="ID_1698341678" MODIFIED="1429143060122" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;">
<node CREATED="1429223273696" FOLDED="true" ID="ID_1176569633" MODIFIED="1429223722673">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      enqueue&#20837;&#21475;&#20989;&#25968;&#65306;enqueue_to_backlog(skb,&#160; get_rps_cpu(skb), &#160;qtail)
    </p>
  </body>
</html></richcontent>
<node CREATED="1429223399285" ID="ID_987642077" MODIFIED="1429223434403" TEXT="&#x5305;&#x88ab;&#x653e;&#x5165;per_cpu(softnet_data, cpu)  -&gt; input_pkt_queue&#x961f;&#x5217;"/>
<node CREATED="1429223526814" ID="ID_99341956" MODIFIED="1429223583987" TEXT="&#x4e4b;&#x540e;&#x8c03;&#x5ea6;&#x5bf9;&#x5e94;CPU&#x7684;NAPI&#xff1a;napi_schedule(per_cpu(softnet_data, cpu)  -&gt; backlog)"/>
</node>
<node CREATED="1429223596220" ID="ID_1867469236" MODIFIED="1429223679291" TEXT="dequeue&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;process_backlog()">
<node CREATED="1429223710633" ID="ID_1583714215" MODIFIED="1429223710907" TEXT="__netif_receive_skb(skb)"/>
</node>
</node>
</node>
<node CREATED="1429224877664" ID="ID_50582631" MODIFIED="1429224882729" TEXT="defrag">
<node CREATED="1429224929310" ID="ID_900703995" MODIFIED="1429225682244" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;&#xa;&#x5982;&#x679c;&#x5305;&#x4e0d;&#x662f;&#x5206;&#x7247;&#x5305;&#xff0c;&#x5219;&#x5b9e;&#x9645;&#x4e0a;&#x6ca1;&#x6709;defrag&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x3002;&#xa;&#x5982;&#x679c;&#x662f;&#x5206;&#x7247;&#x5305;&#xff0c;&#x5219;enqueue&#x65f6;&#x6240;&#x8fd0;&#x884c;&#x7684;CPU&#x4e0e;RPS/RFS&#x9009;&#x62e9;&#x7684;CPU&#x76f8;&#x540c;&#xff0c;&#x800c;dequeue&#x65f6;&#x5219;&#x4e0e;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x6240;&#x8fdb;&#x7684;CPU&#x76f8;&#x540c;&#x3002;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x5305;&#x5b9e;&#x9645;&#x4e0a;&#x5e76;&#x4e0d;&#x662f;&#x4e00;&#x4e2a;&#x5b8c;&#x6574;&#x7684;&#x5305;&#xff0c;&#x56e0;&#x6b64;&#x5373;&#x4f7f;&#x591a;&#x4e2a;&#x5206;&#x7247;&#x4ece;&#x4e0d;&#x540c;&#x7684;CPU&#x8fdb;&#x5165;&#xff0c;&#x4e5f;&#x4e0d;&#x4f1a;&#x5bfc;&#x81f4;&#x4e71;&#x5e8f;&#x95ee;&#x9898;&#xff0c;&#x5305;&#x603b;&#x662f;&#x91cd;&#x7ec4;&#x597d;&#x4e86;&#x4e4b;&#x540e;&#x518d;&#x7ee7;&#x7eed;&#x5904;&#x7406;&#x3002;"/>
<node CREATED="1429143059566" ID="ID_638584019" MODIFIED="1429143060122" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;">
<node CREATED="1429223273696" ID="ID_1399249068" MODIFIED="1429225757542">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      enqueue&#20837;&#21475;&#20989;&#25968;&#65306;ip_defrag()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429223399285" ID="ID_840170346" MODIFIED="1429225969937" TEXT="&#x5305;&#x88ab;&#x653e;&#x5165;ip4_frags  -&gt; hash [ x ] &#x961f;&#x5217;"/>
</node>
<node CREATED="1429223596220" ID="ID_1844388218" MODIFIED="1429226020021" TEXT="dequeue&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;ip_defrag()">
<node CREATED="1429226051313" ID="ID_781094971" MODIFIED="1429226096872" TEXT="&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5206;&#x7247;&#x4ece;ip_defrag()&#x8fd4;&#x56de;&#x65f6;&#x5c31;&#x662f;&#x91cd;&#x7ec4;&#x597d;&#x7684;&#x5305;"/>
</node>
</node>
</node>
<node CREATED="1429223748848" ID="ID_1809548709" MODIFIED="1429223754951" TEXT="network stack">
<node CREATED="1429223758571" ID="ID_834309138" MODIFIED="1429223852748" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;network stack&#x672c;&#x8eab;&#x5e76;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x4f4d;&#x7f6e;&#x53ef;&#x4ee5;&#x5207;&#x6362;CPU&#xff0c;&#x6240;&#x4ee5;&#x5b83;&#x6240;&#x8fd0;&#x884c;&#x7684;CPU&#x4e0e;RPS/RFS&#x9009;&#x62e9;&#x7684;CPU&#x76f8;&#x540c;"/>
<node CREATED="1429223928052" ID="ID_964346734" MODIFIED="1429223937944" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;__netif_receive_skb_core()"/>
<node CREATED="1429223939770" FOLDED="true" ID="ID_1725295122" MODIFIED="1429307600262" TEXT="&#x51fa;&#x53e3;&#x51fd;&#x6570;&#xff1a;skb_dst(skb)-&gt;output(skb)">
<node CREATED="1429228856485" ID="ID_1222171701" MODIFIED="1429228860603" TEXT="ip_output()">
<node CREATED="1429228871601" ID="ID_836464600" MODIFIED="1429228875860" TEXT="ip_finish_output()">
<node CREATED="1429228889694" ID="ID_1830692235" MODIFIED="1429228892664" TEXT="ip_finish_output2()">
<node CREATED="1429228909752" ID="ID_969322583" MODIFIED="1429228912892" TEXT="dst_neigh_output()">
<node CREATED="1429228950424" ID="ID_1834559962" MODIFIED="1429229009685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;neighbour&#29366;&#24577;&#26159;connected&#19988;L2&#22836;&#37096;&#24050;&#34987;&#32531;&#23384;&#65292;&#21017;&#35843;&#29992;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;neigh_hh_output()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429229022620" ID="ID_1233575403" MODIFIED="1429229025145" TEXT="dev_queue_xmit()"/>
</node>
<node CREATED="1429228950424" ID="ID_869707362" MODIFIED="1429229113584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;neighbour&#29366;&#24577;&#19981;&#26159;connected&#25110;&#32773;L2&#22836;&#37096;&#26410;&#34987;&#32531;&#23384;&#65292;&#21017;&#35843;&#29992;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;neigh -&gt; output()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429229022620" ID="ID_1056177568" MODIFIED="1429229132244" TEXT="neigh_resolve_output()"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1429226790500" ID="ID_1131852399" MODIFIED="1429226808397" TEXT="ARP resolve">
<node CREATED="1429226822238" ID="ID_561838748" MODIFIED="1429227891872">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CPU&#36873;&#25321;&#31574;&#30053;&#65306;
    </p>
    <p>
      &#22914;&#26524;neighbour&#19981;&#22788;&#20110;incomplete&#29366;&#24577;&#65292;&#21017;&#27809;&#26377;ARP resolve&#36807;&#31243;&#65292;&#30452;&#25509;&#35843;&#29992;dev_queue_xmit(skb)&#21457;&#36865;&#21253;&#65292;&#22240;&#32780;&#19982;network stack&#36816;&#34892;&#22312;&#21516;&#19968;CPU&#19978;&#12290;
    </p>
    <p>
      &#22914;&#26524;neighbour&#22788;&#20110;incomplete&#29366;&#24577;&#65292;&#21017;enqueue&#36807;&#31243;&#36824;&#26159;&#19982;network stack&#36816;&#34892;&#22312;&#21516;&#19968;CPU&#19978;&#12290;
    </p>
    <p>
      &#32780;dequeue&#36807;&#31243;&#21017;&#21462;&#20915;&#20110;arp reply&#36827;&#20837;&#21738;&#20010;CPU, &#22240;&#20026;&#25910;&#21040;arp reply&#30340;CPU&#20250;&#26356;&#26032;neighbour&#29366;&#24577;&#65292;&#20877;&#23558;neighbour -&gt;arp_queue&#20013;&#30340;&#21253;&#21462;&#20986;&#26469;&#20877;&#21457;&#20986;&#21435;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1429227943039" ID="ID_1984932702" MODIFIED="1429227979615" TEXT="&#x5982;&#x679c;L2&#x5730;&#x5740;&#x672a;&#x5b8c;&#x6210;&#x89e3;&#x6790;&#xff0c;&#x5219;&#x5305;&#x4f1a;&#x88ab;&#x653e;&#x5165;neighbour -&gt;arp_queue&#x961f;&#x5217;&#x4e2d;"/>
</node>
<node CREATED="1429223928052" FOLDED="true" ID="ID_896841659" LINK="#ID_869707362" MODIFIED="1429307802849">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20837;&#21475;&#20989;&#25968;&#65306;neighbour-&gt;output(skb)
    </p>
    <p>
      &#22320;&#22336;&#35299;&#26512;&#23436;&#25104;&#26102;&#20026;neigh_connected_output()
    </p>
    <p>
      &#22320;&#22336;&#35299;&#26512;&#26410;&#23436;&#25104;&#26102;&#20026;neigh_resolve_output()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429228147627" ID="ID_1456686605" MODIFIED="1429228148237" TEXT="neigh_connected_output()">
<node CREATED="1429228154579" ID="ID_674554377" MODIFIED="1429228160666" TEXT="dev_queue_xmit()"/>
</node>
<node CREATED="1429228163992" ID="ID_894940260" MODIFIED="1429228175618" TEXT="neigh_resolve_output()">
<node CREATED="1429228204241" ID="ID_86278406" MODIFIED="1429228212805" TEXT="neigh_event_send()">
<node CREATED="1429228230756" ID="ID_162428193" MODIFIED="1429228267155" TEXT="__skb_queue_tail (neigh-&gt;arp_queue, skb)"/>
</node>
</node>
</node>
<node CREATED="1429228279255" FOLDED="true" ID="ID_382814086" MODIFIED="1429307809542" TEXT="&#x51fa;&#x53e3;&#x51fd;&#x6570;&#xff1a;dev_queue_xmit()">
<node CREATED="1429228324908" ID="ID_461941444" MODIFIED="1429228334089" TEXT="arp_rcv()">
<node CREATED="1429228334671" ID="ID_1870934777" MODIFIED="1429228340971" TEXT="arp_process()">
<node CREATED="1429228358765" ID="ID_1706162282" MODIFIED="1429228365391" TEXT="neigh_update()">
<node CREATED="1429228392728" ID="ID_1216719716" MODIFIED="1429228429346" TEXT="skb = __skb_dequeue(neigh-&gt;arp_queue)"/>
<node CREATED="1429228433290" ID="ID_257189267" MODIFIED="1429228455963" TEXT="neigh-&gt;output (neigh, skb)">
<node CREATED="1429228147627" ID="ID_709564067" MODIFIED="1429228148237" TEXT="neigh_connected_output()">
<node CREATED="1429228154579" ID="ID_1836322464" MODIFIED="1429228160666" TEXT="dev_queue_xmit()"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1429229489189" ID="ID_1087863196" MODIFIED="1429229495549" TEXT="traffic control">
<node CREATED="1429229499118" ID="ID_848091692" MODIFIED="1429320251674">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CPU&#36873;&#25321;&#31574;&#30053;&#65306;
    </p>
    <p>
      &#22914;&#26524;&#21253;&#25152;&#36873;&#25321;&#30340;tx queue&#27809;&#26377;&#20851;&#32852;&#30340;qdisc&#25110;&#21017;&#20851;&#32852;&#30340;qdisc&#27809;&#26377;&#32531;&#23384;&#38431;&#21015;(&#21363;qdisc-&gt;enqueue&#20026;&#31354;)&#65292;&#21017;&#27809;&#26377;traffic shape&#30340;&#36807;&#31243;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#38656;&#35201;&#20570;traffic shape&#65292;&#37027;&#20040;enqueue&#36807;&#31243;&#36824;&#26159;&#36816;&#34892;&#22312;dev_queue_xmit&#30456;&#21516;&#30340;CPU&#19978;&#12290;
    </p>
    <p>
      &#30001;&#20110;enqueue&#26102;&#35302;&#21457;&#36719;&#20013;&#26029;&#23558;qdisc&#38142;&#25509;&#21040;&#24403;&#21069;CPU&#30340;softnet_data&#19978;&#65292;&#25152;&#20197;&#21709;&#24212;NET_TX_SOFTIRQ&#20063;&#26159;&#22312;&#21516;&#19968;&#20010;CPU&#19978;&#65292;&#20063;&#23601;&#26159;&#35828;dequeue&#36807;&#31243;&#19982;enqueue&#36807;&#31243;&#22312;&#21516;&#19968;&#20010;CPU&#19978;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429223928052" FOLDED="true" ID="ID_64111302" MODIFIED="1429338457753" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;dev_queue_xmit()">
<node CREATED="1429319991997" ID="ID_1567605958" MODIFIED="1429319995130" TEXT="__dev_queue_xmit()">
<node CREATED="1429320008209" ID="ID_192215197" MODIFIED="1429320010760" TEXT="__dev_xmit_skb()">
<node CREATED="1429320037862" ID="ID_1244674513" MODIFIED="1429320038446" TEXT="dev-&gt;_tx [ x ] -&gt;qdisc -&gt;enqueue()"/>
<node CREATED="1429320091429" ID="ID_69314962" MODIFIED="1429320094227" TEXT="__qdisc_run()">
<node CREATED="1429319670909" ID="ID_1533229485" MODIFIED="1429319675196" TEXT="__netif_schedule()">
<node CREATED="1429319622246" ID="ID_1232224488" MODIFIED="1429319775211">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;qdisc&#24403;&#21069;&#27809;&#26377;&#34987;&#35843;&#24230;(qdisc-&gt;state&#19978;&#27809;&#26377;__QDISC_STATE_SCHED&#26631;&#35782;)&#65292;&#21017;&#38656;&#35201;&#35843;&#24230;&#23427;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; __netif_reschedule()
    </p>
  </body>
</html></richcontent>
<node CREATED="1429319575396" ID="ID_189633777" MODIFIED="1429319604686" TEXT="&#x5c06;tx queue&#x5173;&#x8054;&#x7684;qdisc&#x94fe;&#x63a5;&#x5230;get_cpu_var(softnet_data)-&gt;output_queue&#x5c3e;&#x90e8;"/>
<node CREATED="1429319643254" ID="ID_1851127078" MODIFIED="1429319652675" TEXT="&#x89e6;&#x53d1;&#x8f6f;&#x4e2d;&#x65ad;NET_TX_SOFTIRQ"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1429223928052" FOLDED="true" ID="ID_1453589271" MODIFIED="1429338459311" TEXT="&#x51fa;&#x53e3;&#x51fd;&#x6570;&#xff1a;dev_hard_start_xmit()">
<node CREATED="1429337817674" ID="ID_664360241" MODIFIED="1429337868096" TEXT="&#x8f6f;&#x4e2d;&#x65ad;NET_TX_SOFTIRQ&#x76f8;&#x5e94;&#x51fd;&#x6570;&#xff1a;net_tx_action">
<node CREATED="1429337879562" ID="ID_546464329" MODIFIED="1429337881156" TEXT="qdisc_run()">
<node CREATED="1429337957745" ID="ID_1479815746" MODIFIED="1429337969173" TEXT="qdisc_restart()">
<node CREATED="1429338038852" ID="ID_1144835704" MODIFIED="1429338045572" TEXT="skb = dequeue_skb(qdisc)"/>
<node CREATED="1429338057203" ID="ID_1115140176" MODIFIED="1429338061532" TEXT="sch_direct_xmit()">
<node CREATED="1429338084256" ID="ID_554098252" MODIFIED="1429338089179" TEXT="dev_hard_start_xmit()"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1429338474592" ID="ID_1111337584" MODIFIED="1429338486062" TEXT="driver transmit">
<node CREATED="1429338510506" ID="ID_1710219616" MODIFIED="1429338654766" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;&#xa;&#x56e0;&#x4e3a;&#x5728;ethernet driver&#x4e2d;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x4f4d;&#x7f6e;&#x53ef;&#x4ee5;&#x5207;&#x6362;CPU&#xff0c;&#x6240;&#x4ee5;driver transmit&#x8fd0;&#x884c;&#x5728;&#x4e0e;traffic control&#x76f8;&#x540c;&#x7684;CPU&#x4e0a;"/>
<node CREATED="1429338684975" ID="ID_786798769" MODIFIED="1429338702929" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;dev-&gt;ops-&gt;ndo_start_xmit(nskb, dev)">
<node CREATED="1429381987388" ID="ID_719375303" MODIFIED="1429381990714" TEXT="edma_xmit()">
<node CREATED="1429382220729" ID="ID_1583935696" MODIFIED="1429382242112" TEXT="&#x6bcf;&#x4e2a;CPU&#x8d1f;&#x8d23;4&#x4e2a;tx ring&#xff0c;&#x53d1;&#x9001;&#x65f6;&#x7528;skb-&gt;priorty&#x9009;&#x62e9;&#x5f53;&#x524d;CPU&#x7684;4&#x4e2a;tx ring&#x7684;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;"/>
<node CREATED="1429382008460" ID="ID_1730692710" MODIFIED="1429382011523" TEXT="edma_tx_map_and_fill()">
<node CREATED="1429382033972" ID="ID_834885719" MODIFIED="1429382498045">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dma_map_single()
    </p>
    <p>
      &#33267;&#27492;&#65292;&#21253;&#23601;&#20132;&#32473;edma&#30828;&#20214;&#20102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1429140575907" ID="ID_219228205" MODIFIED="1429382535237" TEXT="hardware TX interrupt">
<node CREATED="1429140622976" ID="ID_1455933640" MODIFIED="1429382930529">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CPU&#36873;&#25321;&#31574;&#30053;&#65306;&#21253;&#26159;&#29992;&#21738;&#20010;TX ring&#21457;&#36865;&#30340;&#21017;&#30828;&#20214;&#23436;&#25104;&#21457;&#36865;&#21518;&#23601;&#35302;&#21457;&#21738;&#20010;TX&#20013;&#26029;
    </p>
    <p>
      TX&#20013;&#26029;&#30340;&#37197;&#32622;&#21442;&#25968;&quot;/proc/irq/xxx/smp_affinity&quot;&#20915;&#23450;&#20102;TX&#20013;&#26029;&#34987;&#21738;&#20010;hardware cpu&#21709;&#24212;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429141477758" ID="ID_1246163821" MODIFIED="1429141499048" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;edma_interrupt()"/>
</node>
<node CREATED="1429140575907" ID="ID_320648990" MODIFIED="1429383036419" TEXT="software TX interrupt">
<node CREATED="1429140622976" ID="ID_979358513" MODIFIED="1429383048238" TEXT="CPU&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff1a;software TX interrupt&#x4e0e;hardware TX interrupt&#x5728;&#x540c;&#x4e00;&#x4e2a;CPU&#x4e0a;&#x5904;&#x7406;">
<node CREATED="1429141750427" ID="ID_170334349" MODIFIED="1429383066660">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      edma_interrupt()&#20989;&#25968;&#20013;&#29992;&#20989;&#25968;napi_schedule(napi)&#35843;&#24230;napi&#26102;&#20250;&#23558;napi&#35843;&#24230;&#21040;&#24403;&#21069;cpu&#19978;&#65292;&#25152;&#20197;&#21709;&#24212;software TX interrupt&#30340;CPU&#19982;&#21709;&#24212;hardware TX interrupt&#30340;CPU&#26159;&#21516;&#19968;&#20010;CPU
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1429141477758" ID="ID_1122938716" MODIFIED="1429141544583" TEXT="&#x5165;&#x53e3;&#x51fd;&#x6570;&#xff1a;edma_poll()">
<node CREATED="1429383098208" ID="ID_805782913" MODIFIED="1429383104404" TEXT="edma_tx_complete()"/>
</node>
</node>
</node>
<node CREATED="1439538873208" ID="ID_1626734334" MODIFIED="1439591190787" TEXT="tx queue&#x7684;&#x9009;&#x62e9;">
<node CREATED="1439538908567" ID="ID_99662598" MODIFIED="1439539167587" TEXT="cpu0">
<node CREATED="1439538908567" ID="ID_821043453" MODIFIED="1439587075853" TEXT="&#x5f80;eth0&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[0])-&gt;tx_start_offset[0]&#xff0c;&#x5373;queue 0, 1&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_359852604" MODIFIED="1439587111368" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 0"/>
<node CREATED="1439587062353" ID="ID_404735586" MODIFIED="1439587116354" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 1"/>
</node>
<node CREATED="1439538908567" ID="ID_1908638161" MODIFIED="1439539213137" TEXT="&#x5f80;eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[1])-&gt;tx_start_offset[0]&#xff0c;&#x5373;queue 2, 3&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_465391242" MODIFIED="1439587154108" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 2"/>
<node CREATED="1439587062353" ID="ID_599604855" MODIFIED="1439587157272" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 3"/>
</node>
</node>
<node CREATED="1439538908567" ID="ID_712332038" MODIFIED="1439539226244" TEXT="cpu1">
<node CREATED="1439538908567" ID="ID_1170540542" MODIFIED="1439539389159" TEXT="&#x5f80;eth0&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[0])-&gt;tx_start_offset[1]&#xff0c;&#x5373;queue 4, 5&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_43790012" MODIFIED="1439587161150" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 4"/>
<node CREATED="1439587062353" ID="ID_937051783" MODIFIED="1439587164033" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 5"/>
</node>
<node CREATED="1439538908567" ID="ID_1807588998" MODIFIED="1439539399413" TEXT="&#x5f80;eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[1])-&gt;tx_start_offset[1]&#xff0c;&#x5373;queue 6, 7&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_278907476" MODIFIED="1439587167279" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 6"/>
<node CREATED="1439587062353" ID="ID_1188931647" MODIFIED="1439587170235" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 7"/>
</node>
</node>
<node CREATED="1439538908567" ID="ID_1663860943" MODIFIED="1439539229660" TEXT="cpu2">
<node CREATED="1439538908567" ID="ID_1205928728" MODIFIED="1439539409806" TEXT="&#x5f80;eth0&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[0])-&gt;tx_start_offset[2]&#xff0c;&#x5373;queue 8, 9&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_130011600" MODIFIED="1439587173014" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 8"/>
<node CREATED="1439587062353" ID="ID_1431809562" MODIFIED="1439587175956" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 9"/>
</node>
<node CREATED="1439538908567" ID="ID_1266906647" MODIFIED="1439539419951" TEXT="&#x5f80;eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[1])-&gt;tx_start_offset[2]&#xff0c;&#x5373;queue 10, 11&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_826803812" MODIFIED="1439587179282" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 10"/>
<node CREATED="1439587062353" ID="ID_1608084989" MODIFIED="1439587181399" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 11"/>
</node>
</node>
<node CREATED="1439538908567" ID="ID_16842525" MODIFIED="1439539233952" TEXT="cpu3">
<node CREATED="1439538908567" ID="ID_1882155245" MODIFIED="1439539429339" TEXT="&#x5f80;eth0&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[0])-&gt;tx_start_offset[3]&#xff0c;&#x5373;queue 12, 13&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_1489778629" MODIFIED="1439587184130" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 12"/>
<node CREATED="1439587062353" ID="ID_1425292398" MODIFIED="1439587185805" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 13"/>
</node>
<node CREATED="1439538908567" ID="ID_848133197" MODIFIED="1439539438759" TEXT="&#x5f80;eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;netdev_priv(netdev[1])-&gt;tx_start_offset[3]&#xff0c;&#x5373;queue 14, 15&#x53d1;&#x5305;">
<node CREATED="1439587062353" ID="ID_460085828" MODIFIED="1439587189553" TEXT="skb-&gt;priority&#x4e3a;0-3&#x65f6;&#x9009;queue 14"/>
<node CREATED="1439587062353" ID="ID_661122247" MODIFIED="1439587191663" TEXT="skb-&gt;priority&#x4e3a;4-7&#x65f6;&#x9009;queue 15"/>
</node>
</node>
</node>
</node>
<node CREATED="1425067628435" FOLDED="true" ID="ID_5788922" MODIFIED="1439586295863" TEXT="descriptor">
<node CREATED="1425067860542" ID="ID_1227714005" MODIFIED="1425067868402" TEXT="&#x57fa;&#x672c;&#x539f;&#x7406;">
<node CREATED="1425067874682" ID="ID_1529834538" MODIFIED="1425067876612" TEXT="Producer and Consumer of each ring">
<node CREATED="1425067884813" ID="ID_908260332" MODIFIED="1425068177580">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <table border="0" style="border-left-width: 0; border-bottom-width: 0; border-style: solid; border-top-width: 0; width: 80%; border-right-width: 0">
      <tr>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif"><b>Descriptor Ring Name</b></font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif"><b>Producer</b></font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif"><b>Consumer</b></font>
          </p>
        </td>
      </tr>
      <tr>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">Transmit Packet Descriptor</font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">Host</font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">EDMA</font>
          </p>
        </td>
      </tr>
      <tr>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">Receive Free Descriptor</font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">Host</font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">EDMA</font>
          </p>
        </td>
      </tr>
      <tr>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">Receive Return Descriptor</font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">EDMA</font>
          </p>
        </td>
        <td valign="top" style="border-left-width: 1; border-bottom-width: 1; border-style: solid; border-top-width: 1; width: 33%; border-right-width: 1">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; margin-right: 1">
            <font size="3" face="Arial,sans-serif">Host</font>
          </p>
        </td>
      </tr>
    </table>
  </body>
</html></richcontent>
</node>
<node CREATED="1425068267906" ID="ID_519846741" MODIFIED="1425068307712" TEXT="&#x6bcf;&#x4e00;&#x4e2a;descriptor ring&#x90fd;&#x6709;&#x81ea;&#x5df1;&#x7684;Producer Index&#x548c;Consumer Index">
<node CREATED="1425068335616" ID="ID_1380606869" MODIFIED="1425068363609" TEXT="Producer Index&#x6307;&#x5411;producer&#x6700;&#x65b0;&#x751f;&#x4ea7;&#x7684;descriptor"/>
<node CREATED="1425068385928" ID="ID_1624463641" MODIFIED="1425068418429" TEXT="Consumer Index &#x6307;&#x5411;consumer&#x4e0b;&#x4e00;&#x4e2a;&#x5373;&#x5c06;&#x6d88;&#x8d39;&#x7684;descriptor"/>
</node>
</node>
</node>
<node CREATED="1425067695378" FOLDED="true" ID="ID_1100219537" MODIFIED="1425197600496" TEXT="receive">
<node CREATED="1425068475998" ID="ID_414812329" MODIFIED="1425068483655" TEXT="&#x57fa;&#x672c;&#x539f;&#x7406;">
<node CREATED="1425068562425" ID="ID_1717325410" MODIFIED="1425068606059" TEXT="&#x4e00;&#x4e2a;Receive Free Descriptor&#x4ee3;&#x8868;&#x4e86;&#x4e00;&#x5757;&#x7a7a;&#x767d;&#x5185;&#x5b58;&#xff0c;&#x7528;&#x4e8e;&#x63a5;&#x6536;&#x6570;&#x636e;&#x5305;"/>
<node CREATED="1425068712979" ID="ID_1115932887" MODIFIED="1425069196153">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="SansSerif">&#24403;host&#24819;&#25509;&#25910;&#25968;&#25454;&#21253;&#26102;&#65292;&#23427;&#23558;&#26500;&#36896;&#19968;&#20010;Receive Free Descriptor&#65292;&#20854;&#20013;&#30340;BUF_ADDR&#25351;&#21521;&#23384;&#25918;&#25968;&#25454;&#21253;&#30340;&#20869;&#23384;&#12290;&#20043;&#21518;&#23427;&#23558;&#26356;&#26032;</font><font face="SansSerif" size="12.0pt">RFD ring&#30340;producer index&#65292;&#29992;&#20110;&#21521;EDMA&#34920;&#26126;&#26377;&#19968;&#20010;&#26032;&#30340;&#20869;&#23384;&#22359;&#21487;&#29992;&#20110;&#25509;&#25910;&#25968;&#25454;&#21253;&#12290;EDMA&#22312;&#21462;&#36208;&#36825;&#20010;RFD&#20043;&#21518;&#20250;&#26356;&#26032;RFD ring&#30340;<span style="font-size: 12.0pt; line-height: 115%; font-family: Times New Roman,serif">consumer&#160; </span></font><font face="SansSerif">index&#65292;&#29992;&#20110;&#21521;host&#34920;&#26126;EDMA&#24050;&#28040;&#36153;&#19968;&#20010;RFD.</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425069237167" ID="ID_1546561034" MODIFIED="1425069328316" TEXT="&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#x4e00;&#x4e2a;RFD&#x7528;&#x4e8e;&#x63a5;&#x6536;&#x4e00;&#x4e2a;&#x5305;&#xff0c;jumbo frame&#x5f00;&#x542f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x591a;&#x4e2a;RFD&#x63a5;&#x6536;&#x4e00;&#x4e2a;&#x5305;&#xff0c;&#xa;&#x4f46;&#x662f;&#x4e0d;&#x80fd;&#x7528;&#x4e00;&#x4e2a;RFD&#x63a5;&#x6536;&#x591a;&#x4e2a;&#x5305;"/>
</node>
<node CREATED="1425068484200" ID="ID_374902752" MODIFIED="1425068485568" TEXT="Receive Free Descriptor ">
<node CREATED="1425068835363" ID="ID_173452684" MODIFIED="1425068842668">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RFD_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425082702660" FOLDED="true" ID="ID_1768429558" MODIFIED="1425192692821" TEXT="Receive Return Descriptor">
<node CREATED="1425083370702" ID="ID_670600698" MODIFIED="1425083383159">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RRD_1.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425083390824" ID="ID_1450243843" MODIFIED="1425083399629">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RRD_2.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425083404807" ID="ID_1917281951" MODIFIED="1425083412425">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RRD_3.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425083415728" ID="ID_1851204238" MODIFIED="1425083423221">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RRD_4.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425067701644" ID="ID_855757729" MODIFIED="1425067704848" TEXT="transmit">
<node CREATED="1425190960944" FOLDED="true" ID="ID_1215103338" MODIFIED="1425192318049" TEXT="&#x57fa;&#x672c;&#x539f;&#x7406;">
<node CREATED="1425190997885" ID="ID_1965046805" MODIFIED="1425191060955">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_TPD_1.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425191110047" ID="ID_834444597" MODIFIED="1425191518035" TEXT="&#x5f53;host&#x7aef;&#x9700;&#x8981;&#x53d1;&#x9001;&#x5305;&#x65f6;&#xff0c;&#x5b83;&#x4f1a;&#x6784;&#x9020;&#x4e00;&#x4e2a;TPD&#xff0c;&#x586b;&#x5199;&#x597d;&#x5176;&#x4e2d;&#x7684;BUFFER_ADDR(&#x6570;&#x636e;&#x5305;&#x6240;&#x5b58;&#x653e;&#x7684;&#x7f13;&#x51b2;&#x533a;)&#x548c;BUF_LEN(&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5927;&#x5c0f;)&#xff0c;TPD&#x7531;EDMA&#x8bfb;&#x53d6;."/>
<node CREATED="1425191251939" ID="ID_1101265726" MODIFIED="1425191588972" TEXT="TPD Produce Index &#x7531;host&#x7aef;&#x66f4;&#x65b0;&#xff0c;&#x4ee5;&#x901a;&#x77e5;EDMA&#x6709;&#x65b0;&#x7684;&#x5305;&#x9700;&#x8981;&#x53d1;&#x9001;"/>
<node CREATED="1425191617962" ID="ID_1852354602" MODIFIED="1425191661470" TEXT="&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5305;&#x53ef;&#x80fd;&#x653e;&#x5728;&#x591a;&#x4e2a;descriptor&#x4e2d;"/>
</node>
<node CREATED="1425191345328" FOLDED="true" ID="ID_715442708" MODIFIED="1425197517082" TEXT="Transmit Packet Descriptor">
<node CREATED="1425192324274" ID="ID_1492984314" MODIFIED="1425192336150">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_TPD_2.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425192340999" ID="ID_1967920603" MODIFIED="1425192349461">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_TPD_3.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425067678973" ID="ID_260395543" MODIFIED="1425067687591" TEXT="EDMA registers"/>
</node>
<node CREATED="1429136852404" FOLDED="true" ID="ID_1638959711" MODIFIED="1439586300561" TEXT="&#x4e3a;&#x6536;&#x5305;&#x51c6;&#x5907;&#x63cf;&#x8ff0;&#x7b26;&#x548c;&#x7f13;&#x51b2;&#x533a;">
<node CREATED="1429137602256" ID="ID_1429944152" MODIFIED="1429137686313" TEXT="&#x521d;&#x59cb;&#x5316;&#x65f6;&#x4e3a;rx ring&#x4e2d;&#x7684;descriptor&#x5206;&#x914d;&#x597d;&#x7f13;&#x51b2;&#x533a;">
<node CREATED="1429137695654" ID="ID_274052488" MODIFIED="1429137705569" TEXT="edma_axi_probe">
<node CREATED="1429137714310" ID="ID_1832525645" MODIFIED="1429137719264" TEXT="edma_configure">
<node CREATED="1429137734512" ID="ID_1525193074" MODIFIED="1429137736286" TEXT="edma_alloc_rx_buf"/>
</node>
</node>
</node>
<node CREATED="1429137740284" ID="ID_1117864282" MODIFIED="1429137786025" TEXT="&#x6bcf;&#x6b21;&#x6536;&#x5b8c;&#x5305;&#x540e;&#x4e3a;&#x6bcf;&#x4e2a;&#x5df2;&#x7ecf;&#x5904;&#x7406;&#x8fc7;&#x7684;descriptor&#x91cd;&#x65b0;&#x586b;&#x5145;&#x7f13;&#x51b2;&#x533a;">
<node CREATED="1429137801192" ID="ID_1433879449" MODIFIED="1429137807519" TEXT="edma_poll">
<node CREATED="1429137808505" ID="ID_143954051" MODIFIED="1429137817653" TEXT="edma_rx_complete">
<node CREATED="1429137820136" ID="ID_178242403" MODIFIED="1429137829593" TEXT="edma_alloc_rx_buf"/>
</node>
</node>
</node>
<node CREATED="1429137820136" FOLDED="true" ID="ID_1898909144" LINK="#ID_1013329456" MODIFIED="1429138725274" TEXT="edma_alloc_rx_buf">
<node CREATED="1429138080537" ID="ID_918437976" MODIFIED="1429138514502">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;jumbo frame&#24320;&#21551;&#65292;&#21017;&#21253;&#30340;&#23454;&#38469;&#20869;&#23481;&#23558;&#34987;&#23384;&#25918;&#22312;skb_shinfo(skb)-&gt;frags[0]&#20869;&#65292;&#22240;&#27492;&#38656;&#35201;&#20570;2&#27425;&#20869;&#23384;&#20998;&#37197;&#65306;
    </p>
    <p>
      &#39318;&#20808;&#20998;&#37197;skb&#65306;netdev_alloc_skb()&#12290;&#22240;&#27492;&#21253;&#30340;&#23454;&#38469;&#20869;&#23481;&#19981;&#25918;&#22312;skb-&gt;data&#20013;&#65292;&#22240;&#27492;&#27492;&#22788;&#20998;&#37197;&#30340;&#32531;&#20914;&#21306;&#35201;&#23567;&#19968;&#20123;&#65292;&#20026;256&#23383;&#33410;&#65292;&#20027;&#35201;&#29992;&#20110;&#21327;&#35758;&#26632;&#22788;&#29702;&#36807;&#31243;&#20013;&#23384;&#25918;L2,L3,L4&#22836;&#37096;&#20449;&#24687;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#28982;&#21518;&#20026;skb_shinfo(skb)-&gt;frags[0]&#20998;&#37197;&#19968;&#20010;page&#12290;&#22240;&#20026;&#21253;&#30340;&#23454;&#38469;&#20869;&#23481;&#23384;&#25918;&#22312;&#27492;&#22788;&#65292;&#25152;&#20197;&#35201;&#23558;page&#26144;&#23556;&#20026;&#29289;&#29702;&#22320;&#22336;:
    </p>
    <p>
      dma_map_page()&#65292;&#24182;&#23558;&#26144;&#23556;&#21518;&#30340;&#29289;&#29702;&#22320;&#22336;&#23384;&#25918;&#22312;sw_desc-&gt;dma&#21644;hw_desc-&gt;buffer_addr&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429138080537" ID="ID_1893973469" MODIFIED="1429138687016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;jumbo frame&#19981;&#24320;&#21551;&#65292;&#21017;&#21253;&#30340;&#23454;&#38469;&#20869;&#23481;&#23558;&#34987;&#23384;&#25918;&#22312;skb-&gt;data&#20869;&#65292;&#22240;&#27492;&#21482;&#38656;&#35201;&#20570;1&#27425;&#20869;&#23384;&#20998;&#37197;&#65306;
    </p>
    <p>
      &#20998;&#37197;skb&#65306;netdev_alloc_skb()&#12290;&#22240;&#27492;&#21253;&#30340;&#23454;&#38469;&#20869;&#23481;&#25918;&#22312;skb-&gt;data&#20013;&#65292;&#22240;&#27492;&#27492;&#22788;&#20998;&#37197;&#30340;&#32531;&#20914;&#21306;&#35201;&#22823;&#19968;&#20123;&#65292;&#20026;1540&#23383;&#33410;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      &#22240;&#20026;&#21253;&#30340;&#23454;&#38469;&#20869;&#23481;&#23384;&#25918;&#22312;skb-&gt;data&#20013;&#65292;&#25152;&#20197;&#35201;&#23558;&#20854;&#26144;&#23556;&#20026;&#29289;&#29702;&#22320;&#22336;:
    </p>
    <p>
      dma_map_single()&#65292;&#24182;&#23558;&#26144;&#23556;&#21518;&#30340;&#29289;&#29702;&#22320;&#22336;&#23384;&#25918;&#22312;sw_desc-&gt;dma&#21644;hw_desc-&gt;buffer_addr&#20013;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425060885829" FOLDED="true" ID="ID_737185092" MODIFIED="1439586515447" TEXT="&#x6536;&#x5305;">
<node CREATED="1425062296590" ID="ID_1144152000" MODIFIED="1439586129498">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      edma_poll
    </p>
    <p>
      &#27599;&#20010;&#20013;&#26029;&#23545;&#24212;&#19968;&#20010;queue, &#25152;&#20197;&#21487;&#20197;&#26681;&#25454;&#20013;&#26029;&#21495;&#25214;&#21040;&#23545;&#24212;&#30340;queue
    </p>
  </body>
</html></richcontent>
<node CREATED="1425080118010" FOLDED="true" ID="ID_1013329456" MODIFIED="1439586211486">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      memory map before receiving
    </p>
  </body>
</html></richcontent>
<node CREATED="1425080160134" ID="ID_1180977911" MODIFIED="1425080167807" TEXT="normal">
<node CREATED="1425080251148" ID="ID_1294285904" MODIFIED="1425080261563">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RFD_normal.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425080168594" ID="ID_1144882826" MODIFIED="1425080179619" TEXT="jumbo frame enabled">
<node CREATED="1425080265264" ID="ID_16650510" MODIFIED="1425080272367">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_RFD_jumbo.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425080341724" FOLDED="true" ID="ID_616350413" MODIFIED="1439586250486" TEXT="memory map after receiving">
<node CREATED="1425099821655" FOLDED="true" ID="ID_1246317012" MODIFIED="1439586249671" TEXT="normal">
<node CREATED="1425100474907" ID="ID_204478266" MODIFIED="1425100481822">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_mmap_3.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425099828478" FOLDED="true" ID="ID_506113011" MODIFIED="1429133802858" TEXT="jumbo frame enabled">
<node CREATED="1425110812365" ID="ID_15074554" MODIFIED="1425110843741" TEXT="EDMA&#x7528;&#x591a;&#x4e2a;descriptor&#x5b58;&#x653e;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5305;">
<node CREATED="1425099839227" ID="ID_1093450995" MODIFIED="1425099861729">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_mmap_1.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425110812365" ID="ID_41932728" MODIFIED="1425110858583" TEXT="EDMA&#x7528;&#x4e00;&#x4e2a;descriptor&#x5b58;&#x653e;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5305;">
<node CREATED="1425099868170" ID="ID_1619575017" MODIFIED="1425099876085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_mmap_2.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1425082068747" FOLDED="true" ID="ID_1790352903" MODIFIED="1439586512093" TEXT="edma_rx_complete">
<node CREATED="1425082162628" ID="ID_1807687173" MODIFIED="1425082201137">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;queue id&#25214;&#21040;&#23545;&#24212;&#30340;struct edma_rfd_desc_ring&#160;&#160;:
    </p>
    <p>
      struct edma_rfd_desc_ring *erdr = c_info-&gt;rfd_ring[queue_id]
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425082241134" ID="ID_1407964768" MODIFIED="1425082323151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct edma_rfd_desc_ring *erdr-&gt;sw_next_to_clean&#34920;&#31034;&#19979;&#19968;&#20010;&#38656;&#35201;&#35835;&#21462;&#30340;descriptor,
    </p>
    <p>
      &#20063;&#23601;&#26159;&#21363;&#23558;&#25910;&#21462;&#30340;&#25968;&#25454;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1429134758151" ID="ID_1462140606" MODIFIED="1439586380309" TEXT="&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x8bfb;&#x53d6;&#x7684;descriptor&#x8bb0;&#x5f55;&#x5728;&#x5bc4;&#x5b58;&#x5668;RFD Index Register&#x4e2d;"/>
<node CREATED="1429134808781" ID="ID_995929215" MODIFIED="1439586438563" TEXT="&#x4e0a;&#x9762;2&#x4e2a;index&#x4e4b;&#x95f4;&#x7684;descriptor&#x5c31;&#x662f;&#x6240;&#x6709;&#x53ef;&#x4ee5;&#x63a5;&#x6536;&#x7684;descriptor"/>
<node CREATED="1425082396711" ID="ID_1700899053" MODIFIED="1425082446360" TEXT="unmap struct edma_sw_desc *sw_desc-&gt;dma&#x6240;&#x6307;&#x5411;&#x7684;&#x7f13;&#x51b2;&#x533a;"/>
<node CREATED="1425082613951" ID="ID_1031892748" MODIFIED="1425110432821" TEXT="&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5934;16&#x4e2a;&#x5b57;&#x8282;&#x662f;RRD&#xff0c;&#x8bfb;&#x53d6;RRD&#x83b7;&#x5f97;&#x5305;&#x7684;&#x957f;&#x5ea6;&#xff0c;&#x4ee5;&#x53ca;&#x4f7f;&#x7528;&#x4e86;&#x51e0;&#x4e2a;descriptor&#x6765;&#x5b58;&#x653e;&#x8fd9;&#x4e2a;&#x5305;">
<node CREATED="1425110468109" ID="ID_49852108" MODIFIED="1425110541895" TEXT="&#x5728;jumbo frame&#x6ca1;&#x6709;&#x5f00;&#x542f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;sw_desc-&gt;dma&#x6307;&#x5411;&#x7684;&#x5c31;&#x662f;skb-&gt;data&#x7684;&#x7269;&#x7406;&#x5730;&#x5740;&#xff0c;&#x56e0;&#x6b64;RRD&#x76f4;&#x63a5;&#x53ef;&#x4ee5;&#x4ece;skb-&gt;data&#x8bfb;&#x53d6;"/>
<node CREATED="1425110561438" ID="ID_682149319" MODIFIED="1425110689781" TEXT="&#x5728;jumbo frame&#x5f00;&#x542f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;sw_desc-&gt;dma&#x6307;&#x5411;&#x7684;&#x662f;skb_shinfo(skb)-&gt;frags[0].page, &#x5b83;&#x4e5f;&#x662f;&#x4e00;&#x4e2a;&#x7269;&#x7406;&#x5730;&#x5740;&#xff0c;&#x9700;&#x8981;&#x8c03;&#x7528;kmap_atomic()&#x5c06;&#x5176;&#x6620;&#x5c04;&#x5230;&#x5185;&#x6838;&#x865a;&#x62df;&#x5730;&#x5740;&#x7a7a;&#x95f4;&#xff0c;&#x624d;&#x80fd;&#x8bfb;&#x53d6;RRD&#x3002;"/>
</node>
<node CREATED="1425083385130" ID="ID_605543003" LINK="#ID_616350413" MODIFIED="1425110935950" TEXT="&#x6839;&#x636e;RRD&#x6784;&#x5efa;skb">
<node CREATED="1425110961972" ID="ID_1607766514" MODIFIED="1425111123762" TEXT="&#x4e00;&#x4e2a;skb&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5305;&#xff0c;&#x5f53;EDMA&#x7528;&#x591a;&#x4e2a;descriptor&#x5b58;&#x653e;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5305;&#x65f6;&#xff0c;&#x53ea;&#x4f7f;&#x7528;&#x7b2c;&#x4e00;&#x4e2a;descriptor&#x7684;skb&#xff0c;&#x5176;&#x5b83;descriptor&#x7684;skb&#x88ab;&#x91ca;&#x653e;&#xff0c;&#x800c;&#x5176;&#x5b83;descriptor&#x5b58;&#x50a8;&#x7684;&#x5185;&#x5bb9;&#x88ab;&#x6536;&#x96c6;&#x5230;&#x7b2c;&#x4e00;&#x4e2a;skb&#x7684;skb_shinfo(skb)-&gt;frags[x]&#x6570;&#x7ec4;&#x4e2d;"/>
<node CREATED="1425111146510" ID="ID_1463035417" MODIFIED="1425111247128" TEXT="&#x5f53;jumbo frame&#x6ca1;&#x6709;&#x5f00;&#x542f;&#x65f6;&#xff0c;&#x6570;&#x636e;&#x5305;&#x5b58;&#x653e;&#x5728;skb-&gt;data&#x548c;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#xa;skb-&gt;len&#x7b49;&#x4e8e;&#x6570;&#x636e;&#x5305;&#x957f;&#x5ea6;&#xff0c;&#x800c;skb-&gt;data_len&#x4e3a;0"/>
<node CREATED="1425111146510" ID="ID_1529908782" MODIFIED="1425111558480" TEXT="&#x5f53;jumbo frame&#x5f00;&#x542f;&#x65f6;&#xff0c;&#x6570;&#x636e;&#x5305;&#x5b58;&#x653e;&#x5728;skb_shinfo(skb)-&gt;frags[x]&#x6570;&#x7ec4;&#x4e2d;&#xff0c;skb-&gt;data&#x7b49;&#x4e8e;skb-&gt;tail&#xff0c;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x4e0d;&#x5305;&#x542b;&#x6570;&#x636e;&#x5305;&#x5185;&#x5bb9;&#x3002;&#xa;skb-&gt;len&#x7b49;&#x4e8e;skb-&gt;data_len&#xff0c;&#x4e5f;&#x7b49;&#x4e8e;&#x6570;&#x636e;&#x5305;&#x957f;&#x5ea6;&#xa;&#xa;&#x5728;&#x8981;&#x8bfb;&#x53d6;&#x5305;&#x7684;&#x5185;&#x5bb9;&#x4e4b;&#x524d;&#x9700;&#x8c03;&#x7528;pskb_may_pull()&#x5c06;&#x9700;&#x8981;&#x8bfb;&#x53d6;&#x7684;&#x62a5;&#x6587;&#x5934;&#x90e8;&#x4ece;skb_shinfo(skb)-&gt;frags[x]&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x3002;"/>
</node>
<node CREATED="1425111598245" ID="ID_82566698" MODIFIED="1425111603089" TEXT="&#x66f4;&#x65b0;skb-&gt;protocol"/>
<node CREATED="1425111634227" ID="ID_1407491541" MODIFIED="1425111645314" TEXT="&#x5c06;&#x63a5;&#x6536;queue&#x8bb0;&#x5f55;&#x5728;skb-&gt;queue_mapping"/>
<node CREATED="1425111682422" ID="ID_1506720122" MODIFIED="1425111710563" TEXT="&#x5c06;&#x5305;&#x7684;5&#x5143;&#x7ec4;&#x7684;hash&#x503c;&#x8bb0;&#x5f55;&#x5728;skb-&gt;rxhash"/>
<node CREATED="1425111725678" ID="ID_795333861" MODIFIED="1425111739664" TEXT="&#x5c06;flow cookie&#x8bb0;&#x5f55;&#x5728;skb-&gt;flow_cookie"/>
<node CREATED="1425111797763" ID="ID_187489083" MODIFIED="1425111812546" TEXT="&#x5c06;vlan&#x4fe1;&#x606f;&#x8bb0;&#x5f55;&#x5728;skb-&gt;vlan_tci"/>
<node CREATED="1425111855919" ID="ID_893219837" MODIFIED="1425111872662" TEXT="&#x8c03;&#x7528;napi_gro_receive()&#x5c06;&#x5305;&#x6295;&#x9012;&#x5230;&#x534f;&#x8bae;&#x6808;"/>
<node CREATED="1425111953878" ID="ID_1626530551" LINK="#ID_1013329456" MODIFIED="1425112047394" TEXT="&#x4e3a;&#x6bcf;&#x4e2a;&#x5df2;&#x7ecf;&#x5904;&#x7406;&#x8fc7;&#x7684;descriptor&#x91cd;&#x65b0;&#x586b;&#x5145;&#x7f13;&#x51b2;&#x533a;&#xff0c;&#x5e76;&#x901a;&#x77e5;EDMA&#x6709;&#x65b0;&#x7684;RFD&#x53ef;&#x7528;"/>
</node>
</node>
</node>
<node CREATED="1425060888976" ID="ID_945687058" MODIFIED="1439586516806" TEXT="&#x53d1;&#x5305;">
<node CREATED="1425197624268" FOLDED="true" ID="ID_704170562" MODIFIED="1439588658358" TEXT="edma_xmit">
<node CREATED="1425197664038" ID="ID_1950535201" MODIFIED="1425197671141" TEXT="memory map">
<node CREATED="1425197685037" FOLDED="true" ID="ID_1708270584" MODIFIED="1425210065625" TEXT="IPv6 TCP TSO">
<node CREATED="1425197707583" ID="ID_782214408" MODIFIED="1425197717459">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_1.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425198790238" ID="ID_723735640" MODIFIED="1425199064427" TEXT="&#x5f53;&#x9700;&#x8981;&#x5bf9;IPv6 &#x7684;TCP&#x8fdb;&#x884c;GSO&#x65f6;&#xff0c;&#x9700;&#x8981;2&#x4e2a;&#x989d;&#x5916;&#x7684;descriptor&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x5355;&#x7eaf;&#x7528;&#x4e8e;&#x4f20;&#x9012;&#x5305;&#x7684;&#x603b;&#x957f;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x5b58;&#x653e;TCP header&#x53ca;&#x4e4b;&#x524d;&#x7684;IP header, ETH header, &#x8fd9;&#x4e2a;&#x90e8;&#x5206;&#x7528;&#x4e8e;&#x62f7;&#x8d1d;&#x5230;&#x6bcf;&#x4e2a;TCP segmentation">
<node CREATED="1425200373377" ID="ID_839985626" MODIFIED="1425200451253" TEXT="&#x8fd9;&#x4e9b;&#x5934;&#x90e8;&#x53ef;&#x80fd;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#xa;&#x8fd9;&#x65f6;&#x9700;&#x8981;&#x8c03;&#x7528;pskb_may_pull()&#x5c06;&#x5176;&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
</node>
<node CREATED="1425200602923" ID="ID_526134175" MODIFIED="1425200793448">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22240;&#20026;&#36827;&#34892;TCP segmentation&#24517;&#28982;&#20250;&#37325;&#26032;&#35745;&#31639;checksum&#65292;&#25152;&#20197;GSO&#38544;&#21547;&#20102;checksum offloading
    </p>
    <p>
      &#22312;&#20570;checksum offloading&#20043;&#21069;&#65292;&#38656;&#35201;&#20808;&#28165;&#31354;TCP&#22836;&#37096;&#20869;checksum, &#28982;&#21518;&#36719;&#20214;&#35745;&#31639;&#20266;&#22836;&#37096;&#26816;&#39564;&#21644;&#65292;&#25918;&#20837;TCP&#22836;&#37096;
    </p>
    <p>
      &#30828;&#20214;&#20250;&#35745;&#31639;payload&#30340;&#26657;&#39564;&#21644;&#65292;&#20877;&#21152;&#21040;TCP&#22836;&#37096;&#20869;&#30340;checksum
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425208059710" ID="ID_1358559949" MODIFIED="1425208068227">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_6.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425197685037" FOLDED="true" ID="ID_953238134" MODIFIED="1429135506741" TEXT="IPv4 TCP TSO">
<node CREATED="1425197707583" ID="ID_1822807893" MODIFIED="1425197717459">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_1.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1425198790238" ID="ID_304292616" MODIFIED="1425208507246" TEXT="&#x5f53;&#x9700;&#x8981;&#x5bf9;IPv4 &#x7684;TCP&#x8fdb;&#x884c;GSO&#x65f6;&#xff0c;&#x9700;&#x8981;1&#x4e2a;&#x989d;&#x5916;&#x7684;descriptor&#xff0c;&#x7528;&#x4e8e;&#x5b58;&#x653e;TCP header&#x53ca;&#x4e4b;&#x524d;&#x7684;IP header, ETH header, &#x8fd9;&#x4e2a;&#x90e8;&#x5206;&#x7528;&#x4e8e;&#x62f7;&#x8d1d;&#x5230;&#x6bcf;&#x4e2a;TCP segmentation">
<node CREATED="1425200373377" ID="ID_584421861" MODIFIED="1425200451253" TEXT="&#x8fd9;&#x4e9b;&#x5934;&#x90e8;&#x53ef;&#x80fd;&#x4e0d;&#x5728;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#xff0c;&#xa;&#x8fd9;&#x65f6;&#x9700;&#x8981;&#x8c03;&#x7528;pskb_may_pull()&#x5c06;&#x5176;&#x642c;&#x79fb;&#x5230;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;"/>
</node>
<node CREATED="1425200602923" ID="ID_935691033" MODIFIED="1425200793448">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22240;&#20026;&#36827;&#34892;TCP segmentation&#24517;&#28982;&#20250;&#37325;&#26032;&#35745;&#31639;checksum&#65292;&#25152;&#20197;GSO&#38544;&#21547;&#20102;checksum offloading
    </p>
    <p>
      &#22312;&#20570;checksum offloading&#20043;&#21069;&#65292;&#38656;&#35201;&#20808;&#28165;&#31354;TCP&#22836;&#37096;&#20869;checksum, &#28982;&#21518;&#36719;&#20214;&#35745;&#31639;&#20266;&#22836;&#37096;&#26816;&#39564;&#21644;&#65292;&#25918;&#20837;TCP&#22836;&#37096;
    </p>
    <p>
      &#30828;&#20214;&#20250;&#35745;&#31639;payload&#30340;&#26657;&#39564;&#21644;&#65292;&#20877;&#21152;&#21040;TCP&#22836;&#37096;&#20869;&#30340;checksum
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425208059710" ID="ID_143420961" MODIFIED="1425208259198">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="pic/edma_tx_7.png" />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425209361329" FOLDED="true" ID="ID_651048518" MODIFIED="1429135526483" TEXT="IPv4 none S/G">
<node CREATED="1425209423765" ID="ID_995499282" MODIFIED="1425209432164">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_8.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425209411062" FOLDED="true" ID="ID_1378681224" MODIFIED="1429135682515" TEXT="IPv4 S/G">
<node CREATED="1425210040460" ID="ID_214682972" MODIFIED="1425210049000">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_9.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1425198578734" ID="ID_1679014529" MODIFIED="1439588341954">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;CPU&#21457;&#21253;&#21040;eth0&#26102;&#21508;&#26377;2&#20010;tx queue&#21487;&#20379;&#36873;&#25321;&#65292;&#21457;&#36865;&#26102;&#29992;skb-&gt;priorty&#36873;&#25321;2&#20010;queue&#30340;&#20854;&#20013;&#19968;&#20010;
    </p>
    <p>
      &#27599;&#20010;CPU&#21457;&#21253;&#21040;eth1&#26102;&#21508;&#26377;2&#20010;tx queue&#21487;&#20379;&#36873;&#25321;&#65292;&#21457;&#36865;&#26102;&#29992;skb-&gt;priorty&#36873;&#25321;2&#20010;queue&#30340;&#20854;&#20013;&#19968;&#20010;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1425197636899" ID="ID_1208873712" MODIFIED="1425197638197" TEXT="edma_tx_map_and_fill">
<node CREATED="1425200819320" FOLDED="true" ID="ID_1905805699" LINK="#ID_1708270584" MODIFIED="1425203663770">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#35201;&#20570;TCP&#30340;GSO&#65292;&#39318;&#20808;&#25226;TCP&#22836;&#37096;&#21450;&#20197;&#21069;&#30340;&#37096;&#20998;&#25644;&#31227;&#21040;skb-&gt;data&#19982;skb-&gt;tail&#20043;&#38388;
    </p>
    <p>
      &#28982;&#21518;&#35745;&#31639;TCP&#20266;&#22836;&#37096;&#30340;&#26657;&#39564;&#21644;&#65292;&#25918;&#20837;TCP&#22836;&#37096;&#12290;&#22635;&#20805;TPD&#20197;&#19979;&#22495;&#65288;&#20197;IPv6 TCP GSO&#20026;&#20363;&#65289;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425201700021" ID="ID_1026144352" MODIFIED="1425201708475">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_2.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425200898945" FOLDED="true" ID="ID_1917482573" MODIFIED="1425203521669">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#19981;&#20570;GSO&#19988;skb-&gt;ip_summed&#20026;CHECKSUM_PARTIAL&#65292;&#34920;&#31034;&#38656;&#35201;&#20570;checksum&#30340;offloading
    </p>
    <p>
      &#36825;&#26102;&#38656;&#35201;&#22635;&#20805;TPD&#30340;&#20197;&#19979;&#22495;
    </p>
  </body>
</html></richcontent>
<node CREATED="1425203498175" ID="ID_971985496" MODIFIED="1425203506528">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_3.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425203577206" FOLDED="true" ID="ID_1391096794" LINK="#ID_1708270584" MODIFIED="1425203873933" TEXT="&#x5982;&#x679c;skb-&gt;vlan_tci&#x4e0d;&#x4e3a;0&#xff0c;&#x8868;&#x793a;&#x9700;&#x8981;&#x8ba9;&#x786c;&#x4ef6;&#x63d2;&#x5165;vlan tag&#xff0c;&#x8fd9;&#x65f6;&#x9700;&#x8981;&#x586b;&#x5145;TPD&#x4ee5;&#x4e0b;&#x57df;&#xff08;&#x4ee5;IPv6 TCP GSO&#x4e3a;&#x4f8b;&#xff09;">
<node CREATED="1425203854838" ID="ID_1404784901" MODIFIED="1425203863480">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_4.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425203901330" FOLDED="true" ID="ID_199248720" MODIFIED="1425204057940" TEXT="&#x5141;&#x8bb8;&#x5c06;&#x5305;&#x53d1;&#x5230;&#x4efb;&#x4e00;&#x7aef;&#x53e3;">
<node CREATED="1425204044781" ID="ID_748422533" MODIFIED="1425204053823">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/edma_tx_5.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1425204133876" ID="ID_531464771" MODIFIED="1425204354150" TEXT="&#x5982;&#x679c;&#x8981;&#x505a;TCP&#x7684;GSO&#xff0c;&#x5219;&#x51c6;&#x5907;&#x4e00;&#x4e2a;descriptor&#x5b58;&#x653e;&#x5934;&#x90e8;(L2 + L3 + L4)&#xff0c;&#x8fd9;&#x4e2a;&#x5934;&#x90e8;&#x5c06;&#x88ab;EDMA&#x62f7;&#x8d1d;&#x4f5c;&#x4e3a;&#x6bcf;&#x4e2a;segmentation&#x7684;&#x5934;&#x90e8;">
<node CREATED="1425204370211" ID="ID_1811141852" MODIFIED="1425204407743" TEXT="&#x5982;&#x679c;&#x662f;IPv6 TCP GSO&#xff0c;&#x5219;&#x8fd8;&#x989d;&#x5916;&#x9700;&#x8981;&#x4e00;&#x4e2a;descriptor&#x7528;&#x4e8e;&#x4f20;&#x9012;&#x5305;&#x957f;"/>
</node>
<node CREATED="1425208574424" ID="ID_1519266605" MODIFIED="1425208646144" TEXT="&#x51c6;&#x5907;&#x4e00;&#x4e2a;descriptor&#x5b58;&#x653e;&#x5269;&#x4e0b;&#x7684;skb-&gt;data&#x4e0e;skb-&gt;tail&#x4e4b;&#x95f4;&#x7684;&#x5185;&#x5bb9;"/>
<node CREATED="1425208657618" ID="ID_420363335" MODIFIED="1425208696510" TEXT="&#x51c6;&#x5907;&#x5176;&#x4ed6;&#x7684;descriptor&#x5b58;&#x653e;skb_shinfo(skb)-&gt;frags&#x91cc;&#x7684;&#x5185;&#x5bb9;"/>
</node>
<node CREATED="1425208768195" ID="ID_1692964327" MODIFIED="1425208803758" TEXT="descriptor&#x51c6;&#x5907;&#x5b8c;&#x6bd5;&#xff0c;&#x66f4;&#x65b0;producer index&#x4ee5;&#x901a;&#x77e5;EDMA&#x6709;&#x65b0;&#x7684;&#x5305;&#x9700;&#x8981;&#x53d1;&#x9001;"/>
</node>
<node CREATED="1439588672325" ID="ID_1004061683" MODIFIED="1439588703447" TEXT="linux tx queue&#x548c;edma tx queue&#x7684;&#x5bf9;&#x5e94;&#x5173;&#x7cfb;&#x53ca;&#x9009;&#x62e9;&#x7b56;&#x7565;">
<node CREATED="1439588729108" ID="ID_1105402844" MODIFIED="1439588740466" TEXT="linux tx queue&#x9009;&#x62e9;&#x7b56;&#x7565;">
<node CREATED="1439588817585" ID="ID_1290572277" MODIFIED="1439588832205" TEXT="&#x5728;&#x4f55;&#x5904;&#x9009;&#x62e9;linux tx queue?">
<node CREATED="1439588836591" ID="ID_192217185" MODIFIED="1439588844037" TEXT="dev_queue_xmit()">
<node CREATED="1439588854813" ID="ID_1473459855" MODIFIED="1439588857457" TEXT="__dev_queue_xmit()">
<node CREATED="1439588868979" ID="ID_332817570" MODIFIED="1439588871430" TEXT="netdev_pick_tx()"/>
</node>
</node>
</node>
<node CREATED="1439588916823" ID="ID_1080317995" MODIFIED="1439590493141">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36873;&#25321;&#31574;&#30053;
    </p>
    <p>
      &#26080;&#35770;&#21738;&#31181;&#31574;&#30053;&#65292;&#36873;&#25321;&#30340;&#32467;&#26524;&#37117;&#23384;&#25918;&#22312;skb-&gt;queue_mapping&#20013;
    </p>
  </body>
</html></richcontent>
<node CREATED="1439588924136" ID="ID_1126327717" MODIFIED="1439588986976" TEXT="&#x5982;&#x679c;dev&#x53ea;&#x6709;&#x4e00;&#x4e2a;linu tx queue&#x5219;&#x53ea;&#x80fd;&#x9009;&#x62e9;&#x5b83;&#xff0c;&#x6b64;&#x65f6;skb-&gt;queue_mapping&#x4e3a;0"/>
<node CREATED="1439589008236" ID="ID_1889773041" MODIFIED="1439589119725" TEXT="&#x82e5;dev&#x4e0d;&#x6b62;&#x4e00;&#x4e2a;linux tx queue&#x5219;&#x5148;&#x770b;&#x770b;dev&#x9a71;&#x52a8;&#x81ea;&#x5df1;&#x6709;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff0c;&#xa;&#x8fd9;&#x91cc;&#x68c0;&#x67e5;dev-&gt;netdev_ops-&gt;ndo_select_queue()&#x51fd;&#x6570;&#x662f;&#x5426;&#x4e3a;&#x7a7a;">
<node CREATED="1439589175778" ID="ID_1164805743" MODIFIED="1439589202166" TEXT="&#x76ee;&#x524d;edma&#x5e76;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x81ea;&#x5df1;&#x7684;&#x9009;&#x62e9;&#x7b56;&#x7565;"/>
</node>
<node CREATED="1439589379811" ID="ID_1879218236" MODIFIED="1439589526404" TEXT="&#x524d;&#x9762;&#x7684;&#x7b56;&#x7565;&#x90fd;&#x4e0d;&#x594f;&#x6548;&#x65f6;&#xff0c;&#x7b2c;&#x4e09;&#x79cd;&#x7b56;&#x7565;&#x662f;&#xff1a;&#x82e5;&#x5305;&#x662f;socket&#x53d1;&#x51fa;&#x7684;&#xff0c;&#x5219;&#x770b;&#x770b;socket&#x81ea;&#x5df1;&#x6709;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x9009;&#x62e9;&#xff0c;&#xa;&#x8fd9;&#x91cc;&#x5373;&#x68c0;&#x67e5;skb-&gt;sk-&gt;sk_tx_queue_mapping"/>
<node CREATED="1439589911437" ID="ID_601311742" MODIFIED="1439590204770">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21069;&#38754;&#30340;&#31574;&#30053;&#37117;&#19981;&#22863;&#25928;&#26102;&#65292;&#31532;&#22235;&#31181;&#31574;&#30053;&#26159;&#65306;&#26681;&#25454;xps&#36873;&#25321;linux tx queue&#65292;
    </p>
    <p>
      &#35265;get_xps_queue, &#24403;&#21069;edma&#30340;xps&#31574;&#30053;&#26159;
    </p>
  </body>
</html></richcontent>
<node CREATED="1439590040128" ID="ID_8893597" MODIFIED="1439590141101" TEXT="cpu0 &#x5f80;eth0/eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;eth0/eth1&#x7684;linux tx queue 0"/>
<node CREATED="1439590040128" ID="ID_1888257525" MODIFIED="1439590169791" TEXT="cpu1 &#x5f80;eth0/eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;eth0/eth1&#x7684;linux tx queue 1"/>
<node CREATED="1439590040128" ID="ID_814982843" MODIFIED="1439590173260" TEXT="cpu2 &#x5f80;eth0/eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;eth0/eth1&#x7684;linux tx queue 2"/>
<node CREATED="1439590040128" ID="ID_1587598314" MODIFIED="1439590175634" TEXT="cpu3 &#x5f80;eth0/eth1&#x53d1;&#x5305;&#x65f6;&#xff0c;&#x9009;&#x62e9;eth0/eth1&#x7684;linux tx queue 3"/>
</node>
<node CREATED="1439590403739" ID="ID_508937867" MODIFIED="1439590411602" TEXT="&#x524d;&#x9762;&#x7684;&#x7b56;&#x7565;&#x90fd;&#x4e0d;&#x594f;&#x6548;&#x65f6;&#xff0c;&#x7b2c;&#x4e94;&#x79cd;&#x7b56;&#x7565;&#x662f;&#xff1a;"/>
</node>
</node>
<node CREATED="1439588729108" ID="ID_1072557540" LINK="#ID_1626734334" MODIFIED="1439590562250" TEXT="edma tx queue&#x9009;&#x62e9;&#x7b56;&#x7565;"/>
<node CREATED="1439591348786" ID="ID_441325535" MODIFIED="1439591368706" TEXT="linux tx queue&#x4e0e;edma tx queue&#x7684;&#x5173;&#x7cfb;">
<node CREATED="1439591390309" ID="ID_1414995424" MODIFIED="1439591651588">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      edma&#22312;&#21457;&#21253;&#26102;&#21363;edma_xmit&#20013;&#20250;&#24314;&#31435;linux tx queue&#21644;edma tx queue&#30340;&#23545;&#24212;&#20851;&#31995;&#65292;&#21363;
    </p>
    <p>
      netdev_priv(net_dev)-&gt;c_info-&gt;tpd_ring [ <font color="#ff0000">edma tx queue id</font>&#160;]-&gt;nq
    </p>
    <p>
      =
    </p>
    <p>
      netdev_get_tx_queue(net_dev, <font color="#ff0000">linux tx queue id</font>)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439591689767" ID="ID_1613058730" MODIFIED="1439591771267" TEXT="&#x6839;&#x636e;linux tx queue&#x9009;&#x62e9;&#x7b56;&#x7565;&#x548c;edma tx queue&#x9009;&#x62e9;&#x7b56;&#x7565;&#xff0c;&#x5177;&#x4f53;&#x7684;&#x5bf9;&#x5e94;&#x5173;&#x7cfb;&#x4e3a;">
<node CREATED="1439591800100" ID="ID_824987418" MODIFIED="1439591836582" TEXT="edma tx queue 0 &lt;=&gt; eth0&#x7684;linux tx queue 0"/>
<node CREATED="1439591800100" ID="ID_1712885983" MODIFIED="1439591887631" TEXT="edma tx queue 1 &lt;=&gt; eth0&#x7684;linux tx queue 0"/>
<node CREATED="1439591800100" ID="ID_684533651" MODIFIED="1439591917505" TEXT="edma tx queue 2 &lt;=&gt; eth1&#x7684;linux tx queue 0"/>
<node CREATED="1439591800100" ID="ID_61858689" MODIFIED="1439591922050" TEXT="edma tx queue 3 &lt;=&gt; eth1&#x7684;linux tx queue 0"/>
<node CREATED="1439591800100" ID="ID_1195520230" MODIFIED="1439591954193" TEXT="edma tx queue 4 &lt;=&gt; eth0&#x7684;linux tx queue 1"/>
<node CREATED="1439591800100" ID="ID_1786977935" MODIFIED="1439591958715" TEXT="edma tx queue 5 &lt;=&gt; eth0&#x7684;linux tx queue 1"/>
<node CREATED="1439591800100" ID="ID_1995158309" MODIFIED="1439591986093" TEXT="edma tx queue 6 &lt;=&gt; eth1&#x7684;linux tx queue 1"/>
<node CREATED="1439591800100" ID="ID_252121309" MODIFIED="1439591990931" TEXT="edma tx queue 7 &lt;=&gt; eth1&#x7684;linux tx queue 1"/>
<node CREATED="1439591800100" ID="ID_1204475134" MODIFIED="1439594460090" TEXT="edma tx queue 8 &lt;=&gt; eth0&#x7684;linux tx queue 2"/>
<node CREATED="1439591800100" ID="ID_1831670920" MODIFIED="1439594464665" TEXT="edma tx queue 9 &lt;=&gt; eth0&#x7684;linux tx queue 2"/>
<node CREATED="1439591800100" ID="ID_949751220" MODIFIED="1439594484029" TEXT="edma tx queue 10 &lt;=&gt; eth1&#x7684;linux tx queue 2"/>
<node CREATED="1439591800100" ID="ID_289863440" MODIFIED="1439594496506" TEXT="edma tx queue 11 &lt;=&gt; eth1&#x7684;linux tx queue 2"/>
<node CREATED="1439591800100" ID="ID_1393476663" MODIFIED="1439594550266" TEXT="edma tx queue 12 &lt;=&gt; eth0&#x7684;linux tx queue 3"/>
<node CREATED="1439591800100" ID="ID_1952443411" MODIFIED="1439594554496" TEXT="edma tx queue 13 &lt;=&gt; eth0&#x7684;linux tx queue 3"/>
<node CREATED="1439591800100" ID="ID_1391176209" MODIFIED="1439594542687" TEXT="edma tx queue 14 &lt;=&gt; eth1&#x7684;linux tx queue 3"/>
<node CREATED="1439591800100" ID="ID_318574016" MODIFIED="1439594545621" TEXT="edma tx queue 15 &lt;=&gt; eth1&#x7684;linux tx queue 3"/>
</node>
<node CREATED="1439591697486" ID="ID_820957559" MODIFIED="1439591718111" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x5efa;&#x7acb;&#x8fd9;&#x79cd;&#x5bf9;&#x5e94;&#x5173;&#x7cfb;?">
<node CREATED="1439594728622" ID="ID_1787844370" MODIFIED="1439594873241">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;edma tx queue&#27809;&#26377;&#31354;&#38386;&#26102;&#21487;&#20197;&#35843;&#29992;netif_tx_stop_queue()&#23558;edma tx queue&#20851;&#32852;&#30340;linux tx queue&#26242;&#20572;,
    </p>
    <p>
      &#36825;&#26679;linux&#23601;&#20250;&#26242;&#20572;&#21521;&#36825;&#20010;linux tx queue&#21457;&#21253;&#65292;&#20063;&#23601;&#26242;&#20572;&#20102;&#21521;&#23545;&#24212;&#30340;edma tx queue&#21457;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439594899895" ID="ID_96462047" MODIFIED="1439595034041" TEXT="tx&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x51fd;&#x6570;edma_tx_complete()&#x56de;&#x6536;&#x7f13;&#x51b2;&#x533a;&#x540e;edma tx queue&#x5c06;&#x6062;&#x590d;&#x53ef;&#x7528;&#xff0c;&#x6b64;&#x65f6;&#x8c03;&#x7528;netif_tx_wake_queue()&#x5c06;edma tx queue&#x5173;&#x8054;&#x7684;linux tx queue&#x5524;&#x9192;&#x6062;&#x590d;&#xff0c;&#x8fd9;&#x6837;linux&#x5c31;&#x4f1a;&#x7ee7;&#x7eed;&#x5411;&#x8fd9;&#x4e2a;linux tx queue&#x53d1;&#x5305;&#xff0c;&#x4e5f;&#x5c31;&#x6062;&#x590d;&#x4e86;&#x5411;&#x5bf9;&#x5e94;&#x7684;edma tx queue&#x53d1;&#x5305;"/>
</node>
</node>
</node>
</node>
<node CREATED="1429136866649" FOLDED="true" ID="ID_862908915" MODIFIED="1439586395959" TEXT="&#x4e3a;&#x53d1;&#x5305;&#x56de;&#x6536;&#x63cf;&#x8ff0;&#x7b26;&#x548c;&#x7f13;&#x51b2;&#x533a;">
<node CREATED="1429136932630" ID="ID_221611441" MODIFIED="1429136933717" TEXT="edma_poll">
<node CREATED="1429134233766" ID="ID_1448727144" MODIFIED="1439586305127">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#33509;&#26377;tx&#20013;&#26029;&#21457;&#29983;&#65292;&#34920;&#31034;&#21457;&#36865;&#23436;&#25104;&#65292;&#38656;&#35201;&#22238;&#25910;skb
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;edma_tx_complete
    </p>
  </body>
</html></richcontent>
<node CREATED="1429134408540" ID="ID_355297337" MODIFIED="1429134467307" TEXT="&#x5219;&#x6839;&#x636e;&#x4e2d;&#x65ad;&#x53f7;&#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684;queue&#xff0c;&#x5373;struct edma_tx_desc_ring&#x7ed3;&#x6784;"/>
<node CREATED="1429134593138" ID="ID_1766048857" MODIFIED="1429134651399" TEXT="&#x4e0b;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x56de;&#x6536;&#x7684;descriptor&#x8bb0;&#x5f55;&#x5728;tx_ring -&gt; sw_next_to_clean&#x4e2d;"/>
<node CREATED="1429134758151" ID="ID_1115020082" MODIFIED="1429134800228" TEXT="&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x56de;&#x6536;&#x7684;descriptor&#x8bb0;&#x5f55;&#x5728;&#x5bc4;&#x5b58;&#x5668;TPD Index Register&#x4e2d;"/>
<node CREATED="1429134808781" ID="ID_1389935753" MODIFIED="1429134850665" TEXT="&#x4e0a;&#x9762;2&#x4e2a;index&#x4e4b;&#x95f4;&#x7684;descriptor&#x5c31;&#x662f;&#x6240;&#x6709;&#x53ef;&#x4ee5;&#x56de;&#x6536;&#x7684;descriptor"/>
<node CREATED="1429134989798" ID="ID_473320462" MODIFIED="1429135030463" TEXT="edma_tx_unmap_and_free()&#x91ca;&#x653e;&#x63cf;&#x8ff0;&#x7b26;&#x53ca;&#x5176;&#x6240;&#x4f7f;&#x7528;&#x7684;&#x5185;&#x5b58;&#x533a;">
<node CREATED="1429135234679" ID="ID_1831565954" MODIFIED="1429135279896" TEXT="&#x82e5;&#x679c;&#x7f13;&#x51b2;&#x533a;&#x662f;&#x4ee5;page&#x7684;&#x5f62;&#x5f0f;&#x5206;&#x914d;&#x7684;&#xff0c;&#x5219;&#x7528;dma_unmap_page()&#x89e3;&#x9664;DMA&#x6620;&#x5c04;"/>
<node CREATED="1429135234679" ID="ID_1940078296" MODIFIED="1429135317843" TEXT="&#x82e5;&#x679c;&#x7f13;&#x51b2;&#x533a;&#x662f;&#x4ee5;skb&#x7684;&#x5f62;&#x5f0f;&#x5206;&#x914d;&#x7684;&#xff0c;&#x5219;&#x7528;dma_unmap_single()&#x89e3;&#x9664;DMA&#x6620;&#x5c04;"/>
<node CREATED="1429135707411" ID="ID_1309378501" MODIFIED="1429135810421">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;sw_desc-&gt;flags&#34920;&#26126;&#36825;&#20010;&#25551;&#36848;&#31526;&#26159;&#19968;&#20010;&#23436;&#25972;&#21253;&#30340;&#26368;&#21518;&#19968;&#20010;&#25551;&#36848;&#31526;&#65292;&#21017;&#21487;&#20197;&#37322;&#25918;sw_desc-&gt;skb&#25152;&#25351;&#21521;&#30340;skb
    </p>
    <p>
      dev_kfree_skb_any(skb)
    </p>
  </body>
</html></richcontent>
<node CREATED="1429135818199" ID="ID_708719779" MODIFIED="1429135868708" TEXT="&#x6ce8;&#x610f;&#xff0c;&#x5982;&#x679c;sw_desc-&gt;flags&#x8868;&#x660e;&#x8fd9;&#x4e2a;&#x63cf;&#x8ff0;&#x7b26;&#x4e0d;&#x662f;&#x4e00;&#x4e2a;&#x5b8c;&#x6574;&#x5305;&#x7684;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x63cf;&#x8ff0;&#x7b26;&#xff0c;&#x5219;sw_desc-&gt;skb&#x4e3a;&#x7a7a;&#x503c;"/>
</node>
</node>
<node CREATED="1429136309293" ID="ID_1888835019" MODIFIED="1429136316037" TEXT="&#x66f4;&#x65b0;TPD consumer index register&#x5bc4;&#x5b58;&#x5668;"/>
<node CREATED="1429136357927" ID="ID_635515096" MODIFIED="1429136417983">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21796;&#37266;&#27492;tx ring&#20851;&#32852;&#30340;tx queue&#65306;tx_ring -&gt; -&gt;sw_desc-&gt;nq
    </p>
    <p>
      netif_tx_wake_queue
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1429057986933" FOLDED="true" ID="ID_976346975" MODIFIED="1429119377935" TEXT="API">
<node CREATED="1429057992900" ID="ID_496190464" MODIFIED="1429058000979" TEXT="userspace API">
<node CREATED="1429058036118" ID="ID_234290724" MODIFIED="1429058044423" TEXT="/proc/sys/net/edma">
<node CREATED="1429058060913" ID="ID_1464594777" MODIFIED="1429058061618" TEXT="default_lan_tag"/>
<node CREATED="1429058068491" ID="ID_1031847587" MODIFIED="1429058068992" TEXT="default_wan_tag"/>
</node>
</node>
</node>
</node>
</node>
</node>
</map>
