<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1366517152033" ID="ID_566596908" MODIFIED="1366517173694" TEXT="Linux_Locking_Technique">
<node CREATED="1366517248509" FOLDED="true" ID="ID_816662334" MODIFIED="1413847383089" POSITION="right" TEXT="&#x4e0a;&#x4e0b;&#x6587;">
<node CREATED="1412723920934" ID="ID_565749264" MODIFIED="1412723929871" TEXT="&#x8fdb;&#x7a0b;">
<node CREATED="1412723978503" ID="ID_1954867770" MODIFIED="1412723984311" TEXT="&#x8fdb;&#x7a0b;"/>
<node CREATED="1412723984758" ID="ID_684274171" MODIFIED="1412723990254" TEXT="&#x7ebf;&#x7a0b;"/>
</node>
<node CREATED="1412723930760" ID="ID_1612845083" MODIFIED="1412723941318" TEXT="&#x4e2d;&#x65ad;">
<node CREATED="1412723942902" ID="ID_1015685658" MODIFIED="1412723954844" TEXT="&#x786c;&#x4e2d;&#x65ad;"/>
<node CREATED="1412723955326" ID="ID_1552854015" MODIFIED="1412723963439" TEXT="&#x8f6f;&#x4e2d;&#x65ad;"/>
</node>
</node>
<node CREATED="1366517259331" FOLDED="true" ID="ID_352030887" MODIFIED="1422496711372" POSITION="right" TEXT="&#x9501;">
<node CREATED="1412721325400" FOLDED="true" ID="ID_459189543" MODIFIED="1412725805658" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;">
<node CREATED="1412721351190" ID="ID_1683055669" MODIFIED="1412721359331" TEXT="&#x4e34;&#x754c;&#x533a;&#xff08;critical region&#xff09;">
<node CREATED="1412721381503" ID="ID_869655077" MODIFIED="1412721382714" TEXT="&#x6240;&#x8c13;&#x4e34;&#x754c;&#x533a;&#x5c31;&#x662f;&#x8bbf;&#x95ee;&#x548c;&#x64cd;&#x4f5c;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7684;&#x4ee3;&#x7801;&#x6bb5;"/>
</node>
<node CREATED="1412725703847" ID="ID_837669563" MODIFIED="1412725713147" TEXT="&#x7ade;&#x4e89;&#x6761;&#x4ef6;">
<node CREATED="1412725727529" ID="ID_411596847" MODIFIED="1412725730031" TEXT="&#x4e24;&#x4e2a;&#x6216;&#x66f4;&#x591a;&#x7ebf;&#x7a0b;&#x540c;&#x65f6;&#x64cd;&#x4f5c;&#x8d44;&#x6e90;&#x65f6;&#x5c06;&#x4f1a;&#x5bfc;&#x81f4;&#x4e0d;&#x4e00;&#x81f4;&#x7684;&#x7ed3;&#x679c;"/>
</node>
<node CREATED="1412721410014" ID="ID_1163812330" MODIFIED="1412721412022" TEXT="&#x5e76;&#x53d1;">
<node CREATED="1412721424848" ID="ID_1881228496" MODIFIED="1412721431741" TEXT="&#x5e76;&#x53d1;&#x4f1a;&#x9020;&#x6210;&#x7ade;&#x4e89;&#x6761;&#x4ef6;"/>
<node CREATED="1412721448080" ID="ID_1295033802" MODIFIED="1412721448858" TEXT="&#x9020;&#x6210;&#x5e76;&#x53d1;&#x6267;&#x884c;&#x7684;&#x539f;&#x56e0;">
<node CREATED="1412721459958" ID="ID_1325068025" MODIFIED="1412721461028" TEXT="&#x4e2d;&#x65ad;"/>
<node CREATED="1412721475878" ID="ID_1917842956" MODIFIED="1412721476772" TEXT="&#x8f6f;&#x4e2d;&#x65ad;&#x548c;tasklet"/>
<node CREATED="1412721496055" ID="ID_971920385" MODIFIED="1412721499991" TEXT="&#x5185;&#x6838;&#x62a2;&#x5360;&#x2014;&#x2014;&#x4efb;&#x52a1;&#x7684;&#x4f18;&#x5148;&#x7ea7;"/>
<node CREATED="1412721516038" ID="ID_1810413910" MODIFIED="1412721516646" TEXT="&#x7761;&#x7720;&#x53ca;&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x7684;&#x540c;&#x6b65;"/>
<node CREATED="1412721517582" ID="ID_28100326" MODIFIED="1412721519852" TEXT="SMP"/>
</node>
</node>
<node CREATED="1412721540318" ID="ID_1018682996" MODIFIED="1412721547757" TEXT="&#x540c;&#x6b65;&#xff08;synchronization&#xff09;">
<node CREATED="1412721561878" ID="ID_891265402" MODIFIED="1412721562606" TEXT="&#x907f;&#x514d;&#x5e76;&#x53d1;&#xff08;&#x591a;&#x4e2a;&#x6267;&#x884c;&#x7ebf;&#x7a0b;&#x5e76;&#x53d1;&#x8bbf;&#x95ee;&#x540c;&#x4e00;&#x4e2a;&#x8d44;&#x6e90;&#xff09;&#x548c;&#x9632;&#x6b62;&#x7ade;&#x4e89;&#x6761;&#x4ef6;&#xff08;&#x4e24;&#x4e2a;&#x6267;&#x884c;&#x7ebf;&#x7a0b;&#x5904;&#x4e8e;&#x540c;&#x4e00;&#x4e34;&#x754c;&#x533a;&#xff09;&#x88ab;&#x79f0;&#x4e3a;&#x540c;&#x6b65;"/>
</node>
<node CREATED="1412725536103" ID="ID_313057380" MODIFIED="1412725804260" TEXT="&#x6b7b;&#x9501;">
<node CREATED="1412725638063" ID="ID_993702420" MODIFIED="1412725640991" TEXT="&#x8003;&#x8651;&#x4e24;&#x4e2a;&#x72ec;&#x7acb;&#x7684;&#x4e34;&#x754c;&#x6bb5;&#xff0c;&#x5404;&#x81ea;&#x4fdd;&#x62a4;&#x4e0d;&#x540c;&#x7684;&#x8d44;&#x6e90;&#x3002;&#x6bcf;&#x4e2a;&#x8d44;&#x6e90;&#x62e5;&#x6709;&#x4e00;&#x4e2a;&#x9501;&#xff0c;&#x5728;&#x672c;&#x4f8b;&#x4e2d;&#x79f0;&#x4e3a; A &#x548c; B&#x3002;&#x5047;&#x8bbe;&#x6709;&#x4e24;&#x4e2a;&#x7ebf;&#x7a0b;&#x9700;&#x8981;&#x8bbf;&#x95ee;&#x8fd9;&#x4e9b;&#x8d44;&#x6e90;&#xff0c;&#x7ebf;&#x7a0b; X &#x83b7;&#x53d6;&#x4e86;&#x9501; A&#xff0c;&#x7ebf;&#x7a0b; Y &#x83b7;&#x53d6;&#x4e86;&#x9501; B&#x3002;&#x5f53;&#x8fd9;&#x4e9b;&#x9501;&#x90fd;&#x88ab;&#x6301;&#x6709;&#x65f6;&#xff0c;&#x6bcf;&#x4e2a;&#x7ebf;&#x7a0b;&#x90fd;&#x8bd5;&#x56fe;&#x5360;&#x6709;&#x5176;&#x4ed6;&#x7ebf;&#x7a0b;&#x5f53;&#x524d;&#x6301;&#x6709;&#x7684;&#x9501;&#xff08;&#x7ebf;&#x7a0b; X &#x60f3;&#x8981;&#x9501; B&#xff0c;&#x7ebf;&#x7a0b; Y &#x60f3;&#x8981;&#x9501; A&#xff09;&#x3002;&#x8fd9;&#x65f6;&#x5019;&#x7ebf;&#x7a0b;&#x5c31;&#x88ab;&#x6b7b;&#x9501;&#x4e86;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x4eec;&#x90fd;&#x6301;&#x6709;&#x4e00;&#x4e2a;&#x9501;&#x800c;&#x4e14;&#x8fd8;&#x60f3;&#x8981;&#x5176;&#x4ed6;&#x9501;&#x3002;"/>
<node CREATED="1412725657775" ID="ID_1344791495" MODIFIED="1412725660383" TEXT="&#x89e3;&#x51b3;&#x65b9;&#x6848;">
<node CREATED="1412725677913" ID="ID_1697853474" MODIFIED="1412725680355" TEXT="&#x603b;&#x662f;&#x6309;&#x76f8;&#x540c;&#x6b21;&#x5e8f;&#x83b7;&#x53d6;&#x9501;&#xff0c;&#x4ece;&#x800c;&#x4f7f;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x5f97;&#x4ee5;&#x5b8c;&#x6210;"/>
</node>
</node>
</node>
<node CREATED="1366517313845" FOLDED="true" ID="ID_1587709988" MODIFIED="1412721195259" TEXT="&#x539f;&#x5b50;&#x64cd;&#x4f5c;">
<node CREATED="1366517342587" ID="ID_475453190" MODIFIED="1366517346719" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1366517347805" ID="ID_174459213" MODIFIED="1366517390568" TEXT="&#x8be5;&#x64cd;&#x4f5c;&#x7edd;&#x4e0d;&#x4f1a;&#x5728;&#x6267;&#x884c;&#x5b8c;&#x6bd5;&#x524d;&#x88ab;&#x4efb;&#x4f55;&#x5176;&#x4ed6;&#x4efb;&#x52a1;&#x6216;&#x4e8b;&#x4ef6;&#x6253;&#x65ad;&#xff0c;&#xa;&#x5373;&#x5b83;&#x662f;&#x6700;&#x5c0f;&#x7684;&#x6267;&#x884c;&#x5355;&#x4f4d;&#xff0c;&#x4e0d;&#x53ef;&#x80fd;&#x6709;&#x6bd4;&#x5b83;&#x66f4;&#x5c0f;&#x7684;&#x6267;&#x884c;&#x5355;&#x4f4d;"/>
</node>
<node CREATED="1366517413050" ID="ID_315587387" MODIFIED="1366517416539" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1366517432305" ID="ID_1342714725" MODIFIED="1366517450106" TEXT="&#x539f;&#x5b50;&#x64cd;&#x4f5c;&#x9700;&#x8981;&#x786c;&#x4ef6;&#x7684;&#x652f;&#x6301;&#xff0c;&#x56e0;&#x6b64;&#x662f;&#x67b6;&#x6784;&#x76f8;&#x5173;&#x7684;&#xff0c;&#x5176;API&#x548c;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x5b9a;&#x4e49;&#x90fd;&#x5b9a;&#x4e49;&#x5728;&#xa;&#x5185;&#x6838;&#x6e90;&#x7801;&#x6811;&#x7684;include/asm/atomic.h&#x6587;&#x4ef6;&#x4e2d;&#xff0c;&#xa;&#x5b83;&#x4eec;&#x90fd;&#x4f7f;&#x7528;&#x6c47;&#x7f16;&#x8bed;&#x8a00;&#x5b9e;&#x73b0;&#xff0c;&#x56e0;&#x4e3a;C&#x8bed;&#x8a00;&#x5e76;&#x4e0d;&#x80fd;&#x5b9e;&#x73b0;&#x8fd9;&#x6837;&#x7684;&#x64cd;&#x4f5c;"/>
<node CREATED="1366517512795" FOLDED="true" ID="ID_1460859317" MODIFIED="1366519116585" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1366517943448" FOLDED="true" ID="ID_549977718" MODIFIED="1366519114002" TEXT="typedef struct &#xa;{&#xa;    volatile int counter; &#xa;} &#xa;atomic_t;">
<node CREATED="1366517998887" ID="ID_1452675985" MODIFIED="1366518009124" TEXT="volatile&#x4fee;&#x9970;&#x5b57;&#x6bb5;&#x544a;&#x8bc9;gcc&#x4e0d;&#x8981;&#x5bf9;&#x8be5;&#x7c7b;&#x578b;&#x7684;&#x6570;&#x636e;&#x505a;&#x4f18;&#x5316;&#x5904;&#x7406;&#xff0c;&#xa;&#x5bf9;&#x5b83;&#x7684;&#x8bbf;&#x95ee;&#x90fd;&#x662f;&#x5bf9;&#x5185;&#x5b58;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x5bf9;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x8bbf;&#x95ee;"/>
</node>
</node>
<node CREATED="1366517520023" FOLDED="true" ID="ID_1062027600" MODIFIED="1366519110827" TEXT="API">
<node CREATED="1366518026562" FOLDED="true" ID="ID_197771565" MODIFIED="1366519101899" TEXT="atomic_read(atomic_t * v)">
<node CREATED="1366518059706" ID="ID_1636684976" MODIFIED="1366518062309" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;&#x8fdb;&#x884c;&#x539f;&#x5b50;&#x8bfb;&#x64cd;&#x4f5c;&#xff0c;&#x5b83;&#x8fd4;&#x56de;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x7684;&#x503c;"/>
</node>
<node CREATED="1366518077488" FOLDED="true" ID="ID_604922872" MODIFIED="1366519102553" TEXT="atomic_set(atomic_t * v, int i)">
<node CREATED="1366518093588" ID="ID_1255890861" MODIFIED="1366518095734" TEXT="&#x8bbe;&#x7f6e;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x7684;&#x503c;&#x4e3a;i"/>
</node>
<node CREATED="1366518719376" FOLDED="true" ID="ID_1165766638" MODIFIED="1366519103153" TEXT="void atomic_add(int i, atomic_t *v)">
<node CREATED="1366518733878" ID="ID_184382306" MODIFIED="1366518735401" TEXT="&#x7ed9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x589e;&#x52a0;&#x503c;i"/>
</node>
<node CREATED="1366518749734" FOLDED="true" ID="ID_1729866498" MODIFIED="1366519103729" TEXT="atomic_sub(int i, atomic_t *v)">
<node CREATED="1366518761150" ID="ID_1924566812" MODIFIED="1366518762726" TEXT="&#x4ece;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x4e2d;&#x51cf;&#x53bb;i"/>
</node>
<node CREATED="1366518775861" FOLDED="true" ID="ID_1094028378" MODIFIED="1366519104265" TEXT="int atomic_sub_and_test(int i, atomic_t *v)">
<node CREATED="1366518791231" ID="ID_1594379484" MODIFIED="1366518792736" TEXT="&#x4ece;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x4e2d;&#x51cf;&#x53bb;i&#xff0c;&#x5e76;&#x5224;&#x65ad;&#x7ed3;&#x679c;&#x662f;&#x5426;&#x4e3a;0&#xff0c;&#x5982;&#x679c;&#x4e3a;0&#xff0c;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x5047;"/>
</node>
<node CREATED="1366518807450" FOLDED="true" ID="ID_1618768739" MODIFIED="1366519105089" TEXT="void atomic_inc(atomic_t *v)">
<node CREATED="1366518824025" ID="ID_1711615232" MODIFIED="1366518825746" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x589e;&#x52a0;1"/>
</node>
<node CREATED="1366518840466" FOLDED="true" ID="ID_1539358435" MODIFIED="1366519105625" TEXT="void atomic_dec(atomic_t *v)">
<node CREATED="1366518851819" ID="ID_856360212" MODIFIED="1366518853452" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x51cf;1"/>
</node>
<node CREATED="1366518872358" FOLDED="true" ID="ID_138808549" MODIFIED="1366519106137" TEXT="int atomic_dec_and_test(atomic_t *v)">
<node CREATED="1366518887071" ID="ID_1243878404" MODIFIED="1366518888748" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x51cf;1&#xff0c;&#x5e76;&#x5224;&#x65ad;&#x7ed3;&#x679c;&#x662f;&#x5426;&#x4e3a;0&#xff0c;&#x5982;&#x679c;&#x4e3a;0&#xff0c;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x5047;"/>
</node>
<node CREATED="1366518903308" FOLDED="true" ID="ID_978078775" MODIFIED="1366519106745" TEXT="int atomic_inc_and_test(atomic_t *v)">
<node CREATED="1366518915859" ID="ID_694095264" MODIFIED="1366518917665" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x589e;&#x52a0;1&#xff0c;&#x5e76;&#x5224;&#x65ad;&#x7ed3;&#x679c;&#x662f;&#x5426;&#x4e3a;0&#xff0c;&#x5982;&#x679c;&#x4e3a;0&#xff0c;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x5047;"/>
</node>
<node CREATED="1366518930582" FOLDED="true" ID="ID_1331984997" MODIFIED="1366519107177" TEXT="int atomic_add_negative(int i, atomic_t *v)">
<node CREATED="1366518942862" ID="ID_295644159" MODIFIED="1366518943848" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x589e;&#x52a0;I&#xff0c;&#x5e76;&#x5224;&#x65ad;&#x7ed3;&#x679c;&#x662f;&#x5426;&#x4e3a;&#x8d1f;&#x6570;&#xff0c;&#x5982;&#x679c;&#x662f;&#xff0c;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x5047;"/>
</node>
<node CREATED="1366518956596" FOLDED="true" ID="ID_1601471532" MODIFIED="1366519107657" TEXT="int atomic_add_return(int i, atomic_t *v)">
<node CREATED="1366518969144" ID="ID_692815036" MODIFIED="1366518970793" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x589e;&#x52a0;i&#xff0c;&#x5e76;&#x4e14;&#x8fd4;&#x56de;&#x6307;&#x5411;v&#x7684;&#x6307;&#x9488;"/>
</node>
<node CREATED="1366518985144" FOLDED="true" ID="ID_1983827019" MODIFIED="1366519108177" TEXT="int atomic_sub_return(int i, atomic_t *v)">
<node CREATED="1366518998412" ID="ID_942309875" MODIFIED="1366519000439" TEXT="&#x4ece;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x4e2d;&#x51cf;&#x53bb;i&#xff0c;&#x5e76;&#x4e14;&#x8fd4;&#x56de;&#x6307;&#x5411;v&#x7684;&#x6307;&#x9488;"/>
</node>
<node CREATED="1366519013813" FOLDED="true" ID="ID_1963610158" MODIFIED="1366519108905" TEXT="int atomic_inc_return(atomic_t * v)">
<node CREATED="1366519028149" ID="ID_867824570" MODIFIED="1366519029941" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x589e;&#x52a0;1&#x5e76;&#x4e14;&#x8fd4;&#x56de;&#x6307;&#x5411;v&#x7684;&#x6307;&#x9488;"/>
</node>
<node CREATED="1366519043467" FOLDED="true" ID="ID_560869411" MODIFIED="1366519109690" TEXT="int atomic_dec_return(atomic_t * v)">
<node CREATED="1366519056046" ID="ID_676005793" MODIFIED="1366519057913" TEXT="&#x5bf9;&#x539f;&#x5b50;&#x7c7b;&#x578b;&#x7684;&#x53d8;&#x91cf;v&#x539f;&#x5b50;&#x5730;&#x51cf;1&#x5e76;&#x4e14;&#x8fd4;&#x56de;&#x6307;&#x5411;v&#x7684;&#x6307;&#x9488;"/>
</node>
</node>
</node>
<node CREATED="1366517462952" ID="ID_807641185" MODIFIED="1366519822631" TEXT="&#x7528;&#x9014;">
<node CREATED="1366517492051" ID="ID_1632984986" MODIFIED="1366517493367" TEXT="&#x539f;&#x5b50;&#x64cd;&#x4f5c;&#x4e3b;&#x8981;&#x7528;&#x4e8e;&#x5b9e;&#x73b0;&#x8d44;&#x6e90;&#x8ba1;&#x6570;&#xff0c;&#x5f88;&#x591a;&#x5f15;&#x7528;&#x8ba1;&#x6570;(refcnt)&#x5c31;&#x662f;&#x901a;&#x8fc7;&#x539f;&#x5b50;&#x64cd;&#x4f5c;&#x5b9e;&#x73b0;&#x7684;"/>
</node>
</node>
<node CREATED="1366519120395" FOLDED="true" ID="ID_659829349" MODIFIED="1412726474738" TEXT="&#x4fe1;&#x53f7;&#x91cf;(semaphore)">
<node CREATED="1366519220522" ID="ID_1092863241" MODIFIED="1366519836296" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1366519240739" ID="ID_1279556427" MODIFIED="1366519254475" TEXT="&#x4fe1;&#x53f7;&#x91cf;&#x5728;&#x521b;&#x5efa;&#x65f6;&#x9700;&#x8981;&#x8bbe;&#x7f6e;&#x4e00;&#x4e2a;&#x521d;&#x59cb;&#x503c;&#xff0c;&#x8868;&#x793a;&#x540c;&#x65f6;&#x53ef;&#x4ee5;&#x6709;&#x51e0;&#x4e2a;&#x4efb;&#x52a1;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#xa;&#x521d;&#x59cb;&#x503c;&#x4e3a;1&#x5c31;&#x53d8;&#x6210;&#x4e92;&#x65a5;&#x9501;&#xff08;Mutex&#xff09;&#xff0c;&#x5373;&#x540c;&#x65f6;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;"/>
<node CREATED="1366519267907" ID="ID_1917331743" MODIFIED="1366519293308" TEXT="&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x8981;&#x60f3;&#x8bbf;&#x95ee;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x9996;&#x5148;&#x5fc5;&#x987b;&#x5f97;&#x5230;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x83b7;&#x53d6;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x64cd;&#x4f5c;&#x5c06;&#x628a;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x503c;&#x51cf;1&#xff0c;&#xa;&#x82e5;&#x5f53;&#x524d;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x503c;&#x4e3a;&#x8d1f;&#x6570;&#xff0c;&#x8868;&#x660e;&#x65e0;&#x6cd5;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x8be5;&#x4efb;&#x52a1;&#x5fc5;&#x987b;&#x6302;&#x8d77;&#x5728;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x7b49;&#x5f85;&#x961f;&#x5217;&#x7b49;&#x5f85;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x53ef;&#x7528;&#xff1b;&#xa;&#x82e5;&#x5f53;&#x524d;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x503c;&#x4e3a;&#x975e;&#x8d1f;&#x6570;&#xff0c;&#x8868;&#x793a;&#x53ef;&#x4ee5;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x56e0;&#x800c;&#x53ef;&#x4ee5;&#x7acb;&#x523b;&#x8bbf;&#x95ee;&#x88ab;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;"/>
<node CREATED="1366519306211" ID="ID_1384995256" MODIFIED="1366519318725" TEXT="&#x5f53;&#x4efb;&#x52a1;&#x8bbf;&#x95ee;&#x5b8c;&#x88ab;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x540e;&#xff0c;&#x5fc5;&#x987b;&#x91ca;&#x653e;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x91ca;&#x653e;&#x4fe1;&#x53f7;&#x91cf;&#x901a;&#x8fc7;&#x628a;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x503c;&#x52a0;1&#x5b9e;&#x73b0;&#xff0c;&#xa;&#x5982;&#x679c;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x503c;&#x4e3a;&#x975e;&#x6b63;&#x6570;&#xff0c;&#x8868;&#x660e;&#x6709;&#x4efb;&#x52a1;&#x7b49;&#x5f85;&#x5f53;&#x524d;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x56e0;&#x6b64;&#x5b83;&#x4e5f;&#x5524;&#x9192;&#x6240;&#x6709;&#x7b49;&#x5f85;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x4efb;&#x52a1;"/>
</node>
<node CREATED="1366519352476" ID="ID_658928647" MODIFIED="1366519359429" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1366519360610" ID="ID_1529346488" MODIFIED="1412725825743" TEXT="API">
<node CREATED="1366519375899" FOLDED="true" ID="ID_1573234095" MODIFIED="1412725828962" TEXT="void sema_init (struct semaphore *sem, int val)">
<node CREATED="1366519391426" ID="ID_1190395975" MODIFIED="1366519392471" TEXT="&#x521d;&#x59cb;&#x5316;&#x8bbe;&#x7f6e;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x521d;&#x503c;&#xff0c;&#x5b83;&#x8bbe;&#x7f6e;&#x4fe1;&#x53f7;&#x91cf;sem&#x7684;&#x503c;&#x4e3a;val"/>
</node>
<node CREATED="1366519471864" FOLDED="true" ID="ID_675718005" MODIFIED="1366519545905" TEXT="void down(struct semaphore * sem)">
<node CREATED="1366519501674" ID="ID_643031323" MODIFIED="1366519530570" TEXT="&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;sem&#xff0c;&#x5b83;&#x4f1a;&#x5bfc;&#x81f4;&#x7761;&#x7720;&#xff0c;&#x56e0;&#x6b64;&#x4e0d;&#x80fd;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#xff08;&#x5305;&#x62ec;IRQ&#x4e0a;&#x4e0b;&#x6587;&#x548c;softirq&#x4e0a;&#x4e0b;&#x6587;&#xff09;&#x4f7f;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x3002;&#xa;&#x8be5;&#x51fd;&#x6570;&#x5c06;&#x628a;sem&#x7684;&#x503c;&#x51cf;1&#xff0c;&#x5982;&#x679c;&#x4fe1;&#x53f7;&#x91cf;sem&#x7684;&#x503c;&#x975e;&#x8d1f;&#xff0c;&#x5c31;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#xff0c;&#x5426;&#x5219;&#x8c03;&#x7528;&#x8005;&#x5c06;&#x88ab;&#x6302;&#x8d77;&#xff0c;&#xa;&#x76f4;&#x5230;&#x522b;&#x7684;&#x4efb;&#x52a1;&#x91ca;&#x653e;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x624d;&#x80fd;&#x7ee7;&#x7eed;&#x8fd0;&#x884c;"/>
</node>
<node CREATED="1366519548192" FOLDED="true" ID="ID_760232191" MODIFIED="1366519627155" TEXT="int down_interruptible(struct semaphore * sem)">
<node CREATED="1366519570217" ID="ID_549010810" MODIFIED="1366519601186" TEXT="&#x4e0e;down&#x7c7b;&#x4f3c;&#xff0c;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x4e3a;&#xff0c;down&#x4e0d;&#x4f1a;&#x88ab;&#x4fe1;&#x53f7;&#xff08;signal&#xff09;&#x6253;&#x65ad;&#xff0c;&#x4f46;down_interruptible&#x80fd;&#x88ab;&#x4fe1;&#x53f7;&#x6253;&#x65ad;&#xff0c;&#xa;&#x56e0;&#x6b64;&#x8be5;&#x51fd;&#x6570;&#x6709;&#x8fd4;&#x56de;&#x503c;&#x6765;&#x533a;&#x5206;&#x662f;&#x6b63;&#x5e38;&#x8fd4;&#x56de;&#x8fd8;&#x662f;&#x88ab;&#x4fe1;&#x53f7;&#x4e2d;&#x65ad;&#xff0c;&#xa;&#x5982;&#x679c;&#x8fd4;&#x56de;0&#xff0c;&#x8868;&#x793a;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;&#x6b63;&#x5e38;&#x8fd4;&#x56de;&#xff0c;&#x5982;&#x679c;&#x88ab;&#x4fe1;&#x53f7;&#x6253;&#x65ad;&#xff0c;&#x8fd4;&#x56de;-EINTR"/>
</node>
<node CREATED="1366519638516" FOLDED="true" ID="ID_92853433" MODIFIED="1366519676556" TEXT="int down_trylock(struct semaphore * sem)">
<node CREATED="1366519651178" ID="ID_26099210" MODIFIED="1366519674299" TEXT="&#x8bd5;&#x7740;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;sem&#xff0c;&#x5982;&#x679c;&#x80fd;&#x591f;&#x7acb;&#x523b;&#x83b7;&#x5f97;&#xff0c;&#x5b83;&#x5c31;&#x83b7;&#x5f97;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x5e76;&#x8fd4;&#x56de;0&#xff0c;&#xa;&#x5426;&#x5219;&#xff0c;&#x8868;&#x793a;&#x4e0d;&#x80fd;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;sem&#xff0c;&#x8fd4;&#x56de;&#x503c;&#x4e3a;&#x975e;0&#x503c;&#x3002;&#xa;&#x56e0;&#x6b64;&#xff0c;&#x5b83;&#x4e0d;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366519689691" FOLDED="true" ID="ID_705708159" MODIFIED="1366519727060" TEXT="void up(struct semaphore * sem)">
<node CREATED="1366519704690" ID="ID_574309875" MODIFIED="1366519725428" TEXT="&#x91ca;&#x653e;&#x4fe1;&#x53f7;&#x91cf;sem&#xff0c;&#x5373;&#x628a;sem&#x7684;&#x503c;&#x52a0;1&#xff0c;&#xa;&#x5982;&#x679c;sem&#x7684;&#x503c;&#x4e3a;&#x975e;&#x6b63;&#x6570;&#xff0c;&#x8868;&#x660e;&#x6709;&#x4efb;&#x52a1;&#x7b49;&#x5f85;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x56e0;&#x6b64;&#x5524;&#x9192;&#x8fd9;&#x4e9b;&#x7b49;&#x5f85;&#x8005;"/>
</node>
<node CREATED="1412725868311" FOLDED="true" ID="ID_1265118040" MODIFIED="1412726472444" TEXT="&#x4e92;&#x65a5;&#x9501;(mutex)">
<node CREATED="1412725942761" ID="ID_876355682" MODIFIED="1412726051219" TEXT="&#x4e92;&#x65a5;&#x9501;mutex&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x4e00;&#x4e2a;&#x7279;&#x4f8b;,&#x5b83;&#x8868;&#x793a;&#x540c;&#x4e00;&#x65f6;&#x523b;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x8fdb;&#x5165;&#x4e92;&#x65a5;&#x9501;&#x4fdd;&#x62a4;&#x7684;&#x4e34;&#x754c;&#x533a;"/>
<node CREATED="1412725898545" FOLDED="true" ID="ID_866571319" MODIFIED="1412726087962" TEXT="DEFINE_MUTEX( my_mutex );">
<node CREATED="1412726079055" ID="ID_33725745" MODIFIED="1412726084869" TEXT="&#x9759;&#x6001;&#x521d;&#x59cb;&#x5316;&#x4e92;&#x65a5;&#x9501;"/>
</node>
<node CREATED="1366519442394" FOLDED="true" ID="ID_1615546006" MODIFIED="1412725909874" TEXT="void init_MUTEX_LOCKED (struct semaphore *sem)">
<node CREATED="1366519456793" ID="ID_1847961836" MODIFIED="1366519457353" TEXT="&#x521d;&#x59cb;&#x5316;&#x4e00;&#x4e2a;&#x4e92;&#x65a5;&#x9501;&#xff0c;&#x4f46;&#x5b83;&#x628a;&#x4fe1;&#x53f7;&#x91cf;sem&#x7684;&#x503c;&#x8bbe;&#x7f6e;&#x4e3a;0&#xff0c;&#x5373;&#x4e00;&#x5f00;&#x59cb;&#x5c31;&#x5904;&#x5728;&#x5df2;&#x9501;&#x72b6;&#x6001;"/>
</node>
<node CREATED="1366519410086" FOLDED="true" ID="ID_1699901013" MODIFIED="1412725926738" TEXT="void init_MUTEX (struct semaphore *sem)">
<node CREATED="1366519425384" ID="ID_1132582626" MODIFIED="1366519427056" TEXT="&#x521d;&#x59cb;&#x5316;&#x4e00;&#x4e2a;&#x4e92;&#x65a5;&#x9501;&#xff0c;&#x5373;&#x5b83;&#x628a;&#x4fe1;&#x53f7;&#x91cf;sem&#x7684;&#x503c;&#x8bbe;&#x7f6e;&#x4e3a;1"/>
</node>
<node CREATED="1412726125991" ID="ID_451894583" MODIFIED="1412726209077" TEXT="mutex_trylock (struct semaphore *sem)"/>
<node CREATED="1412726150759" FOLDED="true" ID="ID_1415431027" MODIFIED="1412726469266" TEXT="mutex_lock (struct semaphore *sem)">
<node CREATED="1412726327935" ID="ID_256321848" MODIFIED="1412726351618" TEXT="&#x7b49;&#x5f85;&#x4e92;&#x65a5;&#x9501;&#x3002;&#x8fd9;&#x4e2a;&#x8c03;&#x7528;&#x5728;&#x4e92;&#x65a5;&#x9501;&#x53ef;&#x7528;&#x65f6;&#x8fd4;&#x56de;&#xff0c;&#x5426;&#x5219;&#xff0c;&#x5728;&#x4e92;&#x65a5;&#x9501;&#x9501;&#x53ef;&#x7528;&#x4e4b;&#x524d;&#x5b83;&#x5c06;&#x4f11;&#x7720;&#x3002;&#x65e0;&#x8bba;&#x5728;&#x54ea;&#x79cd;&#x60c5;&#x5f62;&#x4e2d;&#xff0c;&#x5f53;&#x63a7;&#x5236;&#x88ab;&#x8fd4;&#x56de;&#x65f6;&#xff0c;&#x8c03;&#x7528;&#x8005;&#x5c06;&#x6301;&#x6709;&#x4e92;&#x65a5;&#x9501;"/>
</node>
<node CREATED="1412726165729" FOLDED="true" ID="ID_1347799989" MODIFIED="1412726469995" TEXT="mutex_lock_interruptible (struct semaphore *sem)">
<node CREATED="1412726389104" ID="ID_396477370" MODIFIED="1412726439992" TEXT="&#x7b49;&#x5f85;&#x4e92;&#x65a5;&#x9501;.&#x4f46;&#x5f53;&#x8c03;&#x7528;&#x8005;&#x4f11;&#x7720;&#x65f6;&#x53ef;&#x88ab;&#x4fe1;&#x53f7;&#x4e2d;&#x65ad;, &#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;, &#x8be5;&#x51fd;&#x6570;&#x53ef;&#x80fd;&#x8fd4;&#x56de; -EINTR"/>
</node>
<node CREATED="1412726183999" FOLDED="true" ID="ID_1494669113" MODIFIED="1412726470651" TEXT="mutex_unlock (struct semaphore *sem)">
<node CREATED="1412726274625" ID="ID_1013103466" MODIFIED="1412726276518" TEXT="&#x89e3;&#x9501;"/>
</node>
<node CREATED="1412726195592" FOLDED="true" ID="ID_865121381" MODIFIED="1412726471395" TEXT="mutex_is_locked (struct semaphore *sem)">
<node CREATED="1412726241504" ID="ID_1129227522" MODIFIED="1412726243712" TEXT="&#x68c0;&#x67e5;&#x4e92;&#x65a5;&#x9501;&#x7684;&#x72b6;&#x6001;"/>
</node>
</node>
</node>
</node>
<node CREATED="1366519830204" ID="ID_425575819" MODIFIED="1366519831323" TEXT="&#x7528;&#x9014;">
<node CREATED="1366519854729" ID="ID_577510925" MODIFIED="1366519929158" TEXT="&#x540c;&#x6b65;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;,&#x4f7f;&#x5f97;&#x4efb;&#x4f55;&#x65f6;&#x5019;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x4f7f;&#x7528;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5171;&#x4eab;&#x8d44;&#x6e90;"/>
</node>
</node>
<node CREATED="1366519980549" FOLDED="true" ID="ID_1676309007" MODIFIED="1412725822684" TEXT="&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;(rwlock)">
<node CREATED="1366520312080" ID="ID_1737485962" MODIFIED="1412722419135" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1366520337353" ID="ID_439173393" MODIFIED="1366520368792" TEXT="&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x5bf9;&#x8bbf;&#x95ee;&#x8005;&#x8fdb;&#x884c;&#x4e86;&#x7ec6;&#x5206;&#xff0c;&#x6216;&#x8005;&#x4e3a;&#x8bfb;&#x8005;&#xff0c;&#x6216;&#x8005;&#x4e3a;&#x5199;&#x8005;&#xff0c;&#x8bfb;&#x8005;&#x5728;&#x4fdd;&#x6301;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x671f;&#x95f4;&#x53ea;&#x80fd;&#x5bf9;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x8bfb;&#x8bbf;&#x95ee;&#xff0c;&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x9664;&#x4e86;&#x9700;&#x8981;&#x8bfb;&#xff0c;&#x53ef;&#x80fd;&#x8fd8;&#x9700;&#x8981;&#x5199;&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x5fc5;&#x987b;&#x88ab;&#x5f52;&#x7c7b;&#x4e3a;&#x5199;&#x8005;&#xff0c;&#x5b83;&#x5728;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8bbf;&#x95ee;&#x4e4b;&#x524d;&#x5fc5;&#x987b;&#x5148;&#x83b7;&#x5f97;&#x5199;&#x8005;&#x8eab;&#x4efd;&#xff0c;&#x5199;&#x8005;&#x5728;&#x53d1;&#x73b0;&#x81ea;&#x5df1;&#x4e0d;&#x9700;&#x8981;&#x5199;&#x8bbf;&#x95ee;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x53ef;&#x4ee5;&#x964d;&#x7ea7;&#x4e3a;&#x8bfb;&#x8005;&#x3002;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x540c;&#x65f6;&#x62e5;&#x6709;&#x7684;&#x8bfb;&#x8005;&#x6570;&#x4e0d;&#x53d7;&#x9650;&#x5236;&#xff0c;&#x4e5f;&#x5c31;&#x8bf4;&#x53ef;&#x4ee5;&#x6709;&#x4efb;&#x610f;&#x591a;&#x4e2a;&#x8bfb;&#x8005;&#x540c;&#x65f6;&#x62e5;&#x6709;&#x4e00;&#x4e2a;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;"/>
<node CREATED="1366520382823" ID="ID_1205622218" MODIFIED="1366520390833" TEXT="&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x5f53;&#x524d;&#x6ca1;&#x6709;&#x88ab;&#x5199;&#x8005;&#x62e5;&#x6709;&#x5e76;&#x4e14;&#x4e5f;&#x6ca1;&#x6709;&#x5199;&#x8005;&#x7b49;&#x5f85;&#x8bfb;&#x8005;&#x91ca;&#x653e;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x90a3;&#x4e48;&#x4efb;&#x4f55;&#x8bfb;&#x8005;&#x90fd;&#x53ef;&#x4ee5;&#x6210;&#x529f;&#x83b7;&#x5f97;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#xff1b;&#x5426;&#x5219;&#xff0c;&#x8bfb;&#x8005;&#x5fc5;&#x987b;&#x88ab;&#x6302;&#x8d77;&#x76f4;&#x5230;&#x5199;&#x8005;&#x91ca;&#x653e;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x3002;&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x5f53;&#x524d;&#x6ca1;&#x6709;&#x88ab;&#x8bfb;&#x8005;&#x6216;&#x5199;&#x8005;&#x62e5;&#x6709;&#x5e76;&#x4e14;&#x4e5f;&#x6ca1;&#x6709;&#x5199;&#x8005;&#x7b49;&#x5f85;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x90a3;&#x4e48;&#x4e00;&#x4e2a;&#x5199;&#x8005;&#x53ef;&#x4ee5;&#x6210;&#x529f;&#x83b7;&#x5f97;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x5426;&#x5219;&#x5199;&#x8005;&#x5c06;&#x88ab;&#x6302;&#x8d77;&#xff0c;&#x76f4;&#x5230;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x8bbf;&#x95ee;&#x8005;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x5199;&#x8005;&#x662f;&#x6392;&#x4ed6;&#x6027;&#x7684;&#xff0c;&#x72ec;&#x5360;&#x6027;&#x7684;"/>
</node>
<node CREATED="1366520316014" ID="ID_1932361156" MODIFIED="1366520318766" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1366520406975" ID="ID_837414510" MODIFIED="1366520413556" TEXT="&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x6709;&#x4e24;&#x79cd;&#x5b9e;&#x73b0;&#xff0c;&#x4e00;&#x79cd;&#x662f;&#x901a;&#x7528;&#x7684;&#xff0c;&#x4e0d;&#x4f9d;&#x8d56;&#x4e8e;&#x786c;&#x4ef6;&#x67b6;&#x6784;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x589e;&#x52a0;&#x65b0;&#x7684;&#x67b6;&#x6784;&#x4e0d;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x5b9e;&#x73b0;&#x5b83;&#xff0c;&#x4f46;&#x7f3a;&#x70b9;&#x662f;&#x6027;&#x80fd;&#x4f4e;&#xff0c;&#x83b7;&#x5f97;&#x548c;&#x91ca;&#x653e;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x5f00;&#x9500;&#x5927;&#xff1b;&#x53e6;&#x4e00;&#x79cd;&#x662f;&#x67b6;&#x6784;&#x76f8;&#x5173;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#x6027;&#x80fd;&#x9ad8;&#xff0c;&#x83b7;&#x53d6;&#x548c;&#x91ca;&#x653e;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x5f00;&#x9500;&#x5c0f;&#xff0c;&#x4f46;&#x589e;&#x52a0;&#x65b0;&#x7684;&#x67b6;&#x6784;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x5b9e;&#x73b0;&#x3002;&#x5728;&#x5185;&#x6838;&#x914d;&#x7f6e;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x9009;&#x9879;&#x53bb;&#x63a7;&#x5236;&#x4f7f;&#x7528;&#x54ea;&#x4e00;&#x79cd;&#x5b9e;&#x73b0;"/>
<node CREATED="1366520415996" ID="ID_1852341641" MODIFIED="1412725809675" TEXT="API">
<node CREATED="1412629627849" FOLDED="true" ID="ID_1365656684" MODIFIED="1412725819874" TEXT="DECLARE_RWSEM(name)">
<node CREATED="1412629643551" ID="ID_1548231729" MODIFIED="1412629645365" TEXT="&#x8be5;&#x5b8f;&#x58f0;&#x660e;&#x4e00;&#x4e2a;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;name&#x5e76;&#x5bf9;&#x5176;&#x8fdb;&#x884c;&#x521d;&#x59cb;&#x5316;"/>
</node>
<node CREATED="1366520438220" FOLDED="true" ID="ID_392144614" MODIFIED="1412725814515" TEXT="void init_rwsem(struct rw_semaphore *sem)">
<node CREATED="1366520448854" ID="ID_1355911624" MODIFIED="1366520450575" TEXT="&#x5bf9;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;sem&#x8fdb;&#x884c;&#x521d;&#x59cb;&#x5316;"/>
</node>
<node CREATED="1366520461447" FOLDED="true" ID="ID_239360499" MODIFIED="1366520803033" TEXT="void down_read(struct rw_semaphore *sem)">
<node CREATED="1366520475478" ID="ID_1877209500" MODIFIED="1366520477255" TEXT="&#x5f97;&#x5230;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;sem&#x3002;&#x8be5;&#x51fd;&#x6570;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#x56e0;&#x6b64;&#x53ea;&#x80fd;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366520490740" FOLDED="true" ID="ID_533372392" MODIFIED="1366520803633" TEXT="int down_read_trylock(struct rw_semaphore *sem)">
<node CREATED="1366520510665" ID="ID_1035776148" MODIFIED="1366520517539" TEXT="&#x7c7b;&#x4f3c;&#x4e8e;down_read&#xff0c;&#x53ea;&#x662f;&#x5b83;&#x4e0d;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#x3002;&#x5b83;&#x5c3d;&#x529b;&#x5f97;&#x5230;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;sem&#xff0c;&#x5982;&#x679c;&#x80fd;&#x591f;&#x7acb;&#x5373;&#x5f97;&#x5230;&#xff0c;&#x5b83;&#x5c31;&#x5f97;&#x5230;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x5e76;&#x4e14;&#x8fd4;&#x56de;1&#xff0c;&#x5426;&#x5219;&#x8868;&#x793a;&#x4e0d;&#x80fd;&#x7acb;&#x523b;&#x5f97;&#x5230;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x8fd4;&#x56de;0&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x5b83;&#x4e5f;&#x53ef;&#x4ee5;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366520529868" FOLDED="true" ID="ID_1111990632" MODIFIED="1366520804185" TEXT="void down_write(struct rw_semaphore *sem)">
<node CREATED="1366520545805" ID="ID_1511230405" MODIFIED="1366520546750" TEXT="&#x5f97;&#x5230;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;sem&#xff0c;&#x5b83;&#x4e5f;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#x56e0;&#x6b64;&#x53ea;&#x80fd;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366520558327" FOLDED="true" ID="ID_750721864" MODIFIED="1366520804873" TEXT="int down_write_trylock(struct rw_semaphore *sem)">
<node CREATED="1366520571509" ID="ID_1806268070" MODIFIED="1366520577988" TEXT="&#x7c7b;&#x4f3c;&#x4e8e;down_write&#xff0c;&#x53ea;&#x662f;&#x5b83;&#x4e0d;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#x3002;&#x8be5;&#x51fd;&#x6570;&#x5c3d;&#x529b;&#x5f97;&#x5230;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x5982;&#x679c;&#x80fd;&#x591f;&#x7acb;&#x523b;&#x83b7;&#x5f97;&#xff0c;&#x5c31;&#x83b7;&#x5f97;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x5e76;&#x4e14;&#x8fd4;&#x56de;1&#xff0c;&#x5426;&#x5219;&#x8868;&#x793a;&#x65e0;&#x6cd5;&#x7acb;&#x523b;&#x83b7;&#x5f97;&#xff0c;&#x8fd4;&#x56de;0&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366520597814" FOLDED="true" ID="ID_1399742138" MODIFIED="1366520805449" TEXT="void up_read(struct rw_semaphore *sem)">
<node CREATED="1366520619350" ID="ID_1297493858" MODIFIED="1366520669062" TEXT="&#x8bfb;&#x8005;&#x91ca;&#x653e;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;sem&#x3002;&#x5b83;&#x4e0e;down_read&#x6216;down_read_trylock&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;&#xa;&#x5982;&#x679c;down_read_trylock&#x8fd4;&#x56de;0&#xff0c;&#x4e0d;&#x9700;&#x8981;&#x8c03;&#x7528;up_read&#x6765;&#x91ca;&#x653e;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x56e0;&#x4e3a;&#x6839;&#x672c;&#x5c31;&#x6ca1;&#x6709;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;"/>
</node>
<node CREATED="1366520644490" FOLDED="true" ID="ID_838954444" MODIFIED="1366520806177" TEXT="void up_write(struct rw_semaphore *sem)">
<node CREATED="1366520681712" ID="ID_398863777" MODIFIED="1366520696814" TEXT="&#x5199;&#x8005;&#x91ca;&#x653e;&#x4fe1;&#x53f7;&#x91cf;sem&#x3002;&#x5b83;&#x4e0e;down_write&#x6216;down_write_trylock&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;&#xa;&#x5982;&#x679c;down_write_trylock&#x8fd4;&#x56de;0&#xff0c;&#x4e0d;&#x9700;&#x8981;&#x8c03;&#x7528;up_write&#xff0c;&#x56e0;&#x4e3a;&#x8fd4;&#x56de;0&#x8868;&#x793a;&#x6ca1;&#x6709;&#x83b7;&#x5f97;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;"/>
</node>
<node CREATED="1366520714859" FOLDED="true" ID="ID_1848382974" MODIFIED="1366520806778" TEXT="void downgrade_write(struct rw_semaphore *sem)">
<node CREATED="1366520732528" ID="ID_1079861191" MODIFIED="1366520739655" TEXT="&#x628a;&#x5199;&#x8005;&#x964d;&#x7ea7;&#x4e3a;&#x8bfb;&#x8005;&#xff0c;&#x8fd9;&#x6709;&#x65f6;&#x662f;&#x5fc5;&#x8981;&#x7684;&#x3002;&#x56e0;&#x4e3a;&#x5199;&#x8005;&#x662f;&#x6392;&#x4ed6;&#x6027;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#x5728;&#x5199;&#x8005;&#x4fdd;&#x6301;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x671f;&#x95f4;&#xff0c;&#x4efb;&#x4f55;&#x8bfb;&#x8005;&#x6216;&#x5199;&#x8005;&#x90fd;&#x5c06;&#x65e0;&#x6cd5;&#x8bbf;&#x95ee;&#x8be5;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x5bf9;&#x4e8e;&#x90a3;&#x4e9b;&#x5f53;&#x524d;&#x6761;&#x4ef6;&#x4e0b;&#x4e0d;&#x9700;&#x8981;&#x5199;&#x8bbf;&#x95ee;&#x7684;&#x5199;&#x8005;&#xff0c;&#x964d;&#x7ea7;&#x4e3a;&#x8bfb;&#x8005;&#x5c06;&#xff0c;&#x4f7f;&#x5f97;&#x7b49;&#x5f85;&#x8bbf;&#x95ee;&#x7684;&#x8bfb;&#x8005;&#x80fd;&#x591f;&#x7acb;&#x523b;&#x8bbf;&#x95ee;&#xff0c;&#x4ece;&#x800c;&#x589e;&#x52a0;&#x4e86;&#x5e76;&#x53d1;&#x6027;&#xff0c;&#x63d0;&#x9ad8;&#x4e86;&#x6548;&#x7387;"/>
</node>
</node>
</node>
<node CREATED="1366520319238" ID="ID_1089291555" MODIFIED="1366520323399" TEXT="&#x7528;&#x9014;">
<node CREATED="1366520810056" ID="ID_1101208957" MODIFIED="1366520811808" TEXT="&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x9002;&#x4e8e;&#x5728;&#x8bfb;&#x591a;&#x5199;&#x5c11;&#x7684;&#x60c5;&#x51b5;"/>
</node>
</node>
<node CREATED="1366520852423" FOLDED="true" ID="ID_1294204788" MODIFIED="1415821855715" TEXT="&#x81ea;&#x65cb;&#x9501;(spinlock)">
<node CREATED="1366520856344" ID="ID_600430552" MODIFIED="1366520859767" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1366520886993" ID="ID_1496265091" MODIFIED="1366520899651" TEXT="&#x81ea;&#x65cb;&#x9501;&#x4e0e;&#x4e92;&#x65a5;&#x9501;&#x6709;&#x70b9;&#x7c7b;&#x4f3c;&#xff0c;&#x53ea;&#x662f;&#x81ea;&#x65cb;&#x9501;&#x4e0d;&#x4f1a;&#x5f15;&#x8d77;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#x5982;&#x679c;&#x81ea;&#x65cb;&#x9501;&#x5df2;&#x7ecf;&#x88ab;&#x522b;&#x7684;&#x6267;&#x884c;&#x5355;&#x5143;&#x4fdd;&#x6301;&#xff0c;&#xa;&#x8c03;&#x7528;&#x8005;&#x5c31;&#x4e00;&#x76f4;&#x5faa;&#x73af;&#x5728;&#x90a3;&#x91cc;&#x770b;&#x662f;&#x5426;&#x8be5;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x4fdd;&#x6301;&#x8005;&#x5df2;&#x7ecf;&#x91ca;&#x653e;&#x4e86;&#x9501;&#xff0c;&quot;&#x81ea;&#x65cb;&quot;&#x4e00;&#x8bcd;&#x5c31;&#x662f;&#x56e0;&#x6b64;&#x800c;&#x5f97;&#x540d;"/>
<node CREATED="1366520909924" ID="ID_353157101" MODIFIED="1366520911270" TEXT="&#x7531;&#x4e8e;&#x81ea;&#x65cb;&#x9501;&#x4f7f;&#x7528;&#x8005;&#x4e00;&#x822c;&#x4fdd;&#x6301;&#x9501;&#x65f6;&#x95f4;&#x975e;&#x5e38;&#x77ed;&#xff0c;&#x56e0;&#x6b64;&#x9009;&#x62e9;&#x81ea;&#x65cb;&#x800c;&#x4e0d;&#x662f;&#x7761;&#x7720;&#x662f;&#x975e;&#x5e38;&#x5fc5;&#x8981;&#x7684;&#xff0c;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x6548;&#x7387;&#x8fdc;&#x9ad8;&#x4e8e;&#x4e92;&#x65a5;&#x9501;"/>
<node CREATED="1412723243984" ID="ID_1593974776" MODIFIED="1412723244646" TEXT="&#x6838;&#x5fc3;&#x539f;&#x5219;">
<node CREATED="1412723256128" ID="ID_447094437" MODIFIED="1412723256750" TEXT="&#x4efb;&#x4f55;&#x62e5;&#x6709;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x4ee3;&#x7801;&#x90fd;&#x5fc5;&#x987b;&#x662f;&#x539f;&#x5b50;&#x7684;&#x3002;&#x5b83;&#x4e0d;&#x80fd;&#x4f11;&#x7720;&#x3002;"/>
<node CREATED="1412723270201" ID="ID_258632233" MODIFIED="1412723270822" TEXT="&#x81ea;&#x65cb;&#x9501;&#x5fc5;&#x987b;&#x5728;&#x53ef;&#x80fd;&#x7684;&#x6700;&#x77ed;&#x65f6;&#x95f4;&#x5185;&#x62e5;&#x6709;&#x3002;"/>
</node>
</node>
<node CREATED="1366520860583" ID="ID_454366786" MODIFIED="1366520863613" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1366522140405" ID="ID_1424060179" MODIFIED="1366522160842" TEXT="&#x81ea;&#x65cb;&#x9501;&#x4fdd;&#x6301;&#x671f;&#x95f4;&#x662f;&#x62a2;&#x5360;&#x5931;&#x6548;&#x7684;&#xff0c;&#x800c;&#x4fe1;&#x53f7;&#x91cf;&#x548c;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x6301;&#x671f;&#x95f4;&#x662f;&#x53ef;&#x4ee5;&#x88ab;&#x62a2;&#x5360;&#x7684;&#x3002;&#x81ea;&#x65cb;&#x9501;&#x53ea;&#x6709;&#x5728;&#x5185;&#x6838;&#x53ef;&#x62a2;&#x5360;&#x6216;SMP&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x624d;&#x771f;&#x6b63;&#x9700;&#x8981;&#xff0c;&#x5728;&#x5355;CPU&#x4e14;&#x4e0d;&#x53ef;&#x62a2;&#x5360;&#x7684;&#x5185;&#x6838;&#x4e0b;&#xff0c;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x6240;&#x6709;&#x64cd;&#x4f5c;&#x90fd;&#x662f;&#x7a7a;&#x64cd;&#x4f5c;"/>
<node CREATED="1366522175723" ID="ID_159505635" MODIFIED="1366522182143" TEXT="&#x8ddf;&#x4e92;&#x65a5;&#x9501;&#x4e00;&#x6837;&#xff0c;&#x4e00;&#x4e2a;&#x6267;&#x884c;&#x5355;&#x5143;&#x8981;&#x60f3;&#x8bbf;&#x95ee;&#x88ab;&#x81ea;&#x65cb;&#x9501;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x5fc5;&#x987b;&#x5148;&#x5f97;&#x5230;&#x9501;&#xff0c;&#x5728;&#x8bbf;&#x95ee;&#x5b8c;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x540e;&#xff0c;&#x5fc5;&#x987b;&#x91ca;&#x653e;&#x9501;&#x3002;&#x5982;&#x679c;&#x5728;&#x83b7;&#x53d6;&#x81ea;&#x65cb;&#x9501;&#x65f6;&#xff0c;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x6267;&#x884c;&#x5355;&#x5143;&#x4fdd;&#x6301;&#x8be5;&#x9501;&#xff0c;&#x90a3;&#x4e48;&#x5c06;&#x7acb;&#x5373;&#x5f97;&#x5230;&#x9501;&#xff1b;&#x5982;&#x679c;&#x5728;&#x83b7;&#x53d6;&#x81ea;&#x65cb;&#x9501;&#x65f6;&#x9501;&#x5df2;&#x7ecf;&#x6709;&#x4fdd;&#x6301;&#x8005;&#xff0c;&#x90a3;&#x4e48;&#x83b7;&#x53d6;&#x9501;&#x64cd;&#x4f5c;&#x5c06;&#x81ea;&#x65cb;&#x5728;&#x90a3;&#x91cc;&#xff0c;&#x76f4;&#x5230;&#x8be5;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x4fdd;&#x6301;&#x8005;&#x91ca;&#x653e;&#x4e86;&#x9501;"/>
<node CREATED="1412724653577" ID="ID_311127004" MODIFIED="1414015398062" TEXT="&#x5185;&#x6838;&#x5b9e;&#x73b0;">
<node CREATED="1412724663191" FOLDED="true" ID="ID_1379263546" MODIFIED="1414016317382" TEXT="&#x7ebf;&#x7a0b;&#x901a;&#x8fc7;&#x5b8f; spin_lock &#x7533;&#x8bf7;&#x81ea;&#x65cb;&#x9501;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x8003;&#x8651;&#x5185;&#x6838;&#x62a2;&#x5360;&#xff0c;&#x5219; spin_lock &#x8c03;&#x7528; __raw_spin_lock &#x51fd;&#x6570;">
<node CREATED="1412724684288" ID="ID_349802585" MODIFIED="1412724691861">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline void __raw_spin_lock(raw_spinlock_t *lock)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;asm volatile(&quot;\n1:\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LOCK_PREFIX &quot; ; decb %0\n\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;jns 3f\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;2:\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;rep;nop\n\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;cmpb $0,%0\n\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;jle 2b\n\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;jmp 1b\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;3:\n\t&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;: &quot;+m&quot; (lock-&gt;slock) : : &quot;memory&quot;);
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1412724724311" ID="ID_25554663" MODIFIED="1412724726115" TEXT="LOCK_PREFIX &#x7684;&#x5b9a;&#x4e49;&#x5982;&#x4e0b;&#xff1a;"/>
<node CREATED="1412724739598" ID="ID_782297709" MODIFIED="1412724748441">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      #ifdef CONFIG_SMP
    </p>
    <p>
      #define LOCK_PREFIX \
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;.section .smp_locks,\&quot;a\&quot;\n&quot;&#160;&#160;&#160;&#160;\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;_ASM_ALIGN &quot;\n&quot;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;_ASM_PTR &quot;661f\n&quot; /* address */&#160;&#160;&#160;&#160;\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;.previous\n&quot;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;661:\n\tlock; &quot;
    </p>
    <p>
      
    </p>
    <p>
      #else /* ! CONFIG_SMP */
    </p>
    <p>
      #define LOCK_PREFIX &quot;&quot;
    </p>
    <p>
      #endif
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412724792006" ID="ID_1829647868" MODIFIED="1412724800994" TEXT="&#x5728;&#x591a;&#x5904;&#x7406;&#x5668;&#x73af;&#x5883;&#x4e2d; LOCK_PREFIX &#x5b9e;&#x9645;&#x88ab;&#x5b9a;&#x4e49;&#x4e3a; &#x201c;lock&#x201d;&#x524d;&#x7f00;&#x3002;  x86 &#x5904;&#x7406;&#x5668;&#x4f7f;&#x7528;&#x201c;lock&#x201d;&#x524d;&#x7f00;&#x7684;&#x65b9;&#x5f0f;&#x63d0;&#x4f9b;&#x4e86;&#x5728;&#x6307;&#x4ee4;&#x6267;&#x884c;&#x671f;&#x95f4;&#x5bf9;&#x603b;&#x7ebf;&#x52a0;&#x9501;&#x7684;&#x624b;&#x6bb5;&#x3002;&#x82af;&#x7247;&#x4e0a;&#x6709;&#x4e00;&#x6761;&#x5f15;&#x7ebf; LOCK&#xff0c;&#x5982;&#x679c;&#x5728;&#x4e00;&#x6761;&#x6c47;&#x7f16;&#x6307;&#x4ee4;(ADD, ADC, AND, BTC, BTR, BTS, CMPXCHG, CMPXCH8B, DEC, INC, NEG, NOT, OR, SBB, SUB, XOR, XADD, XCHG)&#x524d;&#x52a0;&#x4e0a;&#x201c;lock&#x201d; &#x524d;&#x7f00;&#xff0c;&#x7ecf;&#x8fc7;&#x6c47;&#x7f16;&#x540e;&#x7684;&#x673a;&#x5668;&#x4ee3;&#x7801;&#x5c31;&#x4f7f;&#x5f97;&#x5904;&#x7406;&#x5668;&#x6267;&#x884c;&#x8be5;&#x6307;&#x4ee4;&#x65f6;&#x628a;&#x5f15;&#x7ebf; LOCK &#x7684;&#x7535;&#x4f4d;&#x62c9;&#x4f4e;&#xff0c;&#x4ece;&#x800c;&#x628a;&#x603b;&#x7ebf;&#x9501;&#x4f4f;&#xff0c;&#x8fd9;&#x6837;&#x5176;&#x5b83;&#x5904;&#x7406;&#x5668;&#x6216;&#x4f7f;&#x7528;DMA&#x7684;&#x5916;&#x8bbe;&#x6682;&#x65f6;&#x65e0;&#x6cd5;&#x901a;&#x8fc7;&#x540c;&#x4e00;&#x603b;&#x7ebf;&#x8bbf;&#x95ee;&#x5185;&#x5b58;&#x3002;  &#xa;&#xa;&#x4ece; P6 &#x5904;&#x7406;&#x5668;&#x5f00;&#x59cb;&#xff0c;&#x5982;&#x679c;&#x6307;&#x4ee4;&#x8bbf;&#x95ee;&#x7684;&#x5185;&#x5b58;&#x533a;&#x57df;&#x5df2;&#x7ecf;&#x5b58;&#x5728;&#x4e8e;&#x5904;&#x7406;&#x5668;&#x7684;&#x5185;&#x90e8;&#x7f13;&#x5b58;&#x4e2d;&#xff0c;&#x5219;&#x201c;lock&#x201d; &#x524d;&#x7f00;&#x5e76;&#x4e0d;&#x5c06;&#x5f15;&#x7ebf; LOCK &#x7684;&#x7535;&#x4f4d;&#x62c9;&#x4f4e;&#xff0c;&#x800c;&#x662f;&#x9501;&#x4f4f;&#x672c;&#x5904;&#x7406;&#x5668;&#x7684;&#x5185;&#x90e8;&#x7f13;&#x5b58;&#xff0c;&#x7136;&#x540e;&#x4f9d;&#x9760;&#x7f13;&#x5b58;&#x4e00;&#x81f4;&#x6027;&#x534f;&#x8bae;&#x4fdd;&#x8bc1;&#x64cd;&#x4f5c;&#x7684;&#x539f;&#x5b50;&#x6027;&#x3002;"/>
<node CREATED="1412724814337" ID="ID_800864596" MODIFIED="1412724815255" TEXT="decb &#x6c47;&#x7f16;&#x6307;&#x4ee4;&#x5c06; slock &#x7684;&#x503c;&#x51cf; 1&#x3002;&#x7531;&#x4e8e;&#x201c;&#x51cf; 1&#x201d;&#x662f;&#x201c;&#x8bfb;-&#x6539;-&#x5199;&#x201d;&#x64cd;&#x4f5c;&#xff0c;&#x4e0d;&#x662f;&#x539f;&#x5b50;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x88ab;&#x540c;&#x65f6;&#x7533;&#x8bf7;&#x9501;&#x7684;&#x5176;&#x5b83;&#x5904;&#x7406;&#x5668;&#x4e0a;&#x7684;&#x7ebf;&#x7a0b;&#x5e72;&#x6270;&#xff0c;&#x6240;&#x4ee5;&#x5fc5;&#x987b;&#x52a0;&#x4e0a;&#x201c;lock&#x201d;&#x524d;&#x7f00;&#x3002;"/>
<node CREATED="1412724828816" ID="ID_854707043" MODIFIED="1412724830475" TEXT="jns &#x6c47;&#x7f16;&#x6307;&#x4ee4;&#x68c0;&#x67e5; EFLAGS &#x5bc4;&#x5b58;&#x5668;&#x7684; SF(&#x7b26;&#x53f7;)&#x4f4d;&#xff0c;&#x5982;&#x679c;&#x4e3a; 0&#xff0c;&#x8bf4;&#x660e; slock &#x539f;&#x6765;&#x7684;&#x503c;&#x4e3a; 1&#xff0c;&#x5219;&#x7ebf;&#x7a0b;&#x83b7;&#x5f97;&#x9501;&#xff0c;&#x7136;&#x540e;&#x8df3;&#x5230;&#x6807;&#x7b7e; 3 &#x7684;&#x4f4d;&#x7f6e;&#x7ed3;&#x675f;&#x672c;&#x6b21;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x3002;&#x5982;&#x679c; SF &#x4f4d;&#x4e3a; 1&#xff0c;&#x8bf4;&#x660e; slock &#x539f;&#x6765;&#x7684;&#x503c;&#x4e3a; 0 &#x6216;&#x8d1f;&#x6570;&#xff0c;&#x9501;&#x5df2;&#x88ab;&#x5360;&#x7528;&#x3002;&#x90a3;&#x4e48;&#x7ebf;&#x7a0b;&#x8f6c;&#x5230;&#x6807;&#x7b7e; 2 &#x5904;&#x4e0d;&#x65ad;&#x6d4b;&#x8bd5; slock &#x4e0e; 0 &#x7684;&#x5927;&#x5c0f;&#x5173;&#x7cfb;&#xff0c;&#x5047;&#x5982; slock &#x5c0f;&#x4e8e;&#x6216;&#x7b49;&#x4e8e; 0&#xff0c;&#x8df3;&#x8f6c;&#x5230;&#x6807;&#x7b7e; 2 &#x7684;&#x4f4d;&#x7f6e;&#x7ee7;&#x7eed;&#x5fd9;&#x7b49;&#x5f85;&#xff1b;&#x5047;&#x5982; slock &#x5927;&#x4e8e; 0&#xff0c;&#x8bf4;&#x660e;&#x9501;&#x5df2;&#x88ab;&#x91ca;&#x653e;&#xff0c;&#x5219;&#x8df3;&#x8f6c;&#x5230;&#x6807;&#x7b7e; 1 &#x7684;&#x4f4d;&#x7f6e;&#x91cd;&#x65b0;&#x7533;&#x8bf7;&#x9501;&#x3002;"/>
<node CREATED="1414015513770" FOLDED="true" ID="ID_1333655371" MODIFIED="1414016313044" TEXT="_raw_spin_lock(lock)">
<node CREATED="1414015517856" FOLDED="true" ID="ID_1780712446" MODIFIED="1414016310828" TEXT="&#x5355;&#x6838;CPU">
<node CREATED="1414015564272" ID="ID_1260721607" MODIFIED="1414015746936">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      #define __LOCK(lock)&#160;&#160;&#160;&#160;\
    </p>
    <p>
      do {&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;preempt_disable();\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__acquire(lock);&#160;&#160;&#160;&#160;&#160;\
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)(lock);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\
    </p>
    <p>
      } while (0)
    </p>
    <p>
      
    </p>
    <p>
      #define _raw_spin_lock(lock) __LOCK(lock)
    </p>
    <p>
      (include/linux/spinlock_api_up.h)
    </p>
  </body>
</html></richcontent>
<node CREATED="1414015781632" ID="ID_397679477" MODIFIED="1414015782869" TEXT="Preempt_disable()&#x5c06;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x7684;preempt_count&#x52a0;1&#xff0c;&#x8868;&#x793a;&#x7981;&#x6b62;&#x5185;&#x6838;&#x62a2;&#x5360;&#xff0c;&#x90a3;&#x4e48;&#x5185;&#x6838;&#x4ece;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x8fd4;&#x56de;&#x65f6;&#x4e0d;&#x4f1a;&#x53d1;&#x751f;&#x8fdb;&#x7a0b;&#x8c03;&#x5ea6;"/>
<node CREATED="1414015795545" ID="ID_983654706" MODIFIED="1414015796291" TEXT="__acquire(lock)&#x53ea;&#x662f;&#x4f7f;&#x7528;sparse&#x5de5;&#x5177;&#x5bf9;lock&#x8fdb;&#x884c;&#x68c0;&#x67e5;&#xff0c;&#x5426;&#x5219;&#x8be5;&#x5b8f;&#x4e3a;&#x7a7a;"/>
<node CREATED="1414015812585" ID="ID_970086405" MODIFIED="1414015813453" TEXT="(void)(lock)&#x4ec5;&#x4ec5;&#x662f;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x7f16;&#x8bd1;&#x5668;&#x5bf9;lock&#x7684;&#x672a;&#x4f7f;&#x7528;&#x62a5;&#x8b66;"/>
</node>
</node>
<node CREATED="1414015532288" FOLDED="true" ID="ID_571234840" MODIFIED="1414016312012" TEXT="&#x591a;&#x6838;CPU">
<node CREATED="1414015837768" ID="ID_298684230" MODIFIED="1414015882703">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline void __raw_spin_lock(raw_spinlock_t *lock)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;preempt_disable();
    </p>
    <p>
      &#160;&#160;&#160;&#160;spin_acquire(&amp;lock-&gt;dep_map, 0, 0, _RET_IP_);
    </p>
    <p>
      &#160;&#160;&#160;&#160;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);
    </p>
    <p>
      }
    </p>
    <p>
      (include/linux/spinlock_api_smp.h)
    </p>
  </body>
</html></richcontent>
<node CREATED="1414015781632" ID="ID_688972908" MODIFIED="1414015782869" TEXT="Preempt_disable()&#x5c06;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x7684;preempt_count&#x52a0;1&#xff0c;&#x8868;&#x793a;&#x7981;&#x6b62;&#x5185;&#x6838;&#x62a2;&#x5360;&#xff0c;&#x90a3;&#x4e48;&#x5185;&#x6838;&#x4ece;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x8fd4;&#x56de;&#x65f6;&#x4e0d;&#x4f1a;&#x53d1;&#x751f;&#x8fdb;&#x7a0b;&#x8c03;&#x5ea6;"/>
<node CREATED="1414015795545" ID="ID_1454726441" MODIFIED="1414015796291" TEXT="__acquire(lock)&#x53ea;&#x662f;&#x4f7f;&#x7528;sparse&#x5de5;&#x5177;&#x5bf9;lock&#x8fdb;&#x884c;&#x68c0;&#x67e5;&#xff0c;&#x5426;&#x5219;&#x8be5;&#x5b8f;&#x4e3a;&#x7a7a;"/>
<node CREATED="1414015929401" ID="ID_320488365" MODIFIED="1414015990943">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LOCK_CONTENDED()&#26159;&#19968;&#20010;&#23439;, &#22914;&#26524;&#19981;&#32771;&#34385;CONFIG_LOCK_STAT(&#35813;&#23439;&#26159;&#20026;&#20102;&#32479;&#35745;lock&#30340;&#25805;&#20316;),&#21017;&#65306;
    </p>
    <p>
      #define LOCK_CONTENDED(_lock, try, lock) \&#160;&#160;&#160;&#160;lock(_lock)
    </p>
    <p>
      &#21017;&#31532;&#19977;&#21477;&#35805;&#31561;&#21516;&#20110;&#65306;
    </p>
    <p>
      do_raw_spin_lock(lock)
    </p>
    <p>
      &#32780;do_raw_spin_lock()&#21017;&#21487;&#20197;&#20174;spinlock.h&#20013;&#25214;&#21040;&#30165;&#36857;&#65306;
    </p>
  </body>
</html></richcontent>
<node CREATED="1414016055697" ID="ID_54520706" MODIFIED="1414016098294">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline void do_raw_spin_lock(raw_spinlock_t *lock) __acquires(lock)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;__acquire(lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;arch_spin_lock(&amp;lock-&gt;raw_lock);
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1414016126859" ID="ID_1292850298" MODIFIED="1414016128824" TEXT="arm">
<node CREATED="1414016145258" ID="ID_730530670" MODIFIED="1414016152704">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline void arch_spin_lock(arch_spinlock_t *lock)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long tmp, fixup = msm_krait_need_wfe_fixup;
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;__asm__ __volatile__(
    </p>
    <p>
      &quot;1:&#160;&#160;&#160;&#160;ldrex&#160;&#160;&#160;&#160;%[tmp], [%[lock]]\n&quot;
    </p>
    <p>
      &quot;&#160;&#160;&#160;&#160;teq&#160;&#160;&#160;&#160;%[tmp], #0\n&quot;
    </p>
    <p>
      &quot;&#160;&#160;&#160;&#160;beq&#160;&#160;&#160;&#160;2f\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;WFE_SAFE(&quot;%[fixup]&quot;, &quot;%[tmp]&quot;)
    </p>
    <p>
      &quot;2:\n&quot;
    </p>
    <p>
      &quot;&#160;&#160;&#160;&#160;strexeq&#160;&#160;&#160;&#160;%[tmp], %[bit0], [%[lock]]\n&quot;
    </p>
    <p>
      &quot;&#160;&#160;&#160;&#160;teqeq&#160;&#160;&#160;&#160;%[tmp], #0\n&quot;
    </p>
    <p>
      &quot;&#160;&#160;&#160;&#160;bne&#160;&#160;&#160;&#160;1b&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;: [tmp] &quot;=&amp;r&quot; (tmp), [fixup] &quot;+r&quot; (fixup)
    </p>
    <p>
      &#160;&#160;&#160;&#160;: [lock] &quot;r&quot; (&amp;lock-&gt;lock), [bit0] &quot;r&quot; (1)
    </p>
    <p>
      &#160;&#160;&#160;&#160;: &quot;cc&quot;);
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;smp_mb();
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1414016206825" ID="ID_1823130709" MODIFIED="1414016295096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline void arch_spin_lock(arch_spinlock_t *lock)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long tmp;
    </p>
    <p>
      &#160;&#160;&#160;&#160;__asm__ __volatile__(&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;1: ldrex %0, [%1]\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;@&#23558;&amp;lock-&gt;lock&#22320;&#22336;&#20013;&#30340;&#20540;&#65292;&#21363;lock-&gt;lock&#21152;&#36733;&#21040;tmp&#20013;&#65292;&#24182;&#35774;&#32622;&amp;lock-&gt;lock&#20026;&#29420;&#21344;&#35775;&#38382;&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;teq %0, #0\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;@&#27979;&#35797;tmp&#26159;&#21542;&#20026;0
    </p>
    <p>
      &#160;&#160;&#160;&#160;WFE(&quot;ne&quot;)
    </p>
    <p>
      &#160;&#160;&#160;&#160;@&#19981;&#20026;0&#65292;&#21017;&#25191;&#34892;WFE&#25351;&#20196;&#12290;&#19981;&#20026;0&#65292;&#20195;&#34920;&#38145;&#24050;&#34987;&#38145;&#23450;&#65292;&#21017;&#36890;&#36807;WFE&#25351;&#20196;&#36827;&#20837;suspend mode(clock&#20572;&#27490;)&#65292;&#30452;&#21040;&#35813;&#38145;&#34987;&#37322;&#25918;&#26102;&#21457;&#20986;&#30340;SEV&#25351;&#20196;&#65292;CPU&#25165;&#20250;&#36339;&#20986;suspend mode&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;strexeq %0, %2, [%1]\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;@&#23558;lock-&gt;lock&#21152;1&#65292;&#24182;&#35299;&#38500;lock-&gt;lock&#30340;&#38145;&#23450;&#29366;&#24577;&#65292;tmp&#20013;&#23384;&#20837;&#36820;&#22238;&#29366;&#24577;&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;teqeq %0, #0\n&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;@&#22914;&#26524;&#25191;&#34892;&#25104;&#21151;&#65292;&#21017;tmp&#20026;0&#65292;&#25104;&#21151;&#33719;&#24471;&#25152;&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;bne 1b&quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;@&#22914;&#26524;&#25191;&#34892;&#19981;&#25104;&#21151;&#65292;&#21017;tmp&#19981;&#20026;0&#65292;&#36339;&#36716;&#21040;&#26631;&#21495;1&#22788;&#65292;&#32487;&#32493;&#33719;&#24471;&#38145;&#12290;
    </p>
    <p>
      &#160;&#160;&#160;&#160;: &quot;=&amp;r&quot; (tmp)
    </p>
    <p>
      &#160;&#160;&#160;&#160;: &quot;r&quot; (&amp;lock-&gt;lock), &quot;r&quot; (1) : &quot;cc&quot;);
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;smp_mb();
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1412724882911" FOLDED="true" ID="ID_2085274" MODIFIED="1414012938283" TEXT="&#x7ebf;&#x7a0b;&#x901a;&#x8fc7;&#x5b8f; spin_unlock &#x91ca;&#x653e;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x8be5;&#x5b8f;&#x8c03;&#x7528; __raw_spin_unlock &#x51fd;&#x6570;">
<node CREATED="1412724902593" ID="ID_1894005232" MODIFIED="1412724907969">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static inline void __raw_spin_unlock(raw_spinlock_t *lock)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;asm volatile(&quot;movb $1,%0&quot; : &quot;+m&quot; (lock-&gt;slock) :: &quot;memory&quot;);
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1412724920225" ID="ID_1278584204" MODIFIED="1412724922179" TEXT="&#x53ef;&#x89c1; __raw_spin_unlock &#x51fd;&#x6570;&#x4ec5;&#x4ec5;&#x6267;&#x884c;&#x4e00;&#x6761;&#x6c47;&#x7f16;&#x6307;&#x4ee4;&#xff1a;&#x5c06; slock &#x7f6e;&#x4e3a; 1"/>
</node>
</node>
<node CREATED="1366522214391" ID="ID_1288833184" MODIFIED="1414004922695" TEXT="API">
<node CREATED="1366522219238" FOLDED="true" ID="ID_1239275163" MODIFIED="1366522939993" TEXT="spin_lock_init(x)">
<node CREATED="1366522244152" ID="ID_1373141239" MODIFIED="1366522245052" TEXT="&#x521d;&#x59cb;&#x5316;&#x81ea;&#x65cb;&#x9501;x"/>
</node>
<node CREATED="1366522266765" FOLDED="true" ID="ID_72998570" MODIFIED="1366522939529" TEXT="spin_is_locked(x)">
<node CREATED="1366522282643" ID="ID_1857223564" MODIFIED="1366522284395" TEXT="&#x7528;&#x4e8e;&#x5224;&#x65ad;&#x81ea;&#x65cb;&#x9501;x&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x88ab;&#x67d0;&#x6267;&#x884c;&#x5355;&#x5143;&#x4fdd;&#x6301;&#xff08;&#x5373;&#x88ab;&#x9501;&#xff09;&#xff0c;&#x5982;&#x679c;&#x662f;&#xff0c;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x5047;"/>
</node>
<node CREATED="1366522297448" FOLDED="true" ID="ID_560631772" MODIFIED="1366522938769" TEXT="spin_unlock_wait(x)">
<node CREATED="1366522347133" ID="ID_844008647" MODIFIED="1366522356950" TEXT="&#x7b49;&#x5f85;&#x81ea;&#x65cb;&#x9501;x&#x53d8;&#x5f97;&#x6ca1;&#x6709;&#x88ab;&#x4efb;&#x4f55;&#x6267;&#x884c;&#x5355;&#x5143;&#x4fdd;&#x6301;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x6267;&#x884c;&#x5355;&#x5143;&#x4fdd;&#x6301;&#x8be5;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x8be5;&#x5b8f;&#x7acb;&#x5373;&#x8fd4;&#x56de;&#xff0c;&#xa;&#x5426;&#x5219;&#x5c06;&#x5faa;&#x73af;&#x5728;&#x90a3;&#x91cc;&#xff0c;&#x76f4;&#x5230;&#x8be5;&#x81ea;&#x65cb;&#x9501;&#x88ab;&#x4fdd;&#x6301;&#x8005;&#x91ca;&#x653e;"/>
</node>
<node CREATED="1366522371311" FOLDED="true" ID="ID_1267573020" MODIFIED="1366522938369" TEXT="spin_trylock(lock)">
<node CREATED="1366522387002" ID="ID_747450713" MODIFIED="1366522396302" TEXT="&#x8be5;&#x5b8f;&#x5c3d;&#x529b;&#x83b7;&#x5f97;&#x81ea;&#x65cb;&#x9501;lock&#xff0c;&#x5982;&#x679c;&#x80fd;&#x7acb;&#x5373;&#x83b7;&#x5f97;&#x9501;&#xff0c;&#x5b83;&#x83b7;&#x5f97;&#x9501;&#x5e76;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#x4e0d;&#x80fd;&#x7acb;&#x5373;&#x83b7;&#x5f97;&#x9501;&#xff0c;&#x7acb;&#x5373;&#x8fd4;&#x56de;&#x5047;&#x3002;&#xa;&#x5b83;&#x4e0d;&#x4f1a;&#x81ea;&#x65cb;&#x7b49;&#x5f85;lock&#x88ab;&#x91ca;&#x653e;"/>
</node>
<node CREATED="1366522408879" FOLDED="true" ID="ID_1658832320" MODIFIED="1414014899588" TEXT="spin_lock(lock)">
<node CREATED="1366522425555" ID="ID_852428635" MODIFIED="1366522435407" TEXT="&#x83b7;&#x5f97;&#x81ea;&#x65cb;&#x9501;lock&#xff0c;&#x5982;&#x679c;&#x80fd;&#x591f;&#x7acb;&#x5373;&#x83b7;&#x5f97;&#x9501;&#xff0c;&#x5b83;&#x5c31;&#x9a6c;&#x4e0a;&#x8fd4;&#x56de;&#xff0c;&#x5426;&#x5219;&#xff0c;&#x5b83;&#x5c06;&#x81ea;&#x65cb;&#x5728;&#x90a3;&#x91cc;&#xff0c;&#x76f4;&#x5230;&#x8be5;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x4fdd;&#x6301;&#x8005;&#x91ca;&#x653e;&#xff0c;&#x8fd9;&#x65f6;&#xff0c;&#x5b83;&#x83b7;&#x5f97;&#x9501;&#x5e76;&#x8fd4;&#x56de;&#x3002;&#x603b;&#x4e4b;&#xff0c;&#x53ea;&#x6709;&#x5b83;&#x83b7;&#x5f97;&#x9501;&#x624d;&#x8fd4;&#x56de;"/>
</node>
<node CREATED="1366522454570" FOLDED="true" ID="ID_205648113" MODIFIED="1414014898124" TEXT="spin_lock_irqsave(lock, flags)">
<node CREATED="1366522470868" ID="ID_1796108600" MODIFIED="1414014179281" TEXT="&#x83b7;&#x5f97;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x540c;&#x65f6;&#x628a;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x4fdd;&#x5b58;&#x5230;&#x53d8;&#x91cf;flags&#x4e2d;&#x5e76;&#x5931;&#x6548;&#x672c;&#x5730;&#x4e2d;&#x65ad;, &#x5173;&#x95ed;&#x786c;&#x4e2d;&#x65ad;&#x540e;, &#x6240;&#x6709;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;&#x548c;&#x786c;&#x4e2d;&#x65ad;&#x90fd;&#x4e0d;&#x4f1a;&#x6267;&#x884c;"/>
<node CREATED="1414014215615" ID="ID_1728273814" MODIFIED="1414014484922">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      spin_lock_irqsave&#36890;&#24120;&#29992;&#22312;&#36719;&#20013;&#26029;&#20013;, &#29992;&#26469;&#31105;&#27490;&#36719;&#20013;&#26029;&#21644;&#30828;&#20013;&#26029;.&#22914;&#26524;&#19968;&#20010;&#30828;&#20214;&#20013;&#26029;&#26381;&#21153;&#20363;&#31243;&#19982;&#19968;&#20010;&#36719;&#20013;&#26029;&#20849;&#20139;&#25968;&#25454;, &#23601;&#26377;&#20004;&#28857;&#38656;&#35201;&#32771;&#34385;. &#31532;&#19968;, &#36719;&#20013;&#26029;&#30340;&#25191;&#34892;&#36807;&#31243;&#21487;&#33021;&#20250;&#34987;&#30828;&#20214;&#20013;&#26029;&#25171;&#26029;; &#31532;&#20108;, &#20020;&#30028;&#21306;&#21487;&#33021;&#20250;&#34987;&#21478;&#19968;&#20010;CPU&#19978;&#30340;&#30828;&#20013;&#26029;&#36827;&#20837;. &#36825;&#23601;&#38656;&#35201;spin_lock_irq. &#23427;&#20250;&#31105;&#27490;&#26412;&#22320;CPU&#19978;&#30340;&#36719;&#20013;&#26029;&#21644;&#30828;&#20013;&#26029;, &#20174;&#32780;&#38450;&#27490;&#20013;&#26029;&#30340;&#25171;&#25200;, &#32780;&#33719;&#21462;spin lock&#21518;&#21448;&#21487;&#20197;&#38450;&#27490;&#21035;&#30340;CPU&#30340;&#25171;&#25200;.
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1366522485235" FOLDED="true" ID="ID_420453388" MODIFIED="1414014117715" TEXT="spin_lock_irq(lock)">
<node CREATED="1366522499579" ID="ID_1829930644" MODIFIED="1366522501331" TEXT="&#x7c7b;&#x4f3c;&#x4e8e;spin_lock_irqsave&#xff0c;&#x53ea;&#x662f;&#x8be5;&#x5b8f;&#x4e0d;&#x4fdd;&#x5b58;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;"/>
</node>
<node CREATED="1366522513062" FOLDED="true" ID="ID_1549660348" MODIFIED="1414016807678" TEXT="spin_lock_bh(lock)">
<node CREATED="1366522526307" ID="ID_1510879848" MODIFIED="1414013049999" TEXT="&#x5f97;&#x5230;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x540c;&#x65f6;&#x5931;&#x6548;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;, &#x5728;&#x8f6f;&#x4ef6;&#x4e2d;&#x65ad;&#x88ab;&#x7981;&#x6b62;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x672c;&#x5730;CPU&#x7684;&#x6240;&#x6709;&#x8f6f;&#x4e2d;&#x65ad;&#x90fd;&#x4e0d;&#x4f1a;&#x88ab;&#x6267;&#x884c;"/>
<node CREATED="1414012996090" ID="ID_1725140232" MODIFIED="1414013326178" TEXT="spin_lock_bh&#x901a;&#x5e38;&#x7528;&#x5728;&#x8fdb;&#x7a0b;&#x4e2d;&#xff0c;&#x7528;&#x6765;&#x7981;&#x6b62;&#x62a2;&#x5360;&#x548c;&#x7981;&#x6b62;&#x8f6f;&#x4e2d;&#x65ad;. &#x5982;&#x679c;&#x4e00;&#x4e2a;softirq&#x4e0e;&#x7528;&#x6237;&#x4e0a;&#x4e0b;&#x6587;&#x5171;&#x4eab;&#x6570;&#x636e;, &#x5c31;&#x6709;&#x4e24;&#x4e2a;&#x95ee;&#x9898;: &#x9996;&#x5148;, &#x5f53;&#x524d;&#x7684;&#x7528;&#x6237;&#x4e0a;&#x4e0b;&#x6587;&#x53ef;&#x80fd;&#x88ab;softirq&#x4e2d;&#x65ad;; &#x5176;&#x6b21;, &#x4e34;&#x754c;&#x533a;&#x53ef;&#x80fd;&#x4f1a;&#x5728;&#x522b;&#x7684;CPU&#x8fdb;&#x5165;&#x3002;&#x8fd9;&#x65f6;&#x5c31;&#x9700;&#x8981;spin_lock_bh, &#x5b83;&#x4f1a;&#x7981;&#x6b62;&#x672c;&#x5730;CPU&#x7684;&#x8f6f;&#x4e2d;&#x65ad;, &#x4ece;&#x800c;&#x9632;&#x6b62;&#x4e86;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;&#x7684;&#x6253;&#x6270;, &#x800c;&#x83b7;&#x53d6;&#x9501;spin lock&#x540e;&#x53c8;&#x9632;&#x6b62;&#x4e86;&#x522b;&#x7684;CPU&#x7684;&#x6253;&#x6270;."/>
<node CREATED="1414013805624" ID="ID_639722684" MODIFIED="1414013835398" TEXT="&#x4e3a;&#x4ec0;&#x4e48;&#x9700;&#x8981;spin_lock_bh&#x800c;&#x4e0d;&#x662f;spin_lock?">
<node CREATED="1414013852216" ID="ID_327763942" MODIFIED="1414016802044" TEXT="&#x5728;&#x53ea;&#x6709;&#x4e00;&#x4e2a;CPU&#x7684;&#x7cfb;&#x7edf;&#x4e2d;, spin lock&#x7684;&#x5b9e;&#x73b0;&#x4ec5;&#x4ec5;&#x662f;&#x7981;&#x6b62;&#x62a2;&#x5360;, &#x5b83;&#x4e0d;&#x662f;&#x4e00;&#x4e2a;&#x5177;&#x4f53;&#x800c;&#x8a00;&#x7684;&#x9501;, &#x5b83;&#x53ef;&#x4ee5;&#x9632;&#x6b62;&#x8fdb;&#x7a0b;&#x95f4;&#x7684;&#x62a2;&#x5360;,&#x4f46;&#x65e0;&#x6cd5;&#x9632;&#x6b62;&#x8f6f;&#x4e2d;&#x65ad;&#x548c;&#x786c;&#x4e2d;&#x65ad;&#x7684;&#x62a2;&#x5360;.&#x8f6f;&#x4e2d;&#x65ad;&#x62a2;&#x5360;&#x8fdb;&#x7a0b;&#x540e;&#x540c;&#x6837;&#x53ef;&#x4ee5;&#x62ff;&#x5230;&#x8fd9;&#x4e2a;&#x9501;, &#x56e0;&#x6b64;&#x6ca1;&#x6709;&#x4fdd;&#x62a4;&#x6548;&#x679c;, &#x6240;&#x4ee5;&#x8fdb;&#x7a0b;&#x4e0e;&#x8f6f;&#x4e2d;&#x65ad;&#x5171;&#x4eab;&#x6570;&#x636e;&#x65f6;&#x9700;&#x8981;&#x4f7f;&#x7528;spin_lock_bh."/>
<node CREATED="1414013852216" ID="ID_363280394" MODIFIED="1414016699924" TEXT="&#x5728;&#x591a;CPU&#x7684;&#x7cfb;&#x7edf;&#x4e2d;, spin lock&#x7684;&#x5b9e;&#x73b0;&#x662f;&#x4e00;&#x4e2a;&#x5177;&#x4f53;&#x800c;&#x8a00;&#x7684;&#x9501;, &#x5b83;&#x4f1a;&#x5fd9;&#x7b49;&#x5f85;&#x8fd9;&#x4e2a;&#x9501;,&#x76f4;&#x5230;&#x5176;&#x91ca;&#x653e;.&#xa;spin lock&#x53ef;&#x4ee5;&#x9632;&#x6b62;&#x8fdb;&#x7a0b;&#x95f4;&#x7684;&#x62a2;&#x5360;,&#x4f46;&#x65e0;&#x6cd5;&#x9632;&#x6b62;&#x8f6f;&#x4e2d;&#x65ad;&#x548c;&#x786c;&#x4e2d;&#x65ad;&#x7684;&#x62a2;&#x5360;.&#x5f53;&#x8fdb;&#x7a0b;&#x4e0e;&#x8f6f;&#x4e2d;&#x65ad;&#x5171;&#x4eab;&#x6570;&#x636e;, &#x4e14;&#x8fdb;&#x7a0b;&#x5df2;&#x83b7;&#x53d6;&#x9501;&#x65f6;, &#x82e5;&#x8f6f;&#x4e2d;&#x65ad;&#x62a2;&#x5360;&#x8fdb;&#x7a0b;&#x4e5f;&#x53bb;&#x83b7;&#x53d6;&#x9501;, &#x5219;&#x4f1a;&#x6b7b;&#x9501;, &#x56e0;&#x4e3a;&#x6b64;&#x65f6;&#x5b9e;&#x9645;&#x4e0a;&#x83b7;&#x53d6;&#x4e0d;&#x5230;&#x9501;, &#x5e76;&#x4e14;&#x8fd8;&#x8981;&#x5fd9;&#x7b49;&#x5f85;, &#x8fd9;&#x5bfc;&#x81f4;&#x65e0;&#x6cd5;&#x9000;&#x51fa;&#x8f6f;&#x4e2d;&#x65ad;&#x8fdb;&#x884c;&#x8c03;&#x5ea6;, &#x4ece;&#x800c;&#x4e5f;&#x65e0;&#x6cd5;&#x91ca;&#x653e;&#x9501;.&#x8fd9;&#x65f6;&#x5c31;&#x9700;&#x8981;&#x4f7f;&#x7528;spin_lock_bh&#x9632;&#x6b62;&#x8f6f;&#x4e2d;&#x65ad;&#x7684;&#x62a2;&#x5360;."/>
</node>
</node>
<node CREATED="1366522539405" FOLDED="true" ID="ID_1738009550" MODIFIED="1366522935577" TEXT="spin_unlock(lock)">
<node CREATED="1366522558134" ID="ID_168987252" MODIFIED="1366522568698" TEXT="&#x91ca;&#x653e;&#x81ea;&#x65cb;&#x9501;lock&#xff0c;&#x5b83;&#x4e0e;spin_trylock&#x6216;spin_lock&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;&#xa;&#x5982;&#x679c;spin_trylock&#x8fd4;&#x56de;&#x5047;&#xff0c;&#x8868;&#x660e;&#x6ca1;&#x6709;&#x83b7;&#x5f97;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x56e0;&#x6b64;&#x4e0d;&#x5fc5;&#x4f7f;&#x7528;spin_unlock&#x91ca;&#x653e;"/>
</node>
<node CREATED="1366522579857" FOLDED="true" ID="ID_528180167" MODIFIED="1366522934849" TEXT="spin_unlock_irqrestore(lock, flags)">
<node CREATED="1366522593921" ID="ID_1956398704" MODIFIED="1366522600426" TEXT="&#x91ca;&#x653e;&#x81ea;&#x65cb;&#x9501;lock&#x7684;&#x540c;&#x65f6;&#xff0c;&#x4e5f;&#x6062;&#x590d;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x4e3a;&#x53d8;&#x91cf;flags&#x4fdd;&#x5b58;&#x7684;&#x503c;&#x3002;&#x5b83;&#x4e0e;spin_lock_irqsave&#x914d;&#x5bf9;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366522612135" FOLDED="true" ID="ID_1388241094" MODIFIED="1366522934329" TEXT="spin_unlock_irq(lock)">
<node CREATED="1366522625510" ID="ID_505457135" MODIFIED="1366522627943" TEXT="&#x91ca;&#x653e;&#x81ea;&#x65cb;&#x9501;lock&#x7684;&#x540c;&#x65f6;&#xff0c;&#x4e5f;&#x4f7f;&#x80fd;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#x3002;&#x5b83;&#x4e0e;spin_lock_irq&#x914d;&#x5bf9;&#x5e94;&#x7528;"/>
</node>
<node CREATED="1366522638615" ID="ID_1290072865" MODIFIED="1414012958298" TEXT="spin_unlock_bh(lock)">
<node CREATED="1366522652462" ID="ID_444853821" MODIFIED="1366522653958" TEXT="&#x91ca;&#x653e;&#x81ea;&#x65cb;&#x9501;lock&#x7684;&#x540c;&#x65f6;&#xff0c;&#x4e5f;&#x4f7f;&#x80fd;&#x672c;&#x5730;&#x7684;&#x8f6f;&#x4e2d;&#x65ad;&#x3002;&#x5b83;&#x4e0e;spin_lock_bh&#x914d;&#x5bf9;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1366522664252" FOLDED="true" ID="ID_1331140902" MODIFIED="1366522933393" TEXT="spin_trylock_irqsave(lock, flags)">
<node CREATED="1366522680466" ID="ID_1025051075" MODIFIED="1366522803582" TEXT="&#x5982;&#x679c;&#x83b7;&#x5f97;&#x81ea;&#x65cb;&#x9501;lock&#xff0c;&#x5b83;&#x4e5f;&#x5c06;&#x4fdd;&#x5b58;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x5230;&#x53d8;&#x91cf;flags&#x4e2d;&#xff0c;&#x5e76;&#x4e14;&#x5931;&#x6548;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#xff0c;&#xa;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x83b7;&#x5f97;&#x9501;&#xff0c;&#x5b83;&#x4ec0;&#x4e48;&#x4e5f;&#x4e0d;&#x505a;, &#x7b49;&#x540c;&#x4e8e;spin_trylock.&#xa;&#x56e0;&#x6b64;&#x5982;&#x679c;&#x80fd;&#x591f;&#x7acb;&#x5373;&#x83b7;&#x5f97;&#x9501;&#xff0c;&#x5b83;&#x7b49;&#x540c;&#x4e8e;spin_lock_irqsave&#xff0c;&#x9700;&#x8981;&#x4f7f;&#x7528;spin_unlock_irqrestore&#x6765;&#x91ca;&#x653e;"/>
</node>
<node CREATED="1366522816169" FOLDED="true" ID="ID_1853110227" MODIFIED="1366522932705" TEXT="spin_trylock_irq(lock)">
<node CREATED="1366522829898" ID="ID_728911477" MODIFIED="1366522837847" TEXT="&#x7c7b;&#x4f3c;&#x4e8e;spin_trylock_irqsave&#xff0c;&#x53ea;&#x662f;&#x8be5;&#x5b8f;&#x4e0d;&#x4fdd;&#x5b58;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x3002;&#xa;&#x5982;&#x679c;&#x8be5;&#x5b8f;&#x83b7;&#x5f97;&#x81ea;&#x65cb;&#x9501;lock&#xff0c;&#x9700;&#x8981;&#x4f7f;&#x7528;spin_unlock_irq&#x6765;&#x91ca;&#x653e;"/>
</node>
<node CREATED="1366522847476" FOLDED="true" ID="ID_888273046" MODIFIED="1366522932121" TEXT="spin_trylock_bh(lock)">
<node CREATED="1366522863791" ID="ID_1618010893" MODIFIED="1366522880952" TEXT="&#x5982;&#x679c;&#x83b7;&#x5f97;&#x4e86;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x5b83;&#x4e5f;&#x5c06;&#x5931;&#x6548;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;&#x3002;&#x5982;&#x679c;&#x5f97;&#x4e0d;&#x5230;&#x9501;&#xff0c;&#x5b83;&#x4ec0;&#x4e48;&#x4e5f;&#x4e0d;&#x505a;&#x3002;&#xa;&#x56e0;&#x6b64;&#xff0c;&#x5982;&#x679c;&#x5f97;&#x5230;&#x4e86;&#x9501;&#xff0c;&#x5b83;&#x7b49;&#x540c;&#x4e8e;spin_lock_bh&#xff0c;&#x5982;&#x679c;&#x5f97;&#x4e0d;&#x5230;&#x9501;&#xff0c;&#x5b83;&#x7b49;&#x540c;&#x4e8e;spin_trylock&#x3002;&#xa;&#x5982;&#x679c;&#x8be5;&#x5b8f;&#x5f97;&#x5230;&#x4e86;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x9700;&#x8981;&#x4f7f;&#x7528;spin_unlock_bh&#x6765;&#x91ca;&#x653e;"/>
</node>
<node CREATED="1366522890565" FOLDED="true" ID="ID_515758018" MODIFIED="1366522931417" TEXT="spin_can_lock(lock)">
<node CREATED="1366522907043" ID="ID_1633133530" MODIFIED="1366522914304" TEXT="&#x7528;&#x4e8e;&#x5224;&#x65ad;&#x81ea;&#x65cb;&#x9501;lock&#x662f;&#x5426;&#x80fd;&#x591f;&#x88ab;&#x9501;&#xff0c;&#x5b83;&#x5b9e;&#x9645;&#x662f;spin_is_locked&#x53d6;&#x53cd;&#x3002;&#xa;&#x5982;&#x679c;lock&#x6ca1;&#x6709;&#x88ab;&#x9501;&#xff0c;&#x5b83;&#x8fd4;&#x56de;&#x771f;&#xff0c;&#x5426;&#x5219;&#xff0c;&#x8fd4;&#x56de;&#x5047;"/>
</node>
</node>
</node>
<node CREATED="1366520864081" ID="ID_1106598927" MODIFIED="1366520866971" TEXT="&#x7528;&#x9014;">
<node CREATED="1366522045014" ID="ID_1161593214" MODIFIED="1366522059928" TEXT="&#x4fe1;&#x53f7;&#x91cf;&#x548c;&#x8bfb;&#x5199;&#x4fe1;&#x53f7;&#x91cf;&#x9002;&#x5408;&#x4e8e;&#x4fdd;&#x6301;&#x65f6;&#x95f4;&#x8f83;&#x957f;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5b83;&#x4eec;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#x56e0;&#x6b64;&#x53ea;&#x80fd;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;&#xff08;_trylock&#x7684;&#x53d8;&#x79cd;&#x80fd;&#x591f;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;&#xff09;&#xff0c;&#xa;&#x800c;&#x81ea;&#x65cb;&#x9501;&#x9002;&#x5408;&#x4e8e;&#x4fdd;&#x6301;&#x65f6;&#x95f4;&#x975e;&#x5e38;&#x77ed;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x5728;&#x4efb;&#x4f55;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
</node>
</node>
<node CREATED="1412631082143" FOLDED="true" ID="ID_138725822" MODIFIED="1422496710091" TEXT="RCU">
<node CREATED="1412631136318" ID="ID_62686352" LINK="http://www.ibm.com/developerworks/cn/linux/l-rcu/" MODIFIED="1412631177935" TEXT="&#x5f15;&#x7528;"/>
<node CREATED="1412631111584" FOLDED="true" ID="ID_503704687" MODIFIED="1412721208994" TEXT="&#x80cc;&#x666f;">
<node CREATED="1412631250215" ID="ID_1858368552" MODIFIED="1412631253076" TEXT="&#x4f17;&#x6240;&#x5468;&#x77e5;&#xff0c;&#x4e3a;&#x4e86;&#x4fdd;&#x62a4;&#x5171;&#x4eab;&#x6570;&#x636e;,&#x9700;&#x8981;&#x4e00;&#x4e9b;&#x540c;&#x6b65;&#x673a;&#x5236;,&#x5982;&#x81ea;&#x65cb;&#x9501;(spinlock)&#xff0c;&#x8bfb;&#x5199;&#x9501;(rwlock)&#xff0c;&#x5b83;&#x4eec;&#x4f7f;&#x7528;&#x8d77;&#x6765;&#x975e;&#x5e38;&#x7b80;&#x5355;,&#x800c;&#x4e14;&#x662f;&#x4e00;&#x79cd;&#x5f88;&#x6709;&#x6548;&#x7684;&#x540c;&#x6b65;&#x673a;&#x5236;&#xff0c;&#x5728;UNIX&#x7cfb;&#x7edf;&#x548c;Linux&#x7cfb;&#x7edf;&#x4e2d;&#x5f97;&#x5230;&#x4e86;&#x5e7f;&#x6cdb;&#x7684;&#x4f7f;&#x7528;&#x3002;&#x4f46;&#x662f;&#x968f;&#x7740;&#x8ba1;&#x7b97;&#x673a;&#x786c;&#x4ef6;&#x7684;&#x5feb;&#x901f;&#x53d1;&#x5c55;&#xff0c;&#x83b7;&#x5f97;&#x8fd9;&#x79cd;&#x9501;&#x7684;&#x5f00;&#x9500;&#x76f8;&#x5bf9;&#x4e8e;CPU&#x7684;&#x901f;&#x5ea6;&#x5728;&#x6210;&#x500d;&#x5730;&#x589e;&#x52a0;&#xff0c;&#x539f;&#x56e0;&#x5f88;&#x7b80;&#x5355;&#xff0c;CPU&#x7684;&#x901f;&#x5ea6;&#x4e0e;&#x8bbf;&#x95ee;&#x5185;&#x5b58;&#x7684;&#x901f;&#x5ea6;&#x5dee;&#x8ddd;&#x8d8a;&#x6765;&#x8d8a;&#x5927;&#xff0c;&#x800c;&#x8fd9;&#x79cd;&#x9501;&#x4f7f;&#x7528;&#x4e86;&#x539f;&#x5b50;&#x64cd;&#x4f5c;&#x6307;&#x4ee4;&#xff0c;&#x5b83;&#x9700;&#x8981;&#x539f;&#x5b50;&#x5730;&#x8bbf;&#x95ee;&#x5185;&#x5b58;&#xff0c;&#x4e5f;&#x5c31;&#x8bf4;&#x83b7;&#x5f97;&#x9501;&#x7684;&#x5f00;&#x9500;&#x4e0e;&#x8bbf;&#x5b58;&#x901f;&#x5ea6;&#x76f8;&#x5173;&#xff0c;&#x53e6;&#x5916;&#x5728;&#x5927;&#x90e8;&#x5206;&#x975e;x86&#x67b6;&#x6784;&#x4e0a;&#x83b7;&#x53d6;&#x9501;&#x4f7f;&#x7528;&#x4e86;&#x5185;&#x5b58;&#x6805;(Memory Barrier)&#xff0c;&#x8fd9;&#x4f1a;&#x5bfc;&#x81f4;&#x5904;&#x7406;&#x5668;&#x6d41;&#x6c34;&#x7ebf;&#x505c;&#x6ede;&#x6216;&#x5237;&#x65b0;&#xff0c;&#x56e0;&#x6b64;&#x5b83;&#x7684;&#x5f00;&#x9500;&#x76f8;&#x5bf9;&#x4e8e;CPU&#x901f;&#x5ea6;&#x800c;&#x8a00;&#x5c31;&#x8d8a;&#x6765;&#x8d8a;&#x5927;&#x3002;&#x8868;1&#x6570;&#x636e;&#x8bc1;&#x660e;&#x4e86;&#x8fd9;&#x4e00;&#x70b9;&#x3002;">
<node CREATED="1412632148473" ID="ID_1940616447" MODIFIED="1412632175959">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/lock_performance.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412632204598" ID="ID_1012277375" MODIFIED="1412632207284" TEXT="&#x9501;&#x673a;&#x5236;&#x7684;&#x53e6;&#x4e00;&#x4e2a;&#x95ee;&#x9898;&#x5728;&#x4e8e;&#x5176;&#x53ef;&#x6269;&#x5c55;&#x6027;&#xff0c;&#x5728;&#x591a;&#x5904;&#x7406;&#x5668;&#x7cfb;&#x7edf;&#x4e0a;&#xff0c;&#x53ef;&#x6269;&#x5c55;&#x6027;&#x975e;&#x5e38;&#x91cd;&#x8981;&#xff0c;&#x5426;&#x5219;&#x6839;&#x672c;&#x65e0;&#x6cd5;&#x53d1;&#x6325;&#x5176;&#x6027;&#x80fd;&#x3002;&#x56fe;1&#x8868;&#x660e;&#x4e86;Linux&#x4e0a;&#x5404;&#x79cd;&#x9501;&#x7684;&#x6269;&#x5c55;&#x6027;">
<node CREATED="1412632211024" ID="ID_1649955447" MODIFIED="1412632232359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/lock_cpu_extendable.png" />
  </body>
</html></richcontent>
<node CREATED="1412632254968" ID="ID_3506969" MODIFIED="1412632257335" TEXT="&#x6ce8;&#xff1a;refcnt&#x8868;&#x793a;&#x81ea;&#x65cb;&#x9501;&#x4e0e;&#x5f15;&#x7528;&#x8bb0;&#x6570;&#x4e00;&#x8d77;&#x4f7f;&#x7528;"/>
<node CREATED="1412632277126" ID="ID_682358986" MODIFIED="1412632280052" TEXT="&#x8bfb;&#x5199;&#x9501;rwlock&#x5728;&#x4e24;&#x4e2a;CPU&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x6027;&#x80fd;&#x53cd;&#x5012;&#x6bd4;&#x4e00;&#x4e2a;CPU&#x7684;&#x5dee;&#xff0c;&#x5728;&#x56db;&#x4e2a;CPU&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;refcnt&#x7684;&#x6027;&#x80fd;&#x8981;&#x9ad8;&#x4e8e;rwlock&#xff0c;refcnt&#x5927;&#x7ea6;&#x662f;&#x7406;&#x8bba;&#x6027;&#x80fd;&#x7684;45%&#xff0c;&#x800c;rwlock&#x662f;&#x7406;&#x8bba;&#x6027;&#x80fd;&#x7684;39%,&#x81ea;&#x65cb;&#x7f29;spinlock&#x7684;&#x6027;&#x80fd;&#x660e;&#x663e;&#x597d;&#x4e8e;refcnt&#x548c;rwlock&#xff0c;&#x4f46;&#x5b83;&#x4e5f;&#x53ea;&#x8fbe;&#x5230;&#x4e86;&#x7406;&#x6027;&#x6027;&#x80fd;&#x7684;57%&#xff0c;brlock&#xff08;Big Reader Lock&#xff09;&#x6027;&#x80fd;&#x53ef;&#x4ee5;&#x7ebf;&#x6027;&#x6269;&#x5c55;&#x3002;"/>
</node>
</node>
</node>
<node CREATED="1412632457721" FOLDED="true" ID="ID_1795641852" MODIFIED="1422408544797" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1412632465423" ID="ID_400020481" MODIFIED="1412632467440" TEXT="RCU(Read-Copy Update)&#xff0c;&#x987e;&#x540d;&#x601d;&#x4e49;&#x5c31;&#x662f;&#x8bfb;-&#x62f7;&#x8d1d;&#x4fee;&#x6539;&#xff0c;&#x5b83;&#x662f;&#x57fa;&#x4e8e;&#x5176;&#x539f;&#x7406;&#x547d;&#x540d;&#x7684;&#x3002;&#x5bf9;&#x4e8e;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;&#x8bfb;&#x8005;&#x4e0d;&#x9700;&#x8981;&#x83b7;&#x5f97;&#x4efb;&#x4f55;&#x9501;&#x5c31;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x5b83;&#xff0c;&#x4f46;&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5b83;&#x65f6;&#x9996;&#x5148;&#x62f7;&#x8d1d;&#x4e00;&#x4e2a;&#x526f;&#x672c;&#xff0c;&#x7136;&#x540e;&#x5bf9;&#x526f;&#x672c;&#x8fdb;&#x884c;&#x4fee;&#x6539;&#xff0c;&#x6700;&#x540e;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#xff08;callback&#xff09;&#x673a;&#x5236;&#x5728;&#x9002;&#x5f53;&#x7684;&#x65f6;&#x673a;&#x628a;&#x6307;&#x5411;&#x539f;&#x6765;&#x6570;&#x636e;&#x7684;&#x6307;&#x9488;&#x91cd;&#x65b0;&#x6307;&#x5411;&#x65b0;&#x7684;&#x88ab;&#x4fee;&#x6539;&#x7684;&#x6570;&#x636e;&#x3002;&#x8fd9;&#x4e2a;&#x65f6;&#x673a;&#x5c31;&#x662f;&#x6240;&#x6709;&#x5f15;&#x7528;&#x8be5;&#x6570;&#x636e;&#x7684;CPU&#x90fd;&#x9000;&#x51fa;&#x5bf9;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7684;&#x64cd;&#x4f5c;&#x3002;"/>
<node CREATED="1412632480072" ID="ID_1119196979" MODIFIED="1412632481035" TEXT="&#x56e0;&#x6b64;RCU&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x79cd;&#x6539;&#x8fdb;&#x7684;rwlock&#xff0c;&#x8bfb;&#x8005;&#x51e0;&#x4e4e;&#x6ca1;&#x6709;&#x4ec0;&#x4e48;&#x540c;&#x6b65;&#x5f00;&#x9500;&#xff0c;&#x5b83;&#x4e0d;&#x9700;&#x8981;&#x9501;&#xff0c;&#x4e0d;&#x4f7f;&#x7528;&#x539f;&#x5b50;&#x6307;&#x4ee4;&#xff0c;&#x800c;&#x4e14;&#x5728;&#x9664;alpha&#x7684;&#x6240;&#x6709;&#x67b6;&#x6784;&#x4e0a;&#x4e5f;&#x4e0d;&#x9700;&#x8981;&#x5185;&#x5b58;&#x6805;&#xff08;Memory Barrier&#xff09;&#xff0c;&#x56e0;&#x6b64;&#x4e0d;&#x4f1a;&#x5bfc;&#x81f4;&#x9501;&#x7ade;&#x4e89;&#xff0c;&#x5185;&#x5b58;&#x5ef6;&#x8fdf;&#x4ee5;&#x53ca;&#x6d41;&#x6c34;&#x7ebf;&#x505c;&#x6ede;&#x3002;&#x4e0d;&#x9700;&#x8981;&#x9501;&#x4e5f;&#x4f7f;&#x5f97;&#x4f7f;&#x7528;&#x66f4;&#x5bb9;&#x6613;&#xff0c;&#x56e0;&#x4e3a;&#x6b7b;&#x9501;&#x95ee;&#x9898;&#x5c31;&#x4e0d;&#x9700;&#x8981;&#x8003;&#x8651;&#x4e86;&#x3002;&#x5199;&#x8005;&#x7684;&#x540c;&#x6b65;&#x5f00;&#x9500;&#x6bd4;&#x8f83;&#x5927;&#xff0c;&#x5b83;&#x9700;&#x8981;&#x5ef6;&#x8fdf;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x7684;&#x91ca;&#x653e;&#xff0c;&#x590d;&#x5236;&#x88ab;&#x4fee;&#x6539;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;&#x5b83;&#x4e5f;&#x5fc5;&#x987b;&#x4f7f;&#x7528;&#x67d0;&#x79cd;&#x9501;&#x673a;&#x5236;&#x540c;&#x6b65;&#x5e76;&#x884c;&#x7684;&#x5176;&#x5b83;&#x5199;&#x8005;&#x7684;&#x4fee;&#x6539;&#x64cd;&#x4f5c;&#x3002;&#x8bfb;&#x8005;&#x5fc5;&#x987b;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x4fe1;&#x53f7;&#x7ed9;&#x5199;&#x8005;&#x4ee5;&#x4fbf;&#x5199;&#x8005;&#x80fd;&#x591f;&#x786e;&#x5b9a;&#x6570;&#x636e;&#x53ef;&#x4ee5;&#x88ab;&#x5b89;&#x5168;&#x5730;&#x91ca;&#x653e;&#x6216;&#x4fee;&#x6539;&#x7684;&#x65f6;&#x673a;&#x3002;&#x6709;&#x4e00;&#x4e2a;&#x4e13;&#x95e8;&#x7684;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x6765;&#x63a2;&#x6d4b;&#x8bfb;&#x8005;&#x7684;&#x4fe1;&#x53f7;&#xff0c;&#x4e00;&#x65e6;&#x6240;&#x6709;&#x7684;&#x8bfb;&#x8005;&#x90fd;&#x5df2;&#x7ecf;&#x53d1;&#x9001;&#x4fe1;&#x53f7;&#x544a;&#x77e5;&#x5b83;&#x4eec;&#x90fd;&#x4e0d;&#x5728;&#x4f7f;&#x7528;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x5c31;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5b8c;&#x6210;&#x6700;&#x540e;&#x7684;&#x6570;&#x636e;&#x91ca;&#x653e;&#x6216;&#x4fee;&#x6539;&#x64cd;&#x4f5c;&#x3002; RCU&#x4e0e;rwlock&#x7684;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x662f;&#xff1a;&#x5b83;&#x65e2;&#x5141;&#x8bb8;&#x591a;&#x4e2a;&#x8bfb;&#x8005;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;&#xff0c;&#x53c8;&#x5141;&#x8bb8;&#x591a;&#x4e2a;&#x8bfb;&#x8005;&#x548c;&#x591a;&#x4e2a;&#x5199;&#x8005;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;&#xff08;&#x6ce8;&#x610f;&#xff1a;&#x662f;&#x5426;&#x53ef;&#x4ee5;&#x6709;&#x591a;&#x4e2a;&#x5199;&#x8005;&#x5e76;&#x884c;&#x8bbf;&#x95ee;&#x53d6;&#x51b3;&#x4e8e;&#x5199;&#x8005;&#x4e4b;&#x95f4;&#x4f7f;&#x7528;&#x7684;&#x540c;&#x6b65;&#x673a;&#x5236;&#xff09;&#xff0c;&#x8bfb;&#x8005;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x540c;&#x6b65;&#x5f00;&#x9500;&#xff0c;&#x800c;&#x5199;&#x8005;&#x7684;&#x540c;&#x6b65;&#x5f00;&#x9500;&#x5219;&#x53d6;&#x51b3;&#x4e8e;&#x4f7f;&#x7528;&#x7684;&#x5199;&#x8005;&#x95f4;&#x540c;&#x6b65;&#x673a;&#x5236;&#x3002;&#x4f46;RCU&#x4e0d;&#x80fd;&#x66ff;&#x4ee3;rwlock&#xff0c;&#x56e0;&#x4e3a;&#x5982;&#x679c;&#x5199;&#x6bd4;&#x8f83;&#x591a;&#x65f6;&#xff0c;&#x5bf9;&#x8bfb;&#x8005;&#x7684;&#x6027;&#x80fd;&#x63d0;&#x9ad8;&#x4e0d;&#x80fd;&#x5f25;&#x8865;&#x5199;&#x8005;&#x5bfc;&#x81f4;&#x7684;&#x635f;&#x5931;&#x3002;"/>
<node CREATED="1412635741879" ID="ID_96528901" MODIFIED="1412635743252" TEXT="&#x8bfb;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x6570;&#x636e;&#x671f;&#x95f4;&#x4e0d;&#x80fd;&#x88ab;&#x963b;&#x585e;&#xff0c;&#x8fd9;&#x662f;RCU&#x673a;&#x5236;&#x5f97;&#x4ee5;&#x5b9e;&#x73b0;&#x7684;&#x4e00;&#x4e2a;&#x57fa;&#x672c;&#x524d;&#x63d0;&#xff0c;&#x4e5f;&#x5c31;&#x8bf4;&#x5f53;&#x8bfb;&#x8005;&#x5728;&#x5f15;&#x7528;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x6570;&#x636e;&#x671f;&#x95f4;&#xff0c;&#x8bfb;&#x8005;&#x6240;&#x5728;&#x7684;CPU&#x4e0d;&#x80fd;&#x53d1;&#x751f;&#x4e0a;&#x4e0b;&#x6587;&#x5207;&#x6362;&#xff0c;spinlock&#x548c;rwlock&#x90fd;&#x9700;&#x8981;&#x8fd9;&#x6837;&#x7684;&#x524d;&#x63d0;&#x3002;&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x6570;&#x636e;&#x65f6;&#x4e0d;&#x9700;&#x8981;&#x548c;&#x8bfb;&#x8005;&#x7ade;&#x4e89;&#x4efb;&#x4f55;&#x9501;&#xff0c;&#x53ea;&#x6709;&#x5728;&#x6709;&#x591a;&#x4e8e;&#x4e00;&#x4e2a;&#x5199;&#x8005;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x9700;&#x8981;&#x83b7;&#x5f97;&#x67d0;&#x79cd;&#x9501;&#x4ee5;&#x4e0e;&#x5176;&#x4ed6;&#x5199;&#x8005;&#x540c;&#x6b65;&#x3002;&#x5199;&#x8005;&#x4fee;&#x6539;&#x6570;&#x636e;&#x524d;&#x9996;&#x5148;&#x62f7;&#x8d1d;&#x4e00;&#x4e2a;&#x88ab;&#x4fee;&#x6539;&#x5143;&#x7d20;&#x7684;&#x526f;&#x672c;&#xff0c;&#x7136;&#x540e;&#x5728;&#x526f;&#x672c;&#x4e0a;&#x8fdb;&#x884c;&#x4fee;&#x6539;&#xff0c;&#x4fee;&#x6539;&#x5b8c;&#x6bd5;&#x540e;&#x5b83;&#x5411;&#x5783;&#x573e;&#x56de;&#x6536;&#x5668;&#x6ce8;&#x518c;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4ee5;&#x4fbf;&#x5728;&#x9002;&#x5f53;&#x7684;&#x65f6;&#x673a;&#x6267;&#x884c;&#x771f;&#x6b63;&#x7684;&#x4fee;&#x6539;&#x64cd;&#x4f5c;&#x3002;&#x7b49;&#x5f85;&#x9002;&#x5f53;&#x65f6;&#x673a;&#x7684;&#x8fd9;&#x4e00;&#x65f6;&#x671f;&#x79f0;&#x4e3a;grace period&#xff0c;&#x800c;CPU&#x53d1;&#x751f;&#x4e86;&#x4e0a;&#x4e0b;&#x6587;&#x5207;&#x6362;&#x79f0;&#x4e3a;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state&#xff0c;grace period&#x5c31;&#x662f;&#x6240;&#x6709;CPU&#x90fd;&#x7ecf;&#x5386;&#x4e00;&#x6b21;quiescent state&#x6240;&#x9700;&#x8981;&#x7684;&#x7b49;&#x5f85;&#x7684;&#x65f6;&#x95f4;&#x3002;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x5c31;&#x662f;&#x5728;grace period&#x4e4b;&#x540e;&#x8c03;&#x7528;&#x5199;&#x8005;&#x6ce8;&#x518c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6765;&#x5b8c;&#x6210;&#x771f;&#x6b63;&#x7684;&#x6570;&#x636e;&#x4fee;&#x6539;&#x6216;&#x6570;&#x636e;&#x91ca;&#x653e;&#x64cd;&#x4f5c;&#x7684;&#x3002;"/>
<node CREATED="1412635902647" ID="ID_34919004" MODIFIED="1412635904444" TEXT="&#x4ee5;&#x4e0b;&#x4ee5;&#x94fe;&#x8868;&#x5143;&#x7d20;&#x5220;&#x9664;&#x4e3a;&#x4f8b;&#x8be6;&#x7ec6;&#x8bf4;&#x660e;&#x8fd9;&#x4e00;&#x8fc7;&#x7a0b;">
<node CREATED="1412636074159" ID="ID_1646642287" MODIFIED="1412636085375">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/rcu_list_explain.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1412635929695" ID="ID_1238023284" MODIFIED="1412635931788" TEXT="&#x5199;&#x8005;&#x8981;&#x4ece;&#x94fe;&#x8868;&#x4e2d;&#x5220;&#x9664;&#x5143;&#x7d20; B&#xff0c;&#x5b83;&#x9996;&#x5148;&#x904d;&#x5386;&#x8be5;&#x94fe;&#x8868;&#x5f97;&#x5230;&#x6307;&#x5411;&#x5143;&#x7d20; B &#x7684;&#x6307;&#x9488;&#xff0c;&#x7136;&#x540e;&#x4fee;&#x6539;&#x5143;&#x7d20; B &#x7684;&#x524d;&#x4e00;&#x4e2a;&#x5143;&#x7d20;&#x7684; next &#x6307;&#x9488;&#x6307;&#x5411;&#x5143;&#x7d20; B &#x7684; next &#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5143;&#x7d20;C&#xff0c;&#x4fee;&#x6539;&#x5143;&#x7d20; B &#x7684; next &#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5143;&#x7d20; C &#x7684; prep &#x6307;&#x9488;&#x6307;&#x5411;&#x5143;&#x7d20; B &#x7684; prep&#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5143;&#x7d20; A,&#x5728;&#x8fd9;&#x671f;&#x95f4;&#x53ef;&#x80fd;&#x6709;&#x8bfb;&#x8005;&#x8bbf;&#x95ee;&#x8be5;&#x94fe;&#x8868;&#xff0c;&#x4fee;&#x6539;&#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x64cd;&#x4f5c;&#x662f;&#x539f;&#x5b50;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x9700;&#x8981;&#x540c;&#x6b65;&#xff0c;&#x800c;&#x5143;&#x7d20; B &#x7684;&#x6307;&#x9488;&#x5e76;&#x6ca1;&#x6709;&#x53bb;&#x4fee;&#x6539;&#xff0c;&#x56e0;&#x4e3a;&#x8bfb;&#x8005;&#x53ef;&#x80fd;&#x6b63;&#x5728;&#x4f7f;&#x7528; B &#x5143;&#x7d20;&#x6765;&#x5f97;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x6216;&#x524d;&#x4e00;&#x4e2a;&#x5143;&#x7d20;&#x3002;&#x5199;&#x8005;&#x5b8c;&#x6210;&#x8fd9;&#x4e9b;&#x64cd;&#x4f5c;&#x540e;&#x6ce8;&#x518c;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4ee5;&#x4fbf;&#x5728; grace period &#x4e4b;&#x540e;&#x5220;&#x9664;&#x5143;&#x7d20; B&#xff0c;&#x7136;&#x540e;&#x5c31;&#x8ba4;&#x4e3a;&#x5df2;&#x7ecf;&#x5b8c;&#x6210;&#x5220;&#x9664;&#x64cd;&#x4f5c;&#x3002;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x5728;&#x68c0;&#x6d4b;&#x5230;&#x6240;&#x6709;&#x7684;CPU&#x4e0d;&#x5728;&#x5f15;&#x7528;&#x8be5;&#x94fe;&#x8868;&#x540e;&#xff0c;&#x5373;&#x6240;&#x6709;&#x7684; CPU &#x5df2;&#x7ecf;&#x7ecf;&#x5386;&#x4e86; quiescent state,grace period &#x5df2;&#x7ecf;&#x8fc7;&#x53bb;&#x540e;&#xff0c;&#x5c31;&#x8c03;&#x7528;&#x521a;&#x624d;&#x5199;&#x8005;&#x6ce8;&#x518c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5220;&#x9664;&#x4e86;&#x5143;&#x7d20; B&#x3002;"/>
</node>
</node>
<node CREATED="1412635697983" FOLDED="true" ID="ID_429155062" MODIFIED="1422496707278" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1412640022953" ID="ID_238042430" MODIFIED="1412640053328" TEXT="&#x5bf9;&#x4e8e;&#x8bfb;&#x8005;&#xff0c;RCU &#x4ec5;&#x9700;&#x8981;&#x62a2;&#x5360;&#x5931;&#x6548;&#xff0c;&#x56e0;&#x6b64;&#x83b7;&#x5f97;&#x8bfb;&#x9501;&#x548c;&#x91ca;&#x653e;&#x8bfb;&#x9501;&#x5206;&#x522b;&#x5b9a;&#x4e49;&#x4e3a;">
<node CREATED="1412640074992" ID="ID_1487650903" MODIFIED="1412640086395" TEXT="#define rcu_read_lock()         preempt_disable() &#xa;#define rcu_read_unlock()       preempt_enable()"/>
</node>
<node CREATED="1412640127840" ID="ID_520120253" MODIFIED="1412640248675" TEXT="&#x5b83;&#x4eec;&#x6709;&#x4e00;&#x4e2a;&#x53d8;&#x79cd;, &#x8fd9;&#x4e2a;&#x53d8;&#x79cd;&#x53ea;&#x5728;&#x5199;&#x8005;&#x662f;&#x901a;&#x8fc7; call_rcu_bh &#x8fdb;&#x884c;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x4f7f;&#x7528;&#xff0c;&#x56e0;&#x4e3a; call_rcu_bh&#x5c06;&#x628a; softirq &#x7684;&#x6267;&#x884c;&#x5b8c;&#x6bd5;&#x4e5f;&#x8ba4;&#x4e3a;&#x662f;&#x4e00;&#x4e2a; quiescent state&#xff0c;&#x56e0;&#x6b64;&#x5982;&#x679c;&#x5199;&#x8005;&#x662f;&#x901a;&#x8fc7; call_rcu_bh &#x8fdb;&#x884c;&#x7684;&#xff0c;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x7684;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x5fc5;&#x987b;&#x4f7f;&#x7528;&#x8fd9;&#x4e00;&#x53d8;&#x79cd;&#x3002;">
<node CREATED="1412640097578" ID="ID_546166815" MODIFIED="1412640106531" TEXT="#define rcu_read_lock_bh()      local_bh_disable() &#xa;#define rcu_read_unlock_bh()    local_bh_enable()"/>
</node>
<node CREATED="1412640660624" ID="ID_785643178" MODIFIED="1412640662685" TEXT="&#x6bcf;&#x4e00;&#x4e2a; CPU &#x7ef4;&#x62a4;&#x4e24;&#x4e2a;&#x6570;&#x636e;&#x7ed3;&#x6784;rcu_data,rcu_bh_data&#xff0c;&#x5b83;&#x4eec;&#x7528;&#x4e8e;&#x4fdd;&#x5b58;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x51fd;&#x6570;call_rcu&#x548c;&#x51fd;&#x6570;call_rcu_bh&#x7528;&#x6237;&#x6ce8;&#x518c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x524d;&#x8005;&#x628a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6ce8;&#x518c;&#x5230;rcu_data&#xff0c;&#x800c;&#x540e;&#x8005;&#x5219;&#x628a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6ce8;&#x518c;&#x5230;rcu_bh_data&#xff0c;&#x5728;&#x6bcf;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x4e0a;&#xff0c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x88ab;&#x7ec4;&#x6210;&#x4e00;&#x4e2a;&#x94fe;&#x8868;&#xff0c;&#x5148;&#x6ce8;&#x518c;&#x7684;&#x6392;&#x5728;&#x524d;&#x5934;&#xff0c;&#x540e;&#x6ce8;&#x518c;&#x7684;&#x6392;&#x5728;&#x672b;&#x5c3e;&#x3002;"/>
<node CREATED="1412640684522" ID="ID_467381192" MODIFIED="1412640717659" TEXT="&#x5f53;&#x5728;CPU&#x4e0a;&#x53d1;&#x751f;&#x8fdb;&#x7a0b;&#x5207;&#x6362;&#x65f6;&#xff0c;&#x51fd;&#x6570;rcu_qsctr_inc&#x5c06;&#x88ab;&#x8c03;&#x7528;&#x4ee5;&#x6807;&#x8bb0;&#x8be5;CPU&#x5df2;&#x7ecf;&#x7ecf;&#x5386;&#x4e86;&#x4e00;&#x4e2a;quiescent state&#x3002;&#x8be5;&#x51fd;&#x6570;&#x4e5f;&#x4f1a;&#x88ab;&#x65f6;&#x949f;&#x4e2d;&#x65ad;&#x89e6;&#x53d1;&#x8c03;&#x7528;. &#x65f6;&#x949f;&#x4e2d;&#x65ad;&#x89e6;&#x53d1;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x8fd0;&#x884c;&#xff0c;&#x5b83;&#x4f1a;&#x68c0;&#x67e5;&#xff1a;">
<node CREATED="1412640733176" ID="ID_1566520448" MODIFIED="1412640734321" TEXT="&#x5728;&#x8be5;CPU&#x4e0a;&#x6709;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5e76;&#x4e14;&#x5df2;&#x7ecf;&#x7ecf;&#x8fc7;&#x4e00;&#x4e2a;grace period"/>
<node CREATED="1412640749603" ID="ID_242219214" MODIFIED="1412640750589" TEXT="&#x6ca1;&#x6709;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4f46;&#x6709;&#x6ce8;&#x518c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;"/>
<node CREATED="1412640762937" ID="ID_1710569853" MODIFIED="1412640764569" TEXT="&#x8be5;CPU&#x5df2;&#x7ecf;&#x5b8c;&#x6210;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x5904;&#x7406;"/>
<node CREATED="1412640774818" ID="ID_148547372" MODIFIED="1412640776006" TEXT="&#x8be5;CPU&#x6b63;&#x5728;&#x7b49;&#x5f85;&#x4e00;&#x4e2a;quiescent state&#x7684;&#x5230;&#x6765;"/>
</node>
<node CREATED="1412640795578" ID="ID_1136812144" MODIFIED="1412640796513" TEXT="&#x5982;&#x679c;&#x4ee5;&#x4e0a;&#x56db;&#x4e2a;&#x6761;&#x4ef6;&#x53ea;&#x8981;&#x6709;&#x4e00;&#x4e2a;&#x6ee1;&#x8db3;&#xff0c;&#x5b83;&#x5c31;&#x8c03;&#x7528;&#x51fd;&#x6570;rcu_check_callbacks">
<node CREATED="1412640823610" ID="ID_184625496" MODIFIED="1412640824681" TEXT="&#x51fd;&#x6570;rcu_check_callbacks&#x9996;&#x5148;&#x68c0;&#x67e5;&#x8be5;CPU&#x662f;&#x5426;&#x7ecf;&#x5386;&#x4e86;&#x4e00;&#x4e2a;quiescent state&#xff0c;&#x5982;&#x679c;&#xff1a;">
<node CREATED="1412640839081" ID="ID_223242138" MODIFIED="1412640865686" TEXT="&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x8fd0;&#x884c;&#x5728;&#x7528;&#x6237;&#x6001;,    &#x6216;&#x8005;"/>
<node CREATED="1412640850665" ID="ID_1277407818" MODIFIED="1412640851799" TEXT="&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x4e3a;idle&#x4e14;&#x5f53;&#x524d;&#x4e0d;&#x5904;&#x5728;&#x8fd0;&#x884c;softirq&#x72b6;&#x6001;&#xff0c;&#x4e5f;&#x4e0d;&#x5904;&#x5728;&#x8fd0;&#x884c;IRQ&#x5904;&#x7406;&#x51fd;&#x6570;&#x7684;&#x72b6;&#x6001;"/>
</node>
<node CREATED="1412640912226" ID="ID_1141410292" MODIFIED="1412640914561" TEXT="&#x90a3;&#x4e48;&#xff0c;&#x8be5;CPU&#x5df2;&#x7ecf;&#x7ecf;&#x5386;&#x4e86;&#x4e00;&#x4e2a;quiescent state&#xff0c;&#x56e0;&#x6b64;&#x901a;&#x8fc7;&#x8c03;&#x7528;&#x51fd;&#x6570;rcu_qsctr_inc&#x6807;&#x8bb0;&#x8be5;CPU&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;rcu_data&#x548c;rcu_bh_data&#x7684;&#x6807;&#x8bb0;&#x5b57;&#x6bb5;passed_quiesc&#xff0c;&#x4ee5;&#x8bb0;&#x5f55;&#x8be5;CPU&#x5df2;&#x7ecf;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state"/>
<node CREATED="1412640941065" ID="ID_1651109317" MODIFIED="1412640943349" TEXT="&#x5426;&#x5219;&#xff0c;&#x5982;&#x679c;&#x5f53;&#x524d;&#x4e0d;&#x5904;&#x5728;&#x8fd0;&#x884c;softirq&#x72b6;&#x6001;&#xff0c;&#x90a3;&#x4e48;&#xff0c;&#x53ea;&#x6807;&#x8bb0;&#x8be5;CPU&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;rcu_bh_data&#x7684;&#x6807;&#x8bb0;&#x5b57;&#x6bb5;passed_quiesc&#xff0c;&#x4ee5;&#x8bb0;&#x5f55;&#x8be5;CPU&#x5df2;&#x7ecf;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state&#x3002;&#x6ce8;&#x610f;&#xff0c;&#x8be5;&#x6807;&#x8bb0;&#x53ea;&#x5bf9;rcu_bh_data&#x6709;&#x6548;"/>
<node CREATED="1412640995195" ID="ID_616969752" MODIFIED="1412640998664" TEXT="&#x7136;&#x540e;&#xff0c;&#x51fd;&#x6570;rcu_check_callbacks&#x5c06;&#x8c03;&#x7528;tasklet_schedule&#xff0c;&#x5b83;&#x5c06;&#x8c03;&#x5ea6;&#x4e3a;&#x8be5;CPU&#x8bbe;&#x7f6e;&#x7684;tasklet rcu_tasklet&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;CPU&#x90fd;&#x6709;&#x4e00;&#x4e2a;&#x5bf9;&#x5e94;&#x7684;rcu_tasklet&#x3002;  &#x5728;&#x65f6;&#x949f;&#x4e2d;&#x65ad;&#x8fd4;&#x56de;&#x540e;&#xff0c;rcu_tasklet&#x5c06;&#x5728;softirq&#x4e0a;&#x4e0b;&#x6587;&#x88ab;&#x8fd0;&#x884c;&#x3002;  rcu_tasklet&#x5c06;&#x8fd0;&#x884c;&#x51fd;&#x6570;rcu_process_callbacks&#xff0c;&#x51fd;&#x6570;rcu_process_callbacks&#x53ef;&#x80fd;&#x505a;&#x4ee5;&#x4e0b;&#x4e8b;&#x60c5;&#xff1a;">
<node CREATED="1412641036882" ID="ID_451684932" MODIFIED="1412641039601" TEXT="&#x5f00;&#x59cb;&#x4e00;&#x4e2a;&#x65b0;&#x7684;grace period&#xff1b;&#x8fd9;&#x901a;&#x8fc7;&#x8c03;&#x7528;&#x51fd;&#x6570;rcu_start_batch&#x5b9e;&#x73b0;"/>
<node CREATED="1412641055464" ID="ID_367185382" MODIFIED="1412641057299" TEXT="&#x8fd0;&#x884c;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff1b;&#x8fd9;&#x901a;&#x8fc7;&#x8c03;&#x7528;&#x51fd;&#x6570;rcu_do_batch&#x5b9e;&#x73b0;"/>
<node CREATED="1412641069882" ID="ID_1637856661" MODIFIED="1412641071595" TEXT="&#x68c0;&#x67e5;&#x8be5;CPU&#x662f;&#x5426;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state&#xff1b;&#x8fd9;&#x901a;&#x8fc7;&#x51fd;&#x6570;rcu_check_quiescent_state&#x5b9e;&#x73b0;"/>
</node>
<node CREATED="1412641137105" ID="ID_1494181937" MODIFIED="1412641138230" TEXT="&#x5982;&#x679c;&#x8fd8;&#x6ca1;&#x6709;&#x5f00;&#x59cb;grace period&#xff0c;&#x5c31;&#x8c03;&#x7528;rcu_start_batch&#x5f00;&#x59cb;&#x65b0;&#x7684;grace period&#x3002;&#x8c03;&#x7528;&#x51fd;&#x6570;rcu_check_quiescent_state&#x68c0;&#x67e5;&#x8be5;CPU&#x662f;&#x5426;&#x7ecf;&#x5386;&#x4e86;&#x4e00;&#x4e2a;quiescent state,&#x5982;&#x679c;&#x662f;&#x5e76;&#x4e14;&#x662f;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x7ecf;&#x5386;quiescent state&#x7684;CPU&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x7ed3;&#x675f;grace period&#xff0c;&#x5e76;&#x5f00;&#x59cb;&#x65b0;&#x7684;grace period&#x3002;&#x5982;&#x679c;&#x6709;&#x5b8c;&#x6210;&#x7684;grace period&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x8c03;&#x7528;rcu_do_batch&#x8fd0;&#x884c;&#x6240;&#x6709;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x51fd;&#x6570;rcu_process_callbacks&#x5c06;&#x5bf9;&#x8be5;CPU&#x7684;&#x4e24;&#x4e2a;&#x6570;&#x636e;&#x7ed3;&#x6784;rcu_data&#x548c;rcu_bh_data&#x6267;&#x884c;&#x4e0a;&#x8ff0;&#x64cd;&#x4f5c;&#x3002;"/>
</node>
<node CREATED="1412641545256" FOLDED="true" ID="ID_1902615533" MODIFIED="1422496704021" TEXT="API">
<node CREATED="1412641548649" ID="ID_424843700" MODIFIED="1412641549823" TEXT="rcu_read_lock()">
<node CREATED="1412641560521" ID="ID_744796844" MODIFIED="1412641561710" TEXT="&#x8bfb;&#x8005;&#x5728;&#x8bfb;&#x53d6;&#x7531;RCU&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x6570;&#x636e;&#x65f6;&#x4f7f;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6807;&#x8bb0;&#x5b83;&#x8fdb;&#x5165;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;"/>
</node>
<node CREATED="1412641576312" ID="ID_1772664828" MODIFIED="1412641577133" TEXT="rcu_read_unlock()">
<node CREATED="1412641609137" ID="ID_1378020146" MODIFIED="1412641610357" TEXT="&#x8be5;&#x51fd;&#x6570;&#x4e0e;rcu_read_lock&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#xff0c;&#x7528;&#x4ee5;&#x6807;&#x8bb0;&#x8bfb;&#x8005;&#x9000;&#x51fa;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x3002;&#x5939;&#x5728;&#x8fd9;&#x4e24;&#x4e2a;&#x51fd;&#x6570;&#x4e4b;&#x95f4;&#x7684;&#x4ee3;&#x7801;&#x533a;&#x79f0;&#x4e3a;&quot;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&quot;(read-side critical section)&#x3002;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x53ef;&#x4ee5;&#x5d4c;&#x5957;&#xff0c;&#x5982;&#x56fe;3&#xff0c;&#x4e34;&#x754c;&#x533a;2&#x88ab;&#x5d4c;&#x5957;&#x5728;&#x4e34;&#x754c;&#x533a;1&#x5185;&#x3002;"/>
<node CREATED="1412641659041" ID="ID_127866648" MODIFIED="1412641668689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="pic/rcu_read_lock_embed.gif" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412641714194" ID="ID_965888916" MODIFIED="1412641715479" TEXT="synchronize_rcu()">
<node CREATED="1412641795443" ID="ID_1860292498" MODIFIED="1412641796517" TEXT="&#x8be5;&#x51fd;&#x6570;&#x7531;RCU&#x5199;&#x7aef;&#x8c03;&#x7528;&#xff0c;&#x5b83;&#x5c06;&#x963b;&#x585e;&#x5199;&#x8005;&#xff0c;&#x76f4;&#x5230;&#x7ecf;&#x8fc7;grace period&#x540e;&#xff0c;&#x5373;&#x6240;&#x6709;&#x7684;&#x8bfb;&#x8005;&#x5df2;&#x7ecf;&#x5b8c;&#x6210;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#xff0c;&#x5199;&#x8005;&#x624d;&#x53ef;&#x4ee5;&#x7ee7;&#x7eed;&#x4e0b;&#x4e00;&#x6b65;&#x64cd;&#x4f5c;&#x3002;&#x5982;&#x679c;&#x6709;&#x591a;&#x4e2a;RCU&#x5199;&#x7aef;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#xff0c;&#x4ed6;&#x4eec;&#x5c06;&#x5728;&#x4e00;&#x4e2a;grace period&#x4e4b;&#x540e;&#x5168;&#x90e8;&#x88ab;&#x5524;&#x9192;"/>
</node>
<node CREATED="1412641840683" ID="ID_1179950471" MODIFIED="1412641841663" TEXT="synchronize_sched()">
<node CREATED="1412641868171" ID="ID_852354820" MODIFIED="1412641869154" TEXT="&#x8be5;&#x51fd;&#x6570;&#x7528;&#x4e8e;&#x7b49;&#x5f85;&#x6240;&#x6709;CPU&#x90fd;&#x5904;&#x5728;&#x53ef;&#x62a2;&#x5360;&#x72b6;&#x6001;&#xff0c;&#x5b83;&#x80fd;&#x4fdd;&#x8bc1;&#x6b63;&#x5728;&#x8fd0;&#x884c;&#x7684;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x51fd;&#x6570;&#x5904;&#x7406;&#x5b8c;&#x6bd5;&#xff0c;&#x4f46;&#x4e0d;&#x80fd;&#x4fdd;&#x8bc1;&#x6b63;&#x5728;&#x8fd0;&#x884c;&#x7684;softirq&#x5904;&#x7406;&#x5b8c;&#x6bd5;&#x3002;&#x6ce8;&#x610f;&#xff0c;synchronize_rcu&#x53ea;&#x4fdd;&#x8bc1;&#x6240;&#x6709;CPU&#x90fd;&#x5904;&#x7406;&#x5b8c;&#x6b63;&#x5728;&#x8fd0;&#x884c;&#x7684;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;"/>
</node>
<node CREATED="1412641949027" ID="ID_1769321389" MODIFIED="1412641964132" TEXT="void fastcall call_rcu(struct rcu_head *head, void (*func)(struct rcu_head *rcu))">
<node CREATED="1412641983345" ID="ID_1922363902" MODIFIED="1412643232043">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct rcu_head {&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      struct rcu_head *next;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      void (*func)(struct rcu_head *head);
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1412643320675" ID="ID_1306325721" MODIFIED="1412643323160" TEXT="&#x51fd;&#x6570; call_rcu &#x4e5f;&#x7531; RCU &#x5199;&#x7aef;&#x8c03;&#x7528;&#xff0c;&#x5b83;&#x4e0d;&#x4f1a;&#x4f7f;&#x5199;&#x8005;&#x963b;&#x585e;&#xff0c;&#x56e0;&#x800c;&#x53ef;&#x4ee5;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x6216; softirq &#x4f7f;&#x7528;&#xff0c;&#x800c; synchronize_rcu&#x3001;synchronize_kernel &#x548c;synchronize_shced &#x53ea;&#x80fd;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;&#x3002;&#x8be5;&#x51fd;&#x6570;&#x5c06;&#x628a;&#x51fd;&#x6570; func &#x6302;&#x63a5;&#x5230; RCU&#x56de;&#x8c03;&#x51fd;&#x6570;&#x94fe;&#x4e0a;&#xff0c;&#x7136;&#x540e;&#x7acb;&#x5373;&#x8fd4;&#x56de;&#x3002;&#x4e00;&#x65e6;&#x6240;&#x6709;&#x7684; CPU &#x90fd;&#x5df2;&#x7ecf;&#x5b8c;&#x6210;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x64cd;&#x4f5c;&#xff0c;&#x8be5;&#x51fd;&#x6570;&#x5c06;&#x88ab;&#x8c03;&#x7528;&#x6765;&#x91ca;&#x653e;&#x5220;&#x9664;&#x7684;&#x5c06;&#x7edd;&#x4e0d;&#x5728;&#x88ab;&#x5e94;&#x7528;&#x7684;&#x6570;&#x636e;&#x3002;&#x53c2;&#x6570; head &#x7528;&#x4e8e;&#x8bb0;&#x5f55;&#x56de;&#x8c03;&#x51fd;&#x6570; func&#xff0c;&#x4e00;&#x822c;&#x8be5;&#x7ed3;&#x6784;&#x4f1a;&#x4f5c;&#x4e3a;&#x88ab; RCU &#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x7684;&#x4e00;&#x4e2a;&#x5b57;&#x6bb5;&#xff0c;&#x4ee5;&#x4fbf;&#x7701;&#x53bb;&#x5355;&#x72ec;&#x4e3a;&#x8be5;&#x7ed3;&#x6784;&#x5206;&#x914d;&#x5185;&#x5b58;&#x7684;&#x64cd;&#x4f5c;&#x3002;&#x9700;&#x8981;&#x6307;&#x51fa;&#x7684;&#x662f;&#xff0c;&#x51fd;&#x6570; synchronize_rcu &#x7684;&#x5b9e;&#x73b0;&#x5b9e;&#x9645;&#x4e0a;&#x4f7f;&#x7528;&#x51fd;&#x6570;call_rcu"/>
</node>
<node CREATED="1412643342011" ID="ID_21329649" MODIFIED="1412643351100" TEXT="void fastcall call_rcu_bh(struct rcu_head *head, void (*func)(struct rcu_head *rcu))  ">
<node CREATED="1412643371194" ID="ID_1789640360" MODIFIED="1412643374126" TEXT="&#x51fd;&#x6570;call_ruc_bh&#x529f;&#x80fd;&#x51e0;&#x4e4e;&#x4e0e;call_rcu&#x5b8c;&#x5168;&#x76f8;&#x540c;&#xff0c;&#x552f;&#x4e00;&#x5dee;&#x522b;&#x5c31;&#x662f;&#x5b83;&#x628a;softirq&#x7684;&#x5b8c;&#x6210;&#x4e5f;&#x5f53;&#x4f5c;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state&#xff0c;&#x56e0;&#x6b64;&#x5982;&#x679c;&#x5199;&#x7aef;&#x4f7f;&#x7528;&#x4e86;&#x8be5;&#x51fd;&#x6570;&#xff0c;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x7684;&#x8bfb;&#x7aef;&#x5fc5;&#x987b;&#x4f7f;&#x7528;rcu_read_lock_bh"/>
</node>
<node CREATED="1412643419186" ID="ID_1449457158" MODIFIED="1412643421561" TEXT="rcu_dereference(p)">
<node CREATED="1412643392114" ID="ID_1905144719" MODIFIED="1412643479476" TEXT="#define rcu_dereference(p)     ({ \&#xa;                        typeof(p) _________p1 = p; \&#xa;                        smp_read_barrier_depends(); \&#xa;                        (_________p1); \&#xa;                        })"/>
<node CREATED="1412643505947" ID="ID_510387287" MODIFIED="1412643507888" TEXT="&#x8be5;&#x5b8f;&#x7528;&#x4e8e;&#x5728;RCU&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x83b7;&#x5f97;&#x4e00;&#x4e2a;RCU&#x4fdd;&#x62a4;&#x7684;&#x6307;&#x9488;&#xff0c;&#x8be5;&#x6307;&#x9488;&#x53ef;&#x4ee5;&#x5728;&#x4ee5;&#x540e;&#x5b89;&#x5168;&#x5730;&#x5f15;&#x7528;&#xff0c;&#x5185;&#x5b58;&#x6805;&#x53ea;&#x5728;alpha&#x67b6;&#x6784;&#x4e0a;&#x624d;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1422496584921" ID="ID_1075228785" MODIFIED="1422496686686" TEXT="rcu_assign_pointer(p, v)">
<node CREATED="1422496646211" ID="ID_546114671" MODIFIED="1422496677441" TEXT="&#x7ed9;&#x4e00;&#x4e2a;RCU&#x4fdd;&#x62a4;&#x7684;&#x6307;&#x9488;&#x8d4b;&#x503c;"/>
</node>
<node CREATED="1422496611507" ID="ID_1066286470" MODIFIED="1422496612483" TEXT="RCU_INIT_POINTER(p, v)">
<node CREATED="1422496646211" ID="ID_137641768" MODIFIED="1422496677441" TEXT="&#x7ed9;&#x4e00;&#x4e2a;RCU&#x4fdd;&#x62a4;&#x7684;&#x6307;&#x9488;&#x8d4b;&#x503c;"/>
</node>
<node CREATED="1412643592273" ID="ID_1845482332" MODIFIED="1412643593616" TEXT="static inline void list_add_rcu(struct list_head *new, struct list_head *head)">
<node CREATED="1412643609249" ID="ID_1287228890" MODIFIED="1412643610745" TEXT="&#x8be5;&#x51fd;&#x6570;&#x628a;&#x94fe;&#x8868;&#x9879;new&#x63d2;&#x5165;&#x5230;RCU&#x4fdd;&#x62a4;&#x7684;&#x94fe;&#x8868;head&#x7684;&#x5f00;&#x5934;&#x3002;&#x4f7f;&#x7528;&#x5185;&#x5b58;&#x6805;&#x4fdd;&#x8bc1;&#x4e86;&#x5728;&#x5f15;&#x7528;&#x8fd9;&#x4e2a;&#x65b0;&#x63d2;&#x5165;&#x7684;&#x94fe;&#x8868;&#x9879;&#x4e4b;&#x524d;&#xff0c;&#x65b0;&#x94fe;&#x8868;&#x9879;&#x7684;&#x94fe;&#x63a5;&#x6307;&#x9488;&#x7684;&#x4fee;&#x6539;&#x5bf9;&#x6240;&#x6709;&#x8bfb;&#x8005;&#x662f;&#x53ef;&#x89c1;&#x7684;"/>
</node>
<node CREATED="1412643624955" ID="ID_705547092" MODIFIED="1412643633924" TEXT="static inline void list_add_tail_rcu(struct list_head *new, struct list_head *head)">
<node CREATED="1412643648779" ID="ID_971583403" MODIFIED="1412643650788" TEXT="&#x8be5;&#x51fd;&#x6570;&#x7c7b;&#x4f3c;&#x4e8e;list_add_rcu&#xff0c;&#x5b83;&#x5c06;&#x628a;&#x65b0;&#x7684;&#x94fe;&#x8868;&#x9879;new&#x6dfb;&#x52a0;&#x5230;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x94fe;&#x8868;&#x7684;&#x672b;&#x5c3e;"/>
</node>
<node CREATED="1412643661769" ID="ID_1057776902" MODIFIED="1412643663572" TEXT="static inline void list_del_rcu(struct list_head *entry)">
<node CREATED="1412643676914" ID="ID_1864403982" MODIFIED="1412643679301" TEXT="&#x8be5;&#x51fd;&#x6570;&#x4ece;RCU&#x4fdd;&#x62a4;&#x7684;&#x94fe;&#x8868;&#x4e2d;&#x79fb;&#x8d70;&#x6307;&#x5b9a;&#x7684;&#x94fe;&#x8868;&#x9879;entry&#xff0c;&#x5e76;&#x4e14;&#x628a;entry&#x7684;prev&#x6307;&#x9488;&#x8bbe;&#x7f6e;&#x4e3a;LIST_POISON2&#xff0c;&#x4f46;&#x662f;&#x5e76;&#x6ca1;&#x6709;&#x628a;entry&#x7684;next&#x6307;&#x9488;&#x8bbe;&#x7f6e;&#x4e3a;LIST_POISON1&#xff0c;&#x56e0;&#x4e3a;&#x8be5;&#x6307;&#x9488;&#x53ef;&#x80fd;&#x4ecd;&#x7136;&#x5728;&#x88ab;&#x8bfb;&#x8005;&#x7528;&#x4e8e;&#x4fbf;&#x5229;&#x8be5;&#x94fe;&#x8868;"/>
</node>
<node CREATED="1412643695010" ID="ID_1466882852" MODIFIED="1412643696968" TEXT="static inline void list_replace_rcu(struct list_head *old, struct list_head *new)">
<node CREATED="1412643708594" ID="ID_744617888" MODIFIED="1412643710951" TEXT="&#x8be5;&#x51fd;&#x6570;&#x662f;RCU&#x65b0;&#x6dfb;&#x52a0;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x4e0d;&#x5b58;&#x5728;&#x975e;RCU&#x7248;&#x672c;&#x3002;&#x5b83;&#x4f7f;&#x7528;&#x65b0;&#x7684;&#x94fe;&#x8868;&#x9879;new&#x53d6;&#x4ee3;&#x65e7;&#x7684;&#x94fe;&#x8868;&#x9879;old&#xff0c;&#x5185;&#x5b58;&#x6805;&#x4fdd;&#x8bc1;&#x5728;&#x5f15;&#x7528;&#x65b0;&#x7684;&#x94fe;&#x8868;&#x9879;&#x4e4b;&#x524d;&#xff0c;&#x5b83;&#x7684;&#x94fe;&#x63a5;&#x6307;&#x9488;&#x7684;&#x4fee;&#x6b63;&#x5bf9;&#x6240;&#x6709;&#x8bfb;&#x8005;&#x53ef;&#x89c1;"/>
</node>
<node CREATED="1412643728194" ID="ID_911395645" MODIFIED="1412643730421" TEXT="list_for_each_rcu(pos, head)">
<node CREATED="1412643748715" ID="ID_245627202" MODIFIED="1412643750939" TEXT="&#x8be5;&#x5b8f;&#x7528;&#x4e8e;&#x904d;&#x5386;&#x7531;RCU&#x4fdd;&#x62a4;&#x7684;&#x94fe;&#x8868;head&#xff0c;&#x53ea;&#x8981;&#x5728;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x4f7f;&#x7528;&#x8be5;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x5c31;&#x53ef;&#x4ee5;&#x5b89;&#x5168;&#x5730;&#x548c;&#x5176;&#x5b83;_rcu&#x94fe;&#x8868;&#x64cd;&#x4f5c;&#x51fd;&#x6570;&#xff08;&#x5982;list_add_rcu&#xff09;&#x5e76;&#x53d1;&#x8fd0;&#x884c;"/>
</node>
<node CREATED="1412643767066" ID="ID_1658500827" MODIFIED="1412643769646" TEXT="list_for_each_safe_rcu(pos, n, head)">
<node CREATED="1412643778010" ID="ID_1261382854" MODIFIED="1412643781575" TEXT="&#x8be5;&#x5b8f;&#x7c7b;&#x4f3c;&#x4e8e;list_for_each_rcu&#xff0c;&#x4f46;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x5728;&#x4e8e;&#x5b83;&#x5141;&#x8bb8;&#x5b89;&#x5168;&#x5730;&#x5220;&#x9664;&#x5f53;&#x524d;&#x94fe;&#x8868;&#x9879;pos"/>
</node>
<node CREATED="1412643791378" ID="ID_1947787751" MODIFIED="1412643794775" TEXT="list_for_each_entry_rcu(pos, head, member)">
<node CREATED="1412643805170" ID="ID_991765095" MODIFIED="1412643808118" TEXT="&#x8be5;&#x5b8f;&#x7c7b;&#x4f3c;&#x4e8e;list_for_each_rcu&#xff0c;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x5728;&#x4e8e;&#x5b83;&#x7528;&#x4e8e;&#x904d;&#x5386;&#x6307;&#x5b9a;&#x7c7b;&#x578b;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x94fe;&#x8868;&#xff0c;&#x5f53;&#x524d;&#x94fe;&#x8868;&#x9879;pos&#x4e3a;&#x4e00;&#x5305;&#x542b;struct list_head&#x7ed3;&#x6784;&#x7684;&#x7279;&#x5b9a;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
</node>
<node CREATED="1412643817891" ID="ID_1360141644" MODIFIED="1412643819815" TEXT="list_for_each_continue_rcu(pos, head)">
<node CREATED="1412643829281" ID="ID_31809257" MODIFIED="1412643831244" TEXT="&#x8be5;&#x5b8f;&#x7528;&#x4e8e;&#x5728;&#x9000;&#x51fa;&#x70b9;&#x4e4b;&#x540e;&#x7ee7;&#x7eed;&#x904d;&#x5386;&#x7531;RCU&#x4fdd;&#x62a4;&#x7684;&#x94fe;&#x8868;head"/>
</node>
<node CREATED="1412643843363" ID="ID_1180105308" MODIFIED="1412643845655" TEXT="static inline void hlist_del_rcu(struct hlist_node *n)">
<node CREATED="1412643860114" ID="ID_1440627430" MODIFIED="1412643862229" TEXT="&#x5b83;&#x4ece;&#x7531;RCU&#x4fdd;&#x62a4;&#x7684;&#x54c8;&#x5e0c;&#x94fe;&#x8868;&#x4e2d;&#x79fb;&#x8d70;&#x94fe;&#x8868;&#x9879;n&#xff0c;&#x5e76;&#x8bbe;&#x7f6e;n&#x7684;ppre&#x6307;&#x9488;&#x4e3a;LIST_POISON2&#xff0c;&#x4f46;&#x5e76;&#x6ca1;&#x6709;&#x8bbe;&#x7f6e;next&#x4e3a;LIST_POISON1,&#x56e0;&#x4e3a;&#x8be5;&#x6307;&#x9488;&#x53ef;&#x80fd;&#x88ab;&#x8bfb;&#x8005;&#x4f7f;&#x7528;&#x7528;&#x4e8e;&#x904d;&#x5229;&#x94fe;&#x8868;"/>
</node>
<node CREATED="1412643878475" ID="ID_1192496951" MODIFIED="1412643886028" TEXT="static inline void hlist_add_head_rcu(struct hlist_node *n, struct hlist_head *h)">
<node CREATED="1412643897987" ID="ID_1565891745" MODIFIED="1412643900257" TEXT="&#x8be5;&#x51fd;&#x6570;&#x7528;&#x4e8e;&#x628a;&#x94fe;&#x8868;&#x9879;n&#x63d2;&#x5165;&#x5230;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x54c8;&#x5e0c;&#x94fe;&#x8868;&#x7684;&#x5f00;&#x5934;&#xff0c;&#x4f46;&#x540c;&#x65f6;&#x5141;&#x8bb8;&#x8bfb;&#x8005;&#x5bf9;&#x8be5;&#x54c8;&#x5e0c;&#x94fe;&#x8868;&#x7684;&#x904d;&#x5386;&#x3002;&#x5185;&#x5b58;&#x6805;&#x786e;&#x4fdd;&#x5728;&#x5f15;&#x7528;&#x65b0;&#x94fe;&#x8868;&#x9879;&#x4e4b;&#x524d;&#xff0c;&#x5b83;&#x7684;&#x6307;&#x9488;&#x4fee;&#x6b63;&#x5bf9;&#x6240;&#x6709;&#x8bfb;&#x8005;&#x53ef;&#x89c1;"/>
</node>
<node CREATED="1412643916010" ID="ID_477421342" MODIFIED="1412643917969" TEXT="hlist_for_each_rcu(pos, head)">
<node CREATED="1412643928723" ID="ID_1376132297" MODIFIED="1412643930918" TEXT="&#x8be5;&#x5b8f;&#x7528;&#x4e8e;&#x904d;&#x5386;&#x7531;RCU&#x4fdd;&#x62a4;&#x7684;&#x54c8;&#x5e0c;&#x94fe;&#x8868;head&#xff0c;&#x53ea;&#x8981;&#x5728;&#x8bfb;&#x7aef;&#x4e34;&#x754c;&#x533a;&#x4f7f;&#x7528;&#x8be5;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x5c31;&#x53ef;&#x4ee5;&#x5b89;&#x5168;&#x5730;&#x548c;&#x5176;&#x5b83;_rcu&#x54c8;&#x5e0c;&#x94fe;&#x8868;&#x64cd;&#x4f5c;&#x51fd;&#x6570;&#xff08;&#x5982;hlist_add_rcu&#xff09;&#x5e76;&#x53d1;&#x8fd0;&#x884c;"/>
</node>
<node CREATED="1412643943465" ID="ID_1079741909" MODIFIED="1412643945423" TEXT="hlist_for_each_entry_rcu(tpos, pos, head, member)">
<node CREATED="1412643959177" ID="ID_1867363200" MODIFIED="1412643961011" TEXT="&#x7c7b;&#x4f3c;&#x4e8e;hlist_for_each_rcu&#xff0c;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x5728;&#x4e8e;&#x5b83;&#x7528;&#x4e8e;&#x904d;&#x5386;&#x6307;&#x5b9a;&#x7c7b;&#x578b;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x54c8;&#x5e0c;&#x94fe;&#x8868;&#xff0c;&#x5f53;&#x524d;&#x94fe;&#x8868;&#x9879;pos&#x4e3a;&#x4e00;&#x5305;&#x542b;struct list_head&#x7ed3;&#x6784;&#x7684;&#x7279;&#x5b9a;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
</node>
</node>
<node CREATED="1412705896716" FOLDED="true" ID="ID_407914783" MODIFIED="1413498948926" TEXT="RCU&#x5178;&#x578b;&#x7528;&#x6cd5;">
<node CREATED="1412705926972" FOLDED="true" ID="ID_1329177016" MODIFIED="1413498946310" TEXT="&#x53ea;&#x6709;&#x589e;&#x52a0;&#x548c;&#x5220;&#x9664;&#x7684;&#x94fe;&#x8868;&#x64cd;&#x4f5c;">
<node CREATED="1412705950020" ID="ID_407658213" MODIFIED="1412705952030" TEXT="&#x5728;&#x8fd9;&#x79cd;&#x5e94;&#x7528;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x7edd;&#x5927;&#x90e8;&#x5206;&#x662f;&#x5bf9;&#x94fe;&#x8868;&#x7684;&#x904d;&#x5386;&#xff0c;&#x5373;&#x8bfb;&#x64cd;&#x4f5c;&#xff0c;&#x800c;&#x5f88;&#x5c11;&#x51fa;&#x73b0;&#x7684;&#x5199;&#x64cd;&#x4f5c;&#x53ea;&#x6709;&#x589e;&#x52a0;&#x6216;&#x5220;&#x9664;&#x94fe;&#x8868;&#x9879;&#xff0c;&#x5e76;&#x6ca1;&#x6709;&#x5bf9;&#x94fe;&#x8868;&#x9879;&#x7684;&#x4fee;&#x6539;&#x64cd;&#x4f5c;&#xff0c;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4f7f;&#x7528;RCU&#x975e;&#x5e38;&#x5bb9;&#x6613;&#xff0c;&#x4ece;rwlock&#x8f6c;&#x6362;&#x6210;RCU&#x975e;&#x5e38;&#x81ea;&#x7136;&#x3002;&#x8def;&#x7531;&#x8868;&#x7684;&#x7ef4;&#x62a4;&#x5c31;&#x662f;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x7684;&#x5178;&#x578b;&#x5e94;&#x7528;&#xff0c;&#x5bf9;&#x8def;&#x7531;&#x8868;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x7edd;&#x5927;&#x90e8;&#x5206;&#x662f;&#x8def;&#x7531;&#x8868;&#x67e5;&#x8be2;&#xff0c;&#x800c;&#x5bf9;&#x8def;&#x7531;&#x8868;&#x7684;&#x5199;&#x64cd;&#x4f5c;&#x4e5f;&#x4ec5;&#x4ec5;&#x662f;&#x589e;&#x52a0;&#x6216;&#x5220;&#x9664;&#xff0c;&#x56e0;&#x6b64;&#x4f7f;&#x7528;RCU&#x66ff;&#x6362;&#x539f;&#x6765;&#x7684;rwlock&#x987a;&#x7406;&#x6210;&#x7ae0;&#x3002;&#x7cfb;&#x7edf;&#x8c03;&#x7528;&#x5ba1;&#x8ba1;&#x4e5f;&#x662f;&#x8fd9;&#x6837;&#x7684;&#x60c5;&#x51b5;"/>
<node CREATED="1412705970266" ID="ID_325918695" MODIFIED="1412706052941">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36825;&#26159;&#19968;&#27573;&#20351;&#29992;rwlock&#30340;&#31995;&#32479;&#35843;&#29992;&#23457;&#35745;&#37096;&#20998;&#30340;&#35835;&#31471;&#20195;&#30721; :
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;static enum audit_state audit_filter_task(struct task_struct *tsk)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_entry *e;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;enum audit_state&#160;&#160;&#160;state;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read_lock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Note: audit_netlink_sem held by caller. */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_for_each_entry(e, &amp;audit_tsklist, list) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (audit_filter_rules(tsk, &amp;e-&gt;rule, NULL, &amp;state)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return state;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return AUDIT_BUILD_CONTEXT;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
<node CREATED="1412706005979" ID="ID_344954131" MODIFIED="1412706127396">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;RCU&#21518;&#23558;&#21464;&#25104;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;static enum audit_state audit_filter_task(struct task_struct *tsk)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_entry *e;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;enum audit_state&#160;&#160;&#160;state;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rcu_read_lock();
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Note: audit_netlink_sem held by caller. */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_for_each_entry_rcu(e, &amp;audit_tsklist, list) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (audit_filter_rules(tsk, &amp;e-&gt;rule, NULL, &amp;state)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rcu_read_unlock();
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return state;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rcu_read_unlock();
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return AUDIT_BUILD_CONTEXT;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#36825;&#31181;&#36716;&#25442;&#38750;&#24120;&#30452;&#25509;&#65292;&#20351;&#29992;rcu_read_lock&#21644;rcu_read_unlock&#20998;&#21035;&#26367;&#25442;read_lock&#21644;read_unlock&#65292;
    </p>
    <p>
      &#38142;&#34920;&#36941;&#21382;&#20989;&#25968;&#20351;&#29992;_rcu&#29256;&#26412;&#26367;&#25442;&#23601;&#21487;&#20197;&#20102;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412706161363" ID="ID_1151429353" MODIFIED="1412706185887">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;rwlock&#30340;&#20889;&#31471;&#20195;&#30721;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;static inline int audit_del_rule(struct audit_rule *rule,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct list_head *list)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_entry&#160;&#160;*e;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_lock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_for_each_entry(e, list, list) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!audit_compare_rule(rule, &amp;e-&gt;rule)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_del(&amp;e-&gt;list);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return -EFAULT;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* No matching rule */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;static inline int audit_add_rule(struct audit_entry *entry,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct list_head *list)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_lock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (entry-&gt;rule.flags &amp; AUDIT_PREPEND) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;entry-&gt;rule.flags &amp;= ~AUDIT_PREPEND;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_add(&amp;entry-&gt;list, list);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} else {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_add_tail(&amp;entry-&gt;list, list);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
<node CREATED="1412706207715" ID="ID_750882726" MODIFIED="1412706373891">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;RCU&#21518;&#20889;&#31471;&#20195;&#30721;&#21464;&#25104;&#20026;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;static inline int audit_del_rule(struct audit_rule *rule,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct list_head *list)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_entry&#160;&#160;*e;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Do not use the _rcu iterator here, since this is the only
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* deletion routine. */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_for_each_entry(e, list, list) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!audit_compare_rule(rule, &amp;e-&gt;rule)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_del_rcu(&amp;e-&gt;list);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;call_rcu(&amp;e-&gt;rcu, audit_free_rule, e);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return -EFAULT;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* No matching rule */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;static inline int audit_add_rule(struct audit_entry *entry,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct list_head *list)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (entry-&gt;rule.flags &amp; AUDIT_PREPEND) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;entry-&gt;rule.flags &amp;= ~AUDIT_PREPEND;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_add_rcu(&amp;entry-&gt;list, list);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} else {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_add_tail_rcu(&amp;entry-&gt;list, list);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1412706377532" ID="ID_746970447" MODIFIED="1412706381708" TEXT="&#x5bf9;&#x4e8e;&#x94fe;&#x8868;&#x5220;&#x9664;&#x64cd;&#x4f5c;&#xff0c;list_del&#x66ff;&#x6362;&#x4e3a;list_del_rcu&#x548c;call_rcu&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#x88ab;&#x5220;&#x9664;&#x7684;&#x94fe;&#x8868;&#x9879;&#x53ef;&#x80fd;&#x8fd8;&#x5728;&#x88ab;&#x522b;&#x7684;&#x8bfb;&#x8005;&#x5f15;&#x7528;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x80fd;&#x7acb;&#x5373;&#x5220;&#x9664;&#xff0c;&#x5fc5;&#x987b;&#x7b49;&#x5230;&#x6240;&#x6709;&#x8bfb;&#x8005;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state&#x624d;&#x53ef;&#x4ee5;&#x5220;&#x9664;&#x3002;&#x53e6;&#x5916;&#xff0c;list_for_each_entry&#x5e76;&#x6ca1;&#x6709;&#x88ab;&#x66ff;&#x6362;&#x4e3a;list_for_each_entry_rcu&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#xff0c;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x5199;&#x8005;&#x5728;&#x505a;&#x94fe;&#x8868;&#x5220;&#x9664;&#x64cd;&#x4f5c;&#xff0c;&#x56e0;&#x6b64;&#x6ca1;&#x6709;&#x5fc5;&#x8981;&#x4f7f;&#x7528;_rcu&#x7248;&#x672c;"/>
</node>
<node CREATED="1412706817138" ID="ID_611078154" MODIFIED="1412706832101" TEXT="&#x901a;&#x5e38;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;write_lock&#x548c;write_unlock&#x5e94;&#x5f53;&#x5206;&#x522b;&#x66ff;&#x6362;&#x6210;spin_lock&#x548c;spin_unlock&#xff0c;&#x4f46;&#x662f;&#x5bf9;&#x4e8e;&#x53ea;&#x662f;&#x5bf9;&#x94fe;&#x8868;&#x8fdb;&#x884c;&#x589e;&#x52a0;&#x548c;&#x5220;&#x9664;&#x64cd;&#x4f5c;&#x800c;&#x4e14;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x5199;&#x8005;&#x7684;&#x5199;&#x7aef;&#xff0c;&#x5728;&#x4f7f;&#x7528;&#x4e86;_rcu&#x7248;&#x672c;&#x7684;&#x94fe;&#x8868;&#x64cd;&#x4f5c;API&#x540e;&#xff0c;rwlock&#x53ef;&#x4ee5;&#x5b8c;&#x5168;&#x6d88;&#x9664;&#xff0c;&#x4e0d;&#x9700;&#x8981;spinlock&#x6765;&#x540c;&#x6b65;&#x8bfb;&#x8005;&#x7684;&#x8bbf;&#x95ee;&#x3002;&#x5bf9;&#x4e8e;&#x4e0a;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#xff0c;&#x7531;&#x4e8e;&#x5df2;&#x7ecf;&#x6709;audit_netlink_sem&#x88ab;&#x8c03;&#x7528;&#x8005;&#x4fdd;&#x6301;&#xff0c;&#x6240;&#x4ee5;spinlock&#x5c31;&#x6ca1;&#x6709;&#x5fc5;&#x8981;&#x4e86;&#x3002;  &#xa;&#xa;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x5141;&#x8bb8;&#x4fee;&#x6539;&#x7ed3;&#x679c;&#x5ef6;&#x540e;&#x4e00;&#x5b9a;&#x65f6;&#x95f4;&#x624d;&#x53ef;&#x89c1;&#xff0c;&#x800c;&#x4e14;&#x5199;&#x8005;&#x5bf9;&#x94fe;&#x8868;&#x4ec5;&#x4ec5;&#x505a;&#x589e;&#x52a0;&#x548c;&#x5220;&#x9664;&#x64cd;&#x4f5c;&#xff0c;&#x6240;&#x4ee5;&#x8f6c;&#x6362;&#x6210;&#x4f7f;&#x7528;RCU&#x975e;&#x5e38;&#x5bb9;&#x6613;&#x3002;"/>
</node>
<node CREATED="1412706870059" FOLDED="true" ID="ID_1634675523" MODIFIED="1413498947742" TEXT="&#x5199;&#x7aef;&#x9700;&#x8981;&#x5bf9;&#x94fe;&#x8868;&#x6761;&#x76ee;&#x8fdb;&#x884c;&#x4fee;&#x6539;&#x64cd;&#x4f5c;">
<node CREATED="1412706907764" ID="ID_737684088" MODIFIED="1412706909493" TEXT="&#x5982;&#x679c;&#x5199;&#x8005;&#x9700;&#x8981;&#x5bf9;&#x94fe;&#x8868;&#x6761;&#x76ee;&#x8fdb;&#x884c;&#x4fee;&#x6539;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x9700;&#x8981;&#x9996;&#x5148;&#x62f7;&#x8d1d;&#x8981;&#x4fee;&#x6539;&#x7684;&#x6761;&#x76ee;&#xff0c;&#x7136;&#x540e;&#x4fee;&#x6539;&#x6761;&#x76ee;&#x7684;&#x62f7;&#x8d1d;&#xff0c;&#x7b49;&#x4fee;&#x6539;&#x5b8c;&#x6bd5;&#x540e;&#xff0c;&#x518d;&#x4f7f;&#x7528;&#x6761;&#x76ee;&#x62f7;&#x8d1d;&#x53d6;&#x4ee3;&#x8981;&#x4fee;&#x6539;&#x7684;&#x6761;&#x76ee;&#xff0c;&#x8981;&#x4fee;&#x6539;&#x6761;&#x76ee;&#x5c06;&#x88ab;&#x5728;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;grace period&#x540e;&#x5b89;&#x5168;&#x5220;&#x9664;&#x3002;"/>
<node CREATED="1412706956426" ID="ID_659070489" MODIFIED="1412706987940">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;rwlock&#30340;&#20462;&#25913;&#20195;&#30721;&#22914;&#19979;&#65306;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;static inline int audit_upd_rule(struct audit_rule *rule,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct list_head *list,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__u32 newaction,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__u32 newfield_count)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_entry&#160;&#160;*e;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_newentry *ne;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_lock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Note: audit_netlink_sem held by caller. */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_for_each_entry(e, list, list) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!audit_compare_rule(rule, &amp;e-&gt;rule)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;e-&gt;rule.action = newaction;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;e-&gt;rule.file_count = newfield_count;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write_unlock(&amp;auditsc_lock);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return -EFAULT;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* No matching rule */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
<node CREATED="1412707009692" ID="ID_1409239612" MODIFIED="1412707034785">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#20351;&#29992;RCU&#65292;&#20462;&#25913;&#20195;&#30721;&#24212;&#24403;&#20026; :
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;static inline int audit_upd_rule(struct audit_rule *rule,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct list_head *list,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__u32 newaction,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__u32 newfield_count)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_entry&#160;&#160;*e;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct audit_newentry *ne;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_for_each_entry(e, list, list) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!audit_compare_rule(rule, &amp;e-&gt;rule)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ne = kmalloc(sizeof(*entry), GFP_ATOMIC);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (ne == NULL)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return -ENOMEM;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;audit_copy_rule(&amp;ne-&gt;rule, &amp;e-&gt;rule);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ne-&gt;rule.action = newaction;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ne-&gt;rule.file_count = newfield_count;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list_replace_rcu(e, ne);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;call_rcu(&amp;e-&gt;rcu, audit_free_rule, e);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return -EFAULT;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* No matching rule */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1412705252313" ID="ID_1877437385" MODIFIED="1412705258388" TEXT="&#x95ee;&#x9898;">
<node CREATED="1412705307781" ID="ID_591667316" MODIFIED="1412705321334" TEXT="quiescent state&#x7684;&#x5b9a;&#x4e49;&#x662f;&#x4ec0;&#x4e48;?"/>
<node CREATED="1412705340156" ID="ID_915168769" MODIFIED="1412705349892" TEXT="grace period&#x7684;&#x5b9a;&#x4e49;&#x662f;&#x4ec0;&#x4e48;?"/>
<node CREATED="1412705432293" ID="ID_592510584" MODIFIED="1412705592306" TEXT="&#x5185;&#x6838;&#x662f;&#x5982;&#x4f55;&#x4fdd;&#x969c;&#x5199;&#x8005;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e2d;&#x91ca;&#x653e;&#x94fe;&#x8868;&#x8282;&#x70b9;&#x65f6;&#x8bfb;&#x8005;&#x4e0d;&#x5728;&#x4e34;&#x754c;&#x533a;&#x7684;?"/>
<node CREATED="1412705432293" ID="ID_241846843" MODIFIED="1412705540372" TEXT="&#x5185;&#x6838;&#x662f;&#x5982;&#x4f55;&#x4fdd;&#x969c;&#x5199;&#x8005;&#x66f4;&#x65b0;&#x94fe;&#x8868;&#x65f6;&#x8bfb;&#x8005;&#x4e0d;&#x5728;&#x4e34;&#x754c;&#x533a;&#x7684;?"/>
<node CREATED="1412705647676" ID="ID_433927418" MODIFIED="1412705666741" TEXT="&#x5185;&#x5b58;&#x6805;"/>
<node CREATED="1412705668426" ID="ID_109009641" MODIFIED="1412705687045" TEXT="RCU&#x4fdd;&#x62a4;&#x7684;&#x94fe;&#x8868;&#x7684;&#x5178;&#x578b;&#x7528;&#x6cd5;"/>
<node CREATED="1412705688594" ID="ID_807474469" MODIFIED="1412705723362" TEXT="RCU&#x4fdd;&#x62a4;&#x7684;hlist&#x94fe;&#x8868;&#x7684;&#x5178;&#x578b;&#x7528;&#x6cd5;"/>
</node>
<node CREATED="1412978808588" ID="ID_92944956" MODIFIED="1415821867750" TEXT="hlist_nulls">
<node CREATED="1412978812315" ID="ID_764225914" MODIFIED="1412978817927" TEXT="&#x539f;&#x7406;">
<node CREATED="1412978982419" ID="ID_400483542" MODIFIED="1412979444302" TEXT="&#x6b63;&#x5e38;&#x7684;hlist&#x94fe;&#x8868;&#x7684;&#x7ed3;&#x5c3e;&#x662f;&#x4e00;&#x4e2a;&#x7a7a;&#x6307;&#x9488;, &#x4f46;hlist_nulls&#x94fe;&#x8868;&#x7528;&#x4e00;&#x4e2a;&#x7528;&#x6237;&#x81ea;&#x5b9a;&#x4e49;&#x7684;nulls&#x6807;&#x8bb0;&#x7528;&#x4f5c;&#x94fe;&#x8868;&#x7ed3;&#x5c3e;, &#x8fd9;&#x4e2a;nulls&#x6807;&#x8bb0;&#x7684;&#x7279;&#x522b;&#x4e4b;&#x5904;&#x662f;&#x6700;&#x4f4e;bit&#x4e3a;1. &#x8fd9;&#x4e2a;&#x7279;&#x5f81;&#x5c06;nulls&#x6807;&#x8bb0;&#x4e0e;&#x6b63;&#x5e38;&#x7684;&#x94fe;&#x8868;entry&#x6307;&#x9488;&#x533a;&#x5206;&#x5f00;&#x6765;. &#x56e0;&#x4e3a;&#x6b63;&#x5e38;&#x7684;&#x94fe;&#x8868;entry&#x662f;4&#x5b57;&#x8282;&#x6216;8&#x5b57;&#x8282;&#x5bf9;&#x9f50;&#x7684;, &#x56e0;&#x800c;&#x6b63;&#x5e38;&#x6307;&#x9488;&#x7684;&#x6700;&#x4f4e;bit&#x4e00;&#x5b9a;&#x4e3a;0. &#x6240;&#x4ee5;&#x533a;&#x5206;&#x94fe;&#x8868;&#x662f;&#x4e0d;&#x662f;&#x7ed3;&#x5c3e;&#x5c31;&#x662f;&#x5224;&#x65ad;next&#x6307;&#x9488;&#x7684;&#x6700;&#x4f4e;bit&#x662f;&#x4e0d;&#x662f;1, &#x662f;1&#x5c31;&#x8868;&#x793a;&#x7ed3;&#x5c3e;."/>
<node CREATED="1412980057918" ID="ID_1951840039" MODIFIED="1412980146373" TEXT="&#x8fd9;&#x79cd;&#x94fe;&#x8868;&#x7684;&#x597d;&#x5904;&#x662f;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x68c0;&#x67e5;&#x94fe;&#x8868;&#x7ed3;&#x5c3e;&#x7684;nulls&#x6807;&#x8bb0;&#x4ece;&#x800c;&#x5224;&#x65ad;&#x662f;&#x8c01;&#x4fee;&#x6539;&#x4e86;&#x6b64;&#x94fe;&#x8868;"/>
</node>
<node CREATED="1412978818755" ID="ID_1819492303" MODIFIED="1412978833329" TEXT="struct hlist_nulls_head">
<node CREATED="1412978857190" ID="ID_381314175" MODIFIED="1412978857920" TEXT="struct hlist_nulls_node *first;"/>
</node>
<node CREATED="1412978843590" ID="ID_845977118" MODIFIED="1412979749387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct hlist_nulls_node
    </p>
    <p>
      &#27492;&#32467;&#26500;&#19968;&#33324;&#20316;&#20026;&#21478;&#19968;&#20010;&#32467;&#26500;&#20307;(&#38656;&#35201;&#38142;&#25509;&#30340;&#30495;&#27491;&#20869;&#23481;)&#30340;&#31532;&#19968;&#20010;&#25104;&#21592;.
    </p>
  </body>
</html></richcontent>
<node CREATED="1412978873582" ID="ID_1082033596" MODIFIED="1412978879613" TEXT="struct hlist_nulls_node *next;"/>
<node CREATED="1412978880654" ID="ID_1600805571" MODIFIED="1412978935075" TEXT="struct hlist_nulls_node **pprev;"/>
</node>
<node CREATED="1412978937395" ID="ID_1150718993" MODIFIED="1412978939015" TEXT="API">
<node CREATED="1412978939965" ID="ID_1661542073" MODIFIED="1412978941131" TEXT="INIT_HLIST_NULLS_HEAD(ptr, nulls)">
<node CREATED="1412979496613" ID="ID_837109082" MODIFIED="1412979944702" TEXT="&#x7528;&#x4e00;&#x4e2a;&#x7528;&#x6237;&#x81ea;&#x5b9a;&#x4e49;&#x7684;nulls&#x6807;&#x8bb0;&#x521d;&#x59cb;&#x5316;&#x94fe;&#x8868;, &#x7cfb;&#x7edf;&#x59cb;&#x7ec8;&#x4f1a;&#x5c06;&#x6b64;nulls&#x6807;&#x8bb0;&#x5de6;&#x79fb;&#x4e00;&#x4f4d;, &#x518d;&#x5c06;&#x6700;&#x4f4e;bit&#x7f6e;1"/>
<node CREATED="1412979570133" ID="ID_884926876" MODIFIED="1412979595648" TEXT="&#x5c31;&#x662f;&#x521d;&#x59cb;&#x5316;&#x94fe;&#x8868;&#x7684;first&#x6307;&#x9488;"/>
</node>
<node CREATED="1412979635291" ID="ID_1436640470" MODIFIED="1412979636942" TEXT="hlist_nulls_entry(ptr, type, member)">
<node CREATED="1415826132340" ID="ID_364621398" MODIFIED="1415827203178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct hlist_nulls_node&#19968;&#33324;&#20316;&#20026;&#21478;&#19968;&#20010;&#32467;&#26500;&#20307;(&#38656;&#35201;&#38142;&#25509;&#30340;&#30495;&#27491;&#20869;&#23481;)&#30340;&#25104;&#21592;
    </p>
    <p>
      &#22240;&#27492;&#36941;&#21382;&#38142;&#34920;&#24471;&#21040;struct hlist_nulls_node&#25351;&#38024;ptr&#21518;&#38656;&#35201;&#23558;&#20854;&#36716;&#25442;&#20026;&#20854;&#29238;&#32467;&#26500;.
    </p>
    <p>
      ptr : struct hlist_nulls_node&#25351;&#38024;
    </p>
    <p>
      type : struct hlist_nulls_node&#25152;&#22312;&#29238;&#32467;&#26500;&#30340;&#25968;&#25454;&#31867;&#22411;
    </p>
    <p>
      member : struct hlist_nulls_node&#22312;&#29238;&#32467;&#26500;&#20013;&#30340;&#25104;&#21592;&#21517;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1415826664509" ID="ID_99715842" MODIFIED="1415826668942" TEXT="example">
<node CREATED="1415826669935" ID="ID_319370189" MODIFIED="1415826829914">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct nf_conntrack_tuple_hash {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct hlist_nulls_node hnnode;
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct nf_conntrack_tuple tuple;
    </p>
    <p>
      };
    </p>
    <p>
      
    </p>
    <p>
      struct nf_conntrack_tuple_hash *h;
    </p>
    <p>
      struct hlist_nulls_node *n=get_head_xxx();
    </p>
    <p>
      h = hlist_nulls_entry(n, struct nf_conntrack_tuple_hash, hnnode);
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1412979773835" ID="ID_1365468039" MODIFIED="1412979774704" TEXT="int is_a_nulls(const struct hlist_nulls_node *ptr)">
<node CREATED="1412979777749" ID="ID_721772807" MODIFIED="1412979804541" TEXT="&#x6307;&#x9488;&#x662f;&#x5426;&#x4e3a;&#x7a7a;,&#x5373;nulls&#x6807;&#x8bb0;"/>
</node>
<node CREATED="1412979835357" ID="ID_1525643801" MODIFIED="1412979836958" TEXT="unsigned long get_nulls_value(const struct hlist_nulls_node *ptr)">
<node CREATED="1412980010422" ID="ID_1258430793" MODIFIED="1412980026979" TEXT="&#x8fd4;&#x56de;nulls&#x6807;&#x8bb0;&#x7684;&#x7528;&#x6237;&#x81ea;&#x5b9a;&#x4e49;&#x90e8;&#x5206;"/>
</node>
<node CREATED="1412980028395" ID="ID_1839176085" MODIFIED="1412980029693" TEXT="int hlist_nulls_empty(const struct hlist_nulls_head *h)">
<node CREATED="1412980031491" ID="ID_1428952800" MODIFIED="1412980045789" TEXT="&#x68c0;&#x67e5;&#x94fe;&#x8868;&#x662f;&#x5426;&#x4e3a;&#x7a7a;"/>
</node>
<node CREATED="1412980192300" ID="ID_1872266245" MODIFIED="1412980202224">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void hlist_nulls_add_head(struct hlist_nulls_node *n, struct hlist_nulls_head *h)
    </p>
  </body>
</html></richcontent>
<node CREATED="1412980205093" ID="ID_384730507" MODIFIED="1412980223061" TEXT="&#x5728;&#x94fe;&#x8868;&#x5934;&#x90e8;&#x63d2;&#x5165;&#x4e00;&#x4e2a;&#x8282;&#x70b9;"/>
</node>
<node CREATED="1412980252206" ID="ID_1587279028" MODIFIED="1412980253189" TEXT="void hlist_nulls_del(struct hlist_nulls_node *n)">
<node CREATED="1412980256259" ID="ID_1205135168" MODIFIED="1412980276933" TEXT="&#x4ece;&#x94fe;&#x8868;&#x4e2d;&#x5220;&#x9664;&#x4e00;&#x4e2a;&#x8282;&#x70b9;"/>
</node>
<node CREATED="1412980372062" ID="ID_1858828369" MODIFIED="1412980372741" TEXT="hlist_nulls_for_each_entry(tpos, pos, head, member)">
<node CREATED="1412980374083" ID="ID_614706347" MODIFIED="1412980382200" TEXT="&#x904d;&#x5386;&#x94fe;&#x8868;"/>
</node>
</node>
</node>
<node CREATED="1412980534299" ID="ID_540269931" MODIFIED="1415821862089" TEXT="hlist_nulls_rcu">
<node CREATED="1412980723997" ID="ID_201918088" MODIFIED="1412980727957" TEXT="&#x539f;&#x7406;">
<node CREATED="1412980729452" ID="ID_415028063" MODIFIED="1412980744797" TEXT="RCU&#x4fdd;&#x62a4;&#x7684;hlist_nulls"/>
</node>
<node CREATED="1412981067566" ID="ID_1308933908" MODIFIED="1412981069713" TEXT="API">
<node CREATED="1412981070571" ID="ID_603456829" MODIFIED="1412981071773" TEXT="void hlist_nulls_del_init_rcu(struct hlist_nulls_node *n)"/>
<node CREATED="1412981098909" ID="ID_157176707" MODIFIED="1412981099520" TEXT="void hlist_nulls_del_rcu(struct hlist_nulls_node *n)"/>
<node CREATED="1412981178998" ID="ID_652610032" MODIFIED="1412981189451">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void hlist_nulls_add_head_rcu(struct hlist_nulls_node *n, struct hlist_nulls_head *h)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1412981204550" ID="ID_107099015" MODIFIED="1412981205561" TEXT="hlist_nulls_for_each_entry_rcu(tpos, pos, head, member)">
<node CREATED="1415826944335" ID="ID_589997824" MODIFIED="1415827217795">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      head&#26159;&#38142;&#34920;&#22836;, &#20854;&#32467;&#26500;&#31867;&#22411;&#20026;struct hlist_nulls_head.
    </p>
    <p>
      pos&#29992;&#20110;&#36941;&#21382;&#38142;&#34920;, &#20854;&#32467;&#26500;&#31867;&#22411;&#20026;struct hlist_nulls_node
    </p>
    <p>
      struct hlist_nulls_node&#19968;&#33324;&#20316;&#20026;&#21478;&#19968;&#20010;&#32467;&#26500;&#20307;(&#38656;&#35201;&#38142;&#25509;&#30340;&#30495;&#27491;&#20869;&#23481;)&#30340;&#25104;&#21592;
    </p>
    <p>
      &#22240;&#27492;&#36941;&#21382;&#38142;&#34920;&#24471;&#21040;struct hlist_nulls_node&#25351;&#38024;pos&#21518;&#38656;&#35201;&#23558;&#20854;&#36716;&#25442;&#20026;&#20854;&#29238;&#32467;&#26500;tpos
    </p>
    <p>
      &#25152;&#20197;tpos&#26159;struct hlist_nulls_node&#25152;&#22312;&#29238;&#32467;&#26500;&#30340;&#25968;&#25454;&#31867;&#22411;
    </p>
    <p>
      member&#26159;struct hlist_nulls_node&#22312;&#29238;&#32467;&#26500;&#20013;&#30340;&#25104;&#21592;&#21517;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1412707401236" FOLDED="true" ID="ID_709299098" MODIFIED="1412796323033" TEXT="&#x987a;&#x5e8f;&#x9501;(seqlock)">
<node CREATED="1412707463315" ID="ID_1334804536" MODIFIED="1412707469275" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1412707470267" ID="ID_202844827" MODIFIED="1412707501845" TEXT="&#x987a;&#x5e8f;&#x9501;&#x4e5f;&#x662f;&#x5bf9;&#x8bfb;&#x5199;&#x9501;&#x7684;&#x4e00;&#x79cd;&#x4f18;&#x5316;&#xff0c;&#x5bf9;&#x4e8e;&#x987a;&#x5e8f;&#x9501;&#xff0c;&#x8bfb;&#x8005;&#x7edd;&#x4e0d;&#x4f1a;&#x88ab;&#x5199;&#x8005;&#x963b;&#x585e;&#xff0c;&#x4e5f;&#x5c31;&#x8bf4;&#xff0c;&#x8bfb;&#x8005;&#x53ef;&#x4ee5;&#x5728;&#x5199;&#x8005;&#x5bf9;&#x88ab;&#x987a;&#x5e8f;&#x9501;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x5199;&#x64cd;&#x4f5c;&#x65f6;&#x4ecd;&#x7136;&#x53ef;&#x4ee5;&#x7ee7;&#x7eed;&#x8bfb;&#xff0c;&#x800c;&#x4e0d;&#x5fc5;&#x7b49;&#x5f85;&#x5199;&#x8005;&#x5b8c;&#x6210;&#x5199;&#x64cd;&#x4f5c;&#xff0c;&#x5199;&#x8005;&#x4e5f;&#x4e0d;&#x9700;&#x8981;&#x7b49;&#x5f85;&#x6240;&#x6709;&#x8bfb;&#x8005;&#x5b8c;&#x6210;&#x8bfb;&#x64cd;&#x4f5c;&#x624d;&#x53bb;&#x8fdb;&#x884c;&#x5199;&#x64cd;&#x4f5c;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x5199;&#x8005;&#x4e0e;&#x5199;&#x8005;&#x4e4b;&#x95f4;&#x4ecd;&#x7136;&#x662f;&#x4e92;&#x65a5;&#x7684;&#xff0c;&#x5373;&#x5982;&#x679c;&#x6709;&#x5199;&#x8005;&#x5728;&#x8fdb;&#x884c;&#x5199;&#x64cd;&#x4f5c;&#xff0c;&#x5176;&#x4ed6;&#x5199;&#x8005;&#x5fc5;&#x987b;&#x81ea;&#x65cb;&#x5728;&#x90a3;&#x91cc;&#xff0c;&#x76f4;&#x5230;&#x5199;&#x8005;&#x91ca;&#x653e;&#x4e86;&#x987a;&#x5e8f;&#x9501;&#x3002;  &#xa;&#xa;&#x8fd9;&#x79cd;&#x9501;&#x6709;&#x4e00;&#x4e2a;&#x9650;&#x5236;&#xff0c;&#x5b83;&#x5fc5;&#x987b;&#x8981;&#x6c42;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x4e0d;&#x542b;&#x6709;&#x6307;&#x9488;&#xff0c;&#x56e0;&#x4e3a;&#x5199;&#x8005;&#x53ef;&#x80fd;&#x4f7f;&#x5f97;&#x6307;&#x9488;&#x5931;&#x6548;&#xff0c;&#x4f46;&#x8bfb;&#x8005;&#x5982;&#x679c;&#x6b63;&#x8981;&#x8bbf;&#x95ee;&#x8be5;&#x6307;&#x9488;&#xff0c;&#x5c06;&#x5bfc;&#x81f4;OOPs&#x3002;  &#xa;&#xa;&#x5982;&#x679c;&#x8bfb;&#x8005;&#x5728;&#x8bfb;&#x64cd;&#x4f5c;&#x671f;&#x95f4;&#xff0c;&#x5199;&#x8005;&#x5df2;&#x7ecf;&#x53d1;&#x751f;&#x4e86;&#x5199;&#x64cd;&#x4f5c;&#xff0c;&#x90a3;&#x4e48;&#xff0c;&#x8bfb;&#x8005;&#x5fc5;&#x987b;&#x91cd;&#x65b0;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#xff0c;&#x4ee5;&#x4fbf;&#x786e;&#x4fdd;&#x5f97;&#x5230;&#x7684;&#x6570;&#x636e;&#x662f;&#x5b8c;&#x6574;&#x7684;&#x3002;  &#xa;&#xa;&#x8fd9;&#x79cd;&#x9501;&#x5bf9;&#x4e8e;&#x8bfb;&#x5199;&#x540c;&#x65f6;&#x8fdb;&#x884c;&#x7684;&#x6982;&#x7387;&#x6bd4;&#x8f83;&#x5c0f;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x6027;&#x80fd;&#x662f;&#x975e;&#x5e38;&#x597d;&#x7684;&#xff0c;&#x800c;&#x4e14;&#x5b83;&#x5141;&#x8bb8;&#x8bfb;&#x5199;&#x540c;&#x65f6;&#x8fdb;&#x884c;&#xff0c;&#x56e0;&#x800c;&#x66f4;&#x5927;&#x5730;&#x63d0;&#x9ad8;&#x4e86;&#x5e76;&#x53d1;&#x6027;&#x3002;"/>
</node>
<node CREATED="1412707527834" ID="ID_796545698" MODIFIED="1412707533479" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1412707534506" ID="ID_1494316787" MODIFIED="1412707536487" TEXT="API">
<node CREATED="1412707537426" ID="ID_990596440" MODIFIED="1412707538375" TEXT="void write_seqlock(seqlock_t *sl);">
<node CREATED="1412707560243" ID="ID_1942578265" MODIFIED="1412707562662" TEXT="&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x88ab;&#x987a;&#x5e8f;&#x9501;s1&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x524d;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x83b7;&#x5f97;&#x987a;&#x5e8f;&#x9501;s1&#x3002;&#x5b83;&#x5b9e;&#x9645;&#x529f;&#x80fd;&#x4e0a;&#x7b49;&#x540c;&#x4e8e;spin_lock&#xff0c;&#x53ea;&#x662f;&#x589e;&#x52a0;&#x4e86;&#x4e00;&#x4e2a;&#x5bf9;&#x987a;&#x5e8f;&#x9501;&#x987a;&#x5e8f;&#x53f7;&#x7684;&#x52a0;1&#x64cd;&#x4f5c;&#xff0c;&#x4ee5;&#x4fbf;&#x8bfb;&#x8005;&#x80fd;&#x591f;&#x68c0;&#x67e5;&#x51fa;&#x662f;&#x5426;&#x5728;&#x8bfb;&#x671f;&#x95f4;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x8fc7;&#x3002;"/>
</node>
<node CREATED="1412707574860" ID="ID_928313041" MODIFIED="1412707577434" TEXT="void write_sequnlock(seqlock_t *sl);">
<node CREATED="1412707584667" ID="ID_1462717213" MODIFIED="1412707585350" TEXT="&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5b8c;&#x88ab;&#x987a;&#x5e8f;&#x9501;s1&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x540e;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x91ca;&#x653e;&#x987a;&#x5e8f;&#x9501;s1&#x3002;&#x5b83;&#x5b9e;&#x9645;&#x529f;&#x80fd;&#x4e0a;&#x7b49;&#x540c;&#x4e8e;spin_unlock&#xff0c;&#x53ea;&#x662f;&#x589e;&#x52a0;&#x4e86;&#x4e00;&#x4e2a;&#x5bf9;&#x987a;&#x5e8f;&#x9501;&#x987a;&#x5e8f;&#x53f7;&#x7684;&#x52a0;1&#x64cd;&#x4f5c;&#xff0c;&#x4ee5;&#x4fbf;&#x8bfb;&#x8005;&#x80fd;&#x591f;&#x68c0;&#x67e5;&#x51fa;&#x662f;&#x5426;&#x5728;&#x8bfb;&#x671f;&#x95f4;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x8fc7;&#x3002;"/>
</node>
<node CREATED="1412707673588" ID="ID_1987504747" MODIFIED="1412707674574" TEXT="int write_tryseqlock(seqlock_t *sl);">
<node CREATED="1412707686450" ID="ID_1038417339" MODIFIED="1412707687130" TEXT="&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x88ab;&#x987a;&#x5e8f;&#x9501;s1&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x524d;&#x4e5f;&#x53ef;&#x4ee5;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x83b7;&#x5f97;&#x987a;&#x5e8f;&#x9501;s1&#x3002;&#x5b83;&#x5b9e;&#x9645;&#x529f;&#x80fd;&#x4e0a;&#x7b49;&#x540c;&#x4e8e;spin_trylock&#xff0c;&#x53ea;&#x662f;&#x5982;&#x679c;&#x6210;&#x529f;&#x83b7;&#x5f97;&#x9501;&#x540e;&#xff0c;&#x8be5;&#x51fd;&#x6570;&#x589e;&#x52a0;&#x4e86;&#x4e00;&#x4e2a;&#x5bf9;&#x987a;&#x5e8f;&#x9501;&#x987a;&#x5e8f;&#x53f7;&#x7684;&#x52a0;1&#x64cd;&#x4f5c;&#xff0c;&#x4ee5;&#x4fbf;&#x8bfb;&#x8005;&#x80fd;&#x591f;&#x68c0;&#x67e5;&#x51fa;&#x662f;&#x5426;&#x5728;&#x8bfb;&#x671f;&#x95f4;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x8fc7;&#x3002;"/>
</node>
<node CREATED="1412707701642" ID="ID_591053429" MODIFIED="1412707702223" TEXT="unsigned read_seqbegin(const seqlock_t *sl);">
<node CREATED="1412707713746" ID="ID_221145463" MODIFIED="1412707714746" TEXT="&#x8bfb;&#x8005;&#x5728;&#x5bf9;&#x88ab;&#x987a;&#x5e8f;&#x9501;s1&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#x524d;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x3002;&#x8bfb;&#x8005;&#x5b9e;&#x9645;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x5f97;&#x5230;&#x9501;&#x548c;&#x91ca;&#x653e;&#x9501;&#x7684;&#x5f00;&#x9500;&#xff0c;&#x8be5;&#x51fd;&#x6570;&#x53ea;&#x662f;&#x8fd4;&#x56de;&#x987a;&#x5e8f;&#x9501;s1&#x7684;&#x5f53;&#x524d;&#x987a;&#x5e8f;&#x53f7;&#x3002;"/>
</node>
<node CREATED="1412707761259" ID="ID_495772237" MODIFIED="1412707761993" TEXT="int read_seqretry(const seqlock_t *sl, unsigned iv);">
<node CREATED="1412707775612" ID="ID_18537004" MODIFIED="1412707776215" TEXT="&#x8bfb;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5b8c;&#x88ab;&#x987a;&#x5e8f;&#x9501;s1&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x540e;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x68c0;&#x67e5;&#xff0c;&#x5728;&#x8bfb;&#x8bbf;&#x95ee;&#x671f;&#x95f4;&#x662f;&#x5426;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x4e86;&#x8be5;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x5982;&#x679c;&#x662f;&#xff0c;&#x8bfb;&#x8005;&#x5c31;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8fdb;&#x884c;&#x8bfb;&#x64cd;&#x4f5c;&#xff0c;&#x5426;&#x5219;&#xff0c;&#x8bfb;&#x8005;&#x6210;&#x529f;&#x5b8c;&#x6210;&#x4e86;&#x8bfb;&#x64cd;&#x4f5c;&#x3002;"/>
</node>
<node CREATED="1412708035581" ID="ID_1886669624" MODIFIED="1412708036463" TEXT="read_seqbegin_irqsave(lock, flags)">
<node CREATED="1412708053892" ID="ID_276974052" MODIFIED="1412708054867" TEXT="&#x8bfb;&#x8005;&#x5728;&#x5bf9;&#x88ab;&#x987a;&#x5e8f;&#x9501;lock&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#x524d;&#x4e5f;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x83b7;&#x5f97;&#x987a;&#x5e8f;&#x9501;lock&#x7684;&#x5f53;&#x524d;&#x987a;&#x5e8f;&#x53f7;&#xff0c;&#x4e0e;read_seqbegin&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x5b83;&#x540c;&#x65f6;&#x8fd8;&#x628a;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x4fdd;&#x5b58;&#x5230;&#x53d8;&#x91cf;flags&#x4e2d;&#xff0c;&#x5e76;&#x4e14;&#x5931;&#x6548;&#x4e86;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#x3002;&#x6ce8;&#x610f;&#xff0c;&#x5b83;&#x5fc5;&#x987b;&#x4e0e;read_seqretry_irqrestore&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;"/>
</node>
<node CREATED="1412708081498" ID="ID_720243584" MODIFIED="1412708082457" TEXT="read_seqretry_irqrestore(lock, iv, flags)">
<node CREATED="1412708095644" ID="ID_843021642" MODIFIED="1412708096620" TEXT="&#x8bfb;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5b8c;&#x88ab;&#x987a;&#x5e8f;&#x9501;lock&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#x540e;&#x4e5f;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x68c0;&#x67e5;&#xff0c;&#x5728;&#x8bfb;&#x8bbf;&#x95ee;&#x671f;&#x95f4;&#x662f;&#x5426;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x4e86;&#x8be5;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x5982;&#x679c;&#x662f;&#xff0c;&#x8bfb;&#x8005;&#x5c31;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8fdb;&#x884c;&#x8bfb;&#x64cd;&#x4f5c;&#xff0c;&#x5426;&#x5219;&#xff0c;&#x8bfb;&#x8005;&#x6210;&#x529f;&#x5b8c;&#x6210;&#x4e86;&#x8bfb;&#x64cd;&#x4f5c;&#x3002;&#x5b83;&#x4e0e;read_seqretry&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x628a;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x6062;&#x590d;&#x4e3a;&#x53d8;&#x91cf;flags&#x7684;&#x503c;&#x3002;&#x6ce8;&#x610f;&#xff0c;&#x5b83;&#x5fc5;&#x987b;&#x4e0e;read_seqbegin_irqsave&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;"/>
</node>
<node CREATED="1412707833171" ID="ID_1540252526" MODIFIED="1412707834231" TEXT="write_seqlock_irqsave(lock, flags)">
<node CREATED="1412707848955" ID="ID_1286179655" MODIFIED="1412707849960" TEXT="&#x5199;&#x8005;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x83b7;&#x5f97;&#x987a;&#x5e8f;&#x9501;lock&#xff0c;&#x4e0e;write_seqlock&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x628a;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x4fdd;&#x5b58;&#x5230;&#x53d8;&#x91cf;flags&#x4e2d;&#xff0c;&#x5e76;&#x4e14;&#x5931;&#x6548;&#x4e86;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#x3002;"/>
</node>
<node CREATED="1412707917396" ID="ID_1589034333" MODIFIED="1412707918835" TEXT="write_sequnlock_irqrestore(lock, flags)">
<node CREATED="1412707933267" ID="ID_15124206" MODIFIED="1412707933951" TEXT="&#x5199;&#x8005;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x91ca;&#x653e;&#x987a;&#x5e8f;&#x9501;lock&#xff0c;&#x4e0e;write_sequnlock&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x628a;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x7684;&#x503c;&#x6062;&#x590d;&#x4e3a;&#x53d8;&#x91cf;flags&#x7684;&#x503c;&#x3002;&#x5b83;&#x5fc5;&#x987b;&#x4e0e;write_seqlock_irqsave&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;"/>
</node>
<node CREATED="1412707867180" ID="ID_1128599509" MODIFIED="1412707867962" TEXT="write_seqlock_irq(lock)">
<node CREATED="1412707878010" ID="ID_870894806" MODIFIED="1412707878624" TEXT="&#x5199;&#x8005;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x83b7;&#x5f97;&#x987a;&#x5e8f;&#x9501;lock&#xff0c;&#x4e0e;write_seqlock&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x5931;&#x6548;&#x4e86;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#x3002;&#x4e0e;write_seqlock_irqsave&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x4e0d;&#x4fdd;&#x5b58;&#x6807;&#x5fd7;&#x5bc4;&#x5b58;&#x5668;&#x3002;"/>
</node>
<node CREATED="1412707948378" ID="ID_733132909" MODIFIED="1412707949031" TEXT="write_sequnlock_irq(lock)">
<node CREATED="1412707960172" ID="ID_157843414" MODIFIED="1412707960999" TEXT="&#x5199;&#x8005;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x91ca;&#x653e;&#x987a;&#x5e8f;&#x9501;lock&#xff0c;&#x4e0e;write_sequnlock&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x4f7f;&#x80fd;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#x3002;&#x5b83;&#x5fc5;&#x987b;&#x4e0e;write_seqlock_irq&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;"/>
</node>
<node CREATED="1412707890074" ID="ID_1740015799" MODIFIED="1412707891007" TEXT="write_seqlock_bh(lock)">
<node CREATED="1412707900707" ID="ID_885961168" MODIFIED="1412707902190" TEXT="&#x5199;&#x8005;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x83b7;&#x5f97;&#x987a;&#x5e8f;&#x9501;lock&#xff0c;&#x4e0e;write_seqlock&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x5931;&#x6548;&#x4e86;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;&#x3002;"/>
</node>
<node CREATED="1412707975314" ID="ID_1973880403" MODIFIED="1412707975963" TEXT="write_sequnlock_bh(lock)">
<node CREATED="1412707988116" ID="ID_339346926" MODIFIED="1412707988895" TEXT="&#x5199;&#x8005;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x8be5;&#x5b8f;&#x6765;&#x91ca;&#x653e;&#x987a;&#x5e8f;&#x9501;lock&#xff0c;&#x4e0e;write_sequnlock&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8be5;&#x5b8f;&#x540c;&#x65f6;&#x8fd8;&#x4f7f;&#x80fd;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;&#x3002;&#x5b83;&#x5fc5;&#x987b;&#x4e0e;write_seqlock_bh&#x914d;&#x5bf9;&#x4f7f;&#x7528;&#x3002;"/>
</node>
</node>
<node CREATED="1412707626522" ID="ID_1776759985" MODIFIED="1412707634986" TEXT="&#x5178;&#x578b;&#x7528;&#x6cd5;">
<node CREATED="1412707636450" ID="ID_1822042362" MODIFIED="1412707637616" TEXT="&#x5199;&#x8005;&#x4f7f;&#x7528;&#x987a;&#x5e8f;&#x9501;&#x7684;&#x6a21;&#x5f0f;&#x5982;&#x4e0b;&#xff1a;">
<node CREATED="1412707649786" ID="ID_340163683" MODIFIED="1412707656394">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      write_seqlock(&amp;seqlock_a);
    </p>
    <p>
      //&#20889;&#25805;&#20316;&#20195;&#30721;&#22359;
    </p>
    <p>
      &#8230;
    </p>
    <p>
      write_sequnlock(&amp;seqlock_a);
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412707787778" ID="ID_1490378215" MODIFIED="1412707788479" TEXT="&#x8bfb;&#x8005;&#x4f7f;&#x7528;&#x987a;&#x5e8f;&#x9501;&#x7684;&#x6a21;&#x5f0f;&#x5982;&#x4e0b;&#xff1a;">
<node CREATED="1412707798234" ID="ID_262863447" MODIFIED="1412707828487">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      do {
    </p>
    <p>
      &#160;&#160;&#160;seqnum = read_seqbegin(&amp;seqlock_a);
    </p>
    <p>
      //&#35835;&#25805;&#20316;&#20195;&#30721;&#22359;
    </p>
    <p>
      ...
    </p>
    <p>
      } while (read_seqretry(&amp;seqlock_a, seqnum));
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1412708174276" FOLDED="true" ID="ID_1155910066" MODIFIED="1412721238473" TEXT="seqcount">
<node CREATED="1412708187284" ID="ID_502084424" MODIFIED="1412708190713" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1412708191618" ID="ID_1652260795" MODIFIED="1412708192674" TEXT="&#x5982;&#x679c;&#x5199;&#x8005;&#x5728;&#x64cd;&#x4f5c;&#x88ab;&#x987a;&#x5e8f;&#x9501;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x65f6;&#x5df2;&#x7ecf;&#x4fdd;&#x6301;&#x4e86;&#x4e92;&#x65a5;&#x9501;&#x4fdd;&#x62a4;&#x5bf9;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7684;&#x5199;&#x64cd;&#x4f5c;&#xff0c;&#x5373;&#x5199;&#x8005;&#x4e0e;&#x5199;&#x8005;&#x4e4b;&#x95f4;&#x5df2;&#x7ecf;&#x662f;&#x4e92;&#x65a5;&#x7684;&#xff0c;&#x4f46;&#x8bfb;&#x8005;&#x4ecd;&#x7136;&#x53ef;&#x4ee5;&#x4e0e;&#x5199;&#x8005;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4ec5;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#xff08;seqcount&#xff09;&#xff0c;&#x800c;&#x4e0d;&#x5fc5;&#x8981;spinlock&#x3002;"/>
<node CREATED="1412708439923" ID="ID_1785990263" MODIFIED="1412708441871" TEXT="&#x9700;&#x8981;&#x7279;&#x522b;&#x63d0;&#x9192;&#xff0c;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x7684;&#x4f7f;&#x7528;&#x5fc5;&#x987b;&#x975e;&#x5e38;&#x8c28;&#x614e;&#xff0c;&#x53ea;&#x6709;&#x786e;&#x5b9a;&#x5728;&#x8bbf;&#x95ee;&#x5171;&#x4eab;&#x6570;&#x636e;&#x65f6;&#x5df2;&#x7ecf;&#x4fdd;&#x6301;&#x4e86;&#x4e92;&#x65a5;&#x9501;&#x624d;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x3002;"/>
</node>
<node CREATED="1412708196226" FOLDED="true" ID="ID_902595173" MODIFIED="1412708456246" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1412708199956" ID="ID_929154561" MODIFIED="1412708201751" TEXT="API">
<node CREATED="1412708211045" FOLDED="true" ID="ID_1289347495" MODIFIED="1412708450973" TEXT="unsigned read_seqcount_begin(const seqcount_t *s);">
<node CREATED="1412708224610" ID="ID_1817094256" MODIFIED="1412708225290" TEXT="&#x8bfb;&#x8005;&#x5728;&#x5bf9;&#x88ab;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x8bfb;&#x8bbf;&#x95ee;&#x524d;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x83b7;&#x5f97;&#x5f53;&#x524d;&#x7684;&#x987a;&#x5e8f;&#x53f7;&#x3002;"/>
</node>
<node CREATED="1412708234331" FOLDED="true" ID="ID_17180771" MODIFIED="1412708451941" TEXT="int read_seqcount_retry(const seqcount_t *s, unsigned iv);">
<node CREATED="1412708247443" ID="ID_528195657" MODIFIED="1412708248399" TEXT="&#x8bfb;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5b8c;&#x88ab;&#x987a;&#x5e8f;&#x8ba1;&#x6570;s&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x540e;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x68c0;&#x67e5;&#xff0c;&#x5728;&#x8bfb;&#x8bbf;&#x95ee;&#x671f;&#x95f4;&#x662f;&#x5426;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x4e86;&#x8be5;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x5982;&#x679c;&#x662f;&#xff0c;&#x8bfb;&#x8005;&#x5c31;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8fdb;&#x884c;&#x8bfb;&#x64cd;&#x4f5c;&#xff0c;&#x5426;&#x5219;&#xff0c;&#x8bfb;&#x8005;&#x6210;&#x529f;&#x5b8c;&#x6210;&#x4e86;&#x8bfb;&#x64cd;&#x4f5c;&#x3002;"/>
</node>
<node CREATED="1412708322266" FOLDED="true" ID="ID_225437618" MODIFIED="1412708452734" TEXT="void write_seqcount_begin(seqcount_t *s);">
<node CREATED="1412708338419" ID="ID_1466912372" MODIFIED="1412708340659" TEXT="&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x88ab;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x524d;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x5bf9;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x7684;&#x987a;&#x5e8f;&#x53f7;&#x52a0;1&#xff0c;&#x4ee5;&#x4fbf;&#x8bfb;&#x8005;&#x80fd;&#x591f;&#x68c0;&#x67e5;&#x51fa;&#x662f;&#x5426;&#x5728;&#x8bfb;&#x671f;&#x95f4;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x8fc7;&#x3002;"/>
</node>
<node CREATED="1412708351388" FOLDED="true" ID="ID_1300937794" MODIFIED="1412708453398" TEXT="void write_seqcount_end(seqcount_t *s);">
<node CREATED="1412708366499" ID="ID_706658092" MODIFIED="1412708368635" TEXT="&#x5199;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x5b8c;&#x88ab;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x540e;&#x9700;&#x8981;&#x8c03;&#x7528;&#x8be5;&#x51fd;&#x6570;&#x6765;&#x5bf9;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x7684;&#x987a;&#x5e8f;&#x53f7;&#x52a0;1&#xff0c;&#x4ee5;&#x4fbf;&#x8bfb;&#x8005;&#x80fd;&#x591f;&#x68c0;&#x67e5;&#x51fa;&#x662f;&#x5426;&#x5728;&#x8bfb;&#x671f;&#x95f4;&#x6709;&#x5199;&#x8005;&#x8bbf;&#x95ee;&#x8fc7;&#x3002;"/>
</node>
</node>
<node CREATED="1412708274132" ID="ID_1216567835" MODIFIED="1412708282822" TEXT="&#x5178;&#x578b;&#x7528;&#x6cd5;">
<node CREATED="1412708283891" ID="ID_1329271059" MODIFIED="1412708284708" TEXT="&#x8bfb;&#x8005;&#x4f7f;&#x7528;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x7684;&#x6a21;&#x5f0f;&#x5982;&#x4e0b;&#xff1a;">
<node CREATED="1412708295220" ID="ID_1289307932" MODIFIED="1412708312897">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      do {
    </p>
    <p>
      &#160;&#160;&#160;seqnum = read_seqbegin_count(&amp;seqcount_a);
    </p>
    <p>
      //&#35835;&#25805;&#20316;&#20195;&#30721;&#22359;
    </p>
    <p>
      ...
    </p>
    <p>
      } while (read_seqretry(&amp;seqcount_a, seqnum));
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412708381476" ID="ID_945127953" MODIFIED="1412708383394" TEXT="&#x5199;&#x8005;&#x4f7f;&#x7528;&#x987a;&#x5e8f;&#x8ba1;&#x6570;&#x7684;&#x6a21;&#x5f0f;&#x4e3a;&#xff1a;">
<node CREATED="1412708395076" ID="ID_1823915168" MODIFIED="1412708402161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      write_seqcount_begin(&amp;seqcount_a);
    </p>
    <p>
      //&#20889;&#25805;&#20316;&#20195;&#30721;&#22359;
    </p>
    <p>
      &#8230;
    </p>
    <p>
      write_seqcount_end(&amp;seqcount_a);
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1412722717854" FOLDED="true" ID="ID_1123341680" MODIFIED="1412723108561" TEXT="completion">
<node CREATED="1412722738616" ID="ID_495125993" MODIFIED="1412722742789" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1412722743472" ID="ID_319498244" MODIFIED="1412722744395" TEXT="Completion&#x662f;&#x4e00;&#x79cd;&#x8f7b;&#x91cf;&#x7ea7;&#x7684;&#x673a;&#x5236;, &#x5b83;&#x5141;&#x8bb8;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x544a;&#x8bc9;&#x53e6;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x67d0;&#x4e2a;&#x5de5;&#x4f5c;&#x5df2;&#x7ecf;&#x5b8c;&#x6210;"/>
</node>
<node CREATED="1412722768200" ID="ID_108297043" MODIFIED="1412722772275" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1412722773382" FOLDED="true" ID="ID_1002213797" MODIFIED="1412723106729" TEXT="API">
<node CREATED="1412722776264" FOLDED="true" ID="ID_772097955" MODIFIED="1412723103242" TEXT="DECLARE_COMPLETION(struct completion *cmp);">
<node CREATED="1412722865392" ID="ID_1537847146" MODIFIED="1412722872718" TEXT="&#x9759;&#x6001;&#x521d;&#x59cb;&#x5316;&#x5b8c;&#x6210;&#x91cf;"/>
</node>
<node CREATED="1412722820431" FOLDED="true" ID="ID_483080307" MODIFIED="1412723103818" TEXT="init_completion(struct completion *cmp);">
<node CREATED="1412722865392" ID="ID_976124943" MODIFIED="1412722885238" TEXT="&#x52a8;&#x6001;&#x521d;&#x59cb;&#x5316;&#x5b8c;&#x6210;&#x91cf;"/>
</node>
<node CREATED="1412722906336" FOLDED="true" ID="ID_144060985" MODIFIED="1412723104353" TEXT="void wait_for_completion(struct completion *c);">
<node CREATED="1412722921984" ID="ID_351353204" MODIFIED="1412722922626" TEXT="&#x7b49;&#x5f85;completion&#x7684;&#x64cd;&#x4f5c;&#x53ef;&#x4ee5;&#x7528;"/>
</node>
<node CREATED="1412722938262" FOLDED="true" ID="ID_656287732" MODIFIED="1412723104921" TEXT="void complete(struct completion *c);">
<node CREATED="1412722970678" ID="ID_761833891" MODIFIED="1412722971410" TEXT="&#x5524;&#x9192;&#x4e00;&#x4e2a;&#x7b49;&#x5f85;&#x7ebf;&#x7a0b;"/>
</node>
<node CREATED="1412722950384" FOLDED="true" ID="ID_1057992093" MODIFIED="1412723105673" TEXT="void complete_all(struct completion *c);">
<node CREATED="1412722984384" ID="ID_912405869" MODIFIED="1412722985166" TEXT="&#x5524;&#x9192;&#x6240;&#x6709;&#x7b49;&#x5f85;&#x7ebf;&#x7a0b;"/>
</node>
</node>
<node CREATED="1412723007192" ID="ID_1587203821" MODIFIED="1412723012829" TEXT="&#x7528;&#x6cd5;">
<node CREATED="1412723013976" ID="ID_524572934" MODIFIED="1412723014997" TEXT="&#x4e00;&#x4e2a;completion&#x901a;&#x5e38;&#x662f;&#x4e00;&#x4e2a;&#x5355;&#x6b21;(one-shot)&#x8bbe;&#x5907;, &#x5b83;&#x53ea;&#x4f1a;&#x88ab;&#x4f7f;&#x7528;&#x4e00;&#x6b21;&#x7136;&#x540e;&#x88ab;&#x4e22;&#x5f03;.&#x89e6;&#x53d1;&#x4e8b;&#x4ef6;&#x660e;&#x786e;&#x65f6;, &#x5982;&#x679c;&#x6ca1;&#x6709;&#x4f7f;&#x7528;complete_all, &#x53ef;&#x4ee5;&#x91cd;&#x590d;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;completion&#x7ed3;&#x6784;.&#x5982;&#x679c;&#x4f7f;&#x7528;&#x4e86;complete_all, &#x5219;&#x5fc5;&#x987b;&#x5728;&#x91cd;&#x590d;&#x4f7f;&#x7528;&#x8be5;&#x7ed3;&#x6784;&#x4e4b;&#x524d;&#x91cd;&#x65b0;&#x521d;&#x59cb;&#x5316;&#x5b83;."/>
</node>
</node>
</node>
<node CREATED="1412727818712" FOLDED="true" ID="ID_1427861084" MODIFIED="1412796273337" TEXT="&#x6587;&#x4ef6;&#x9501;(flock)">
<node CREATED="1412727887504" ID="ID_437083948" MODIFIED="1412727891636" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1412727898521" ID="ID_598468962" MODIFIED="1412727899789" TEXT="&#x5728;&#x591a;&#x4efb;&#x52a1;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x73af;&#x5883;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x5c1d;&#x8bd5;&#x5bf9;&#x6b63;&#x5728;&#x88ab;&#x5176;&#x4ed6;&#x8fdb;&#x7a0b;&#x8bfb;&#x53d6;&#x7684;&#x6587;&#x4ef6;&#x8fdb;&#x884c;&#x5199;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x5bfc;&#x81f4;&#x6b63;&#x5728;&#x8fdb;&#x884c;&#x8bfb;&#x64cd;&#x4f5c;&#x7684;&#x8fdb;&#x7a0b;&#x8bfb;&#x53d6;&#x5230;&#x4e00;&#x4e9b;&#x88ab;&#x7834;&#x574f;&#x6216;&#x8005;&#x4e0d;&#x5b8c;&#x6574;&#x7684;&#x6570;&#x636e;&#xff1b;&#x5982;&#x679c;&#x4e24;&#x4e2a;&#x8fdb;&#x7a0b;&#x5e76;&#x53d1;&#x5bf9;&#x540c;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x8fdb;&#x884c;&#x5199;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x5bfc;&#x81f4;&#x8be5;&#x6587;&#x4ef6;&#x906d;&#x5230;&#x7834;&#x574f;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x4e3a;&#x4e86;&#x907f;&#x514d;&#x53d1;&#x751f;&#x8fd9;&#x79cd;&#x95ee;&#x9898;&#xff0c;&#x5fc5;&#x987b;&#x8981;&#x91c7;&#x7528;&#x67d0;&#x79cd;&#x673a;&#x5236;&#x6765;&#x89e3;&#x51b3;&#x591a;&#x4e2a;&#x8fdb;&#x7a0b;&#x5e76;&#x53d1;&#x8bbf;&#x95ee;&#x540c;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x65f6;&#x6240;&#x9762;&#x4e34;&#x7684;&#x540c;&#x6b65;&#x95ee;&#x9898;&#xff0c;&#x7531;&#x6b64;&#x800c;&#x4ea7;&#x751f;&#x4e86;&#x6587;&#x4ef6;&#x52a0;&#x9501;&#x65b9;&#x9762;&#x7684;&#x6280;&#x672f;&#x3002;"/>
<node CREATED="1412727958937" ID="ID_1320952391" MODIFIED="1412728047738" TEXT="&#x6587;&#x4ef6;&#x9501;&#x652f;&#x6301;&#x5bf9;&#x6587;&#x4ef6;&#x7684;&#x90e8;&#x5206;&#x8fdb;&#x884c;&#x4e0a;&#x9501;, &#xa;&#x53ef;&#x4ee5;&#x5bf9;&#x6574;&#x4e2a;&#x6587;&#x4ef6;&#x4e0a;&#x9501;, &#x53ef;&#x4ee5;&#x5bf9;&#x6587;&#x4ef6;&#x7684;&#x67d0;&#x4e00;&#x90e8;&#x5206;&#x4e0a;&#x9501;, &#x4e5f;&#x53ef;&#x4ee5;&#x5bf9;&#x6587;&#x4ef6;&#x7684;&#x591a;&#x4e2a;&#x90e8;&#x5206;&#x4e0a;&#x9501;"/>
<node CREATED="1412728082128" ID="ID_813825048" MODIFIED="1412728321279">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <table style="border-left-style: solid; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-width: 0; border-right-width: 0; width: 80%; border-top-width: 0; border-bottom-width: 0" border="0">
      <tr>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-top: 1; margin-left: 1; text-align: center; margin-right: 1">
            
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: right; margin-right: 1">
            &#26159;&#21542;&#28385;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: left; margin-right: 1">
            &#36275;&#35831;&#27714;
          </p>
        </td>
      </tr>
      <tr>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#24403;&#21069;&#21152;&#19978;&#30340;&#38145;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#35835;&#38145;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#20889;&#38145;
          </p>
        </td>
      </tr>
      <tr>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#26080;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#26159;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#26159;
          </p>
        </td>
      </tr>
      <tr>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#35835;&#38145;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#26159;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#21542;
          </p>
        </td>
      </tr>
      <tr>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#20889;&#38145;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#21542;
          </p>
        </td>
        <td style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-bottom-style: solid; border-left-width: 1; border-right-width: 1; width: 33%; border-top-width: 1; border-bottom-width: 1" valign="top">
          <p style="margin-bottom: 1; margin-left: 1; margin-top: 1; text-align: center; margin-right: 1">
            &#21542;
          </p>
        </td>
      </tr>
    </table>
  </body>
</html></richcontent>
</node>
<node CREATED="1412730361256" ID="ID_128887669" MODIFIED="1412730371108" TEXT="&#x6587;&#x4ef6;&#x9501;&#x7c7b;&#x578b;">
<node CREATED="1412730371984" ID="ID_1021810462" MODIFIED="1412730387088" TEXT="&#x529d;&#x544a;&#x9501;(Advisory Locking)">
<node CREATED="1412730420954" ID="ID_1997072405" MODIFIED="1412730426714" TEXT="&#x529d;&#x544a;&#x9501;&#x662f;&#x4e00;&#x79cd;&#x534f;&#x540c;&#x5de5;&#x4f5c;&#x7684;&#x9501;&#x3002;&#x5bf9;&#x4e8e;&#x8fd9;&#x4e00;&#x79cd;&#x9501;&#x6765;&#x8bf4;&#xff0c;&#x5185;&#x6838;&#x53ea;&#x63d0;&#x4f9b;&#x52a0;&#x9501;&#x4ee5;&#x53ca;&#x68c0;&#x6d4b;&#x6587;&#x4ef6;&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x52a0;&#x9501;&#x7684;&#x624b;&#x6bb5;&#xff0c;&#x4f46;&#x662f;&#x5185;&#x6838;&#x5e76;&#x4e0d;&#x53c2;&#x4e0e;&#x9501;&#x7684;&#x63a7;&#x5236;&#x548c;&#x534f;&#x8c03;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x5982;&#x679c;&#x6709;&#x8fdb;&#x7a0b;&#x4e0d;&#x9075;&#x5b88;&#x201c;&#x6e38;&#x620f;&#x89c4;&#x5219;&#x201d;&#xff0c;&#x4e0d;&#x68c0;&#x67e5;&#x76ee;&#x6807;&#x6587;&#x4ef6;&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x7531;&#x522b;&#x7684;&#x8fdb;&#x7a0b;&#x52a0;&#x4e86;&#x9501;&#x5c31;&#x5f80;&#x5176;&#x4e2d;&#x5199;&#x5165;&#x6570;&#x636e;&#xff0c;&#x90a3;&#x4e48;&#x5185;&#x6838;&#x662f;&#x4e0d;&#x4f1a;&#x52a0;&#x4ee5;&#x963b;&#x62e6;&#x7684;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x529d;&#x544a;&#x9501;&#x5e76;&#x4e0d;&#x80fd;&#x963b;&#x6b62;&#x8fdb;&#x7a0b;&#x5bf9;&#x6587;&#x4ef6;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x800c;&#x53ea;&#x80fd;&#x4f9d;&#x9760;&#x5404;&#x4e2a;&#x8fdb;&#x7a0b;&#x5728;&#x8bbf;&#x95ee;&#x6587;&#x4ef6;&#x4e4b;&#x524d;&#x68c0;&#x67e5;&#x8be5;&#x6587;&#x4ef6;&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x88ab;&#x5176;&#x4ed6;&#x8fdb;&#x7a0b;&#x52a0;&#x9501;&#x6765;&#x5b9e;&#x73b0;&#x5e76;&#x53d1;&#x63a7;&#x5236;&#x3002;&#x8fdb;&#x7a0b;&#x9700;&#x8981;&#x4e8b;&#x5148;&#x5bf9;&#x9501;&#x7684;&#x72b6;&#x6001;&#x505a;&#x4e00;&#x4e2a;&#x7ea6;&#x5b9a;&#xff0c;&#x5e76;&#x6839;&#x636e;&#x9501;&#x7684;&#x5f53;&#x524d;&#x72b6;&#x6001;&#x548c;&#x76f8;&#x4e92;&#x5173;&#x7cfb;&#x6765;&#x786e;&#x5b9a;&#x5176;&#x4ed6;&#x8fdb;&#x7a0b;&#x662f;&#x5426;&#x80fd;&#x5bf9;&#x6587;&#x4ef6;&#x6267;&#x884c;&#x6307;&#x5b9a;&#x7684;&#x64cd;&#x4f5c;&#x3002;&#x4ece;&#x8fd9;&#x70b9;&#x4e0a;&#x6765;&#x8bf4;&#xff0c;&#x529d;&#x544a;&#x9501;&#x7684;&#x5de5;&#x4f5c;&#x65b9;&#x5f0f;&#x4e0e;&#x4f7f;&#x7528;&#x4fe1;&#x53f7;&#x91cf;&#x4fdd;&#x62a4;&#x4e34;&#x754c;&#x533a;&#x7684;&#x65b9;&#x5f0f;&#x975e;&#x5e38;&#x7c7b;&#x4f3c;&#x3002;">
<font NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1412730450410" ID="ID_340178832" MODIFIED="1412730461772" TEXT="&#x5f3a;&#x5236;&#x9501;(Mandatory Locking)">
<node CREATED="1412730492104" ID="ID_64785888" MODIFIED="1412730521883" TEXT="&#x4e0e;&#x529d;&#x544a;&#x9501;&#x4e0d;&#x540c;&#xff0c;&#x5f3a;&#x5236;&#x9501;&#x662f;&#x4e00;&#x79cd;&#x5185;&#x6838;&#x5f3a;&#x5236;&#x91c7;&#x7528;&#x7684;&#x6587;&#x4ef6;&#x9501;&#x3002;&#x6bcf;&#x5f53;&#x6709;&#x7cfb;&#x7edf;&#x8c03;&#x7528; open()&#x3001;read() &#x4ee5;&#x53ca;write() &#x53d1;&#x751f;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5185;&#x6838;&#x90fd;&#x8981;&#x68c0;&#x67e5;&#x5e76;&#x786e;&#x4fdd;&#x8fd9;&#x4e9b;&#x7cfb;&#x7edf;&#x8c03;&#x7528;&#x4e0d;&#x4f1a;&#x8fdd;&#x53cd;&#x5728;&#x6240;&#x8bbf;&#x95ee;&#x6587;&#x4ef6;&#x4e0a;&#x52a0;&#x7684;&#x5f3a;&#x5236;&#x9501;&#x7ea6;&#x675f;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x5982;&#x679c;&#x6709;&#x8fdb;&#x7a0b;&#x4e0d;&#x9075;&#x5b88;&#x6e38;&#x620f;&#x89c4;&#x5219;&#xff0c;&#x786c;&#x8981;&#x5f80;&#x52a0;&#x4e86;&#x9501;&#x7684;&#x6587;&#x4ef6;&#x4e2d;&#x5199;&#x5165;&#x5185;&#x5bb9;&#xff0c;&#x5185;&#x6838;&#x5c31;&#x4f1a;&#x52a0;&#x4ee5;&#x963b;&#x62e6;.&#xa;&#xa;&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x5df2;&#x7ecf;&#x88ab;&#x52a0;&#x4e0a;&#x4e86;&#x8bfb;&#x9501;&#x6216;&#x8005;&#x5171;&#x4eab;&#x9501;&#xff0c;&#x90a3;&#x4e48;&#x5176;&#x4ed6;&#x8fdb;&#x7a0b;&#x518d;&#x5bf9;&#x8fd9;&#x4e2a;&#x6587;&#x4ef6;&#x8fdb;&#x884c;&#x5199;&#x64cd;&#x4f5c;&#x5c31;&#x4f1a;&#x88ab;&#x5185;&#x6838;&#x963b;&#x6b62;&#xff1b;&#xa;&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x5df2;&#x7ecf;&#x88ab;&#x52a0;&#x4e0a;&#x4e86;&#x5199;&#x9501;&#x6216;&#x8005;&#x6392;&#x4ed6;&#x9501;&#xff0c;&#x90a3;&#x4e48;&#x5176;&#x4ed6;&#x8fdb;&#x7a0b;&#x518d;&#x5bf9;&#x8fd9;&#x4e2a;&#x6587;&#x4ef6;&#x8fdb;&#x884c;&#x8bfb;&#x53d6;&#x6216;&#x8005;&#x5199;&#x64cd;&#x4f5c;&#x5c31;&#x4f1a;&#x88ab;&#x5185;&#x6838;&#x963b;&#x6b62;"/>
<node CREATED="1412730566608" ID="ID_120819232" LINK="#ID_1766818470" MODIFIED="1412796262498" TEXT="&#x5171;&#x4eab;&#x9501;&#xff08;share&#xff09;"/>
<node CREATED="1412730569353" ID="ID_834067265" LINK="#ID_464966553" MODIFIED="1412796083846" TEXT="&#x79df;&#x501f;&#x9501;&#xff08;lease&#xff09;">
<node CREATED="1412795654706" ID="ID_1954542887" MODIFIED="1412795656905" TEXT="&#x5f53;&#x8fdb;&#x7a0b;&#x5c1d;&#x8bd5;&#x6253;&#x5f00;&#x4e00;&#x4e2a;&#x88ab;&#x79df;&#x501f;&#x9501;&#x4fdd;&#x62a4;&#x7684;&#x6587;&#x4ef6;&#x65f6;&#xff0c;&#x8be5;&#x8fdb;&#x7a0b;&#x4f1a;&#x88ab;&#x963b;&#x585e;&#xff0c;&#x540c;&#x65f6;&#xff0c;&#x5728;&#x4e00;&#x5b9a;&#x65f6;&#x95f4;&#x5185;&#x62e5;&#x6709;&#x8be5;&#x6587;&#x4ef6;&#x79df;&#x501f;&#x9501;&#x7684;&#x8fdb;&#x7a0b;&#x4f1a;&#x6536;&#x5230;&#x4e00;&#x4e2a;&#x4fe1;&#x53f7;&#x3002;&#x6536;&#x5230;&#x4fe1;&#x53f7;&#x4e4b;&#x540e;&#xff0c;&#x62e5;&#x6709;&#x8be5;&#x6587;&#x4ef6;&#x79df;&#x501f;&#x9501;&#x7684;&#x8fdb;&#x7a0b;&#x4f1a;&#x9996;&#x5148;&#x66f4;&#x65b0;&#x6587;&#x4ef6;&#xff0c;&#x4ece;&#x800c;&#x4fdd;&#x8bc1;&#x4e86;&#x6587;&#x4ef6;&#x5185;&#x5bb9;&#x7684;&#x4e00;&#x81f4;&#x6027;&#xff0c;&#x63a5;&#x7740;&#xff0c;&#x8be5;&#x8fdb;&#x7a0b;&#x91ca;&#x653e;&#x8fd9;&#x4e2a;&#x79df;&#x501f;&#x9501;&#x3002;&#x5982;&#x679c;&#x62e5;&#x6709;&#x79df;&#x501f;&#x9501;&#x7684;&#x8fdb;&#x7a0b;&#x5728;&#x4e00;&#x5b9a;&#x7684;&#x65f6;&#x95f4;&#x95f4;&#x9694;&#x5185;&#x6ca1;&#x6709;&#x5b8c;&#x6210;&#x5de5;&#x4f5c;&#xff0c;&#x5185;&#x6838;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;&#x5220;&#x9664;&#x8fd9;&#x4e2a;&#x79df;&#x501f;&#x9501;&#x6216;&#x8005;&#x5c06;&#x8be5;&#x9501;&#x8fdb;&#x884c;&#x964d;&#x7ea7;&#xff0c;&#x4ece;&#x800c;&#x5141;&#x8bb8;&#x88ab;&#x963b;&#x585e;&#x7684;&#x8fdb;&#x7a0b;&#x7ee7;&#x7eed;&#x5de5;&#x4f5c;&#x3002;"/>
<node CREATED="1412795676434" ID="ID_1443909457" MODIFIED="1412795734693" TEXT="&#x7cfb;&#x7edf;&#x9ed8;&#x8ba4;&#x7684;&#x79df;&#x501f;&#x65f6;&#x95f4;&#x662f; 45 &#x79d2;&#x949f;.&#x8fd9;&#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x4fee;&#x6539; /proc/sys/fs/lease-break-time &#x8fdb;&#x884c;&#x8c03;&#x8282;.&#xa;&#xff08;&#x5f53;&#x7136;&#xff0c;/proc/sys/fs/leases-enable &#x5fc5;&#x987b;&#x4e3a; 1 &#x624d;&#x884c;&#xff09;"/>
<node CREATED="1412796067955" ID="ID_1284306371" MODIFIED="1412796069995" TEXT="&#x79df;&#x501f;&#x9501;&#x4e5f;&#x53ea;&#x80fd;&#x5bf9;&#x6574;&#x4e2a;&#x6587;&#x4ef6;&#x751f;&#x6548;&#xff0c;&#x800c;&#x65e0;&#x6cd5;&#x5b9e;&#x73b0;&#x8bb0;&#x5f55;&#x7ea7;&#x7684;&#x52a0;&#x9501;"/>
</node>
</node>
<node CREATED="1412730665906" ID="ID_131837859" MODIFIED="1412730734012" TEXT="&#x8c03;&#x7528;fcntl&#x52a0;&#x7684;&#x662f;&#x529d;&#x544a;&#x9501;&#x8fd8;&#x662f;&#x5f3a;&#x5236;&#x9501;&#x53d6;&#x51b3;&#x4e8e;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x7684;&#x7c7b;&#x578b;&#x7684;&#x6587;&#x4ef6;&#x672c;&#x8eab;&#x7684;&#x6743;&#x9650;">
<node CREATED="1412730745738" ID="ID_979827957" MODIFIED="1412730763736" TEXT="&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#x52a0;&#x7684;&#x662f;&#x529d;&#x544a;&#x9501;"/>
<node CREATED="1412730788026" FOLDED="true" ID="ID_1316265098" MODIFIED="1412730967755" TEXT="&#x82e5;&#x8981;&#x52a0;&#x5f3a;&#x5236;&#x9501;, &#x5219;&#x987b;">
<node CREATED="1412730850672" ID="ID_1047983432" MODIFIED="1412730852856" TEXT="&#x4f7f;&#x7528; -o mand &#x9009;&#x9879;&#x6765;&#x6302;&#x8f7d;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x3002;&#x8fd9;&#x6837;&#x5728;&#x6267;&#x884c; mount() &#x7cfb;&#x7edf;&#x8c03;&#x7528;&#x65f6;&#xff0c;&#x4f1a;&#x4f20;&#x5165; MS_MANDLOCK &#x6807;&#x8bb0;&#xff0c;&#x4ece;&#x800c;&#x5c06; super_block &#x7ed3;&#x6784;&#x4e2d;&#x7684; s_flags &#x8bbe;&#x7f6e;&#x4e3a; 1&#xff0c;&#x7528;&#x6765;&#x8868;&#x793a;&#x5728;&#x8fd9;&#x4e2a;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x4e0a;&#x53ef;&#x4ee5;&#x91c7;&#x7528;&#x5f3a;&#x5236;&#x9501;&#x3002;&#x4f8b;&#x5982;&#xff1a;">
<node CREATED="1412730886738" ID="ID_1532572178" MODIFIED="1412730893078">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      # mount -o mand /dev/sdb7 /mnt
    </p>
    <p>
      # mount | grep mnt
    </p>
    <p>
      /dev/sdb7 on /mnt type ext3 (rw,mand)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412730912968" ID="ID_513316267" MODIFIED="1412730919320">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20462;&#25913;&#35201;&#21152;&#24378;&#21046;&#38145;&#30340;&#25991;&#20214;&#30340;&#26435;&#38480;&#65306;&#35774;&#32622; SGID &#20301;&#65292;&#24182;&#28165;&#38500;&#32452;&#21487;&#25191;&#34892;&#20301;
    </p>
  </body>
</html></richcontent>
<node CREATED="1412730938722" ID="ID_1295989580" MODIFIED="1412730944606">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      # touch /mnt/testfile
    </p>
    <p>
      # ls -l /mnt/testfile
    </p>
    <p>
      -rw-r--r-- 1 root root 0 Jun 22 14:43 /mnt/testfile
    </p>
    <p>
      # chmod g+s /mnt/testfile&#160;
    </p>
    <p>
      # chmod g-x /mnt/testfile
    </p>
    <p>
      # ls -l /mnt/testfile&#160;&#160;&#160;
    </p>
    <p>
      -rw-r-Sr-- 1 root root 0 Jun 22 14:43 /mnt/testfile
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1412730959696" ID="ID_966127755" MODIFIED="1412730961684" TEXT="&#x4f7f;&#x7528; fcntl() &#x7cfb;&#x7edf;&#x8c03;&#x7528;&#x5bf9;&#x8be5;&#x6587;&#x4ef6;&#x8fdb;&#x884c;&#x52a0;&#x9501;&#x6216;&#x89e3;&#x9501;&#x64cd;&#x4f5c;"/>
</node>
</node>
</node>
</node>
<node CREATED="1412727828448" ID="ID_598784144" MODIFIED="1412727831941" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1412727832879" ID="ID_1665385599" MODIFIED="1412727834915" TEXT="API">
<node CREATED="1412728362562" FOLDED="true" ID="ID_1766818470" MODIFIED="1412796102479">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20849;&#20139;&#27169;&#24335;&#24378;&#21046;&#38145;
    </p>
    <p>
      int fcntl (int fd, int cmd, struct flock *lock);
    </p>
  </body>
</html></richcontent>
<node CREATED="1412728385111" ID="ID_1759797598" MODIFIED="1412728447405" TEXT="cmd">
<node CREATED="1412728459984" ID="ID_734077539" MODIFIED="1412728462006" TEXT="F_GETLK"/>
<node CREATED="1412728471752" ID="ID_283329362" MODIFIED="1412728474031" TEXT="F_SETLK"/>
<node CREATED="1412728485897" ID="ID_577190902" MODIFIED="1412728487834" TEXT="F_SETLKW"/>
</node>
<node CREATED="1412728386416" ID="ID_1953212903" MODIFIED="1412728427460">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct flock
    </p>
  </body>
</html></richcontent>
<node CREATED="1412728387921" FOLDED="true" ID="ID_1034652382" MODIFIED="1412728905107">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct flock {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;...
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;short l_type;&#160;&#160;&#160;&#160;/* Type of lock: F_RDLCK,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;F_WRLCK, F_UNLCK */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;short l_whence;&#160;&#160;/* How to interpret l_start:
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SEEK_SET, SEEK_CUR, SEEK_END */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;off_t l_start;&#160;&#160;&#160;/* Starting offset for lock */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;off_t l_len;&#160;&#160;&#160;&#160;&#160;/* Number of bytes to lock */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pid_t l_pid;&#160;&#160;&#160;&#160;&#160;/* PID of process blocking our lock
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(F_GETLK only) */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;...
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;};
    </p>
  </body>
</html></richcontent>
<node CREATED="1412728513689" ID="ID_1998722571" MODIFIED="1412728516341" TEXT="l_type">
<node CREATED="1412728527704" ID="ID_775707820" MODIFIED="1412728529975" TEXT="F_RDLCK">
<node CREATED="1412728531264" ID="ID_111926797" MODIFIED="1412728535136" TEXT="&#x8bfb;&#x9501;"/>
</node>
<node CREATED="1412728547697" ID="ID_45866703" MODIFIED="1412728549630" TEXT="F_WRLCK">
<node CREATED="1412728551481" ID="ID_666683900" MODIFIED="1412728555655" TEXT="&#x5199;&#x9501;"/>
</node>
<node CREATED="1412728568632" ID="ID_1222313378" MODIFIED="1412728569576" TEXT="F_UNLCK">
<node CREATED="1412728570303" ID="ID_1178846872" MODIFIED="1412728573934" TEXT="&#x89e3;&#x9501;"/>
</node>
</node>
<node CREATED="1412728603231" ID="ID_1022294143" MODIFIED="1412728603852" TEXT="l_pid">
<node CREATED="1412728613808" ID="ID_511057947" MODIFIED="1412728614356" TEXT="&#x6307;&#x660e;&#x4e86;&#x8be5;&#x9501;&#x7684;&#x62e5;&#x6709;&#x8005;"/>
</node>
<node CREATED="1412728639936" ID="ID_1603882936" MODIFIED="1412728640948" TEXT="l_whence&#x3001;l_start &#x548c;l_end &#x8fd9;&#x4e9b;&#x5b57;&#x6bb5;&#x6307;&#x660e;&#x4e86;&#x8fdb;&#x7a0b;&#x9700;&#x8981;&#x5bf9;&#x6587;&#x4ef6;&#x7684;&#x54ea;&#x4e2a;&#x533a;&#x57df;&#x8fdb;&#x884c;&#x52a0;&#x9501;&#xff0c;&#x8fd9;&#x4e2a;&#x533a;&#x57df;&#x662f;&#x4e00;&#x4e2a;&#x8fde;&#x7eed;&#x7684;&#x5b57;&#x8282;&#x96c6;&#x5408;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x8fdb;&#x7a0b;&#x53ef;&#x4ee5;&#x5bf9;&#x540c;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x7684;&#x4e0d;&#x540c;&#x90e8;&#x5206;&#x52a0;&#x4e0d;&#x540c;&#x7684;&#x9501;"/>
<node CREATED="1412728657633" ID="ID_440792617" MODIFIED="1412728842238">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      l_whence
    </p>
    <p>
      l_start&#30340;&#30456;&#23545;&#20301;&#32622;
    </p>
  </body>
</html></richcontent>
<node CREATED="1412728672297" ID="ID_543453165" MODIFIED="1412728706788" TEXT="SEEK_SET">
<node CREATED="1412728744328" ID="ID_1211092089" MODIFIED="1412728810371" TEXT="&#x76f8;&#x5bf9;&#x4e8e;&#x6587;&#x4ef6;&#x5934;"/>
</node>
<node CREATED="1412728672297" ID="ID_494925879" MODIFIED="1412728721879" TEXT="SEEK_CUR">
<node CREATED="1412728744328" ID="ID_577590738" MODIFIED="1412728813632" TEXT="&#x76f8;&#x5bf9;&#x4e8e;&#x5f53;&#x524d;&#x4f4d;&#x7f6e;"/>
</node>
<node CREATED="1412728672297" ID="ID_165960287" MODIFIED="1412728711776" TEXT="SEEK_END">
<node CREATED="1412728744328" ID="ID_832143188" MODIFIED="1412728816658" TEXT="&#x76f8;&#x5bf9;&#x4e8e;&#x6587;&#x4ef6;&#x5c3e;"/>
</node>
</node>
<node CREATED="1412728790047" ID="ID_149295031" MODIFIED="1412728790620" TEXT="l_start">
<node CREATED="1412728858055" ID="ID_255901288" MODIFIED="1412728880232" TEXT="&#x6587;&#x4ef6;&#x90e8;&#x5206;&#x52a0;&#x9501;&#x7684;&#x8d77;&#x59cb;&#x4f4d;&#x7f6e;"/>
</node>
<node CREATED="1412728791193" ID="ID_790147835" MODIFIED="1412728794320" TEXT="l_len">
<node CREATED="1412728858055" ID="ID_1739409789" MODIFIED="1412728897704" TEXT="&#x6587;&#x4ef6;&#x90e8;&#x5206;&#x52a0;&#x9501;&#x7684;&#x957f;&#x5ea6;"/>
</node>
</node>
</node>
</node>
<node CREATED="1412728362562" FOLDED="true" ID="ID_464966553" MODIFIED="1412796100271">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31199;&#20511;&#38145;
    </p>
    <p>
      int fcntl(int fd, int cmd, long arg);
    </p>
  </body>
</html></richcontent>
<node CREATED="1412728385111" ID="ID_333983004" MODIFIED="1412728447405" TEXT="cmd">
<node CREATED="1412728459984" ID="ID_1762400982" MODIFIED="1412795808904" TEXT="F_SETLEASE"/>
<node CREATED="1412728471752" FOLDED="true" ID="ID_1860260003" MODIFIED="1412796095534" TEXT="F_GETLEASE">
<node CREATED="1412795995572" ID="ID_817778173" MODIFIED="1412795997686" TEXT="&#x8868;&#x660e;&#x8c03;&#x7528;&#x8fdb;&#x7a0b;&#x62e5;&#x6709;&#x6587;&#x4ef6;&#x4e0a;&#x54ea;&#x79cd;&#x7c7b;&#x578b;&#x7684;&#x9501;&#xff0c;&#x8fd9;&#x9700;&#x8981;&#x901a;&#x8fc7;&#x8fd4;&#x56de;&#x503c;&#x6765;&#x786e;&#x5b9a;&#xff0c;&#x8fd4;&#x56de;&#x503c;&#x6709;&#x4e09;&#x79cd;&#xff1a;F_RDLCK&#x3001;F_WRLCK&#x548c;F_UNLCK&#xff0c;&#x5206;&#x522b;&#x8868;&#x660e;&#x8c03;&#x7528;&#x8fdb;&#x7a0b;&#x5bf9;&#x6587;&#x4ef6;&#x62e5;&#x6709;&#x8bfb;&#x79df;&#x501f;&#x3001;&#x5199;&#x79df;&#x501f;&#x6216;&#x8005;&#x6839;&#x672c;&#x6ca1;&#x6709;&#x79df;&#x501f;"/>
</node>
</node>
<node CREATED="1412728386416" ID="ID_1691052143" MODIFIED="1412795847714">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      arg
    </p>
  </body>
</html></richcontent>
<node CREATED="1412795871058" FOLDED="true" ID="ID_1943669740" MODIFIED="1412796096125" TEXT="F_RDLCK">
<node CREATED="1412795886643" ID="ID_771836307" MODIFIED="1412795888375" TEXT="&#x8bbe;&#x7f6e;&#x8bfb;&#x79df;&#x7ea6;&#x3002;&#x5f53;&#x6587;&#x4ef6;&#x88ab;&#x53e6;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x4ee5;&#x5199;&#x7684;&#x65b9;&#x5f0f;&#x6253;&#x5f00;&#x65f6;&#xff0c;&#x62e5;&#x6709;&#x8be5;&#x79df;&#x7ea6;&#x7684;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x4f1a;&#x6536;&#x5230;&#x901a;&#x77e5;"/>
</node>
<node CREATED="1412795897355" FOLDED="true" ID="ID_753895965" MODIFIED="1412796096750" TEXT="F_WRLCK">
<node CREATED="1412795918074" ID="ID_927951202" MODIFIED="1412795919891" TEXT="&#x8bbe;&#x7f6e;&#x5199;&#x79df;&#x7ea6;&#x3002;&#x5f53;&#x6587;&#x4ef6;&#x88ab;&#x53e6;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x4ee5;&#x8bfb;&#x6216;&#x8005;&#x5199;&#x7684;&#x65b9;&#x5f0f;&#x6253;&#x5f00;&#x65f6;&#xff0c;&#x62e5;&#x6709;&#x8be5;&#x79df;&#x7ea6;&#x7684;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x4f1a;&#x6536;&#x5230;&#x901a;&#x77e5;"/>
</node>
<node CREATED="1412795933212" FOLDED="true" ID="ID_136461505" MODIFIED="1412796097669" TEXT="F_UNLCK">
<node CREATED="1412795938083" ID="ID_926515241" MODIFIED="1412795946984" TEXT="&#x89e3;&#x9664;&#x79df;&#x7ea6;"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1417388066643" FOLDED="true" ID="ID_1344196046" MODIFIED="1417556241703" TEXT="Per-CPU Variables ">
<node CREATED="1417388121427" ID="ID_1577385540" MODIFIED="1417388130334" TEXT="&#x539f;&#x7406;">
<node CREATED="1417388137170" ID="ID_483409964" MODIFIED="1417388305366" TEXT="&#x4e00;&#x4e2a;percpu&#x53d8;&#x91cf;&#x5728;&#x6bcf;&#x4e2a;cpu&#x4e0a;&#x6709;&#x5404;&#x81ea;&#x7684;copy, &#x5b83;&#x7684;&#x597d;&#x5904;&#x662f;&#x6240;&#x6709;cpu&#x53ef;&#x4ee5;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x6b64;&#x53d8;&#x91cf;&#x800c;&#x65e0;&#x9700;&#x52a0;&#x9501;&#xff0c;&#x56e0;&#x4e3a;cpu&#x8bbf;&#x95ee;&#x7684;&#x662f;&#x5f53;&#x524d;cpu&#x6240;&#x5c5e;&#x7684;copy"/>
</node>
<node CREATED="1417388373575" ID="ID_1830581573" MODIFIED="1417388381397" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1417388383926" ID="ID_915206086" MODIFIED="1417388386396" TEXT="API">
<node CREATED="1417388424160" ID="ID_355626717" MODIFIED="1417388475583">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38745;&#24577;&#23450;&#20041;percpu&#21464;&#37327;&#65306;DEFINE_PER_CPU(type, name);&#160;
    </p>
  </body>
</html></richcontent>
<node CREATED="1417388511519" ID="ID_1412702987" MODIFIED="1417388537878" TEXT="type&#xff1a;&#x53d8;&#x91cf;&#x7c7b;&#x578b;&#xff0c;&#x6bd4;&#x5982;int"/>
<node CREATED="1417388538467" ID="ID_679604187" MODIFIED="1417388550142" TEXT="name&#xff1a;&#x53d8;&#x91cf;&#x540d;&#x79f0;"/>
</node>
<node CREATED="1417388567609" ID="ID_482305846" MODIFIED="1417388604057" TEXT="&#x9759;&#x6001;&#x5b9a;&#x4e49;percpu&#x53d8;&#x91cf;&#x6570;&#x7ec4;&#xff1a;DEFINE_PER_CPU(int[3], my_percpu_array);"/>
<node CREATED="1417388791953" ID="ID_1285849222" MODIFIED="1417388907652">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35775;&#38382;percpu&#21464;&#37327;&#30340;&#24403;&#21069;cpu&#23454;&#20363;&#65306;
    </p>
    <table cellspacing="0" width="100%" border="0" cellpadding="0">
      <tr>
        <td valign="top">
          <pre>get_cpu_var(sockets_in_use)++;
put_cpu_var(sockets_in_use</pre>
        </td>
      </tr>
    </table>
  </body>
</html></richcontent>
<node CREATED="1417388862894" ID="ID_876418124" MODIFIED="1417389018554" TEXT="&#x9996;&#x5148;&#x7528;get_cpu_var&#x83b7;&#x53d6;percpu&#x53d8;&#x91cf;&#x7684;&#x5f53;&#x524d;cpu&#x5b9e;&#x4f8b;&#xff0c;&#x83b7;&#x53d6;&#x4e4b;&#x540e;&#x53ef;&#x4ee5;&#x50cf;&#x6b63;&#x5e38;&#x7684;&#x53d8;&#x91cf;&#x4e00;&#x6837;&#x64cd;&#x4f5c;&#x5b83;&#xff0c;&#x6ce8;&#x610f;&#x8fd9;&#x4e00;&#x6b65;&#x4f1a;&#x7981;&#x6b62;&#x5f53;&#x524d;cpu&#x7684;&#x62a2;&#x5360;"/>
<node CREATED="1417389043970" ID="ID_1463611998" MODIFIED="1417389096963" TEXT="&#x8bbf;&#x95ee;&#x5b8c;&#x6210;&#x540e;&#x7528;put_cpu_var&#x89e3;&#x9664;&#x5f15;&#x7528;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x4f1a;&#x5f00;&#x542f;&#x5f53;&#x524d;cpu&#x7684;&#x62a2;&#x5360;"/>
</node>
<node CREATED="1417389151925" ID="ID_756905928" MODIFIED="1417389214190">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      per_cpu(variable, int cpu_id);
    </p>
    <p>
      &#35775;&#38382;percpu&#21464;&#37327;&#30340;&#25351;&#23450;cpu&#23454;&#20363;
    </p>
  </body>
</html></richcontent>
<node CREATED="1417389242781" ID="ID_1577076314" MODIFIED="1417389305017" TEXT="&#x6ce8;&#x610f;&#xff0c;&#x4e3a;&#x4e86;&#x907f;&#x514d;&#x7ade;&#x6001;&#xff0c;&#x8bbf;&#x95ee;&#x5176;&#x5b83;cpu&#x7684;&#x5b9e;&#x4f8b;&#x65f6;&#x9700;&#x8981;&#x9501;&#x4fdd;&#x62a4;"/>
</node>
<node CREATED="1417389347897" ID="ID_153265109" MODIFIED="1417389377834">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void *alloc_percpu(type);&#160;
    </p>
    <p>
      &#21160;&#24577;&#20998;&#37197;percpu&#21464;&#37327;
    </p>
  </body>
</html></richcontent>
<node CREATED="1417389457561" ID="ID_746457820" MODIFIED="1417389468476" TEXT="&#x6ce8;&#x610f;&#x8fd4;&#x56de;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x6307;&#x9488;"/>
</node>
<node CREATED="1417389441757" ID="ID_1929240008" MODIFIED="1417389504240">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      free_percpu
    </p>
    <p>
      &#37322;&#25918;&#21160;&#24577;&#20998;&#37197;&#30340;percpu&#21464;&#37327;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1417389526285" ID="ID_1371620092" MODIFIED="1417389561488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      per_cpu_ptr(void *per_cpu_var, int cpu_id);&#160;&#160;
    </p>
    <p>
      &#35775;&#38382;&#21160;&#24577;&#20998;&#37197;&#30340;percpu&#21464;&#37327;
    </p>
  </body>
</html></richcontent>
<node CREATED="1417389722553" ID="ID_1479919541" MODIFIED="1417389784625">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24819;&#22312;&#31105;&#27490;cpu&#25250;&#21344;&#30340;&#24773;&#20917;&#19979;&#35775;&#38382;percpu&#21464;&#37327;&#65292;&#21017;&#24212;&#29992;&#20197;&#19979;&#26041;&#24335;
    </p>
    <table cellspacing="0" width="100%" border="0" cellpadding="0">
      <tr>
        <td valign="top">
          <pre>int cpu;

cpu = get_cpu(  )
ptr = per_cpu_ptr(per_cpu_var, cpu);
/* work with ptr */
put_cpu(  );</pre>
          <br />
          
        </td>
      </tr>
    </table>
  </body>
</html></richcontent>
<node CREATED="1417389789459" ID="ID_1129685242" MODIFIED="1417389824663" TEXT="get_cpu&#x548c;put_cpu&#x5206;&#x522b;&#x7528;&#x4e8e;&#x7981;&#x6b62;&#x62a2;&#x5360;&#x548c;&#x5f00;&#x542f;&#x62a2;&#x5360;"/>
</node>
</node>
<node CREATED="1417389877261" ID="ID_411512531" MODIFIED="1417389910864">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <table cellspacing="0" width="100%" border="0" cellpadding="0">
      <tr>
        <td valign="top">
          <pre>EXPORT_PER_CPU_SYMBOL(per_cpu_var);
EXPORT_PER_CPU_SYMBOL_GPL(per_cpu_var);</pre>
        </td>
      </tr>
    </table>
    <p>
      &#23548;&#20986;percpu&#21464;&#37327;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1417389936768" ID="ID_1500900738" MODIFIED="1417389975653">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22768;&#26126;&#20294;&#19981;&#23450;&#20041;percpu&#21464;&#37327;
    </p>
    <table cellspacing="0" width="100%" border="0" cellpadding="0">
      <tr>
        <td valign="top">
          <pre>DECLARE_PER_CPU(type, name);</pre>
        </td>
      </tr>
    </table>
  </body>
</html></richcontent>
</node>
<node CREATED="1417390063728" ID="ID_915957004" MODIFIED="1417390083676" TEXT="&#x5b9a;&#x4e49;percpu&#x7684;&#x8ba1;&#x6570;&#x5668;&#x8bf7;&#x53c2;&#x8003;&lt;linux/percpu_counter.h&gt;"/>
</node>
</node>
</node>
<node CREATED="1366522949179" FOLDED="true" ID="ID_770888163" MODIFIED="1414014847788" TEXT="&#x7528;&#x9501;&#x6307;&#x5357;">
<node CREATED="1366558131016" ID="ID_1116563200" MODIFIED="1366558139006" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x53ea;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#x548c;&#x8f6f;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x5f53;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x65f6;&#xff0c;&#x53ef;&#x80fd;&#x88ab;&#x8f6f;&#x4e2d;&#x65ad;&#x6253;&#x65ad;&#xff0c;&#x4ece;&#x800c;&#x53ef;&#x80fd;&#x8fdb;&#x5165;&#x8f6f;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x6765;&#x5bf9;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8bbf;&#x95ee;&#xff0c;&#x56e0;&#x6b64;&#x5bf9;&#x4e8e;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#xff0c;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;&#x5fc5;&#x987b;&#x4f7f;&#x7528;spin_lock_bh&#x548c;spin_unlock_bh&#x6765;&#x4fdd;&#x62a4;"/>
<node CREATED="1366558153225" ID="ID_532955129" MODIFIED="1366558160407" TEXT="&#x5f53;&#x7136;&#x4f7f;&#x7528;spin_lock_irq&#x548c;spin_unlock_irq&#x4ee5;&#x53ca;spin_lock_irqsave&#x548c;spin_unlock_irqrestore&#x4e5f;&#x53ef;&#x4ee5;&#xff0c;&#x5b83;&#x4eec;&#x5931;&#x6548;&#x4e86;&#x672c;&#x5730;&#x786c;&#x4e2d;&#x65ad;&#xff0c;&#x5931;&#x6548;&#x786c;&#x4e2d;&#x65ad;&#x9690;&#x5f0f;&#x5730;&#x4e5f;&#x5931;&#x6548;&#x4e86;&#x8f6f;&#x4e2d;&#x65ad;&#x3002;&#x4f46;&#x662f;&#x4f7f;&#x7528;spin_lock_bh&#x548c;spin_unlock_bh&#x662f;&#x6700;&#x6070;&#x5f53;&#x7684;&#xff0c;&#x5b83;&#x6bd4;&#x5176;&#x4ed6;&#x4e24;&#x4e2a;&#x5feb;"/>
<node CREATED="1366558181049" ID="ID_855302785" MODIFIED="1366558191039" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x53ea;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x548c;tasklet&#x6216;timer&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#xa;&#x90a3;&#x4e48;&#x5e94;&#x8be5;&#x4f7f;&#x7528;&#x4e0e;&#x4e0a;&#x9762;&#x60c5;&#x51b5;&#x76f8;&#x540c;&#x7684;&#x83b7;&#x5f97;&#x548c;&#x91ca;&#x653e;&#x9501;&#x7684;&#x5b8f;&#xff0c;&#x56e0;&#x4e3a;tasklet&#x548c;timer&#x662f;&#x7528;&#x8f6f;&#x4e2d;&#x65ad;&#x5b9e;&#x73b0;&#x7684;"/>
<node CREATED="1366558306438" ID="ID_1839526848" MODIFIED="1366558342914" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x53ea;&#x5728;&#x4e00;&#x4e2a;tasklet&#x6216;timer&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x4e0d;&#x9700;&#x8981;&#x4efb;&#x4f55;&#x81ea;&#x65cb;&#x9501;&#x4fdd;&#x62a4;&#xff0c;&#x56e0;&#x4e3a;&#x540c;&#x4e00;&#x4e2a;tasklet&#x6216;timer&#x53ea;&#x80fd;&#x5728;&#x4e00;&#x4e2a;CPU&#x4e0a;&#x8fd0;&#x884c;&#xff0c;&#x5373;&#x4f7f;&#x662f;&#x5728;SMP&#x73af;&#x5883;&#x4e0b;&#x4e5f;&#x662f;&#x5982;&#x6b64;&#x3002;&#x5b9e;&#x9645;&#x4e0a;tasklet&#x5728;&#x8c03;&#x7528;tasklet_schedule&#x6807;&#x8bb0;&#x5176;&#x9700;&#x8981;&#x88ab;&#x8c03;&#x5ea6;&#x65f6;&#x5df2;&#x7ecf;&#x628a;&#x8be5;tasklet&#x7ed1;&#x5b9a;&#x5230;&#x5f53;&#x524d;CPU&#xff0c;&#x56e0;&#x6b64;&#x540c;&#x4e00;&#x4e2a;tasklet&#x51b3;&#x4e0d;&#x53ef;&#x80fd;&#x540c;&#x65f6;&#x5728;&#x5176;&#x4ed6;CPU&#x4e0a;&#x8fd0;&#x884c;&#xa;timer&#x4e5f;&#x662f;&#x5728;&#x5176;&#x88ab;&#x4f7f;&#x7528;add_timer&#x6dfb;&#x52a0;&#x5230;timer&#x961f;&#x5217;&#x4e2d;&#x65f6;&#x5df2;&#x7ecf;&#x88ab;&#x5e2e;&#x5b9a;&#x5230;&#x5f53;&#x524d;CPU&#xff0c;&#x6240;&#x4ee5;&#x540c;&#x4e00;&#x4e2a;timer&#x7edd;&#x4e0d;&#x53ef;&#x80fd;&#x8fd0;&#x884c;&#x5728;&#x5176;&#x4ed6;CPU&#x4e0a;&#x3002;&#x5f53;&#x7136;&#x540c;&#x4e00;&#x4e2a;tasklet&#x6709;&#x4e24;&#x4e2a;&#x5b9e;&#x4f8b;&#x540c;&#x65f6;&#x8fd0;&#x884c;&#x5728;&#x540c;&#x4e00;&#x4e2a;CPU&#x5c31;&#x66f4;&#x4e0d;&#x53ef;&#x80fd;&#x4e86;"/>
<node CREATED="1366558381901" ID="ID_546973697" MODIFIED="1366558388299" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x53ea;&#x5728;&#x4e24;&#x4e2a;&#x6216;&#x591a;&#x4e2a;tasklet&#x6216;timer&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;&#x4ec5;&#x9700;&#x8981;&#x7528;spin_lock&#x548c;spin_unlock&#x6765;&#x4fdd;&#x62a4;&#xff0c;&#x4e0d;&#x5fc5;&#x4f7f;&#x7528;_bh&#x7248;&#x672c;&#xff0c;&#x56e0;&#x4e3a;&#x5f53;tasklet&#x6216;timer&#x8fd0;&#x884c;&#x65f6;&#xff0c;&#x4e0d;&#x53ef;&#x80fd;&#x6709;&#x5176;&#x4ed6;tasklet&#x6216;timer&#x5728;&#x5f53;&#x524d;CPU&#x4e0a;&#x8fd0;&#x884c;"/>
<node CREATED="1366558414301" ID="ID_647582904" MODIFIED="1366558446156" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x53ea;&#x5728;&#x4e00;&#x4e2a;&#x8f6f;&#x4e2d;&#x65ad;&#xff08;tasklet&#x548c;timer&#x9664;&#x5916;&#xff09;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x9700;&#x8981;&#x7528;spin_lock&#x548c;spin_unlock&#x6765;&#x4fdd;&#x62a4;&#xff0c;&#x56e0;&#x4e3a;&#x540c;&#x6837;&#x7684;&#x8f6f;&#x4e2d;&#x65ad;&#x53ef;&#x4ee5;&#x540c;&#x65f6;&#x5728;&#x4e0d;&#x540c;&#x7684;CPU&#x4e0a;&#x8fd0;&#x884c;&#xa;&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x5728;&#x4e24;&#x4e2a;&#x6216;&#x591a;&#x4e2a;&#x8f6f;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x5f53;&#x7136;&#x66f4;&#x9700;&#x8981;&#x7528;spin_lock&#x548c;spin_unlock&#x6765;&#x4fdd;&#x62a4;&#xff0c;&#x4e0d;&#x540c;&#x7684;&#x8f6f;&#x4e2d;&#x65ad;&#x80fd;&#x591f;&#x540c;&#x65f6;&#x5728;&#x4e0d;&#x540c;&#x7684;CPU&#x4e0a;&#x8fd0;&#x884c;"/>
<node CREATED="1366558468414" ID="ID_1415544880" MODIFIED="1366558470261" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x5728;&#x8f6f;&#x4e2d;&#x65ad;&#xff08;&#x5305;&#x62ec;tasklet&#x548c;timer&#xff09;&#x6216;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x548c;&#x786c;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xff0c;&#x90a3;&#x4e48;&#x5728;&#x8f6f;&#x4e2d;&#x65ad;&#x6216;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#x671f;&#x95f4;&#xff0c;&#x53ef;&#x80fd;&#x88ab;&#x786c;&#x4e2d;&#x65ad;&#x6253;&#x65ad;&#xff0c;&#x4ece;&#x800c;&#x8fdb;&#x5165;&#x786c;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x5728;&#x8fdb;&#x7a0b;&#x6216;&#x8f6f;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x9700;&#x8981;&#x4f7f;&#x7528;spin_lock_irq&#x548c;spin_unlock_irq&#x6765;&#x4fdd;&#x62a4;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;"/>
<node CREATED="1366558518768" ID="ID_753723548" MODIFIED="1366558531318" TEXT="&#x800c;&#x5728;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x53e5;&#x67c4;&#x4e2d;&#x4f7f;&#x7528;&#x4ec0;&#x4e48;&#x7248;&#x672c;&#xff0c;&#x9700;&#x4f9d;&#x60c5;&#x51b5;&#x800c;&#x5b9a;&#xff0c;&#x5982;&#x679c;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x53e5;&#x67c4;&#x8bbf;&#x95ee;&#x8be5;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x90a3;&#x4e48;&#x5728;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x53e5;&#x67c4;&#x4e2d;&#x4ec5;&#x9700;&#x8981;spin_lock&#x548c;spin_unlock&#x6765;&#x4fdd;&#x62a4;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;&#x5c31;&#x53ef;&#x4ee5;&#x4e86;&#x3002;&#xa;&#x56e0;&#x4e3a;&#x5728;&#x6267;&#x884c;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x53e5;&#x67c4;&#x671f;&#x95f4;&#xff0c;&#x4e0d;&#x53ef;&#x80fd;&#x88ab;&#x540c;&#x4e00;CPU&#x4e0a;&#x7684;&#x8f6f;&#x4e2d;&#x65ad;&#x6216;&#x8fdb;&#x7a0b;&#x6253;&#x65ad;&#x3002;&#x4f46;&#x662f;&#x5982;&#x679c;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x53e5;&#x67c4;&#x8bbf;&#x95ee;&#x8be5;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#xff0c;&#x90a3;&#x4e48;&#x9700;&#x8981;&#x5728;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x53e5;&#x67c4;&#x4e2d;&#x4f7f;&#x7528;spin_lock_irq&#x548c;spin_unlock_irq&#x6765;&#x4fdd;&#x62a4;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;"/>
<node CREATED="1366558593738" ID="ID_387756259" MODIFIED="1366558596284" TEXT="spin_lock&#x7528;&#x4e8e;&#x963b;&#x6b62;&#x5728;&#x4e0d;&#x540c;CPU&#x4e0a;&#x7684;&#x6267;&#x884c;&#x5355;&#x5143;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x4ee5;&#x53ca;&#x4e0d;&#x540c;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4e92;&#x76f8;&#x62a2;&#x5360;&#x5bfc;&#x81f4;&#x7684;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x975e;&#x540c;&#x6b65;&#x8bbf;&#x95ee;&#xff0c;&#x800c;&#x4e2d;&#x65ad;&#x5931;&#x6548;&#x548c;&#x8f6f;&#x4e2d;&#x65ad;&#x5931;&#x6548;&#x5374;&#x662f;&#x4e3a;&#x4e86;&#x963b;&#x6b62;&#x5728;&#x540c;&#x4e00;CPU&#x4e0a;&#x8f6f;&#x4e2d;&#x65ad;&#x6216;&#x4e2d;&#x65ad;&#x5bf9;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x7684;&#x975e;&#x540c;&#x6b65;&#x8bbf;&#x95ee;"/>
</node>
</node>
<node CREATED="1366517264581" ID="ID_1988722295" MODIFIED="1366517272545" POSITION="left" TEXT="&#x8c03;&#x5ea6;"/>
<node CREATED="1366553038439" FOLDED="true" ID="ID_729773594" MODIFIED="1366557834779" POSITION="left" TEXT="&#x62a2;&#x5360;">
<node CREATED="1366553111091" ID="ID_436212208" MODIFIED="1366553114517" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1366553116099" ID="ID_1768756220" MODIFIED="1366553121540" TEXT="&#x975e;&#x62a2;&#x5360;">
<node CREATED="1366553138099" ID="ID_1487253196" MODIFIED="1366553154685" TEXT="&#x5728;&#x4e0d;&#x652f;&#x6301;&#x5185;&#x6838;&#x62a2;&#x5360;&#x7684;&#x5185;&#x6838;&#x4e2d;&#xff0c;&#x5185;&#x6838;&#x4ee3;&#x7801;&#x53ef;&#x4ee5;&#x4e00;&#x76f4;&#x6267;&#x884c;&#xff0c;&#x5230;&#x5b83;&#x5b8c;&#x6210;&#x4e3a;&#x6b62;&#x3002;&#xa;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x8c03;&#x5ea6;&#x7a0b;&#x5e8f;&#x6ca1;&#x6709;&#x529e;&#x6cd5;&#x5728;&#x4e00;&#x4e2a;&#x5185;&#x6838;&#x7ea7;&#x7684;&#x4efb;&#x52a1;&#x6b63;&#x5728;&#x6267;&#x884c;&#x7684;&#x65f6;&#x5019;&#x91cd;&#x65b0;&#x8c03;&#x5ea6; &#xa;-- &#x5185;&#x6838;&#x4e2d;&#x7684;&#x5404;&#x4efb;&#x52a1;&#x662f;&#x534f;&#x4f5c;&#x65b9;&#x5f0f;&#x8c03;&#x5ea6;&#x7684;&#xff0c;&#x4e0d;&#x5177;&#x5907;&#x62a2;&#x5360;&#x6027;"/>
</node>
<node CREATED="1366553888796" ID="ID_858945626" MODIFIED="1366553897855" TEXT="&#x53ef;&#x62a2;&#x5360;">
<node CREATED="1366553911745" ID="ID_859615498" MODIFIED="1366556659339" TEXT="&#x53ef;&#x62a2;&#x5360;&#x5f0f;&#x5185;&#x6838;&#x662f;&#x6307;&#x5185;&#x6838;&#x62a2;&#x5360;&#xff0c;&#x5373;&#x5f53;&#x8fdb;&#x7a0b;&#x4f4d;&#x4e8e;&#x5185;&#x6838;&#x7a7a;&#x95f4;&#x65f6;&#xff0c;&#x6709;&#x4e00;&#x4e2a;&#x66f4;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x4efb;&#x52a1;&#x51fa;&#x73b0;&#x65f6;&#xff0c;&#xa;&#x5982;&#x679c;&#x5f53;&#x524d;&#x5185;&#x6838;&#x5141;&#x8bb8;&#x62a2;&#x5360;&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x5c06;&#x5f53;&#x524d;&#x4efb;&#x52a1;&#x6302;&#x8d77;&#xff0c;&#x6267;&#x884c;&#x4f18;&#x5148;&#x7ea7;&#x66f4;&#x9ad8;&#x7684;&#x8fdb;&#x7a0b;&#xa;&#x4e00;&#x4e2a;&#x53ef;&#x62a2;&#x5360;&#x7684;Linux&#x5185;&#x6838;&#x53ef;&#x4ee5;&#x8ba9;Linux&#x5185;&#x6838;&#x5982;&#x540c;&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x4e00;&#x6837;&#x5141;&#x8bb8;&#x88ab;&#x62a2;&#x5360;&#x3002;&#xa;&#x5f53;&#x4e00;&#x4e2a;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x8fdb;&#x7a0b;&#x5230;&#x8fbe;&#x65f6;&#xff0c;&#x4e0d;&#x7ba1;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x5904;&#x4e8e;&#x7528;&#x6237;&#x6001;&#x8fd8;&#x662f;&#x6838;&#x5fc3;&#x6001;&#xff0c;&#x5982;&#x679c;&#x5f53;&#x524d;&#x5141;&#x8bb8;&#x62a2;&#x5360;&#xff0c;&#xa;&#x53ef;&#x62a2;&#x5360;&#x5185;&#x6838;&#x7684;Linux&#x90fd;&#x4f1a;&#x8c03;&#x5ea6;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x8fdb;&#x7a0b;&#x8fd0;&#x884c;"/>
</node>
</node>
<node CREATED="1366553171919" ID="ID_1405589356" MODIFIED="1366553180394" TEXT="linux&#x5185;&#x6838;">
<node CREATED="1366553182297" ID="ID_1945867338" MODIFIED="1366553211138" TEXT="&#x5728;2.6&#x7248;&#x7684;&#x5185;&#x6838;&#x4e2d;&#xff0c;&#x5185;&#x6838;&#x5f15;&#x4eba;&#x4e86;&#x62a2;&#x5360;&#x80fd;&#x529b;&#xff1b;&#xa;&#x73b0;&#x5728;&#xff0c;&#x53ea;&#x8981;&#x91cd;&#x65b0;&#x8c03;&#x5ea6;&#x662f;&#x5b89;&#x5168;&#x7684;&#xff0c;&#x90a3;&#x4e48;&#x5185;&#x6838;&#x5c31;&#x53ef;&#x4ee5;&#x5728;&#x4efb;&#x4f55;&#x65f6;&#x95f4;&#x62a2;&#x5360;&#x6b63;&#x5728;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;"/>
<node CREATED="1366553240241" ID="ID_1386321679" MODIFIED="1366556987705" TEXT="&#x62a2;&#x5360;&#x6761;&#x4ef6;">
<node CREATED="1366553248152" ID="ID_1330055784" MODIFIED="1366557293382" TEXT="&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x91cd;&#x65b0;&#x8c03;&#x5ea6;&#x624d;&#x662f;&#x5b89;&#x5168;&#x7684;&#x5462;? &#x53ea;&#x8981;&#x6ca1;&#x6709;&#x6301;&#x6709;&#x9501;&#xff0c;&#x5185;&#x6838;&#x5c31;&#x53ef;&#x4ee5;&#x8fdb;&#x884c;&#x62a2;&#x5360;&#x3002;&#xa;&#x9501;&#x548c;&#x4e2d;&#x65ad;&#x662f;&#x975e;&#x62a2;&#x5360;&#x533a;&#x57df;&#x7684;&#x6807;&#x5fd7;&#x3002;&#x7531;&#x4e8e;&#x5185;&#x6838;&#x662f;&#x652f;&#x6301;SMP&#x7684;&#xff0c;&#x6240;&#x4ee5;&#xff0c;&#xa;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6301;&#x6709;&#x9501;&#xff0c;&#x90a3;&#x4e48;&#x6b63;&#x5728;&#x6267;&#x884c;&#x7684;&#x4ee3;&#x7801;&#x5c31;&#x662f;&#x53ef;&#x91cd;&#x65b0;&#x5bfc;&#x5165;&#x7684;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x53ef;&#x4ee5;&#x62a2;&#x5360;&#x7684;"/>
</node>
<node CREATED="1366557001806" ID="ID_269575410" MODIFIED="1366557160645" TEXT="&#x4e0d;&#x53ef;&#x62a2;&#x5360;&#x6761;&#x4ef6;">
<node CREATED="1366557030639" ID="ID_723217294" MODIFIED="1366557048722" TEXT="&#x5185;&#x6838;&#x6b63;&#x8fdb;&#x884c;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x3002;&#x5728;Linux&#x5185;&#x6838;&#x4e2d;&#x8fdb;&#x7a0b;&#x4e0d;&#x80fd;&#x62a2;&#x5360;&#x4e2d;&#x65ad;(&#x4e2d;&#x65ad;&#x53ea;&#x80fd;&#x88ab;&#x5176;&#x4ed6;&#x4e2d;&#x65ad;&#x4e2d;&#x6b62;&#x3001;&#x62a2;&#x5360;&#xff0c;&#xa;&#x8fdb;&#x7a0b;&#x4e0d;&#x80fd;&#x4e2d;&#x6b62;&#x3001;&#x62a2;&#x5360;&#x4e2d;&#x65ad;)&#xff0c;&#x5728;&#x4e2d;&#x65ad;&#x4f8b;&#x7a0b;&#x4e2d;&#x4e0d;&#x5141;&#x8bb8;&#x8fdb;&#x884c;&#x8fdb;&#x7a0b;&#x8c03;&#x5ea6;&#x3002;&#xa;&#x8fdb;&#x7a0b;&#x8c03;&#x5ea6;&#x51fd;&#x6570;schedule()&#x4f1a;&#x5bf9;&#x6b64;&#x4f5c;&#x51fa;&#x5224;&#x65ad;&#xff0c;&#x5982;&#x679c;&#x662f;&#x5728;&#x4e2d;&#x65ad;&#x4e2d;&#x8c03;&#x7528;&#xff0c;&#x4f1a;&#x6253;&#x5370;&#x51fa;&#x9519;&#x4fe1;&#x606f;"/>
<node CREATED="1366557062242" ID="ID_1601073533" MODIFIED="1366557070362" TEXT="&#x5185;&#x6838;&#x6b63;&#x5728;&#x8fdb;&#x884c;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x7684;Bottom Half(&#x4e2d;&#x65ad;&#x7684;&#x5e95;&#x534a;&#x90e8;)&#x5904;&#x7406;&#x3002;&#xa;&#x786c;&#x4ef6;&#x4e2d;&#x65ad;&#x8fd4;&#x56de;&#x524d;&#x4f1a;&#x6267;&#x884c;&#x8f6f;&#x4e2d;&#x65ad;&#xff0c;&#x6b64;&#x65f6;&#x4ecd;&#x7136;&#x5904;&#x4e8e;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x4e2d;"/>
<node CREATED="1366557082556" ID="ID_1849230625" MODIFIED="1366557099027" TEXT="&#x5185;&#x6838;&#x7684;&#x4ee3;&#x7801;&#x6bb5;&#x6b63;&#x6301;&#x6709;spinlock&#x81ea;&#x65cb;&#x9501;&#x3001;writelock/readlock&#x8bfb;&#x5199;&#x9501;&#x7b49;&#x9501;&#xff0c;&#x5904;&#x5e72;&#x8fd9;&#x4e9b;&#x9501;&#x7684;&#x4fdd;&#x62a4;&#x72b6;&#x6001;&#x4e2d;&#x3002;&#xa;&#x5185;&#x6838;&#x4e2d;&#x7684;&#x8fd9;&#x4e9b;&#x9501;&#x662f;&#x4e3a;&#x4e86;&#x5728;SMP&#x7cfb;&#x7edf;&#x4e2d;&#x77ed;&#x65f6;&#x95f4;&#x5185;&#x4fdd;&#x8bc1;&#x4e0d;&#x540c;CPU&#x4e0a;&#x8fd0;&#x884c;&#x7684;&#x8fdb;&#x7a0b;&#x5e76;&#x53d1;&#x6267;&#x884c;&#x7684;&#x6b63;&#x786e;&#x6027;&#x3002;&#xa;&#x5f53;&#x6301;&#x6709;&#x8fd9;&#x4e9b;&#x9501;&#x65f6;&#xff0c;&#x5185;&#x6838;&#x4e0d;&#x5e94;&#x8be5;&#x88ab;&#x62a2;&#x5360;&#xff0c;&#x5426;&#x5219;&#x7531;&#x4e8e;&#x62a2;&#x5360;&#x5c06;&#x5bfc;&#x81f4;&#x5176;&#x4ed6;CPU&#x957f;&#x671f;&#x4e0d;&#x80fd;&#x83b7;&#x5f97;&#x9501;&#x800c;&#x6b7b;&#x7b49;"/>
<node CREATED="1366557111411" ID="ID_231816427" MODIFIED="1366557119355" TEXT="&#x5185;&#x6838;&#x6b63;&#x5728;&#x6267;&#x884c;&#x8c03;&#x5ea6;&#x7a0b;&#x5e8f;Scheduler&#x3002;&#x62a2;&#x5360;&#x7684;&#x539f;&#x56e0;&#x5c31;&#x662f;&#x4e3a;&#x4e86;&#x8fdb;&#x884c;&#x65b0;&#x7684;&#x8c03;&#x5ea6;&#xff0c;&#xa;&#x6ca1;&#x6709;&#x7406;&#x7531;&#x5c06;&#x8c03;&#x5ea6;&#x7a0b;&#x5e8f;&#x62a2;&#x5360;&#x6389;&#x518d;&#x8fd0;&#x884c;&#x8c03;&#x5ea6;&#x7a0b;&#x5e8f;"/>
<node CREATED="1366557131290" ID="ID_869512505" MODIFIED="1366557141219" TEXT="&#x5185;&#x6838;&#x6b63;&#x5728;&#x5bf9;&#x6bcf;&#x4e2a;CPU&#x201c;&#x79c1;&#x6709;&#x201d;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x64cd;&#x4f5c;(Per-CPU date structures)&#x3002;&#x5728;SMP&#x4e2d;&#xff0c;&#x5bf9;&#x4e8e;per-CPU&#x6570;&#x636e;&#x7ed3;&#x6784;&#x672a;&#x7528;spinlocks&#x4fdd;&#x62a4;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x4e9b;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x9690;&#x542b;&#x5730;&#x88ab;&#x4fdd;&#x62a4;&#x4e86;(&#x4e0d;&#x540c;&#x7684;CPU&#x6709;&#x4e0d;&#x4e00;&#x6837;&#x7684;per-CPU&#x6570;&#x636e;&#xff0c;&#x5176;&#x4ed6;CPU&#x4e0a;&#x8fd0;&#x884c;&#x7684;&#x8fdb;&#x7a0b;&#x4e0d;&#x4f1a;&#x7528;&#x5230;&#x53e6;&#x4e00;&#x4e2a;CPU&#x7684;per-CPU&#x6570;&#x636e;)&#x3002;&#x4f46;&#x662f;&#x5982;&#x679c;&#x5141;&#x8bb8;&#x62a2;&#x5360;&#xff0c;&#x4f46;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x88ab;&#x62a2;&#x5360;&#x540e;&#x91cd;&#x65b0;&#x8c03;&#x5ea6;&#xff0c;&#x6709;&#x53ef;&#x80fd;&#x8c03;&#x5ea6;&#x5230;&#x5176;&#x4ed6;&#x7684;CPU&#x4e0a;&#x53bb;&#xff0c;&#x8fd9;&#x65f6;&#x5b9a;&#x4e49;&#x7684;Per-CPU&#x53d8;&#x91cf;&#x5c31;&#x4f1a;&#x6709;&#x95ee;&#x9898;&#xff0c;&#x8fd9;&#x65f6;&#x5e94;&#x7981;&#x62a2;&#x5360;"/>
</node>
<node CREATED="1366553465947" ID="ID_464678103" MODIFIED="1366557189159" TEXT="&#x62a2;&#x5360;&#x68c0;&#x67e5;&#x70b9;">
<node CREATED="1366553492813" ID="ID_1284999223" MODIFIED="1366553494406" TEXT="&#x5f53;&quot;&#x4ece;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&quot;&#x6b63;&#x5728;&#x6267;&#x884c;&#xff0c;&#x4e14;&#x8fd4;&#x56de;&#x5185;&#x6838;&#x7a7a;&#x95f4;&#x4e4b;&#x524d;"/>
<node CREATED="1366553506506" ID="ID_420064979" MODIFIED="1366553507890" TEXT="&#x5185;&#x6838;&#x4ee3;&#x7801;&#x518d;&#x4e00;&#x6b21;&#x5177;&#x6709;&#x53ef;&#x62a2;&#x5360;&#x6027;&#x7684;&#x65f6;&#x5019;"/>
<node CREATED="1366553521771" ID="ID_1612171902" MODIFIED="1366553523187" TEXT="&#x5982;&#x679c;&#x5185;&#x6838;&#x4e2d;&#x7684;&#x4efb;&#x52a1;&#x663e;&#x5f0f;&#x7684;&#x8c03;&#x7528;schedule()"/>
<node CREATED="1366553535560" ID="ID_1304997567" MODIFIED="1366553536905" TEXT="&#x5982;&#x679c;&#x5185;&#x6838;&#x4e2d;&#x7684;&#x4efb;&#x52a1;&#x963b;&#x585e;(&#x8fd9;&#x540c;&#x6837;&#x4e5f;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;schedule())"/>
</node>
<node CREATED="1366553320427" ID="ID_59099866" MODIFIED="1366557162867" TEXT="&#x5b9e;&#x73b0;">
<node CREATED="1366553325225" FOLDED="true" ID="ID_976065838" MODIFIED="1366553715772" TEXT="&#x4e3a;&#x4e86;&#x652f;&#x6301;&#x5185;&#x6838;&#x62a2;&#x5360;&#x6240;&#x4f5c;&#x7684;&#x7b2c;&#x4e00;&#x5904;&#x53d8;&#x52a8;&#x5c31;&#x662f;&#x6bcf;&#x4e2a;&#x8fdb;&#x7a0b;&#x7684;thread_info&#x5f15;&#x5165;&#x4e86;preempt_count (thread_info.preempt_count)&#x8ba1;&#x6570;&#x5668;&#x3002;&#x8be5;&#x8ba1;&#x6570;&#x5668;&#x521d;&#x59cb;&#x503c;&#x4e3a;0&#xff0c;&#x6bcf;&#x5f53;&#x4f7f;&#x7528;&#x9501;&#x7684;&#x65f6;&#x5019;&#x6570;&#x503c;&#x52a0;1&#xff0c;&#x91ca;&#x653e;&#x9501;&#x7684;&#x65f6;&#x5019;&#x6570;&#x503c;&#x51cf;1&#x3002;&#x5f53;&#x6570;&#x503c;&#x4e3a;0&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5185;&#x6838;&#x5c31;&#x53ef;&#x6267;&#x884c;&#x62a2;&#x5360;&#x3002;&#x4ece;&#x4e2d;&#x65ad;&#x8fd4;&#x56de;&#x5185;&#x6838;&#x7a7a;&#x95f4;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5185;&#x6838;&#x4f1a;&#x68c0;&#x67e5;need_resched&#x548c;preempt_count&#x7684;&#x503c;&#x3002;&#x5982;&#x679c;need_resched&#x88ab;&#x8bbe;&#x7f6e;&#xff0c;&#x5e76;&#x4e14;preempt_count&#x4e3a;0&#x7684;&#x8bdd;&#xff0c;&#x8fd9;&#x8bf4;&#x660e;&#x6709;&#x4e00;&#x4e2a;&#x66f4;&#x4e3a;&#x91cd;&#x8981;&#x7684;&#x4efb;&#x52a1;&#x9700;&#x8981;&#x6267;&#x884c;&#x5e76;&#x4e14;&#x53ef;&#x4ee5;&#x5b89;&#x5168;&#x5730;&#x62a2;&#x5360;&#xff0c;&#x6b64;&#x65f6;&#xff0c;&#x8c03;&#x5ea6;&#x7a0b;&#x5e8f;&#x5c31;&#x4f1a;&#x8c03;&#x5ea6;(&#x62a2;&#x5360;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;)&#x3002;&#x5982;&#x679c;preempt_count&#x4e0d;&#x4e3a;0&#xff0c;&#x8bf4;&#x660e;&#x5f53;&#x524d;&#x4efb;&#x52a1;&#x6301;&#x6709;&#x9501;&#xff0c;&#x6240;&#x4ee5;&#x62a2;&#x5360;&#x662f;&#x4e0d;&#x5b89;&#x5168;&#x7684;&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x5c31;&#x4f1a;&#x50cf;&#x901a;&#x5e38;&#x90a3;&#x6837;&#x76f4;&#x63a5;&#x4ece;&#x4e2d;&#x65ad;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x6267;&#x884c;&#x8fdb;&#x7a0b;&#x3002;&#x5982;&#x679c;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x6240;&#x6301;&#x6709;&#x7684;&#x6240;&#x6709;&#x7684;&#x9501;&#x90fd;&#x88ab;&#x91ca;&#x653e;&#x4e86;&#x3002;&#x90a3;&#x4e48;preempt_count&#x5c31;&#x4f1a;&#x91cd;&#x65b0;&#x4e3a;0&#x3002;&#x6b64;&#x65f6;&#xff0c;&#x91ca;&#x653e;&#x9501;&#x7684;&#x4ee3;&#x7801;&#x4f1a;&#x68c0;&#x67e5;need_resched&#x662f;&#x5426;&#x88ab;&#x8bbe;&#x7f6e;&#x3002;&#x5982;&#x679c;&#x662f;&#x7684;&#x8bdd;&#xff0c;&#x5c31;&#x4f1a;&#x8c03;&#x7528;&#x8c03;&#x5ea6;&#x7a0b;&#x5e8f;&#x3002;&#x6709;&#x4e9b;&#x5185;&#x6838;&#x4ee3;&#x7801;&#x9700;&#x8981;&#x5141;&#x8bb8;&#x6216;&#x7981;&#x6b62;&#x5185;&#x6838;&#x62a2;&#x5360;">
<node CREATED="1366553643862" ID="ID_1455903171" MODIFIED="1366553657266" TEXT="current-&gt;thread_info.flags&#x4e2d;TIF_NEED_RESCHED&#x4e3a;1&#xff0c;&#xa;&#x8868;&#x793a;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x9700;&#x8981;&#x6267;&#x884c;schedule()&#x91ca;&#x653e;CPU&#x63a7;&#x5236;&#x6743;"/>
<node CREATED="1366553670460" ID="ID_667654594" MODIFIED="1366553679763" TEXT="current-&gt;thread_info.preempt_count&#x7684;&#x503c;&#x4e0d;&#x4e3a;0&#xff0c;&#xa;&#x8868;&#x793a;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x6301;&#x6709;&#x9501;&#x4e0d;&#x80fd;&#x91ca;&#x653e;CPU&#x63a7;&#x5236;&#x6743;(&#x4e0d;&#x80fd;&#x88ab;&#x62a2;&#x5360;)"/>
</node>
<node CREATED="1366557430460" ID="ID_1601209142" MODIFIED="1366557438417" TEXT="&#x53ef;&#x62a2;&#x5360;Linux&#x5185;&#x6838;&#x5728;&#x5185;&#x6838;&#x7684;&#x4efb;&#x4e00;&#x70b9;&#x53ef;&#x88ab;&#x62a2;&#x5360;&#xff0c;&#x4e3b;&#x8981;&#x5c31;&#x662f;&#x56e0;&#x4e3a;&#x5728;&#x4efb;&#x610f;&#x4e00;&#x70b9;&#x4e2d;&#x65ad;&#x90fd;&#x6709;&#x53ef;&#x80fd;&#x53d1;&#x751f;&#xff0c;&#x6bcf;&#x5f53;&#x4e2d;&#x65ad;&#x53d1;&#x751f;&#xff0c;Linux&#x53ef;&#x62a2;&#x5360;&#x5185;&#x6838;&#x5728;&#x5904;&#x7406;&#x5b8c;&#x4e2d;&#x65ad;&#x8fd4;&#x56de;&#x65f6;&#x90fd;&#x4f1a;&#x8fdb;&#x884c;&#x5185;&#x6838;&#x7684;&#x53ef;&#x62a2;&#x5360;&#x5224;&#x65ad;&#x3002;&#x82e5;&#x5185;&#x6838;&#x5f53;&#x524d;&#x6240;&#x5904;&#x72b6;&#x6001;&#x5141;&#x8bb8;&#x88ab;&#x62a2;&#x5360;&#xff0c;&#x5185;&#x6838;&#x90fd;&#x4f1a;&#x91cd;&#x65b0;&#x8fdb;&#x884c;&#x8c03;&#x5ea6;&#x9009;&#x53d6;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x8fdb;&#x7a0b;&#x8fd0;&#x884c;&#x3002;&#x8fd9;&#x4e00;&#x70b9;&#x662f;&#x4e0e;&#x975e;&#x53ef;&#x62a2;&#x5360;&#x7684;&#x5185;&#x6838;&#x4e0d;&#x4e00;&#x6837;&#x7684;&#x3002;&#x5728;&#x975e;&#x53ef;&#x62a2;&#x5360;&#x7684;Linux&#x5185;&#x6838;&#x4e2d;&#xff0c;&#x4ece;&#x786c;&#x4ef6;&#x4e2d;&#x65ad;&#x8fd4;&#x56de;&#x65f6;&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x524d;&#x88ab;&#x4e2d;&#x65ad;&#x8fdb;&#x7a0b;&#x662f;&#x7528;&#x6237;&#x6001;&#x8fdb;&#x7a0b;&#x65f6;&#x624d;&#x4f1a;&#x91cd;&#x65b0;&#x8c03;&#x5ea6;&#xff0c;&#x82e5;&#x5f53;&#x524d;&#x88ab;&#x4e2d;&#x65ad;&#x8fdb;&#x7a0b;&#x662f;&#x6838;&#x5fc3;&#x6001;&#x8fdb;&#x7a0b;&#xff0c;&#x5219;&#x4e0d;&#x8fdb;&#x884c;&#x8c03;&#x5ea6;&#xff0c;&#x800c;&#x662f;&#x6062;&#x590d;&#x88ab;&#x4e2d;&#x65ad;&#x7684;&#x8fdb;&#x7a0b;&#x7ee7;&#x7eed;&#x8fd0;&#x884c;"/>
<node CREATED="1366557463630" ID="ID_181172392" MODIFIED="1366557470522" TEXT="&#x53e6;&#x4e00;&#x57fa;&#x672c;&#x4fee;&#x6539;&#x662f;&#x91cd;&#x65b0;&#x5b9a;&#x4e49;&#x4e86;&#x81ea;&#x65cb;&#x9501;&#x3001;&#x8bfb;&#x3001;&#x5199;&#x9501;&#xff0c;&#x5728;&#x9501;&#x64cd;&#x4f5c;&#x65f6;&#x589e;&#x52a0;&#x4e86;&#x5bf9;preempt count&#x53d8;&#x91cf;&#x7684;&#x64cd;&#x4f5c;&#x3002;&#x5728;&#x5bf9;&#x8fd9;&#x4e9b;&#x9501;&#x8fdb;&#x884c;&#x52a0;&#x9501;&#x64cd;&#x4f5c;&#x65f6;preemptcount&#x53d8;&#x91cf;&#x52a0;1&#xff0c;&#x4ee5;&#x7981;&#x6b62;&#x5185;&#x6838;&#x62a2;&#x5360;&#xff1b;&#x5728;&#x91ca;&#x653e;&#x9501;&#x65f6;preemptcount&#x53d8;&#x91cf;&#x51cf;1&#xff0c;&#x5e76;&#x5728;&#x5185;&#x6838;&#x7684;&#x62a2;&#x5360;&#x6761;&#x4ef6;&#x6ee1;&#x8db3;&#x4e14;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8c03;&#x5ea6;&#x65f6;&#x8fdb;&#x884c;&#x62a2;&#x5360;&#x8c03;&#x5ea6;"/>
</node>
</node>
</node>
</node>
</map>
